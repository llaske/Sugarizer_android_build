var iconColorCache={names:[],values:[]};enyo.kind({name:"Sugar.Icon",kind:enyo.Control,published:{icon:null,size:constant.iconSizeStandard,x:-1,y:-1,colorized:!1,colorizedColor:null,disabled:!1,disabledBackground:"white",popupShow:null,popupHide:null,isNative:!1,data:null},classes:"web-activity",components:[{name:"icon",classes:"web-activity-icon",onmouseover:"popupShowTimer",onmouseout:"popupHideTimer"},{name:"disable",classes:"web-activity-disable",showing:!1}],create:function(){this.inherited(arguments),this.iconChanged(),this.sizeChanged(),this.colorizedColorChanged(),this.colorizedChanged(),this.isNativeChanged(),this.disabledBackgroundChanged(),this.disabledChanged(),this.xChanged(),this.yChanged(),this.timer=null,this.emulateMouseOver=!1},popupShowTimer:function(){null!=this.popupShow&&(null!=this.timer&&window.clearInterval(this.timer),this.timer=window.setInterval(enyo.bind(this,"showPopup"),constant.timerPopupDuration))},showPopup:function(i,e){this.popupShow(this),window.clearInterval(this.timer),this.timer=null},popupHideTimer:function(i,e){null!=this.popupHide&&(null!=this.timer&&window.clearInterval(this.timer),this.timer=window.setInterval(enyo.bind(this,"hidePopup"),constant.timerPopupDuration))},hidePopup:function(){this.popupHide(this)&&(window.clearInterval(this.timer),this.timer=null)},rendered:function(){this.inherited(arguments);var i=this.$.icon.hasNode();if(i&&enyo.platform.touch){var e=this;(enyo.platform.ios||enyo.platform.androidChrome)&&(enyo.dispatcher.listen(i,"touchstart",(function(i){mouse.position={x:i.touches[0].clientX,y:i.touches[0].clientY},e.popupShowTimer()})),enyo.dispatcher.listen(i,"touchend",(function(i){e.popupHideTimer()})))}if(this.colorized&&!this.icon.isNative){var o,t=this.colorizedColor,n=this.icon.directory+"/"+this.icon.icon;if(i.style.backgroundImage="url('"+n+"')",null==t){t=preferences.getColor(),o=n+"_"+t.stroke+"_"+t.fill;for(var s=0;s<iconColorCache.names.length;s++)if(iconColorCache.names[s]==o)return void(i.style.backgroundImage=iconColorCache.values[s])}else o=n+"_"+t.stroke+"_"+t.fill;iconLib.colorize(i,t,(function(){iconColorCache.names.push(o),iconColorCache.values.push(i.style.backgroundImage)}))}},cursorIsInside:function(){return util.cursorIsInside(this)},xChanged:function(){-1!=this.x&&this.applyStyle("margin-left",this.x+"px")},yChanged:function(){-1!=this.y&&this.applyStyle("margin-top",this.y+"px")},sizeChanged:function(){this.$.icon.applyStyle("width",this.size+"px"),this.$.icon.applyStyle("height",this.size+"px"),this.$.icon.applyStyle("background-size",this.size+"px "+this.size+"px"),this.$.disable.applyStyle("width",this.size+"px"),this.$.disable.applyStyle("height",this.size+"px"),this.$.disable.applyStyle("background-size",this.size+"px "+this.size+"px")},iconChanged:function(){null!=this.icon?null!=this.icon.isNative?this.$.icon.applyStyle("background-image","url('"+this.icon.icon+"');"):this.$.icon.applyStyle("background-image","url('"+this.icon.directory+"/"+this.icon.icon+"')"):this.$.icon.applyStyle("background-image",null)},colorizedColorChanged:function(){this.render()},colorizedChanged:function(){this.render()},isNativeChanged:function(){this.render()},disabledBackgroundChanged:function(){this.$.disable.applyStyle("background-color",this.disabledBackground)},disabledChanged:function(){this.$.disable.setShowing(this.disabled)},colorize:function(i){var e=this.hasNode();e&&e.style.backgroundImage&&iconLib.colorize(e,i,(function(){}))}});