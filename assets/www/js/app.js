define(["webL10n","sugar-web/graphics/icon","sugar-web/graphics/xocolor","sugar-web/graphics/radiobuttonsgroup","sugar-web/datastore","sugar-web/presence","settings","server","humane","util","tutorial","stats","autosync"],(function(e,t,o,n,a,r,s,i,c,p,u,l,d){l10n=e,l10n.start(),iconLib=t,xoPalette=o,radioButtonsGroup=n,datastore=a,presence=r,preferences=s,myserver=i,humane=c,tutorial=u,stats=l,autosync=d,util=p;var g=2,m=!1,loadpreference=function(){enyo.platform.electron=/Electron/.test(navigator.userAgent);var e,t=(e=RegExp("[?&]"+"rst"+"=([^&]*)").exec(window.location.search))&&decodeURIComponent(e[1].replace(/\+/g," "));preferences.load((function(e){m=e,util.getClientType()==constant.appType&&(enyo.platform.electron||enyo.platform.android||enyo.platform.androidChrome)&&(1==t?(util.cleanDatastore(!0),m=!1):2==t&&preferences.isConnected()&&(util.cleanDatastore(null),m=!1)),app=m?new Sugar.Desktop:new Sugar.FirstScreen,document.onmousemove=function(e){mouse.position={x:e.pageX,y:e.pageY}},util.handleVolumeButtons(),app.renderInto(document.getElementById("canvas"))}))};window.addEventListener("localized",(function(){app?((app.getToolbar?app.getToolbar():app).localize(),app.render()):0==--g&&loadpreference()}),!1),enyo.platform.ios&&"http"!=document.location.protocol.substr(0,4)&&document.addEventListener("deviceready",(function(){var release=function(){e.release()},e=new Media("audio/silence.mp3",release,release,release);e.play()})),requirejs(["domReady!"],(function(e){0==--g&&loadpreference()}))}));