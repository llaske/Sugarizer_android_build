/*! Sugarizer 2020-03-14 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self).cytoscape=b()}(this,function(){"use strict";function a(b){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return c}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function h(a){if("number"==typeof a)return a;if(function(a){return"symbol"==typeof a||function(a){return!!a&&"object"==typeof a}(a)&&Ya.call(a)==Pa}(a))return Oa;if(g(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=g(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(Qa,"");var c=Sa.test(a);return c||Ta.test(a)?Ua(a.slice(2),c?2:8):Ra.test(a)?Oa:+a}function i(a,b,c,d,e,f){var g;return g=na(a)?a:md[a]||md.euclidean,0===b&&na(a)?g(e,f):g(b,c,d,e,f)}function j(a,b,c,d){for(var e=[],f=new Ib,g=a.cy().hasCompoundNodes(),h=0;h<a.length;h++){var i=a[h];c?e.push(i):g&&d(e,f,i)}for(;e.length>0;){var j=e.shift();b(j),f.add(j.id()),g&&d(e,f,j)}return a}function k(a,b,c){if(c.isParent())for(var d=c._private.children,e=0;e<d.length;e++){var f=d[e];b.has(f.id())||a.push(f)}}function l(a,b,c){if(c.isChild()){var d=c._private.parent;b.has(d.id())||a.push(d)}}function m(a,b,c){l(a,b,c),k(a,b,c)}function n(a){return function(b){if(void 0===b&&(b=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var c=0,d=this[0],e=d._private.edges,f=0;f<e.length;f++){var g=e[f];!b&&g.isLoop()||(c+=a(d,g))}return c}}}function o(a,b){return function(c){for(var d,e=this.nodes(),f=0;f<e.length;f++){var g=e[f][a](c);void 0===g||void 0!==d&&!b(g,d)||(d=g)}return d}}function p(){return!1}function q(){return!0}function r(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wf,b=arguments.length>1?arguments[1]:void 0,c=0;c<vf.length;c++){var d=vf[c];this[d]=a[d]||uf[d]}this.context=b||this.context,this.listeners=[],this.emitting=0}function s(a,b,c){var d,e=c._private,f=e.styleCache=e.styleCache||[];return null!=(d=f[a])?d:d=f[a]=b(c)}function t(a,b){return a=jb(a),function(c){return s(a,b,c)}}function u(a,b){a=jb(a);var c=function(a){return b.call(a)};return function(){var b=this[0];if(b)return s(a,c,b)}}function v(a,b){var c=a._private.data.parent?a.parents():null;if(c)for(var d=0;d<c.length;d++)if(!b(c[d]))return!1;return!0}function w(a){var b=a.ok,c=a.edgeOkViaNode||a.ok,d=a.parentOk||a.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var e=this[0],f=a.hasCompoundNodes();if(e){var g=e._private;if(!b(e))return!1;if(e.isNode())return!f||v(e,d);var h=g.source,i=g.target;return c(h)&&(!f||v(h,c))&&(h===i||c(i)&&(!f||v(i,c)))}}}function x(a){return function(){var b=arguments,c=[];if(2===b.length){var d=b[0],e=b[1];this.on(a.event,d,e)}else if(1===b.length&&na(b[0])){var f=b[0];this.on(a.event,f)}else if(0===b.length||1===b.length&&oa(b[0])){for(var g=1===b.length?b[0]:null,h=0;h<this.length;h++){var i=this[h],j=!a.ableField||i._private[a.ableField],k=i._private[a.field]!=a.value;if(a.overrideAble){var l=a.overrideAble(i);if(void 0!==l&&(j=l,!l))return this}j&&(i._private[a.field]=a.value,k&&c.push(i))}var m=this.spawn(c);m.updateStyle(),m.emit(a.event),g&&m.emit(g)}return this}}function y(a){Qf[a.field]=function(){var b=this[0];if(b){if(a.overrideField){var c=a.overrideField(b);if(void 0!==c)return c}return b._private[a.field]}},Qf[a.on]=x({event:a.on,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!0}),Qf[a.off]=x({event:a.off,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!1})}function z(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d]._private[a.attr];e&&c.push(e)}return this.spawn(c,{unique:!0}).filter(b)}}function A(a){return function(b){var c=[],d=this._private.cy,e=a||{};ma(b)&&(b=d.$(b));for(var f=0;f<b.length;f++)for(var g=b[f]._private.edges,h=0;h<g.length;h++){var i=g[h],j=i._private.data,k=this.hasElementWithId(j.source)&&b.hasElementWithId(j.target),l=b.hasElementWithId(j.source)&&this.hasElementWithId(j.target);if(k||l){if(e.thisIsSrc||e.thisIsTgt){if(e.thisIsSrc&&!k)continue;if(e.thisIsTgt&&!l)continue}c.push(i)}}return this.spawn(c,{unique:!0})}}function B(a){return a=Ha({},{codirected:!1},a),function(b){for(var c=[],d=this.edges(),e=a,f=0;f<d.length;f++)for(var g=d[f]._private,h=g.source,i=h._private.data.id,j=g.data.target,k=h._private.edges,l=0;l<k.length;l++){var m=k[l],n=m._private.data,o=n.target,p=n.source,q=o===j&&p===i,r=i===o&&j===p;(e.codirected&&q||!e.codirected&&(q||r))&&c.push(m)}return this.spawn(c,{unique:!0}).filter(b)}}function C(a,b,c,d){function e(a,b){return 1-3*b+3*a}function f(a,b){return 3*b-6*a}function g(a){return 3*a}function h(a,b,c){return((e(b,c)*a+f(b,c))*a+g(b))*a}function i(a,b,c){return 3*e(b,c)*a*a+2*f(b,c)*a+g(b)}function j(b){for(var d=0,e=1,f=p-1;e!==f&&t[e]<=b;++e)d+=q;var g=d+(b-t[--e])/(t[e+1]-t[e])*q,j=i(g,a,c);return j>=m?function(b,d){for(var e=0;e<l;++e){var f=i(d,a,c);if(0===f)return d;d-=(h(d,a,c)-b)/f}return d}(b,g):0===j?g:function(b,d,e){var f,g,i=0;do{(f=h(g=d+(e-d)/2,a,c)-b)>0?e=g:d=g}while(Math.abs(f)>n&&++i<o);return g}(b,d,d+q)}function k(){u=!0,a===b&&c===d||function(){for(var b=0;b<p;++b)t[b]=h(b*q,a,c)}()}var l=4,m=.001,n=1e-7,o=10,p=11,q=1/(p-1),r="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var s=0;s<4;++s)if("number"!=typeof arguments[s]||isNaN(arguments[s])||!isFinite(arguments[s]))return!1;a=Math.min(a,1),c=Math.min(c,1),a=Math.max(a,0),c=Math.max(c,0);var t=r?new Float32Array(p):new Array(p),u=!1,v=function(e){return u||k(),a===b&&c===d?e:0===e?0:1===e?1:h(j(e),b,d)};v.getControlPoints=function(){return[{x:a,y:b},{x:c,y:d}]};var w="generateBezier("+[a,b,c,d]+")";return v.toString=function(){return w},v}function D(a,b,c,d,e){if(1===d)return c;if(b===c)return c;var f=e(b,c,d);return null==a?f:((a.roundValue||a.color)&&(f=Math.round(f)),void 0!==a.min&&(f=Math.max(f,a.min)),void 0!==a.max&&(f=Math.min(f,a.max)),f)}function E(a,b){return null!=a.pfValue||null!=a.value?null==a.pfValue||null!=b&&"%"===b.type.units?a.value:a.pfValue:a}function F(a,b,c,d,e){var f=null!=e?e.type:null;c<0?c=0:c>1&&(c=1);var g=E(a,e),h=E(b,e);if(qa(g)&&qa(h))return D(f,g,h,c,d);if(oa(g)&&oa(h)){for(var i=[],j=0;j<h.length;j++){var k=g[j],l=h[j];if(null!=k&&null!=l){var m=D(f,k,l,c,d);i.push(m)}else i.push(l)}return i}}function G(a,b,c,d){var e=!d,f=a._private,g=b._private,h=g.easing,i=g.startTime,j=(d?a:a.cy()).style();if(!g.easingImpl)if(null==h)g.easingImpl=_f.linear;else{var k,l,m;k=ma(h)?j.parse("transition-timing-function",h).value:h,ma(k)?(l=k,m=[]):(l=k[1],m=k.slice(2).map(function(a){return+a})),m.length>0?("spring"===l&&m.push(g.duration),g.easingImpl=_f[l].apply(null,m)):g.easingImpl=_f[l]}var n,o=g.easingImpl;if(n=0===g.duration?1:(c-i)/g.duration,g.applying&&(n=g.progress),n<0?n=0:n>1&&(n=1),null==g.delay){var p=g.startPosition,q=g.position;if(q&&e&&!a.locked()){var r={};H(p.x,q.x)&&(r.x=F(p.x,q.x,n,o)),H(p.y,q.y)&&(r.y=F(p.y,q.y,n,o)),a.position(r)}var s=g.startPan,t=g.pan,u=f.pan,v=null!=t&&d;v&&(H(s.x,t.x)&&(u.x=F(s.x,t.x,n,o)),H(s.y,t.y)&&(u.y=F(s.y,t.y,n,o)),a.emit("pan"));var w=g.startZoom,x=g.zoom,y=null!=x&&d;y&&(H(w,x)&&(f.zoom=kc(f.minZoom,F(w,x,n,o),f.maxZoom)),a.emit("zoom")),(v||y)&&a.emit("viewport");var z=g.style;if(z&&z.length>0&&e){for(var A=0;A<z.length;A++){var B=z[A],C=B.name,D=B,E=g.startStyle[C],G=F(E,D,n,o,j.properties[E.name]);j.overrideBypass(a,C,G)}a.emit("style")}}return g.progress=n,n}function H(a,b){return!!(null!=a&&null!=b&&(qa(a)&&qa(b)||a&&b))}function I(a,b,c,d){var e=b._private;e.started=!0,e.startTime=c-e.progress*e.duration}function J(a,b){function c(b,c){var d=b._private,f=d.animation.current,g=d.animation.queue,h=!1;if(!c&&"none"===b.pstyle("display").value){f=f.splice(0,f.length).concat(g.splice(0,g.length));for(var i=0;i<f.length;i++)f[i].stop()}if(0===f.length){var j=g.shift();j&&f.push(j)}for(var k=function(a){for(var b=a.length-1;b>=0;b--)(0,a[b])();a.splice(0,a.length)},l=f.length-1;l>=0;l--){var m=f[l],n=m._private;n.stopped?(f.splice(l,1),n.hooked=!1,n.playing=!1,n.started=!1,k(n.frames)):(n.playing||n.applying)&&(n.playing&&n.applying&&(n.applying=!1),n.started||I(0,m,a),G(b,m,a,c),n.applying&&(n.applying=!1),k(n.frames),null!=n.step&&n.step(a),m.completed()&&(f.splice(l,1),n.hooked=!1,n.playing=!1,n.started=!1,k(n.completes)),h=!0)}return c||0!==f.length||0!==g.length||e.push(b),h}for(var d=b._private.aniEles,e=[],f=!1,g=0;g<d.length;g++){var h=c(d[g]);f=f||h}var i=c(b,!0);(f||i)&&(d.length>0?b.notify("draw",d):b.notify("draw")),d.unmerge(e),b.emit("step")}function K(a){this.options=Ha({},zg,a)}function L(a){this.options=Ha({},Cg,a)}function M(a){this.options=Ha({},Eg,a)}function N(a){this.options=Ha({},Fg,a),this.options.layout=this}function O(a){this.options=Ha({},Zg,a)}function P(a){this.options=Ha({},$g,a)}function Q(a){this.options=Ha({},_g,a)}function R(a){this.options=Ha({},ah,a)}function S(a){this.options=a,this.notifications=0}function T(a){var b=[];if(null!=a){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];b.push({x:d,y:e})}return b}}function U(a,b,c){for(var d=function(a,b,c,d){return ic(a,b,c,d)},e=b._private.rstyle.bezierPts,f=0;f<a.bezierProjPcts.length;f++){var g=a.bezierProjPcts[f];e.push({x:d(c[0],c[2],c[4],g),y:d(c[1],c[3],c[5],g)})}}function V(a,b){for(var c=0;c<b.length;c++){var d=b[c];a.lineTo(d.x,d.y)}}function W(a,b,c){for(var d,e=0;e<b.length;e++){var f=b[e];0===e&&(d=f),a.lineTo(f.x,f.y)}a.quadraticCurveTo(c.x,c.y,d.x,d.y)}function X(a,b,c){a.beginPath&&a.beginPath();for(var d=b,e=0;e<d.length;e++){var f=d[e];a.lineTo(f.x,f.y)}var g=c,h=c[0];for(a.moveTo(h.x,h.y),e=1;e<g.length;e++)f=g[e],a.lineTo(f.x,f.y);a.closePath&&a.closePath()}function Y(a,b,c,d){a.arc(b,c,d,0,2*Math.PI,!1)}function Z(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath(),a.fill()}function $(a){var b=a.indexOf(",");return a.substr(b+1)}function _(a,b,c){var d=function(){return b.toDataURL(c,a.quality)};switch(a.output){case"blob-promise":return new Xd(function(d,e){try{b.toBlob(function(a){null!=a?d(a):e(new Error("`canvas.toBlob()` sent a null value in its callback"))},c,a.quality)}catch(a){e(a)}});case"blob":return function(a,b){for(var c=atob(a),d=new ArrayBuffer(c.length),e=new Uint8Array(d),f=0;f<c.length;f++)e[f]=c.charCodeAt(f);return new Blob([d],{type:b})}($(d()),c);case"base64":return $(d());case"base64uri":default:return d()}}function aa(a){var b=this;b.data={canvases:new Array(fi.CANVAS_LAYERS),contexts:new Array(fi.CANVAS_LAYERS),canvasNeedsRedraw:new Array(fi.CANVAS_LAYERS),bufferCanvases:new Array(fi.BUFFER_COUNT),bufferContexts:new Array(fi.CANVAS_LAYERS)},b.data.canvasContainer=document.createElement("div");var c=b.data.canvasContainer.style;b.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",c.position="relative",c.zIndex="0",c.overflow="hidden";var d=a.cy.container();d.appendChild(b.data.canvasContainer),d.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var e={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};za()&&(e["-ms-touch-action"]="none",e["touch-action"]="none");for(var f=0;f<fi.CANVAS_LAYERS;f++){var g=b.data.canvases[f]=document.createElement("canvas");b.data.contexts[f]=g.getContext("2d"),Object.keys(e).forEach(function(a){g.style[a]=e[a]}),g.style.position="absolute",g.setAttribute("data-id","layer"+f),g.style.zIndex=String(fi.CANVAS_LAYERS-f),b.data.canvasContainer.appendChild(g),b.data.canvasNeedsRedraw[f]=!1}for(b.data.topCanvas=b.data.canvases[0],b.data.canvases[fi.NODE].setAttribute("data-id","layer"+fi.NODE+"-node"),b.data.canvases[fi.SELECT_BOX].setAttribute("data-id","layer"+fi.SELECT_BOX+"-selectbox"),b.data.canvases[fi.DRAG].setAttribute("data-id","layer"+fi.DRAG+"-drag"),f=0;f<fi.BUFFER_COUNT;f++)b.data.bufferCanvases[f]=document.createElement("canvas"),b.data.bufferContexts[f]=b.data.bufferCanvases[f].getContext("2d"),b.data.bufferCanvases[f].style.position="absolute",b.data.bufferCanvases[f].setAttribute("data-id","buffer"+f),b.data.bufferCanvases[f].style.zIndex=String(-f-1),b.data.bufferCanvases[f].style.visibility="hidden";b.pathsEnabled=!0;var h=lc(),i=function(a){return{x:-a.w/2,y:-a.h/2}},j=function(a){return a.boundingBox(),a[0]._private.bodyBounds},k=function(a){return a.boundingBox(),a[0]._private.labelBounds.main||h},l=function(a){return a.boundingBox(),a[0]._private.labelBounds.source||h},m=function(a){return a.boundingBox(),a[0]._private.labelBounds.target||h},n=function(a,b){return b},o=function(a,b,c){var d=a?a+"-":"";return{x:b.x+c.pstyle(d+"text-margin-x").pfValue,y:b.y+c.pstyle(d+"text-margin-y").pfValue}},p=function(a,b,c){var d=a[0]._private.rscratch;return{x:d[b],y:d[c]}},q=b.data.eleTxrCache=new Dh(b,{getKey:function(a){return a[0]._private.nodeKey},doesEleInvalidateKey:function(a){var b=a[0]._private;return!(b.oldBackgroundTimestamp===b.backgroundTimestamp)},drawElement:function(a,c,d,e,f){return b.drawElement(a,c,d,!1,!1,f)},getBoundingBox:j,getRotationPoint:function(a){return{x:((b=j(a)).x1+b.x2)/2,y:(b.y1+b.y2)/2};var b},getRotationOffset:function(a){return i(j(a))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),r=b.data.lblTxrCache=new Dh(b,{getKey:function(a){return a[0]._private.labelStyleKey},drawElement:function(a,c,d,e,f){return b.drawElementText(a,c,d,e,"main",f)},getBoundingBox:k,getRotationPoint:function(a){return o("",p(a,"labelX","labelY"),a)},getRotationOffset:function(a){var b=k(a),c=i(k(a));if(a.isNode()){switch(a.pstyle("text-halign").value){case"left":c.x=-b.w;break;case"right":c.x=0}switch(a.pstyle("text-valign").value){case"top":c.y=-b.h;break;case"bottom":c.y=0}}return c},isVisible:n}),s=b.data.slbTxrCache=new Dh(b,{getKey:function(a){return a[0]._private.sourceLabelStyleKey},drawElement:function(a,c,d,e,f){return b.drawElementText(a,c,d,e,"source",f)},getBoundingBox:l,getRotationPoint:function(a){return o("source",p(a,"sourceLabelX","sourceLabelY"),a)},getRotationOffset:function(a){return i(l(a))},isVisible:n}),t=b.data.tlbTxrCache=new Dh(b,{getKey:function(a){return a[0]._private.targetLabelStyleKey},drawElement:function(a,c,d,e,f){return b.drawElementText(a,c,d,e,"target",f)},getBoundingBox:m,getRotationPoint:function(a){return o("target",p(a,"targetLabelX","targetLabelY"),a)},getRotationOffset:function(a){return i(m(a))},isVisible:n}),u=b.data.lyrTxrCache=new Fh(b);b.onUpdateEleCalcs(function(a,b){q.invalidateElements(b),r.invalidateElements(b),s.invalidateElements(b),t.invalidateElements(b),u.invalidateElements(b);for(var c=0;c<b.length;c++){var d=b[c]._private;d.oldBackgroundTimestamp=d.backgroundTimestamp}});var v=function(a){for(var b=0;b<a.length;b++)u.enqueueElementRefinement(a[b].ele)};q.onDequeue(v),r.onDequeue(v),s.onDequeue(v),t.onDequeue(v)}function ba(a,b,c){var d=c,e=function(c){ub("Can not register `"+b+"` for `"+a+"` since `"+c+"` already exists in the prototype and can not be overridden")};if("core"===a){if(xg.prototype[b])return e(b);xg.prototype[b]=c}else if("collection"===a){if(Wf.prototype[b])return e(b);Wf.prototype[b]=c}else if("layout"===a){for(var f=function(a){this.options=a,c.call(this,a),pa(this._private)||(this._private={}),this._private.cy=a.cy,this._private.listeners=[],this.createEmitter()},g=f.prototype=Object.create(c.prototype),h=[],i=0;i<h.length;i++){var j=h[i];g[j]=g[j]||function(){return this}}g.start&&!g.run?g.run=function(){return this.start(),this}:!g.start&&g.run&&(g.start=function(){return this.run(),this});var k=c.prototype.stop;g.stop=function(){var a=this.options;if(a&&a.animate){var b=this.animations;if(b)for(var c=0;c<b.length;c++)b[c].stop()}return k?k.call(this):this.emit("layoutstop"),this},g.destroy||(g.destroy=function(){return this}),g.cy=function(){return this._private.cy};var l=function(a){return a._private.cy},m={addEventFields:function(a,b){b.layout=a,b.cy=l(a),b.target=a},bubble:function(){return!0},parent:function(a){return l(a)}};Ha(g,{createEmitter:function(){return this._private.emitter=new r(m,this),this},emitter:function(){return this._private.emitter},on:function(a,b){return this.emitter().on(a,b),this},one:function(a,b){return this.emitter().one(a,b),this},once:function(a,b){return this.emitter().one(a,b),this},removeListener:function(a,b){return this.emitter().removeListener(a,b),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(a,b){return this.emitter().emit(a,b),this}}),$d.eventAliasesOn(g),d=f}else if("renderer"===a&&"null"!==b&&"base"!==b){var n=ca("renderer","base"),o=n.prototype,p=c,q=c.prototype,s=function(){n.apply(this,arguments),p.apply(this,arguments)},t=s.prototype;for(var u in o){var v=o[u];if(null!=q[u])return e(u);t[u]=v}for(var w in q)t[w]=q[w];o.clientFunctions.forEach(function(a){t[a]=t[a]||function(){ub("Renderer does not implement `renderer."+a+"()` on its prototype")}}),d=s}return Ka({map:ii,keys:[a,b],value:d})}function ca(a,b){return La({map:ii,keys:[a,b]})}function da(a,b,c,d,e){return Ka({map:ji,keys:[a,b,c,d],value:e})}function ea(a,b,c,d){return La({map:ji,keys:[a,b,c,d]})}var fa="undefined"==typeof window?null:window,ga=fa?fa.navigator:null,ha=(fa&&fa.document,a("")),ia=a({}),ja=a(function(){}),ka="undefined"==typeof HTMLElement?"undefined":a(HTMLElement),la=function(a){return a&&a.instanceString&&na(a.instanceString)?a.instanceString():null},ma=function(b){return null!=b&&a(b)==ha},na=function(b){return null!=b&&a(b)===ja},oa=function(a){return Array.isArray?Array.isArray(a):null!=a&&a instanceof Array},pa=function(b){return null!=b&&a(b)===ia&&!oa(b)&&b.constructor===Object},qa=function(b){return null!=b&&a(b)===a(1)&&!isNaN(b)},ra=function(a){return"undefined"===ka?void 0:null!=a&&a instanceof HTMLElement},sa=function(a){return ta(a)||ua(a)},ta=function(a){return"collection"===la(a)&&a._private.single},ua=function(a){return"collection"===la(a)&&!a._private.single},va=function(a){return"core"===la(a)},wa=function(a){return"stylesheet"===la(a)},xa=function(a){return null==a||!(""!==a&&!a.match(/^\s+$/))},ya=function(b){return function(b){return null!=b&&a(b)===ia}(b)&&na(b.then)},za=function(){return ga&&ga.userAgent.match(/msie|trident|edge/i)},Aa=function(a,b){b||(b=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a.join("$")});var c=function c(){var d,e=this,f=arguments,g=b.apply(e,f),h=c.cache;return(d=h[g])||(d=h[g]=a.apply(e,f)),d};return c.cache={},c},Ba=Aa(function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}),Ca=Aa(function(a){return a.replace(/(-\w)/g,function(a){return a[1].toUpperCase()})}),Da=Aa(function(a,b){return a+b[0].toUpperCase()+b.substring(1)},function(a,b){return a+"$"+b}),Ea=function(a){return xa(a)?a:a.charAt(0).toUpperCase()+a.substring(1)},Fa="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Ga=function(a,b){return a<b?-1:a>b?1:0},Ha=null!=Object.assign?Object.assign.bind(Object):function(a){for(var b=arguments,c=1;c<b.length;c++){var d=b[c];if(null!=d)for(var e=Object.keys(d),f=0;f<e.length;f++){var g=e[f];a[g]=d[g]}}return a},Ia=function(a){return(oa(a)?a:null)||function(a){return Ja[a.toLowerCase()]}(a)||function(a){if((4===a.length||7===a.length)&&"#"===a[0]){var b,c,d;return 4===a.length?(b=parseInt(a[1]+a[1],16),c=parseInt(a[2]+a[2],16),d=parseInt(a[3]+a[3],16)):(b=parseInt(a[1]+a[2],16),c=parseInt(a[3]+a[4],16),d=parseInt(a[5]+a[6],16)),[b,c,d]}}(a)||function(a){var b,c=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(a);if(c){b=[];for(var d=[],e=1;e<=3;e++){var f=c[e];if("%"===f[f.length-1]&&(d[e]=!0),f=parseFloat(f),d[e]&&(f=f/100*255),f<0||f>255)return;b.push(Math.floor(f))}var g=d[1]||d[2]||d[3],h=d[1]&&d[2]&&d[3];if(g&&!h)return;var i=c[4];if(void 0!==i){if((i=parseFloat(i))<0||i>1)return;b.push(i)}}return b}(a)||function(a){function b(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var c,d,e,f,g,h,i,j,k=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(a);if(k){if((d=parseInt(k[1]))<0?d=(360- -1*d%360)%360:d>360&&(d%=360),d/=360,(e=parseFloat(k[2]))<0||e>100)return;if(e/=100,(f=parseFloat(k[3]))<0||f>100)return;if(f/=100,void 0!==(g=k[4])&&((g=parseFloat(g))<0||g>1))return;if(0===e)h=i=j=Math.round(255*f);else{var l=f<.5?f*(1+e):f+e-f*e,m=2*f-l;h=Math.round(255*b(m,l,d+1/3)),i=Math.round(255*b(m,l,d)),j=Math.round(255*b(m,l,d-1/3))}c=[h,i,j,g]}return c}(a)},Ja={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ka=function(a){for(var b=a.map,c=a.keys,d=c.length,e=0;e<d;e++){var f=c[e];if(pa(f))throw Error("Tried to set map with object key");e<c.length-1?(null==b[f]&&(b[f]={}),b=b[f]):b[f]=a.value}},La=function(a){for(var b=a.map,c=a.keys,d=c.length,e=0;e<d;e++){var f=c[e];if(pa(f))throw Error("Tried to get map with object key");if(null==(b=b[f]))return b}return b},Ma="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Na="Expected a function",Oa=NaN,Pa="[object Symbol]",Qa=/^\s+|\s+$/g,Ra=/^[-+]0x[0-9a-f]+$/i,Sa=/^0b[01]+$/i,Ta=/^0o[0-7]+$/i,Ua=parseInt,Va="object"==typeof Ma&&Ma&&Ma.Object===Object&&Ma,Wa="object"==typeof self&&self&&self.Object===Object&&self,Xa=Va||Wa||Function("return this")(),Ya=Object.prototype.toString,Za=Math.max,$a=Math.min,_a=function(){return Xa.Date.now()},ab=function(a,b,c){function d(b){var c=k,d=l;return k=l=void 0,q=b,n=a.apply(d,c)}function e(a){var c=a-p;return void 0===p||c>=b||c<0||s&&a-q>=m}function f(){var a=_a();if(e(a))return i(a);o=setTimeout(f,function(a){var c=b-(a-p);return s?$a(c,m-(a-q)):c}(a))}function i(a){return o=void 0,t&&k?d(a):(k=l=void 0,n)}function j(){var a=_a(),c=e(a);if(k=arguments,l=this,p=a,c){if(void 0===o)return function(a){return q=a,o=setTimeout(f,b),r?d(a):n}(p);if(s)return o=setTimeout(f,b),d(p)}return void 0===o&&(o=setTimeout(f,b)),n}var k,l,m,n,o,p,q=0,r=!1,s=!1,t=!0;if("function"!=typeof a)throw new TypeError(Na);return b=h(b)||0,g(c)&&(r=!!c.leading,m=(s="maxWait"in c)?Za(h(c.maxWait)||0,b):m,t="trailing"in c?!!c.trailing:t),j.cancel=function(){void 0!==o&&clearTimeout(o),q=0,k=p=l=o=void 0},j.flush=function(){return void 0===o?n:i(_a())},j},bb=fa?fa.performance:null,cb=bb&&bb.now?function(){return bb.now()}:function(){return Date.now()},db=function(){if(fa){if(fa.requestAnimationFrame)return function(a){fa.requestAnimationFrame(a)};if(fa.mozRequestAnimationFrame)return function(a){fa.mozRequestAnimationFrame(a)};if(fa.webkitRequestAnimationFrame)return function(a){fa.webkitRequestAnimationFrame(a)};if(fa.msRequestAnimationFrame)return function(a){fa.msRequestAnimationFrame(a)}}return function(a){a&&setTimeout(function(){a(cb())},1e3/60)}}(),eb=function(a){return db(a)},fb=cb,gb=function(a){for(var b,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381,d=c;!(b=a.next()).done;)d=(d<<5)+d+b.value|0;return d},hb=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(b<<5)+b+a|0},ib=function(a,b){var c={value:0,done:!1},d=0,e=a.length;return gb({next:function(){return d<e?c.value=a[d++]:c.done=!0,c}},b)},jb=function(a,b){var c={value:0,done:!1},d=0,e=a.length;return gb({next:function(){return d<e?c.value=a.charCodeAt(d++):c.done=!0,c}},b)},kb=function(){return lb(arguments)},lb=function(a){for(var b,c=0;c<a.length;c++){var d=a[c];b=0===c?jb(d):jb(d,b)}return b},mb=!0,nb=null!=console.warn,ob=null!=console.trace,pb=Number.MAX_SAFE_INTEGER||9007199254740991,qb=function(){return!0},rb=function(){return!1},sb=function(){return 0},tb=function(){},ub=function(a){throw new Error(a)},vb=function(a){if(void 0===a)return mb;mb=!!a},wb=function(a){vb()&&(nb?console.warn(a):(console.log(a),ob&&console.trace()))},xb=function(a){return null==a?a:oa(a)?a.slice():pa(a)?function(a){return Ha({},a)}(a):a},yb=function(a,b){for(b=a="";a++<36;b+=51*a&52?(15^a?8^Math.random()*(20^a?16:4):4).toString(16):"-");return b},zb={},Ab=function(){return zb},Bb=function(a){var b=Object.keys(a);return function(c){for(var d={},e=0;e<b.length;e++){var f=b[e],g=null==c?void 0:c[f];d[f]=void 0===g?a[f]:g}return d}},Cb=function(a,b,c){for(var d=a.length;d>=0&&(a[d]!==b||(a.splice(d,1),c));d--);},Db=function(a){a.splice(0,a.length)},Eb=function(a,b,c){return c&&(b=Da(c,b)),a[b]},Fb=function(a,b,c,d){c&&(b=Da(c,b)),a[b]=d},Gb="undefined"!=typeof Map?Map:function(){function a(){b(this,a),this._obj={}}return d(a,[{key:"set",value:function(a,b){return this._obj[a]=b,this}},{key:"delete",value:function(a){return this._obj[a]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(a){return void 0!==this._obj[a]}},{key:"get",value:function(a){return this._obj[a]}}]),a}(),Hb=function(){function a(c){if(b(this,a),this._obj=Object.create(null),this.size=0,null!=c){var d;d=null!=c.instanceString&&c.instanceString()===this.instanceString()?c.toArray():c;for(var e=0;e<d.length;e++)this.add(d[e])}}return d(a,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(a){var b=this._obj;1!==b[a]&&(b[a]=1,this.size++)}},{key:"delete",value:function(a){var b=this._obj;1===b[a]&&(b[a]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(a){return 1===this._obj[a]}},{key:"toArray",value:function(){var a=this;return Object.keys(this._obj).filter(function(b){return a.has(b)})}},{key:"forEach",value:function(a,b){return this.toArray().forEach(a,b)}}]),a}(),Ib="undefined"!==("undefined"==typeof Set?"undefined":a(Set))?Set:Hb,Jb=function(a,b,c){if(c=!(void 0!==c&&!c),void 0!==a&&void 0!==b&&va(a)){var d=b.group;if(null==d&&(d=b.data&&null!=b.data.source&&null!=b.data.target?"edges":"nodes"),"nodes"===d||"edges"===d){this.length=1,this[0]=this;var e=this._private={cy:a,single:!0,data:b.data||{},position:b.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:d,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!b.selected,selectable:void 0===b.selectable||!!b.selectable,locked:!!b.locked,grabbed:!1,grabbable:void 0===b.grabbable||!!b.grabbable,pannable:void 0===b.pannable?"edges"===d:!!b.pannable,active:!1,classes:new Ib,animation:{current:[],queue:[]},rscratch:{},scratch:b.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==e.position.x&&(e.position.x=0),null==e.position.y&&(e.position.y=0),b.renderedPosition){var f=b.renderedPosition,g=a.pan(),h=a.zoom();e.position={x:(f.x-g.x)/h,y:(f.y-g.y)/h}}var i=[];oa(b.classes)?i=b.classes:ma(b.classes)&&(i=b.classes.split(/\s+/));for(var j=0,k=i.length;j<k;j++){var l=i[j];l&&""!==l&&e.classes.add(l)}this.createEmitter();var m=b.style||b.css;m&&(wb("Setting a `style` bypass at element creation is deprecated"),this.style(m)),(void 0===c||c)&&this.restore()}else ub("An element must be of type `nodes` or `edges`; you specified `"+d+"`")}else ub("An element must have a core reference and parameters set")},Kb=function(a){return a={bfs:a.bfs||!a.dfs,dfs:a.dfs||!a.bfs},function(b,c,d){var e;pa(b)&&!sa(b)&&(b=(e=b).roots||e.root,c=e.visit,d=e.directed),d=2!==arguments.length||na(c)?d:c,c=na(c)?c:function(){};for(var f,g=this._private.cy,h=b=ma(b)?this.filter(b):b,i=[],j=[],k={},l={},m={},n=0,o=this.byGroup(),p=o.nodes,q=o.edges,r=0;r<h.length;r++){var s=h[r],t=s.id();s.isNode()&&(i.unshift(s),a.bfs&&(m[t]=!0,j.push(s)),l[t]=0)}var u=function(){var b=a.bfs?i.shift():i.pop(),e=b.id();if(a.dfs){if(m[e])return"continue";m[e]=!0,j.push(b)}var g,h=l[e],o=k[e],r=null!=o?o.source():null,s=null!=o?o.target():null,t=null==o?void 0:b.same(r)?s[0]:r[0];if(!0===(g=c(b,o,t,n++,h)))return f=b,"break";if(!1===g)return"break";for(var u=b.connectedEdges().filter(function(a){return(!d||a.source().same(b))&&q.has(a)}),v=0;v<u.length;v++){var w=u[v],x=w.connectedNodes().filter(function(a){return!a.same(b)&&p.has(a)}),y=x.id();0===x.length||m[y]||(x=x[0],i.push(x),a.bfs&&(m[y]=!0,j.push(x)),k[y]=w,l[y]=l[e]+1)}};a:for(;0!==i.length;){var v=u();switch(v){case"continue":continue;case"break":break a}}for(var w=g.collection(),x=0;x<j.length;x++){var y=j[x],z=k[y.id()];null!=z&&w.merge(z),w.merge(y)}return{path:g.collection(w),found:g.collection(f)}}},Lb={breadthFirstSearch:Kb({bfs:!0}),depthFirstSearch:Kb({dfs:!0})};Lb.bfs=Lb.breadthFirstSearch,Lb.dfs=Lb.depthFirstSearch;var Mb=function(a,b){return a(b={exports:{}},b.exports),b.exports}(function(a,b){(function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;d=Math.floor,k=Math.min,c=function(a,b){return a<b?-1:a>b?1:0},j=function(a,b,e,f,g){var h;if(null==e&&(e=0),null==g&&(g=c),e<0)throw new Error("lo must be non-negative");for(null==f&&(f=a.length);e<f;)g(b,a[h=d((e+f)/2)])<0?f=h:e=h+1;return[].splice.apply(a,[e,e-e].concat(b)),b},g=function(a,b,d){return null==d&&(d=c),a.push(b),o(a,0,a.length-1,d)},f=function(a,b){var d,e;return null==b&&(b=c),d=a.pop(),a.length?(e=a[0],a[0]=d,p(a,0,b)):e=d,e},i=function(a,b,d){var e;return null==d&&(d=c),e=a[0],a[0]=b,p(a,0,d),e},h=function(a,b,d){var e;return null==d&&(d=c),a.length&&d(a[0],b)<0&&(b=(e=[a[0],b])[0],a[0]=e[1],p(a,0,d)),b},e=function(a,b){var e,f,g,h,i,j;for(null==b&&(b=c),i=[],f=0,g=(h=function(){j=[];for(var b=0,c=d(a.length/2);0<=c?b<c:b>c;0<=c?b++:b--)j.push(b);return j}.apply(this).reverse()).length;f<g;f++)e=h[f],i.push(p(a,e,b));return i},n=function(a,b,d){var e;if(null==d&&(d=c),-1!==(e=a.indexOf(b)))return o(a,0,e,d),p(a,e,d)},l=function(a,b,d){var f,g,i,j,k;if(null==d&&(d=c),!(g=a.slice(0,b)).length)return g;for(e(g,d),i=0,j=(k=a.slice(b)).length;i<j;i++)f=k[i],h(g,f,d);return g.sort(d).reverse()},m=function(a,b,d){var g,h,i,l,m,n,o,p,q;if(null==d&&(d=c),10*b<=a.length){if(!(i=a.slice(0,b).sort(d)).length)return i;for(h=i[i.length-1],l=0,n=(o=a.slice(b)).length;l<n;l++)d(g=o[l],h)<0&&(j(i,g,0,null,d),i.pop(),h=i[i.length-1]);return i}for(e(a,d),q=[],m=0,p=k(b,a.length);0<=p?m<p:m>p;0<=p?++m:--m)q.push(f(a,d));return q},o=function(a,b,d,e){var f,g,h;for(null==e&&(e=c),f=a[d];d>b&&e(f,g=a[h=d-1>>1])<0;)a[d]=g,d=h;return a[d]=f},p=function(a,b,d){var e,f,g,h,i;for(null==d&&(d=c),f=a.length,i=b,g=a[b],e=2*b+1;e<f;)(h=e+1)<f&&!(d(a[e],a[h])<0)&&(e=h),a[b]=a[e],e=2*(b=e)+1;return a[b]=g,o(a,i,b,d)},b=function(){function a(a){this.cmp=null!=a?a:c,this.nodes=[]}return a.push=g,a.pop=f,a.replace=i,a.pushpop=h,a.heapify=e,a.updateItem=n,a.nlargest=l,a.nsmallest=m,a.prototype.push=function(a){return g(this.nodes,a,this.cmp)},a.prototype.pop=function(){return f(this.nodes,this.cmp)},a.prototype.peek=function(){return this.nodes[0]},a.prototype.contains=function(a){return-1!==this.nodes.indexOf(a)},a.prototype.replace=function(a){return i(this.nodes,a,this.cmp)},a.prototype.pushpop=function(a){return h(this.nodes,a,this.cmp)},a.prototype.heapify=function(){return e(this.nodes,this.cmp)},a.prototype.updateItem=function(a){return n(this.nodes,a,this.cmp)},a.prototype.clear=function(){return this.nodes=[]},a.prototype.empty=function(){return 0===this.nodes.length},a.prototype.size=function(){return this.nodes.length},a.prototype.clone=function(){var b;return(b=new a).nodes=this.nodes.slice(0),b},a.prototype.toArray=function(){return this.nodes.slice(0)},a.prototype.insert=a.prototype.push,a.prototype.top=a.prototype.peek,a.prototype.front=a.prototype.peek,a.prototype.has=a.prototype.contains,a.prototype.copy=a.prototype.clone,a}(),a.exports=b}).call(Ma)}),Nb=Bb({root:null,weight:function(a){return 1},directed:!1}),Ob={dijkstra:function(a){if(!pa(a)){var b=arguments;a={root:b[0],weight:b[1],directed:b[2]}}var c=Nb(a),d=c.root,e=c.weight,f=c.directed,g=this,h=e,i=ma(d)?this.filter(d)[0]:d[0],j={},k={},l={},m=this.byGroup(),n=m.nodes,o=m.edges;o.unmergeBy(function(a){return a.isLoop()});for(var p=function(a){return j[a.id()]},q=function(a,b){j[a.id()]=b,r.updateItem(a)},r=new Mb(function(a,b){return p(a)-p(b)}),s=0;s<n.length;s++){var t=n[s];j[t.id()]=t.same(i)?0:1/0,r.push(t)}for(var u=function(a,b){for(var c,d=(f?a.edgesTo(b):a.edgesWith(b)).intersect(o),e=1/0,g=0;g<d.length;g++){var i=d[g],j=h(i);(j<e||!c)&&(e=j,c=i)}return{edge:c,dist:e}};r.size()>0;){var v=r.pop(),w=p(v),x=v.id();if(l[x]=w,w!==1/0)for(var y=v.neighborhood().intersect(n),z=0;z<y.length;z++){var A=y[z],B=A.id(),C=u(v,A),D=w+C.dist;D<p(A)&&(q(A,D),k[B]={node:v,edge:C.edge})}}return{distanceTo:function(a){var b=ma(a)?n.filter(a)[0]:a[0];return l[b.id()]},pathTo:function(a){var b=ma(a)?n.filter(a)[0]:a[0],c=[],d=b,e=d.id();if(b.length>0)for(c.unshift(b);k[e];){var f=k[e];c.unshift(f.edge),c.unshift(f.node),e=(d=f.node).id()}return g.spawn(c)}}}},Pb={kruskal:function(a){a=a||function(a){return 1};for(var b=this.byGroup(),c=b.nodes,d=b.edges,e=c.length,f=new Array(e),g=c,h=function(a){for(var b=0;b<f.length;b++)if(f[b].has(a))return b},i=0;i<e;i++)f[i]=this.spawn(c[i]);for(var j=d.sort(function(b,c){return a(b)-a(c)}),k=0;k<j.length;k++){var l=j[k],m=l.source()[0],n=l.target()[0],o=h(m),p=h(n),q=f[o],r=f[p];o!==p&&(g.merge(l),q.merge(r),f.splice(p,1))}return g}},Qb=Bb({root:null,goal:null,weight:function(a){return 1},heuristic:function(a){return 0},directed:!1}),Rb={aStar:function(a){var b=this.cy(),c=Qb(a),d=c.root,e=c.goal,f=c.heuristic,g=c.directed,h=c.weight;d=b.collection(d)[0],e=b.collection(e)[0];var i,j,k=d.id(),l=e.id(),m={},n={},o={},p=new Mb(function(a,b){return n[a.id()]-n[b.id()]}),q=new Ib,r={},s={},t=function(a,b){p.push(a),q.add(b)};t(d,k),m[k]=0,n[k]=f(d);for(var u,v=0;p.size()>0;){if(i=p.pop(),j=i.id(),q.delete(j),v++,j===l){for(var w=[],x=e,y=l,z=s[y];w.unshift(x),null!=z&&w.unshift(z),null!=(x=r[y]);)z=s[y=x.id()];return{found:!0,distance:m[j],path:this.spawn(w),steps:v}}o[j]=!0;for(var A=i._private.edges,B=0;B<A.length;B++){var C=A[B];if(this.hasElementWithId(C.id())&&(!g||C.data("source")===j)){var D=C.source(),E=C.target(),F=D.id()!==j?D:E,G=F.id();if(this.hasElementWithId(G)&&!o[G]){var H=m[j]+h(C);u=G,q.has(u)?H<m[G]&&(m[G]=H,n[G]=H+f(F),r[G]=i):(m[G]=H,n[G]=H+f(F),t(F,G),r[G]=i,s[G]=C)}}}}return{found:!1,distance:void 0,path:void 0,steps:v}}},Sb=Bb({weight:function(a){return 1},directed:!1}),Tb={floydWarshall:function(a){for(var b=this.cy(),c=Sb(a),d=c.weight,e=c.directed,f=d,g=this.byGroup(),h=g.nodes,i=g.edges,j=h.length,k=j*j,l=function(a){return h.indexOf(a)},m=function(a){return h[a]},n=new Array(k),o=0;o<k;o++){var p=o%j,q=(o-p)/j;n[o]=q===p?0:1/0}for(var r=new Array(k),s=new Array(k),t=0;t<i.length;t++){var u=i[t],v=u.source()[0],w=u.target()[0];if(v!==w){var x=l(v),y=l(w),z=x*j+y,A=f(u);if(n[z]>A&&(n[z]=A,r[z]=y,s[z]=u),!e){var B=y*j+x;!e&&n[B]>A&&(n[B]=A,r[B]=x,s[B]=u)}}}for(var C=0;C<j;C++)for(var D=0;D<j;D++)for(var E=D*j+C,F=0;F<j;F++){var G=D*j+F,H=C*j+F;n[E]+n[H]<n[G]&&(n[G]=n[E]+n[H],r[G]=r[E])}var I=function(a){return l(function(a){return(ma(a)?b.filter(a):a)[0]}(a))};return{distance:function(a,b){var c=I(a),d=I(b);return n[c*j+d]},path:function(a,c){var d=I(a),e=I(c),f=m(d);if(d===e)return f.collection();if(null==r[d*j+e])return b.collection();var g,h=b.collection(),i=d;for(h.merge(f);d!==e;)i=d,d=r[d*j+e],g=s[i*j+d],h.merge(g),h.merge(m(d));return h}}}},Ub=Bb({weight:function(a){return 1},directed:!1,root:null}),Vb={bellmanFord:function(a){var b=this,c=Ub(a),d=c.weight,e=c.directed,f=c.root,g=d,h=this,i=this.cy(),j=this.byGroup(),k=j.edges,l=j.nodes,m=l.length,n=new Gb,o=!1;f=i.collection(f)[0],k.unmergeBy(function(a){return a.isLoop()});for(var p=k.length,q=function(a){var b=n.get(a.id());return b||(b={},n.set(a.id(),b)),b},r=function(a){return(ma(a)?i.$(a):a)[0]},s=0;s<m;s++){var t=l[s],u=q(t);t.same(f)?u.dist=0:u.dist=1/0,u.pred=null,u.edge=null}for(var v=!1,w=function(a,b,c,d,e,f){var g=d.dist+f;g<e.dist&&!c.same(d.edge)&&(e.dist=g,e.pred=a,e.edge=c,v=!0)},x=1;x<m;x++){v=!1;for(var y=0;y<p;y++){var z=k[y],A=z.source(),B=z.target(),C=g(z),D=q(A),E=q(B);w(A,0,z,D,E,C),e||w(B,0,z,E,D,C)}if(!v)break}if(v)for(var F=0;F<p;F++){var G=k[F],H=G.source(),I=G.target(),J=g(G),K=q(H).dist,L=q(I).dist;if(K+J<L||!e&&L+J<K){wb("Graph contains a negative weight cycle for Bellman-Ford"),o=!0;break}}return{distanceTo:function(a){return q(r(a)).dist},pathTo:function(a){for(var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,d=r(a),e=[],g=d;;){if(null==g)return b.spawn();var i=q(g),j=i.edge,k=i.pred;if(e.unshift(g[0]),g.same(c)&&e.length>0)break;null!=j&&e.unshift(j),g=k}return h.spawn(e)},hasNegativeWeightCycle:o,negativeWeightCycles:[]}}},Wb=Math.sqrt(2),Xb=function(a,b,c){0===c.length&&ub("Karger-Stein must be run on a connected (sub)graph");for(var d=c[a],e=d[1],f=d[2],g=b[e],h=b[f],i=c,j=i.length-1;j>=0;j--){var k=i[j],l=k[1],m=k[2];(b[l]===g&&b[m]===h||b[l]===h&&b[m]===g)&&i.splice(j,1)}for(var n=0;n<i.length;n++){var o=i[n];o[1]===h?(i[n]=o.slice(),i[n][1]=g):o[2]===h&&(i[n]=o.slice(),i[n][2]=g)}for(var p=0;p<b.length;p++)b[p]===h&&(b[p]=g);return i},Yb=function(a,b,c,d){for(;c>d;){var e=Math.floor(Math.random()*b.length);b=Xb(e,a,b),c--}return b},Zb={kargerStein:function(){var a=this,b=this.byGroup(),c=b.nodes,d=b.edges;d.unmergeBy(function(a){return a.isLoop()});var e=c.length,f=d.length,g=Math.ceil(Math.pow(Math.log(e)/Math.LN2,2)),h=Math.floor(e/Wb);if(!(e<2)){for(var i=[],j=0;j<f;j++){var k=d[j];i.push([j,c.indexOf(k.source()),c.indexOf(k.target())])}for(var l=1/0,m=[],n=new Array(e),o=new Array(e),p=new Array(e),q=function(a,b){for(var c=0;c<e;c++)b[c]=a[c]},r=0;r<=g;r++){for(var s=0;s<e;s++)o[s]=s;var t=Yb(o,i.slice(),e,h),u=t.slice();q(o,p);var v=Yb(o,t,h,2),w=Yb(p,u,h,2);v.length<=w.length&&v.length<l?(l=v.length,m=v,q(o,n)):w.length<=v.length&&w.length<l&&(l=w.length,m=w,q(p,n))}for(var x=this.spawn(m.map(function(a){return d[a[0]]})),y=this.spawn(),z=this.spawn(),A=n[0],B=0;B<n.length;B++){var C=n[B],D=c[B];C===A?y.merge(D):z.merge(D)}var E=function(b){var c=a.spawn();return b.forEach(function(b){c.merge(b),b.connectedEdges().forEach(function(b){a.contains(b)&&!x.contains(b)&&c.merge(b)})}),c},F=[E(y),E(z)];return{cut:x,components:F,partition1:y,partition2:z}}ub("At least 2 nodes are required for Karger-Stein algorithm")}},$b=function(a){return{x:a.x,y:a.y}},_b=function(a,b,c){return{x:a.x*b+c.x,y:a.y*b+c.y}},ac=function(a,b,c){return{x:(a.x-c.x)/b,y:(a.y-c.y)/b}},bc=function(a){return{x:a[0],y:a[1]}},cc=function(a,b){return Math.atan2(b,a)-Math.PI/2},dc=Math.log2||function(a){return Math.log(a)/Math.log(2)},ec=function(a){return a>0?1:a<0?-1:0},fc=function(a,b){return Math.sqrt(gc(a,b))},gc=function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},hc=function(a){for(var b=a.length,c=0,d=0;d<b;d++)c+=a[d];for(var e=0;e<b;e++)a[e]=a[e]/c;return a},ic=function(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c},jc=function(a,b,c,d){return{x:ic(a.x,b.x,c.x,d),y:ic(a.y,b.y,c.y,d)}},kc=function(a,b,c){return Math.max(a,Math.min(c,b))},lc=function(a){if(null==a)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=a.x1&&null!=a.y1){if(null!=a.x2&&null!=a.y2&&a.x2>=a.x1&&a.y2>=a.y1)return{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,w:a.x2-a.x1,h:a.y2-a.y1};if(null!=a.w&&null!=a.h&&a.w>=0&&a.h>=0)return{x1:a.x1,y1:a.y1,x2:a.x1+a.w,y2:a.y1+a.h,w:a.w,h:a.h}}},mc=function(a,b,c){a.x1=Math.min(a.x1,b),a.x2=Math.max(a.x2,b),a.w=a.x2-a.x1,a.y1=Math.min(a.y1,c),a.y2=Math.max(a.y2,c),a.h=a.y2-a.y1},nc=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a.x1-=b,a.x2+=b,a.y1-=b,a.y2+=b,a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},oc=function(a){var b,c,d,e,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===g.length)b=c=d=e=g[0];else if(2===g.length)b=d=g[0],e=c=g[1];else if(4===g.length){var h=f(g,4);b=h[0],c=h[1],d=h[2],e=h[3]}return a.x1-=e,a.x2+=c,a.y1-=b,a.y2+=d,a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},pc=function(a,b){a.x1=b.x1,a.y1=b.y1,a.x2=b.x2,a.y2=b.y2,a.w=a.x2-a.x1,a.h=a.y2-a.y1},qc=function(a,b){a.x1+=b.x,a.x2+=b.x,a.y1+=b.y,a.y2+=b.y},rc=function(a,b){return!(a.x1>b.x2||b.x1>a.x2||a.x2<b.x1||b.x2<a.x1||a.y2<b.y1||b.y2<a.y1||a.y1>b.y2||b.y1>a.y2)},sc=function(a,b,c){return a.x1<=b&&b<=a.x2&&a.y1<=c&&c<=a.y2},tc=function(a,b){return sc(a,b.x1,b.y1)&&sc(a,b.x2,b.y2)},uc=function(a,b,c,d,e,f,g){var h,i=Mc(e,f),j=e/2,k=f/2,l=d-k-g;if((h=Gc(a,b,c,d,c-j+i-g,l,c+j-i+g,l,!1)).length>0)return h;var m=c+j+g;if((h=Gc(a,b,c,d,m,d-k+i-g,m,d+k-i+g,!1)).length>0)return h;var n=d+k+g;if((h=Gc(a,b,c,d,c-j+i-g,n,c+j-i+g,n,!1)).length>0)return h;var o,p=c-j-g;if((h=Gc(a,b,c,d,p,d-k+i-g,p,d+k-i+g,!1)).length>0)return h;var q=c-j+i,r=d-k+i;if((o=Ec(a,b,c,d,q,r,i+g)).length>0&&o[0]<=q&&o[1]<=r)return[o[0],o[1]];var s=c+j-i,t=d-k+i;if((o=Ec(a,b,c,d,s,t,i+g)).length>0&&o[0]>=s&&o[1]<=t)return[o[0],o[1]];var u=c+j-i,v=d+k-i;if((o=Ec(a,b,c,d,u,v,i+g)).length>0&&o[0]>=u&&o[1]>=v)return[o[0],o[1]];var w=c-j+i,x=d+k-i;return(o=Ec(a,b,c,d,w,x,i+g)).length>0&&o[0]<=w&&o[1]>=x?[o[0],o[1]]:[]},vc=function(a,b,c,d,e,f,g){var h=g,i=Math.min(c,e),j=Math.max(c,e),k=Math.min(d,f),l=Math.max(d,f);return i-h<=a&&a<=j+h&&k-h<=b&&b<=l+h},wc=function(a,b,c,d,e,f,g,h,i){var j=Math.min(c,g,e)-i,k=Math.max(c,g,e)+i,l=Math.min(d,h,f)-i,m=Math.max(d,h,f)+i;return!(a<j||a>k||b<l||b>m)},xc=function(a,b,c,d,e,f,g,h){var i=[];!function(a,b,c,d,e){var f,g,h,i,j,k,l,m;0===a&&(a=1e-5),h=-27*(d/=a)+(b/=a)*(9*(c/=a)-b*b*2),f=(g=(3*c-b*b)/9)*g*g+(h/=54)*h,e[1]=0,l=b/3,f>0?(j=(j=h+Math.sqrt(f))<0?-Math.pow(-j,1/3):Math.pow(j,1/3),k=(k=h-Math.sqrt(f))<0?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,e[5]=-l):(e[5]=e[3]=0,0===f?(m=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=2*m-l,e[4]=e[2]=-(m+l)):(i=(g=-g)*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),e[4]=-l+m*Math.cos((i+4*Math.PI)/3)))}(1*c*c-4*c*e+2*c*g+4*e*e-4*e*g+g*g+d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h,9*c*e-3*c*c-3*c*g-6*e*e+3*e*g+9*d*f-3*d*d-3*d*h-6*f*f+3*f*h,3*c*c-6*c*e+c*g-c*a+2*e*e+2*e*a-g*a+3*d*d-6*d*f+d*h-d*b+2*f*f+2*f*b-h*b,1*c*e-c*c+c*a-e*a+d*f-d*d+d*b-f*b,i);for(var j=[],k=0;k<6;k+=2)Math.abs(i[k+1])<1e-7&&i[k]>=0&&i[k]<=1&&j.push(i[k]);j.push(1),j.push(0);for(var l,m,n,o=-1,p=0;p<j.length;p++)l=Math.pow(1-j[p],2)*c+2*(1-j[p])*j[p]*e+j[p]*j[p]*g,m=Math.pow(1-j[p],2)*d+2*(1-j[p])*j[p]*f+j[p]*j[p]*h,n=Math.pow(l-a,2)+Math.pow(m-b,2),o>=0?n<o&&(o=n):o=n;return o},yc=function(a,b,c,d,e,f){var g=[a-c,b-d],h=[e-c,f-d],i=h[0]*h[0]+h[1]*h[1],j=g[0]*g[0]+g[1]*g[1],k=g[0]*h[0]+g[1]*h[1],l=k*k/i;return k<0?j:l>i?(a-e)*(a-e)+(b-f)*(b-f):j-l},zc=function(a,b,c){for(var d,e,f,g,h=0,i=0;i<c.length/2;i++)if(d=c[2*i],e=c[2*i+1],i+1<c.length/2?(f=c[2*(i+1)],g=c[2*(i+1)+1]):(f=c[2*(i+1-c.length/2)],g=c[2*(i+1-c.length/2)+1]),d==a&&f==a);else{if(!(d>=a&&a>=f||d<=a&&a<=f))continue;(a-d)/(f-d)*(g-e)+e>b&&h++}return h%2!=0},Ac=function(a,b,c,d,e,f,g,h,i){var j,k=new Array(c.length);null!=h[0]?(j=Math.atan(h[1]/h[0]),h[0]<0?j+=Math.PI/2:j=-j-Math.PI/2):j=h;for(var l,m=Math.cos(-j),n=Math.sin(-j),o=0;o<k.length/2;o++)k[2*o]=f/2*(c[2*o]*m-c[2*o+1]*n),k[2*o+1]=g/2*(c[2*o+1]*m+c[2*o]*n),k[2*o]+=d,k[2*o+1]+=e;if(i>0){var p=Cc(k,-i);l=Bc(p)}else l=k;return zc(a,b,l)},Bc=function(a){for(var b,c,d,e,f,g,h,i,j=new Array(a.length/2),k=0;k<a.length/4;k++){b=a[4*k],c=a[4*k+1],d=a[4*k+2],e=a[4*k+3],k<a.length/4-1?(f=a[4*(k+1)],g=a[4*(k+1)+1],h=a[4*(k+1)+2],i=a[4*(k+1)+3]):(f=a[0],g=a[1],h=a[2],i=a[3]);var l=Gc(b,c,d,e,f,g,h,i,!0);j[2*k]=l[0],j[2*k+1]=l[1]}return j},Cc=function(a,b){for(var c,d,e,f,g=new Array(2*a.length),h=0;h<a.length/2;h++){c=a[2*h],d=a[2*h+1],h<a.length/2-1?(e=a[2*(h+1)],f=a[2*(h+1)+1]):(e=a[0],f=a[1]);var i=f-d,j=-(e-c),k=Math.sqrt(i*i+j*j),l=i/k,m=j/k;g[4*h]=c+l*b,g[4*h+1]=d+m*b,g[4*h+2]=e+l*b,g[4*h+3]=f+m*b}return g},Dc=function(a,b,c,d,e,f,g){return a-=e,b-=f,(a/=c/2+g)*a+(b/=d/2+g)*b<=1},Ec=function(a,b,c,d,e,f,g){var h=[c-a,d-b],i=[a-e,b-f],j=h[0]*h[0]+h[1]*h[1],k=2*(i[0]*h[0]+i[1]*h[1]),l=k*k-4*j*(i[0]*i[0]+i[1]*i[1]-g*g);if(l<0)return[];var m=(-k+Math.sqrt(l))/(2*j),n=(-k-Math.sqrt(l))/(2*j),o=Math.min(m,n),p=Math.max(m,n),q=[];if(o>=0&&o<=1&&q.push(o),p>=0&&p<=1&&q.push(p),0===q.length)return[];var r=q[0]*h[0]+a,s=q[0]*h[1]+b;return q.length>1?q[0]==q[1]?[r,s]:[r,s,q[1]*h[0]+a,q[1]*h[1]+b]:[r,s]},Fc=function(a,b,c){return b<=a&&a<=c||c<=a&&a<=b?a:a<=b&&b<=c||c<=b&&b<=a?b:c},Gc=function(a,b,c,d,e,f,g,h,i){var j=a-e,k=c-a,l=g-e,m=b-f,n=d-b,o=h-f,p=l*m-o*j,q=k*m-n*j,r=o*k-l*n;if(0!==r){var s=p/r,t=q/r;return-.001<=s&&s<=1.001&&-.001<=t&&t<=1.001?[a+s*k,b+s*n]:i?[a+s*k,b+s*n]:[]}return 0===p||0===q?Fc(a,c,g)===g?[g,h]:Fc(a,c,e)===e?[e,f]:Fc(e,g,c)===c?[c,d]:[]:[]},Hc=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=[],p=new Array(c.length),q=!0;if(null==f&&(q=!1),q){for(var r=0;r<p.length/2;r++)p[2*r]=c[2*r]*f+d,p[2*r+1]=c[2*r+1]*g+e;if(h>0){var s=Cc(p,-h);j=Bc(s)}else j=p}else j=c;for(var t=0;t<j.length/2;t++)k=j[2*t],l=j[2*t+1],t<j.length/2-1?(m=j[2*(t+1)],n=j[2*(t+1)+1]):(m=j[0],n=j[1]),0!==(i=Gc(a,b,d,e,k,l,m,n)).length&&o.push(i[0],i[1]);return o},Ic=function(a,b,c){var d=[a[0]-b[0],a[1]-b[1]],e=Math.sqrt(d[0]*d[0]+d[1]*d[1]),f=(e-c)/e;return f<0&&(f=1e-5),[b[0]+f*d[0],b[1]+f*d[1]]},Jc=function(a,b){var c=Lc(a,b);return c=Kc(c)},Kc=function(a){for(var b,c,d=a.length/2,e=1/0,f=1/0,g=-1/0,h=-1/0,i=0;i<d;i++)b=a[2*i],c=a[2*i+1],e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);for(var j=2/(g-e),k=2/(h-f),l=0;l<d;l++)b=a[2*l]=a[2*l]*j,c=a[2*l+1]=a[2*l+1]*k,e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);if(f<-1)for(var m=0;m<d;m++)c=a[2*m+1]=a[2*m+1]+(-1-f);return a},Lc=function(a,b){var c=1/a*2*Math.PI,d=a%2==0?Math.PI/2+c/2:Math.PI/2;d+=b;for(var e,f=new Array(2*a),g=0;g<a;g++)e=g*c+d,f[2*g]=Math.cos(e),f[2*g+1]=Math.sin(-e);return f},Mc=function(a,b){return Math.min(a/4,b/4,8)},Nc=function(a,b){return Math.min(a/10,b/10,8)},Oc=function(a,b){return{heightOffset:Math.min(15,.05*b),widthOffset:Math.min(100,.25*a),ctrlPtOffsetPct:.05}},Pc=Bb({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(a){return 1}}),Qc={pageRank:function(a){for(var b=Pc(a),c=b.dampingFactor,d=b.precision,e=b.iterations,f=b.weight,g=this._private.cy,h=this.byGroup(),i=h.nodes,j=h.edges,k=i.length,l=k*k,m=j.length,n=new Array(l),o=new Array(k),p=(1-c)/k,q=0;q<k;q++){for(var r=0;r<k;r++)n[q*k+r]=0;o[q]=0}for(var s=0;s<m;s++){var t=j[s],u=t.data("source"),v=t.data("target");if(u!==v){var w=i.indexOfId(u),x=i.indexOfId(v),y=f(t);n[x*k+w]+=y,o[w]+=y}}for(var z=1/k+p,A=0;A<k;A++)if(0===o[A])for(var B=0;B<k;B++)n[B*k+A]=z;else for(var C=0;C<k;C++){var D=C*k+A;n[D]=n[D]/o[A]+p}for(var E,F=new Array(k),G=new Array(k),H=0;H<k;H++)F[H]=1;for(var I=0;I<e;I++){for(var J=0;J<k;J++)G[J]=0;for(var K=0;K<k;K++)for(var L=0;L<k;L++){var M=K*k+L;G[K]+=n[M]*F[L]}hc(G),E=F,F=G,G=E;for(var N=0,O=0;O<k;O++){var P=E[O]-F[O];N+=P*P}if(N<d)break}return{rank:function(a){return a=g.collection(a)[0],F[i.indexOf(a)]}}}},Rc=Bb({root:null,weight:function(a){return 1},directed:!1,alpha:0}),Sc={degreeCentralityNormalized:function(a){a=Rc(a);var b=this.cy(),c=this.nodes(),d=c.length;if(a.directed){for(var e={},f={},g=0,h=0,i=0;i<d;i++){var j=c[i],k=j.id();a.root=j;var l=this.degreeCentrality(a);g<l.indegree&&(g=l.indegree),h<l.outdegree&&(h=l.outdegree),e[k]=l.indegree,f[k]=l.outdegree}return{indegree:function(a){return 0==g?0:(ma(a)&&(a=b.filter(a)),e[a.id()]/g)},outdegree:function(a){return 0===h?0:(ma(a)&&(a=b.filter(a)),f[a.id()]/h)}}}for(var m={},n=0,o=0;o<d;o++){var p=c[o];a.root=p;var q=this.degreeCentrality(a);n<q.degree&&(n=q.degree),m[p.id()]=q.degree}return{degree:function(a){return 0===n?0:(ma(a)&&(a=b.filter(a)),m[a.id()]/n)}}},degreeCentrality:function(a){a=Rc(a);var b=this.cy(),c=this,d=a,e=d.root,f=d.weight,g=d.directed,h=d.alpha;if(e=b.collection(e)[0],g){for(var i=e.connectedEdges(),j=i.filter(function(a){return a.target().same(e)&&c.has(a)}),k=i.filter(function(a){return a.source().same(e)&&c.has(a)}),l=j.length,m=k.length,n=0,o=0,p=0;p<j.length;p++)n+=f(j[p]);for(var q=0;q<k.length;q++)o+=f(k[q]);return{indegree:Math.pow(l,1-h)*Math.pow(n,h),outdegree:Math.pow(m,1-h)*Math.pow(o,h)}}for(var r=e.connectedEdges().intersection(c),s=r.length,t=0,u=0;u<r.length;u++)t+=f(r[u]);return{degree:Math.pow(s,1-h)*Math.pow(t,h)}}};Sc.dc=Sc.degreeCentrality,Sc.dcn=Sc.degreeCentralityNormalised=Sc.degreeCentralityNormalized;var Tc=Bb({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Uc={closenessCentralityNormalized:function(a){for(var b=Tc(a),c=b.harmonic,d=b.weight,e=b.directed,f=this.cy(),g={},h=0,i=this.nodes(),j=this.floydWarshall({weight:d,directed:e}),k=0;k<i.length;k++){for(var l=0,m=i[k],n=0;n<i.length;n++)if(k!==n){var o=j.distance(m,i[n]);l+=c?1/o:o}c||(l=1/l),h<l&&(h=l),g[m.id()]=l}return{closeness:function(a){return 0==h?0:(a=ma(a)?f.filter(a)[0].id():a.id(),g[a]/h)}}},closenessCentrality:function(a){var b=Tc(a),c=b.root,d=b.weight,e=b.directed,f=b.harmonic;c=this.filter(c)[0];for(var g=this.dijkstra({root:c,weight:d,directed:e}),h=0,i=this.nodes(),j=0;j<i.length;j++){var k=i[j];if(!k.same(c)){var l=g.distanceTo(k);h+=f?1/l:l}}return f?h:1/h}};Uc.cc=Uc.closenessCentrality,Uc.ccn=Uc.closenessCentralityNormalised=Uc.closenessCentralityNormalized;var Vc=Bb({weight:null,directed:!1}),Wc={betweennessCentrality:function(a){for(var b=Vc(a),c=b.directed,d=b.weight,e=null!=d,f=this.cy(),g=this.nodes(),h={},i={},j=0,k=function(a,b){i[a]=b,b>j&&(j=b)},l=function(a){return i[a]},m=0;m<g.length;m++){var n=g[m],o=n.id();h[o]=c?n.outgoers().nodes():n.openNeighborhood().nodes(),k(o,0)}for(var p=function(a){for(var b=g[a].id(),c=[],i={},j={},m={},n=new Mb(function(a,b){return m[a]-m[b]}),o=0;o<g.length;o++){var p=g[o].id();i[p]=[],j[p]=0,m[p]=1/0}for(j[b]=1,m[b]=0,n.push(b);!n.empty();){var q=n.pop();if(c.push(q),e)for(var r=0;r<h[q].length;r++){var s=h[q][r],t=f.getElementById(q),u=void 0;u=t.edgesTo(s).length>0?t.edgesTo(s)[0]:s.edgesTo(t)[0];var v=d(u);s=s.id(),m[s]>m[q]+v&&(m[s]=m[q]+v,n.nodes.indexOf(s)<0?n.push(s):n.updateItem(s),j[s]=0,i[s]=[]),m[s]==m[q]+v&&(j[s]=j[s]+j[q],i[s].push(q))}else for(var w=0;w<h[q].length;w++){var x=h[q][w].id();m[x]==1/0&&(n.push(x),m[x]=m[q]+1),m[x]==m[q]+1&&(j[x]=j[x]+j[q],i[x].push(q))}}for(var y={},z=0;z<g.length;z++)y[g[z].id()]=0;for(;c.length>0;)for(var A=c.pop(),B=0;B<i[A].length;B++){var C=i[A][B];y[C]=y[C]+j[C]/j[A]*(1+y[A]),A!=g[a].id()&&k(A,l(A)+y[A])}},q=0;q<g.length;q++)p(q);var r={betweenness:function(a){var b=f.collection(a).id();return l(b)},betweennessNormalized:function(a){if(0==j)return 0;var b=f.collection(a).id();return l(b)/j}};return r.betweennessNormalised=r.betweennessNormalized,r}};Wc.bc=Wc.betweennessCentrality;var Xc=Bb({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(a){return 1}]}),Yc=function(a,b){for(var c=0,d=0;d<b.length;d++)c+=b[d](a);return c},Zc=function(a,b){for(var c,d=0;d<b;d++){c=0;for(var e=0;e<b;e++)c+=a[e*b+d];for(var f=0;f<b;f++)a[f*b+d]=a[f*b+d]/c}},$c=function(a,b,c){for(var d=new Array(c*c),e=0;e<c;e++){for(var f=0;f<c;f++)d[e*c+f]=0;for(var g=0;g<c;g++)for(var h=0;h<c;h++)d[e*c+h]+=a[e*c+g]*b[g*c+h]}return d},_c=function(a,b,c){for(var d=a.slice(0),e=1;e<c;e++)a=$c(a,d,b);return a},ad=function(a,b,c){for(var d=new Array(b*b),e=0;e<b*b;e++)d[e]=Math.pow(a[e],c);return Zc(d,b),d},bd=function(a,b,c,d){for(var e=0;e<c;e++)if(Math.round(a[e]*Math.pow(10,d))/Math.pow(10,d)!=Math.round(b[e]*Math.pow(10,d))/Math.pow(10,d))return!1;return!0},cd=function(a,b){for(var c=0;c<a.length;c++)if(!b[c]||a[c].id()!==b[c].id())return!1;return!0},dd=function(a){for(var b=this.nodes(),c=this.edges(),d=this.cy(),e=function(a){return Xc(a)}(a),f={},g=0;g<b.length;g++)f[b[g].id()]=g;for(var h,i=b.length,j=i*i,k=new Array(j),l=0;l<j;l++)k[l]=0;for(var m=0;m<c.length;m++){var n=c[m],o=f[n.source().id()],p=f[n.target().id()],q=Yc(n,e.attributes);k[o*i+p]+=q,k[p*i+o]+=q}!function(a,b,c){for(var d=0;d<b;d++)a[d*b+d]=c}(k,i,e.multFactor),Zc(k,i);for(var r=!0,s=0;r&&s<e.maxIterations;)r=!1,h=_c(k,i,e.expandFactor),k=ad(h,i,e.inflateFactor),bd(k,h,j,4)||(r=!0),s++;var t=function(a,b,c,d){for(var e=[],f=0;f<b;f++){for(var g=[],h=0;h<b;h++)Math.round(1e3*a[f*b+h])/1e3>0&&g.push(c[h]);0!==g.length&&e.push(d.collection(g))}return e}(k,i,b,d);return t=function(a){for(var b=0;b<a.length;b++)for(var c=0;c<a.length;c++)b!=c&&cd(a[b],a[c])&&a.splice(c,1);return a}(t)},ed={markovClustering:dd,mcl:dd},fd=function(a){return a},gd=function(a,b){return Math.abs(b-a)},hd=function(a,b,c){return a+gd(b,c)},id=function(a,b,c){return a+Math.pow(c-b,2)},jd=function(a){return Math.sqrt(a)},kd=function(a,b,c){return Math.max(a,gd(b,c))},ld=function(a,b,c,d,e){for(var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:fd,g=d,h=0;h<a;h++)g=e(g,b(h),c(h));return f(g)},md={euclidean:function(a,b,c){return a>=2?ld(a,b,c,0,id,jd):ld(a,b,c,0,hd)},squaredEuclidean:function(a,b,c){return ld(a,b,c,0,id)},manhattan:function(a,b,c){return ld(a,b,c,0,hd)},max:function(a,b,c){return ld(a,b,c,-1/0,kd)}};md["squared-euclidean"]=md.squaredEuclidean,md.squaredeuclidean=md.squaredEuclidean;var nd=Bb({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),od=function(a){return nd(a)},pd=function(a,b,c,d,e){var f="kMedoids"!==e?function(a){return c[a]}:function(a){return d[a](c)},g=c,h=b;return i(a,d.length,f,function(a){return d[a](b)},g,h)},qd=function(a,b,c){for(var d=c.length,e=new Array(d),f=new Array(d),g=new Array(b),h=null,i=0;i<d;i++)e[i]=a.min(c[i]).value,f[i]=a.max(c[i]).value;for(var j=0;j<b;j++){h=[];for(var k=0;k<d;k++)h[k]=Math.random()*(f[k]-e[k])+e[k];g[j]=h}return g},rd=function(a,b,c,d,e){for(var f=1/0,g=0,h=0;h<b.length;h++){var i=pd(c,a,b[h],d,e);i<f&&(f=i,g=h)}return g},sd=function(a,b,c){for(var d=[],e=null,f=0;f<b.length;f++)c[(e=b[f]).id()]===a&&d.push(e);return d},td=function(a,b,c){for(var d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++)if(Math.abs(a[d][e]-b[d][e])>c)return!1;return!0},ud=function(a,b,c){for(var d=0;d<c;d++)if(a===b[d])return!0;return!1},vd=function(a,b){var c=new Array(b);if(a.length<50)for(var d=0;d<b;d++){for(var e=a[Math.floor(Math.random()*a.length)];ud(e,c,d);)e=a[Math.floor(Math.random()*a.length)];c[d]=e}else for(var f=0;f<b;f++)c[f]=a[Math.floor(Math.random()*a.length)];return c},wd=function(a,b,c){for(var d=0,e=0;e<b.length;e++)d+=pd("manhattan",b[e],a,c,"kMedoids");return d},xd=function(a,b,c,d,e){for(var f,g,h=0;h<b.length;h++)for(var i=0;i<a.length;i++)d[h][i]=Math.pow(c[h][i],e.m);for(var j=0;j<a.length;j++)for(var k=0;k<e.attributes.length;k++){f=0,g=0;for(var l=0;l<b.length;l++)f+=d[l][j]*e.attributes[k](b[l]),g+=d[l][j];a[j][k]=f/g}},yd=function(a,b,c,d,e){for(var f=0;f<a.length;f++)b[f]=a[f].slice();for(var g,h,i,j=2/(e.m-1),k=0;k<c.length;k++)for(var l=0;l<d.length;l++){g=0;for(var m=0;m<c.length;m++)h=pd(e.distance,d[l],c[k],e.attributes,"cmeans"),i=pd(e.distance,d[l],c[m],e.attributes,"cmeans"),g+=Math.pow(h/i,j);a[l][k]=1/g}},zd=function(a){var b,c,d,e,f=this.cy(),g=this.nodes(),h=od(a);d=new Array(g.length);for(var i=0;i<g.length;i++)d[i]=new Array(h.k);c=new Array(g.length);for(var j=0;j<g.length;j++)c[j]=new Array(h.k);for(var k=0;k<g.length;k++){for(var l=0,m=0;m<h.k;m++)c[k][m]=Math.random(),l+=c[k][m];for(var n=0;n<h.k;n++)c[k][n]=c[k][n]/l}b=new Array(h.k);for(var o=0;o<h.k;o++)b[o]=new Array(h.attributes.length);e=new Array(g.length);for(var p=0;p<g.length;p++)e[p]=new Array(h.k);for(var q=!0,r=0;q&&r<h.maxIterations;)q=!1,xd(b,g,c,e,h),yd(c,d,b,g,h),td(c,d,h.sensitivityThreshold)||(q=!0),r++;return{clusters:function(a,b,c,d){for(var e,f,g=new Array(c.k),h=0;h<g.length;h++)g[h]=[];for(var i=0;i<b.length;i++){e=-1/0,f=-1;for(var j=0;j<b[0].length;j++)b[i][j]>e&&(e=b[i][j],f=j);g[f].push(a[i])}for(var k=0;k<g.length;k++)g[k]=d.collection(g[k]);return g}(g,c,h,f),degreeOfMembership:c}},Ad={kMeans:function(b){var c,d=this.cy(),e=this.nodes(),f=null,g=od(b),h=new Array(g.k),i={};c=g.testMode?"number"==typeof g.testCentroids?qd(e,g.k,g.attributes):"object"===a(g.testCentroids)?g.testCentroids:qd(e,g.k,g.attributes):qd(e,g.k,g.attributes);for(var j,k,l,m=!0,n=0;m&&n<g.maxIterations;){for(var o=0;o<e.length;o++)i[(f=e[o]).id()]=rd(f,c,g.distance,g.attributes,"kMeans");m=!1;for(var p=0;p<g.k;p++){var q=sd(p,e,i);if(0!==q.length){for(var r=g.attributes.length,s=c[p],t=new Array(r),u=new Array(r),v=0;v<r;v++){u[v]=0;for(var w=0;w<q.length;w++)f=q[w],u[v]+=g.attributes[v](f);t[v]=u[v]/q.length,j=t[v],k=s[v],l=g.sensitivityThreshold,Math.abs(k-j)<=l||(m=!0)}c[p]=t,h[p]=d.collection(q)}}n++}return h},kMedoids:function(b){var c,d,e=this.cy(),f=this.nodes(),g=null,h=od(b),i=new Array(h.k),j={},k=new Array(h.k);h.testMode?"number"==typeof h.testCentroids||(c="object"===a(h.testCentroids)?h.testCentroids:vd(f,h.k)):c=vd(f,h.k);for(var l=!0,m=0;l&&m<h.maxIterations;){for(var n=0;n<f.length;n++)j[(g=f[n]).id()]=rd(g,c,h.distance,h.attributes,"kMedoids");l=!1;for(var o=0;o<c.length;o++){var p=sd(o,f,j);if(0!==p.length){k[o]=wd(c[o],p,h.attributes);for(var q=0;q<p.length;q++)(d=wd(p[q],p,h.attributes))<k[o]&&(k[o]=d,c[o]=p[q],l=!0);i[o]=e.collection(p)}}m++}return i},fuzzyCMeans:zd,fcm:zd},Bd=Bb({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Cd={single:"min",complete:"max"},Dd=function(a,b,c,d,e){for(var f,g=0,h=1/0,j=e.attributes,k=function(a,b){return i(e.distance,j.length,function(b){return j[b](a)},function(a){return j[a](b)},a,b)},l=0;l<a.length;l++){var m=a[l].key,n=c[m][d[m]];n<h&&(g=m,h=n)}if("threshold"===e.mode&&h>=e.threshold||"dendrogram"===e.mode&&1===a.length)return!1;var o,p=b[g],q=b[d[g]];o="dendrogram"===e.mode?{left:p,right:q,key:p.key}:{value:p.value.concat(q.value),key:p.key},a[p.index]=o,a.splice(q.index,1),b[p.key]=o;for(var r=0;r<a.length;r++){var s=a[r];p.key===s.key?f=1/0:"min"===e.linkage?(f=c[p.key][s.key],c[p.key][s.key]>c[q.key][s.key]&&(f=c[q.key][s.key])):"max"===e.linkage?(f=c[p.key][s.key],c[p.key][s.key]<c[q.key][s.key]&&(f=c[q.key][s.key])):f="mean"===e.linkage?(c[p.key][s.key]*p.size+c[q.key][s.key]*q.size)/(p.size+q.size):"dendrogram"===e.mode?k(s.value,p.value):k(s.value[0],p.value[0]),c[p.key][s.key]=c[s.key][p.key]=f}for(var t=0;t<a.length;t++){var u=a[t].key;if(d[u]===p.key||d[u]===q.key){for(var v=u,w=0;w<a.length;w++){var x=a[w].key;c[u][x]<c[u][v]&&(v=x)}d[u]=v}a[t].index=t}return p.key=q.key=p.index=q.index=null,!0},Ed=function a(b,c,d){b&&(b.value?c.push(b.value):(b.left&&a(b.left,c),b.right&&a(b.right,c)))},Fd=function(a){for(var b=this.cy(),c=this.nodes(),d=function(a){var b=Bd(a),c=Cd[b.linkage];return null!=c&&(b.linkage=c),b}(a),e=d.attributes,f=function(a,b){return i(d.distance,e.length,function(b){return e[b](a)},function(a){return e[a](b)},a,b)},g=[],h=[],j=[],k=[],l=0;l<c.length;l++){var m={value:"dendrogram"===d.mode?c[l]:[c[l]],key:l,index:l};g[l]=m,k[l]=m,h[l]=[],j[l]=0}for(var n=0;n<g.length;n++)for(var o=0;o<=n;o++){var p=void 0;p="dendrogram"===d.mode?n===o?1/0:f(g[n].value,g[o].value):n===o?1/0:f(g[n].value[0],g[o].value[0]),h[n][o]=p,h[o][n]=p,p<h[n][j[n]]&&(j[n]=o)}for(var q,r=Dd(g,k,h,j,d);r;)r=Dd(g,k,h,j,d);return"dendrogram"===d.mode?(q=function a(b,c,d){if(!b)return[];var e=[],f=[],g=[];return 0===c?(b.left&&Ed(b.left,e),b.right&&Ed(b.right,f),g=e.concat(f),[d.collection(g)]):1===c?b.value?[d.collection(b.value)]:(b.left&&Ed(b.left,e),b.right&&Ed(b.right,f),[d.collection(e),d.collection(f)]):b.value?[d.collection(b.value)]:(b.left&&(e=a(b.left,c-1,d)),b.right&&(f=a(b.right,c-1,d)),e.concat(f))}(g[0],d.dendrogramDepth,b),d.addDendrogram&&function a(b,c){if(!b)return"";if(b.left&&b.right){var d=a(b.left,c),e=a(b.right,c),f=c.add({group:"nodes",data:{id:d+","+e}});return c.add({group:"edges",data:{source:d,target:f.id()}}),c.add({group:"edges",data:{source:e,target:f.id()}}),f.id()}return b.value?b.value.id():void 0}(g[0],b)):(q=new Array(g.length),g.forEach(function(a,c){a.key=a.index=null,q[c]=b.collection(a.value)})),q},Gd={hierarchicalClustering:Fd,hca:Fd},Hd=Bb({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Id=function(a,b,c,d){var e=function(a,b){return d[b](a)};return-i(a,d.length,function(a){return e(b,a)},function(a){return e(c,a)},b,c)},Jd=function(a,b){return"median"===b?function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];d?a=a.slice(b,c):(c<a.length&&a.splice(c,a.length-c),b>0&&a.splice(0,b));for(var g=0,h=a.length-1;h>=0;h--){var i=a[h];f?isFinite(i)||(a[h]=-1/0,g++):a.splice(h,1)}e&&a.sort(function(a,b){return a-b});var j=a.length,k=Math.floor(j/2);return j%2!=0?a[k+1+g]:(a[k-1+g]+a[k+g])/2}(a):"mean"===b?function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,d=0,e=0,f=b;f<c;f++){var g=a[f];isFinite(g)&&(d+=g,e++)}return d/e}(a):"min"===b?function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,d=1/0,e=b;e<c;e++){var f=a[e];isFinite(f)&&(d=Math.min(f,d))}return d}(a):"max"===b?function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.length,d=-1/0,e=b;e<c;e++){var f=a[e];isFinite(f)&&(d=Math.max(f,d))}return d}(a):b},Kd=function(a,b,c){for(var d=[],e=0;e<a;e++){for(var f=-1,g=-1/0,h=0;h<c.length;h++){var i=c[h];b[e*a+i]>g&&(f=i,g=b[e*a+i])}f>0&&d.push(f)}for(var j=0;j<c.length;j++)d[c[j]]=c[j];return d},Ld=function(a){for(var b,c,d,e,f,g,h=this.cy(),i=this.nodes(),j=function(a){var b=a.damping,c=a.preference;.5<=b&&b<1||ub("Damping must range on [0.5, 1).  Got: ".concat(b));var d=["median","mean","min","max"];return d.some(function(a){return a===c})||qa(c)||ub("Preference must be one of [".concat(d.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(c)),Hd(a)}(a),k={},l=0;l<i.length;l++)k[i[l].id()]=l;c=(b=i.length)*b,d=new Array(c);for(var m=0;m<c;m++)d[m]=-1/0;for(var n=0;n<b;n++)for(var o=0;o<b;o++)n!==o&&(d[n*b+o]=Id(j.distance,i[n],i[o],j.attributes));e=Jd(d,j.preference);for(var p=0;p<b;p++)d[p*b+p]=e;f=new Array(c);for(var q=0;q<c;q++)f[q]=0;g=new Array(c);for(var r=0;r<c;r++)g[r]=0;for(var s=new Array(b),t=new Array(b),u=new Array(b),v=0;v<b;v++)s[v]=0,t[v]=0,u[v]=0;for(var w,x=new Array(b*j.minIterations),y=0;y<x.length;y++)x[y]=0;for(w=0;w<j.maxIterations;w++){for(var z=0;z<b;z++){for(var A=-1/0,B=-1/0,C=-1,D=0,E=0;E<b;E++)s[E]=f[z*b+E],(D=g[z*b+E]+d[z*b+E])>=A?(B=A,A=D,C=E):D>B&&(B=D);for(var F=0;F<b;F++)f[z*b+F]=(1-j.damping)*(d[z*b+F]-A)+j.damping*s[F];f[z*b+C]=(1-j.damping)*(d[z*b+C]-B)+j.damping*s[C]}for(var G=0;G<b;G++){for(var H=0,I=0;I<b;I++)s[I]=g[I*b+G],t[I]=Math.max(0,f[I*b+G]),H+=t[I];H-=t[G],t[G]=f[G*b+G],H+=t[G];for(var J=0;J<b;J++)g[J*b+G]=(1-j.damping)*Math.min(0,H-t[J])+j.damping*s[J];g[G*b+G]=(1-j.damping)*(H-t[G])+j.damping*s[G]}for(var K=0,L=0;L<b;L++){var M=g[L*b+L]+f[L*b+L]>0?1:0;x[w%j.minIterations*b+L]=M,K+=M}if(K>0&&(w>=j.minIterations-1||w==j.maxIterations-1)){for(var N=0,O=0;O<b;O++){u[O]=0;for(var P=0;P<j.minIterations;P++)u[O]+=x[P*b+O];0!==u[O]&&u[O]!==j.minIterations||N++}if(N===b)break}}for(var Q=function(a,b,c){for(var d=[],e=0;e<a;e++)b[e*a+e]+c[e*a+e]>0&&d.push(e);return d}(b,f,g),R=function(a,b,c){for(var d=Kd(a,b,c),e=0;e<c.length;e++){for(var f=[],g=0;g<d.length;g++)d[g]===c[e]&&f.push(g);for(var h=-1,i=-1/0,j=0;j<f.length;j++){for(var k=0,l=0;l<f.length;l++)k+=b[f[l]*a+f[j]];k>i&&(h=j,i=k)}c[e]=f[h]}return d=Kd(a,b,c)}(b,d,Q),S={},T=0;T<Q.length;T++)S[Q[T]]=[];for(var U=0;U<i.length;U++){var V=R[k[i[U].id()]];null!=V&&S[V].push(i[U])}for(var W=new Array(Q.length),X=0;X<Q.length;X++)W[X]=h.collection(S[Q[X]]);return W},Md={affinityPropagation:Ld,ap:Ld},Nd=Bb({root:void 0,directed:!1}),Od=function(){var a=this,b={},c=0,d=0,e=[],f=[],g={},h=function h(i,j,k){i===k&&(d+=1),b[j]={id:c,low:c++,cutVertex:!1};var l,m,n,o,p=a.getElementById(j).connectedEdges().intersection(a);0===p.size()?e.push(a.spawn(a.getElementById(j))):p.forEach(function(c){l=c.source().id(),m=c.target().id(),(n=l===j?m:l)!==k&&(o=c.id(),g[o]||(g[o]=!0,f.push({x:j,y:n,edge:c})),n in b?b[j].low=Math.min(b[j].low,b[n].id):(h(i,n,j),b[j].low=Math.min(b[j].low,b[n].low),b[j].id<=b[n].low&&(b[j].cutVertex=!0,function(c,d){for(var g=f.length-1,h=[],i=a.spawn();f[g].x!=c||f[g].y!=d;)h.push(f.pop().edge),g--;h.push(f.pop().edge),h.forEach(function(c){var d=c.connectedNodes().intersection(a);i.merge(c),d.forEach(function(c){var d=c.id(),e=c.connectedEdges().intersection(a);i.merge(c),b[d].cutVertex?i.merge(e.filter(function(a){return a.isLoop()})):i.merge(e)})}),e.push(i)}(j,n))))})};a.forEach(function(a){if(a.isNode()){var c=a.id();c in b||(d=0,h(c,c),b[c].cutVertex=d>1)}});var i=Object.keys(b).filter(function(a){return b[a].cutVertex}).map(function(b){return a.getElementById(b)});return{cut:a.spawn(i),components:e}},Pd=function(){var a=this,b={},c=0,d=[],e=[],f=a.spawn(a);return a.forEach(function(g){if(g.isNode()){var h=g.id();h in b||function g(h){if(e.push(h),b[h]={index:c,low:c++,explored:!1},a.getElementById(h).connectedEdges().intersection(a).forEach(function(a){var c=a.target().id();c!==h&&(c in b||g(c),b[c].explored||(b[h].low=Math.min(b[h].low,b[c].low)))}),b[h].index===b[h].low){for(var i=a.spawn();;){var j=e.pop();if(i.merge(a.getElementById(j)),b[j].low=b[h].index,b[j].explored=!0,j===h)break}var k=i.edgesWith(i),l=i.merge(k);d.push(l),f=f.difference(l)}}(h)}}),{cut:f,components:d}},Qd={};[Lb,Ob,Pb,Rb,Tb,Vb,Zb,Qc,Sc,Uc,Wc,ed,Ad,Gd,Md,{hierholzer:function(a){if(!pa(a)){var b=arguments;a={root:b[0],directed:b[1]}}var c,d,e,f=Nd(a),g=f.root,h=f.directed,i=this,j=!1;g&&(e=ma(g)?this.filter(g)[0].id():g[0].id());var k={},l={};h?i.forEach(function(a){var b=a.id();if(a.isNode()){var e=a.indegree(!0),f=a.outdegree(!0),g=e-f,h=f-e;1==g?c?j=!0:c=b:1==h?d?j=!0:d=b:(h>1||g>1)&&(j=!0),k[b]=[],a.outgoers().forEach(function(a){a.isEdge()&&k[b].push(a.id())})}else l[b]=[void 0,a.target().id()]}):i.forEach(function(a){var b=a.id();a.isNode()?(a.degree(!0)%2&&(c?d?j=!0:d=b:c=b),k[b]=[],a.connectedEdges().forEach(function(a){return k[b].push(a.id())})):l[b]=[a.source().id(),a.target().id()]});var m={found:!1,trail:void 0};if(j)return m;if(d&&c)if(h){if(e&&d!=e)return m;e=d}else{if(e&&d!=e&&c!=e)return m;e||(e=d)}else e||(e=i[0].id());var n=function(a){for(var b,c,d,e=a,f=[a];k[e].length;)b=k[e].shift(),c=l[b][0],e!=(d=l[b][1])?(k[d]=k[d].filter(function(a){return a!=b}),e=d):h||e==c||(k[c]=k[c].filter(function(a){return a!=b}),e=c),f.unshift(b),f.unshift(e);return f},o=[],p=[];for(p=n(e);1!=p.length;)0==k[p[0]].length?(o.unshift(i.getElementById(p.shift())),o.unshift(i.getElementById(p.shift()))):p=n(p.shift()).concat(p);for(var q in o.unshift(i.getElementById(p.shift())),k)if(k[q].length)return m;return m.found=!0,m.trail=this.spawn(o),m}},{hopcroftTarjanBiconnected:Od,htbc:Od,htb:Od,hopcroftTarjanBiconnectedComponents:Od},{tarjanStronglyConnected:Pd,tsc:Pd,tscc:Pd,tarjanStronglyConnectedComponents:Pd}].forEach(function(a){Ha(Qd,a)});var Rd=function a(b){if(!(this instanceof a))return new a(b);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof b&&b.call(this,this.fulfill.bind(this),this.reject.bind(this))};Rd.prototype={fulfill:function(a){return Sd(this,1,"fulfillValue",a)},reject:function(a){return Sd(this,2,"rejectReason",a)},then:function(a,b){var c=new Rd;return this.onFulfilled.push(Vd(a,c,"fulfill")),this.onRejected.push(Vd(b,c,"reject")),Td(this),c.proxy}};var Sd=function(a,b,c,d){return 0===a.state&&(a.state=b,a[c]=d,Td(a)),a},Td=function(a){1===a.state?Ud(a,"onFulfilled",a.fulfillValue):2===a.state&&Ud(a,"onRejected",a.rejectReason)},Ud=function(a,b,c){if(0!==a[b].length){var d=a[b];a[b]=[];var e=function(){for(var a=0;a<d.length;a++)d[a](c)};"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)}},Vd=function(a,b,c){return function(d){if("function"!=typeof a)b[c].call(b,d);else{var e;try{e=a(d)}catch(a){return void b.reject(a)}Wd(b,e)}}},Wd=function b(c,d){if(c!==d&&c.proxy!==d){var e;if("object"===a(d)&&null!==d||"function"==typeof d)try{e=d.then}catch(a){return void c.reject(a)}if("function"!=typeof e)c.fulfill(d);else{var f=!1;try{e.call(d,function(a){f||(f=!0,a===d?c.reject(new TypeError("circular thenable chain")):b(c,a))},function(a){f||(f=!0,c.reject(a))})}catch(a){f||c.reject(a)}}}else c.reject(new TypeError("cannot resolve promise with itself"))};Rd.all=function(a){return new Rd(function(b,c){for(var d=new Array(a.length),e=0,f=function(c,f){d[c]=f,++e===a.length&&b(d)},g=0;g<a.length;g++)!function(b){var d=a[b];null!=d&&null!=d.then?d.then(function(a){f(b,a)},function(a){c(a)}):f(b,d)}(g)})},Rd.resolve=function(a){return new Rd(function(b,c){b(a)})},Rd.reject=function(a){return new Rd(function(b,c){c(a)})};var Xd="undefined"!=typeof Promise?Promise:Rd,Yd=function(a,b,c){var d=va(a),e=!d,f=this._private=Ha({duration:1e3},b,c);if(f.target=a,f.style=f.style||f.css,f.started=!1,f.playing=!1,f.hooked=!1,f.applying=!1,f.progress=0,f.completes=[],f.frames=[],f.complete&&na(f.complete)&&f.completes.push(f.complete),e){var g=a.position();f.startPosition=f.startPosition||{x:g.x,y:g.y},f.startStyle=f.startStyle||a.cy().style().getAnimationStartStyle(a,f.style)}if(d){var h=a.pan();f.startPan={x:h.x,y:h.y},f.startZoom=a.zoom()}this.length=1,this[0]=this},Zd=Yd.prototype;Ha(Zd,{instanceString:function(){return"animation"},hook:function(){var a=this._private;if(!a.hooked){var b=a.target._private.animation;(a.queue?b.queue:b.current).push(this),sa(a.target)&&a.target.cy().addToAnimationPool(a.target),a.hooked=!0}return this},play:function(){var a=this._private;return 1===a.progress&&(a.progress=0),a.playing=!0,a.started=!1,a.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var a=this._private;return a.applying=!0,a.started=!1,a.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var a=this._private;return a.playing=!1,a.started=!1,this},stop:function(){var a=this._private;return a.playing=!1,a.started=!1,a.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(a){var b=this._private;return void 0===a?b.progress*b.duration:this.progress(a/b.duration)},progress:function(a){var b=this._private,c=b.playing;return void 0===a?b.progress:(c&&this.pause(),b.progress=a,b.started=!1,c&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var a=this._private,b=a.playing;b&&this.pause(),a.progress=1-a.progress,a.started=!1;var c=function(b,c){var d=a[b];null!=d&&(a[b]=a[c],a[c]=d)};if(c("zoom","startZoom"),c("pan","startPan"),c("position","startPosition"),a.style)for(var d=0;d<a.style.length;d++){var e=a.style[d],f=e.name,g=a.startStyle[f];a.startStyle[f]=e,a.style[d]=g}return b&&this.play(),this},promise:function(a){var b,c=this._private;switch(a){case"frame":b=c.frames;break;default:case"complete":case"completed":b=c.completes}return new Xd(function(a,c){b.push(function(){a()})})}}),Zd.complete=Zd.completed,Zd.run=Zd.play,Zd.running=Zd.playing;var $d={};[{animated:function(){return function(){var a=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var b=a[0];return b?b._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var a=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var b=0;b<a.length;b++)a[b]._private.animation.queue=[];return this}},delay:function(){return function(a,b){return(this._private.cy||this).styleEnabled()?this.animate({delay:a,duration:a,complete:b}):this}},delayAnimation:function(){return function(a,b){return(this._private.cy||this).styleEnabled()?this.animation({delay:a,duration:a,complete:b}):this}},animation:function(){return function(a,b){var c=void 0!==this.length,d=c?this:[this],e=this._private.cy||this,f=!c,g=!f;if(!e.styleEnabled())return this;var h=e.style();if(a=Ha({},a,b),0===Object.keys(a).length)return new Yd(d[0],a);switch(void 0===a.duration&&(a.duration=400),a.duration){case"slow":a.duration=600;break;case"fast":a.duration=200}if(g&&(a.style=h.getPropsList(a.style||a.css),a.css=void 0),g&&null!=a.renderedPosition){var i=a.renderedPosition,j=e.pan(),k=e.zoom();a.position=ac(i,k,j)}if(f&&null!=a.panBy){var l=a.panBy,m=e.pan();a.pan={x:m.x+l.x,y:m.y+l.y}}var n=a.center||a.centre;if(f&&null!=n){var o=e.getCenterPan(n.eles,a.zoom);null!=o&&(a.pan=o)}if(f&&null!=a.fit){var p=a.fit,q=e.getFitViewport(p.eles||p.boundingBox,p.padding);null!=q&&(a.pan=q.pan,a.zoom=q.zoom)}if(f&&pa(a.zoom)){var r=e.getZoomedViewport(a.zoom);null!=r?(r.zoomed&&(a.zoom=r.zoom),r.panned&&(a.pan=r.pan)):a.zoom=null}return new Yd(d[0],a)}},animate:function(){return function(a,b){var c=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;b&&(a=Ha({},a,b));for(var d=0;d<c.length;d++){var e=c[d],f=e.animated()&&(void 0===a.queue||a.queue);e.animation(a,f?{queue:!0}:void 0).play()}return this}},stop:function(){return function(a,b){var c=void 0!==this.length?this:[this],d=this._private.cy||this;if(!d.styleEnabled())return this;for(var e=0;e<c.length;e++){for(var f=c[e]._private,g=f.animation.current,h=0;h<g.length;h++){var i=g[h]._private;b&&(i.duration=0)}a&&(f.animation.queue=[]),b||(f.animation.current=[])}return d.notify("draw"),this}}},{data:function(a){return a=Ha({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,b){},onSet:function(a){},canSet:function(a){return!0}},a),function(b,c){var d=a,f=void 0!==this.length,g=f?this:[this],h=f?this[0]:this;if(ma(b)){var i;if(d.allowGetting&&void 0===c)return h&&(d.beforeGet(h),i=h._private[d.field][b]),i;if(d.allowSetting&&void 0!==c&&!d.immutableKeys[b]){var j=e({},b,c);d.beforeSet(this,j);for(var k=0,l=g.length;k<l;k++){var m=g[k];d.canSet(m)&&(m._private[d.field][b]=c)}d.updateStyle&&this.updateStyle(),d.onSet(this),d.settingTriggersEvent&&this[d.triggerFnName](d.settingEvent)}}else if(d.allowSetting&&pa(b)){var n,o,p=b,q=Object.keys(p);d.beforeSet(this,p);for(var r=0;r<q.length;r++)if(o=p[n=q[r]],!d.immutableKeys[n])for(var s=0;s<g.length;s++){var t=g[s];d.canSet(t)&&(t._private[d.field][n]=o)}d.updateStyle&&this.updateStyle(),d.onSet(this),d.settingTriggersEvent&&this[d.triggerFnName](d.settingEvent)}else if(d.allowBinding&&na(b)){var u=b;this.on(d.bindingEvent,u)}else if(d.allowGetting&&void 0===b){var v;return h&&(d.beforeGet(h),v=h._private[d.field]),v}return this}},removeData:function(a){return a=Ha({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},a),function(b){var c=a,d=void 0!==this.length?this:[this];if(ma(b)){for(var e=b.split(/\s+/),f=e.length,g=0;g<f;g++){var h=e[g];if(!xa(h)&&!c.immutableKeys[h])for(var i=0,j=d.length;i<j;i++)d[i]._private[c.field][h]=void 0}c.triggerEvent&&this[c.triggerFnName](c.event)}else if(void 0===b){for(var k=0,l=d.length;k<l;k++)for(var m=d[k]._private[c.field],n=Object.keys(m),o=0;o<n.length;o++){var p=n[o];!c.immutableKeys[p]&&(m[p]=void 0)}c.triggerEvent&&this[c.triggerFnName](c.event)}return this}}},{eventAliasesOn:function(a){var b=a;b.addListener=b.listen=b.bind=b.on,b.unlisten=b.unbind=b.off=b.removeListener,b.trigger=b.emit,b.pon=b.promiseOn=function(a,b){var c=this,d=Array.prototype.slice.call(arguments,0);return new Xd(function(a,b){var e=d.concat([function(b){c.off.apply(c,f),a(b)}]),f=e.concat([]);c.on.apply(c,e)})}}}].forEach(function(a){Ha($d,a)});var _d={animate:$d.animate(),animation:$d.animation(),animated:$d.animated(),clearQueue:$d.clearQueue(),delay:$d.delay(),delayAnimation:$d.delayAnimation(),stop:$d.stop()},ae={classes:function(a){if(void 0===a){var b=[];return this[0]._private.classes.forEach(function(a){return b.push(a)}),b}oa(a)||(a=(a||"").match(/\S+/g)||[]);for(var c=[],d=new Ib(a),e=0;e<this.length;e++){for(var f=this[e],g=f._private,h=g.classes,i=!1,j=0;j<a.length;j++){var k=a[j];if(!h.has(k)){i=!0;break}}i||(i=h.size!==a.length),i&&(g.classes=d,c.push(f))}return c.length>0&&this.spawn(c).updateStyle().emit("class"),this},addClass:function(a){return this.toggleClass(a,!0)},hasClass:function(a){var b=this[0];return null!=b&&b._private.classes.has(a)},toggleClass:function(a,b){oa(a)||(a=a.match(/\S+/g)||[]);for(var c=void 0===b,d=[],e=0,f=this.length;e<f;e++)for(var g=this[e],h=g._private.classes,i=!1,j=0;j<a.length;j++){var k=a[j],l=h.has(k),m=!1;b||c&&!l?(h.add(k),m=!0):(!b||c&&l)&&(h.delete(k),m=!0),!i&&m&&(d.push(g),i=!0)}return d.length>0&&this.spawn(d).updateStyle().emit("class"),this},removeClass:function(a){return this.toggleClass(a,!1)},flashClass:function(a,b){var c=this;if(null==b)b=250;else if(0===b)return c;return c.addClass(a),setTimeout(function(){c.removeClass(a)},b),c}};ae.className=ae.classNames=ae.classes;var be={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:Fa,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};be.variable="(?:[\\w-]|(?:\\\\"+be.metaChar+"))+",be.value=be.string+"|"+be.number,be.className=be.variable,be.id=be.variable,function(){var a,b,c;for(a=be.comparatorOp.split("|"),c=0;c<a.length;c++)b=a[c],be.comparatorOp+="|@"+b;for(a=be.comparatorOp.split("|"),c=0;c<a.length;c++)(b=a[c]).indexOf("!")>=0||"="!==b&&(be.comparatorOp+="|\\!"+b)}();var ce=0,de=1,ee=2,fe=3,ge=4,he=5,ie=6,je=7,ke=8,le=9,me=10,ne=11,oe=12,pe=13,qe=14,re=15,se=16,te=17,ue=18,ve=19,we=20,xe=[{selector:":selected",matches:function(a){return a.selected()}},{selector:":unselected",matches:function(a){return!a.selected()}},{selector:":selectable",matches:function(a){return a.selectable()}},{selector:":unselectable",matches:function(a){return!a.selectable()}},{selector:":locked",matches:function(a){return a.locked()}},{selector:":unlocked",matches:function(a){return!a.locked()}},{selector:":visible",matches:function(a){return a.visible()}},{selector:":hidden",matches:function(a){return!a.visible()}},{selector:":transparent",matches:function(a){return a.transparent()}},{selector:":grabbed",matches:function(a){return a.grabbed()}},{selector:":free",matches:function(a){return!a.grabbed()}},{selector:":removed",matches:function(a){return a.removed()}},{selector:":inside",matches:function(a){return!a.removed()}},{selector:":grabbable",matches:function(a){return a.grabbable()}},{selector:":ungrabbable",matches:function(a){return!a.grabbable()}},{selector:":animated",matches:function(a){return a.animated()}},{selector:":unanimated",matches:function(a){return!a.animated()}},{selector:":parent",matches:function(a){return a.isParent()}},{selector:":childless",matches:function(a){return a.isChildless()}},{selector:":child",matches:function(a){return a.isChild()}},{selector:":orphan",matches:function(a){return a.isOrphan()}},{selector:":nonorphan",matches:function(a){return a.isChild()}},{selector:":compound",matches:function(a){return a.isNode()?a.isParent():a.source().isParent()||a.target().isParent()}},{selector:":loop",matches:function(a){return a.isLoop()}},{selector:":simple",matches:function(a){return a.isSimple()}},{selector:":active",matches:function(a){return a.active()}},{selector:":inactive",matches:function(a){return!a.active()}},{selector:":backgrounding",matches:function(a){return a.backgrounding()}},{selector:":nonbackgrounding",matches:function(a){return!a.backgrounding()}}].sort(function(a,b){return function(a,b){return-1*Ga(a,b)}(a.selector,b.selector)}),ye=function(){for(var a,b={},c=0;c<xe.length;c++)b[(a=xe[c]).selector]=a.matches;return b}(),ze="("+xe.map(function(a){return a.selector}).join("|")+")",Ae=function(a){return a.replace(new RegExp("\\\\("+be.metaChar+")","g"),function(a,b){return b})},Be=function(a,b,c){a[a.length-1]=c},Ce=[{name:"group",query:!0,regex:"("+be.group+")",populate:function(a,b,c){var d=f(c,1)[0];b.checks.push({type:ce,value:"*"===d?d:d+"s"})}},{name:"state",query:!0,regex:ze,populate:function(a,b,c){var d=f(c,1)[0];b.checks.push({type:je,value:d})}},{name:"id",query:!0,regex:"\\#("+be.id+")",populate:function(a,b,c){var d=f(c,1)[0];b.checks.push({type:ke,value:Ae(d)})}},{name:"className",query:!0,regex:"\\.("+be.className+")",populate:function(a,b,c){var d=f(c,1)[0];b.checks.push({type:le,value:Ae(d)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+be.variable+")\\s*\\]",populate:function(a,b,c){var d=f(c,1)[0];b.checks.push({type:ge,field:Ae(d)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+be.variable+")\\s*("+be.comparatorOp+")\\s*("+be.value+")\\s*\\]",populate:function(a,b,c){var d=f(c,3),e=d[0],g=d[1],h=d[2];h=null!=new RegExp("^"+be.string+"$").exec(h)?h.substring(1,h.length-1):parseFloat(h),b.checks.push({type:fe,field:Ae(e),operator:g,value:h})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+be.boolOp+")\\s*("+be.variable+")\\s*\\]",populate:function(a,b,c){var d=f(c,2),e=d[0],g=d[1];b.checks.push({type:he,field:Ae(g),operator:e})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+be.meta+")\\s*("+be.comparatorOp+")\\s*("+be.number+")\\s*\\]\\]",populate:function(a,b,c){var d=f(c,3),e=d[0],g=d[1],h=d[2];b.checks.push({type:ie,field:Ae(e),operator:g,value:parseFloat(h)})}},{name:"nextQuery",separator:!0,regex:be.separator,populate:function(a,b){var c=a.currentSubject,d=a.edgeCount,e=a.compoundCount,f=a[a.length-1];return null!=c&&(f.subject=c,a.currentSubject=null),f.edgeCount=d,f.compoundCount=e,a.edgeCount=0,a.compoundCount=0,a[a.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:be.directedEdge,populate:function(a,b){if(null==a.currentSubject){var c={checks:[]},d=b,e={checks:[]};return c.checks.push({type:ne,source:d,target:e}),Be(a,0,c),a.edgeCount++,e}var f={checks:[]},g=b,h={checks:[]};return f.checks.push({type:oe,source:g,target:h}),Be(a,0,f),a.edgeCount++,h}},{name:"undirectedEdge",separator:!0,regex:be.undirectedEdge,populate:function(a,b){if(null==a.currentSubject){var c={checks:[]},d=b,e={checks:[]};return c.checks.push({type:me,nodes:[d,e]}),Be(a,0,c),a.edgeCount++,e}var f={checks:[]},g=b,h={checks:[]};return f.checks.push({type:qe,node:g,neighbor:h}),Be(a,0,f),h}},{name:"child",separator:!0,regex:be.child,populate:function(a,b){if(null==a.currentSubject){var c={checks:[]},d={checks:[]},e=a[a.length-1];return c.checks.push({type:re,parent:e,child:d}),Be(a,0,c),a.compoundCount++,d}if(a.currentSubject===b){var f={checks:[]},g=a[a.length-1],h={checks:[]},i={checks:[]},j={checks:[]},k={checks:[]};return f.checks.push({type:ve,left:g,right:h,subject:i}),i.checks=b.checks,b.checks=[{type:we}],k.checks.push({type:we}),h.checks.push({type:te,parent:k,child:j}),Be(a,0,f),a.currentSubject=i,a.compoundCount++,j}var l={checks:[]},m={checks:[]},n=[{type:te,parent:l,child:m}];return l.checks=b.checks,b.checks=n,a.compoundCount++,m}},{name:"descendant",separator:!0,regex:be.descendant,populate:function(a,b){if(null==a.currentSubject){var c={checks:[]},d={checks:[]},e=a[a.length-1];return c.checks.push({type:se,ancestor:e,descendant:d}),Be(a,0,c),a.compoundCount++,d}if(a.currentSubject===b){var f={checks:[]},g=a[a.length-1],h={checks:[]},i={checks:[]},j={checks:[]},k={checks:[]};return f.checks.push({type:ve,left:g,right:h,subject:i}),i.checks=b.checks,b.checks=[{type:we}],k.checks.push({type:we}),h.checks.push({type:ue,ancestor:k,descendant:j}),Be(a,0,f),a.currentSubject=i,a.compoundCount++,j}var l={checks:[]},m={checks:[]},n=[{type:ue,ancestor:l,descendant:m}];return l.checks=b.checks,b.checks=n,a.compoundCount++,m}},{name:"subject",modifier:!0,regex:be.subject,populate:function(a,b){if(null!=a.currentSubject&&a.currentSubject!==b)return wb("Redefinition of subject in selector `"+a.toString()+"`"),!1;a.currentSubject=b;var c=a[a.length-1].checks[0],d=null==c?null:c.type;d===ne?c.type=pe:d===me&&(c.type=qe,c.node=c.nodes[1],c.neighbor=c.nodes[0],c.nodes=null)}}];Ce.forEach(function(a){return a.regexObj=new RegExp("^"+a.regex)});var De=function(a){for(var b,c,d,e=0;e<Ce.length;e++){var f=Ce[e],g=f.name,h=a.match(f.regexObj);if(null!=h){c=h,b=f,d=g;var i=h[0];a=a.substring(i.length);break}}return{expr:b,match:c,name:d,remaining:a}},Ee={parse:function(a){var b=this.inputText=a,c=this[0]={checks:[]};for(this.length=1,b=function(a){var b=a.match(/^\s+/);if(b){var c=b[0];a=a.substring(c.length)}return a}(b);;){var d=De(b);if(null==d.expr)return wb("The selector `"+a+"`is invalid"),!1;var e=d.match.slice(1),f=d.expr.populate(this,c,e);if(!1===f)return!1;if(null!=f&&(c=f),(b=d.remaining).match(/^\s*$/))break}var g=this[this.length-1];null!=this.currentSubject&&(g.subject=this.currentSubject),g.edgeCount=this.edgeCount,g.compoundCount=this.compoundCount;for(var h=0;h<this.length;h++){var i=this[h];if(i.compoundCount>0&&i.edgeCount>0)return wb("The selector `"+a+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(i.edgeCount>1)return wb("The selector `"+a+"` is invalid because it uses multiple edge selectors"),!1;1===i.edgeCount&&wb("The selector `"+a+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var a=function(a){return null==a?"":a},b=function(b){return ma(b)?'"'+b+'"':a(b)},c=function(a){return" "+a+" "},d=function(d,f){var g=d.type,h=d.value;switch(g){case ce:var i=a(h);return i.substring(0,i.length-1);case fe:var j=d.field,k=d.operator;return"["+j+c(a(k))+b(h)+"]";case he:var l=d.operator,m=d.field;return"["+a(l)+m+"]";case ge:return"["+d.field+"]";case ie:var n=d.operator;return"[["+d.field+c(a(n))+b(h)+"]]";case je:return h;case ke:return"#"+h;case le:return"."+h;case te:case re:return e(d.parent,f)+c(">")+e(d.child,f);case ue:case se:return e(d.ancestor,f)+" "+e(d.descendant,f);case ve:var o=e(d.left,f),p=e(d.subject,f),q=e(d.right,f);return o+(o.length>0?" ":"")+p+q;case we:return""}},e=function(a,b){return a.checks.reduce(function(c,e,f){return c+(b===a&&0===f?"$":"")+d(e,b)},"")},f="",g=0;g<this.length;g++){var h=this[g];f+=e(h,h.subject),this.length>1&&g<this.length-1&&(f+=", ")}return this.toStringCache=f,f}},Fe=function(a,b,c){var d,e,f,g=ma(a),h=qa(a),i=ma(c),j=!1,k=!1,l=!1;switch(b.indexOf("!")>=0&&(b=b.replace("!",""),k=!0),b.indexOf("@")>=0&&(b=b.replace("@",""),j=!0),(g||i||j)&&(e=g||h?""+a:"",f=""+c),j&&(a=e=e.toLowerCase(),c=f=f.toLowerCase()),b){case"*=":d=e.indexOf(f)>=0;break;case"$=":d=e.indexOf(f,e.length-f.length)>=0;break;case"^=":d=0===e.indexOf(f);break;case"=":d=a===c;break;case">":l=!0,d=a>c;break;case">=":l=!0,d=a>=c;break;case"<":l=!0,d=a<c;break;case"<=":l=!0,d=a<=c;break;default:d=!1}return!k||null==a&&l||(d=!d),d},Ge=function(a,b){return a.data(b)},He=[],Ie=function(a,b){return a.checks.every(function(a){return He[a.type](a,b)})};He[ce]=function(a,b){var c=a.value;return"*"===c||c===b.group()},He[je]=function(a,b){return function(a,b){return ye[a](b)}(a.value,b)},He[ke]=function(a,b){var c=a.value;return b.id()===c},He[le]=function(a,b){var c=a.value;return b.hasClass(c)},He[ie]=function(a,b){var c=a.field,d=a.operator,e=a.value;return Fe(function(a,b){return a[b]()}(b,c),d,e)},He[fe]=function(a,b){var c=a.field,d=a.operator,e=a.value;return Fe(Ge(b,c),d,e)},He[he]=function(a,b){var c=a.field,d=a.operator;return function(a,b){switch(b){case"?":return!!a;case"!":return!a;case"^":return void 0===a}}(Ge(b,c),d)},He[ge]=function(a,b){var c=a.field;return a.operator,void 0!==Ge(b,c)},He[me]=function(a,b){var c=a.nodes[0],d=a.nodes[1],e=b.source(),f=b.target();return Ie(c,e)&&Ie(d,f)||Ie(d,e)&&Ie(c,f)},He[qe]=function(a,b){return Ie(a.node,b)&&b.neighborhood().some(function(b){return b.isNode()&&Ie(a.neighbor,b)})},He[ne]=function(a,b){return Ie(a.source,b.source())&&Ie(a.target,b.target())},He[oe]=function(a,b){return Ie(a.source,b)&&b.outgoers().some(function(b){return b.isNode()&&Ie(a.target,b)})},He[pe]=function(a,b){return Ie(a.target,b)&&b.incomers().some(function(b){return b.isNode()&&Ie(a.source,b)})},He[re]=function(a,b){return Ie(a.child,b)&&Ie(a.parent,b.parent())},He[te]=function(a,b){return Ie(a.parent,b)&&b.children().some(function(b){return Ie(a.child,b)})},He[se]=function(a,b){return Ie(a.descendant,b)&&b.ancestors().some(function(b){return Ie(a.ancestor,b)})},He[ue]=function(a,b){return Ie(a.ancestor,b)&&b.descendants().some(function(b){return Ie(a.descendant,b)})},He[ve]=function(a,b){return Ie(a.subject,b)&&Ie(a.left,b)&&Ie(a.right,b)},He[we]=function(){return!0},He[de]=function(a,b){return a.value.has(b)},He[ee]=function(a,b){return(0,a.value)(b)};var Je=function(a){this.inputText=a,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==a||ma(a)&&a.match(/^\s*$/)||(sa(a)?this.addQuery({checks:[{type:de,value:a.collection()}]}):na(a)?this.addQuery({checks:[{type:ee,value:a}]}):ma(a)?this.parse(a)||(this.invalid=!0):ub("A selector must be created from a string; found "))},Ke=Je.prototype;[Ee,{matches:function(a){for(var b=0;b<this.length;b++){var c=this[b];if(Ie(c,a))return!0}return!1},filter:function(a){var b=this;if(1===b.length&&1===b[0].checks.length&&b[0].checks[0].type===ke)return a.getElementById(b[0].checks[0].value).collection();var c=function(a){for(var c=0;c<b.length;c++){var d=b[c];if(Ie(d,a))return!0}return!1};return null==b.text()&&(c=function(){return!0}),a.filter(c)}}].forEach(function(a){return Ha(Ke,a)}),Ke.text=function(){return this.inputText},Ke.size=function(){return this.length},Ke.eq=function(a){return this[a]},Ke.sameText=function(a){return!this.invalid&&!a.invalid&&this.text()===a.text()},Ke.addQuery=function(a){this[this.length++]=a},Ke.selector=Ke.toString;var Le={allAre:function(a){var b=new Je(a);return this.every(function(a){return b.matches(a)})},is:function(a){var b=new Je(a);return this.some(function(a){return b.matches(a)})},some:function(a,b){for(var c=0;c<this.length;c++)if(b?a.apply(b,[this[c],c,this]):a(this[c],c,this))return!0;return!1},every:function(a,b){for(var c=0;c<this.length;c++)if(!(b?a.apply(b,[this[c],c,this]):a(this[c],c,this)))return!1;return!0},same:function(a){if(this===a)return!0;a=this.cy().collection(a);var b=this.length;return b===a.length&&(1===b?this[0]===a[0]:this.every(function(b){return a.hasElementWithId(b.id())}))},anySame:function(a){return a=this.cy().collection(a),this.some(function(b){return a.hasElementWithId(b.id())})},allAreNeighbors:function(a){a=this.cy().collection(a);var b=this.neighborhood();return a.every(function(a){return b.hasElementWithId(a.id())})},contains:function(a){a=this.cy().collection(a);var b=this;return a.every(function(a){return b.hasElementWithId(a.id())})}};Le.allAreNeighbours=Le.allAreNeighbors,Le.has=Le.contains,Le.equal=Le.equals=Le.same;var Me,Ne,Oe=function(a,b){return function(c,d,e,f){var g,h=c;if(null==h?g="":sa(h)&&1===h.length&&(g=h.id()),1===this.length&&g){var i=this[0]._private,j=i.traversalCache=i.traversalCache||{},k=j[b]=j[b]||[],l=jb(g);return k[l]||(k[l]=a.call(this,c,d,e,f))}return a.call(this,c,d,e,f)}},Pe={parent:function(a){var b=[];if(1===this.length){var c=this[0]._private.parent;if(c)return c}for(var d=0;d<this.length;d++){var e=this[d]._private.parent;e&&b.push(e)}return this.spawn(b,{unique:!0}).filter(a)},parents:function(a){for(var b=[],c=this.parent();c.nonempty();){for(var d=0;d<c.length;d++){var e=c[d];b.push(e)}c=c.parent()}return this.spawn(b,{unique:!0}).filter(a)},commonAncestors:function(a){for(var b,c=0;c<this.length;c++){var d=this[c].parents();b=(b=b||d).intersect(d)}return b.filter(a)},orphans:function(a){return this.stdFilter(function(a){return a.isOrphan()}).filter(a)},nonorphans:function(a){return this.stdFilter(function(a){return a.isChild()}).filter(a)},children:Oe(function(a){for(var b=[],c=0;c<this.length;c++)for(var d=this[c]._private.children,e=0;e<d.length;e++)b.push(d[e]);return this.spawn(b,{unique:!0}).filter(a)},"children"),siblings:function(a){return this.parent().children().not(this).filter(a)},isParent:function(){var a=this[0];if(a)return a.isNode()&&0!==a._private.children.length},isChildless:function(){var a=this[0];if(a)return a.isNode()&&0===a._private.children.length},isChild:function(){var a=this[0];if(a)return a.isNode()&&null!=a._private.parent},isOrphan:function(){var a=this[0];if(a)return a.isNode()&&null==a._private.parent},descendants:function(a){var b=[];return function a(c){for(var d=0;d<c.length;d++){var e=c[d];b.push(e),e.children().nonempty()&&a(e.children())}}(this.children()),this.spawn(b,{unique:!0}).filter(a)}};Pe.forEachDown=function(a){return j(this,a,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],k)},Pe.forEachUp=function(a){return j(this,a,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l)},Pe.forEachUpAndDown=function(a){return j(this,a,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m)},Pe.ancestors=Pe.parents,(Me=Ne={data:$d.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$d.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$d.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$d.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$d.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$d.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var a=this[0];if(a)return a._private.data.id}}).attr=Me.data,Me.removeAttr=Me.removeData;var Qe,Re,Se=Ne,Te={};Ha(Te,{degree:n(function(a,b){return b.source().same(b.target())?2:1}),indegree:n(function(a,b){return b.target().same(a)?1:0}),outdegree:n(function(a,b){return b.source().same(a)?1:0})}),Ha(Te,{minDegree:o("degree",function(a,b){return a<b}),maxDegree:o("degree",function(a,b){return a>b}),minIndegree:o("indegree",function(a,b){return a<b}),maxIndegree:o("indegree",function(a,b){return a>b}),minOutdegree:o("outdegree",function(a,b){return a<b}),maxOutdegree:o("outdegree",function(a,b){return a>b})}),Ha(Te,{totalDegree:function(a){for(var b=0,c=this.nodes(),d=0;d<c.length;d++)b+=c[d].degree(a);return b}});var Ue=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(!e.locked()){var f=e._private.position,g={x:null!=b.x?b.x-f.x:0,y:null!=b.y?b.y-f.y:0};!e.isParent()||0===g.x&&0===g.y||e.children().shift(g,c),e.shiftCachedBoundingBox(g)}}},Ve={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(a){a.updateCompoundBounds()},beforeSet:function(a,b){Ue(a,b,!1)},onSet:function(a){a.dirtyCompoundBoundsCache()},canSet:function(a){return!a.locked()}};(Qe=Re={position:$d.data(Ve),silentPosition:$d.data(Ha({},Ve,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(a,b){Ue(a,b,!0)}})),positions:function(a,b){if(pa(a))b?this.silentPosition(a):this.position(a);else if(na(a)){var c=a,d=this.cy();d.startBatch();for(var e=0;e<this.length;e++){var f,g=this[e];(f=c(g,e))&&(b?g.silentPosition(f):g.position(f))}d.endBatch()}return this},silentPositions:function(a){return this.positions(a,!0)},shift:function(a,b,c){var d;if(pa(a)?(d={x:qa(a.x)?a.x:0,y:qa(a.y)?a.y:0},c=b):ma(a)&&qa(b)&&((d={x:0,y:0})[a]=b),null!=d){var e=this.cy();e.startBatch();for(var f=0;f<this.length;f++){var g=this[f],h=g.position(),i={x:h.x+d.x,y:h.y+d.y};c?g.silentPosition(i):g.position(i)}e.endBatch()}return this},silentShift:function(a,b){return pa(a)?this.shift(a,!0):ma(a)&&qa(b)&&this.shift(a,b,!0),this},renderedPosition:function(a,b){var c=this[0],d=this.cy(),e=d.zoom(),f=d.pan(),g=pa(a)?a:void 0,h=void 0!==g||void 0!==b&&ma(a);if(c&&c.isNode()){if(!h){var i=c.position();return g=_b(i,e,f),void 0===a?g:g[a]}for(var j=0;j<this.length;j++){var k=this[j];void 0!==b?k.position(a,(b-f[a])/e):void 0!==g&&k.position(ac(g,e,f))}}else if(!h)return;return this},relativePosition:function(a,b){var c=this[0],d=this.cy(),e=pa(a)?a:void 0,f=void 0!==e||void 0!==b&&ma(a),g=d.hasCompoundNodes();if(c&&c.isNode()){if(!f){var h=c.position(),i=g?c.parent():null,j=i&&i.length>0,k=j;j&&(i=i[0]);var l=k?i.position():{x:0,y:0};return e={x:h.x-l.x,y:h.y-l.y},void 0===a?e:e[a]}for(var m=0;m<this.length;m++){var n=this[m],o=g?n.parent():null,p=o&&o.length>0,q=p;p&&(o=o[0]);var r=q?o.position():{x:0,y:0};void 0!==b?n.position(a,b+r[a]):void 0!==e&&n.position({x:e.x+r.x,y:e.y+r.y})}}else if(!f)return;return this}}).modelPosition=Qe.point=Qe.position,Qe.modelPositions=Qe.points=Qe.positions,Qe.renderedPoint=Qe.renderedPosition,Qe.relativePoint=Qe.relativePosition;var We,Xe,Ye=Re;We=Xe={},Xe.renderedBoundingBox=function(a){var b=this.boundingBox(a),c=this.cy(),d=c.zoom(),e=c.pan(),f=b.x1*d+e.x,g=b.x2*d+e.x,h=b.y1*d+e.y,i=b.y2*d+e.y;return{x1:f,x2:g,y1:h,y2:i,w:g-f,h:i-h}},Xe.dirtyCompoundBoundsCache=function(){var a=this.cy();return a.styleEnabled()&&a.hasCompoundNodes()?(this.forEachUp(function(a){if(a.isParent()){var b=a._private;b.compoundBoundsClean=!1,b.bbCache=null,a.emitAndNotify("bounds")}}),this):this},Xe.updateCompoundBounds=function(){function a(a){function b(a,b,c){var d=0,e=0,f=b+c;return a>0&&f>0&&(d=b/f*a,e=c/f*a),{biasDiff:d,biasComplementDiff:e}}if(a.isParent()){var c=a._private,d=a.children(),e="include"===a.pstyle("compound-sizing-wrt-labels").value,f={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},g=d.boundingBox({includeLabels:e,includeOverlays:!1,useCache:!1}),h=c.position;0!==g.w&&0!==g.h||((g={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue}).x1=h.x-g.w/2,g.x2=h.x+g.w/2,g.y1=h.y-g.h/2,g.y2=h.y+g.h/2);var i=f.width.left.value;"px"===f.width.left.units&&f.width.val>0&&(i=100*i/f.width.val);var j=f.width.right.value;"px"===f.width.right.units&&f.width.val>0&&(j=100*j/f.width.val);var k=f.height.top.value;"px"===f.height.top.units&&f.height.val>0&&(k=100*k/f.height.val);var l=f.height.bottom.value;"px"===f.height.bottom.units&&f.height.val>0&&(l=100*l/f.height.val);var m=b(f.width.val-g.w,i,j),n=m.biasDiff,o=m.biasComplementDiff,p=b(f.height.val-g.h,k,l),q=p.biasDiff,r=p.biasComplementDiff;c.autoPadding=function(a,b,c,d){if("%"!==c.units)return"px"===c.units?c.pfValue:0;switch(d){case"width":return a>0?c.pfValue*a:0;case"height":return b>0?c.pfValue*b:0;case"average":return a>0&&b>0?c.pfValue*(a+b)/2:0;case"min":return a>0&&b>0?a>b?c.pfValue*b:c.pfValue*a:0;case"max":return a>0&&b>0?a>b?c.pfValue*a:c.pfValue*b:0;default:return 0}}(g.w,g.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),c.autoWidth=Math.max(g.w,f.width.val),h.x=(-n+g.x1+g.x2+o)/2,c.autoHeight=Math.max(g.h,f.height.val),h.y=(-q+g.y1+g.y2+r)/2}}var b=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes())return this;if(!b&&c.batching())return this;for(var d=0;d<this.length;d++){var e=this[d],f=e._private;f.compoundBoundsClean||(a(e),c.batching()||(f.compoundBoundsClean=!0))}return this};var Ze=function(a){return a===1/0||a===-1/0?0:a},$e=function(a,b,c,d,e){d-b!=0&&e-c!=0&&null!=b&&null!=c&&null!=d&&null!=e&&(a.x1=b<a.x1?b:a.x1,a.x2=d>a.x2?d:a.x2,a.y1=c<a.y1?c:a.y1,a.y2=e>a.y2?e:a.y2,a.w=a.x2-a.x1,a.h=a.y2-a.y1)},_e=function(a,b){return null==b?a:$e(a,b.x1,b.y1,b.x2,b.y2)},af=function(a,b,c){return Eb(a,b,c)},bf=function(a,b,c){if(!b.cy().headless()){var d,e,f=b._private,g=f.rstyle,h=g.arrowWidth/2;if("none"!==b.pstyle(c+"-arrow-shape").value){"source"===c?(d=g.srcX,e=g.srcY):"target"===c?(d=g.tgtX,e=g.tgtY):(d=g.midX,e=g.midY);var i=f.arrowBounds=f.arrowBounds||{},j=i[c]=i[c]||{};j.x1=d-h,j.y1=e-h,j.x2=d+h,j.y2=e+h,j.w=j.x2-j.x1,j.h=j.y2-j.y1,nc(j,1),$e(a,j.x1,j.y1,j.x2,j.y2)}}},cf=function(a,b,c){if(!b.cy().headless()){var d;d=c?c+"-":"";var e=b._private,f=e.rstyle;if(b.pstyle(d+"label").strValue){var g,h,i,j,k=b.pstyle("text-halign"),l=b.pstyle("text-valign"),m=af(f,"labelWidth",c),n=af(f,"labelHeight",c),o=af(f,"labelX",c),p=af(f,"labelY",c),q=b.pstyle(d+"text-margin-x").pfValue,r=b.pstyle(d+"text-margin-y").pfValue,s=b.isEdge(),t=b.pstyle(d+"text-rotation"),u=b.pstyle("text-outline-width").pfValue,v=b.pstyle("text-border-width").pfValue/2,w=b.pstyle("text-background-padding").pfValue,x=n,y=m,z=y/2,A=x/2;if(s)g=o-z,h=o+z,i=p-A,j=p+A;else{switch(k.value){case"left":g=o-y,h=o;break;case"center":g=o-z,h=o+z;break;case"right":g=o,h=o+y}switch(l.value){case"top":i=p-x,j=p;break;case"center":i=p-A,j=p+A;break;case"bottom":i=p,j=p+x}}g+=q-Math.max(u,v)-w,h+=q+Math.max(u,v)+w,i+=r-Math.max(u,v)-w,j+=r+Math.max(u,v)+w;var B=c||"main",C=e.labelBounds,D=C[B]=C[B]||{};D.x1=g,D.y1=i,D.x2=h,D.y2=j,D.w=h-g,D.h=j-i,nc(D,1);var E=s&&"autorotate"===t.strValue,F=null!=t.pfValue&&0!==t.pfValue;if(E||F){var G=E?af(e.rstyle,"labelAngle",c):t.pfValue,H=Math.cos(G),I=Math.sin(G),J=(g+h)/2,K=(i+j)/2;if(!s){switch(k.value){case"left":J=h;break;case"right":J=g}switch(l.value){case"top":K=j;break;case"bottom":K=i}}var L=function(a,b){return{x:(a-=J)*H-(b-=K)*I+J,y:a*I+b*H+K}},M=L(g,i),N=L(g,j),O=L(h,i),P=L(h,j);g=Math.min(M.x,N.x,O.x,P.x),h=Math.max(M.x,N.x,O.x,P.x),i=Math.min(M.y,N.y,O.y,P.y),j=Math.max(M.y,N.y,O.y,P.y)}var Q=B+"Rot",R=C[Q]=C[Q]||{};R.x1=g,R.y1=i,R.x2=h,R.y2=j,R.w=h-g,R.h=j-i,$e(a,g,i,h,j),$e(e.labelBounds.all,g,i,h,j)}return a}},df=function(a){var b=0,c=function(a){return(a?1:0)<<b++},d=0;return d+=c(a.incudeNodes),d+=c(a.includeEdges),d+=c(a.includeLabels),d+=c(a.includeMainLabels),d+=c(a.includeSourceLabels),d+=c(a.includeTargetLabels),d+=c(a.includeOverlays)},ef=function(a){if(a.isEdge()){var b=a.source().position(),c=a.target().position(),d=function(a){return Math.round(a)};return ib([d(b.x),d(b.y),d(c.x),d(c.y)])}return 0},ff=function(a,b){var c,d=a._private,e=a.isEdge(),f=(null==b?hf:df(b))===hf,g=ef(a),h=d.bbCachePosKey===g,i=function(a){return null==a._private.bbCache},j=!(b.useCache&&h)||i(a)||e&&i(a.source())||i(a.target());if(j?(h||a.recalculateRenderedStyle(),c=function(a,b){var c,d,e,f,g,h,i,j=a._private.cy,k=j.styleEnabled(),l=j.headless(),m=lc(),n=a._private,o=a.isNode(),p=a.isEdge(),q=n.rstyle,r=o&&k?a.pstyle("bounds-expansion").pfValue:[0],s=function(a){return"none"!==a.pstyle("display").value},t=!k||s(a)&&(!p||s(a.source())&&s(a.target()));if(t){var u=0;k&&b.includeOverlays&&0!==a.pstyle("overlay-opacity").value&&(u=a.pstyle("overlay-padding").value);var v=0;if(k&&(v=a.pstyle("width").pfValue/2),o&&b.includeNodes){var w=a.position();g=w.x,h=w.y;var x=a.outerWidth()/2,y=a.outerHeight()/2;$e(m,c=g-x,e=h-y,d=g+x,f=h+y)}else if(p&&b.includeEdges)if(k&&!l){var z=a.pstyle("curve-style").strValue;if(c=Math.min(q.srcX,q.midX,q.tgtX),d=Math.max(q.srcX,q.midX,q.tgtX),e=Math.min(q.srcY,q.midY,q.tgtY),f=Math.max(q.srcY,q.midY,q.tgtY),$e(m,c-=v,e-=v,d+=v,f+=v),"haystack"===z){var A=q.haystackPts;if(A&&2===A.length){if(c=A[0].x,e=A[0].y,c>(d=A[1].x)){var B=c;c=d,d=B}if(e>(f=A[1].y)){var C=e;e=f,f=C}$e(m,c-v,e-v,d+v,f+v)}}else if("bezier"===z||"unbundled-bezier"===z||"segments"===z||"taxi"===z){var D;switch(z){case"bezier":case"unbundled-bezier":D=q.bezierPts;break;case"segments":case"taxi":D=q.linePts}if(null!=D)for(var E=0;E<D.length;E++){var F=D[E];c=F.x-v,d=F.x+v,e=F.y-v,f=F.y+v,$e(m,c,e,d,f)}}}else{var G=a.source().position(),H=a.target().position();if((c=G.x)>(d=H.x)){var I=c;c=d,d=I}if((e=G.y)>(f=H.y)){var J=e;e=f,f=J}$e(m,c-=v,e-=v,d+=v,f+=v)}if(k&&b.includeEdges&&p&&(bf(m,a,"mid-source"),bf(m,a,"mid-target"),bf(m,a,"source"),bf(m,a,"target")),k&&"yes"===a.pstyle("ghost").value){var K=a.pstyle("ghost-offset-x").pfValue,L=a.pstyle("ghost-offset-y").pfValue;$e(m,m.x1+K,m.y1+L,m.x2+K,m.y2+L)}var M=n.bodyBounds=n.bodyBounds||{};pc(M,m),oc(M,r),nc(M,1),k&&(c=m.x1,d=m.x2,e=m.y1,f=m.y2,$e(m,c-u,e-u,d+u,f+u));var N=n.overlayBounds=n.overlayBounds||{};pc(N,m),oc(N,r),nc(N,1);var O=n.labelBounds=n.labelBounds||{};null!=O.all?((i=O.all).x1=1/0,i.y1=1/0,i.x2=-1/0,i.y2=-1/0,i.w=0,i.h=0):O.all=lc(),k&&b.includeLabels&&(b.includeMainLabels&&cf(m,a,null),p&&(b.includeSourceLabels&&cf(m,a,"source"),b.includeTargetLabels&&cf(m,a,"target")))}return m.x1=Ze(m.x1),m.y1=Ze(m.y1),m.x2=Ze(m.x2),m.y2=Ze(m.y2),m.w=Ze(m.x2-m.x1),m.h=Ze(m.y2-m.y1),m.w>0&&m.h>0&&t&&(oc(m,r),nc(m,1)),m}(a,gf),d.bbCache=c,d.bbCacheShift.x=d.bbCacheShift.y=0,d.bbCachePosKey=g):c=d.bbCache,!j&&(0!==d.bbCacheShift.x||0!==d.bbCacheShift.y)){var k=qc,l=d.bbCacheShift,m=function(a,b){null!=a&&k(a,b)};k(c,l);var n=d.bodyBounds,o=d.overlayBounds,p=d.labelBounds,q=d.arrowBounds;m(n,l),m(o,l),null!=q&&(m(q.source,l),m(q.target,l),m(q["mid-source"],l),m(q["mid-target"],l)),null!=p&&(m(p.main,l),m(p.all,l),m(p.source,l),m(p.target,l))}if(d.bbCacheShift.x=d.bbCacheShift.y=0,!f){var r=a.isNode();c=lc(),(b.includeNodes&&r||b.includeEdges&&!r)&&(b.includeOverlays?_e(c,d.overlayBounds):_e(c,d.bodyBounds)),b.includeLabels&&(b.includeMainLabels&&(!e||b.includeSourceLabels&&b.includeTargetLabels)?_e(c,d.labelBounds.all):(b.includeMainLabels&&_e(c,d.labelBounds.mainRot),b.includeSourceLabels&&_e(c,d.labelBounds.sourceRot),b.includeTargetLabels&&_e(c,d.labelBounds.targetRot))),c.w=c.x2-c.x1,c.h=c.y2-c.y1}return c},gf={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},hf=df(gf),jf=Bb(gf);Xe.boundingBox=function(a){var b;if(1!==this.length||null==this[0]._private.bbCache||void 0!==a&&void 0!==a.useCache&&!0!==a.useCache){b=lc();var c=jf(a=a||gf);if(this.cy().styleEnabled())for(var d=0;d<this.length;d++){var e=this[d],f=e._private,g=ef(e),h=f.bbCachePosKey===g,i=c.useCache&&h;e.recalculateRenderedStyle(i)}this.updateCompoundBounds();for(var j=0;j<this.length;j++){var k=this[j];_e(b,ff(k,c))}}else a=void 0===a?gf:jf(a),b=ff(this[0],a);return b.x1=Ze(b.x1),b.y1=Ze(b.y1),b.x2=Ze(b.x2),b.y2=Ze(b.y2),b.w=Ze(b.x2-b.x1),b.h=Ze(b.y2-b.y1),b},Xe.dirtyBoundingBoxCache=function(){for(var a=0;a<this.length;a++){var b=this[a]._private;b.bbCache=null,b.bbCacheShift.x=b.bbCacheShift.y=0,b.bbCachePosKey=null,b.bodyBounds=null,b.overlayBounds=null,b.labelBounds.all=null,b.labelBounds.source=null,b.labelBounds.target=null,b.labelBounds.main=null,b.labelBounds.sourceRot=null,b.labelBounds.targetRot=null,b.labelBounds.mainRot=null,b.arrowBounds.source=null,b.arrowBounds.target=null,b.arrowBounds["mid-source"]=null,b.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Xe.shiftCachedBoundingBox=function(a){for(var b=0;b<this.length;b++){var c=this[b]._private;null!=c.bbCache&&(c.bbCacheShift.x+=a.x,c.bbCacheShift.y+=a.y)}return this.emitAndNotify("bounds"),this},Xe.boundingBoxAt=function(a){var b=this.nodes(),c=this.cy(),d=c.hasCompoundNodes();if(d&&(b=b.filter(function(a){return!a.isParent()})),pa(a)){var e=a;a=function(){return e}}c.startBatch(),b.forEach(function(b,c){return b._private.bbAtOldPos=a(b,c)}).silentPositions(a),d&&this.updateCompoundBounds(!0);var f=function(a){return{x1:a.x1,x2:a.x2,w:a.w,y1:a.y1,y2:a.y2,h:a.h}}(this.boundingBox({useCache:!1}));return b.silentPositions(function(a){return a._private.bbAtOldPos}),c.endBatch(),f},We.boundingbox=We.bb=We.boundingBox,We.renderedBoundingbox=We.renderedBoundingBox;var kf,lf,mf=Xe;kf=lf={};var nf=function(a){a.uppercaseName=Ea(a.name),a.autoName="auto"+a.uppercaseName,a.labelName="label"+a.uppercaseName,a.outerName="outer"+a.uppercaseName,a.uppercaseOuterName=Ea(a.outerName),kf[a.name]=function(){var b=this[0],c=b._private,d=c.cy._private.styleEnabled;if(b){if(!d)return 1;if(b.isParent())return b.updateCompoundBounds(),c[a.autoName]||0;var e=b.pstyle(a.name);switch(e.strValue){case"label":return b.recalculateRenderedStyle(),c.rstyle[a.labelName]||0;default:return e.pfValue}}},kf["outer"+a.uppercaseName]=function(){var b=this[0],c=b._private.cy._private.styleEnabled;if(b)return c?b[a.name]()+b.pstyle("border-width").pfValue+2*b.padding():1},kf["rendered"+a.uppercaseName]=function(){var b=this[0];if(b)return b[a.name]()*this.cy().zoom()},kf["rendered"+a.uppercaseOuterName]=function(){var b=this[0];if(b)return b[a.outerName]()*this.cy().zoom()}};nf({name:"width"}),nf({name:"height"}),lf.padding=function(){var a=this[0],b=a._private;return a.isParent()?(a.updateCompoundBounds(),void 0!==b.autoPadding?b.autoPadding:a.pstyle("padding").pfValue):a.pstyle("padding").pfValue},lf.paddedHeight=function(){var a=this[0];return a.height()+2*a.padding()},lf.paddedWidth=function(){var a=this[0];return a.width()+2*a.padding()};var of=lf,pf={controlPoints:{get:function(a){return a.renderer().getControlPoints(a)},mult:!0},segmentPoints:{get:function(a){return a.renderer().getSegmentPoints(a)},mult:!0},sourceEndpoint:{get:function(a){return a.renderer().getSourceEndpoint(a)}},targetEndpoint:{get:function(a){return a.renderer().getTargetEndpoint(a)}},midpoint:{get:function(a){return a.renderer().getEdgeMidpoint(a)}}},qf=Object.keys(pf).reduce(function(a,b){var c=pf[b],d=function(a){return"rendered"+a[0].toUpperCase()+a.substr(1)}(b);return a[b]=function(){return function(a,b){if(a.isEdge())return b(a)}(this,c.get)},c.mult?a[d]=function(){return function(a,b){if(a.isEdge()){var c=a.cy(),d=c.pan(),e=c.zoom();return b(a).map(function(a){return _b(a,e,d)})}}(this,c.get)}:a[d]=function(){return function(a,b){if(a.isEdge()){var c=a.cy();return _b(b(a),c.zoom(),c.pan())}}(this,c.get)},a},{}),rf=Ha({},Ye,mf,of,qf),sf=function(a,b){this.recycle(a,b)};sf.prototype={instanceString:function(){return"event"},recycle:function(a,b){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=p,null!=a&&a.preventDefault?(this.type=a.type,this.isDefaultPrevented=a.defaultPrevented?q:p):null!=a&&a.type?b=a:this.type=a,null!=b&&(this.originalEvent=b.originalEvent,this.type=null!=b.type?b.type:this.type,this.cy=b.cy,this.target=b.target,this.position=b.position,this.renderedPosition=b.renderedPosition,this.namespace=b.namespace,this.layout=b.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var c=this.position,d=this.cy.zoom(),e=this.cy.pan();this.renderedPosition={x:c.x*d+e.x,y:c.y*d+e.y}}this.timeStamp=a&&a.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=q;var a=this.originalEvent;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.isPropagationStopped=q;var a=this.originalEvent;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=q,this.stopPropagation()},isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p};var tf=/^([^.]+)(\.(?:[^.]+))?$/,uf={qualifierCompare:function(a,b){return a===b},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(a){return a},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},vf=Object.keys(uf),wf={},xf=r.prototype,yf=function(a,b,c,d,e,f,g){na(d)&&(e=d,d=null),g&&(f=null==f?g:Ha({},f,g));for(var h=oa(c)?c:c.split(/\s+/),i=0;i<h.length;i++){var j=h[i];if(!xa(j)){var k=j.match(tf);if(k&&!1===b(a,j,k[1],k[2]?k[2]:null,d,e,f))break}}},zf=function(a,b){return a.addEventFields(a.context,b),new sf(b.type,b)},Af=function(a,b,c){if("event"!==la(c))if(pa(c))b(a,zf(a,c));else for(var d=oa(c)?c:c.split(/\s+/),e=0;e<d.length;e++){var f=d[e];if(!xa(f)){var g=f.match(tf);if(g){var h=g[1],i=g[2]?g[2]:null;b(a,zf(a,{type:h,namespace:i,target:a.context}))}}}else b(a,c)};xf.on=xf.addListener=function(a,b,c,d,e){return yf(this,function(a,b,c,d,e,f,g){na(f)&&a.listeners.push({event:b,callback:f,type:c,namespace:d,qualifier:e,conf:g})},a,b,c,d,e),this},xf.one=function(a,b,c,d){return this.on(a,b,c,d,{one:!0})},xf.removeListener=xf.off=function(a,b,c,d){var e=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var f=this.listeners,g=function(g){var h=f[g];yf(e,function(b,c,d,e,i,j){if((h.type===d||"*"===a)&&(!e&&".*"!==h.namespace||h.namespace===e)&&(!i||b.qualifierCompare(h.qualifier,i))&&(!j||h.callback===j))return f.splice(g,1),!1},a,b,c,d)},h=f.length-1;h>=0;h--)g(h);return this},xf.removeAllListeners=function(){return this.removeListener("*")},xf.emit=xf.trigger=function(a,b,c){var d=this.listeners,e=d.length;return this.emitting++,oa(b)||(b=[b]),Af(this,function(a,f){null!=c&&(d=[{event:f.event,type:f.type,namespace:f.namespace,callback:c}],e=d.length);for(var g=function(c){var e=d[c];if(e.type===f.type&&(!e.namespace||e.namespace===f.namespace||".*"===e.namespace)&&a.eventMatches(a.context,e,f)){var g=[f];null!=b&&function(a,b){for(var c=0;c<b.length;c++){var d=b[c];a.push(d)}}(g,b),a.beforeEmit(a.context,e,f),e.conf&&e.conf.one&&(a.listeners=a.listeners.filter(function(a){return a!==e}));var h=a.callbackContext(a.context,e,f),i=e.callback.apply(h,g);a.afterEmit(a.context,e,f),!1===i&&(f.stopPropagation(),f.preventDefault())}},h=0;h<e;h++)g(h);a.bubble(a.context)&&!f.isPropagationStopped()&&a.parent(a.context).emit(f,b)},a),this.emitting--,this};var Bf={qualifierCompare:function(a,b){return null==a||null==b?null==a&&null==b:a.sameText(b)},eventMatches:function(a,b,c){var d=b.qualifier;return null==d||a!==c.target&&ta(c.target)&&d.matches(c.target)},addEventFields:function(a,b){b.cy=a.cy(),b.target=a},callbackContext:function(a,b,c){return null!=b.qualifier?c.target:a},beforeEmit:function(a,b){b.conf&&b.conf.once&&b.conf.onceCollection.removeListener(b.event,b.qualifier,b.callback)},bubble:function(){return!0},parent:function(a){return a.isChild()?a.parent():a.cy()}},Cf=function(a){return ma(a)?new Je(a):a},Df={createEmitter:function(){for(var a=0;a<this.length;a++){var b=this[a],c=b._private;c.emitter||(c.emitter=new r(Bf,b))}return this},emitter:function(){return this._private.emitter},on:function(a,b,c){for(var d=Cf(b),e=0;e<this.length;e++)this[e].emitter().on(a,d,c);return this},removeListener:function(a,b,c){for(var d=Cf(b),e=0;e<this.length;e++)this[e].emitter().removeListener(a,d,c);return this},removeAllListeners:function(){for(var a=0;a<this.length;a++)this[a].emitter().removeAllListeners();return this},one:function(a,b,c){for(var d=Cf(b),e=0;e<this.length;e++)this[e].emitter().one(a,d,c);return this},once:function(a,b,c){for(var d=Cf(b),e=0;e<this.length;e++)this[e].emitter().on(a,d,c,{once:!0,onceCollection:this})},emit:function(a,b){for(var c=0;c<this.length;c++)this[c].emitter().emit(a,b);return this},emitAndNotify:function(a,b){if(0!==this.length)return this.cy().notify(a,this),this.emit(a,b),this}};$d.eventAliasesOn(Df);var Ef={nodes:function(a){return this.filter(function(a){return a.isNode()}).filter(a)},edges:function(a){return this.filter(function(a){return a.isEdge()}).filter(a)},byGroup:function(){for(var a=this.spawn(),b=this.spawn(),c=0;c<this.length;c++){var d=this[c];d.isNode()?a.merge(d):b.merge(d)}return{nodes:a,edges:b}},filter:function(a,b){if(void 0===a)return this;if(ma(a)||sa(a))return new Je(a).filter(this);if(na(a)){for(var c=this.spawn(),d=0;d<this.length;d++){var e=this[d];(b?a.apply(b,[e,d,this]):a(e,d,this))&&c.merge(e)}return c}return this.spawn()},not:function(a){if(a){ma(a)&&(a=this.filter(a));for(var b=[],c=a._private.map,d=0;d<this.length;d++){var e=this[d];c.has(e.id())||b.push(e)}return this.spawn(b)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(a){if(ma(a)){var b=a;return this.filter(b)}for(var c=[],d=a,e=this.length<a.length,f=e?d._private.map:this._private.map,g=e?this:d,h=0;h<g.length;h++){var i=g[h]._private.data.id,j=f.get(i);j&&c.push(j.ele)}return this.spawn(c)},xor:function(a){var b=this._private.cy;ma(a)&&(a=b.$(a));var c=[],d=a,e=function(a,b){for(var d=0;d<a.length;d++){var e=a[d],f=e._private.data.id;b.hasElementWithId(f)||c.push(e)}};return e(this,d),e(d,this),this.spawn(c)},diff:function(a){var b=this._private.cy;ma(a)&&(a=b.$(a));var c=[],d=[],e=[],f=a,g=function(a,b,c){for(var d=0;d<a.length;d++){var f=a[d],g=f._private.data.id;b.hasElementWithId(g)?e.push(f):c.push(f)}};return g(this,f,c),g(f,this,d),{left:this.spawn(c,{unique:!0}),right:this.spawn(d,{unique:!0}),both:this.spawn(e,{unique:!0})}},add:function(a){var b=this._private.cy;if(!a)return this;if(ma(a)){var c=a;a=b.mutableElements().filter(c)}for(var d=[],e=0;e<this.length;e++)d.push(this[e]);for(var f=this._private.map,g=0;g<a.length;g++){!f.has(a[g].id())&&d.push(a[g])}return this.spawn(d)},merge:function(a){var b=this._private,c=b.cy;if(!a)return this;if(a&&ma(a)){var d=a;a=c.mutableElements().filter(d)}for(var e=b.map,f=0;f<a.length;f++){var g=a[f],h=g._private.data.id;if(e.has(h)){var i=e.get(h).index;this[i]=g,e.set(h,{ele:g,index:i})}else{var j=this.length++;this[j]=g,e.set(h,{ele:g,index:j})}}return this},unmergeAt:function(a){var b=this[a].id(),c=this._private.map;this[a]=void 0,c.delete(b);var d=a===this.length-1;if(this.length>1&&!d){var e=this.length-1,f=this[e],g=f._private.data.id;this[e]=void 0,this[a]=f,c.set(g,{ele:f,index:a})}return this.length--,this},unmergeOne:function(a){a=a[0];var b=this._private,c=a._private.data.id,d=b.map.get(c);if(!d)return this;var e=d.index;return this.unmergeAt(e),this},unmerge:function(a){var b=this._private.cy;if(!a)return this;if(a&&ma(a)){var c=a;a=b.mutableElements().filter(c)}for(var d=0;d<a.length;d++)this.unmergeOne(a[d]);return this},unmergeBy:function(a){for(var b=this.length-1;b>=0;b--)a(this[b])&&this.unmergeAt(b);return this},map:function(a,b){for(var c=[],d=0;d<this.length;d++){var e=this[d],f=b?a.apply(b,[e,d,this]):a(e,d,this);c.push(f)}return c},reduce:function(a,b){for(var c=b,d=0;d<this.length;d++)c=a(c,this[d],d,this);return c},max:function(a,b){for(var c,d=-1/0,e=0;e<this.length;e++){var f=this[e],g=b?a.apply(b,[f,e,this]):a(f,e,this);g>d&&(d=g,c=f)}return{value:d,ele:c}},min:function(a,b){for(var c,d=1/0,e=0;e<this.length;e++){var f=this[e],g=b?a.apply(b,[f,e,this]):a(f,e,this);g<d&&(d=g,c=f)}return{value:d,ele:c}}},Ff=Ef;Ff.u=Ff["|"]=Ff["+"]=Ff.union=Ff.or=Ff.add,Ff["\\"]=Ff["!"]=Ff["-"]=Ff.difference=Ff.relativeComplement=Ff.subtract=Ff.not,Ff.n=Ff["&"]=Ff["."]=Ff.and=Ff.intersection=Ff.intersect,Ff["^"]=Ff["(+)"]=Ff["(-)"]=Ff.symmetricDifference=Ff.symdiff=Ff.xor,Ff.fnFilter=Ff.filterFn=Ff.stdFilter=Ff.filter,Ff.complement=Ff.abscomp=Ff.absoluteComplement;var Gf=function(a,b){function c(a){var b=a.pstyle("z-compound-depth");return"auto"===b.value?e?a.zDepth():0:"bottom"===b.value?-1:"top"===b.value?pb:0}function d(a){return"auto"===a.pstyle("z-index-compare").value&&a.isNode()?1:0}var e=a.cy().hasCompoundNodes(),f=c(a)-c(b);if(0!==f)return f;var g=d(a)-d(b);if(0!==g)return g;var h=a.pstyle("z-index").value-b.pstyle("z-index").value;return 0!==h?h:a.poolIndex()-b.poolIndex()},Hf={forEach:function(a,b){if(na(a))for(var c=this.length,d=0;d<c;d++){var e=this[d];if(!1===(b?a.apply(b,[e,d,this]):a(e,d,this)))break}return this},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a},slice:function(a,b){var c=[],d=this.length;null==b&&(b=d),null==a&&(a=0),a<0&&(a=d+a),b<0&&(b=d+b);for(var e=a;e>=0&&e<b&&e<d;e++)c.push(this[e]);return this.spawn(c)},size:function(){return this.length},eq:function(a){return this[a]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(a){if(!na(a))return this;var b=this.toArray().sort(a);return this.spawn(b)},sortByZIndex:function(){return this.sort(Gf)},zDepth:function(){var a=this[0];if(a){var b=a._private;if("nodes"===b.group){var c=b.data.parent?a.parents().size():0;return a.isParent()?c:pb-1}var d=b.source,e=b.target,f=d.zDepth(),g=e.zDepth();return Math.max(f,g,0)}}};Hf.each=Hf.forEach,"undefined"!=("undefined"==typeof Symbol?"undefined":a(Symbol))&&"undefined"!=a(Symbol.iterator)&&(Hf[Symbol.iterator]=function(){var a=this,b={value:void 0,done:!1},c=0,d=this.length;return e({next:function(){return c<d?b.value=a[c++]:(b.value=void 0,b.done=!0),b}},Symbol.iterator,function(){return this})});var If=Bb({nodeDimensionsIncludeLabels:!1}),Jf={layoutDimensions:function(a){var b;if(a=If(a),this.takesUpSpace())if(a.nodeDimensionsIncludeLabels){var c=this.boundingBox();b={w:c.w,h:c.h}}else b={w:this.outerWidth(),h:this.outerHeight()};else b={w:0,h:0};return 0!==b.w&&0!==b.h||(b.w=b.h=1),b},layoutPositions:function(a,b,c){var d=this.nodes(),e=this.cy(),f=b.eles,g=function(a){return a.id()},h=Aa(c,g);a.emit({type:"layoutstart",layout:a}),a.animations=[];var i=b.spacingFactor&&1!==b.spacingFactor,j=function(){if(!i)return null;for(var a=lc(),b=0;b<d.length;b++){var c=d[b],e=h(c,b);mc(a,e.x,e.y)}return a}(),k=Aa(function(a,c){var d=h(a,c);return i&&(d=function(a,b,c){var d=b.x1+b.w/2,e=b.y1+b.h/2;return{x:d+(c.x-d)*a,y:e+(c.y-e)*a}}(Math.abs(b.spacingFactor),j,d)),null!=b.transform&&(d=b.transform(a,d)),d},g);if(b.animate){for(var l=0;l<d.length;l++){var m=d[l],n=k(m,l);if(null==b.animateFilter||b.animateFilter(m,l)){var o=m.animation({position:n,duration:b.animationDuration,easing:b.animationEasing});a.animations.push(o)}else m.position(n)}if(b.fit){var p=e.animation({fit:{boundingBox:f.boundingBoxAt(k),padding:b.padding},duration:b.animationDuration,easing:b.animationEasing});a.animations.push(p)}else if(void 0!==b.zoom&&void 0!==b.pan){var q=e.animation({zoom:b.zoom,pan:b.pan,duration:b.animationDuration,easing:b.animationEasing});a.animations.push(q)}a.animations.forEach(function(a){return a.play()}),a.one("layoutready",b.ready),a.emit({type:"layoutready",layout:a}),Xd.all(a.animations.map(function(a){return a.promise()})).then(function(){a.one("layoutstop",b.stop),a.emit({type:"layoutstop",layout:a})})}else d.positions(k),b.fit&&e.fit(b.eles,b.padding),null!=b.zoom&&e.zoom(b.zoom),b.pan&&e.pan(b.pan),a.one("layoutready",b.ready),a.emit({type:"layoutready",layout:a}),a.one("layoutstop",b.stop),a.emit({type:"layoutstop",layout:a});return this},layout:function(a){return this.cy().makeLayout(Ha({},a,{eles:this}))}};Jf.createLayout=Jf.makeLayout=Jf.layout;var Kf={recalculateRenderedStyle:function(a){var b=this.cy(),c=b.renderer(),d=b.styleEnabled();return c&&d&&c.recalculateRenderedStyle(this,a),this},dirtyStyleCache:function(){var a,b=this.cy(),c=function(a){return a._private.styleCache=null};return b.hasCompoundNodes()?((a=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(a.connectedEdges()),a.forEach(c)):this.forEach(function(a){c(a),a.connectedEdges().forEach(c)}),this},updateStyle:function(a){var b=this._private.cy;if(!b.styleEnabled())return this;if(b.batching())return b._private.batchStyleEles.merge(this),this;var c=b.hasCompoundNodes(),d=b.style(),e=this;a=!(!a&&void 0!==a),c&&(e=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var f=d.apply(e);return a?f.emitAndNotify("style"):f.emit("style"),this},parsedStyle:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=this[0],d=c.cy();if(d.styleEnabled()&&c){var e=c._private.style[a];return null!=e?e:b?d.style().getDefaultProperty(a):null}},numericStyle:function(a){var b=this[0];if(b.cy().styleEnabled()&&b){var c=b.pstyle(a);return void 0!==c.pfValue?c.pfValue:c.value}},numericStyleUnits:function(a){var b=this[0];if(b.cy().styleEnabled())return b?b.pstyle(a).units:void 0},renderedStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=this[0];return c?b.style().getRenderedStyle(c,a):void 0},style:function(a,b){var c=this.cy();if(!c.styleEnabled())return this;var d=c.style();if(pa(a)){var e=a;d.applyBypass(this,e,!1),this.emitAndNotify("style")}else if(ma(a)){if(void 0===b){var f=this[0];return f?d.getStylePropertyValue(f,a):void 0}d.applyBypass(this,a,b,!1),this.emitAndNotify("style")}else if(void 0===a){var g=this[0];return g?d.getRawStyle(g):void 0}return this},removeStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=b.style();if(void 0===a)for(var d=0;d<this.length;d++){var e=this[d];c.removeAllBypasses(e,!1)}else{a=a.split(/\s+/);for(var f=0;f<this.length;f++){var g=this[f];c.removeBypasses(g,a,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var a=this.cy();if(!a.styleEnabled())return 1;var b=a.hasCompoundNodes(),c=this[0];if(c){var d=c._private,e=c.pstyle("opacity").value;if(!b)return e;var f=d.data.parent?c.parents():null;if(f)for(var g=0;g<f.length;g++)e*=f[g].pstyle("opacity").value;return e}},transparent:function(){if(!this.cy().styleEnabled())return!1;var a=this[0],b=a.cy().hasCompoundNodes();return a?b?0===a.effectiveOpacity():0===a.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}},Lf=t("eleTakesUpSpace",function(a){return"element"===a.pstyle("display").value&&0!==a.width()&&(!a.isNode()||0!==a.height())});Kf.takesUpSpace=u("takesUpSpace",w({ok:Lf}));var Mf=t("eleInteractive",function(a){return"yes"===a.pstyle("events").value&&"visible"===a.pstyle("visibility").value&&Lf(a)}),Nf=t("parentInteractive",function(a){return"visible"===a.pstyle("visibility").value&&Lf(a)});Kf.interactive=u("interactive",w({ok:Mf,parentOk:Nf,edgeOkViaNode:Lf})),Kf.noninteractive=function(){var a=this[0];if(a)return!a.interactive()};var Of=t("eleVisible",function(a){return"visible"===a.pstyle("visibility").value&&0!==a.pstyle("opacity").pfValue&&Lf(a)}),Pf=Lf;Kf.visible=u("visible",w({ok:Of,edgeOkViaNode:Pf})),Kf.hidden=function(){var a=this[0];if(a)return!a.visible()},Kf.isBundledBezier=u("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),Kf.bypass=Kf.css=Kf.style,Kf.renderedCss=Kf.renderedStyle,Kf.removeBypass=Kf.removeCss=Kf.removeStyle,Kf.pstyle=Kf.parsedStyle;var Qf={};y({field:"locked",overrideField:function(a){return!!a.cy().autolock()||void 0},on:"lock",off:"unlock"}),y({field:"grabbable",overrideField:function(a){return!a.cy().autoungrabify()&&!a.pannable()&&void 0},on:"grabify",off:"ungrabify"}),y({field:"selected",ableField:"selectable",overrideAble:function(a){return!a.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),y({field:"selectable",overrideField:function(a){return!a.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Qf.deselect=Qf.unselect,Qf.grabbed=function(){var a=this[0];if(a)return a._private.grabbed},y({field:"active",on:"activate",off:"unactivate"}),y({field:"pannable",on:"panify",off:"unpanify"}),Qf.inactive=function(){var a=this[0];if(a)return!a._private.active};var Rf={},Sf=function(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d];if(e.isNode()){for(var f=!1,g=e.connectedEdges(),h=0;h<g.length;h++){var i=g[h],j=i.source(),k=i.target();if(a.noIncomingEdges&&k===e&&j!==e||a.noOutgoingEdges&&j===e&&k!==e){f=!0;break}}f||c.push(e)}}return this.spawn(c,{unique:!0}).filter(b)}},Tf=function(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d];if(e.isNode())for(var f=e.connectedEdges(),g=0;g<f.length;g++){var h=f[g],i=h.source(),j=h.target();a.outgoing&&i===e?(c.push(h),c.push(j)):a.incoming&&j===e&&(c.push(h),c.push(i))}}return this.spawn(c,{unique:!0}).filter(b)}},Uf=function(a){return function(b){for(var c=this,d=[],e={};;){var f=a.outgoing?c.outgoers():c.incomers();if(0===f.length)break;for(var g=!1,h=0;h<f.length;h++){var i=f[h],j=i.id();e[j]||(e[j]=!0,d.push(i),g=!0)}if(!g)break;c=f}return this.spawn(d,{unique:!0}).filter(b)}};Rf.clearTraversalCache=function(){for(var a=0;a<this.length;a++)this[a]._private.traversalCache=null},Ha(Rf,{roots:Sf({noIncomingEdges:!0}),leaves:Sf({noOutgoingEdges:!0}),outgoers:Oe(Tf({outgoing:!0}),"outgoers"),successors:Uf({outgoing:!0}),incomers:Oe(Tf({incoming:!0}),"incomers"),predecessors:Uf({incoming:!0})}),Ha(Rf,{neighborhood:Oe(function(a){for(var b=[],c=this.nodes(),d=0;d<c.length;d++)for(var e=c[d],f=e.connectedEdges(),g=0;g<f.length;g++){var h=f[g],i=h.source(),j=h.target(),k=e===i?j:i;k.length>0&&b.push(k[0]),b.push(h[0])}return this.spawn(b,{unique:!0}).filter(a)},"neighborhood"),closedNeighborhood:function(a){return this.neighborhood().add(this).filter(a)},openNeighborhood:function(a){return this.neighborhood(a)}}),Rf.neighbourhood=Rf.neighborhood,Rf.closedNeighbourhood=Rf.closedNeighborhood,Rf.openNeighbourhood=Rf.openNeighborhood,Ha(Rf,{source:Oe(function(a){var b,c=this[0];return c&&(b=c._private.source||c.cy().collection()),b&&a?b.filter(a):b},"source"),target:Oe(function(a){var b,c=this[0];return c&&(b=c._private.target||c.cy().collection()),b&&a?b.filter(a):b},"target"),sources:z({attr:"source"}),targets:z({attr:"target"})}),Ha(Rf,{edgesWith:Oe(A(),"edgesWith"),edgesTo:Oe(A({thisIsSrc:!0}),"edgesTo")}),Ha(Rf,{connectedEdges:Oe(function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];if(d.isNode())for(var e=d._private.edges,f=0;f<e.length;f++){var g=e[f];b.push(g)}}return this.spawn(b,{unique:!0}).filter(a)},"connectedEdges"),connectedNodes:Oe(function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];d.isEdge()&&(b.push(d.source()[0]),b.push(d.target()[0]))}return this.spawn(b,{unique:!0}).filter(a)},"connectedNodes"),parallelEdges:Oe(B(),"parallelEdges"),codirectedEdges:Oe(B({codirected:!0}),"codirectedEdges")}),Ha(Rf,{components:function(a){var b=this,c=b.cy(),d=c.collection(),e=null==a?b.nodes():a.nodes(),f=[];null!=a&&e.empty()&&(e=a.sources());var g=function(a,b){d.merge(a),e.unmerge(a),b.merge(a)};if(e.empty())return b.spawn();var h=function(){var a=c.collection();f.push(a);var d=e[0];g(d,a),b.bfs({directed:!1,roots:d,visit:function(b){return g(b,a)}}),a.forEach(function(c){c.connectedEdges().forEach(function(c){b.has(c)&&a.has(c.source())&&a.has(c.target())&&a.merge(c)})})};do{h()}while(e.length>0);return f},component:function(){var a=this[0];return a.cy().mutableElements().components(a)[0]}}),Rf.componentsOf=Rf.components;var Vf=function(a,b,c){for(var d=null!=c?c:yb();a.hasElementWithId(d);)d=yb();return d},Wf=function(a,b,c){if(void 0!==a&&va(a)){var d=new Gb,e=!1;if(b){if(b.length>0&&pa(b[0])&&!ta(b[0])){e=!0;for(var f=[],g=new Ib,h=0,i=b.length;h<i;h++){var j=b[h];null==j.data&&(j.data={});var k=j.data;if(null==k.id)k.id=Vf(a,j);else if(a.hasElementWithId(k.id)||g.has(k.id))continue;var l=new Jb(a,j,!1);f.push(l),g.add(k.id)}b=f}}else b=[];this.length=0;for(var m=0,n=b.length;m<n;m++){var o=b[m][0];if(null!=o){var p=o._private.data.id;(null==c||c.unique&&!d.has(p))&&(d.set(p,{index:this.length,ele:o}),this[this.length]=o,this.length++)}}this._private={cy:a,map:d},e&&this.restore()}else ub("A collection must have a reference to the core")},Xf=Jb.prototype=Wf.prototype;Xf.instanceString=function(){return"collection"},Xf.spawn=function(a,b,c){return va(a)||(c=b,b=a,a=this.cy()),new Wf(a,b,c)},Xf.spawnSelf=function(){return this.spawn(this)},Xf.cy=function(){return this._private.cy},Xf.renderer=function(){return this._private.cy.renderer()},Xf.element=function(){return this[0]},Xf.collection=function(){return ua(this)?this:new Wf(this._private.cy,[this])},Xf.unique=function(){return new Wf(this._private.cy,this,{unique:!0})},Xf.hasElementWithId=function(a){return a=""+a,this._private.map.has(a)},Xf.getElementById=function(a){a=""+a;var b=this._private.cy,c=this._private.map.get(a);return c?c.ele:new Wf(b)},Xf.$id=Xf.getElementById,Xf.poolIndex=function(){var a=this._private.cy._private.elements,b=this[0]._private.data.id;return a._private.map.get(b).index},Xf.indexOf=function(a){var b=a[0]._private.data.id;return this._private.map.get(b).index},Xf.indexOfId=function(a){return a=""+a,this._private.map.get(a).index},Xf.json=function(a){var b=this.element(),c=this.cy();if(null==b&&a)return this;if(null!=b){var d=b._private;if(pa(a)){if(c.startBatch(),a.data){b.data(a.data);var e=d.data;if(b.isEdge()){var f=!1,g={},h=a.data.source,i=a.data.target;null!=h&&h!=e.source&&(g.source=""+h,f=!0),null!=i&&i!=e.target&&(g.target=""+i,f=!0),f&&(b=b.move(g))}else{var j=a.data.parent;null==j&&null==e.parent||j==e.parent||(void 0===j&&(j=null),null!=j&&(j=""+j),b=b.move({parent:j}))}}a.position&&b.position(a.position);var k=function(c,e,f){var g=a[c];null!=g&&g!==d[c]&&(g?b[e]():b[f]())};return k("removed","remove","restore"),k("selected","select","unselect"),k("selectable","selectify","unselectify"),k("locked","lock","unlock"),k("grabbable","grabify","ungrabify"),k("pannable","panify","unpanify"),null!=a.classes&&b.classes(a.classes),c.endBatch(),this}if(void 0===a){var l={data:xb(d.data),position:xb(d.position),group:d.group,removed:d.removed,selected:d.selected,selectable:d.selectable,locked:d.locked,grabbable:d.grabbable,pannable:d.pannable,classes:null};l.classes="";var m=0;return d.classes.forEach(function(a){return l.classes+=0==m++?a:" "+a}),l}}},Xf.jsons=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b].json();a.push(c)}return a},Xf.clone=function(){for(var a=this.cy(),b=[],c=0;c<this.length;c++){var d=this[c].json(),e=new Jb(a,d,!1);b.push(e)}return new Wf(a,b)},Xf.copy=Xf.clone,Xf.restore=function(){for(var a,b,c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=this,f=e.cy(),g=f._private,h=[],i=[],j=0,k=e.length;j<k;j++){var l=e[j];d&&!l.removed()||(l.isNode()?h.push(l):i.push(l))}a=h.concat(i);var m=function(){a.splice(b,1),b--};for(b=0;b<a.length;b++){var n=a[b],o=n._private,p=o.data;if(n.clearTraversalCache(),d||o.removed)if(void 0===p.id)p.id=Vf(f,n);else if(qa(p.id))p.id=""+p.id;else{if(xa(p.id)||!ma(p.id)){ub("Can not create element with invalid string ID `"+p.id+"`"),m();continue}if(f.hasElementWithId(p.id)){ub("Can not create second element with ID `"+p.id+"`"),m();continue}}var q=p.id;if(n.isNode()){var r=o.position;null==r.x&&(r.x=0),null==r.y&&(r.y=0)}if(n.isEdge()){for(var s=n,t=["source","target"],u=t.length,v=!1,w=0;w<u;w++){var x=t[w],y=p[x];qa(y)&&(y=p[x]=""+p[x]),null==y||""===y?(ub("Can not create edge `"+q+"` with unspecified "+x),v=!0):f.hasElementWithId(y)||(ub("Can not create edge `"+q+"` with nonexistant "+x+" `"+y+"`"),v=!0)}if(v){m();continue}var z=f.getElementById(p.source),A=f.getElementById(p.target);z.same(A)?z._private.edges.push(s):(z._private.edges.push(s),A._private.edges.push(s)),s._private.source=z,s._private.target=A}o.map=new Gb,o.map.set(q,{ele:n,index:0}),o.removed=!1,d&&f.addToPool(n)}for(var B=0;B<h.length;B++){var C=h[B],D=C._private.data;qa(D.parent)&&(D.parent=""+D.parent);var E=D.parent;if(null!=E){var F=f.getElementById(E);if(F.empty())D.parent=void 0;else{for(var G=!1,H=F;!H.empty();){if(C.same(H)){G=!0,D.parent=void 0;break}H=H.parent()}G||(F[0]._private.children.push(C),C._private.parent=F[0],g.hasCompoundNodes=!0)}}}if(a.length>0){for(var I=new Wf(f,a),J=0;J<I.length;J++){var K=I[J];K.isNode()||(K.parallelEdges().clearTraversalCache(),K.source().clearTraversalCache(),K.target().clearTraversalCache())}(g.hasCompoundNodes?f.collection().merge(I).merge(I.connectedNodes()).merge(I.parent()):I).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(c),c?I.emitAndNotify("add"):d&&I.emit("add")}return e},Xf.removed=function(){var a=this[0];return a&&a._private.removed},Xf.inside=function(){var a=this[0];return a&&!a._private.removed},Xf.remove=function(){function a(a){for(var b=a._private.edges,d=0;d<b.length;d++)c(b[d])}function b(a){for(var b=a._private.children,d=0;d<b.length;d++)c(b[d])}function c(c){var d=k[c.id()];h&&c.removed()||d||(k[c.id()]=!0,c.isNode()?(j.push(c),a(c),b(c)):j.unshift(c))}function d(a,b){var c=a._private.edges;Cb(c,b),a.clearTraversalCache()}function e(a){a.clearTraversalCache()}function f(a,b){b=b[0];var c=(a=a[0])._private.children,d=a.id();Cb(c,b),b._private.parent=null,o.ids[d]||(o.ids[d]=!0,o.push(a))}for(var g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,j=[],k={},l=i._private.cy,m=0,n=i.length;m<n;m++){c(i[m])}var o=[];o.ids={},i.dirtyCompoundBoundsCache(),h&&l.removeFromPool(j);for(var p=0;p<j.length;p++){var q=j[p];if(q.isEdge()){var r=q.source()[0],s=q.target()[0];d(r,q),d(s,q);for(var t=q.parallelEdges(),u=0;u<t.length;u++){var v=t[u];e(v),v.isBundledBezier()&&v.dirtyBoundingBoxCache()}}else{var w=q.parent();0!==w.length&&f(w,q)}h&&(q._private.removed=!0)}var x=l._private.elements;l._private.hasCompoundNodes=!1;for(var y=0;y<x.length;y++){if(x[y].isParent()){l._private.hasCompoundNodes=!0;break}}var z=new Wf(this.cy(),j);z.size()>0&&(g?z.emitAndNotify("remove"):h&&z.emit("remove"));for(var A=0;A<o.length;A++){var B=o[A];h&&B.removed()||B.updateStyle()}return z},Xf.move=function(a){var b=this._private.cy,c=this,d=function(a){return null==a?a:""+a};if(void 0!==a.source||void 0!==a.target){var e=d(a.source),f=d(a.target),g=null!=e&&b.hasElementWithId(e),h=null!=f&&b.hasElementWithId(f);(g||h)&&(b.batch(function(){c.remove(!1,!1),c.emitAndNotify("moveout");for(var a=0;a<c.length;a++){var b=c[a],d=b._private.data;b.isEdge()&&(g&&(d.source=e),h&&(d.target=f))}c.restore(!1,!1)}),c.emitAndNotify("move"))}else if(void 0!==a.parent){var i=d(a.parent);if(null===i||b.hasElementWithId(i)){var j=null===i?void 0:i;b.batch(function(){var a=c.remove(!1,!1);a.emitAndNotify("moveout");for(var b=0;b<c.length;b++){var d=c[b],e=d._private.data;d.isNode()&&(e.parent=j)}a.restore(!1,!1)}),c.emitAndNotify("move")}}return this},[Qd,_d,ae,Le,Pe,Se,Te,rf,Df,Ef,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var a=this[0];if(a)return a._private.group}},Hf,Jf,Kf,Qf,Rf].forEach(function(a){Ha(Xf,a)});var Yf={add:function(a){var b,c=this;if(sa(a)){var d=a;if(d._private.cy===c)b=d.restore();else{for(var e=[],f=0;f<d.length;f++){var g=d[f];e.push(g.json())}b=new Wf(c,e)}}else if(oa(a))b=new Wf(c,a);else if(pa(a)&&(oa(a.nodes)||oa(a.edges))){for(var h=a,i=[],j=["nodes","edges"],k=0,l=j.length;k<l;k++){var m=j[k],n=h[m];if(oa(n))for(var o=0,p=n.length;o<p;o++){var q=Ha({group:m},n[o]);i.push(q)}}b=new Wf(c,i)}else b=new Jb(c,a).collection();return b},remove:function(a){if(sa(a));else if(ma(a)){var b=a;a=this.$(b)}return a.remove()}},Zf=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function a(b,d,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0;for(b=parseFloat(b)||500,d=parseFloat(d)||20,e=e||null,i.tension=b,i.friction=d,g=(f=null!==e)?(k=a(b,d))/e*.016:.016;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>1e-4&&Math.abs(h.v)>1e-4;);return f?function(a){return j[a*(j.length-1)|0]}:k}}(),$f=function(a,b,c,d){var e=C(a,b,c,d);return function(a,b,c){return a+(b-a)*e(c)}},_f={linear:function(a,b,c){return a+(b-a)*c},ease:$f(.25,.1,.25,1),"ease-in":$f(.42,0,1,1),"ease-out":$f(0,0,.58,1),"ease-in-out":$f(.42,0,.58,1),"ease-in-sine":$f(.47,0,.745,.715),"ease-out-sine":$f(.39,.575,.565,1),"ease-in-out-sine":$f(.445,.05,.55,.95),"ease-in-quad":$f(.55,.085,.68,.53),"ease-out-quad":$f(.25,.46,.45,.94),"ease-in-out-quad":$f(.455,.03,.515,.955),"ease-in-cubic":$f(.55,.055,.675,.19),"ease-out-cubic":$f(.215,.61,.355,1),"ease-in-out-cubic":$f(.645,.045,.355,1),"ease-in-quart":$f(.895,.03,.685,.22),"ease-out-quart":$f(.165,.84,.44,1),"ease-in-out-quart":$f(.77,0,.175,1),"ease-in-quint":$f(.755,.05,.855,.06),"ease-out-quint":$f(.23,1,.32,1),"ease-in-out-quint":$f(.86,0,.07,1),"ease-in-expo":$f(.95,.05,.795,.035),"ease-out-expo":$f(.19,1,.22,1),"ease-in-out-expo":$f(1,0,0,1),"ease-in-circ":$f(.6,.04,.98,.335),"ease-out-circ":$f(.075,.82,.165,1),"ease-in-out-circ":$f(.785,.135,.15,.86),spring:function(a,b,c){if(0===c)return _f.linear;var d=Zf(a,b,c);return function(a,b,c){return a+(b-a)*d(c)}},"cubic-bezier":$f},ag={animate:$d.animate(),animation:$d.animation(),animated:$d.animated(),clearQueue:$d.clearQueue(),delay:$d.delay(),delayAnimation:$d.delayAnimation(),stop:$d.stop(),addToAnimationPool:function(a){this.styleEnabled()&&this._private.aniEles.merge(a)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var a=this;if(a._private.animationsRunning=!0,a.styleEnabled()){var b=a.renderer();b&&b.beforeRender?b.beforeRender(function(b,c){J(c,a)},b.beforeRenderPriorities.animations):function b(){a._private.animationsRunning&&eb(function(c){J(c,a),b()})}()}}},bg={qualifierCompare:function(a,b){return null==a||null==b?null==a&&null==b:a.sameText(b)},eventMatches:function(a,b,c){var d=b.qualifier;return null==d||a!==c.target&&ta(c.target)&&d.matches(c.target)},addEventFields:function(a,b){b.cy=a,b.target=a},callbackContext:function(a,b,c){return null!=b.qualifier?c.target:a}},cg=function(a){return ma(a)?new Je(a):a},dg={createEmitter:function(){var a=this._private;return a.emitter||(a.emitter=new r(bg,this)),this},emitter:function(){return this._private.emitter},on:function(a,b,c){return this.emitter().on(a,cg(b),c),this},removeListener:function(a,b,c){return this.emitter().removeListener(a,cg(b),c),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(a,b,c){return this.emitter().one(a,cg(b),c),this},once:function(a,b,c){return this.emitter().one(a,cg(b),c),this},emit:function(a,b){return this.emitter().emit(a,b),this},emitAndNotify:function(a,b){return this.emit(a),this.notify(a,b),this}};$d.eventAliasesOn(dg);var eg={png:function(a){return a=a||{},this._private.renderer.png(a)},jpg:function(a){var b=this._private.renderer;return(a=a||{}).bg=a.bg||"#fff",b.jpg(a)}};eg.jpeg=eg.jpg;var fg={layout:function(a){if(null!=a)if(null!=a.name){var b=a.name,c=this.extension("layout",b);if(null!=c){var d;d=ma(a.eles)?this.$(a.eles):null!=a.eles?a.eles:this.$();var e=new c(Ha({},a,{cy:this,eles:d}));return e}ub("No such layout `"+b+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else ub("A `name` must be specified to make a layout");else ub("Layout options must be specified to make a layout")}};fg.createLayout=fg.makeLayout=fg.layout;var gg={notify:function(a,b){var c=this._private;if(this.batching()){c.batchNotifications=c.batchNotifications||{};var d=c.batchNotifications[a]=c.batchNotifications[a]||this.collection();null!=b&&d.merge(b)}else if(c.notificationsEnabled){var e=this.renderer();!this.destroyed()&&e&&e.notify(a,b)}},notifications:function(a){var b=this._private;return void 0===a?b.notificationsEnabled:(b.notificationsEnabled=!!a,this)},noNotifications:function(a){this.notifications(!1),a(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var a=this._private;return null==a.batchCount&&(a.batchCount=0),0===a.batchCount&&(a.batchStyleEles=this.collection(),a.batchNotifications={}),a.batchCount++,this},endBatch:function(){var a=this._private;if(0===a.batchCount)return this;if(0===--a.batchCount){a.batchStyleEles.updateStyle();var b=this.renderer();Object.keys(a.batchNotifications).forEach(function(c){var d=a.batchNotifications[c];d.empty()?b.notify(c):b.notify(c,d)})}return this},batch:function(a){return this.startBatch(),a(),this.endBatch(),this},batchData:function(a){var b=this;return this.batch(function(){for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b.getElementById(e).data(f)}})}},hg=Bb({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ig={renderTo:function(a,b,c,d){return this._private.renderer.renderTo(a,b,c,d),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(a){var b=this.extension("renderer",a.name);if(null!=b){void 0!==a.wheelSensitivity&&wb("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var c=hg(a);c.cy=this,this._private.renderer=new b(c),this.notify("init")}else ub("Can not initialise: No such renderer `".concat(a.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var a=this.container();if(a)for(a._cyreg=null;a.childNodes.length>0;)a.removeChild(a.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(a){var b=a._private;b.rscratch={},b.rstyle={},b.animation.current=[],b.animation.queue=[]})},onRender:function(a){return this.on("render",a)},offRender:function(a){return this.off("render",a)}};ig.invalidateDimensions=ig.resize;var jg={collection:function(a,b){return ma(a)?this.$(a):sa(a)?a.collection():oa(a)?new Wf(this,a,b):new Wf(this)},nodes:function(a){var b=this.$(function(a){return a.isNode()});return a?b.filter(a):b},edges:function(a){var b=this.$(function(a){return a.isEdge()});return a?b.filter(a):b},$:function(a){var b=this._private.elements;return a?b.filter(a):b.spawnSelf()},mutableElements:function(){return this._private.elements}};jg.elements=jg.filter=jg.$;var kg={};kg.apply=function(a){var b=this._private,c=b.cy.collection();b.newStyle&&(b.contextStyles={},b.propDiffs={},this.cleanElements(a,!0));for(var d=0;d<a.length;d++){var e=a[d],f=this.getContextMeta(e);if(!f.empty){var g=this.getContextStyle(f),h=this.applyContextStyle(f,g,e);b.newStyle||this.updateTransitions(e,h.diffProps),this.updateStyleHints(e)&&c.merge(e)}}return b.newStyle=!1,c},kg.getPropertiesDiff=function(a,b){var c=this._private.propDiffs=this._private.propDiffs||{},d=a+"-"+b,e=c[d];if(e)return e;for(var f=[],g={},h=0;h<this.length;h++){var i=this[h],j="t"===a[h],k="t"===b[h],l=j!==k,m=i.mappedProperties.length>0;if(l||k&&m){var n=void 0;l&&m?n=i.properties:l?n=i.properties:m&&(n=i.mappedProperties);for(var o=0;o<n.length;o++){for(var p=n[o],q=p.name,r=!1,s=h+1;s<this.length;s++){var t=this[s];if("t"===b[s]&&(r=null!=t.properties[p.name]))break}g[q]||r||(g[q]=!0,f.push(q))}}}return c[d]=f,f},kg.getContextMeta=function(a){var b,c="",d=a._private.styleCxtKey||"";this._private.newStyle&&(d="");for(var e=0;e<this.length;e++){var f=this[e];c+=f.selector&&f.selector.matches(a)?"t":"f"}return b=this.getPropertiesDiff(d,c),a._private.styleCxtKey=c,{key:c,diffPropNames:b,empty:0===b.length}},kg.getContextStyle=function(a){var b=a.key,c=this._private.contextStyles=this._private.contextStyles||{};if(c[b])return c[b];for(var d={_private:{key:b}},e=0;e<this.length;e++){var f=this[e];if("t"===b[e])for(var g=0;g<f.properties.length;g++){var h=f.properties[g];d[h.name]=h}}return c[b]=d,d},kg.applyContextStyle=function(a,b,c){for(var d=a.diffPropNames,e={},f=this.types,g=0;g<d.length;g++){var h=d[g],i=b[h],j=c.pstyle(h);if(!i){if(!j)continue;i=j.bypass?{name:h,deleteBypassed:!0}:{name:h,delete:!0}}if(j!==i){if(i.mapped===f.fn&&null!=j&&null!=j.mapping&&j.mapping.value===i.value){var k=j.mapping;if((k.fnValue=i.value(c))===k.prevFnValue)continue}var l=e[h]={prev:j};this.applyParsedProperty(c,i),l.next=c.pstyle(h),l.next&&l.next.bypass&&(l.next=l.next.bypassed)}}return{diffProps:e}},kg.updateStyleHints=function(a){var b=a._private,c=this,d=c.propertyGroupNames,e=c.propertyGroupKeys,f=function(a,b,d){return c.getPropertiesHash(a,b,d)},g=b.styleKey;if(a.removed())return!1;var h="nodes"===b.group,i=a._private.style;d=Object.keys(i);for(var j=0;j<e.length;j++){var k=e[j];b.styleKeys[k]=0}for(var l=function(a,c){return b.styleKeys[c]=hb(a,b.styleKeys[c])},m=function(a,b){for(var c=0;c<a.length;c++)l(a.charCodeAt(c),b)},n=function(a){return-128<a&&a<128&&Math.floor(a)!==a?2e9-(1024*a|0):a},o=0;o<d.length;o++){var p=d[o],q=i[p];if(null!=q){var r=this.properties[p],s=r.type,t=r.groupKey,u=void 0;null!=r.hashOverride?u=r.hashOverride(a,q):null!=q.pfValue&&(u=q.pfValue);var v=null==r.enums?q.value:null,w=null!=u,x=w||null!=v,y=q.units;if(s.number&&x){var z=w?u:v;if(s.multiple)for(var A=0;A<z.length;A++)l(n(z[A]),t);else l(n(z),t);w||null==y||m(y,t)}else m(q.strValue,t)}}for(var B=0,C=0;C<e.length;C++){var D=e[C],E=b.styleKeys[D];B=hb(E,B)}b.styleKey=B;var F=b.labelDimsKey=b.styleKeys.labelDimensions;if(b.labelKey=f(a,["label"],F),b.labelStyleKey=hb(b.styleKeys.commonLabel,b.labelKey),h||(b.sourceLabelKey=f(a,["source-label"],F),b.sourceLabelStyleKey=hb(b.styleKeys.commonLabel,b.sourceLabelKey),b.targetLabelKey=f(a,["target-label"],F),b.targetLabelStyleKey=hb(b.styleKeys.commonLabel,b.targetLabelKey)),h){var G=b.styleKeys,H=G.nodeBody,I=G.nodeBorder,J=G.backgroundImage,K=G.compound,L=G.pie;b.nodeKey=ib([I,J,K,L],H),b.hasPie=0!=L}return g!==b.styleKey},kg.clearStyleHints=function(a){var b=a._private;b.styleKeys={},b.styleKey=null,b.labelKey=null,b.labelStyleKey=null,b.sourceLabelKey=null,b.sourceLabelStyleKey=null,b.targetLabelKey=null,b.targetLabelStyleKey=null,b.nodeKey=null,b.hasPie=null},kg.applyParsedProperty=function(a,b){var c,d=this,e=b,f=a._private.style,g=d.types,h=d.properties[e.name].type,i=e.bypass,j=f[e.name],k=j&&j.bypass,l=a._private,m=function(a){return null==a?null:null!=a.pfValue?a.pfValue:a.value},n=function(){var b=m(j),c=m(e);d.checkTriggers(a,e.name,b,c)};if("curve-style"===b.name&&a.isEdge()&&("bezier"!==b.value&&a.isLoop()||"haystack"===b.value&&(a.source().isParent()||a.target().isParent()))&&(e=b=this.parse(b.name,"bezier",i)),e.delete)return f[e.name]=void 0,n(),!0;if(e.deleteBypassed)return j?!!j.bypass&&(j.bypassed=void 0,n(),!0):(n(),!0);if(e.deleteBypass)return j?!!j.bypass&&(f[e.name]=j.bypassed,n(),!0):(n(),!0);var o=function(){wb("Do not assign mappings to elements without corresponding data (i.e. ele `"+a.id()+"` has no mapping for property `"+e.name+"` with data field `"+e.field+"`); try a `["+e.field+"]` selector to limit scope to elements with `"+e.field+"` defined")};switch(e.mapped){case g.mapData:for(var p,q=e.field.split("."),r=l.data,s=0;s<q.length&&r;s++)r=r[q[s]];if(null==r)return o(),!1;if(!qa(r))return wb("Do not use continuous mappers without specifying numeric data (i.e. `"+e.field+": "+r+"` for `"+a.id()+"` is non-numeric)"),!1;var t=e.fieldMax-e.fieldMin;if((p=0===t?0:(r-e.fieldMin)/t)<0?p=0:p>1&&(p=1),h.color){var u=e.valueMin[0],v=e.valueMax[0],w=e.valueMin[1],x=e.valueMax[1],y=e.valueMin[2],z=e.valueMax[2],A=null==e.valueMin[3]?1:e.valueMin[3],B=null==e.valueMax[3]?1:e.valueMax[3],C=[Math.round(u+(v-u)*p),Math.round(w+(x-w)*p),Math.round(y+(z-y)*p),Math.round(A+(B-A)*p)];c={bypass:e.bypass,name:e.name,value:C,strValue:"rgb("+C[0]+", "+C[1]+", "+C[2]+")"}}else{if(!h.number)return!1;var D=e.valueMin+(e.valueMax-e.valueMin)*p;c=this.parse(e.name,D,e.bypass,"mapping")}if(!c)return o(),!1;c.mapping=e,e=c;break;case g.data:for(var E=e.field.split("."),F=l.data,G=0;G<E.length&&F;G++)F=F[E[G]];if(null!=F&&(c=this.parse(e.name,F,e.bypass,"mapping")),!c)return o(),!1;c.mapping=e,e=c;break;case g.fn:var H=e.value,I=null!=e.fnValue?e.fnValue:H(a);if(e.prevFnValue=I,null==I)return wb("Custom function mappers may not return null (i.e. `"+e.name+"` for ele `"+a.id()+"` is null)"),!1;if(!(c=this.parse(e.name,I,e.bypass,"mapping")))return wb("Custom function mappers may not return invalid values for the property type (i.e. `"+e.name+"` for ele `"+a.id()+"` is invalid)"),!1;c.mapping=xb(e),e=c;break;case void 0:break;default:return!1}return i?(e.bypassed=k?j.bypassed:j,f[e.name]=e):k?j.bypassed=e:f[e.name]=e,n(),!0},kg.cleanElements=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(this.clearStyleHints(d),d.dirtyCompoundBoundsCache(),d.dirtyBoundingBoxCache(),b)for(var e=d._private.style,f=Object.keys(e),g=0;g<f.length;g++){var h=f[g],i=e[h];null!=i&&(i.bypass?i.bypassed=null:e[h]=null)}else d._private.style={}}},kg.update=function(){this._private.cy.mutableElements().updateStyle()},kg.updateTransitions=function(a,b){var c=this,d=a._private,e=a.pstyle("transition-property").value,f=a.pstyle("transition-duration").pfValue,g=a.pstyle("transition-delay").pfValue;if(e.length>0&&f>0){for(var h={},i=!1,j=0;j<e.length;j++){var k=e[j],l=a.pstyle(k),m=b[k];if(m){var n=m.prev,o=null!=m.next?m.next:l,p=!1,q=void 0;n&&(qa(n.pfValue)&&qa(o.pfValue)?(p=o.pfValue-n.pfValue,q=n.pfValue+1e-6*p):qa(n.value)&&qa(o.value)?(p=o.value-n.value,q=n.value+1e-6*p):oa(n.value)&&oa(o.value)&&(p=n.value[0]!==o.value[0]||n.value[1]!==o.value[1]||n.value[2]!==o.value[2],q=n.strValue),p&&(h[k]=o.strValue,this.applyBypass(a,k,q),i=!0))}}if(!i)return;d.transitioning=!0,new Xd(function(b){g>0?a.delayAnimation(g).play().promise().then(b):b()}).then(function(){return a.animation({style:h,duration:f,easing:a.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){c.removeBypasses(a,e),a.emitAndNotify("style"),d.transitioning=!1})}else d.transitioning&&(this.removeBypasses(a,e),a.emitAndNotify("style"),d.transitioning=!1)},kg.checkTrigger=function(a,b,c,d,e,f){var g=this.properties[b],h=e(g);null!=h&&h(c,d)&&f(g)},kg.checkZOrderTrigger=function(a,b,c,d){var e=this;this.checkTrigger(a,b,c,d,function(a){return a.triggersZOrder},function(){e._private.cy.notify("zorder",a)})},kg.checkBoundsTrigger=function(a,b,c,d){this.checkTrigger(a,b,c,d,function(a){return a.triggersBounds},function(e){a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),"bezier"!==a.pstyle("curve-style").value&&("curve-style"!==b||"bezier"!==c&&"bezier"!==d)||!e.triggersBoundsOfParallelBeziers||a.parallelEdges().forEach(function(a){a.isBundledBezier()&&a.dirtyBoundingBoxCache()})})},kg.checkTriggers=function(a,b,c,d){a.dirtyStyleCache(),this.checkZOrderTrigger(a,b,c,d),this.checkBoundsTrigger(a,b,c,d)};var lg={applyBypass:function(a,b,c,d){var e=[];if("*"===b||"**"===b){if(void 0!==c)for(var f=0;f<this.properties.length;f++){var g=this.properties[f].name,h=this.parse(g,c,!0);h&&e.push(h)}}else if(ma(b)){var i=this.parse(b,c,!0);i&&e.push(i)}else{if(!pa(b))return!1;var j=b;d=c;for(var k=Object.keys(j),l=0;l<k.length;l++){var m=k[l],n=j[m];if(void 0===n&&(n=j[Ca(m)]),void 0!==n){var o=this.parse(m,n,!0);o&&e.push(o)}}}if(0===e.length)return!1;for(var p=!1,q=0;q<a.length;q++){for(var r=a[q],s={},t=void 0,u=0;u<e.length;u++){var v=e[u];if(d){var w=r.pstyle(v.name);t=s[v.name]={prev:w}}p=this.applyParsedProperty(r,v)||p,d&&(t.next=r.pstyle(v.name))}p&&this.updateStyleHints(r),d&&this.updateTransitions(r,s,!0)}return p},overrideBypass:function(a,b,c){b=Ba(b);for(var d=0;d<a.length;d++){var e=a[d],f=e._private.style[b],g=this.properties[b].type,h=g.color,i=g.mutiple,j=f?null!=f.pfValue?f.pfValue:f.value:null;f&&f.bypass?(f.value=c,null!=f.pfValue&&(f.pfValue=c),f.strValue=h?"rgb("+c.join(",")+")":i?c.join(" "):""+c,this.updateStyleHints(e)):this.applyBypass(e,b,c),this.checkTriggers(e,b,j,c)}},removeAllBypasses:function(a,b){return this.removeBypasses(a,this.propertyNames,b)},removeBypasses:function(a,b,c){for(var d=0;d<a.length;d++){for(var e=a[d],f={},g=0;g<b.length;g++){var h=b[g],i=this.properties[h],j=e.pstyle(i.name);if(j&&j.bypass){var k=this.parse(h,"",!0),l=f[i.name]={prev:j};this.applyParsedProperty(e,k),l.next=e.pstyle(i.name)}}this.updateStyleHints(e),c&&this.updateTransitions(e,f,!0)}}},mg={getEmSizeInPixels:function(){var a=this.containerCss("font-size");return null!=a?parseFloat(a):1},containerCss:function(a){var b=this._private.cy.container();if(fa&&b&&fa.getComputedStyle)return fa.getComputedStyle(b).getPropertyValue(a)}},ng={getRenderedStyle:function(a,b){return b?this.getStylePropertyValue(a,b,!0):this.getRawStyle(a,!0)},getRawStyle:function(a,b){if(a=a[0]){for(var c={},d=0;d<this.properties.length;d++){var e=this.properties[d],f=this.getStylePropertyValue(a,e.name,b);null!=f&&(c[e.name]=f,c[Ca(e.name)]=f)}return c}},getIndexedStyle:function(a,b,c,d){var e=a.pstyle(b)[c][d];return null!=e?e:a.cy().style().getDefaultProperty(b)[c][0]},getStylePropertyValue:function(a,b,c){if(a=a[0]){var d=this.properties[b];d.alias&&(d=d.pointsTo);var e=d.type,f=a.pstyle(d.name);if(f){var g=f.value,h=f.units,i=f.strValue;if(c&&e.number&&null!=g&&qa(g)){var j=a.cy().zoom(),k=function(a){return a*j},l=function(a,b){return k(a)+b},m=oa(g);return(m?h.every(function(a){return null!=a}):null!=h)?m?g.map(function(a,b){return l(a,h[b])}).join(" "):l(g,h):m?g.map(function(a){return ma(a)?a:""+k(a)}).join(" "):""+k(g)}if(null!=i)return i}return null}},getAnimationStartStyle:function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d].name,f=a.pstyle(e);void 0!==f&&(f=pa(f)?this.parse(e,f.strValue):this.parse(e,f)),f&&(c[e]=f)}return c},getPropsList:function(a){var b=[],c=a,d=this.properties;if(c)for(var e=Object.keys(c),f=0;f<e.length;f++){var g=e[f],h=c[g],i=d[g]||d[Ba(g)],j=this.parse(i.name,h);j&&b.push(j)}return b},getNonDefaultPropertiesHash:function(a,b,c){var d,e,f,g,h,i,j=c;for(h=0;h<b.length;h++)if(d=b[h],null!=(e=a.pstyle(d,!1)))if(null!=e.pfValue)j=hb(g,j);else for(f=e.strValue,i=0;i<f.length;i++)g=f.charCodeAt(i),j=hb(g,j);return j}};ng.getPropertiesHash=ng.getNonDefaultPropertiesHash;var og={appendFromJson:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.selector,e=c.style||c.css,f=Object.keys(e);this.selector(d);for(var g=0;g<f.length;g++){var h=f[g],i=e[h];this.css(h,i)}}return this},fromJson:function(a){return this.resetToDefault(),this.appendFromJson(a),this},json:function(){for(var a=[],b=this.defaultLength;b<this.length;b++){for(var c=this[b],d=c.selector,e=c.properties,f={},g=0;g<e.length;g++){var h=e[g];f[h.name]=h.strValue}a.push({selector:d?d.toString():"core",style:f})}return a}},pg={appendFromString:function(a){function b(){g=g.length>d.length?g.substr(d.length):""}function c(){e=e.length>f.length?e.substr(f.length):""}var d,e,f,g=""+a;for(g=g.replace(/[\/][*](\s|.)+?[*][\/]/g,"");!g.match(/^\s*$/);){var h=g.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!h){wb("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+g);break}d=h[0];var i=h[1];if("core"!==i&&new Je(i).invalid)wb("Skipping parsing of block: Invalid selector found in string stylesheet: "+i),b();else{var j=h[2],k=!1;e=j;for(var l=[];!e.match(/^\s*$/);){var m=e.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!m){wb("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+j),k=!0;break}f=m[0];var n=m[1],o=m[2];this.properties[n]?this.parse(n,o)?(l.push({name:n,val:o}),c()):(wb("Skipping property: Invalid property definition in: "+f),c()):(wb("Skipping property: Invalid property name in: "+f),c())}if(k){b();break}this.selector(i);for(var p=0;p<l.length;p++){var q=l[p];this.css(q.name,q.val)}b()}}return this},fromString:function(a){return this.resetToDefault(),this.appendFromString(a),this}},qg={};!function(){var a=Fa,b=function(a){return"^"+a+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},c=function(b){var c=a+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+b+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+c+")\\s*\\,\\s*("+c+")\\)$"},d=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];qg.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:b("data")},layoutData:{mapping:!0,regex:b("layoutData")},scratch:{mapping:!0,regex:b("scratch")},mapData:{mapping:!0,regex:c("mapData")},mapLayoutData:{mapping:!0,regex:c("mapLayoutData")},mapScratch:{mapping:!0,regex:c("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:d,singleRegexMatchValue:!0},urls:{regexes:d,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(a,b){switch(a.length){case 2:return"deg"!==b[0]&&"rad"!==b[0]&&"deg"!==b[1]&&"rad"!==b[1];case 1:return ma(a[0])||"deg"===b[0]||"rad"===b[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(a){var b=a.length;return 1===b||2===b||4===b}}};var e={zeroNonZero:function(a,b){return(null==a||null==b)&&a!==b||0==a&&0!=b||0!=a&&0==b},any:function(a,b){return a!=b}},f=qg.types,g=[{name:"label",type:f.text,triggersBounds:e.any},{name:"text-rotation",type:f.textRotation,triggersBounds:e.any},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:e.any},{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:e.any}],h=[{name:"source-label",type:f.text,triggersBounds:e.any},{name:"source-text-rotation",type:f.textRotation,triggersBounds:e.any},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:e.any},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:e.any},{name:"source-text-offset",type:f.size,triggersBounds:e.any}],i=[{name:"target-label",type:f.text,triggersBounds:e.any},{name:"target-text-rotation",type:f.textRotation,triggersBounds:e.any},{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:e.any},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:e.any},{name:"target-text-offset",type:f.size,triggersBounds:e.any}],j=[{name:"font-family",type:f.fontFamily,triggersBounds:e.any},{name:"font-style",type:f.fontStyle,triggersBounds:e.any},{name:"font-weight",type:f.fontWeight,triggersBounds:e.any},{name:"font-size",type:f.size,triggersBounds:e.any},{name:"text-transform",type:f.textTransform,triggersBounds:e.any},{name:"text-wrap",type:f.textWrap,triggersBounds:e.any},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:e.any},{name:"text-max-width",type:f.size,triggersBounds:e.any},{name:"text-outline-width",type:f.size,triggersBounds:e.any},{name:"line-height",type:f.positiveNumber,triggersBounds:e.any}],k=[{name:"text-valign",type:f.valign,triggersBounds:e.any},{name:"text-halign",type:f.halign,triggersBounds:e.any},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:e.any},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:e.any},{name:"text-border-style",type:f.borderStyle,triggersBounds:e.any},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:e.any},{name:"text-justification",type:f.justification}],l=[{name:"events",type:f.bool},{name:"text-events",type:f.bool}],m=[{name:"display",type:f.display,triggersZOrder:e.any,triggersBounds:e.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:f.visibility,triggersZOrder:e.any},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:e.zeroNonZero},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:e.any},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:e.any},{name:"z-index",type:f.nonNegativeInt,triggersZOrder:e.any}],n=[{name:"overlay-padding",type:f.size,triggersBounds:e.any},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:e.zeroNonZero}],o=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],p=function(a,b){return"label"===b.value?-a.poolIndex():b.pfValue},q=[{name:"height",type:f.nodeSize,triggersBounds:e.any,hashOverride:p},{name:"width",type:f.nodeSize,triggersBounds:e.any,hashOverride:p},{name:"shape",type:f.nodeShape,triggersBounds:e.any},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:e.any},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:e.any},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:e.any},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:e.any}],r=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:e.any},{name:"border-style",type:f.borderStyle}],s=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],t=[{name:"position",type:f.position,triggersBounds:e.any},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:e.any},{name:"min-width",type:f.size,triggersBounds:e.any},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:e.any},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:e.any},{name:"min-height",type:f.size,triggersBounds:e.any},{name:"min-height-bias-top",type:f.sizeMaybePercent,triggersBounds:e.any},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:e.any}],u=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:e.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:e.any},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:e.any},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:e.any},{name:"control-point-step-size",type:f.size,triggersBounds:e.any},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:e.any},{name:"control-point-weights",type:f.numbers,triggersBounds:e.any},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:e.any},{name:"segment-weights",type:f.numbers,triggersBounds:e.any},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:e.any},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:e.any},{name:"taxi-direction",type:f.axisDirection,triggersBounds:e.any},{name:"edge-distances",type:f.edgeDistances,triggersBounds:e.any},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:e.any},{name:"loop-direction",type:f.angle,triggersBounds:e.any},{name:"loop-sweep",type:f.angle,triggersBounds:e.any},{name:"source-distance-from-node",type:f.size,triggersBounds:e.any},{name:"target-distance-from-node",type:f.size,triggersBounds:e.any}],v=[{name:"ghost",type:f.bool,triggersBounds:e.any},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:e.any},{name:"ghost-offset-y",type:f.bidirectionalSize,triggersBounds:e.any},{name:"ghost-opacity",type:f.zeroOneNumber}],w=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],x=[];qg.pieBackgroundN=16,x.push({name:"pie-size",type:f.sizeMaybePercent});for(var y=1;y<=qg.pieBackgroundN;y++)x.push({name:"pie-"+y+"-background-color",type:f.color}),x.push({name:"pie-"+y+"-background-size",type:f.percent}),x.push({name:"pie-"+y+"-background-opacity",type:f.zeroOneNumber});var z=[],A=qg.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:e.any},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill}].forEach(function(a){A.forEach(function(b){var c=b+"-"+a.name,d=a.type,e=a.triggersBounds;z.push({name:c,type:d,triggersBounds:e})})},{});var B=qg.properties=[].concat(l,o,m,n,v,k,j,g,h,i,q,r,s,x,t,u,z,w),C=qg.propertyGroups={behavior:l,transition:o,visibility:m,overlay:n,ghost:v,commonLabel:k,labelDimensions:j,mainLabel:g,sourceLabel:h,targetLabel:i,nodeBody:q,nodeBorder:r,backgroundImage:s,pie:x,compound:t,edgeLine:u,edgeArrow:z,core:w},D=qg.propertyGroupNames={};(qg.propertyGroupKeys=Object.keys(C)).forEach(function(a){D[a]=C[a].map(function(a){return a.name}),C[a].forEach(function(b){return b.groupKey=a})});var E=qg.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];qg.propertyNames=B.map(function(a){return a.name});for(var F=0;F<B.length;F++){var G=B[F];B[G.name]=G}for(var H=0;H<E.length;H++){var I=E[H],J=B[I.pointsTo],K={name:I.name,alias:!0,pointsTo:J};B.push(K),B[I.name]=K}}(),qg.getDefaultProperty=function(a){return this.getDefaultProperties()[a]},qg.getDefaultProperties=function(){var a=this._private;if(null!=a.defaultProperties)return a.defaultProperties;for(var b=Ha({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(a,b){for(var c=1;c<=qg.pieBackgroundN;c++){var d=b.name.replace("{{i}}",c),e=b.value;a[d]=e}return a},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(a,b){return qg.arrowPrefixes.forEach(function(c){var d=c+"-"+b.name,e=b.value;a[d]=e}),a},{})),c={},d=0;d<this.properties.length;d++){var e=this.properties[d];if(!e.pointsTo){var f=e.name,g=b[f],h=this.parse(f,g);c[f]=h}}return a.defaultProperties=c,a.defaultProperties},qg.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var rg={parse:function(a,b,c,d){if(na(b))return this.parseImplWarn(a,b,c,d);var e,f=kb(a,""+b,c?"t":"f","mapping"===d||!0===d||!1===d||null==d?"dontcare":d),g=this.propCache=this.propCache||[];return(e=g[f])||(e=g[f]=this.parseImplWarn(a,b,c,d)),(c||"mapping"===d)&&(e=xb(e))&&(e.value=xb(e.value)),e},parseImplWarn:function(a,b,c,d){var e=this.parseImpl(a,b,c,d);return e||null==b||wb("The style property `".concat(a,": ").concat(b,"` is invalid")),e}};rg.parseImpl=function(a,b,c,d){a=Ba(a);var e=this.properties[a],f=b,g=this.types;if(!e)return null;if(void 0===b)return null;e.alias&&(e=e.pointsTo,a=e.name);var h=ma(b);h&&(b=b.trim());var i,j,k=e.type;if(!k)return null;if(c&&(""===b||null===b))return{name:a,value:b,bypass:!0,deleteBypass:!0};if(na(b))return{name:a,value:b,strValue:"fn",mapped:g.fn,bypass:c};if(!h||d||b.length<7||"a"!==b[1]);else{if(b.length>=7&&"d"===b[0]&&(i=new RegExp(g.data.regex).exec(b))){if(c)return!1;var l=g.data;return{name:a,value:i,strValue:""+b,mapped:l,field:i[1],bypass:c}}if(b.length>=10&&"m"===b[0]&&(j=new RegExp(g.mapData.regex).exec(b))){if(c)return!1;if(k.multiple)return!1;var m=g.mapData;if(!k.color&&!k.number)return!1;var n=this.parse(a,j[4]);if(!n||n.mapped)return!1;var o=this.parse(a,j[5]);if(!o||o.mapped)return!1;if(n.pfValue===o.pfValue||n.strValue===o.strValue)return wb("`"+a+": "+b+"` is not a valid mapper because the output range is zero; converting to `"+a+": "+n.strValue+"`"),this.parse(a,n.strValue);if(k.color){var p=n.value,q=o.value;if(!(p[0]!==q[0]||p[1]!==q[1]||p[2]!==q[2]||p[3]!==q[3]&&(null!=p[3]&&1!==p[3]||null!=q[3]&&1!==q[3])))return!1}return{name:a,value:j,strValue:""+b,mapped:m,field:j[1],fieldMin:parseFloat(j[2]),fieldMax:parseFloat(j[3]),valueMin:n.value,valueMax:o.value,bypass:c}}}if(k.multiple&&"multiple"!==d){var r;if(r=h?b.split(/\s+/):oa(b)?b:[b],k.evenMultiple&&r.length%2!=0)return null;for(var s=[],t=[],u=[],v="",w=!1,x=0;x<r.length;x++){var y=this.parse(a,r[x],c,"multiple");w=w||ma(y.value),s.push(y.value),u.push(null!=y.pfValue?y.pfValue:y.value),t.push(y.units),v+=(x>0?" ":"")+y.strValue}return k.validate&&!k.validate(s,t)?null:k.singleEnum&&w?1===s.length&&ma(s[0])?{name:a,value:s[0],strValue:s[0],bypass:c}:null:{name:a,value:s,pfValue:u,strValue:v,bypass:c,units:t}}var z,A,B=function(){for(var d=0;d<k.enums.length;d++)if(k.enums[d]===b)return{name:a,value:b,strValue:""+b,bypass:c};return null};if(k.number){var C,D="px";if(k.units&&(C=k.units),k.implicitUnits&&(D=k.implicitUnits),!k.unitless)if(h){var E="px|em"+(k.allowPercent?"|\\%":"");C&&(E=C);var F=b.match("^("+Fa+")("+E+")?$");F&&(b=F[1],C=F[2]||D)}else C&&!k.implicitUnits||(C=D);if(b=parseFloat(b),isNaN(b)&&void 0===k.enums)return null;if(isNaN(b)&&void 0!==k.enums)return b=f,B();if(k.integer&&(!qa(A=b)||Math.floor(A)!==A))return null;if(void 0!==k.min&&(b<k.min||k.strictMin&&b===k.min)||void 0!==k.max&&(b>k.max||k.strictMax&&b===k.max))return null;var G={name:a,value:b,strValue:""+b+(C||""),units:C,bypass:c};return k.unitless||"px"!==C&&"em"!==C?G.pfValue=b:G.pfValue="px"!==C&&C?this.getEmSizeInPixels()*b:b,"ms"!==C&&"s"!==C||(G.pfValue="ms"===C?b:1e3*b),"deg"!==C&&"rad"!==C||(G.pfValue="rad"===C?b:(z=b,Math.PI*z/180)),"%"===C&&(G.pfValue=b/100),G}if(k.propList){var H=[],I=""+b;if("none"===I);else{for(var J=I.split(/\s*,\s*|\s+/),K=0;K<J.length;K++){var L=J[K].trim();this.properties[L]?H.push(L):wb("`"+L+"` is not a valid property name")}if(0===H.length)return null}return{name:a,value:H,strValue:0===H.length?"none":H.join(" "),bypass:c}}if(k.color){var M=Ia(b);return M?{name:a,value:M,pfValue:M,strValue:"rgb("+M[0]+","+M[1]+","+M[2]+")",bypass:c}:null}if(k.regex||k.regexes){if(k.enums){var N=B();if(N)return N}for(var O=k.regexes?k.regexes:[k.regex],P=0;P<O.length;P++){var Q=new RegExp(O[P]).exec(b);if(Q)return{name:a,value:k.singleRegexMatchValue?Q[1]:Q,strValue:""+b,bypass:c}}return null}return k.string?{name:a,value:""+b,strValue:""+b,bypass:c}:k.enums?B():null};var sg=function a(b){if(!(this instanceof a))return new a(b);va(b)?(this._private={cy:b,coreStyle:{}},this.length=0,this.resetToDefault()):ub("A style must have a core reference")},tg=sg.prototype;tg.instanceString=function(){return"style"},tg.clear=function(){for(var a=0;a<this.length;a++)this[a]=void 0;return this.length=0,this._private.newStyle=!0,this},tg.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},tg.core=function(a){return this._private.coreStyle[a]||this.getDefaultProperty(a)},tg.selector=function(a){var b="core"===a?null:new Je(a),c=this.length++;return this[c]={selector:b,properties:[],mappedProperties:[],index:c},this},tg.css=function(){var a=this,b=arguments;if(1===b.length)for(var c=b[0],d=0;d<a.properties.length;d++){var e=a.properties[d],f=c[e.name];void 0===f&&(f=c[Ca(e.name)]),void 0!==f&&this.cssRule(e.name,f)}else 2===b.length&&this.cssRule(b[0],b[1]);return this},tg.style=tg.css,tg.cssRule=function(a,b){var c=this.parse(a,b);if(c){var d=this.length-1;this[d].properties.push(c),this[d].properties[c.name]=c,c.name.match(/pie-(\d+)-background-size/)&&c.value&&(this._private.hasPie=!0),c.mapped&&this[d].mappedProperties.push(c),!this[d].selector&&(this._private.coreStyle[c.name]=c)}return this},tg.append=function(a){return wa(a)?a.appendToStyle(this):oa(a)?this.appendFromJson(a):ma(a)&&this.appendFromString(a),this},sg.fromJson=function(a,b){var c=new sg(a);return c.fromJson(b),c},sg.fromString=function(a,b){return new sg(a).fromString(b)},[kg,lg,mg,ng,og,pg,qg,rg].forEach(function(a){Ha(tg,a)}),sg.types=tg.types,sg.properties=tg.properties,sg.propertyGroups=tg.propertyGroups,sg.propertyGroupNames=tg.propertyGroupNames,sg.propertyGroupKeys=tg.propertyGroupKeys;var ug={style:function(a){return a&&this.setStyle(a).update(),this._private.style},setStyle:function(a){var b=this._private;return wa(a)?b.style=a.generateStyle(this):oa(a)?b.style=sg.fromJson(this,a):ma(a)?b.style=sg.fromString(this,a):b.style=sg(this),b.style}},vg={autolock:function(a){return void 0===a?this._private.autolock:(this._private.autolock=!!a,this)},autoungrabify:function(a){return void 0===a?this._private.autoungrabify:(this._private.autoungrabify=!!a,this)},autounselectify:function(a){return void 0===a?this._private.autounselectify:(this._private.autounselectify=!!a,this)},selectionType:function(a){var b=this._private;return null==b.selectionType&&(b.selectionType="single"),void 0===a?b.selectionType:("additive"!==a&&"single"!==a||(b.selectionType=a),this)},panningEnabled:function(a){return void 0===a?this._private.panningEnabled:(this._private.panningEnabled=!!a,this)},userPanningEnabled:function(a){return void 0===a?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!a,this)},zoomingEnabled:function(a){return void 0===a?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!a,this)},userZoomingEnabled:function(a){return void 0===a?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!a,this)},boxSelectionEnabled:function(a){return void 0===a?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!a,this)},pan:function(){var a,b,c,d,e,f=arguments,g=this._private.pan;switch(f.length){case 0:return g;case 1:if(ma(f[0]))return g[a=f[0]];if(pa(f[0])){if(!this._private.panningEnabled)return this;d=(c=f[0]).x,e=c.y,qa(d)&&(g.x=d),qa(e)&&(g.y=e),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;a=f[0],b=f[1],"x"!==a&&"y"!==a||!qa(b)||(g[a]=b),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(a,b){var c,d,e,f,g,h=arguments,i=this._private.pan;if(!this._private.panningEnabled)return this;switch(h.length){case 1:pa(a)&&(f=(e=h[0]).x,g=e.y,qa(f)&&(i.x+=f),qa(g)&&(i.y+=g),this.emit("pan viewport"));break;case 2:d=b,"x"!==(c=a)&&"y"!==c||!qa(d)||(i[c]+=d),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(a,b){var c=this.getFitViewport(a,b);if(c){var d=this._private;d.zoom=c.zoom,d.pan=c.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(a,b){if(qa(a)&&void 0===b&&(b=a,a=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var c,d;if(ma(a)){var e=a;a=this.$(e)}else if(pa(d=a)&&qa(d.x1)&&qa(d.x2)&&qa(d.y1)&&qa(d.y2)){var f=a;(c={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2}).w=c.x2-c.x1,c.h=c.y2-c.y1}else sa(a)||(a=this.mutableElements());if(!sa(a)||!a.empty()){c=c||a.boundingBox();var g,h=this.width(),i=this.height();if(b=qa(b)?b:0,!isNaN(h)&&!isNaN(i)&&h>0&&i>0&&!isNaN(c.w)&&!isNaN(c.h)&&c.w>0&&c.h>0)return{zoom:g=(g=(g=Math.min((h-2*b)/c.w,(i-2*b)/c.h))>this._private.maxZoom?this._private.maxZoom:g)<this._private.minZoom?this._private.minZoom:g,pan:{x:(h-g*(c.x1+c.x2))/2,y:(i-g*(c.y1+c.y2))/2}}}}},zoomRange:function(a,b){var c=this._private;if(null==b){var d=a;a=d.min,b=d.max}return qa(a)&&qa(b)&&a<=b?(c.minZoom=a,c.maxZoom=b):qa(a)&&void 0===b&&a<=c.maxZoom?c.minZoom=a:qa(b)&&void 0===a&&b>=c.minZoom&&(c.maxZoom=b),this},minZoom:function(a){return void 0===a?this._private.minZoom:this.zoomRange({min:a})},maxZoom:function(a){return void 0===a?this._private.maxZoom:this.zoomRange({max:a})},getZoomedViewport:function(a){var b,c,d=this._private,e=d.pan,f=d.zoom,g=!1;if(d.zoomingEnabled||(g=!0),qa(a)?c=a:pa(a)&&(c=a.level,null!=a.position?b=_b(a.position,f,e):null!=a.renderedPosition&&(b=a.renderedPosition),null==b||d.panningEnabled||(g=!0)),c=(c=c>d.maxZoom?d.maxZoom:c)<d.minZoom?d.minZoom:c,g||!qa(c)||c===f||null!=b&&(!qa(b.x)||!qa(b.y)))return null;if(null!=b){var h=e,i=f,j=c;return{zoomed:!0,panned:!0,zoom:j,pan:{x:-j/i*(b.x-h.x)+b.x,y:-j/i*(b.y-h.y)+b.y}}}return{zoomed:!0,panned:!1,zoom:c,pan:e}},zoom:function(a){if(void 0===a)return this._private.zoom;var b=this.getZoomedViewport(a),c=this._private;return null!=b&&b.zoomed?(c.zoom=b.zoom,b.panned&&(c.pan.x=b.pan.x,c.pan.y=b.pan.y),this.emit("zoom"+(b.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(a){var b=this._private,c=!0,d=!0,e=[],f=!1,g=!1;if(!a)return this;if(qa(a.zoom)||(c=!1),pa(a.pan)||(d=!1),!c&&!d)return this;if(c){var h=a.zoom;h<b.minZoom||h>b.maxZoom||!b.zoomingEnabled?f=!0:(b.zoom=h,e.push("zoom"))}if(d&&(!f||!a.cancelOnFailedZoom)&&b.panningEnabled){var i=a.pan;qa(i.x)&&(b.pan.x=i.x,g=!1),qa(i.y)&&(b.pan.y=i.y,g=!1),g||e.push("pan")}return e.length>0&&(e.push("viewport"),this.emit(e.join(" ")),this.notify("viewport")),this},center:function(a){var b=this.getCenterPan(a);return b&&(this._private.pan=b,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(a,b){if(this._private.panningEnabled){if(ma(a)){var c=a;a=this.mutableElements().filter(c)}else sa(a)||(a=this.mutableElements());if(0!==a.length){var d=a.boundingBox(),e=this.width(),f=this.height();return{x:(e-(b=void 0===b?this._private.zoom:b)*(d.x1+d.x2))/2,y:(f-b*(d.y1+d.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var a,b,c=this._private,d=c.container;return c.sizeCache=c.sizeCache||(d?(a=fa.getComputedStyle(d),b=function(b){return parseFloat(a.getPropertyValue(b))},{width:d.clientWidth-b("padding-left")-b("padding-right"),height:d.clientHeight-b("padding-top")-b("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var a=this._private.pan,b=this._private.zoom,c=this.renderedExtent(),d={x1:(c.x1-a.x)/b,x2:(c.x2-a.x)/b,y1:(c.y1-a.y)/b,y2:(c.y2-a.y)/b};return d.w=d.x2-d.x1,d.h=d.y2-d.y1,d},renderedExtent:function(){var a=this.width(),b=this.height();return{x1:0,y1:0,x2:a,y2:b,w:a,h:b}}};vg.centre=vg.center,vg.autolockNodes=vg.autolock,vg.autoungrabifyNodes=vg.autoungrabify;var wg={data:$d.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:$d.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:$d.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:$d.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})};wg.attr=wg.data,wg.removeAttr=wg.removeData;var xg=function(a){var b=this,c=(a=Ha({},a)).container;c&&!ra(c)&&ra(c[0])&&(c=c[0]);var d=c?c._cyreg:null;(d=d||{})&&d.cy&&(d.cy.destroy(),d={});var e=d.readies=d.readies||[];c&&(c._cyreg=d),d.cy=b;var f=void 0!==fa&&void 0!==c&&!a.headless,g=a;g.layout=Ha({name:f?"grid":"null"},g.layout),g.renderer=Ha({name:f?"canvas":"null"},g.renderer);var h=function(a,b,c){return void 0!==b?b:void 0!==c?c:a},i=this._private={container:c,ready:!1,options:g,elements:new Wf(this),listeners:[],aniEles:new Wf(this),data:{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:h(!0,g.zoomingEnabled),userZoomingEnabled:h(!0,g.userZoomingEnabled),panningEnabled:h(!0,g.panningEnabled),userPanningEnabled:h(!0,g.userPanningEnabled),boxSelectionEnabled:h(!0,g.boxSelectionEnabled),autolock:h(!1,g.autolock,g.autolockNodes),autoungrabify:h(!1,g.autoungrabify,g.autoungrabifyNodes),autounselectify:h(!1,g.autounselectify),styleEnabled:void 0===g.styleEnabled?f:g.styleEnabled,zoom:qa(g.zoom)?g.zoom:1,pan:{x:pa(g.pan)&&qa(g.pan.x)?g.pan.x:0,y:pa(g.pan)&&qa(g.pan.y)?g.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(g.selectionType),this.zoomRange({min:g.minZoom,max:g.maxZoom}),i.styleEnabled&&b.setStyle([]);var j=Ha({},g,g.renderer);b.initRenderer(j),function(a,b){if(a.some(ya))return Xd.all(a).then(b);b(a)}([g.style,g.elements],function(a){var c=a[0],f=a[1];i.styleEnabled&&b.style().append(c),function(a,c,d){b.notifications(!1);var e=b.mutableElements();e.length>0&&e.remove(),null!=a&&(pa(a)||oa(a))&&b.add(a),b.one("layoutready",function(a){b.notifications(!0),b.emit(a),b.one("load",c),b.emitAndNotify("load")}).one("layoutstop",function(){b.one("done",d),b.emit("done")});var f=Ha({},b._private.options.layout);f.eles=b.elements(),b.layout(f).run()}(f,function(){b.startAnimationLoop(),i.ready=!0,na(g.ready)&&b.on("ready",g.ready);for(var a=0;a<e.length;a++){var c=e[a];b.on("ready",c)}d&&(d.readies=[]),b.emit("ready")},g.done)})},yg=xg.prototype;Ha(yg,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(a){return this.isReady()?this.emitter().emit("ready",[],a):this.on("ready",a),this},destroy:function(){var a=this;if(!a.destroyed())return a.stopAnimationLoop(),a.destroyRenderer(),this.emit("destroy"),a._private.destroyed=!0,a},hasElementWithId:function(a){return this._private.elements.hasElementWithId(a)},getElementById:function(a){return this._private.elements.getElementById(a)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(a){return this._private.elements.merge(a),this},removeFromPool:function(a){return this._private.elements.unmerge(a),this},container:function(){return this._private.container||null},mount:function(a){if(null!=a){var b=this,c=b._private,d=c.options;return!ra(a)&&ra(a[0])&&(a=a[0]),b.stopAnimationLoop(),b.destroyRenderer(),c.container=a,c.styleEnabled=!0,b.invalidateSize(),b.initRenderer(Ha({},d,d.renderer,{name:"null"===d.renderer.name?"canvas":d.renderer.name})),b.startAnimationLoop(),b.style(d.style),b.emit("mount"),b}},unmount:function(){var a=this;return a.stopAnimationLoop(),a.destroyRenderer(),a.initRenderer({name:"null"}),a.emit("unmount"),a},options:function(){return xb(this._private.options)},json:function(a){var b=this,c=b._private,d=b.mutableElements();if(pa(a)){if(b.startBatch(),a.elements){var e={},f=function(a,c){for(var d=[],f=[],g=0;g<a.length;g++){var h=a[g],i=""+h.data.id,j=b.getElementById(i);e[i]=!0,0!==j.length?f.push({ele:j,json:h}):c?(h.group=c,d.push(h)):d.push(h)}b.add(d);for(var k=0;k<f.length;k++){var l=f[k],m=l.ele,n=l.json;m.json(n)}};if(oa(a.elements))f(a.elements);else for(var g=["nodes","edges"],h=0;h<g.length;h++){var i=g[h],j=a.elements[i];oa(j)&&f(j,i)}var k=b.collection();d.filter(function(a){return!e[a.id()]}).forEach(function(a){a.isParent()?k.merge(a):a.remove()}),k.forEach(function(a){return a.children().move({parent:null})}),k.forEach(function(a){return function(a){return b.getElementById(a.id())}(a).remove()})}a.style&&b.style(a.style),null!=a.zoom&&a.zoom!==c.zoom&&b.zoom(a.zoom),a.pan&&(a.pan.x===c.pan.x&&a.pan.y===c.pan.y||b.pan(a.pan)),a.data&&b.data(a.data);for(var l=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],m=0;m<l.length;m++){var n=l[m];null!=a[n]&&b[n](a[n])}return b.endBatch(),this}var o={};a?o.elements=this.elements().map(function(a){return a.json()}):(o.elements={},d.forEach(function(a){var b=a.group();o.elements[b]||(o.elements[b]=[]),o.elements[b].push(a.json())})),this._private.styleEnabled&&(o.style=b.style().json()),o.data=xb(b.data());var p=c.options;return o.zoomingEnabled=c.zoomingEnabled,o.userZoomingEnabled=c.userZoomingEnabled,o.zoom=c.zoom,o.minZoom=c.minZoom,o.maxZoom=c.maxZoom,o.panningEnabled=c.panningEnabled,o.userPanningEnabled=c.userPanningEnabled,o.pan=xb(c.pan),o.boxSelectionEnabled=c.boxSelectionEnabled,o.renderer=xb(p.renderer),o.hideEdgesOnViewport=p.hideEdgesOnViewport,o.textureOnViewport=p.textureOnViewport,o.wheelSensitivity=p.wheelSensitivity,o.motionBlur=p.motionBlur,o}}),yg.$id=yg.getElementById,[Yf,ag,dg,eg,fg,gg,ig,jg,ug,vg,wg].forEach(function(a){Ha(yg,a)});var zg={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}},Ag=function(a){return a.scratch("breadthfirst")},Bg=function(a,b){return a.scratch("breadthfirst",b)};K.prototype.run=function(){var a,b=this.options,c=b,d=b.cy,e=c.eles,f=e.nodes().filter(function(a){return!a.isParent()}),g=e,h=c.directed,i=c.maximal||c.maximalAdjustments>0,j=lc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(sa(c.roots))a=c.roots;else if(oa(c.roots)){for(var k=[],l=0;l<c.roots.length;l++){var m=c.roots[l],n=d.getElementById(m);k.push(n)}a=d.collection(k)}else if(ma(c.roots))a=d.$(c.roots);else if(h)a=f.roots();else{var o=e.components();a=d.collection();for(var p=function(b){var c=o[b],d=c.maxDegree(!1),e=c.filter(function(a){return a.degree(!1)===d});a=a.add(e)},q=0;q<o.length;q++)p(q)}var r=[],s={},t=function(a,b){null==r[b]&&(r[b]=[]);var c=r[b].length;r[b].push(a),Bg(a,{index:c,depth:b})};g.bfs({roots:a,directed:c.directed,visit:function(a,b,c,d,e){var f=a[0],g=f.id();t(f,e),s[g]=!0}});for(var u=[],v=0;v<f.length;v++){var w=f[v];s[w.id()]||u.push(w)}var x=function(a){for(var b=r[a],c=0;c<b.length;c++){var d=b[c];null!=d?Bg(d,{depth:a,index:c}):(b.splice(c,1),c--)}},y=function(){for(var a=0;a<r.length;a++)x(a)},z=function(a,b){for(var c=Ag(a),d=a.incomers().filter(function(a){return a.isNode()&&e.has(a)}),f=-1,g=a.id(),h=0;h<d.length;h++){var i=d[h],j=Ag(i);f=Math.max(f,j.depth)}return c.depth<=f&&(b[g]?null:(function(a,b){var c=Ag(a),d=c.depth,e=c.index;r[d][e]=null,t(a,b)}(a,f+1),b[g]=!0,!0))};if(h&&i){var A=[],B={},C=function(a){return A.push(a)};for(f.forEach(function(a){return A.push(a)});A.length>0;){var D=A.shift(),E=z(D,B);if(E)D.outgoers().filter(function(a){return a.isNode()&&e.has(a)}).forEach(C);else if(null===E){wb("Detected double maximal shift for node `"+D.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}y();var F=0;if(c.avoidOverlap)for(var G=0;G<f.length;G++){var H=f[G].layoutDimensions(c),I=H.w,J=H.h;F=Math.max(F,I,J)}for(var K={},L=function(a){if(K[a.id()])return K[a.id()];for(var b=Ag(a).depth,c=a.neighborhood(),d=0,e=0,g=0;g<c.length;g++){var h=c[g];if(!h.isEdge()&&!h.isParent()&&f.has(h)){var i=Ag(h),j=i.index,k=i.depth;if(null!=j&&null!=k){var l=r[k].length;k<b&&(d+=j/l,e++)}}}return d/=e=Math.max(1,e),0===e&&(d=0),K[a.id()]=d,d},M=function(a,b){var c=L(a)-L(b);return 0===c?Ga(a.id(),b.id()):c},N=0;N<r.length;N++)r[N].sort(M),x(N);for(var O=[],P=0;P<u.length;P++)O.push(u[P]);r.unshift(O),y();for(var Q=0,R=0;R<r.length;R++)Q=Math.max(r[R].length,Q);var S=j.x1+j.w/2,T=j.x1+j.h/2,U=r.reduce(function(a,b){return Math.max(a,b.length)},0);return f.layoutPositions(this,c,function(a){var b=Ag(a),d=b.depth,e=b.index,f=r[d].length,g=Math.max(j.w/((c.grid?U:f)+1),F),h=Math.max(j.h/(r.length+1),F),i=Math.min(j.w/2/r.length,j.h/2/r.length);if(i=Math.max(i,F),c.circle){var k=i*d+i-(r.length>0&&r[0].length<=3?i/2:0),l=2*Math.PI/r[d].length*e;return 0===d&&1===r[0].length&&(k=1),{x:S+k*Math.cos(l),y:T+k*Math.sin(l)}}return{x:S+(e+1-(f+1)/2)*g,y:(d+1)*h}}),this};var Cg={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};L.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles,e=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,f=d.nodes().not(":parent");b.sort&&(f=f.sort(b.sort));for(var g,h=lc(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()}),i=h.x1+h.w/2,j=h.y1+h.h/2,k=(void 0===b.sweep?2*Math.PI-2*Math.PI/f.length:b.sweep)/Math.max(1,f.length-1),l=0,m=0;m<f.length;m++){var n=f[m].layoutDimensions(b),o=n.w,p=n.h;l=Math.max(l,o,p)}if(g=qa(b.radius)?b.radius:f.length<=1?0:Math.min(h.h,h.w)/2-l,f.length>1&&b.avoidOverlap){l*=1.75;var q=Math.cos(k)-Math.cos(0),r=Math.sin(k)-Math.sin(0),s=Math.sqrt(l*l/(q*q+r*r));g=Math.max(s,g)}return f.layoutPositions(this,b,function(a,c){var d=b.startAngle+c*k*(e?1:-1),f=g*Math.cos(d),h=g*Math.sin(d);return{x:i+f,y:j+h}}),this};var Dg,Eg={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(a){return a.degree()},levelWidth:function(a){return a.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};M.prototype.run=function(){for(var a=this.options,b=a,c=void 0!==b.counterclockwise?!b.counterclockwise:b.clockwise,d=a.cy,e=b.eles.nodes().not(":parent"),f=lc(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),g=f.x1+f.w/2,h=f.y1+f.h/2,i=[],j=0,k=0;k<e.length;k++){var l,m=e[k];l=b.concentric(m),i.push({value:l,node:m}),m._private.scratch.concentric=l}e.updateStyle();for(var n=0;n<e.length;n++){var o=e[n].layoutDimensions(b);j=Math.max(j,o.w,o.h)}i.sort(function(a,b){return b.value-a.value});for(var p=b.levelWidth(e),q=[[]],r=q[0],s=0;s<i.length;s++){var t=i[s];r.length>0&&Math.abs(r[0].value-t.value)>=p&&(r=[],q.push(r)),r.push(t)}var u=j+b.minNodeSpacing;if(!b.avoidOverlap){var v=q.length>0&&q[0].length>1,w=(Math.min(f.w,f.h)/2-u)/(q.length+v?1:0);u=Math.min(u,w)}for(var x=0,y=0;y<q.length;y++){var z=q[y],A=void 0===b.sweep?2*Math.PI-2*Math.PI/z.length:b.sweep,B=z.dTheta=A/Math.max(1,z.length-1);if(z.length>1&&b.avoidOverlap){var C=Math.cos(B)-Math.cos(0),D=Math.sin(B)-Math.sin(0),E=Math.sqrt(u*u/(C*C+D*D));x=Math.max(E,x)}z.r=x,x+=u}if(b.equidistant){for(var F=0,G=0,H=0;H<q.length;H++){var I=q[H].r-G;F=Math.max(F,I)}G=0;for(var J=0;J<q.length;J++){var K=q[J];0===J&&(G=K.r),K.r=G,G+=F}}for(var L={},M=0;M<q.length;M++)for(var N=q[M],O=N.dTheta,P=N.r,Q=0;Q<N.length;Q++){var R=N[Q],S=b.startAngle+(c?1:-1)*O*Q,T={x:g+P*Math.cos(S),y:h+P*Math.sin(S)};L[R.node.id()]=T}return e.layoutPositions(this,b,function(a){var b=a.id();return L[b]}),this};var Fg={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(a,b){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(a){return 2048},nodeOverlap:4,idealEdgeLength:function(a){return 32},edgeElasticity:function(a){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};N.prototype.run=function(){var a=this.options,b=a.cy,c=this;c.stopped=!1,!0!==a.animate&&!1!==a.animate||c.emit({type:"layoutstart",layout:c}),Dg=!0===a.debug;var d=Gg(b,c,a);Dg&&(void 0)(d),a.randomize&&Jg(d);var e=fb(),f=function(){Lg(d,b,a),!0===a.fit&&b.fit(a.padding)},g=function(b){return!(c.stopped||b>=a.numIter||(Mg(d,a),d.temperature=d.temperature*a.coolingFactor,d.temperature<a.minTemp))},h=function(){if(!0===a.animate||!1===a.animate)f(),c.one("layoutstop",a.stop),c.emit({type:"layoutstop",layout:c});else{var b=a.eles.nodes(),e=Kg(d,a,b);b.layoutPositions(c,a,e)}},i=0,j=!0;if(!0===a.animate)!function b(){for(var c=0;j&&c<a.refresh;)j=g(i),i++,c++;j?(fb()-e>=a.animationThreshold&&f(),eb(b)):(Yg(d,a),h())}();else{for(;j;)j=g(i),i++;Yg(d,a),h()}return this},N.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},N.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Gg=function(a,b,c){for(var d=c.eles.edges(),e=c.eles.nodes(),f={isCompound:a.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:e.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:d.size(),temperature:c.initialTemp,clientWidth:a.width(),clientHeight:a.width(),boundingBox:lc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()})},g=c.eles.components(),h={},i=0;i<g.length;i++)for(var j=g[i],k=0;k<j.length;k++)h[j[k].id()]=i;for(i=0;i<f.nodeSize;i++){var l=(q=e[i]).layoutDimensions(c);(G={}).isLocked=q.locked(),G.id=q.data("id"),G.parentId=q.data("parent"),G.cmptId=h[q.id()],G.children=[],G.positionX=q.position("x"),G.positionY=q.position("y"),G.offsetX=0,G.offsetY=0,G.height=l.w,G.width=l.h,G.maxX=G.positionX+G.width/2,G.minX=G.positionX-G.width/2,G.maxY=G.positionY+G.height/2,G.minY=G.positionY-G.height/2,G.padLeft=parseFloat(q.style("padding")),G.padRight=parseFloat(q.style("padding")),G.padTop=parseFloat(q.style("padding")),G.padBottom=parseFloat(q.style("padding")),G.nodeRepulsion=na(c.nodeRepulsion)?c.nodeRepulsion(q):c.nodeRepulsion,f.layoutNodes.push(G),f.idToIndex[G.id]=i}var m=[],n=0,o=-1,p=[];for(i=0;i<f.nodeSize;i++){var q,r=(q=f.layoutNodes[i]).parentId;null!=r?f.layoutNodes[f.idToIndex[r]].children.push(q.id):(m[++o]=q.id,p.push(q.id))}for(f.graphSet.push(p);n<=o;){var s=m[n++],t=f.idToIndex[s],u=f.layoutNodes[t].children;if(u.length>0)for(f.graphSet.push(u),i=0;i<u.length;i++)m[++o]=u[i]}for(i=0;i<f.graphSet.length;i++){var v=f.graphSet[i];for(k=0;k<v.length;k++){var w=f.idToIndex[v[k]];f.indexToGraph[w]=i}}for(i=0;i<f.edgeSize;i++){var x=d[i],y={};y.id=x.data("id"),y.sourceId=x.data("source"),y.targetId=x.data("target");var z=na(c.idealEdgeLength)?c.idealEdgeLength(x):c.idealEdgeLength,A=na(c.edgeElasticity)?c.edgeElasticity(x):c.edgeElasticity,B=f.idToIndex[y.sourceId],C=f.idToIndex[y.targetId];if(f.indexToGraph[B]!=f.indexToGraph[C]){for(var D=Hg(y.sourceId,y.targetId,f),E=f.graphSet[D],F=0,G=f.layoutNodes[B];-1===E.indexOf(G.id);)G=f.layoutNodes[f.idToIndex[G.parentId]],F++;for(G=f.layoutNodes[C];-1===E.indexOf(G.id);)G=f.layoutNodes[f.idToIndex[G.parentId]],F++;z*=F*c.nestingFactor}y.idealLength=z,y.elasticity=A,f.layoutEdges.push(y)}return f},Hg=function(a,b,c){var d=Ig(a,b,0,c);return 2>d.count?0:d.graph},Ig=function a(b,c,d,e){var f=e.graphSet[d];if(-1<f.indexOf(b)&&-1<f.indexOf(c))return{count:2,graph:d};for(var g=0,h=0;h<f.length;h++){var i=f[h],j=e.idToIndex[i],k=e.layoutNodes[j].children;if(0!==k.length){var l=a(b,c,e.indexToGraph[e.idToIndex[k[0]]],e);if(0!==l.count){if(1!==l.count)return l;if(2==++g)break}}}return{count:g,graph:d}},Jg=function(a,b){for(var c=a.clientWidth,d=a.clientHeight,e=0;e<a.nodeSize;e++){var f=a.layoutNodes[e];0!==f.children.length||f.isLocked||(f.positionX=Math.random()*c,f.positionY=Math.random()*d)}},Kg=function(a,b,c){var d=a.boundingBox,e={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return b.boundingBox&&(c.forEach(function(b){var c=a.layoutNodes[a.idToIndex[b.data("id")]];e.x1=Math.min(e.x1,c.positionX),e.x2=Math.max(e.x2,c.positionX),e.y1=Math.min(e.y1,c.positionY),e.y2=Math.max(e.y2,c.positionY)}),e.w=e.x2-e.x1,e.h=e.y2-e.y1),function(c,f){var g=a.layoutNodes[a.idToIndex[c.data("id")]];if(b.boundingBox){var h=(g.positionX-e.x1)/e.w,i=(g.positionY-e.y1)/e.h;return{x:d.x1+h*d.w,y:d.y1+i*d.h}}return{x:g.positionX,y:g.positionY}}},Lg=function(a,b,c){var d=c.layout,e=c.eles.nodes(),f=Kg(a,c,e);e.positions(f),!0!==a.ready&&(a.ready=!0,d.one("layoutready",c.ready),d.emit({type:"layoutready",layout:this}))},Mg=function(a,b,c){Ng(a,b),Sg(a),Tg(a,b),Ug(a),Vg(a)},Ng=function(a,b){for(var c=0;c<a.graphSet.length;c++)for(var d=a.graphSet[c],e=d.length,f=0;f<e;f++)for(var g=a.layoutNodes[a.idToIndex[d[f]]],h=f+1;h<e;h++){var i=a.layoutNodes[a.idToIndex[d[h]]];Pg(g,i,a,b)}},Og=function(a){return-a+2*a*Math.random()},Pg=function(a,b,c,d){if(a.cmptId===b.cmptId||c.isCompound){var e=b.positionX-a.positionX,f=b.positionY-a.positionY;0===e&&0===f&&(e=Og(1),f=Og(1));var g=Qg(a,b,e,f);if(g>0)var h=(j=d.nodeOverlap*g)*e/(p=Math.sqrt(e*e+f*f)),i=j*f/p;else{var j,k=Rg(a,e,f),l=Rg(b,-1*e,-1*f),m=l.x-k.x,n=l.y-k.y,o=m*m+n*n,p=Math.sqrt(o);h=(j=(a.nodeRepulsion+b.nodeRepulsion)/o)*m/p,i=j*n/p}a.isLocked||(a.offsetX-=h,a.offsetY-=i),b.isLocked||(b.offsetX+=h,b.offsetY+=i)}},Qg=function(a,b,c,d){if(c>0)var e=a.maxX-b.minX;else e=b.maxX-a.minX;if(d>0)var f=a.maxY-b.minY;else f=b.maxY-a.minY;return e>=0&&f>=0?Math.sqrt(e*e+f*f):0},Rg=function(a,b,c){var d=a.positionX,e=a.positionY,f=a.height||1,g=a.width||1,h=c/b,i=f/g,j={};return 0===b&&0<c?(j.x=d,j.y=e+f/2,j):0===b&&0>c?(j.x=d,j.y=e+f/2,j):0<b&&-1*i<=h&&h<=i?(j.x=d+g/2,j.y=e+g*c/2/b,j):0>b&&-1*i<=h&&h<=i?(j.x=d-g/2,j.y=e-g*c/2/b,j):0<c&&(h<=-1*i||h>=i)?(j.x=d+f*b/2/c,j.y=e+f/2,j):0>c&&(h<=-1*i||h>=i)?(j.x=d-f*b/2/c,j.y=e-f/2,j):j},Sg=function(a,b){for(var c=0;c<a.edgeSize;c++){var d=a.layoutEdges[c],e=a.idToIndex[d.sourceId],f=a.layoutNodes[e],g=a.idToIndex[d.targetId],h=a.layoutNodes[g],i=h.positionX-f.positionX,j=h.positionY-f.positionY;if(0!==i||0!==j){var k=Rg(f,i,j),l=Rg(h,-1*i,-1*j),m=l.x-k.x,n=l.y-k.y,o=Math.sqrt(m*m+n*n),p=Math.pow(d.idealLength-o,2)/d.elasticity;if(0!==o)var q=p*m/o,r=p*n/o;else q=0,r=0;f.isLocked||(f.offsetX+=q,f.offsetY+=r),h.isLocked||(h.offsetX-=q,h.offsetY-=r)}}},Tg=function(a,b){for(var c=0;c<a.graphSet.length;c++){var d=a.graphSet[c],e=d.length;if(0===c)var f=a.clientHeight/2,g=a.clientWidth/2;else{var h=a.layoutNodes[a.idToIndex[d[0]]],i=a.layoutNodes[a.idToIndex[h.parentId]];f=i.positionX,g=i.positionY}for(var j=0;j<e;j++){var k=a.layoutNodes[a.idToIndex[d[j]]];if(!k.isLocked){var l=f-k.positionX,m=g-k.positionY,n=Math.sqrt(l*l+m*m);if(n>1){var o=b.gravity*l/n,p=b.gravity*m/n;k.offsetX+=o,k.offsetY+=p}}}}},Ug=function(a,b){var c=[],d=0,e=-1;for(c.push.apply(c,a.graphSet[0]),e+=a.graphSet[0].length;d<=e;){var f=c[d++],g=a.idToIndex[f],h=a.layoutNodes[g],i=h.children;if(0<i.length&&!h.isLocked){for(var j=h.offsetX,k=h.offsetY,l=0;l<i.length;l++){var m=a.layoutNodes[a.idToIndex[i[l]]];m.offsetX+=j,m.offsetY+=k,c[++e]=i[l]}h.offsetX=0,h.offsetY=0}}},Vg=function(a,b){for(var c=0;c<a.nodeSize;c++)0<(e=a.layoutNodes[c]).children.length&&(e.maxX=void 0,e.minX=void 0,e.maxY=void 0,e.minY=void 0);for(c=0;c<a.nodeSize;c++)if(!(0<(e=a.layoutNodes[c]).children.length||e.isLocked)){var d=Wg(e.offsetX,e.offsetY,a.temperature);e.positionX+=d.x,e.positionY+=d.y,e.offsetX=0,e.offsetY=0,e.minX=e.positionX-e.width,e.maxX=e.positionX+e.width,e.minY=e.positionY-e.height,e.maxY=e.positionY+e.height,Xg(e,a)}for(c=0;c<a.nodeSize;c++){var e;0<(e=a.layoutNodes[c]).children.length&&!e.isLocked&&(e.positionX=(e.maxX+e.minX)/2,e.positionY=(e.maxY+e.minY)/2,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY)}},Wg=function(a,b,c){var d=Math.sqrt(a*a+b*b);if(d>c)var e={x:c*a/d,y:c*b/d};else e={x:a,y:b};return e},Xg=function a(b,c){var d=b.parentId;if(null!=d){var e=c.layoutNodes[c.idToIndex[d]],f=!1;return(null==e.maxX||b.maxX+e.padRight>e.maxX)&&(e.maxX=b.maxX+e.padRight,f=!0),(null==e.minX||b.minX-e.padLeft<e.minX)&&(e.minX=b.minX-e.padLeft,f=!0),(null==e.maxY||b.maxY+e.padBottom>e.maxY)&&(e.maxY=b.maxY+e.padBottom,f=!0),(null==e.minY||b.minY-e.padTop<e.minY)&&(e.minY=b.minY-e.padTop,f=!0),f?a(e,c):void 0}},Yg=function(a,b){for(var c=a.layoutNodes,d=[],e=0;e<c.length;e++){var f=c[e],g=f.cmptId;(d[g]=d[g]||[]).push(f)}var h=0;for(e=0;e<d.length;e++)if(p=d[e]){p.x1=1/0,p.x2=-1/0,p.y1=1/0,p.y2=-1/0;for(var i=0;i<p.length;i++){var j=p[i];p.x1=Math.min(p.x1,j.positionX-j.width/2),p.x2=Math.max(p.x2,j.positionX+j.width/2),p.y1=Math.min(p.y1,j.positionY-j.height/2),p.y2=Math.max(p.y2,j.positionY+j.height/2)}p.w=p.x2-p.x1,p.h=p.y2-p.y1,h+=p.w*p.h}d.sort(function(a,b){return b.w*b.h-a.w*a.h});var k=0,l=0,m=0,n=0,o=Math.sqrt(h)*a.clientWidth/a.clientHeight;for(e=0;e<d.length;e++){var p;if(p=d[e]){for(i=0;i<p.length;i++)(j=p[i]).isLocked||(j.positionX+=k-p.x1,j.positionY+=l-p.y1);k+=p.w+b.componentSpacing,m+=p.w+b.componentSpacing,n=Math.max(n,p.h),m>o&&(l+=n+b.componentSpacing,k=0,m=0,n=0)}}},Zg={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(a){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};O.prototype.run=function(){var a=this.options,b=a,c=a.cy,d=b.eles.nodes().not(":parent");b.sort&&(d=d.sort(b.sort));var e=lc(b.boundingBox?b.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});if(0===e.h||0===e.w)d.layoutPositions(this,b,function(a){return{x:e.x1,y:e.y1}});else{var f=d.size(),g=Math.sqrt(f*e.h/e.w),h=Math.round(g),i=Math.round(e.w/e.h*g),j=function(a){if(null==a)return Math.min(h,i);Math.min(h,i)==h?h=a:i=a},k=function(a){if(null==a)return Math.max(h,i);Math.max(h,i)==h?h=a:i=a},l=b.rows,m=null!=b.cols?b.cols:b.columns;if(null!=l&&null!=m)h=l,i=m;else if(null!=l&&null==m)h=l,i=Math.ceil(f/h);else if(null==l&&null!=m)i=m,h=Math.ceil(f/i);else if(i*h>f){var n=j(),o=k();(n-1)*o>=f?j(n-1):(o-1)*n>=f&&k(o-1)}else for(;i*h<f;){var p=j(),q=k();(q+1)*p>=f?k(q+1):j(p+1)}var r=e.w/i,s=e.h/h;if(b.condense&&(r=0,s=0),b.avoidOverlap)for(var t=0;t<d.length;t++){var u=d[t],v=u._private.position;null!=v.x&&null!=v.y||(v.x=0,v.y=0);var w=u.layoutDimensions(b),x=b.avoidOverlapPadding,y=w.w+x,z=w.h+x;r=Math.max(r,y),s=Math.max(s,z)}for(var A={},B=function(a,b){return!!A["c-"+a+"-"+b]},C=function(a,b){A["c-"+a+"-"+b]=!0},D=0,E=0,F=function(){++E>=i&&(E=0,D++)},G={},H=0;H<d.length;H++){var I=d[H],J=b.position(I);if(J&&(void 0!==J.row||void 0!==J.col)){var K={row:J.row,col:J.col};if(void 0===K.col)for(K.col=0;B(K.row,K.col);)K.col++;else if(void 0===K.row)for(K.row=0;B(K.row,K.col);)K.row++;G[I.id()]=K,C(K.row,K.col)}}d.layoutPositions(this,b,function(a,b){var c,d;if(a.locked()||a.isParent())return!1;var f=G[a.id()];if(f)c=f.col*r+r/2+e.x1,d=f.row*s+s/2+e.y1;else{for(;B(D,E);)F();c=E*r+r/2+e.x1,d=D*s+s/2+e.y1,C(D,E),F()}return{x:c,y:d}})}return this};var $g={ready:function(){},stop:function(){}};P.prototype.run=function(){var a=this.options,b=a.eles;return a.cy,this.emit("layoutstart"),b.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",a.ready),this.emit("layoutready"),this.one("layoutstop",a.stop),this.emit("layoutstop"),this},P.prototype.stop=function(){return this};var _g={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};Q.prototype.run=function(){var a=this.options,b=a.eles.nodes(),c=na(a.positions);return b.layoutPositions(this,a,function(b,d){var e=function(b){if(null==a.positions)return $b(b.position());if(c)return a.positions(b);var d=a.positions[b._private.data.id];return null==d?null:d}(b);return!b.locked()&&null!=e&&e}),this};var ah={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};R.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles.nodes().not(":parent"),d=lc(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()});return c.layoutPositions(this,a,function(a,b){return{x:d.x1+Math.round(Math.random()*d.w),y:d.y1+Math.round(Math.random()*d.h)}}),this};var bh=[{name:"breadthfirst",impl:K},{name:"circle",impl:L},{name:"concentric",impl:M},{name:"cose",impl:N},{name:"grid",impl:O},{name:"null",impl:P},{name:"preset",impl:Q},{name:"random",impl:R}],ch=function(){},dh=function(){throw new Error("A headless instance can not render images")};S.prototype={recalculateRenderedStyle:ch,notify:function(){this.notifications++},init:ch,isHeadless:function(){return!0},png:dh,jpg:dh};var eh={arrowShapeWidth:.3,registerArrowShapes:function(){var a=this.arrowShapes={},b=this,c=function(a,b,c,d,e,f,g){var h=e.x-c/2-g,i=e.x+c/2+g,j=e.y-c/2-g,k=e.y+c/2+g;return h<=a&&a<=i&&j<=b&&b<=k},d=function(a,b,c,d,e){var f=a*Math.cos(d)-b*Math.sin(d),g=(a*Math.sin(d)+b*Math.cos(d))*c;return{x:f*c+e.x,y:g+e.y}},e=function(a,b,c,e){for(var f=[],g=0;g<a.length;g+=2){var h=a[g],i=a[g+1];f.push(d(h,i,b,c,e))}return f},f=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(d.x,d.y)}return b},g=function(a){return a.pstyle("width").pfValue*a.pstyle("arrow-scale").pfValue*2},h=function(d,h){ma(h)&&(h=a[h]),a[d]=Ha({name:d,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(a,b,c,d,g,h){var i=f(e(this.points,c+2*h,d,g));return zc(a,b,i)},roughCollide:c,draw:function(a,c,d,f){var g=e(this.points,c,d,f);b.arrowShapeImpl("polygon")(a,g)},spacing:function(a){return 0},gap:g},h)};h("none",{collide:rb,roughCollide:rb,draw:tb,spacing:sb,gap:sb}),h("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),h("arrow","triangle"),h("triangle-backcurve",{points:a.triangle.points,controlPoint:[0,-.15],roughCollide:c,draw:function(a,c,f,g,h){var i=e(this.points,c,f,g),j=this.controlPoint,k=d(j[0],j[1],c,f,g);b.arrowShapeImpl(this.name)(a,i,k)},gap:function(a){return.8*g(a)}}),h("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(a,b,c,d,g,h,i){var j=f(e(this.points,c+2*i,d,g)),k=f(e(this.pointsTee,c+2*i,d,g));return zc(a,b,j)||zc(a,b,k)},draw:function(a,c,d,f,g){var h=e(this.points,c,d,f),i=e(this.pointsTee,c,d,f);b.arrowShapeImpl(this.name)(a,h,i)}}),h("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(a,b){var c=this.baseCrossLinePts.slice(),d=b/a;return c[3]=c[3]-d,c[5]=c[5]-d,c},collide:function(a,b,c,d,g,h,i){var j=f(e(this.points,c+2*i,d,g)),k=f(e(this.crossLinePts(c,h),c+2*i,d,g));return zc(a,b,j)||zc(a,b,k)},draw:function(a,c,d,f,g){var h=e(this.points,c,d,f),i=e(this.crossLinePts(c,g),c,d,f);b.arrowShapeImpl(this.name)(a,h,i)}}),h("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(a){return.525*g(a)}}),h("circle",{radius:.15,collide:function(a,b,c,d,e,f,g){var h=e;return Math.pow(h.x-a,2)+Math.pow(h.y-b,2)<=Math.pow((c+2*g)*this.radius,2)},draw:function(a,c,d,e,f){b.arrowShapeImpl(this.name)(a,e.x,e.y,this.radius*c)},spacing:function(a){return b.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.radius}}),h("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(a){return 1},gap:function(a){return 1}}),h("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),h("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(a){return a.pstyle("width").pfValue*a.pstyle("arrow-scale").value}}),h("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(a){return.95*a.pstyle("width").pfValue*a.pstyle("arrow-scale").value}})}},fh={projectIntoViewport:function(a,b){var c=this.cy,d=this.findContainerClientCoords(),e=d[0],f=d[1],g=d[4],h=c.pan(),i=c.zoom();return[((a-e)/g-h.x)/i,((b-f)/g-h.y)/i]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var a=this.container,b=a.getBoundingClientRect(),c=fa.getComputedStyle(a),d=function(a){return parseFloat(c.getPropertyValue(a))},e=d("padding-left"),f=d("padding-right"),g=d("padding-top"),h=d("padding-bottom"),i=d("border-left-width"),j=d("border-right-width"),k=d("border-top-width"),l=(d("border-bottom-width"),a.clientWidth),m=a.clientHeight,n=e+f,o=g+h,p=i+j,q=b.width/(l+p),r=l-n,s=m-o,t=b.left+e+i,u=b.top+g+k;return this.containerBB=[t,u,r,s,q]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(a,b,c,d){return this.findNearestElements(a,b,c,d)[0]},findNearestElements:function(a,b,c,d){function e(a,b){if(a.isNode()){if(k)return;k=a,o.push(a)}if(a.isEdge()&&(null==b||b<u))if(j){if(j.pstyle("z-compound-depth").value===a.pstyle("z-compound-depth").value&&j.pstyle("z-compound-depth").value===a.pstyle("z-compound-depth").value)for(var c=0;c<o.length;c++)if(o[c].isEdge()){o[c]=a,j=a,u=null!=b?b:u;break}}else o.push(a),j=a,u=null!=b?b:u}function f(c){var d=c.outerWidth()+2*s,f=c.outerHeight()+2*s,g=d/2,h=f/2,i=c.position();if(i.x-g<=a&&a<=i.x+g&&i.y-h<=b&&b<=i.y+h&&m.nodeShapes[l.getNodeShape(c)].checkPoint(a,b,0,d,f,i.x,i.y))return e(c,0),!0}function g(c){var d,g=c._private,h=g.rscratch,i=c.pstyle("width").pfValue,j=c.pstyle("arrow-scale").value,k=i/2+r,n=k*k,p=2*k,s=g.source,t=g.target;if("segments"===h.edgeType||"straight"===h.edgeType||"haystack"===h.edgeType){for(var u=h.allpts,v=0;v+3<u.length;v+=2)if(vc(a,b,u[v],u[v+1],u[v+2],u[v+3],p)&&n>(d=yc(a,b,u[v],u[v+1],u[v+2],u[v+3])))return e(c,d),!0}else if("bezier"===h.edgeType||"multibezier"===h.edgeType||"self"===h.edgeType||"compound"===h.edgeType)for(u=h.allpts,v=0;v+5<h.allpts.length;v+=4)if(wc(a,b,u[v],u[v+1],u[v+2],u[v+3],u[v+4],u[v+5],p)&&n>(d=xc(a,b,u[v],u[v+1],u[v+2],u[v+3],u[v+4],u[v+5])))return e(c,d),!0;s=s||g.source,t=t||g.target;var w=l.getArrowWidth(i,j),x=[{name:"source",x:h.arrowStartX,y:h.arrowStartY,angle:h.srcArrowAngle},{name:"target",x:h.arrowEndX,y:h.arrowEndY,angle:h.tgtArrowAngle},{name:"mid-source",x:h.midX,y:h.midY,angle:h.midsrcArrowAngle},{name:"mid-target",x:h.midX,y:h.midY,angle:h.midtgtArrowAngle}];for(v=0;v<x.length;v++){var y=x[v],z=m.arrowShapes[c.pstyle(y.name+"-arrow-shape").value],A=c.pstyle("width").pfValue;if(z.roughCollide(a,b,w,y.angle,{x:y.x,y:y.y},A,r)&&z.collide(a,b,w,y.angle,{x:y.x,y:y.y},A,r))return e(c),!0}q&&o.length>0&&(f(s),f(t))}function h(a,b,c){return Eb(a,b,c)}function i(c,d){var f,g=c._private,i=t;f=d?d+"-":"",c.boundingBox();var j=g.labelBounds[d||"main"],k=c.pstyle(f+"label").value;if("yes"===c.pstyle("text-events").strValue&&k){var l=g.rstyle,m=h(l,"labelX",d),n=h(l,"labelY",d),o=h(g.rscratch,"labelAngle",d),p=j.x1-i,q=j.x2+i,r=j.y1-i,s=j.y2+i;if(o){var u=Math.cos(o),v=Math.sin(o),w=function(a,b){return{x:(a-=m)*u-(b-=n)*v+m,y:a*v+b*u+n}},x=w(p,r),y=w(p,s),z=w(q,r),A=w(q,s),B=[x.x,x.y,z.x,z.y,A.x,A.y,y.x,y.y];if(zc(a,b,B))return e(c),!0}else if(sc(j,a,b))return e(c),!0}}var j,k,l=this,m=this,n=m.getCachedZSortedEles(),o=[],p=m.cy.zoom(),q=m.cy.hasCompoundNodes(),r=(d?24:8)/p,s=(d?8:2)/p,t=(d?8:2)/p,u=1/0;c&&(n=n.interactive);for(var v=n.length-1;v>=0;v--){var w=n[v];w.isNode()?f(w)||i(w):g(w)||i(w)||i(w,"source")||i(w,"target")}return o},getAllInBox:function(a,b,c,d){for(var e,f,g=this.getCachedZSortedEles().interactive,h=[],i=Math.min(a,c),j=Math.max(a,c),k=Math.min(b,d),l=Math.max(b,d),m=lc({x1:a=i,y1:b=k,x2:c=j,y2:d=l}),n=0;n<g.length;n++){var o=g[n];if(o.isNode()){var p=o,q=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});rc(m,q)&&!tc(q,m)&&h.push(p)}else{var r=o,s=r._private,t=s.rscratch;if(null!=t.startX&&null!=t.startY&&!sc(m,t.startX,t.startY))continue;if(null!=t.endX&&null!=t.endY&&!sc(m,t.endX,t.endY))continue;if("bezier"===t.edgeType||"multibezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType||"segments"===t.edgeType||"haystack"===t.edgeType){for(var u=s.rstyle.bezierPts||s.rstyle.linePts||s.rstyle.haystackPts,v=!0,w=0;w<u.length;w++)if(e=m,f=u[w],!sc(e,f.x,f.y)){v=!1;break}v&&h.push(r)}else"haystack"!==t.edgeType&&"straight"!==t.edgeType||h.push(r)}}return h}},gh={calculateArrowAngles:function(a){var b,c,d,e,f,g,h=a._private.rscratch,i="haystack"===h.edgeType,j="bezier"===h.edgeType,k="multibezier"===h.edgeType,l="segments"===h.edgeType,m="compound"===h.edgeType,n="self"===h.edgeType;if(i?(d=h.haystackPts[0],e=h.haystackPts[1],f=h.haystackPts[2],g=h.haystackPts[3]):(d=h.arrowStartX,e=h.arrowStartY,f=h.arrowEndX,g=h.arrowEndY),p=h.midX,q=h.midY,l)b=d-h.segpts[0],c=e-h.segpts[1];else if(k||m||n||j){var o=h.allpts;b=d-ic(o[0],o[2],o[4],.1),c=e-ic(o[1],o[3],o[5],.1)}else b=d-p,c=e-q;h.srcArrowAngle=cc(b,c);var p=h.midX,q=h.midY;if(i&&(p=(d+f)/2,q=(e+g)/2),b=f-d,c=g-e,l)if((o=h.allpts).length/2%2==0){var r=(s=o.length/2)-2;b=o[s]-o[r],c=o[s+1]-o[r+1]}else{r=(s=o.length/2-1)-2;var s,t=s+2;b=o[s]-o[r],c=o[s+1]-o[r+1]}else if(k||m||n){var u,v,w,x,o=h.allpts;if(h.ctrlpts.length/2%2==0){var y=2+(z=2+(A=o.length/2-1));u=ic(o[A],o[z],o[y],0),v=ic(o[A+1],o[z+1],o[y+1],0),w=ic(o[A],o[z],o[y],1e-4),x=ic(o[A+1],o[z+1],o[y+1],1e-4)}else{var z,A;y=2+(z=o.length/2-1),u=ic(o[A=z-2],o[z],o[y],.4999),v=ic(o[A+1],o[z+1],o[y+1],.4999),w=ic(o[A],o[z],o[y],.5),x=ic(o[A+1],o[z+1],o[y+1],.5)}b=w-u,c=x-v}if(h.midtgtArrowAngle=cc(b,c),h.midDispX=b,h.midDispY=c,b*=-1,c*=-1,l&&((o=h.allpts).length/2%2==0||(b=-(o[t=2+(s=o.length/2-1)]-o[s]),c=-(o[t+1]-o[s+1]))),h.midsrcArrowAngle=cc(b,c),l)b=f-h.segpts[h.segpts.length-2],c=g-h.segpts[h.segpts.length-1];else if(k||m||n||j){var B=(o=h.allpts).length;b=f-ic(o[B-6],o[B-4],o[B-2],.9),c=g-ic(o[B-5],o[B-3],o[B-1],.9)}else b=f-p,c=g-q;h.tgtArrowAngle=cc(b,c)}};gh.getArrowWidth=gh.getArrowHeight=function(a,b){var c=this.arrowWidthCache=this.arrowWidthCache||{},d=c[a+", "+b];return d||(d=Math.max(Math.pow(13.37*a,.9),29)*b,c[a+", "+b]=d,d)};var hh={};hh.findHaystackPoints=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c._private,e=d.rscratch;if(!e.haystack){var f=2*Math.random()*Math.PI;e.source={x:Math.cos(f),y:Math.sin(f)},f=2*Math.random()*Math.PI,e.target={x:Math.cos(f),y:Math.sin(f)}}var g=d.source,h=d.target,i=g.position(),j=h.position(),k=g.width(),l=h.width(),m=g.height(),n=h.height(),o=c.pstyle("haystack-radius").value/2;e.haystackPts=e.allpts=[e.source.x*k*o+i.x,e.source.y*m*o+i.y,e.target.x*l*o+j.x,e.target.y*n*o+j.y],e.midX=(e.allpts[0]+e.allpts[2])/2,e.midY=(e.allpts[1]+e.allpts[3])/2,e.edgeType="haystack",e.haystack=!0,this.storeEdgeProjections(c),this.calculateArrowAngles(c),this.recalculateEdgeLabelProjections(c),this.calculateLabelAngles(c)}},hh.findSegmentsPoints=function(a,b){var c=a._private.rscratch,d=b.posPts,e=b.intersectionPts,f=b.vectorNormInverse,g=a.pstyle("edge-distances").value,h=a.pstyle("segment-weights"),i=a.pstyle("segment-distances"),j=Math.min(h.pfValue.length,i.pfValue.length);c.edgeType="segments",c.segpts=[];for(var k=0;k<j;k++){var l=h.pfValue[k],m=i.pfValue[k],n=1-l,o=l,p="node-position"===g?d:e,q={x:p.x1*n+p.x2*o,y:p.y1*n+p.y2*o};c.segpts.push(q.x+f.x*m,q.y+f.y*m)}},hh.findLoopPoints=function(a,b,c,d){var e=a._private.rscratch,f=b.dirCounts,g=b.srcPos,h=a.pstyle("control-point-distances"),i=h?h.pfValue[0]:void 0,j=a.pstyle("loop-direction").pfValue,k=a.pstyle("loop-sweep").pfValue,l=a.pstyle("control-point-step-size").pfValue;e.edgeType="self";var m=c,n=l;d&&(m=0,n=i);var o=j-Math.PI/2,p=o-k/2,q=o+k/2,r=String(j+"_"+k);m=void 0===f[r]?f[r]=0:++f[r],e.ctrlpts=[g.x+1.4*Math.cos(p)*n*(m/3+1),g.y+1.4*Math.sin(p)*n*(m/3+1),g.x+1.4*Math.cos(q)*n*(m/3+1),g.y+1.4*Math.sin(q)*n*(m/3+1)]},hh.findCompoundLoopPoints=function(a,b,c,d){var e=a._private.rscratch;e.edgeType="compound";var f=b.srcPos,g=b.tgtPos,h=b.srcW,i=b.srcH,j=b.tgtW,k=b.tgtH,l=a.pstyle("control-point-step-size").pfValue,m=a.pstyle("control-point-distances"),n=m?m.pfValue[0]:void 0,o=c,p=l;d&&(o=0,p=n);var q={x:f.x-h/2,y:f.y-i/2},r={x:g.x-j/2,y:g.y-k/2},s={x:Math.min(q.x,r.x),y:Math.min(q.y,r.y)},t=Math.max(.5,Math.log(.01*h)),u=Math.max(.5,Math.log(.01*j));e.ctrlpts=[s.x,s.y-(1+Math.pow(50,1.12)/100)*p*(o/3+1)*t,s.x-(1+Math.pow(50,1.12)/100)*p*(o/3+1)*u,s.y]},hh.findStraightEdgePoints=function(a){a._private.rscratch.edgeType="straight"},hh.findBezierPoints=function(a,b,c,d,e){var f=a._private.rscratch,g=b.vectorNormInverse,h=b.posPts,i=b.intersectionPts,j=a.pstyle("edge-distances").value,k=a.pstyle("control-point-step-size").pfValue,l=a.pstyle("control-point-distances"),m=a.pstyle("control-point-weights"),n=l&&m?Math.min(l.value.length,m.value.length):1,o=l?l.pfValue[0]:void 0,p=m.value[0],q=d;f.edgeType=q?"multibezier":"bezier",f.ctrlpts=[];for(var r=0;r<n;r++){var s=(.5-b.eles.length/2+c)*k*(e?-1:1),t=void 0,u=ec(s);q&&(o=l?l.pfValue[r]:k,p=m.value[r]);var v=void 0!==(t=d?o:void 0!==o?u*o:void 0)?t:s,w=1-p,x=p,y="node-position"===j?h:i,z={x:y.x1*w+y.x2*x,y:y.y1*w+y.y2*x};f.ctrlpts.push(z.x+g.x*v,z.y+g.y*v)}},hh.findTaxiPoints=function(a,b){var c=a._private.rscratch;c.edgeType="segments";var d=b.posPts,e=b.srcW,f=b.srcH,g=b.tgtW,h=b.tgtH,i="node-position"!==a.pstyle("edge-distances").value,j=a.pstyle("taxi-direction").value,k=j,l=a.pstyle("taxi-turn"),m="%"===l.units,n=m&&l.pfValue<0?1+l.pfValue:l.pfValue,o=a.pstyle("taxi-turn-min-distance").pfValue,p=i?(e+g)/2:0,q=i?(f+h)/2:0,r=d.x2-d.x1,s=d.y2-d.y1,t=function(a,b){return a>0?Math.max(a-b,0):Math.min(a+b,0)},u=t(r,p),v=t(s,q),w=!1;"auto"===j?j=Math.abs(u)>Math.abs(v)?"horizontal":"vertical":"upward"===j||"downward"===j?(j="vertical",w=!0):"leftward"!==j&&"rightward"!==j||(j="horizontal",w=!0);var x="vertical"===j,y=x?v:u,z=x?s:r,A=ec(z),B=!1;w&&m||!("downward"===k&&z<0||"upward"===k&&z>0||"leftward"===k&&z>0||"rightward"===k&&z<0)||(y=(A*=-1)*Math.abs(y),B=!0);var C=m?n*y:n*A,D=function(a){return Math.abs(a)<o||Math.abs(a)>=Math.abs(y)},E=D(C),F=D(y-Math.abs(C));if(!E&&!F||B)if(x){var G=(C<0?d.y2:d.y1)+C+(i?f/2*A:0),H=d.x1,I=d.x2;c.segpts=[H,G,I,G]}else{var J=(C<0?d.x2:d.x1)+C+(i?e/2*A:0),K=d.y1,L=d.y2;c.segpts=[J,K,J,L]}else if(x){var M=Math.abs(z)<=f/2,N=Math.abs(r)<=g/2;if(M){var O=(d.x1+d.x2)/2,P=d.y1,Q=d.y2;c.segpts=[O,P,O,Q]}else if(N){var R=(d.y1+d.y2)/2,S=d.x1,T=d.x2;c.segpts=[S,R,T,R]}else c.segpts=[d.x1,d.y2]}else{var U=Math.abs(z)<=e/2,V=Math.abs(s)<=h/2;if(U){var W=(d.y1+d.y2)/2,X=d.x1,Y=d.x2;c.segpts=[X,W,Y,W]}else if(V){var Z=(d.x1+d.x2)/2,$=d.y1,_=d.y2;c.segpts=[Z,$,Z,_]}else c.segpts=[d.x2,d.y1]}},hh.tryToCorrectInvalidPoints=function(a,b){var c=a._private.rscratch;if("bezier"===c.edgeType){var d=b.srcPos,e=b.tgtPos,f=b.srcW,g=b.srcH,h=b.tgtW,i=b.tgtH,j=b.srcShape,k=b.tgtShape,l=!qa(c.startX)||!qa(c.startY),m=!qa(c.arrowStartX)||!qa(c.arrowStartY),n=!qa(c.endX)||!qa(c.endY),o=!qa(c.arrowEndX)||!qa(c.arrowEndY),p=this.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,q=fc({x:c.ctrlpts[0],y:c.ctrlpts[1]},{x:c.startX,y:c.startY}),r=q<p,s=fc({x:c.ctrlpts[0],y:c.ctrlpts[1]},{x:c.endX,y:c.endY}),t=s<p,u=!1;if(l||m||r){u=!0;var v={x:c.ctrlpts[0]-d.x,y:c.ctrlpts[1]-d.y},w=Math.sqrt(v.x*v.x+v.y*v.y),x={x:v.x/w,y:v.y/w},y=Math.max(f,g),z={x:c.ctrlpts[0]+2*x.x*y,y:c.ctrlpts[1]+2*x.y*y},A=j.intersectLine(d.x,d.y,f,g,z.x,z.y,0);r?(c.ctrlpts[0]=c.ctrlpts[0]+x.x*(p-q),c.ctrlpts[1]=c.ctrlpts[1]+x.y*(p-q)):(c.ctrlpts[0]=A[0]+x.x*p,c.ctrlpts[1]=A[1]+x.y*p)}if(n||o||t){u=!0;var B={x:c.ctrlpts[0]-e.x,y:c.ctrlpts[1]-e.y},C=Math.sqrt(B.x*B.x+B.y*B.y),D={x:B.x/C,y:B.y/C},E=Math.max(f,g),F={x:c.ctrlpts[0]+2*D.x*E,y:c.ctrlpts[1]+2*D.y*E},G=k.intersectLine(e.x,e.y,h,i,F.x,F.y,0);t?(c.ctrlpts[0]=c.ctrlpts[0]+D.x*(p-s),c.ctrlpts[1]=c.ctrlpts[1]+D.y*(p-s)):(c.ctrlpts[0]=G[0]+D.x*p,c.ctrlpts[1]=G[1]+D.y*p)}u&&this.findEndpoints(a)}},hh.storeAllpts=function(a){var b=a._private.rscratch;if("multibezier"===b.edgeType||"bezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType){b.allpts=[],b.allpts.push(b.startX,b.startY);for(var c=0;c+1<b.ctrlpts.length;c+=2)b.allpts.push(b.ctrlpts[c],b.ctrlpts[c+1]),c+3<b.ctrlpts.length&&b.allpts.push((b.ctrlpts[c]+b.ctrlpts[c+2])/2,(b.ctrlpts[c+1]+b.ctrlpts[c+3])/2);var d;b.allpts.push(b.endX,b.endY),b.ctrlpts.length/2%2==0?(d=b.allpts.length/2-1,b.midX=b.allpts[d],b.midY=b.allpts[d+1]):(d=b.allpts.length/2-3,b.midX=ic(b.allpts[d],b.allpts[d+2],b.allpts[d+4],.5),b.midY=ic(b.allpts[d+1],b.allpts[d+3],b.allpts[d+5],.5))}else if("straight"===b.edgeType)b.allpts=[b.startX,b.startY,b.endX,b.endY],b.midX=(b.startX+b.endX+b.arrowStartX+b.arrowEndX)/4,b.midY=(b.startY+b.endY+b.arrowStartY+b.arrowEndY)/4;else if("segments"===b.edgeType)if(b.allpts=[],b.allpts.push(b.startX,b.startY),b.allpts.push.apply(b.allpts,b.segpts),b.allpts.push(b.endX,b.endY),b.segpts.length%4==0){var e=b.segpts.length/2,f=e-2;b.midX=(b.segpts[f]+b.segpts[e])/2,b.midY=(b.segpts[f+1]+b.segpts[e+1])/2}else{var g=b.segpts.length/2-1;b.midX=b.segpts[g],b.midY=b.segpts[g+1]}},hh.checkForInvalidEdgeWarning=function(a){var b=a[0]._private.rscratch;b.nodesOverlap||qa(b.startX)&&qa(b.startY)&&qa(b.endX)&&qa(b.endY)?b.loggedErr=!1:b.loggedErr||(b.loggedErr=!0,wb("Edge `"+a.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},hh.findEdgeControlPoints=function(a){var b=this;if(a&&0!==a.length){for(var c=this,d=c.cy.hasCompoundNodes(),e={map:new Gb,get:function(a){var b=this.map.get(a[0]);return null!=b?b.get(a[1]):null},set:function(a,b){var c=this.map.get(a[0]);null==c&&(c=new Gb,this.map.set(a[0],c)),c.set(a[1],b)}},f=[],g=[],h=0;h<a.length;h++){var i=a[h],j=i._private,k=i.pstyle("curve-style").value;if(!i.removed()&&i.takesUpSpace())if("haystack"!==k){var l="unbundled-bezier"===k||"segments"===k||"straight"===k||"taxi"===k,m="unbundled-bezier"===k||"bezier"===k,n=j.source,o=j.target,p=[n.poolIndex(),o.poolIndex()].sort(),q=e.get(p);null==q&&(q={eles:[]},e.set(p,q),f.push(p)),q.eles.push(i),l&&(q.hasUnbundled=!0),m&&(q.hasBezier=!0)}else g.push(i)}for(var r=function(a){var g=f[a],h=e.get(g),i=void 0;if(!h.hasUnbundled){var j=h.eles[0].parallelEdges().filter(function(a){return a.isBundledBezier()});Db(h.eles),j.forEach(function(a){return h.eles.push(a)}),h.eles.sort(function(a,b){return a.poolIndex()-b.poolIndex()})}var k=h.eles[0],l=k.source(),m=k.target();if(l.poolIndex()>m.poolIndex()){var n=l;l=m,m=n}var o=h.srcPos=l.position(),p=h.tgtPos=m.position(),q=h.srcW=l.outerWidth(),r=h.srcH=l.outerHeight(),s=h.tgtW=m.outerWidth(),t=h.tgtH=m.outerHeight(),u=h.srcShape=c.nodeShapes[b.getNodeShape(l)],v=h.tgtShape=c.nodeShapes[b.getNodeShape(m)];h.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var w=0;w<h.eles.length;w++){var x=h.eles[w],y=x[0]._private.rscratch,z=x.pstyle("curve-style").value,A="unbundled-bezier"===z||"segments"===z||"taxi"===z,B=!l.same(x.source());if(!h.calculatedIntersection&&l!==m&&(h.hasBezier||h.hasUnbundled)){h.calculatedIntersection=!0;var C=u.intersectLine(o.x,o.y,q,r,p.x,p.y,0),D=h.srcIntn=C,E=v.intersectLine(p.x,p.y,s,t,o.x,o.y,0),F=h.tgtIntn=E,G=h.intersectionPts={x1:C[0],x2:E[0],y1:C[1],y2:E[1]},H=h.posPts={x1:o.x,x2:p.x,y1:o.y,y2:p.y},I=E[1]-C[1],J=E[0]-C[0],K=Math.sqrt(J*J+I*I),L=h.vector={x:J,y:I},M=h.vectorNorm={x:L.x/K,y:L.y/K},N={x:-M.y,y:M.x};h.nodesOverlap=!qa(K)||v.checkPoint(C[0],C[1],0,s,t,p.x,p.y)||u.checkPoint(E[0],E[1],0,q,r,o.x,o.y),h.vectorNormInverse=N,i={nodesOverlap:h.nodesOverlap,dirCounts:h.dirCounts,calculatedIntersection:!0,hasBezier:h.hasBezier,hasUnbundled:h.hasUnbundled,eles:h.eles,srcPos:p,tgtPos:o,srcW:s,srcH:t,tgtW:q,tgtH:r,srcIntn:F,tgtIntn:D,srcShape:v,tgtShape:u,posPts:{x1:H.x2,y1:H.y2,x2:H.x1,y2:H.y1},intersectionPts:{x1:G.x2,y1:G.y2,x2:G.x1,y2:G.y1},vector:{x:-L.x,y:-L.y},vectorNorm:{x:-M.x,y:-M.y},vectorNormInverse:{x:-N.x,y:-N.y}}}var O=B?i:h;y.nodesOverlap=O.nodesOverlap,y.srcIntn=O.srcIntn,y.tgtIntn=O.tgtIntn,d&&(l.isParent()||l.isChild()||m.isParent()||m.isChild())&&(l.parents().anySame(m)||m.parents().anySame(l)||l.same(m)&&l.isParent())?b.findCompoundLoopPoints(x,O,w,A):l===m?b.findLoopPoints(x,O,w,A):"segments"===z?b.findSegmentsPoints(x,O):"taxi"===z?b.findTaxiPoints(x,O):"straight"===z||!A&&h.eles.length%2==1&&w===Math.floor(h.eles.length/2)?b.findStraightEdgePoints(x):b.findBezierPoints(x,O,w,A,B),b.findEndpoints(x),b.tryToCorrectInvalidPoints(x,O),b.checkForInvalidEdgeWarning(x),b.storeAllpts(x),b.storeEdgeProjections(x),b.calculateArrowAngles(x),b.recalculateEdgeLabelProjections(x),b.calculateLabelAngles(x)}},s=0;s<f.length;s++)r(s);this.findHaystackPoints(g)}},hh.getSegmentPoints=function(a){var b=a[0]._private.rscratch;if("segments"===b.edgeType)return this.recalculateRenderedStyle(a),T(b.segpts)},hh.getControlPoints=function(a){var b=a[0]._private.rscratch,c=b.edgeType;if("bezier"===c||"multibezier"===c||"self"===c||"compound"===c)return this.recalculateRenderedStyle(a),T(b.ctrlpts)},hh.getEdgeMidpoint=function(a){var b=a[0]._private.rscratch;return this.recalculateRenderedStyle(a),{x:b.midX,y:b.midY}};var ih={manualEndptToPx:function(a,b){var c=a.position(),d=a.outerWidth(),e=a.outerHeight();if(2===b.value.length){var f=[b.pfValue[0],b.pfValue[1]];return"%"===b.units[0]&&(f[0]=f[0]*d),"%"===b.units[1]&&(f[1]=f[1]*e),f[0]+=c.x,f[1]+=c.y,f}var g=b.pfValue[0];g=-Math.PI/2+g;var h=2*Math.max(d,e),i=[c.x+Math.cos(g)*h,c.y+Math.sin(g)*h];return this.nodeShapes[this.getNodeShape(a)].intersectLine(c.x,c.y,d,e,i[0],i[1],0)},findEndpoints:function(a){var b,c,d,e,f,g=this,h=a.source()[0],i=a.target()[0],j=h.position(),k=i.position(),l=a.pstyle("target-arrow-shape").value,m=a.pstyle("source-arrow-shape").value,n=a.pstyle("target-distance-from-node").pfValue,o=a.pstyle("source-distance-from-node").pfValue,p=a.pstyle("curve-style").value,q=a._private.rscratch,r=q.edgeType,s="self"===r||"compound"===r,t="bezier"===r||"multibezier"===r||s,u="bezier"!==r,v="straight"===r||"segments"===r,w="segments"===r,x=t||u||v,y=s||"taxi"===p,z=a.pstyle("source-endpoint"),A=y?"outside-to-node":z.value,B=a.pstyle("target-endpoint"),C=y?"outside-to-node":B.value;if(q.srcManEndpt=z,q.tgtManEndpt=B,t){var D=[q.ctrlpts[0],q.ctrlpts[1]];c=u?[q.ctrlpts[q.ctrlpts.length-2],q.ctrlpts[q.ctrlpts.length-1]]:D,d=D}else if(v){var E=w?q.segpts.slice(0,2):[k.x,k.y];c=w?q.segpts.slice(q.segpts.length-2):[j.x,j.y],d=E}if("inside-to-node"===C)b=[k.x,k.y];else if(B.units)b=this.manualEndptToPx(i,B);else if("outside-to-line"===C)b=q.tgtIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?e=c:"outside-to-line"!==C&&"outside-to-line-or-label"!==C||(e=[j.x,j.y]),b=g.nodeShapes[this.getNodeShape(i)].intersectLine(k.x,k.y,i.outerWidth(),i.outerHeight(),e[0],e[1],0),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var F=i._private.rscratch,G=F.labelWidth,H=F.labelHeight,I=F.labelX,J=F.labelY,K=G/2,L=H/2,M=i.pstyle("text-valign").value;"top"===M?J-=L:"bottom"===M&&(J+=L);var N=i.pstyle("text-halign").value;"left"===N?I-=K:"right"===N&&(I+=K);var O=Hc(e[0],e[1],[I-K,J-L,I+K,J-L,I+K,J+L,I-K,J+L],k.x,k.y);if(O.length>0){var P=j,Q=gc(P,bc(b)),R=gc(P,bc(O)),S=Q;R<Q&&(b=O,S=R),O.length>2&&gc(P,{x:O[2],y:O[3]})<S&&(b=[O[2],O[3]])}}var T=Ic(b,c,g.arrowShapes[l].spacing(a)+n),U=Ic(b,c,g.arrowShapes[l].gap(a)+n);if(q.endX=U[0],q.endY=U[1],q.arrowEndX=T[0],q.arrowEndY=T[1],"inside-to-node"===A)b=[j.x,j.y];else if(z.units)b=this.manualEndptToPx(h,z);else if("outside-to-line"===A)b=q.srcIntn;else if("outside-to-node"===A||"outside-to-node-or-label"===A?f=d:"outside-to-line"!==A&&"outside-to-line-or-label"!==A||(f=[k.x,k.y]),b=g.nodeShapes[this.getNodeShape(h)].intersectLine(j.x,j.y,h.outerWidth(),h.outerHeight(),f[0],f[1],0),"outside-to-node-or-label"===A||"outside-to-line-or-label"===A){var V=h._private.rscratch,W=V.labelWidth,X=V.labelHeight,Y=V.labelX,Z=V.labelY,$=W/2,_=X/2,aa=h.pstyle("text-valign").value;"top"===aa?Z-=_:"bottom"===aa&&(Z+=_);var ba=h.pstyle("text-halign").value;"left"===ba?Y-=$:"right"===ba&&(Y+=$);var ca=Hc(f[0],f[1],[Y-$,Z-_,Y+$,Z-_,Y+$,Z+_,Y-$,Z+_],j.x,j.y);if(ca.length>0){var da=k,ea=gc(da,bc(b)),fa=gc(da,bc(ca)),ga=ea;fa<ea&&(b=[ca[0],ca[1]],ga=fa),ca.length>2&&gc(da,{x:ca[2],y:ca[3]})<ga&&(b=[ca[2],ca[3]])}}var ha=Ic(b,d,g.arrowShapes[m].spacing(a)+o),ia=Ic(b,d,g.arrowShapes[m].gap(a)+o);q.startX=ia[0],q.startY=ia[1],q.arrowStartX=ha[0],q.arrowStartY=ha[1],x&&(qa(q.startX)&&qa(q.startY)&&qa(q.endX)&&qa(q.endY)?q.badLine=!1:q.badLine=!0)},getSourceEndpoint:function(a){var b=a[0]._private.rscratch;switch(this.recalculateRenderedStyle(a),b.edgeType){case"haystack":return{x:b.haystackPts[0],y:b.haystackPts[1]};default:return{x:b.arrowStartX,y:b.arrowStartY}}},getTargetEndpoint:function(a){var b=a[0]._private.rscratch;switch(this.recalculateRenderedStyle(a),b.edgeType){case"haystack":return{x:b.haystackPts[2],y:b.haystackPts[3]};default:return{x:b.arrowEndX,y:b.arrowEndY}}}},jh={};jh.storeEdgeProjections=function(a){var b=a._private,c=b.rscratch,d=c.edgeType;if(b.rstyle.bezierPts=null,b.rstyle.linePts=null,b.rstyle.haystackPts=null,"multibezier"===d||"bezier"===d||"self"===d||"compound"===d){b.rstyle.bezierPts=[];for(var e=0;e+5<c.allpts.length;e+=4)U(this,a,c.allpts.slice(e,e+6))}else if("segments"===d){var f=b.rstyle.linePts=[];for(e=0;e+1<c.allpts.length;e+=2)f.push({x:c.allpts[e],y:c.allpts[e+1]})}else if("haystack"===d){var g=c.haystackPts;b.rstyle.haystackPts=[{x:g[0],y:g[1]},{x:g[2],y:g[3]}]}b.rstyle.arrowWidth=this.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.arrowShapeWidth},jh.recalculateEdgeProjections=function(a){this.findEdgeControlPoints(a)};var kh={recalculateNodeLabelProjection:function(a){var b=a.pstyle("label").strValue;if(!xa(b)){var c,d,e=a._private,f=a.width(),g=a.height(),h=a.padding(),i=a.position(),j=a.pstyle("text-halign").strValue,k=a.pstyle("text-valign").strValue,l=e.rscratch,m=e.rstyle;switch(j){case"left":c=i.x-f/2-h;break;case"right":c=i.x+f/2+h;break;default:c=i.x}switch(k){case"top":d=i.y-g/2-h;break;case"bottom":d=i.y+g/2+h;break;default:d=i.y}l.labelX=c,l.labelY=d,m.labelX=c,m.labelY=d,this.applyLabelDimensions(a)}}},lh=function(a,b){var c=Math.atan(b/a);return 0===a&&c<0&&(c*=-1),c},mh=function(a,b){var c=b.x-a.x,d=b.y-a.y;return lh(c,d)};kh.recalculateEdgeLabelProjections=function(a){var b,c=a._private,d=c.rscratch,e=this,f={mid:a.pstyle("label").strValue,source:a.pstyle("source-label").strValue,target:a.pstyle("target-label").strValue};if(f.mid||f.source||f.target){b={x:d.midX,y:d.midY};var g=function(a,b,d){Fb(c.rscratch,a,b,d),Fb(c.rstyle,a,b,d)};g("labelX",null,b.x),g("labelY",null,b.y);var h=lh(d.midDispX,d.midDispY);g("labelAutoAngle",null,h);var i=function(h){var i,j="source"===h;if(f[h]){var k=a.pstyle(h+"-text-offset").pfValue;switch(d.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var l,m=function a(){function b(a,b,c,d,e){var f=fc(b,c),g=a.segments[a.segments.length-1],h={p0:b,p1:c,t0:d,t1:e,startDist:g?g.startDist+g.length:0,length:f};a.segments.push(h),a.length+=f}if(a.cache)return a.cache;for(var f=[],g=0;g+5<d.allpts.length;g+=4){var h={x:d.allpts[g],y:d.allpts[g+1]},i={x:d.allpts[g+2],y:d.allpts[g+3]},j={x:d.allpts[g+4],y:d.allpts[g+5]};f.push({p0:h,p1:i,p2:j,startDist:0,length:0,segments:[]})}for(var k=c.rstyle.bezierPts,l=e.bezierProjPcts.length,m=0;m<f.length;m++){var n=f[m],o=f[m-1];o&&(n.startDist=o.startDist+o.length),b(n,n.p0,k[m*l],0,e.bezierProjPcts[0]);for(var p=0;p<l-1;p++)b(n,k[m*l+p],k[m*l+p+1],e.bezierProjPcts[p],e.bezierProjPcts[p+1]);b(n,k[m*l+l-1],n.p2,e.bezierProjPcts[l-1],1)}return a.cache=f}(),n=0,o=0,p=0;p<m.length;p++){for(var q=m[j?p:m.length-1-p],r=0;r<q.segments.length;r++){var s=q.segments[j?r:q.segments.length-1-r],t=p===m.length-1&&r===q.segments.length-1;if(n=o,(o+=s.length)>=k||t){l={cp:q,segment:s};break}}if(l)break}var u=l.cp,v=l.segment,w=(k-n)/v.length,x=v.t1-v.t0,y=j?v.t0+x*w:v.t1-x*w;y=kc(0,y,1),b=jc(u.p0,u.p1,u.p2,y),i=function(a,b,c,d){var e=kc(0,d-.001,1),f=kc(0,d+.001,1),g=jc(a,b,c,e),h=jc(a,b,c,f);return mh(g,h)}(u.p0,u.p1,u.p2,y);break;case"straight":case"segments":case"haystack":for(var z,A,B,C,D=0,E=d.allpts.length,F=0;F+3<E&&(j?(B={x:d.allpts[F],y:d.allpts[F+1]},C={x:d.allpts[F+2],y:d.allpts[F+3]}):(B={x:d.allpts[E-2-F],y:d.allpts[E-1-F]},C={x:d.allpts[E-4-F],y:d.allpts[E-3-F]}),A=D,!((D+=z=fc(B,C))>=k));F+=2);var G=(k-A)/z;G=kc(0,G,1),b=function(a,b,c,d){var e=b.x-a.x,f=b.y-a.y,g=fc(a,b),h=e/g,i=f/g;return c=null==c?0:c,d=null!=d?d:c*g,{x:a.x+h*d,y:a.y+i*d}}(B,C,G),i=mh(B,C)}g("labelX",h,b.x),g("labelY",h,b.y),g("labelAutoAngle",h,i)}};i("source"),i("target"),this.applyLabelDimensions(a)}},kh.applyLabelDimensions=function(a){this.applyPrefixedLabelDimensions(a),a.isEdge()&&(this.applyPrefixedLabelDimensions(a,"source"),this.applyPrefixedLabelDimensions(a,"target"))},kh.applyPrefixedLabelDimensions=function(a,b){var c=a._private,d=this.getLabelText(a,b),e=this.calculateLabelDimensions(a,d),f=a.pstyle("line-height").pfValue,g=a.pstyle("text-wrap").strValue,h=Eb(c.rscratch,"labelWrapCachedLines",b)||[],i="wrap"!==g?1:Math.max(h.length,1),j=e.height/i,k=j*f,l=e.width,m=e.height+(i-1)*(f-1)*j;Fb(c.rstyle,"labelWidth",b,l),Fb(c.rscratch,"labelWidth",b,l),Fb(c.rstyle,"labelHeight",b,m),Fb(c.rscratch,"labelHeight",b,m),Fb(c.rscratch,"labelLineHeight",b,k)},kh.getLabelText=function(a,b){var c=a._private,d=b?b+"-":"",e=a.pstyle(d+"label").strValue,f=a.pstyle("text-transform").value,g=function(a,d){return d?(Fb(c.rscratch,a,b,d),d):Eb(c.rscratch,a,b)};if(!e)return"";"none"==f||("uppercase"==f?e=e.toUpperCase():"lowercase"==f&&(e=e.toLowerCase()));var h=a.pstyle("text-wrap").value;if("wrap"===h){var i=g("labelKey");if(null!=i&&g("labelWrapKey")===i)return g("labelWrapCachedText");for(var j=e.split("\n"),k=a.pstyle("text-max-width").pfValue,l="anywhere"===a.pstyle("text-overflow-wrap").value,m=[],n=/[\s\u200b]+/,o=l?"":" ",p=0;p<j.length;p++){var q=j[p],r=this.calculateLabelDimensions(a,q).width;if(l){q=q.split("").join("​")}if(r>k){for(var s=q.split(n),t="",u=0;u<s.length;u++){var v=s[u],w=0===t.length?v:t+o+v;this.calculateLabelDimensions(a,w).width<=k?t+=v+o:(t&&m.push(t),t=v+o)}t.match(/^[\s\u200b]+$/)||m.push(t)}else m.push(q)}g("labelWrapCachedLines",m),e=g("labelWrapCachedText",m.join("\n")),g("labelWrapKey",i)}else if("ellipsis"===h){for(var x=a.pstyle("text-max-width").pfValue,y="",z=!1,A=0;A<e.length&&!(this.calculateLabelDimensions(a,y+e[A]+"…").width>x);A++)y+=e[A],A===e.length-1&&(z=!0);return z||(y+="…"),y}return e},kh.getLabelJustification=function(a){var b=a.pstyle("text-justification").strValue,c=a.pstyle("text-halign").strValue;if("auto"!==b)return b;if(!a.isNode())return"center";switch(c){case"left":return"right";case"right":return"left";default:return"center"}},kh.calculateLabelDimensions=function(a,b){var c=jb(b,a._private.labelDimsKey),d=this.labelDimCache||(this.labelDimCache=[]),e=d[c];if(null!=e)return e;var f=a.pstyle("font-style").strValue,g=1*a.pstyle("font-size").pfValue+"px",h=a.pstyle("font-family").strValue,i=a.pstyle("font-weight").strValue,j=this.labelCalcDiv;j||(j=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(j));var k=j.style;return k.fontFamily=h,k.fontStyle=f,k.fontSize=g,k.fontWeight=i,k.position="absolute",k.left="-9999px",k.top="-9999px",k.zIndex="-1",k.visibility="hidden",k.pointerEvents="none",k.padding="0",k.lineHeight="1",k.whiteSpace="pre",j.textContent=b,d[c]={width:Math.ceil(j.clientWidth/1),height:Math.ceil(j.clientHeight/1)}},kh.calculateLabelAngle=function(a,b){var c=a._private.rscratch,d=a.isEdge(),e=b?b+"-":"",f=a.pstyle(e+"text-rotation"),g=f.strValue;return"none"===g?0:d&&"autorotate"===g?c.labelAutoAngle:"autorotate"===g?0:f.pfValue},kh.calculateLabelAngles=function(a){var b=this,c=a.isEdge(),d=a._private.rscratch;d.labelAngle=b.calculateLabelAngle(a),c&&(d.sourceLabelAngle=b.calculateLabelAngle(a,"source"),d.targetLabelAngle=b.calculateLabelAngle(a,"target"))};var nh={},oh=!1;nh.getNodeShape=function(a){var b=a.pstyle("shape").value;if("cutrectangle"===b&&(a.width()<28||a.height()<28))return oh||(wb("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),oh=!0),"rectangle";if(a.isParent())return"rectangle"===b||"roundrectangle"===b||"cutrectangle"===b||"barrel"===b?b:"rectangle";if("polygon"===b){var c=a.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(c).name}return b};var ph={registerCalculationListeners:function(){var a=this.cy,b=a.collection(),c=this,d=function(a){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(b.merge(a),c)for(var d=0;d<a.length;d++){var e=a[d],f=e._private,g=f.rstyle;g.clean=!1,g.cleanConnected=!1}};c.binder(a).on("bounds.* dirty.*",function(a){var b=a.target;d(b)}).on("style.* background.*",function(a){var b=a.target;d(b,!1)});var e=function(e){if(e){for(var f=c.onUpdateEleCalcsFns,g=0;g<b.length;g++){var h=b[g],i=h._private.rstyle;h.isNode()&&!i.cleanConnected&&(d(h.connectedEdges()),i.cleanConnected=!0)}if(f)for(var j=0;j<f.length;j++)(0,f[j])(e,b);c.recalculateRenderedStyle(b),b=a.collection()}};c.flushRenderedStyleQueue=function(){e(!0)},c.beforeRender(e,c.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(a){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(a)},recalculateRenderedStyle:function(a,b){var c=function(a){return a._private.rstyle.cleanConnected},d=[],e=[];if(!this.destroyed){void 0===b&&(b=!0);for(var f=0;f<a.length;f++){var g=a[f],h=g._private,i=h.rstyle;!g.isEdge()||c(g.source())&&c(g.target())||(i.clean=!1),b&&i.clean||g.removed()||"none"!==g.pstyle("display").value&&("nodes"===h.group?e.push(g):d.push(g),i.clean=!0)}for(var j=0;j<e.length;j++){var k=e[j],l=k._private.rstyle,m=k.position();this.recalculateNodeLabelProjection(k),l.nodeX=m.x,l.nodeY=m.y,l.nodeW=k.pstyle("width").pfValue,l.nodeH=k.pstyle("height").pfValue}this.recalculateEdgeProjections(d);for(var n=0;n<d.length;n++){var o=d[n]._private,p=o.rstyle,q=o.rscratch;p.srcX=q.arrowStartX,p.srcY=q.arrowStartY,p.tgtX=q.arrowEndX,p.tgtY=q.arrowEndY,p.midX=q.midX,p.midY=q.midY,p.labelAngle=q.labelAngle,p.sourceLabelAngle=q.sourceLabelAngle,p.targetLabelAngle=q.targetLabelAngle}}}},qh={updateCachedGrabbedEles:function(){var a=this.cachedZSortedEles;if(a){a.drag=[],a.nondrag=[];for(var b=[],c=0;c<a.length;c++){var d=(e=a[c])._private.rscratch;e.grabbed()&&!e.isParent()?b.push(e):d.inDragLayer?a.drag.push(e):a.nondrag.push(e)}for(c=0;c<b.length;c++){var e=b[c];a.drag.push(e)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(a){if(a||!this.cachedZSortedEles){var b=this.cy.mutableElements().toArray();b.sort(Gf),b.interactive=b.filter(function(a){return a.interactive()}),this.cachedZSortedEles=b,this.updateCachedGrabbedEles()}else b=this.cachedZSortedEles;return b}},rh={};[fh,gh,hh,ih,jh,kh,nh,ph,qh].forEach(function(a){Ha(rh,a)});var sh={getCachedImage:function(a,b,c){var d=this.imageCache=this.imageCache||{},e=d[a];if(e)return e.image.complete||e.image.addEventListener("load",c),e.image;var f=(e=d[a]=d[a]||{}).image=new Image;return f.addEventListener("load",c),f.addEventListener("error",function(){f.error=!0}),"data:"===a.substring(0,"data:".length).toLowerCase()||(f.crossOrigin=b),f.src=a,f}},th={registerBinding:function(a,b,c,d){var e=Array.prototype.slice.apply(arguments,[1]),f=this.binder(a);return f.on.apply(f,e)}};th.binder=function(a){var b,c=this,d=a===window||a===document||a===document.body||(b=a,"undefined"!=typeof HTMLElement&&b instanceof HTMLElement);if(null==c.supportsPassiveEvents){var e=!1;try{var f=Object.defineProperty({},"passive",{get:function(){return e=!0,!0}});window.addEventListener("test",null,f)}catch(a){}c.supportsPassiveEvents=e}var g=function(b,e,f){var g=Array.prototype.slice.call(arguments);return d&&c.supportsPassiveEvents&&(g[2]={capture:null!=f&&f,passive:!1,once:!1}),c.bindings.push({target:a,args:g}),(a.addEventListener||a.on).apply(a,g),this};return{on:g,addEventListener:g,addListener:g,bind:g}},th.nodeIsDraggable=function(a){return a&&a.isNode()&&!a.locked()&&a.grabbable()},th.nodeIsGrabbable=function(a){return this.nodeIsDraggable(a)&&a.interactive()},th.load=function(){var a=this,b=function(a){return a.selected()},c=function(b,c,d,e){null==b&&(b=a.cy);for(var f=0;f<c.length;f++){var g=c[f];b.emit({originalEvent:d,type:g,position:e})}},d=function(a){return a.shiftKey||a.metaKey||a.ctrlKey},e=function(b,c){var d=!0;if(a.cy.hasCompoundNodes()&&b&&b.pannable()){for(var e=0;c&&e<c.length;e++)if((b=c[e]).isNode()&&b.isParent()){d=!1;break}}else d=!0;return d},f=function(a){a[0]._private.rscratch.inDragLayer=!0},g=function(a){a[0]._private.rscratch.isGrabTarget=!0},h=function(a,b){var c=b.addToList;c.has(a)||(c.merge(a),function(a){a[0]._private.grabbed=!0}(a))},i=function(b,c){c=c||{};var d=b.cy().hasCompoundNodes();c.inDragLayer&&(b.forEach(f),b.neighborhood().stdFilter(function(a){return!d||a.isEdge()}).forEach(f)),c.addToList&&b.forEach(function(a){h(a,c)}),function(a,b){if(a.cy().hasCompoundNodes()&&(null!=b.inDragLayer||null!=b.addToList)){var c=a.descendants();b.inDragLayer&&(c.forEach(f),c.connectedEdges().forEach(f)),b.addToList&&b.addToList.unmerge(c)}}(b,c),l(b,{inDragLayer:c.inDragLayer}),a.updateCachedGrabbedEles()},j=i,k=function(b){b&&(a.getCachedZSortedEles().forEach(function(a){!function(a){a[0]._private.grabbed=!1}(a),function(a){a[0]._private.rscratch.inDragLayer=!1}(a),function(a){a[0]._private.rscratch.isGrabTarget=!1}(a)}),a.updateCachedGrabbedEles())},l=function(a,b){if((null!=b.inDragLayer||null!=b.addToList)&&a.cy().hasCompoundNodes()){var c=a.ancestors().orphans();if(!c.same(a)){var d=c.descendants().spawnSelf().merge(c).unmerge(a).unmerge(a.descendants()),e=d.connectedEdges();b.inDragLayer&&(e.forEach(f),d.forEach(f)),b.addToList&&d.forEach(function(a){h(a,b)})}}},m=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},n="undefined"!=typeof MutationObserver,o="undefined"!=typeof ResizeObserver;n?(a.removeObserver=new MutationObserver(function(b){for(var c=0;c<b.length;c++){var d=b[c].removedNodes;if(d)for(var e=0;e<d.length;e++)if(d[e]===a.container){a.destroy();break}}}),a.container.parentNode&&a.removeObserver.observe(a.container.parentNode,{childList:!0})):a.registerBinding(a.container,"DOMNodeRemoved",function(b){a.destroy()});var p=ab(function(){a.cy.resize()},100);n&&(a.styleObserver=new MutationObserver(p),a.styleObserver.observe(a.container,{attributes:!0})),a.registerBinding(window,"resize",p),o&&(a.resizeObserver=new ResizeObserver(p),a.resizeObserver.observe(a.container));var q=function(){a.invalidateContainerClientCoordsCache()};!function(a,b){for(;null!=a;)b(a),a=a.parentNode}(a.container,function(b){a.registerBinding(b,"transitionend",q),a.registerBinding(b,"animationend",q),a.registerBinding(b,"scroll",q)}),a.registerBinding(a.container,"contextmenu",function(a){a.preventDefault()});var r=function(b){for(var c=a.findContainerClientCoords(),d=c[0],e=c[1],f=c[2],g=c[3],h=b.touches?b.touches:[b],i=!1,j=0;j<h.length;j++){var k=h[j];if(d<=k.clientX&&k.clientX<=d+f&&e<=k.clientY&&k.clientY<=e+g){i=!0;break}}if(!i)return!1;for(var l=a.container,m=b.target.parentNode,n=!1;m;){if(m===l){n=!0;break}m=m.parentNode}return!!n};a.registerBinding(a.container,"mousedown",function(b){if(r(b)){b.preventDefault(),m(),a.hoverData.capture=!0,a.hoverData.which=b.which;var d=a.cy,e=[b.clientX,b.clientY],f=a.projectIntoViewport(e[0],e[1]),h=a.selection,k=a.findNearestElements(f[0],f[1],!0,!1),l=k[0],n=a.dragData.possibleDragElements;if(a.hoverData.mdownPos=f,a.hoverData.mdownGPos=e,3==b.which){a.hoverData.cxtStarted=!0;var o={originalEvent:b,type:"cxttapstart",position:{x:f[0],y:f[1]}};l?(l.activate(),l.emit(o),a.hoverData.down=l):d.emit(o),a.hoverData.downTime=(new Date).getTime(),a.hoverData.cxtDragged=!1}else if(1==b.which){if(l&&l.activate(),null!=l&&a.nodeIsGrabbable(l)){var p=function(a){return{originalEvent:b,type:a,position:{x:f[0],y:f[1]}}};if(g(l),l.selected()){n=a.dragData.possibleDragElements=d.collection();var q=d.$(function(b){return b.isNode()&&b.selected()&&a.nodeIsGrabbable(b)});i(q,{addToList:n}),l.emit(p("grabon")),q.forEach(function(a){a.emit(p("grab"))})}else n=a.dragData.possibleDragElements=d.collection(),j(l,{addToList:n}),l.emit(p("grabon")).emit(p("grab"));a.redrawHint("eles",!0),a.redrawHint("drag",!0)}a.hoverData.down=l,a.hoverData.downs=k,a.hoverData.downTime=(new Date).getTime(),c(l,["mousedown","tapstart","vmousedown"],b,{x:f[0],y:f[1]}),null==l?(h[4]=1,a.data.bgActivePosistion={x:f[0],y:f[1]},a.redrawHint("select",!0),a.redraw()):l.pannable()&&(h[4]=1),a.hoverData.tapholdCancelled=!1,clearTimeout(a.hoverData.tapholdTimeout),a.hoverData.tapholdTimeout=setTimeout(function(){if(!a.hoverData.tapholdCancelled){var c=a.hoverData.down;c?c.emit({originalEvent:b,type:"taphold",position:{x:f[0],y:f[1]}}):d.emit({originalEvent:b,type:"taphold",position:{x:f[0],y:f[1]}})}},a.tapholdDuration)}h[0]=h[2]=f[0],h[1]=h[3]=f[1]}},!1),a.registerBinding(window,"mousemove",function(b){if(a.hoverData.capture||r(b)){var f=!1,g=a.cy,h=g.zoom(),j=[b.clientX,b.clientY],l=a.projectIntoViewport(j[0],j[1]),m=a.hoverData.mdownPos,n=a.hoverData.mdownGPos,o=a.selection,p=null;a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.selecting||(p=a.findNearestElement(l[0],l[1],!0,!1));var q,s=a.hoverData.last,t=a.hoverData.down,u=[l[0]-o[2],l[1]-o[3]],v=a.dragData.possibleDragElements;if(n){var w=j[0]-n[0],x=w*w,y=j[1]-n[1],z=x+y*y;a.hoverData.isOverThresholdDrag=q=z>=a.desktopTapThreshold2}var A=d(b);q&&(a.hoverData.tapholdCancelled=!0),f=!0,c(p,["mousemove","vmousemove","tapdrag"],b,{x:l[0],y:l[1]});var B=function(){a.data.bgActivePosistion=void 0,a.hoverData.selecting||g.emit({originalEvent:b,type:"boxstart",position:{x:l[0],y:l[1]}}),o[4]=1,a.hoverData.selecting=!0,a.redrawHint("select",!0),a.redraw()};if(3===a.hoverData.which){if(q){var C={originalEvent:b,type:"cxtdrag",position:{x:l[0],y:l[1]}};t?t.emit(C):g.emit(C),a.hoverData.cxtDragged=!0,a.hoverData.cxtOver&&p===a.hoverData.cxtOver||(a.hoverData.cxtOver&&a.hoverData.cxtOver.emit({originalEvent:b,type:"cxtdragout",position:{x:l[0],y:l[1]}}),a.hoverData.cxtOver=p,p&&p.emit({originalEvent:b,type:"cxtdragover",position:{x:l[0],y:l[1]}}))}}else if(a.hoverData.dragging){if(f=!0,g.panningEnabled()&&g.userPanningEnabled()){var D;if(a.hoverData.justStartedPan){var E=a.hoverData.mdownPos;D={x:(l[0]-E[0])*h,y:(l[1]-E[1])*h},a.hoverData.justStartedPan=!1}else D={x:u[0]*h,y:u[1]*h};g.panBy(D),a.hoverData.dragged=!0}l=a.projectIntoViewport(b.clientX,b.clientY)}else if(1!=o[4]||null!=t&&!t.pannable()){if(t&&t.pannable()&&t.active()&&t.unactivate(),t&&t.grabbed()||p==s||(s&&c(s,["mouseout","tapdragout"],b,{x:l[0],y:l[1]}),p&&c(p,["mouseover","tapdragover"],b,{x:l[0],y:l[1]}),a.hoverData.last=p),t)if(q){if(g.boxSelectionEnabled()&&A)t&&t.grabbed()&&(k(v),t.emit("freeon"),v.emit("free"),a.dragData.didDrag&&(t.emit("dragfreeon"),v.emit("dragfree"))),B();else if(t&&t.grabbed()&&a.nodeIsDraggable(t)){var F=!a.dragData.didDrag;F&&a.redrawHint("eles",!0),a.dragData.didDrag=!0;var G=g.collection();a.hoverData.draggingEles||i(v,{inDragLayer:!0});var H={x:0,y:0};if(qa(u[0])&&qa(u[1])&&(H.x+=u[0],H.y+=u[1],F)){var I=a.hoverData.dragDelta;I&&qa(I[0])&&qa(I[1])&&(H.x+=I[0],H.y+=I[1])}for(var J=0;J<v.length;J++){var K=v[J];a.nodeIsDraggable(K)&&K.grabbed()&&G.merge(K)}a.hoverData.draggingEles=!0,G.silentShift(H).emit("position drag"),a.redrawHint("drag",!0),a.redraw()}}else!function(){var b=a.hoverData.dragDelta=a.hoverData.dragDelta||[];0===b.length?(b.push(u[0]),b.push(u[1])):(b[0]+=u[0],b[1]+=u[1])}();f=!0}else q&&(a.hoverData.dragging||!g.boxSelectionEnabled()||!A&&g.panningEnabled()&&g.userPanningEnabled()?!a.hoverData.selecting&&g.panningEnabled()&&g.userPanningEnabled()&&e(t,a.hoverData.downs)&&(a.hoverData.dragging=!0,a.hoverData.justStartedPan=!0,o[4]=0,a.data.bgActivePosistion=bc(m),a.redrawHint("select",!0),a.redraw()):B(),t&&t.pannable()&&t.active()&&t.unactivate());return o[2]=l[0],o[3]=l[1],f?(b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault(),!1):void 0}},!1),a.registerBinding(window,"mouseup",function(e){if(a.hoverData.capture){a.hoverData.capture=!1;var f=a.cy,g=a.projectIntoViewport(e.clientX,e.clientY),h=a.selection,i=a.findNearestElement(g[0],g[1],!0,!1),j=a.dragData.possibleDragElements,l=a.hoverData.down,m=d(e);if(a.data.bgActivePosistion&&(a.redrawHint("select",!0),a.redraw()),a.hoverData.tapholdCancelled=!0,a.data.bgActivePosistion=void 0,l&&l.unactivate(),3===a.hoverData.which){var n={originalEvent:e,type:"cxttapend",position:{x:g[0],y:g[1]}};if(l?l.emit(n):f.emit(n),!a.hoverData.cxtDragged){var o={originalEvent:e,type:"cxttap",position:{x:g[0],y:g[1]}};l?l.emit(o):f.emit(o)}a.hoverData.cxtDragged=!1,a.hoverData.which=null}else if(1===a.hoverData.which){if(c(i,["mouseup","tapend","vmouseup"],e,{x:g[0],y:g[1]}),a.dragData.didDrag||a.hoverData.dragged||a.hoverData.selecting||a.hoverData.isOverThresholdDrag||c(l,["click","tap","vclick"],e,{x:g[0],y:g[1]}),null!=l||a.dragData.didDrag||a.hoverData.selecting||a.hoverData.dragged||d(e)||(f.$(b).unselect(["tapunselect"]),j.length>0&&a.redrawHint("eles",!0),a.dragData.possibleDragElements=j=f.collection()),i!=l||a.dragData.didDrag||a.hoverData.selecting||null!=i&&i._private.selectable&&(a.hoverData.dragging||("additive"===f.selectionType()||m?i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]):m||(f.$(b).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"]))),a.redrawHint("eles",!0)),a.hoverData.selecting){var p=f.collection(a.getAllInBox(h[0],h[1],h[2],h[3]));a.redrawHint("select",!0),p.length>0&&a.redrawHint("eles",!0),f.emit({type:"boxend",originalEvent:e,position:{x:g[0],y:g[1]}});var q=function(a){return a.selectable()&&!a.selected()};"additive"===f.selectionType()?p.emit("box").stdFilter(q).select().emit("boxselect"):(m||f.$(b).unmerge(p).unselect(),p.emit("box").stdFilter(q).select().emit("boxselect")),a.redraw()}if(a.hoverData.dragging&&(a.hoverData.dragging=!1,a.redrawHint("select",!0),a.redrawHint("eles",!0),a.redraw()),!h[4]){a.redrawHint("drag",!0),a.redrawHint("eles",!0);var r=l&&l.grabbed();k(j),r&&(l.emit("freeon"),j.emit("free"),a.dragData.didDrag&&(l.emit("dragfreeon"),j.emit("dragfree")))}}h[4]=0,a.hoverData.down=null,a.hoverData.cxtStarted=!1,a.hoverData.draggingEles=!1,a.hoverData.selecting=!1,a.hoverData.isOverThresholdDrag=!1,a.dragData.didDrag=!1,a.hoverData.dragged=!1,a.hoverData.dragDelta=[],a.hoverData.mdownPos=null,a.hoverData.mdownGPos=null}},!1);var s,t,u,v,w,x,y,z,A,B,C,D,E;a.registerBinding(a.container,"wheel",function(b){if(!a.scrollingPage){var c,d=a.cy,e=a.projectIntoViewport(b.clientX,b.clientY),f=[e[0]*d.zoom()+d.pan().x,e[1]*d.zoom()+d.pan().y];a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.cxtStarted||0!==a.selection[4]?b.preventDefault():d.panningEnabled()&&d.userPanningEnabled()&&d.zoomingEnabled()&&d.userZoomingEnabled()&&(b.preventDefault(),a.data.wheelZooming=!0,clearTimeout(a.data.wheelTimeout),a.data.wheelTimeout=setTimeout(function(){a.data.wheelZooming=!1,a.redrawHint("eles",!0),a.redraw()},150),c=null!=b.deltaY?b.deltaY/-250:null!=b.wheelDeltaY?b.wheelDeltaY/1e3:b.wheelDelta/1e3,c*=a.wheelSensitivity,1===b.deltaMode&&(c*=33),d.zoom({level:d.zoom()*Math.pow(10,c),renderedPosition:{x:f[0],y:f[1]}}))}},!0),a.registerBinding(window,"scroll",function(b){a.scrollingPage=!0,clearTimeout(a.scrollingPageTimeout),a.scrollingPageTimeout=setTimeout(function(){a.scrollingPage=!1},250)},!0),a.registerBinding(a.container,"mouseout",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.emit({originalEvent:b,type:"mouseout",position:{x:c[0],y:c[1]}})},!1),a.registerBinding(a.container,"mouseover",function(b){var c=a.projectIntoViewport(b.clientX,b.clientY);a.cy.emit({originalEvent:b,type:"mouseover",position:{x:c[0],y:c[1]}})},!1);var F,G,H,I,J=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},K=function(a,b,c,d){return(c-a)*(c-a)+(d-b)*(d-b)};if(a.registerBinding(a.container,"touchstart",F=function(b){if(r(b)){m(),a.touchData.capture=!0,a.data.bgActivePosistion=void 0;var d=a.cy,e=a.touchData.now,f=a.touchData.earlier;if(b.touches[0]){var h=a.projectIntoViewport(b.touches[0].clientX,b.touches[0].clientY);e[0]=h[0],e[1]=h[1]}if(b.touches[1]&&(h=a.projectIntoViewport(b.touches[1].clientX,b.touches[1].clientY),e[2]=h[0],e[3]=h[1]),b.touches[2]&&(h=a.projectIntoViewport(b.touches[2].clientX,b.touches[2].clientY),e[4]=h[0],e[5]=h[1]),b.touches[1]){a.touchData.singleTouchMoved=!0,k(a.dragData.touchDragEles);var l=a.findContainerClientCoords();A=l[0],B=l[1],C=l[2],D=l[3],s=b.touches[0].clientX-A,t=b.touches[0].clientY-B,u=b.touches[1].clientX-A,v=b.touches[1].clientY-B,E=0<=s&&s<=C&&0<=u&&u<=C&&0<=t&&t<=D&&0<=v&&v<=D;var n=d.pan(),o=d.zoom();if(w=J(s,t,u,v),x=K(s,t,u,v),z=[((y=[(s+u)/2,(t+v)/2])[0]-n.x)/o,(y[1]-n.y)/o],x<4e4&&!b.touches[2]){var p=a.findNearestElement(e[0],e[1],!0,!0),q=a.findNearestElement(e[2],e[3],!0,!0);return p&&p.isNode()?(p.activate().emit({originalEvent:b,type:"cxttapstart",position:{x:e[0],y:e[1]}}),a.touchData.start=p):q&&q.isNode()?(q.activate().emit({originalEvent:b,type:"cxttapstart",position:{x:e[0],y:e[1]}}),a.touchData.start=q):d.emit({originalEvent:b,type:"cxttapstart",position:{x:e[0],y:e[1]}}),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!0,a.touchData.cxtDragged=!1,a.data.bgActivePosistion=void 0,void a.redraw()}}if(b.touches[2])d.boxSelectionEnabled()&&b.preventDefault();else if(b.touches[1]);else if(b.touches[0]){var F=a.findNearestElements(e[0],e[1],!0,!0),G=F[0];if(null!=G&&(G.activate(),a.touchData.start=G,a.touchData.starts=F,a.nodeIsGrabbable(G))){var H=a.dragData.touchDragEles=d.collection(),I=null;a.redrawHint("eles",!0),a.redrawHint("drag",!0),G.selected()?(I=d.$(function(b){return b.selected()&&a.nodeIsGrabbable(b)}),i(I,{addToList:H})):j(G,{addToList:H}),g(G);var L=function(a){return{originalEvent:b,type:a,position:{x:e[0],y:e[1]}}};G.emit(L("grabon")),I?I.forEach(function(a){a.emit(L("grab"))}):G.emit(L("grab"))}c(G,["touchstart","tapstart","vmousedown"],b,{x:e[0],y:e[1]}),null==G&&(a.data.bgActivePosistion={x:h[0],y:h[1]},a.redrawHint("select",!0),a.redraw()),a.touchData.singleTouchMoved=!1,a.touchData.singleTouchStartTime=+new Date,clearTimeout(a.touchData.tapholdTimeout),a.touchData.tapholdTimeout=setTimeout(function(){!1!==a.touchData.singleTouchMoved||a.pinching||a.touchData.selecting||c(a.touchData.start,["taphold"],b,{x:e[0],y:e[1]})},a.tapholdDuration)}if(b.touches.length>=1){for(var M=a.touchData.startPosition=[],N=0;N<e.length;N++)M[N]=f[N]=e[N];var O=b.touches[0];a.touchData.startGPosition=[O.clientX,O.clientY]}}},!1),a.registerBinding(window,"touchmove",G=function(b){var d=a.touchData.capture;if(d||r(b)){var f=a.selection,g=a.cy,h=a.touchData.now,j=a.touchData.earlier,l=g.zoom();if(b.touches[0]){var m=a.projectIntoViewport(b.touches[0].clientX,b.touches[0].clientY);h[0]=m[0],h[1]=m[1]}b.touches[1]&&(m=a.projectIntoViewport(b.touches[1].clientX,b.touches[1].clientY),h[2]=m[0],h[3]=m[1]),b.touches[2]&&(m=a.projectIntoViewport(b.touches[2].clientX,b.touches[2].clientY),h[4]=m[0],h[5]=m[1]);var n,o=a.touchData.startGPosition;if(d&&b.touches[0]&&o){for(var p=[],q=0;q<h.length;q++)p[q]=h[q]-j[q];var y=b.touches[0].clientX-o[0],C=y*y,D=b.touches[0].clientY-o[1];n=C+D*D>=a.touchTapThreshold2}if(d&&a.touchData.cxt){b.preventDefault();var F=b.touches[0].clientX-A,G=b.touches[0].clientY-B,H=b.touches[1].clientX-A,I=b.touches[1].clientY-B,L=K(F,G,H,I);if(L/x>=2.25||L>=22500){a.touchData.cxt=!1,a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var M={originalEvent:b,type:"cxttapend",position:{x:h[0],y:h[1]}};a.touchData.start?(a.touchData.start.unactivate().emit(M),a.touchData.start=null):g.emit(M)}}if(d&&a.touchData.cxt){M={originalEvent:b,type:"cxtdrag",position:{x:h[0],y:h[1]}},a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.touchData.start?a.touchData.start.emit(M):g.emit(M),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxtDragged=!0;var N=a.findNearestElement(h[0],h[1],!0,!0);a.touchData.cxtOver&&N===a.touchData.cxtOver||(a.touchData.cxtOver&&a.touchData.cxtOver.emit({originalEvent:b,type:"cxtdragout",position:{x:h[0],y:h[1]}}),a.touchData.cxtOver=N,N&&N.emit({originalEvent:b,type:"cxtdragover",position:{x:h[0],y:h[1]}}))}else if(d&&b.touches[2]&&g.boxSelectionEnabled())b.preventDefault(),a.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,a.touchData.selecting||g.emit({originalEvent:b,type:"boxstart",position:{x:h[0],y:h[1]}}),a.touchData.selecting=!0,a.touchData.didSelect=!0,f[4]=1,f&&0!==f.length&&void 0!==f[0]?(f[2]=(h[0]+h[2]+h[4])/3,f[3]=(h[1]+h[3]+h[5])/3):(f[0]=(h[0]+h[2]+h[4])/3,f[1]=(h[1]+h[3]+h[5])/3,f[2]=(h[0]+h[2]+h[4])/3+1,f[3]=(h[1]+h[3]+h[5])/3+1),a.redrawHint("select",!0),a.redraw();else if(d&&b.touches[1]&&!a.touchData.didSelect&&g.zoomingEnabled()&&g.panningEnabled()&&g.userZoomingEnabled()&&g.userPanningEnabled()){if(b.preventDefault(),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),_=a.dragData.touchDragEles){a.redrawHint("drag",!0);for(var O=0;O<_.length;O++){var P=_[O]._private;P.grabbed=!1,P.rscratch.inDragLayer=!1}}var Q=a.touchData.start,R=(F=b.touches[0].clientX-A,G=b.touches[0].clientY-B,H=b.touches[1].clientX-A,I=b.touches[1].clientY-B,J(F,G,H,I)),S=R/w;if(E){var T=(F-s+(H-u))/2,U=(G-t+(I-v))/2,V=g.zoom(),W=V*S,X=g.pan(),Y=z[0]*V+X.x,Z=z[1]*V+X.y,$={x:-W/V*(Y-X.x-T)+Y,y:-W/V*(Z-X.y-U)+Z};if(Q&&Q.active()){var _=a.dragData.touchDragEles;k(_),a.redrawHint("drag",!0),a.redrawHint("eles",!0),Q.unactivate().emit("freeon"),_.emit("free"),a.dragData.didDrag&&(Q.emit("dragfreeon"),_.emit("dragfree"))}g.viewport({zoom:W,pan:$,cancelOnFailedZoom:!0}),w=R,s=F,t=G,u=H,v=I,a.pinching=!0}b.touches[0]&&(m=a.projectIntoViewport(b.touches[0].clientX,b.touches[0].clientY),h[0]=m[0],h[1]=m[1]),b.touches[1]&&(m=a.projectIntoViewport(b.touches[1].clientX,b.touches[1].clientY),h[2]=m[0],h[3]=m[1]),b.touches[2]&&(m=a.projectIntoViewport(b.touches[2].clientX,b.touches[2].clientY),h[4]=m[0],h[5]=m[1])}else if(b.touches[0]&&!a.touchData.didSelect){var aa=a.touchData.start,ba=a.touchData.last;if(a.hoverData.draggingEles||a.swipePanning||(N=a.findNearestElement(h[0],h[1],!0,!0)),d&&null!=aa&&b.preventDefault(),d&&null!=aa&&a.nodeIsDraggable(aa))if(n){_=a.dragData.touchDragEles;var ca=!a.dragData.didDrag;ca&&i(_,{inDragLayer:!0}),a.dragData.didDrag=!0;var da={x:0,y:0};qa(p[0])&&qa(p[1])&&(da.x+=p[0],da.y+=p[1],ca&&(a.redrawHint("eles",!0),(ea=a.touchData.dragDelta)&&qa(ea[0])&&qa(ea[1])&&(da.x+=ea[0],da.y+=ea[1]))),a.hoverData.draggingEles=!0,_.silentShift(da).emit("position drag"),a.redrawHint("drag",!0),a.touchData.startPosition[0]==j[0]&&a.touchData.startPosition[1]==j[1]&&a.redrawHint("eles",!0),a.redraw()}else{var ea;0===(ea=a.touchData.dragDelta=a.touchData.dragDelta||[]).length?(ea.push(p[0]),ea.push(p[1])):(ea[0]+=p[0],ea[1]+=p[1])}if(c(aa||N,["touchmove","tapdrag","vmousemove"],b,{x:h[0],y:h[1]}),aa&&aa.grabbed()||N==ba||(ba&&ba.emit({originalEvent:b,type:"tapdragout",position:{x:h[0],y:h[1]}}),N&&N.emit({originalEvent:b,type:"tapdragover",position:{x:h[0],y:h[1]}})),a.touchData.last=N,d)for(O=0;O<h.length;O++)h[O]&&a.touchData.startPosition[O]&&n&&(a.touchData.singleTouchMoved=!0);d&&(null==aa||aa.pannable())&&g.panningEnabled()&&g.userPanningEnabled()&&(e(aa,a.touchData.starts)&&(b.preventDefault(),a.data.bgActivePosistion||(a.data.bgActivePosistion=bc(a.touchData.startPosition)),a.swipePanning?g.panBy({x:p[0]*l,y:p[1]*l}):n&&(a.swipePanning=!0,g.panBy({x:y*l,y:D*l}),aa&&(aa.unactivate(),a.redrawHint("select",!0),a.touchData.start=null))),m=a.projectIntoViewport(b.touches[0].clientX,b.touches[0].clientY),h[0]=m[0],h[1]=m[1])}for(q=0;q<h.length;q++)j[q]=h[q];d&&b.touches.length>0&&!a.hoverData.draggingEles&&!a.swipePanning&&null!=a.data.bgActivePosistion&&(a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.redraw())}},!1),a.registerBinding(window,"touchcancel",H=function(b){var c=a.touchData.start;a.touchData.capture=!1,c&&c.unactivate()}),a.registerBinding(window,"touchend",I=function(d){var e=a.touchData.start;if(a.touchData.capture){0===d.touches.length&&(a.touchData.capture=!1),d.preventDefault();var f=a.selection;a.swipePanning=!1,a.hoverData.draggingEles=!1;var g,h=a.cy,i=h.zoom(),j=a.touchData.now,l=a.touchData.earlier;if(d.touches[0]){var m=a.projectIntoViewport(d.touches[0].clientX,d.touches[0].clientY);j[0]=m[0],j[1]=m[1]}if(d.touches[1]&&(m=a.projectIntoViewport(d.touches[1].clientX,d.touches[1].clientY),j[2]=m[0],j[3]=m[1]),d.touches[2]&&(m=a.projectIntoViewport(d.touches[2].clientX,d.touches[2].clientY),j[4]=m[0],j[5]=m[1]),e&&e.unactivate(),a.touchData.cxt){if(g={originalEvent:d,type:"cxttapend",position:{x:j[0],y:j[1]}},e?e.emit(g):h.emit(g),!a.touchData.cxtDragged){var n={originalEvent:d,type:"cxttap",position:{x:j[0],y:j[1]}};e?e.emit(n):h.emit(n)}return a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!1,a.touchData.start=null,void a.redraw()}if(!d.touches[2]&&h.boxSelectionEnabled()&&a.touchData.selecting){a.touchData.selecting=!1;var o=h.collection(a.getAllInBox(f[0],f[1],f[2],f[3]));f[0]=void 0,f[1]=void 0,f[2]=void 0,f[3]=void 0,f[4]=0,a.redrawHint("select",!0),h.emit({type:"boxend",originalEvent:d,position:{x:j[0],y:j[1]}}),o.emit("box").stdFilter(function(a){return a.selectable()&&!a.selected()}).select().emit("boxselect"),o.nonempty()&&a.redrawHint("eles",!0),a.redraw()}if(null!=e&&e.unactivate(),d.touches[2])a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);else if(d.touches[1]);else if(d.touches[0]);else if(!d.touches[0]){a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var p=a.dragData.touchDragEles;if(null!=e){var q=e._private.grabbed;k(p),a.redrawHint("drag",!0),a.redrawHint("eles",!0),q&&(e.emit("freeon"),p.emit("free"),a.dragData.didDrag&&(e.emit("dragfreeon"),p.emit("dragfree"))),c(e,["touchend","tapend","vmouseup","tapdragout"],d,{x:j[0],y:j[1]}),e.unactivate(),a.touchData.start=null}else{var r=a.findNearestElement(j[0],j[1],!0,!0);c(r,["touchend","tapend","vmouseup","tapdragout"],d,{x:j[0],y:j[1]})}var s=a.touchData.startPosition[0]-j[0],t=s*s,u=a.touchData.startPosition[1]-j[1],v=(t+u*u)*i*i;a.touchData.singleTouchMoved||(e||h.$(":selected").unselect(["tapunselect"]),c(e,["tap","vclick"],d,{x:j[0],y:j[1]})),null!=e&&!a.dragData.didDrag&&e._private.selectable&&v<a.touchTapThreshold2&&!a.pinching&&("single"===h.selectionType()?(h.$(b).unmerge(e).unselect(["tapunselect"]),e.select(["tapselect"])):e.selected()?e.unselect(["tapunselect"]):e.select(["tapselect"]),a.redrawHint("eles",!0)),a.touchData.singleTouchMoved=!0}for(var w=0;w<j.length;w++)l[w]=j[w];a.dragData.didDrag=!1,0===d.touches.length&&(a.touchData.dragDelta=[],a.touchData.startPosition=null,a.touchData.startGPosition=null,a.touchData.didSelect=!1),d.touches.length<2&&(1===d.touches.length&&(a.touchData.startGPosition=[d.touches[0].clientX,d.touches[0].clientY]),a.pinching=!1,a.redrawHint("eles",!0),a.redraw())}},!1),"undefined"==typeof TouchEvent){var L=[],M=function(a){return{clientX:a.clientX,clientY:a.clientY,force:1,identifier:a.pointerId,pageX:a.pageX,pageY:a.pageY,radiusX:a.width/2,radiusY:a.height/2,screenX:a.screenX,screenY:a.screenY,target:a.target}},N=function(a){L.push(function(a){return{event:a,touch:M(a)}}(a))},O=function(a){for(var b=0;b<L.length;b++)if(L[b].event.pointerId===a.pointerId)return void L.splice(b,1)},P=function(a){a.touches=L.map(function(a){return a.touch})},Q=function(a){return"mouse"===a.pointerType||4===a.pointerType};a.registerBinding(a.container,"pointerdown",function(a){Q(a)||(a.preventDefault(),N(a),P(a),F(a))}),a.registerBinding(a.container,"pointerup",function(a){Q(a)||(O(a),P(a),I(a))}),a.registerBinding(a.container,"pointercancel",function(a){Q(a)||(O(a),P(a),H())}),a.registerBinding(a.container,"pointermove",function(a){Q(a)||(a.preventDefault(),function(a){var b=L.filter(function(b){return b.event.pointerId===a.pointerId})[0];b.event=a,b.touch=M(a)}(a),P(a),G(a))})}};var uh={generatePolygon:function(a,b){return this.nodeShapes[a]={renderer:this,name:a,points:b,draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl("polygon",a,b,c,d,e,this.points)},intersectLine:function(a,b,c,d,e,f,g){return Hc(e,f,this.points,a,b,c/2,d/2,g)},checkPoint:function(a,b,c,d,e,f,g){return Ac(a,b,this.points,f,g,d,e,[0,-1],c)}}}};uh.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,d,e,f,g){return function(a,b,c,d,e,f){var g=c-a,h=d-b;g/=e,h/=f;var i=Math.sqrt(g*g+h*h),j=i-1;if(j<0)return[];var k=j/i;return[(c-a)*k+a,(d-b)*k+b]}(e,f,a,b,c/2+g,d/2+g)},checkPoint:function(a,b,c,d,e,f,g){return Dc(a,b,d,e,f,g,c)}}},uh.generateRoundPolygon=function(a,b){for(var c=new Array(2*b.length),d=0;d<b.length/2;d++){var e=2*d,f=void 0;f=d<b.length/2-1?2*(d+1):0,c[4*d]=b[e],c[4*d+1]=b[e+1];var g=b[f]-b[e],h=b[f+1]-b[e+1],i=Math.sqrt(g*g+h*h);c[4*d+2]=g/i,c[4*d+3]=h/i}return this.nodeShapes[a]={renderer:this,name:a,points:c,draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl("round-polygon",a,b,c,d,e,this.points)},intersectLine:function(a,b,c,d,e,f,g){return function(a,b,c,d,e,f,g,h){for(var i,j=[],k=new Array(c.length),l=f/2,m=g/2,n=Nc(f,g),o=0;o<c.length/4;o++){var p,q=void 0;q=0===o?c.length-2:4*o-2,p=4*o+2;var r=d+l*c[4*o],s=e+m*c[4*o+1],t=-c[q]*c[p]-c[q+1]*c[p+1],u=n/Math.tan(Math.acos(t)/2),v=r-u*c[q],w=s-u*c[q+1],x=r+u*c[p],y=s+u*c[p+1];0===o?(k[c.length-2]=v,k[c.length-1]=w):(k[4*o-2]=v,k[4*o-1]=w),k[4*o]=x,k[4*o+1]=y;var z=c[q+1],A=-c[q];z*c[p]+A*c[p+1]<0&&(z*=-1,A*=-1),0!==(i=Ec(a,b,d,e,v+z*n,w+A*n,n)).length&&j.push(i[0],i[1])}for(var B=0;B<k.length/4;B++)0!==(i=Gc(a,b,d,e,k[4*B],k[4*B+1],k[4*B+2],k[4*B+3],!1)).length&&j.push(i[0],i[1]);if(j.length>2){for(var C=[j[0],j[1]],D=Math.pow(C[0]-a,2)+Math.pow(C[1]-b,2),E=1;E<j.length/2;E++){var F=Math.pow(j[2*E]-a,2)+Math.pow(j[2*E+1]-b,2);F<=D&&(C[0]=j[2*E],C[1]=j[2*E+1],D=F)}return C}return j}(e,f,this.points,a,b,c,d)},checkPoint:function(a,b,c,d,e,f,g){return function(a,b,c,d,e,f,g){for(var h=new Array(c.length),i=f/2,j=g/2,k=Nc(f,g),l=k*k,m=0;m<c.length/4;m++){var n,o=void 0;o=0===m?c.length-2:4*m-2,n=4*m+2;var p=d+i*c[4*m],q=e+j*c[4*m+1],r=-c[o]*c[n]-c[o+1]*c[n+1],s=k/Math.tan(Math.acos(r)/2),t=p-s*c[o],u=q-s*c[o+1],v=p+s*c[n],w=q+s*c[n+1];h[4*m]=t,h[4*m+1]=u,h[4*m+2]=v,h[4*m+3]=w;var x=c[o+1],y=-c[o];x*c[n]+y*c[n+1]<0&&(x*=-1,y*=-1);var z=t+x*k,A=u+y*k;if(Math.pow(z-a,2)+Math.pow(A-b,2)<=l)return!0}return zc(a,b,h)}(a,b,this.points,f,g,d,e)}}},uh.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Jc(4,0),draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,d,e,f,g){return uc(e,f,a,b,c,d,g)},checkPoint:function(a,b,c,d,e,f,g){var h=Mc(d,e),i=2*h;return!!(Ac(a,b,this.points,f,g,d,e-i,[0,-1],c)||Ac(a,b,this.points,f,g,d-i,e,[0,-1],c)||Dc(a,b,i,i,f-d/2+h,g-e/2+h,c)||Dc(a,b,i,i,f+d/2-h,g-e/2+h,c)||Dc(a,b,i,i,f+d/2-h,g+e/2-h,c)||Dc(a,b,i,i,f-d/2+h,g+e/2-h,c))}}},uh.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Jc(4,0),draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},generateCutTrianglePts:function(a,b,c,d){var e=this.cornerLength,f=b/2,g=a/2,h=c-g,i=c+g,j=d-f,k=d+f;return{topLeft:[h,j+e,h+e,j,h+e,j+e],topRight:[i-e,j,i,j+e,i-e,j+e],bottomRight:[i,k-e,i-e,k,i-e,k-e],bottomLeft:[h+e,k,h,k-e,h+e,k-e]}},intersectLine:function(a,b,c,d,e,f,g){var h=this.generateCutTrianglePts(c+2*g,d+2*g,a,b),i=[].concat.apply([],[h.topLeft.splice(0,4),h.topRight.splice(0,4),h.bottomRight.splice(0,4),h.bottomLeft.splice(0,4)]);return Hc(e,f,i,a,b)},checkPoint:function(a,b,c,d,e,f,g){if(Ac(a,b,this.points,f,g,d,e-2*this.cornerLength,[0,-1],c))return!0;if(Ac(a,b,this.points,f,g,d-2*this.cornerLength,e,[0,-1],c))return!0;var h=this.generateCutTrianglePts(d,e,f,g);return zc(a,b,h.topLeft)||zc(a,b,h.topRight)||zc(a,b,h.bottomRight)||zc(a,b,h.bottomLeft)}}},uh.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Jc(4,0),draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,d,e,f,g){var h=this.generateBarrelBezierPts(c+2*g,d+2*g,a,b),i=function(a){var b=jc({x:a[0],y:a[1]},{x:a[2],y:a[3]},{x:a[4],y:a[5]},.15),c=jc({x:a[0],y:a[1]},{x:a[2],y:a[3]},{x:a[4],y:a[5]},.5),d=jc({x:a[0],y:a[1]},{x:a[2],y:a[3]},{x:a[4],y:a[5]},.85);return[a[0],a[1],b.x,b.y,c.x,c.y,d.x,d.y,a[4],a[5]]},j=[].concat(i(h.topLeft),i(h.topRight),i(h.bottomRight),i(h.bottomLeft));return Hc(e,f,j,a,b)},generateBarrelBezierPts:function(a,b,c,d){var e=b/2,f=a/2,g=c-f,h=c+f,i=d-e,j=d+e,k=Oc(a,b),l=k.heightOffset,m=k.widthOffset,n=k.ctrlPtOffsetPct*a,o={topLeft:[g,i+l,g+n,i,g+m,i],topRight:[h-m,i,h-n,i,h,i+l],bottomRight:[h,j-l,h-n,j,h-m,j],bottomLeft:[g+m,j,g+n,j,g,j-l]};return o.topLeft.isTop=!0,o.topRight.isTop=!0,o.bottomLeft.isBottom=!0,o.bottomRight.isBottom=!0,o},checkPoint:function(a,b,c,d,e,f,g){var h=Oc(d,e),i=h.heightOffset,j=h.widthOffset;if(Ac(a,b,this.points,f,g,d,e-2*i,[0,-1],c))return!0;if(Ac(a,b,this.points,f,g,d-2*j,e,[0,-1],c))return!0;for(var k=this.generateBarrelBezierPts(d,e,f,g),l=function(a,b,c){var d,e,f=c[4],g=c[2],h=c[0],i=c[5],j=c[1],k=Math.min(f,h),l=Math.max(f,h),m=Math.min(i,j),n=Math.max(i,j);if(k<=a&&a<=l&&m<=b&&b<=n){var o=[(d=f)-2*(e=g)+h,2*(e-d),d],p=function(a,b,c,d){var e=b*b-4*a*(c-=d);if(e<0)return[];var f=Math.sqrt(e),g=2*a;return[(-b+f)/g,(-b-f)/g]}(o[0],o[1],o[2],a).filter(function(a){return 0<=a&&a<=1});if(p.length>0)return p[0]}return null},m=Object.keys(k),n=0;n<m.length;n++){var o=k[m[n]],p=l(a,b,o);if(null!=p){var q=o[5],r=o[3],s=o[1],t=ic(q,r,s,p);if(o.isTop&&t<=b)return!0;if(o.isBottom&&b<=t)return!0}}return!1}}},uh.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Jc(4,0),draw:function(a,b,c,d,e){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,d,e,f,g){var h=b-(d/2+g),i=Gc(e,f,a,b,a-(c/2+g),h,a+(c/2+g),h,!1);return i.length>0?i:uc(e,f,a,b,c,d,g)},checkPoint:function(a,b,c,d,e,f,g){var h=Mc(d,e),i=2*h;if(Ac(a,b,this.points,f,g,d,e-i,[0,-1],c))return!0;if(Ac(a,b,this.points,f,g,d-i,e,[0,-1],c))return!0;var j=d/2+2*c,k=e/2+2*c;return!!zc(a,b,[f-j,g-k,f-j,g,f+j,g,f+j,g-k])||!!Dc(a,b,i,i,f+d/2-h,g+e/2-h,c)||!!Dc(a,b,i,i,f-d/2+h,g+e/2-h,c)}}},uh.registerNodeShapes=function(){var a=this.nodeShapes={},b=this;this.generateEllipse(),this.generatePolygon("triangle",Jc(3,0)),this.generateRoundPolygon("round-triangle",Jc(3,0)),this.generatePolygon("rectangle",Jc(4,0)),a.square=a.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var c=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",c),this.generateRoundPolygon("round-diamond",c),this.generatePolygon("pentagon",Jc(5,0)),this.generateRoundPolygon("round-pentagon",Jc(5,0)),this.generatePolygon("hexagon",Jc(6,0)),this.generateRoundPolygon("round-hexagon",Jc(6,0)),this.generatePolygon("heptagon",Jc(7,0)),this.generateRoundPolygon("round-heptagon",Jc(7,0)),this.generatePolygon("octagon",Jc(8,0)),this.generateRoundPolygon("round-octagon",Jc(8,0));var d=new Array(20),e=Lc(5,0),f=Lc(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var h=0;h<f.length/2;h++)f[2*h]*=g,f[2*h+1]*=g;for(h=0;h<5;h++)d[4*h]=e[2*h],d[4*h+1]=e[2*h+1],d[4*h+2]=f[2*h],d[4*h+3]=f[2*h+1];d=Kc(d),this.generatePolygon("star",d),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var i=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",i),this.generateRoundPolygon("round-tag",i),a.makePolygon=function(a){var c,d="polygon-"+a.join("$");return(c=this[d])?c:b.generatePolygon(d,a)}};var vh={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(a){a=a||Ab();var b=this;void 0===b.averageRedrawTime&&(b.averageRedrawTime=0),void 0===b.lastRedrawTime&&(b.lastRedrawTime=0),void 0===b.lastDrawTime&&(b.lastDrawTime=0),b.requestedFrame=!0,b.renderOptions=a},beforeRender:function(a,b){if(!this.destroyed){null==b&&ub("Priority is not optional for beforeRender");var c=this.beforeRenderCallbacks;c.push({fn:a,priority:b}),c.sort(function(a,b){return b.priority-a.priority})}}},wh=function(a,b,c){for(var d=a.beforeRenderCallbacks,e=0;e<d.length;e++)d[e].fn(b,c)};vh.startRenderLoop=function(){var a=this,b=a.cy;a.renderLoopStarted||(a.renderLoopStarted=!0,eb(function c(d){if(!a.destroyed){if(b.batching());else if(a.requestedFrame&&!a.skipFrame){wh(a,!0,d);var e=fb();a.render(a.renderOptions);var f=a.lastDrawTime=fb();void 0===a.averageRedrawTime&&(a.averageRedrawTime=f-e),void 0===a.redrawCount&&(a.redrawCount=0),a.redrawCount++,void 0===a.redrawTotalTime&&(a.redrawTotalTime=0);var g=f-e;a.redrawTotalTime+=g,a.lastRedrawTime=g,a.averageRedrawTime=a.averageRedrawTime/2+g/2,a.requestedFrame=!1}else wh(a,!1,d);a.skipFrame=!1,eb(c)}}))};var xh=function(a){this.init(a)},yh=xh.prototype;yh.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],yh.init=function(a){var b=this;b.options=a,b.cy=a.cy;var c=b.container=a.cy.container();if(fa){var d=fa.document,e=d.head,f="__________cytoscape_container",g=null!=d.getElementById("__________cytoscape_stylesheet");if(c.className.indexOf(f)<0&&(c.className=(c.className||"")+" "+f),!g){var h=d.createElement("style");h.id="__________cytoscape_stylesheet",h.innerHTML="."+f+" { position: relative; }",e.insertBefore(h,e.children[0])}"static"===fa.getComputedStyle(c).getPropertyValue("position")&&wb("A Cytoscape container has style position:static and so can not use UI extensions properly")}b.selection=[void 0,void 0,void 0,void 0,0],b.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],b.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},b.dragData={possibleDragElements:[]},b.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},b.redraws=0,b.showFps=a.showFps,b.debug=a.debug,b.hideEdgesOnViewport=a.hideEdgesOnViewport,b.textureOnViewport=a.textureOnViewport,b.wheelSensitivity=a.wheelSensitivity,b.motionBlurEnabled=a.motionBlur,b.forcedPixelRatio=qa(a.pixelRatio)?a.pixelRatio:null,b.motionBlur=a.motionBlur,b.motionBlurOpacity=a.motionBlurOpacity,b.motionBlurTransparency=1-b.motionBlurOpacity,b.motionBlurPxRatio=1,b.mbPxRBlurry=1,b.minMbLowQualFrames=4,b.fullQualityMb=!1,b.clearedForMotionBlur=[],b.desktopTapThreshold=a.desktopTapThreshold,b.desktopTapThreshold2=a.desktopTapThreshold*a.desktopTapThreshold,b.touchTapThreshold=a.touchTapThreshold,b.touchTapThreshold2=a.touchTapThreshold*a.touchTapThreshold,b.tapholdDuration=500,b.bindings=[],b.beforeRenderCallbacks=[],b.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},b.registerNodeShapes(),b.registerArrowShapes(),b.registerCalculationListeners()},yh.notify=function(a,b){var c=this,d=c.cy;this.destroyed||("init"!==a?"destroy"!==a?(("add"===a||"remove"===a||"move"===a&&d.hasCompoundNodes()||"load"===a||"zorder"===a||"mount"===a)&&c.invalidateCachedZSortedEles(),"viewport"===a&&c.redrawHint("select",!0),"load"!==a&&"resize"!==a&&"mount"!==a||(c.invalidateContainerClientCoordsCache(),c.matchCanvasSize(c.container)),c.redrawHint("eles",!0),c.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):c.destroy():c.load())},yh.destroy=function(){var a=this;a.destroyed=!0,a.cy.stopAnimationLoop();for(var b=0;b<a.bindings.length;b++){var c=a.bindings[b],d=c.target;(d.off||d.removeEventListener).apply(d,c.args)}if(a.bindings=[],a.beforeRenderCallbacks=[],a.onUpdateEleCalcsFns=[],a.removeObserver&&a.removeObserver.disconnect(),a.styleObserver&&a.styleObserver.disconnect(),a.resizeObserver&&a.resizeObserver.disconnect(),a.labelCalcDiv)try{document.body.removeChild(a.labelCalcDiv)}catch(a){}},yh.isHeadless=function(){return!1},[eh,rh,sh,th,uh,vh].forEach(function(a){Ha(yh,a)});var zh=function(a){return function(){var b=this,c=this.renderer;if(!b.dequeueingSetup){b.dequeueingSetup=!0;var d=ab(function(){c.redrawHint("eles",!0),c.redrawHint("drag",!0),c.redraw()},a.deqRedrawThreshold),e=a.priority||tb;c.beforeRender(function(e,f){var g=fb(),h=c.averageRedrawTime,i=c.lastRedrawTime,j=[],k=c.cy.extent(),l=c.getPixelRatio();for(e||c.flushRenderedStyleQueue();;){var m=fb(),n=m-g,o=m-f;if(i<1e3/60){var p=1e3/60-(e?h:0);if(o>=a.deqFastCost*p)break}else if(e){if(n>=a.deqCost*i||n>=a.deqAvgCost*h)break}else if(o>=a.deqNoDrawCost*(1e3/60))break;var q=a.deq(b,l,k);if(!(q.length>0))break;for(var r=0;r<q.length;r++)j.push(q[r])}j.length>0&&(a.onDeqd(b,j),!e&&a.shouldRedraw(b,j,l,k)&&d())},e(b))}}},Ah=function(){function a(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rb;b(this,a),this.idsByKey=new Gb,this.keyForId=new Gb,this.cachesByLvl=new Gb,this.lvls=[],this.getKey=c,this.doesEleInvalidateKey=d}return d(a,[{key:"getIdsFor",value:function(a){null==a&&ub("Can not get id list for null key");var b=this.idsByKey,c=this.idsByKey.get(a);return c||(c=new Ib,b.set(a,c)),c}},{key:"addIdForKey",value:function(a,b){null!=a&&this.getIdsFor(a).add(b)}},{key:"deleteIdForKey",value:function(a,b){null!=a&&this.getIdsFor(a).delete(b)}},{key:"getNumberOfIdsForKey",value:function(a){return null==a?0:this.getIdsFor(a).size}},{key:"updateKeyMappingFor",value:function(a){var b=a.id(),c=this.keyForId.get(b),d=this.getKey(a);this.deleteIdForKey(c,b),this.addIdForKey(d,b),this.keyForId.set(b,d)}},{key:"deleteKeyMappingFor",value:function(a){var b=a.id(),c=this.keyForId.get(b);this.deleteIdForKey(c,b),this.keyForId.delete(b)}},{key:"keyHasChangedFor",value:function(a){var b=a.id();return this.keyForId.get(b)!==this.getKey(a)}},{key:"isInvalid",value:function(a){return this.keyHasChangedFor(a)||this.doesEleInvalidateKey(a)}},{key:"getCachesAt",value:function(a){var b=this.cachesByLvl,c=this.lvls,d=b.get(a);return d||(d=new Gb,b.set(a,d),c.push(a)),d}},{key:"getCache",value:function(a,b){return this.getCachesAt(b).get(a)}},{key:"get",value:function(a,b){var c=this.getKey(a),d=this.getCache(c,b);return null!=d&&this.updateKeyMappingFor(a),d}},{key:"getForCachedKey",value:function(a,b){var c=this.keyForId.get(a.id());return this.getCache(c,b)}},{key:"hasCache",value:function(a,b){return this.getCachesAt(b).has(a)}},{key:"has",value:function(a,b){var c=this.getKey(a);return this.hasCache(c,b)}},{key:"setCache",value:function(a,b,c){c.key=a,this.getCachesAt(b).set(a,c)}},{key:"set",value:function(a,b,c){var d=this.getKey(a);this.setCache(d,b,c),this.updateKeyMappingFor(a)}},{key:"deleteCache",value:function(a,b){this.getCachesAt(b).delete(a)}},{key:"delete",value:function(a,b){var c=this.getKey(a);this.deleteCache(c,b)}},{key:"invalidateKey",value:function(a){var b=this;this.lvls.forEach(function(c){return b.deleteCache(a,c)})}},{key:"invalidate",value:function(a){var b=a.id(),c=this.keyForId.get(b);this.deleteKeyMappingFor(a);var d=this.doesEleInvalidateKey(a);return d&&this.invalidateKey(c),d||0===this.getNumberOfIdsForKey(c)}}]),a}(),Bh={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Ch=Bb({getKey:null,doesEleInvalidateKey:rb,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:qb,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Dh=function(a,b){this.renderer=a,this.onDequeues=[];var c=Ch(b);Ha(this,c),this.lookup=new Ah(c.getKey,c.doesEleInvalidateKey),this.setupDequeueing()},Eh=Dh.prototype;Eh.reasons=Bh,Eh.getTextureQueue=function(a){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[a]=this.eleImgCaches[a]||[]},Eh.getRetiredTextureQueue=function(a){var b=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return b[a]=b[a]||[]},Eh.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Mb(function(a,b){return b.reqs-a.reqs})},Eh.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Eh.getElement=function(a,b,c,d,e){var f=this,g=this.renderer,h=g.cy.zoom(),i=this.lookup;if(0===b.w||0===b.h||isNaN(b.w)||isNaN(b.h)||!a.visible())return null;if(!f.allowEdgeTxrCaching&&a.isEdge()||!f.allowParentTxrCaching&&a.isParent())return null;if(null==d&&(d=Math.ceil(dc(h*c))),d<-4)d=-4;else if(h>=7.99||d>3)return null;var j=Math.pow(2,d),k=b.h*j,l=b.w*j,m=g.eleTextBiggerThanMin(a,j);if(!this.isVisible(a,m))return null;var n,o=i.get(a,d);if(o&&o.invalidated&&(o.invalidated=!1,o.texture.invalidatedWidth-=o.width),o)return o;if(n=k<=25?25:k<=50?50:50*Math.ceil(k/50),k>1024||l>1024)return null;var p=f.getTextureQueue(n),q=p[p.length-2],r=function(){return f.recycleTexture(n,l)||f.addTexture(n,l)};q||(q=p[p.length-1]),q||(q=r()),q.width-q.usedWidth<l&&(q=r());for(var s,t=function(a){return a&&a.scaledLabelShown===m},u=e&&e===Bh.dequeue,v=e&&e===Bh.highQuality,w=e&&e===Bh.downscale,x=d+1;x<=3;x++){var y=i.get(a,x);if(y){s=y;break}}var z=s&&s.level===d+1?s:null,A=function(){q.context.drawImage(z.texture.canvas,z.x,0,z.width,z.height,q.usedWidth,0,l,k)};if(q.context.setTransform(1,0,0,1,0,0),q.context.clearRect(q.usedWidth,0,l,n),t(z))A();else if(t(s)){if(!v)return f.queueElement(a,s.level-1),s;for(var B=s.level;B>d;B--)z=f.getElement(a,b,c,B,Bh.downscale);A()}else{var C;if(!u&&!v&&!w)for(var D=d-1;D>=-4;D--){var E=i.get(a,D);if(E){C=E;break}}if(t(C))return f.queueElement(a,d),C;q.context.translate(q.usedWidth,0),q.context.scale(j,j),this.drawElement(q.context,a,b,m,!1),q.context.scale(1/j,1/j),q.context.translate(-q.usedWidth,0)}return o={x:q.usedWidth,texture:q,level:d,scale:j,width:l,height:k,scaledLabelShown:m},q.usedWidth+=Math.ceil(l+8),q.eleCaches.push(o),i.set(a,d,o),f.checkTextureFullness(q),o},Eh.invalidateElements=function(a){for(var b=0;b<a.length;b++)this.invalidateElement(a[b])},Eh.invalidateElement=function(a){var b=this.lookup,c=[];if(b.isInvalid(a)){for(var d=-4;d<=3;d++){var e=b.getForCachedKey(a,d);e&&c.push(e)}if(b.invalidate(a))for(var f=0;f<c.length;f++){var g=c[f],h=g.texture;h.invalidatedWidth+=g.width,g.invalidated=!0,this.checkTextureUtility(h)}this.removeFromQueue(a)}},Eh.checkTextureUtility=function(a){a.invalidatedWidth>=.2*a.width&&this.retireTexture(a)},Eh.checkTextureFullness=function(a){var b=this.getTextureQueue(a.height);a.usedWidth/a.width>.8&&a.fullnessChecks>=10?Cb(b,a):a.fullnessChecks++},Eh.retireTexture=function(a){var b=a.height,c=this.getTextureQueue(b),d=this.lookup;Cb(c,a),a.retired=!0;for(var e=a.eleCaches,f=0;f<e.length;f++){var g=e[f];d.deleteCache(g.key,g.level)}Db(e),this.getRetiredTextureQueue(b).push(a)},Eh.addTexture=function(a,b){var c={};return this.getTextureQueue(a).push(c),c.eleCaches=[],c.height=a,c.width=Math.max(1024,b),c.usedWidth=0,c.invalidatedWidth=0,c.fullnessChecks=0,c.canvas=this.renderer.makeOffscreenCanvas(c.width,c.height),c.context=c.canvas.getContext("2d"),c},Eh.recycleTexture=function(a,b){for(var c=this.getTextureQueue(a),d=this.getRetiredTextureQueue(a),e=0;e<d.length;e++){var f=d[e];if(f.width>=b)return f.retired=!1,f.usedWidth=0,f.invalidatedWidth=0,f.fullnessChecks=0,Db(f.eleCaches),f.context.setTransform(1,0,0,1,0,0),f.context.clearRect(0,0,f.width,f.height),Cb(d,f),c.push(f),f}},Eh.queueElement=function(a,b){var c=this.getElementQueue(),d=this.getElementKeyToQueue(),e=this.getKey(a),f=d[e];if(f)f.level=Math.max(f.level,b),f.eles.merge(a),f.reqs++,c.updateItem(f);else{var g={eles:a.spawn().merge(a),level:b,reqs:1,key:e};c.push(g),d[e]=g}},Eh.dequeue=function(a){for(var b=this.getElementQueue(),c=this.getElementKeyToQueue(),d=[],e=this.lookup,f=0;f<1&&b.size()>0;f++){var g=b.pop(),h=g.key,i=g.eles[0],j=e.hasCache(i,g.level);if(c[h]=null,!j){d.push(g);var k=this.getBoundingBox(i);this.getElement(i,k,a,g.level,Bh.dequeue)}}return d},Eh.removeFromQueue=function(a){var b=this.getElementQueue(),c=this.getElementKeyToQueue(),d=this.getKey(a),e=c[d];null!=e&&(1===e.eles.length?(e.reqs=pb,b.updateItem(e),b.pop(),c[d]=null):e.eles.unmerge(a))},Eh.onDequeue=function(a){this.onDequeues.push(a)},Eh.offDequeue=function(a){Cb(this.onDequeues,a)},Eh.setupDequeueing=zh({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(a,b,c){return a.dequeue(b,c)},onDeqd:function(a,b){for(var c=0;c<a.onDequeues.length;c++)(0,a.onDequeues[c])(b)},shouldRedraw:function(a,b,c,d){for(var e=0;e<b.length;e++)for(var f=b[e].eles,g=0;g<f.length;g++){var h=f[g].boundingBox();if(rc(h,d))return!0}return!1},priority:function(a){return a.renderer.beforeRenderPriorities.eleTxrDeq}});var Fh=function(a){var b=this,c=b.renderer=a,d=c.cy;b.layersByLevel={},b.firstGet=!0,b.lastInvalidationTime=fb()-500,b.skipping=!1,b.eleTxrDeqs=d.collection(),b.scheduleElementRefinement=ab(function(){b.refineElementTextures(b.eleTxrDeqs),b.eleTxrDeqs.unmerge(b.eleTxrDeqs)},50),c.beforeRender(function(a,c){c-b.lastInvalidationTime<=250?b.skipping=!0:b.skipping=!1},c.beforeRenderPriorities.lyrTxrSkip),b.layersQueue=new Mb(function(a,b){return b.reqs-a.reqs}),b.setupDequeueing()},Gh=Fh.prototype,Hh=0,Ih=Math.pow(2,53)-1;Gh.makeLayer=function(a,b){var c=Math.pow(2,b),d=Math.ceil(a.w*c),e=Math.ceil(a.h*c),f=this.renderer.makeOffscreenCanvas(d,e),g={id:Hh=++Hh%Ih,bb:a,level:b,width:d,height:e,canvas:f,context:f.getContext("2d"),eles:[],elesQueue:[],reqs:0},h=g.context,i=-g.bb.x1,j=-g.bb.y1;return h.scale(c,c),h.translate(i,j),g},Gh.getLayers=function(a,b,c){var d=this,e=d.renderer.cy.zoom(),f=d.firstGet;if(d.firstGet=!1,null==c)if((c=Math.ceil(dc(e*b)))<-4)c=-4;else if(e>=3.99||c>2)return null;d.validateLayersElesOrdering(c,a);var g,h,i=d.layersByLevel,j=Math.pow(2,c),k=i[c]=i[c]||[];if(d.levelIsComplete(c,a))return k;!function(){var b=function(b){if(d.validateLayersElesOrdering(b,a),d.levelIsComplete(b,a))return h=i[b],!0},e=function(a){if(!h)for(var d=c+a;-4<=d&&d<=2&&!b(d);d+=a);};e(1),e(-1);for(var f=k.length-1;f>=0;f--){var g=k[f];g.invalid&&Cb(k,g)}}();var l=function(b){var e=(b=b||{}).after;if(function(){if(!g){g=lc();for(var b=0;b<a.length;b++)c=g,d=a[b].boundingBox(),c.x1=Math.min(c.x1,d.x1),c.x2=Math.max(c.x2,d.x2),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,d.y1),c.y2=Math.max(c.y2,d.y2),c.h=c.y2-c.y1}var c,d}(),g.w*j*(g.h*j)>16e6)return null;var f=d.makeLayer(g,c);if(null!=e){var h=k.indexOf(e)+1;k.splice(h,0,f)}else(void 0===b.insert||b.insert)&&k.unshift(f);return f};if(d.skipping&&!f)return null;for(var m=null,n=a.length/1,o=!f,p=0;p<a.length;p++){var q=a[p],r=q._private.rscratch,s=r.imgLayerCaches=r.imgLayerCaches||{},t=s[c];if(t)m=t;else{if((!m||m.eles.length>=n||!tc(m.bb,q.boundingBox()))&&!(m=l({insert:!0,after:m})))return null;h||o?d.queueLayer(m,q):d.drawEleInLayer(m,q,c,b),m.eles.push(q),s[c]=m}}return h||(o?null:k)},Gh.getEleLevelForLayerLevel=function(a,b){return a},Gh.drawEleInLayer=function(a,b,c,d){var e=this.renderer,f=a.context,g=b.boundingBox();0!==g.w&&0!==g.h&&b.visible()&&(c=this.getEleLevelForLayerLevel(c,d),e.setImgSmoothing(f,!1),e.drawCachedElement(f,b,null,null,c,!0),e.setImgSmoothing(f,!0))},Gh.levelIsComplete=function(a,b){var c=this.layersByLevel[a];if(!c||0===c.length)return!1;for(var d=0,e=0;e<c.length;e++){var f=c[e];if(f.reqs>0)return!1;if(f.invalid)return!1;d+=f.eles.length}return d===b.length},Gh.validateLayersElesOrdering=function(a,b){var c=this.layersByLevel[a];if(c)for(var d=0;d<c.length;d++){for(var e=c[d],f=-1,g=0;g<b.length;g++)if(e.eles[0]===b[g]){f=g;break}if(f<0)this.invalidateLayer(e);else{var h=f;for(g=0;g<e.eles.length;g++)if(e.eles[g]!==b[h+g]){this.invalidateLayer(e);break}}}},Gh.updateElementsInLayers=function(a,b){for(var c=ta(a[0]),d=0;d<a.length;d++)for(var e=c?null:a[d],f=c?a[d]:a[d].ele,g=f._private.rscratch,h=g.imgLayerCaches=g.imgLayerCaches||{},i=-4;i<=2;i++){var j=h[i];j&&(e&&this.getEleLevelForLayerLevel(j.level)!==e.level||b(j,f,e))}},Gh.haveLayers=function(){for(var a=!1,b=-4;b<=2;b++){var c=this.layersByLevel[b];if(c&&c.length>0){a=!0;break}}return a},Gh.invalidateElements=function(a){var b=this;0!==a.length&&(b.lastInvalidationTime=fb(),0!==a.length&&b.haveLayers()&&b.updateElementsInLayers(a,function(a,c,d){b.invalidateLayer(a)}))},Gh.invalidateLayer=function(a){if(this.lastInvalidationTime=fb(),!a.invalid){var b=a.level,c=a.eles,d=this.layersByLevel[b];Cb(d,a),a.elesQueue=[],a.invalid=!0,a.replacement&&(a.replacement.invalid=!0);for(var e=0;e<c.length;e++){var f=c[e]._private.rscratch.imgLayerCaches;f&&(f[b]=null)}}},Gh.refineElementTextures=function(a){var b=this;b.updateElementsInLayers(a,function(a,c,d){var e=a.replacement;if(e||((e=a.replacement=b.makeLayer(a.bb,a.level)).replaces=a,e.eles=a.eles),!e.reqs)for(var f=0;f<e.eles.length;f++)b.queueLayer(e,e.eles[f])})},Gh.enqueueElementRefinement=function(a){this.eleTxrDeqs.merge(a),this.scheduleElementRefinement()},Gh.queueLayer=function(a,b){var c=this.layersQueue,d=a.elesQueue,e=d.hasId=d.hasId||{};if(!a.replacement){if(b){if(e[b.id()])return;d.push(b),e[b.id()]=!0}a.reqs?(a.reqs++,c.updateItem(a)):(a.reqs=1,c.push(a))}},Gh.dequeue=function(a){for(var b=this.layersQueue,c=[],d=0;d<1&&0!==b.size();){var e=b.peek();if(e.replacement)b.pop();else if(e.replaces&&e!==e.replaces.replacement)b.pop();else if(e.invalid)b.pop();else{var f=e.elesQueue.shift();f&&(this.drawEleInLayer(e,f,e.level,a),d++),0===c.length&&c.push(!0),0===e.elesQueue.length&&(b.pop(),e.reqs=0,e.replaces&&this.applyLayerReplacement(e),this.requestRedraw())}}return c},Gh.applyLayerReplacement=function(a){var b=this.layersByLevel[a.level],c=a.replaces,d=b.indexOf(c);if(!(d<0||c.invalid)){b[d]=a;for(var e=0;e<a.eles.length;e++){var f=a.eles[e]._private,g=f.imgLayerCaches=f.imgLayerCaches||{};g&&(g[a.level]=a)}this.requestRedraw()}},Gh.requestRedraw=ab(function(){var a=this.renderer;a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},100),Gh.setupDequeueing=zh({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(a,b){return a.dequeue(b)},onDeqd:tb,shouldRedraw:qb,priority:function(a){return a.renderer.beforeRenderPriorities.lyrTxrDeq}});var Jh,Kh={};Kh.arrowShapeImpl=function(a){return(Jh||(Jh={polygon:V,"triangle-backcurve":W,"triangle-tee":X,"triangle-cross":X,circle:Y}))[a]};var Lh={drawElement:function(a,b,c,d,e,f){b.isNode()?this.drawNode(a,b,c,d,e,f):this.drawEdge(a,b,c,d,e,f)},drawElementOverlay:function(a,b){b.isNode()?this.drawNodeOverlay(a,b):this.drawEdgeOverlay(a,b)},drawCachedElementPortion:function(a,b,c,d,e,f,g,h){var i=this,j=c.getBoundingBox(b);if(0!==j.w&&0!==j.h){var k=c.getElement(b,j,d,e,f);if(null!=k){var l=h(i,b);if(0===l)return;var m,n,o,p,q,r,s=g(i,b),t=j.x1,u=j.y1,v=j.w,w=j.h;if(0!==s){var x=c.getRotationPoint(b);o=x.x,p=x.y,a.translate(o,p),a.rotate(s),(q=i.getImgSmoothing(a))||i.setImgSmoothing(a,!0);var y=c.getRotationOffset(b);m=y.x,n=y.y}else m=t,n=u;1!==l&&(r=a.globalAlpha,a.globalAlpha=r*l),a.drawImage(k.texture.canvas,k.x,0,k.width,k.height,m,n,v,w),1!==l&&(a.globalAlpha=r),0!==s&&(a.rotate(-s),a.translate(-o,-p),q||i.setImgSmoothing(a,!1))}else c.drawElement(a,b)}}},Mh=function(){return 0},Nh=function(a,b){return a.getTextAngle(b,null)},Oh=function(a,b){return a.getTextAngle(b,"source")},Ph=function(a,b){return a.getTextAngle(b,"target")},Qh=function(a,b){return b.effectiveOpacity()},Rh=function(a,b){return b.pstyle("text-opacity").pfValue*b.effectiveOpacity()};Lh.drawCachedElement=function(a,b,c,d,e,f){var g=this,h=g.data,i=h.eleTxrCache,j=h.lblTxrCache,k=h.slbTxrCache,l=h.tlbTxrCache,m=b.boundingBox(),n=!0===f?i.reasons.highQuality:null;if(0!==m.w&&0!==m.h&&b.visible()&&(!d||rc(m,d))){var o=b.isEdge(),p=b.element()._private.rscratch.badLine;g.drawCachedElementPortion(a,b,i,c,e,n,Mh,Qh),o&&p||g.drawCachedElementPortion(a,b,j,c,e,n,Nh,Rh),o&&!p&&(g.drawCachedElementPortion(a,b,k,c,e,n,Oh,Rh),g.drawCachedElementPortion(a,b,l,c,e,n,Ph,Rh)),g.drawElementOverlay(a,b)}},Lh.drawElements=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];this.drawElement(a,d)}},Lh.drawCachedElements=function(a,b,c,d){for(var e=0;e<b.length;e++){var f=b[e];this.drawCachedElement(a,f,c,d)}},Lh.drawCachedNodes=function(a,b,c,d){for(var e=0;e<b.length;e++){var f=b[e];f.isNode()&&this.drawCachedElement(a,f,c,d)}},Lh.drawLayeredElements=function(a,b,c,d){var e=this.data.lyrTxrCache.getLayers(b,c);if(e)for(var f=0;f<e.length;f++){var g=e[f],h=g.bb;0!==h.w&&0!==h.h&&a.drawImage(g.canvas,h.x1,h.y1,h.w,h.h)}else this.drawCachedElements(a,b,c,d)};var Sh={drawEdge:function(a,b,c){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,h=b._private.rscratch;if((!f||b.visible())&&!h.badLine&&null!=h.allpts&&!isNaN(h.allpts[0])){var i;c&&(i=c,a.translate(-i.x1,-i.y1));var j=f?b.pstyle("opacity").value:1,k=b.pstyle("line-style").value,l=b.pstyle("width").pfValue,m=b.pstyle("line-cap").value,n=function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;a.lineWidth=l,a.lineCap=m,g.eleStrokeStyle(a,b,c),g.drawEdgePath(b,a,h.allpts,k),a.lineCap="butt"},o=function(){e&&g.drawEdgeOverlay(a,b)},p=function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;g.drawArrowheads(a,b,c)},q=function(){g.drawElementText(a,b,null,d)};a.lineJoin="round";if("yes"===b.pstyle("ghost").value){var r=b.pstyle("ghost-offset-x").pfValue,s=b.pstyle("ghost-offset-y").pfValue,t=b.pstyle("ghost-opacity").value,u=j*t;a.translate(r,s),n(u),p(u),a.translate(-r,-s)}n(),p(),o(),q(),c&&a.translate(i.x1,i.y1)}},drawEdgeOverlay:function(a,b){if(b.visible()){var c=b.pstyle("overlay-opacity").value;if(0!==c){var d=this,e=d.usePaths(),f=b._private.rscratch,g=2*b.pstyle("overlay-padding").pfValue,h=b.pstyle("overlay-color").value;a.lineWidth=g,"self"!==f.edgeType||e?a.lineCap="round":a.lineCap="butt",d.colorStrokeStyle(a,h[0],h[1],h[2],c),d.drawEdgePath(b,a,f.allpts,"solid")}}},drawEdgePath:function(a,b,c,d){var e,f=a._private.rscratch,g=b,h=!1,i=this.usePaths(),j=a.pstyle("line-dash-pattern").pfValue,k=a.pstyle("line-dash-offset").pfValue;if(i){var l=c.join("$");f.pathCacheKey&&f.pathCacheKey===l?(e=b=f.pathCache,h=!0):(e=b=new Path2D,f.pathCacheKey=l,f.pathCache=e)}if(g.setLineDash)switch(d){case"dotted":g.setLineDash([1,1]);break;case"dashed":g.setLineDash(j),g.lineDashOffset=k;break;case"solid":g.setLineDash([])}if(!h&&!f.badLine)switch(b.beginPath&&b.beginPath(),b.moveTo(c[0],c[1]),f.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var m=2;m+3<c.length;m+=4)b.quadraticCurveTo(c[m],c[m+1],c[m+2],c[m+3]);break;case"straight":case"segments":case"haystack":for(var n=2;n+1<c.length;n+=2)b.lineTo(c[n],c[n+1])}b=g,i?b.stroke(e):b.stroke(),b.setLineDash&&b.setLineDash([])},drawArrowheads:function(a,b,c){var d=b._private.rscratch,e="haystack"===d.edgeType;e||this.drawArrowhead(a,b,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle,c),this.drawArrowhead(a,b,"mid-target",d.midX,d.midY,d.midtgtArrowAngle,c),this.drawArrowhead(a,b,"mid-source",d.midX,d.midY,d.midsrcArrowAngle,c),e||this.drawArrowhead(a,b,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle,c)},drawArrowhead:function(a,b,c,d,e,f,g){if(!(isNaN(d)||null==d||isNaN(e)||null==e||isNaN(f)||null==f)){var h=b.pstyle(c+"-arrow-shape").value;if("none"!==h){var i="hollow"===b.pstyle(c+"-arrow-fill").value?"both":"filled",j=b.pstyle(c+"-arrow-fill").value,k=b.pstyle("width").pfValue,l=b.pstyle("opacity").value;void 0===g&&(g=l);var m=a.globalCompositeOperation;1===g&&"hollow"!==j||(a.globalCompositeOperation="destination-out",this.colorFillStyle(a,255,255,255,1),this.colorStrokeStyle(a,255,255,255,1),this.drawArrowShape(b,a,i,k,h,d,e,f),a.globalCompositeOperation=m);var n=b.pstyle(c+"-arrow-color").value;this.colorFillStyle(a,n[0],n[1],n[2],g),this.colorStrokeStyle(a,n[0],n[1],n[2],g),this.drawArrowShape(b,a,j,k,h,d,e,f)}}},drawArrowShape:function(a,b,c,d,e,f,g,h){var i,j=this,k=this.usePaths()&&"triangle-cross"!==e,l=!1,m=b,n={x:f,y:g},o=a.pstyle("arrow-scale").value,p=this.getArrowWidth(d,o),q=j.arrowShapes[e];if(k){var r=j.arrowPathCache=j.arrowPathCache||[],s=jb(e),t=r[s];null!=t?(i=b=t,l=!0):(i=b=new Path2D,r[s]=i)}b.beginPath&&b.beginPath(),l||(k?q.draw(b,1,0,{x:0,y:0},1):q.draw(b,p,h,n,d)),b.closePath&&b.closePath(),b=m,k&&(b.translate(f,g),b.rotate(h),b.scale(p,p)),"filled"!==c&&"both"!==c||(k?b.fill(i):b.fill()),"hollow"!==c&&"both"!==c||(b.lineWidth=(q.matchEdgeWidth?d:1)/(k?p:1),b.lineJoin="miter",k?b.stroke(i):b.stroke()),k&&(b.scale(1/p,1/p),b.rotate(-h),b.translate(-f,-g))}},Th={safeDrawImage:function(a,b,c,d,e,f,g,h,i,j){e<=0||f<=0||i<=0||j<=0||a.drawImage(b,c,d,e,f,g,h,i,j)},drawInscribedImage:function(a,b,c,d,e){var f=this,g=c.position(),h=g.x,i=g.y,j=c.cy().style(),k=j.getIndexedStyle.bind(j),l=k(c,"background-fit","value",d),m=k(c,"background-repeat","value",d),n=c.width(),o=c.height(),p=2*c.padding(),q=n+("inner"===k(c,"background-width-relative-to","value",d)?0:p),r=o+("inner"===k(c,"background-height-relative-to","value",d)?0:p),s=c._private.rscratch,t="node"===k(c,"background-clip","value",d),u=k(c,"background-image-opacity","value",d)*e,v=b.width||b.cachedW,w=b.height||b.cachedH;null!=v&&null!=w||(document.body.appendChild(b),v=b.cachedW=b.width||b.offsetWidth,w=b.cachedH=b.height||b.offsetHeight,document.body.removeChild(b));var x=v,y=w;if("auto"!==k(c,"background-width","value",d)&&(x="%"===k(c,"background-width","units",d)?k(c,"background-width","pfValue",d)*q:k(c,"background-width","pfValue",d)),"auto"!==k(c,"background-height","value",d)&&(y="%"===k(c,"background-height","units",d)?k(c,"background-height","pfValue",d)*r:k(c,"background-height","pfValue",d)),0!==x&&0!==y){if("contain"===l)x*=z=Math.min(q/x,r/y),y*=z;else if("cover"===l){var z;x*=z=Math.max(q/x,r/y),y*=z}var A=h-q/2,B=k(c,"background-position-x","units",d),C=k(c,"background-position-x","pfValue",d);A+="%"===B?(q-x)*C:C;var D=k(c,"background-offset-x","units",d),E=k(c,"background-offset-x","pfValue",d);A+="%"===D?(q-x)*E:E;var F=i-r/2,G=k(c,"background-position-y","units",d),H=k(c,"background-position-y","pfValue",d);F+="%"===G?(r-y)*H:H;var I=k(c,"background-offset-y","units",d),J=k(c,"background-offset-y","pfValue",d);F+="%"===I?(r-y)*J:J,s.pathCache&&(A-=h,F-=i,h=0,i=0);var K=a.globalAlpha;if(a.globalAlpha=u,"no-repeat"===m)t&&(a.save(),s.pathCache?a.clip(s.pathCache):(f.nodeShapes[f.getNodeShape(c)].draw(a,h,i,q,r),a.clip())),f.safeDrawImage(a,b,0,0,v,w,A,F,x,y),t&&a.restore();else{var L=a.createPattern(b,m);a.fillStyle=L,f.nodeShapes[f.getNodeShape(c)].draw(a,h,i,q,r),a.translate(A,F),a.fill(),a.translate(-A,-F)}a.globalAlpha=K}}},Uh={};Uh.eleTextBiggerThanMin=function(a,b){if(!b){var c=a.cy().zoom(),d=this.getPixelRatio(),e=Math.ceil(dc(c*d));b=Math.pow(2,e)}return!(a.pstyle("font-size").pfValue*b<a.pstyle("min-zoomed-font-size").pfValue)},Uh.drawElementText=function(a,b,c,d,e){var f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this;if(null==d){if(f&&!g.eleTextBiggerThanMin(b))return}else if(!1===d)return;if(b.isNode()){var h=b.pstyle("label");if(!h||!h.value)return;var i=g.getLabelJustification(b);a.textAlign=i,a.textBaseline="bottom"}else{var j=b.element()._private.rscratch.badLine,k=b.pstyle("label"),l=b.pstyle("source-label"),m=b.pstyle("target-label");if(j||(!k||!k.value)&&(!l||!l.value)&&(!m||!m.value))return;a.textAlign="center",a.textBaseline="bottom"}var n,o=!c;c&&(n=c,a.translate(-n.x1,-n.y1)),null==e?(g.drawText(a,b,null,o,f),b.isEdge()&&(g.drawText(a,b,"source",o,f),g.drawText(a,b,"target",o,f))):g.drawText(a,b,e,o,f),c&&a.translate(n.x1,n.y1)},Uh.getFontCache=function(a){var b;this.fontCaches=this.fontCaches||[];for(var c=0;c<this.fontCaches.length;c++)if((b=this.fontCaches[c]).context===a)return b;return b={context:a},this.fontCaches.push(b),b},Uh.setupTextStyle=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=b.pstyle("font-style").strValue,e=b.pstyle("font-size").pfValue+"px",f=b.pstyle("font-family").strValue,g=b.pstyle("font-weight").strValue,h=c?b.effectiveOpacity()*b.pstyle("text-opacity").value:1,i=b.pstyle("text-outline-opacity").value*h,j=b.pstyle("color").value,k=b.pstyle("text-outline-color").value;a.font=d+" "+g+" "+e+" "+f,a.lineJoin="round",this.colorFillStyle(a,j[0],j[1],j[2],h),this.colorStrokeStyle(a,k[0],k[1],k[2],i)},Uh.getTextAngle=function(a,b){var c=a._private.rscratch,d=b?b+"-":"",e=a.pstyle(d+"text-rotation"),f=Eb(c,"labelAngle",b);return"autorotate"===e.strValue?a.isEdge()?f:0:"none"===e.strValue?0:e.pfValue},Uh.drawText=function(a,b,c){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=b._private,g=f.rscratch,h=e?b.effectiveOpacity():1;if(!e||0!==h&&0!==b.pstyle("text-opacity").value){"main"===c&&(c=null);var i,j,k=Eb(g,"labelX",c),l=Eb(g,"labelY",c),m=this.getLabelText(b,c);if(null!=m&&""!==m&&!isNaN(k)&&!isNaN(l)){this.setupTextStyle(a,b,e);var n,o=c?c+"-":"",p=Eb(g,"labelWidth",c),q=Eb(g,"labelHeight",c),r=b.pstyle(o+"text-margin-x").pfValue,s=b.pstyle(o+"text-margin-y").pfValue,t=b.isEdge(),u=b.pstyle("text-halign").value,v=b.pstyle("text-valign").value;switch(t&&(u="center",v="center"),k+=r,l+=s,0!==(n=d?this.getTextAngle(b,c):0)&&(i=k,j=l,a.translate(i,j),a.rotate(n),k=0,l=0),v){case"top":break;case"center":l+=q/2;break;case"bottom":l+=q}var w=b.pstyle("text-background-opacity").value,x=b.pstyle("text-border-opacity").value,y=b.pstyle("text-border-width").pfValue,z=b.pstyle("text-background-padding").pfValue;if(w>0||y>0&&x>0){var A=k-z;switch(u){case"left":A-=p;break;case"center":A-=p/2}var B=l-q-z,C=p+2*z,D=q+2*z;if(w>0){var E=a.fillStyle,F=b.pstyle("text-background-color").value;a.fillStyle="rgba("+F[0]+","+F[1]+","+F[2]+","+w*h+")";0===b.pstyle("text-background-shape").strValue.indexOf("round")?Z(a,A,B,C,D,2):a.fillRect(A,B,C,D),a.fillStyle=E}if(y>0&&x>0){var G=a.strokeStyle,H=a.lineWidth,I=b.pstyle("text-border-color").value,J=b.pstyle("text-border-style").value;if(a.strokeStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+x*h+")",a.lineWidth=y,a.setLineDash)switch(J){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"double":a.lineWidth=y/4,a.setLineDash([]);break;case"solid":a.setLineDash([])}if(a.strokeRect(A,B,C,D),"double"===J){var K=y/2;a.strokeRect(A+K,B+K,C-2*K,D-2*K)}a.setLineDash&&a.setLineDash([]),a.lineWidth=H,a.strokeStyle=G}}var L=2*b.pstyle("text-outline-width").pfValue;if(L>0&&(a.lineWidth=L),"wrap"===b.pstyle("text-wrap").value){var M=Eb(g,"labelWrapCachedLines",c),N=Eb(g,"labelLineHeight",c),O=p/2,P=this.getLabelJustification(b);switch("auto"===P||("left"===u?"left"===P?k+=-p:"center"===P&&(k+=-O):"center"===u?"left"===P?k+=-O:"right"===P&&(k+=O):"right"===u&&("center"===P?k+=O:"right"===P&&(k+=p))),v){case"top":l-=(M.length-1)*N;break;case"center":case"bottom":l-=(M.length-1)*N}for(var Q=0;Q<M.length;Q++)L>0&&a.strokeText(M[Q],k,l),a.fillText(M[Q],k,l),l+=N}else L>0&&a.strokeText(m,k,l),a.fillText(m,k,l);0!==n&&(a.rotate(-n),a.translate(-i,-j))}}};var Vh={drawNode:function(a,b,c){var d,e,f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=this,j=b._private,k=j.rscratch,l=b.position();if(qa(l.x)&&qa(l.y)&&(!h||b.visible())){var m,n,o=h?b.effectiveOpacity():1,p=i.usePaths(),q=!1,r=b.padding();d=b.width()+2*r,e=b.height()+2*r,c&&(n=c,a.translate(-n.x1,-n.y1));for(var s=b.pstyle("background-image"),t=s.value,u=new Array(t.length),v=new Array(t.length),w=0,x=0;x<t.length;x++){var y=t[x];if(u[x]=null!=y&&"none"!==y){var z=b.cy().style().getIndexedStyle(b,"background-image-crossorigin","value",x);w++,v[x]=i.getCachedImage(y,z,function(){j.backgroundTimestamp=Date.now(),b.emitAndNotify("background")})}}var A=b.pstyle("background-blacken").value,B=b.pstyle("border-width").pfValue,C=b.pstyle("background-opacity").value*o,D=b.pstyle("border-color").value,E=b.pstyle("border-style").value,F=b.pstyle("border-opacity").value*o;a.lineJoin="miter";var G=function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;i.eleFillStyle(a,b,c)},H=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;i.colorStrokeStyle(a,D[0],D[1],D[2],b)},I=b.pstyle("shape").strValue,J=b.pstyle("shape-polygon-points").pfValue;if(p){a.translate(l.x,l.y);var K=i.nodePathCache=i.nodePathCache||[],L=kb("polygon"===I?I+","+J.join(","):I,""+e,""+d),M=K[L];null!=M?(m=M,q=!0,k.pathCache=m):(m=new Path2D,K[L]=k.pathCache=m)}var N=function(){if(!q){var c=l;p&&(c={x:0,y:0}),i.nodeShapes[i.getNodeShape(b)].draw(m||a,c.x,c.y,d,e)}p?a.fill(m):a.fill()},O=function(){for(var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,d=j.backgrounding,e=0,f=0;f<v.length;f++)u[f]&&v[f].complete&&!v[f].error&&(e++,i.drawInscribedImage(a,v[f],b,f,c));j.backgrounding=!(e===w),d!==j.backgrounding&&b.updateStyle(!1)},P=function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;i.hasPie(b)&&(i.drawPie(a,b,f),c&&(p||i.nodeShapes[i.getNodeShape(b)].draw(a,l.x,l.y,d,e)))},Q=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,c=(A>0?A:-A)*b,d=A>0?0:255;0!==A&&(i.colorFillStyle(a,d,d,d,c),p?a.fill(m):a.fill())},R=function(){if(B>0){if(a.lineWidth=B,a.lineCap="butt",a.setLineDash)switch(E){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"solid":case"double":a.setLineDash([])}if(p?a.stroke(m):a.stroke(),"double"===E){a.lineWidth=B/3;var b=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",p?a.stroke(m):a.stroke(),a.globalCompositeOperation=b}a.setLineDash&&a.setLineDash([])}},S=function(){g&&i.drawNodeOverlay(a,b,l,d,e)},T=function(){i.drawElementText(a,b,null,f)};if("yes"===b.pstyle("ghost").value){var U=b.pstyle("ghost-offset-x").pfValue,V=b.pstyle("ghost-offset-y").pfValue,W=b.pstyle("ghost-opacity").value,X=W*o;a.translate(U,V),G(W*C),N(),O(X),P(0!==A||0!==B),Q(X),H(W*F),R(),a.translate(-U,-V)}G(),N(),O(),P(0!==A||0!==B),Q(),H(),R(),p&&a.translate(-l.x,-l.y),T(),S(),c&&a.translate(n.x1,n.y1)}},drawNodeOverlay:function(a,b,c,d,e){if(b.visible()){var f=b.pstyle("overlay-padding").pfValue,g=b.pstyle("overlay-opacity").value,h=b.pstyle("overlay-color").value;if(g>0){if(c=c||b.position(),null==d||null==e){var i=b.padding();d=b.width()+2*i,e=b.height()+2*i}this.colorFillStyle(a,h[0],h[1],h[2],g),this.nodeShapes.roundrectangle.draw(a,c.x,c.y,d+2*f,e+2*f),a.fill()}}},hasPie:function(a){return(a=a[0])._private.hasPie},drawPie:function(a,b,c,d){b=b[0],d=d||b.position();var e=b.cy().style(),f=b.pstyle("pie-size"),g=d.x,h=d.y,i=b.width(),j=b.height(),k=Math.min(i,j)/2,l=0;this.usePaths()&&(g=0,h=0),"%"===f.units?k*=f.pfValue:void 0!==f.pfValue&&(k=f.pfValue/2);for(var m=1;m<=e.pieBackgroundN;m++){var n=b.pstyle("pie-"+m+"-background-size").value,o=b.pstyle("pie-"+m+"-background-color").value,p=b.pstyle("pie-"+m+"-background-opacity").value*c,q=n/100;q+l>1&&(q=1-l);var r=1.5*Math.PI+2*Math.PI*l,s=r+2*Math.PI*q;0===n||l>=1||l+q>1||(a.beginPath(),a.moveTo(g,h),a.arc(g,h,k,r,s),a.closePath(),this.colorFillStyle(a,o[0],o[1],o[2],p),a.fill(),l+=q)}}},Wh={};Wh.getPixelRatio=function(){var a=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var b=a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/b},Wh.paintCache=function(a){for(var b,c=this.paintCaches=this.paintCaches||[],d=!0,e=0;e<c.length;e++)if((b=c[e]).context===a){d=!1;break}return d&&(b={context:a},c.push(b)),b},Wh.createGradientStyleFor=function(a,b,c,d,e){var f,g=this.usePaths(),h=c.pstyle(b+"-gradient-stop-colors").value,i=c.pstyle(b+"-gradient-stop-positions").pfValue;if("radial-gradient"===d)if(c.isEdge()){var j=c.sourceEndpoint(),k=c.targetEndpoint(),l=c.midpoint(),m=fc(j,l),n=fc(k,l);f=a.createRadialGradient(l.x,l.y,0,l.x,l.y,Math.max(m,n))}else{var o=g?{x:0,y:0}:c.position(),p=c.paddedWidth(),q=c.paddedHeight();f=a.createRadialGradient(o.x,o.y,0,o.x,o.y,Math.max(p,q))}else if(c.isEdge()){var r=c.sourceEndpoint(),s=c.targetEndpoint();f=a.createLinearGradient(r.x,r.y,s.x,s.y)}else{var t=g?{x:0,y:0}:c.position(),u=c.paddedWidth()/2,v=c.paddedHeight()/2;switch(c.pstyle("background-gradient-direction").value){case"to-bottom":f=a.createLinearGradient(t.x,t.y-v,t.x,t.y+v);break;case"to-top":f=a.createLinearGradient(t.x,t.y+v,t.x,t.y-v);break;case"to-left":f=a.createLinearGradient(t.x+u,t.y,t.x-u,t.y);break;case"to-right":f=a.createLinearGradient(t.x-u,t.y,t.x+u,t.y);break;case"to-bottom-right":case"to-right-bottom":f=a.createLinearGradient(t.x-u,t.y-v,t.x+u,t.y+v);break;case"to-top-right":case"to-right-top":f=a.createLinearGradient(t.x-u,t.y+v,t.x+u,t.y-v);break;case"to-bottom-left":case"to-left-bottom":f=a.createLinearGradient(t.x+u,t.y-v,t.x-u,t.y+v);break;case"to-top-left":case"to-left-top":f=a.createLinearGradient(t.x+u,t.y+v,t.x-u,t.y-v)}}if(!f)return null;for(var w=i.length===h.length,x=h.length,y=0;y<x;y++)f.addColorStop(w?i[y]:y/(x-1),"rgba("+h[y][0]+","+h[y][1]+","+h[y][2]+","+e+")");return f},Wh.gradientFillStyle=function(a,b,c,d){var e=this.createGradientStyleFor(a,"background",b,c,d);if(!e)return null;a.fillStyle=e},Wh.colorFillStyle=function(a,b,c,d,e){a.fillStyle="rgba("+b+","+c+","+d+","+e+")"},Wh.eleFillStyle=function(a,b,c){var d=b.pstyle("background-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientFillStyle(a,b,d,c);else{var e=b.pstyle("background-color").value;this.colorFillStyle(a,e[0],e[1],e[2],c)}},Wh.gradientStrokeStyle=function(a,b,c,d){var e=this.createGradientStyleFor(a,"line",b,c,d);if(!e)return null;a.strokeStyle=e},Wh.colorStrokeStyle=function(a,b,c,d,e){a.strokeStyle="rgba("+b+","+c+","+d+","+e+")"},Wh.eleStrokeStyle=function(a,b,c){var d=b.pstyle("line-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientStrokeStyle(a,b,d,c);else{var e=b.pstyle("line-color").value;this.colorStrokeStyle(a,e[0],e[1],e[2],c)}},Wh.matchCanvasSize=function(a){var b=this,c=b.data,d=b.findContainerClientCoords(),e=d[2],f=d[3],g=b.getPixelRatio(),h=b.motionBlurPxRatio;a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_NODE]&&a!==b.data.bufferCanvases[b.MOTIONBLUR_BUFFER_DRAG]||(g=h);var i,j=e*g,k=f*g;if(j!==b.canvasWidth||k!==b.canvasHeight){b.fontCaches=null;var l=c.canvasContainer;l.style.width=e+"px",l.style.height=f+"px";for(var m=0;m<b.CANVAS_LAYERS;m++)(i=c.canvases[m]).width=j,i.height=k,i.style.width=e+"px",i.style.height=f+"px";for(m=0;m<b.BUFFER_COUNT;m++)(i=c.bufferCanvases[m]).width=j,i.height=k,i.style.width=e+"px",i.style.height=f+"px";b.textureMult=1,g<=1&&(i=c.bufferCanvases[b.TEXTURE_BUFFER],b.textureMult=2,i.width=j*b.textureMult,i.height=k*b.textureMult),b.canvasWidth=j,b.canvasHeight=k}},Wh.renderTo=function(a,b,c,d){this.render({forcedContext:a,forcedZoom:b,forcedPan:c,drawAllLayers:!0,forcedPxRatio:d})},Wh.render=function(a){function b(a,b,c,d,e){var f=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",i.colorFillStyle(a,255,255,255,i.motionBlurTransparency),a.fillRect(b,c,d,e),a.globalCompositeOperation=f}function c(a,c){var f,j,k,m;i.clearingMotionBlur||a!==l.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]&&a!==l.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG]?(f=y,j=w,k=i.canvasWidth,m=i.canvasHeight):(f={x:x.x*p,y:x.y*p},j=v*p,k=i.canvasWidth*p,m=i.canvasHeight*p),a.setTransform(1,0,0,1,0,0),"motionBlur"===c?b(a,0,0,k,m):d||void 0!==c&&!c||a.clearRect(0,0,k,m),e||(a.translate(f.x,f.y),a.scale(j,j)),h&&a.translate(h.x,h.y),g&&a.scale(g,g)}var d=(a=a||Ab()).forcedContext,e=a.drawAllLayers,f=a.drawOnlyNodeLayer,g=a.forcedZoom,h=a.forcedPan,i=this,j=void 0===a.forcedPxRatio?this.getPixelRatio():a.forcedPxRatio,k=i.cy,l=i.data,m=l.canvasNeedsRedraw,n=i.textureOnViewport&&!d&&(i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming),o=void 0!==a.motionBlur?a.motionBlur:i.motionBlur,p=i.motionBlurPxRatio,q=k.hasCompoundNodes(),r=i.hoverData.draggingEles,s=!(!i.hoverData.selecting&&!i.touchData.selecting),t=o=o&&!d&&i.motionBlurEnabled&&!s;d||(i.prevPxRatio!==j&&(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container),i.redrawHint("eles",!0),i.redrawHint("drag",!0)),i.prevPxRatio=j),!d&&i.motionBlurTimeout&&clearTimeout(i.motionBlurTimeout),o&&(null==i.mbFrames&&(i.mbFrames=0),i.mbFrames++,i.mbFrames<3&&(t=!1),i.mbFrames>i.minMbLowQualFrames&&(i.motionBlurPxRatio=i.mbPxRBlurry)),i.clearingMotionBlur&&(i.motionBlurPxRatio=1),i.textureDrawLastFrame&&!n&&(m[i.NODE]=!0,m[i.SELECT_BOX]=!0);var u=k.style(),v=k.zoom(),w=void 0!==g?g:v,x=k.pan(),y={x:x.x,y:x.y},z={zoom:v,pan:{x:x.x,y:x.y}},A=i.prevViewport;void 0===A||z.zoom!==A.zoom||z.pan.x!==A.pan.x||z.pan.y!==A.pan.y||r&&!q||(i.motionBlurPxRatio=1),h&&(y=h),w*=j,y.x*=j,y.y*=j;var B=i.getCachedZSortedEles();if(n||(i.textureDrawLastFrame=!1),n){if(i.textureDrawLastFrame=!0,!i.textureCache){i.textureCache={},i.textureCache.bb=k.mutableElements().boundingBox(),i.textureCache.texture=i.data.bufferCanvases[i.TEXTURE_BUFFER];var C=i.data.bufferContexts[i.TEXTURE_BUFFER];C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,i.canvasWidth*i.textureMult,i.canvasHeight*i.textureMult),i.render({forcedContext:C,drawOnlyNodeLayer:!0,forcedPxRatio:j*i.textureMult}),(z=i.textureCache.viewport={zoom:k.zoom(),pan:k.pan(),width:i.canvasWidth,height:i.canvasHeight}).mpan={x:(0-z.pan.x)/z.zoom,y:(0-z.pan.y)/z.zoom}}m[i.DRAG]=!1,m[i.NODE]=!1;var D=l.contexts[i.NODE],E=i.textureCache.texture;z=i.textureCache.viewport,D.setTransform(1,0,0,1,0,0),o?b(D,0,0,z.width,z.height):D.clearRect(0,0,z.width,z.height);var F=u.core("outside-texture-bg-color").value,G=u.core("outside-texture-bg-opacity").value;i.colorFillStyle(D,F[0],F[1],F[2],G),D.fillRect(0,0,z.width,z.height),v=k.zoom(),c(D,!1),D.clearRect(z.mpan.x,z.mpan.y,z.width/z.zoom/j,z.height/z.zoom/j),D.drawImage(E,z.mpan.x,z.mpan.y,z.width/z.zoom/j,z.height/z.zoom/j)}else i.textureOnViewport&&!d&&(i.textureCache=null);var H=k.extent(),I=i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming||i.hoverData.draggingEles||i.cy.animated(),J=i.hideEdgesOnViewport&&I,K=[];if(K[i.NODE]=!m[i.NODE]&&o&&!i.clearedForMotionBlur[i.NODE]||i.clearingMotionBlur,K[i.NODE]&&(i.clearedForMotionBlur[i.NODE]=!0),K[i.DRAG]=!m[i.DRAG]&&o&&!i.clearedForMotionBlur[i.DRAG]||i.clearingMotionBlur,K[i.DRAG]&&(i.clearedForMotionBlur[i.DRAG]=!0),m[i.NODE]||e||f||K[i.NODE]){var L=o&&!K[i.NODE]&&1!==p;c(D=d||(L?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]:l.contexts[i.NODE]),o&&!L?"motionBlur":void 0),J?i.drawCachedNodes(D,B.nondrag,j,H):i.drawLayeredElements(D,B.nondrag,j,H),i.debug&&i.drawDebugPoints(D,B.nondrag),e||o||(m[i.NODE]=!1)}if(!f&&(m[i.DRAG]||e||K[i.DRAG])&&(L=o&&!K[i.DRAG]&&1!==p,c(D=d||(L?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG]:l.contexts[i.DRAG]),o&&!L?"motionBlur":void 0),J?i.drawCachedNodes(D,B.drag,j,H):i.drawCachedElements(D,B.drag,j,H),i.debug&&i.drawDebugPoints(D,B.drag),e||o||(m[i.DRAG]=!1)),i.showFps||!f&&m[i.SELECT_BOX]&&!e){if(c(D=d||l.contexts[i.SELECT_BOX]),1==i.selection[4]&&(i.hoverData.selecting||i.touchData.selecting)){v=i.cy.zoom();var M=u.core("selection-box-border-width").value/v;D.lineWidth=M,D.fillStyle="rgba("+u.core("selection-box-color").value[0]+","+u.core("selection-box-color").value[1]+","+u.core("selection-box-color").value[2]+","+u.core("selection-box-opacity").value+")",D.fillRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]),M>0&&(D.strokeStyle="rgba("+u.core("selection-box-border-color").value[0]+","+u.core("selection-box-border-color").value[1]+","+u.core("selection-box-border-color").value[2]+","+u.core("selection-box-opacity").value+")",D.strokeRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]))}if(l.bgActivePosistion&&!i.hoverData.selecting){v=i.cy.zoom();var N=l.bgActivePosistion;D.fillStyle="rgba("+u.core("active-bg-color").value[0]+","+u.core("active-bg-color").value[1]+","+u.core("active-bg-color").value[2]+","+u.core("active-bg-opacity").value+")",D.beginPath(),D.arc(N.x,N.y,u.core("active-bg-size").pfValue/v,0,2*Math.PI),D.fill()}var O=i.lastRedrawTime;if(i.showFps&&O){O=Math.round(O);var P=Math.round(1e3/O);D.setTransform(1,0,0,1,0,0),D.fillStyle="rgba(255, 0, 0, 0.75)",D.strokeStyle="rgba(255, 0, 0, 0.75)",D.lineWidth=1,D.fillText("1 frame = "+O+" ms = "+P+" fps",0,20),D.strokeRect(0,30,250,20),D.fillRect(0,30,250*Math.min(P/60,1),20)}e||(m[i.SELECT_BOX]=!1)}if(o&&1!==p){var Q=l.contexts[i.NODE],R=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_NODE],S=l.contexts[i.DRAG],T=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_DRAG],U=function(a,c,d){a.setTransform(1,0,0,1,0,0),d||!t?a.clearRect(0,0,i.canvasWidth,i.canvasHeight):b(a,0,0,i.canvasWidth,i.canvasHeight);var e=p;a.drawImage(c,0,0,i.canvasWidth*e,i.canvasHeight*e,0,0,i.canvasWidth,i.canvasHeight)};(m[i.NODE]||K[i.NODE])&&(U(Q,R,K[i.NODE]),m[i.NODE]=!1),(m[i.DRAG]||K[i.DRAG])&&(U(S,T,K[i.DRAG]),m[i.DRAG]=!1)}i.prevViewport=z,i.clearingMotionBlur&&(i.clearingMotionBlur=!1,i.motionBlurCleared=!0,i.motionBlur=!0),o&&(i.motionBlurTimeout=setTimeout(function(){i.motionBlurTimeout=null,i.clearedForMotionBlur[i.NODE]=!1,i.clearedForMotionBlur[i.DRAG]=!1,i.motionBlur=!1,i.clearingMotionBlur=!n,i.mbFrames=0,m[i.NODE]=!0,m[i.DRAG]=!0,i.redraw()},100)),d||k.emit("render")};for(var Xh={drawPolygonPath:function(a,b,c,d,e,f){var g=d/2,h=e/2;a.beginPath&&a.beginPath(),a.moveTo(b+g*f[0],c+h*f[1]);for(var i=1;i<f.length/2;i++)a.lineTo(b+g*f[2*i],c+h*f[2*i+1]);a.closePath()},drawRoundPolygonPath:function(a,b,c,d,e,f){var g=d/2,h=e/2,i=Nc(d,e);a.beginPath&&a.beginPath();for(var j=0;j<f.length/4;j++){var k,l=void 0;l=0===j?f.length-2:4*j-2,k=4*j+2;var m=b+g*f[4*j],n=c+h*f[4*j+1],o=-f[l]*f[k]-f[l+1]*f[k+1],p=i/Math.tan(Math.acos(o)/2),q=m-p*f[l],r=n-p*f[l+1],s=m+p*f[k],t=n+p*f[k+1];0===j?a.moveTo(q,r):a.lineTo(q,r),a.arcTo(m,n,s,t,i)}a.closePath()},drawRoundRectanglePath:function(a,b,c,d,e){var f=d/2,g=e/2,h=Mc(d,e);a.beginPath&&a.beginPath(),a.moveTo(b,c-g),a.arcTo(b+f,c-g,b+f,c,h),a.arcTo(b+f,c+g,b,c+g,h),a.arcTo(b-f,c+g,b-f,c,h),a.arcTo(b-f,c-g,b,c-g,h),a.lineTo(b,c-g),a.closePath()},drawBottomRoundRectanglePath:function(a,b,c,d,e){var f=d/2,g=e/2,h=Mc(d,e);a.beginPath&&a.beginPath(),a.moveTo(b,c-g),a.lineTo(b+f,c-g),a.lineTo(b+f,c),a.arcTo(b+f,c+g,b,c+g,h),a.arcTo(b-f,c+g,b-f,c,h),a.lineTo(b-f,c-g),a.lineTo(b,c-g),a.closePath()},drawCutRectanglePath:function(a,b,c,d,e){var f=d/2,g=e/2;a.beginPath&&a.beginPath(),a.moveTo(b-f+8,c-g),a.lineTo(b+f-8,c-g),a.lineTo(b+f,c-g+8),a.lineTo(b+f,c+g-8),a.lineTo(b+f-8,c+g),a.lineTo(b-f+8,c+g),a.lineTo(b-f,c+g-8),a.lineTo(b-f,c-g+8),a.closePath()},drawBarrelPath:function(a,b,c,d,e){var f=d/2,g=e/2,h=b-f,i=b+f,j=c-g,k=c+g,l=Oc(d,e),m=l.widthOffset,n=l.heightOffset,o=l.ctrlPtOffsetPct*m;a.beginPath&&a.beginPath(),a.moveTo(h,j+n),a.lineTo(h,k-n),a.quadraticCurveTo(h+o,k,h+m,k),a.lineTo(i-m,k),a.quadraticCurveTo(i-o,k,i,k-n),a.lineTo(i,j+n),a.quadraticCurveTo(i-o,j,i-m,j),a.lineTo(h+m,j),a.quadraticCurveTo(h+o,j,h,j+n),a.closePath()}},Yh=Math.sin(0),Zh=Math.cos(0),$h={},_h={},ai=Math.PI/40,bi=0*Math.PI;bi<2*Math.PI;bi+=ai)$h[bi]=Math.sin(bi),_h[bi]=Math.cos(bi);Xh.drawEllipsePath=function(a,b,c,d,e){if(a.beginPath&&a.beginPath(),a.ellipse)a.ellipse(b,c,d/2,e/2,0,0,2*Math.PI);else for(var f,g,h=d/2,i=e/2,j=0*Math.PI;j<2*Math.PI;j+=ai)f=b-h*$h[j]*Yh+h*_h[j]*Zh,g=c+i*_h[j]*Yh+i*$h[j]*Zh,0===j?a.moveTo(f,g):a.lineTo(f,g);a.closePath()};var ci={};ci.createBuffer=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,[c,c.getContext("2d")]},ci.bufferCanvasImage=function(a){var b=this.cy,c=b.mutableElements().boundingBox(),d=this.findContainerClientCoords(),e=a.full?Math.ceil(c.w):d[2],f=a.full?Math.ceil(c.h):d[3],g=qa(a.maxWidth)||qa(a.maxHeight),h=this.getPixelRatio(),i=1;if(void 0!==a.scale)e*=a.scale,f*=a.scale,i=a.scale;else if(g){var j=1/0,k=1/0;qa(a.maxWidth)&&(j=i*a.maxWidth/e),qa(a.maxHeight)&&(k=i*a.maxHeight/f),e*=i=Math.min(j,k),f*=i}g||(e*=h,f*=h,i*=h);var l=document.createElement("canvas");l.width=e,l.height=f,l.style.width=e+"px",l.style.height=f+"px";var m=l.getContext("2d");if(e>0&&f>0){m.clearRect(0,0,e,f),m.globalCompositeOperation="source-over";var n=this.getCachedZSortedEles();if(a.full)m.translate(-c.x1*i,-c.y1*i),m.scale(i,i),this.drawElements(m,n),m.scale(1/i,1/i),m.translate(c.x1*i,c.y1*i);else{var o=b.pan(),p={x:o.x*i,y:o.y*i};i*=b.zoom(),m.translate(p.x,p.y),m.scale(i,i),this.drawElements(m,n),m.scale(1/i,1/i),m.translate(-p.x,-p.y)}a.bg&&(m.globalCompositeOperation="destination-over",m.fillStyle=a.bg,m.rect(0,0,e,f),m.fill())}return l},ci.png=function(a){return _(a,this.bufferCanvasImage(a),"image/png")},ci.jpg=function(a){return _(a,this.bufferCanvasImage(a),"image/jpeg")};var di={nodeShapeImpl:function(a,b,c,d,e,f,g){switch(a){case"ellipse":return this.drawEllipsePath(b,c,d,e,f);case"polygon":return this.drawPolygonPath(b,c,d,e,f,g);case"round-polygon":return this.drawRoundPolygonPath(b,c,d,e,f,g);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(b,c,d,e,f);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(b,c,d,e,f);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(b,c,d,e,f);case"barrel":return this.drawBarrelPath(b,c,d,e,f)}}},ei=aa,fi=aa.prototype;fi.CANVAS_LAYERS=3,fi.SELECT_BOX=0,fi.DRAG=1,fi.NODE=2,fi.BUFFER_COUNT=3,fi.TEXTURE_BUFFER=0,fi.MOTIONBLUR_BUFFER_NODE=1,fi.MOTIONBLUR_BUFFER_DRAG=2,fi.redrawHint=function(a,b){var c=this;switch(a){case"eles":c.data.canvasNeedsRedraw[fi.NODE]=b;break;case"drag":c.data.canvasNeedsRedraw[fi.DRAG]=b;break;case"select":c.data.canvasNeedsRedraw[fi.SELECT_BOX]=b}};var gi="undefined"!=typeof Path2D;fi.path2dEnabled=function(a){if(void 0===a)return this.pathsEnabled;this.pathsEnabled=!!a},fi.usePaths=function(){return gi&&this.pathsEnabled},fi.setImgSmoothing=function(a,b){null!=a.imageSmoothingEnabled?a.imageSmoothingEnabled=b:(a.webkitImageSmoothingEnabled=b,a.mozImageSmoothingEnabled=b,a.msImageSmoothingEnabled=b)},fi.getImgSmoothing=function(a){return null!=a.imageSmoothingEnabled?a.imageSmoothingEnabled:a.webkitImageSmoothingEnabled||a.mozImageSmoothingEnabled||a.msImageSmoothingEnabled},fi.makeOffscreenCanvas=function(b,c){var d;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":a(OffscreenCanvas))?d=new OffscreenCanvas(b,c):((d=document.createElement("canvas")).width=b,d.height=c),d},[Kh,Lh,Sh,Th,Uh,Vh,Wh,Xh,ci,di].forEach(function(a){Ha(fi,a)});var hi=[{type:"layout",extensions:bh},{type:"renderer",extensions:[{name:"null",impl:S},{name:"base",impl:xh},{name:"canvas",impl:ei}]}],ii={},ji={},ki=function(){return 2===arguments.length?ca.apply(null,arguments):3===arguments.length?ba.apply(null,arguments):4===arguments.length?ea.apply(null,arguments):5===arguments.length?da.apply(null,arguments):void ub("Invalid extension access syntax")};xg.prototype.extension=ki,hi.forEach(function(a){a.extensions.forEach(function(b){ba(a.type,b.name,b.impl)})});var li=function a(){if(!(this instanceof a))return new a;this.length=0},mi=li.prototype;mi.instanceString=function(){return"stylesheet"},mi.selector=function(a){return this[this.length++]={selector:a,properties:[]},this},mi.css=function(a,b){var c=this.length-1;if(ma(a))this[c].properties.push({name:a,value:b});else if(pa(a))for(var d=a,e=Object.keys(d),f=0;f<e.length;f++){var g=e[f],h=d[g];if(null!=h){var i=sg.properties[g]||sg.properties[Ca(g)];if(null!=i){var j=i.name,k=h;this[c].properties.push({name:j,value:k})}}}return this},mi.style=mi.css,mi.generateStyle=function(a){var b=new sg(a);return this.appendToStyle(b)},mi.appendToStyle=function(a){for(var b=0;b<this.length;b++){var c=this[b],d=c.selector,e=c.properties;a.selector(d);for(var f=0;f<e.length;f++){var g=e[f];a.css(g.name,g.value)}}return a};var ni=function(a){return void 0===a&&(a={}),pa(a)?new xg(a):ma(a)?ki.apply(ki,arguments):void 0};return ni.use=function(a){var b=Array.prototype.slice.call(arguments,1);return b.unshift(ni),a.apply(null,b),this},ni.warnings=function(a){return vb(a)},ni.version="3.14.0",ni.stylesheet=ni.Stylesheet=li,ni});