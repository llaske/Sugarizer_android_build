/*! Sugarizer 2020-03-14 */
define(["sugar-web/graphics/palette","mustache"],function(a,b){var c={};c.TextPalette=function(c,d){function e(a){for(var b=0;b<h.length;b++)h[b].style.border="0px solid #000";a.target.style.border="1px solid #f00",i.popDown()}a.Palette.call(this,c,d),this.getPalette().id="fontpalette",this.fontChangeEvent=document.createEvent("CustomEvent"),this.fontChangeEvent.initCustomEvent("fontChange",!0,!0,{family:"Arial"}),this.template='<center><table><tbody>{{#rows}}<tr>{{#.}}<td><button lineHeight="{{lineHeight}}" title="{{fontFamily}}" style="height:55px; width:55px; background-size:40px !important;  background: #fff url({{ icon }}) no-repeat center; "></button></td>{{/.}}</tr>{{/rows}}</tbody></table></center><br/>';var f=[[{icon:"icons/font-arial.svg",lineHeight:"0.7",fontFamily:"Arial"},{icon:"icons/font-comic-sans.svg",lineHeight:"0.8",fontFamily:"Comic Sans MS"},{icon:"icons/font-verdana.svg",lineHeight:"0.8",fontFamily:"Verdana"}]],g=document.createElement("div");g.innerHTML=b.render(this.template,{rows:f}),this.setContent([g]);for(var h=g.querySelectorAll("button"),i=this,j=0;j<h.length;j++)h[j].addEventListener("click",function(a){for(var b=0;b<h.length;b++)h[b].style.border="0px solid #000";a.target.style.border="1px solid #f00",i.fontChangeEvent.detail.family=a.target.title,i.getPalette().dispatchEvent(i.fontChangeEvent),i.popDown()});e({target:h[0]})};var d=function(a){for(var b=this.getPalette().querySelectorAll("button"),c=0;c<b.length;c++)a==b[c].title?b[c].style.border="1px solid #f00":b[c].style.border="0px solid #000"},e=function(a,b,c){return this.getPalette().addEventListener(a,b,c)};return c.TextPalette.prototype=Object.create(a.Palette.prototype,{setFont:{value:d,enumerable:!0,configurable:!0,writable:!0},addEventListener:{value:e,enumerable:!0,configurable:!0,writable:!0}}),c});