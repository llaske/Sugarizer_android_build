define(["sugar-web/graphics/palette","mustache"],(function(t,e){var o={};o.initGui=function initGui(){var t=document.getElementById("colors-button-fill"),e=new PaintApp.palettes.notePalette.NotePalette(t,void 0);e.addEventListener("colorChange",(function onColorChangeFill(t){PaintApp.data.color.fill=t.detail.color})),e.getPalette().querySelector(".palette-invoker"),e.setColor(0)},o.NotePalette=function(o,n){this.invoker=o,t.Palette.call(this,o,n),this.getPalette().className+=" colorpalette",this.colorChangeEvent=document.createEvent("CustomEvent"),this.colorChangeEvent.initCustomEvent("colorChange",!0,!0,{color:"#ed2529"}),this.template='        <style>            @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {                input[type=range] {                    width:100px;                    background-color: transparent !important; /* Hides the slider so custom styles can be added */                }                }        </style>        <div style="width:140px;">          <div style="float:left; width: 100px;">              <table>                <tbody>                {{#rows}}                    <tr>                      {{#.}}                        <td>                          <button style="background-color: {{ color }}"></button>                        </td>                      {{/.}}                    </tr>                  {{/rows}}                </tbody>                </table>              </div>      </div>';var r=document.createElement("div");r.className="colors";function popDownOnButtonClick(t,e,n){o.style.backgroundColor=t.target.style.backgroundColor,l.colorChangeEvent.detail.color=t.target.style.backgroundColor,l.getPalette().dispatchEvent(l.colorChangeEvent),l.getPalette().querySelector(".palette-invoker").style.backgroundColor=t.target.style.backgroundColor,null!=e&&!0!==e||l.popDown()}r.innerHTML=e.render(this.template,{rows:[[{color:"#FFF29F"},{color:"#FFCBA6"}],[{color:"#81FFC4"},{color:"#FFB7F9"}],[{color:"#C39AFF"},{color:"#9AFAFF"}]]}),this.setContent([r]),r.parentNode.style.backgroundColor="black",r.parentNode.parentNode.style.minWidth="120px",r.parentNode.parentNode.style.maxWidth="120px",r.parentNode.style.width="120px",r.parentNode.style.height="170px",r.parentNode.style.overflowY="auto",r.parentNode.style.overflowX="hidden",this.buttons=r.querySelectorAll("button");var l=this;l.colorsElem=r;for(var a=0;a<this.buttons.length;a++)this.buttons[a].addEventListener("click",popDownOnButtonClick)};return o.NotePalette.prototype=Object.create(t.Palette.prototype,{setColor:{value:function(t){for(var e=0;e<this.buttons.length;e++)if(this.buttons[e].style.backgroundColor==t){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),this.buttons[e].dispatchEvent(o);break}(function parseColor(t){for(var e=t.split("(")[1].split(")")[0].split(","),o=0;o<e.length;o++)e[o]=parseInt(e[o]);return e})(t);this.getPalette().querySelector(".palette-invoker").style.backgroundColor=t,this.invoker.style.backgroundColor=t},enumerable:!0,configurable:!0,writable:!0},addEventListener:{value:function(t,e,o){return this.getPalette().addEventListener(t,e,o)},enumerable:!0,configurable:!0,writable:!0}}),o}));