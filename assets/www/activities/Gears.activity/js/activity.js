define(["sugar-web/activity/activity","sugar-web/graphics/radiobuttonsgroup","gearsketch_main"],(function(t,e){requirejs(["domReady!"],(function(n){var o;t.setup(),document.getElementById("stop-button").addEventListener("click",(function(e){console.log("writing...");var n=JSON.stringify(o.board);t.getDatastoreObject().setDataAsText(n),t.getDatastoreObject().save((function(t){null===t?console.log("write done."):console.log("write failed.")}))})),o=new window.gearsketch.GearSketch(!1),t.getDatastoreObject().loadAsText((function onLoaded(t,e,n){null===t?(o.board=window.gearsketch.model.Board.fromObject(JSON.parse(n)),console.log("read done.")):console.log("read failed.")}));var i=document.getElementById("gear-button"),c=document.getElementById("chain-button"),l=document.getElementById("momentum-button"),a=document.getElementById("play-button");o.selectButton=function(t){return this.selectedButton=t},i.addEventListener("click",(function(t){o.isDemoPlaying&&o.stopDemo(),o.selectButton("gearButton")})),c.addEventListener("click",(function(t){o.isDemoPlaying&&o.stopDemo(),o.selectButton("chainButton")})),l.addEventListener("click",(function(t){o.isDemoPlaying&&o.stopDemo(),o.selectButton("momentumButton")})),a.addEventListener("click",(function(t){o.isDemoPlaying&&o.stopDemo(),"playButton"==o.selectedButton?o.selectButton(null):o.selectButton("playButton")})),new e.RadioButtonsGroup([i,c,l,a]),document.getElementById("clear-button").addEventListener("click",(function(t){if(o.isDemoPlaying)return o.showButtons=!1,void o.stopDemo();o.board.clear()})),document.getElementById("help-button").addEventListener("click",(function(t){o.isDemoPlaying?o.stopDemo():o.playDemo()})),document.getElementById("fullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.opacity=0,document.getElementById("canvas").style.top="0px",o.canvasOffsetY=o.canvas.getBoundingClientRect().top,o.updateCanvasSize(),document.getElementById("unfullscreen-button").style.visibility="visible"})),document.getElementById("unfullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.opacity=1,document.getElementById("canvas").style.top="55px",o.canvasOffsetY=o.canvas.getBoundingClientRect().top,o.updateCanvasSize(),document.getElementById("unfullscreen-button").style.visibility="hidden"}))}))}));