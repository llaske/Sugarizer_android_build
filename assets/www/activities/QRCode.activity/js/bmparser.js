/*! Sugarizer 2019-09-21 */
function BitMatrixParser(a){var b=a.Dimension;if(b<21||1!=(3&b))throw"Error BitMatrixParser";this.bitMatrix=a,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(a,b,c){return this.bitMatrix.get_Renamed(a,b)?c<<1|1:c<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var a=0,b=0;b<6;b++)a=this.copyBit(b,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(var c=5;c>=0;c--)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=FormatInformation.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var d=this.bitMatrix.Dimension;a=0;for(var e=d-8,b=d-1;b>=e;b--)a=this.copyBit(b,8,a);for(var c=d-7;c<d;c++)a=this.copyBit(8,c,a);if(this.parsedFormatInfo=FormatInformation.decodeFormatInformation(a),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var a=this.bitMatrix.Dimension,b=a-17>>2;if(b<=6)return Version.getVersionForNumber(b);for(var c=0,d=a-11,e=5;e>=0;e--)for(var f=a-9;f>=d;f--)c=this.copyBit(f,e,c);if(this.parsedVersion=Version.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;c=0;for(var f=5;f>=0;f--)for(var e=a-9;e>=d;e--)c=this.copyBit(f,e,c);if(this.parsedVersion=Version.decodeVersionInformation(c),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==a)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var a=this.readFormatInformation(),b=this.readVersion(),c=DataMask.forReference(a.DataMask),d=this.bitMatrix.Dimension;c.unmaskBitMatrix(this.bitMatrix,d);for(var e=b.buildFunctionPattern(),f=!0,g=new Array(b.TotalCodewords),h=0,i=0,j=0,k=d-1;k>0;k-=2){6==k&&k--;for(var l=0;l<d;l++)for(var m=f?d-1-l:l,n=0;n<2;n++)e.get_Renamed(k-n,m)||(j++,i<<=1,this.bitMatrix.get_Renamed(k-n,m)&&(i|=1),8==j&&(g[h++]=i,j=0,i=0));f^=!0}if(h!=b.TotalCodewords)throw"Error readCodewords";return g}}