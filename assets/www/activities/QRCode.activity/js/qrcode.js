/*! Sugarizer 2020-03-14 */
function URShift(a,b){return a>=0?a>>b:(a>>b)+(2<<~b)}var qrcode={};qrcode.imagedata=null,qrcode.width=0,qrcode.height=0,qrcode.qrCodeSymbol=null,qrcode.debug=!1,qrcode.maxImgSize=1048576,qrcode.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],qrcode.callback=null,qrcode.vidSuccess=function(a){qrcode.localstream=a,qrcode.webkit?qrcode.video.src=window.webkitURL.createObjectURL(a):qrcode.moz?(qrcode.video.mozSrcObject=a,qrcode.video.play()):qrcode.video.src=a,qrcode.gUM=!0,qrcode.canvas_qr2=document.createElement("canvas"),qrcode.canvas_qr2.id="qr-canvas",qrcode.qrcontext2=qrcode.canvas_qr2.getContext("2d"),qrcode.canvas_qr2.width=qrcode.video.videoWidth,qrcode.canvas_qr2.height=qrcode.video.videoHeight,setTimeout(qrcode.captureToCanvas,500)},qrcode.vidError=function(a){qrcode.gUM=!1},qrcode.captureToCanvas=function(){if(qrcode.gUM)try{if(0==qrcode.video.videoWidth)return void setTimeout(qrcode.captureToCanvas,500);qrcode.canvas_qr2.width=qrcode.video.videoWidth,qrcode.canvas_qr2.height=qrcode.video.videoHeight,qrcode.qrcontext2.drawImage(qrcode.video,0,0);try{qrcode.decode()}catch(a){console.log(a),setTimeout(qrcode.captureToCanvas,500)}}catch(a){console.log(a),setTimeout(qrcode.captureToCanvas,500)}},qrcode.setWebcam=function(a){var b=navigator;qrcode.video=document.getElementById(a);var c=!0;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then(function(a){a.forEach(function(a){console.log("deb1"),"videoinput"===a.kind&&a.label.toLowerCase().search("back")>-1&&(c=[{sourceId:a.deviceId}]),console.log(a.kind+": "+a.label+" id = "+a.deviceId)})})}catch(a){console.log(a)}else console.log("no navigator.mediaDevices.enumerateDevices");b.getUserMedia?b.getUserMedia({video:c,audio:!1},qrcode.vidSuccess,qrcode.vidError):b.webkitGetUserMedia?(qrcode.webkit=!0,b.webkitGetUserMedia({video:c,audio:!1},qrcode.vidSuccess,qrcode.vidError)):b.mozGetUserMedia&&(qrcode.moz=!0,b.mozGetUserMedia({video:c,audio:!1},qrcode.vidSuccess,qrcode.vidError))},qrcode.decode=function(a){if(0==arguments.length){if(qrcode.canvas_qr2)var b=qrcode.canvas_qr2,c=qrcode.qrcontext2;else var b=document.getElementById("qr-canvas"),c=b.getContext("2d");return qrcode.width=b.width,qrcode.height=b.height,qrcode.imagedata=c.getImageData(0,0,qrcode.width,qrcode.height),qrcode.result=qrcode.process(c),null!=qrcode.callback&&qrcode.callback(qrcode.result),qrcode.result}var d=new Image;d.crossOrigin="Anonymous",d.onload=function(){var a=document.getElementById("out-canvas");if(null!=a){var b=a.getContext("2d");b.clearRect(0,0,320,240),b.drawImage(d,0,0,320,240)}var c=document.createElement("canvas"),e=c.getContext("2d"),f=d.height,g=d.width;if(d.width*d.height>qrcode.maxImgSize){var h=d.width/d.height;f=Math.sqrt(qrcode.maxImgSize/h),g=h*f}c.width=g,c.height=f,e.drawImage(d,0,0,c.width,c.height),qrcode.width=c.width,qrcode.height=c.height;try{qrcode.imagedata=e.getImageData(0,0,c.width,c.height)}catch(a){return qrcode.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=qrcode.callback&&qrcode.callback(qrcode.result))}try{qrcode.result=qrcode.process(e)}catch(a){console.log(a),qrcode.result="error decoding QR Code"}null!=qrcode.callback&&qrcode.callback(qrcode.result)},d.onerror=function(){null!=qrcode.callback&&qrcode.callback("Failed to load the image")},d.src=a},qrcode.isUrl=function(a){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(a)},qrcode.decode_url=function(a){var b="";try{b=escape(a)}catch(c){console.log(c),b=a}var c="";try{c=decodeURIComponent(b)}catch(a){console.log(a),c=b}return c},qrcode.decode_utf8=function(a){return qrcode.isUrl(a)?qrcode.decode_url(a):a},qrcode.process=function(a){var b=(new Date).getTime(),c=qrcode.grayScaleToBitmap(qrcode.grayscale());if(qrcode.debug){for(var d=0;d<qrcode.height;d++)for(var e=0;e<qrcode.width;e++){var f=4*e+d*qrcode.width*4;qrcode.imagedata.data[f]=(c[e+d*qrcode.width],0),qrcode.imagedata.data[f+1]=(c[e+d*qrcode.width],0),qrcode.imagedata.data[f+2]=c[e+d*qrcode.width]?255:0}a.putImageData(qrcode.imagedata,0,0)}var g=new Detector(c),h=g.detect();if(qrcode.debug){for(var d=0;d<h.bits.Height;d++)for(var e=0;e<h.bits.Width;e++){var f=4*e*2+2*d*qrcode.width*4;qrcode.imagedata.data[f]=(h.bits.get_Renamed(e,d),0),qrcode.imagedata.data[f+1]=(h.bits.get_Renamed(e,d),0),qrcode.imagedata.data[f+2]=h.bits.get_Renamed(e,d)?255:0}a.putImageData(qrcode.imagedata,0,0)}for(var i=Decoder.decode(h.bits),j=i.DataByte,k="",l=0;l<j.length;l++)for(var m=0;m<j[l].length;m++)k+=String.fromCharCode(j[l][m]);var n=(new Date).getTime(),o=n-b;return console.log(o),qrcode.decode_utf8(k)},qrcode.getPixel=function(a,b){if(qrcode.width<a)throw"point error";if(qrcode.height<b)throw"point error";var c=4*a+b*qrcode.width*4;return(33*qrcode.imagedata.data[c]+34*qrcode.imagedata.data[c+1]+33*qrcode.imagedata.data[c+2])/100},qrcode.binarize=function(a){for(var b=new Array(qrcode.width*qrcode.height),c=0;c<qrcode.height;c++)for(var d=0;d<qrcode.width;d++){var e=qrcode.getPixel(d,c);b[d+c*qrcode.width]=e<=a}return b},qrcode.getMiddleBrightnessPerArea=function(a){for(var b=4,c=Math.floor(qrcode.width/b),d=Math.floor(qrcode.height/b),e=new Array(b),f=0;f<b;f++){e[f]=new Array(b);for(var g=0;g<b;g++)e[f][g]=new Array(0,0)}for(var h=0;h<b;h++)for(var i=0;i<b;i++){e[i][h][0]=255;for(var j=0;j<d;j++)for(var k=0;k<c;k++){var l=a[c*i+k+(d*h+j)*qrcode.width];l<e[i][h][0]&&(e[i][h][0]=l),l>e[i][h][1]&&(e[i][h][1]=l)}}for(var m=new Array(b),n=0;n<b;n++)m[n]=new Array(b);for(var h=0;h<b;h++)for(var i=0;i<b;i++)m[i][h]=Math.floor((e[i][h][0]+e[i][h][1])/2);return m},qrcode.grayScaleToBitmap=function(a){for(var b=qrcode.getMiddleBrightnessPerArea(a),c=b.length,d=Math.floor(qrcode.width/c),e=Math.floor(qrcode.height/c),f=new ArrayBuffer(qrcode.width*qrcode.height),g=new Uint8Array(f),h=0;h<c;h++)for(var i=0;i<c;i++)for(var j=0;j<e;j++)for(var k=0;k<d;k++)g[d*i+k+(e*h+j)*qrcode.width]=a[d*i+k+(e*h+j)*qrcode.width]<b[i][h];return g},qrcode.grayscale=function(){for(var a=new ArrayBuffer(qrcode.width*qrcode.height),b=new Uint8Array(a),c=0;c<qrcode.height;c++)for(var d=0;d<qrcode.width;d++){var e=qrcode.getPixel(d,c);b[d+c*qrcode.width]=e}return b};