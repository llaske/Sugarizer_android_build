/*! Sugarizer 2017-08-25 */
define([],function(){function a(){PaintApp.elements.pasteButton=document.getElementById("paste-button"),PaintApp.paletteModesButtons.push(PaintApp.elements.pasteButton),PaintApp.elements.pasteButton.addEventListener("click",function(){PaintApp.paletteRemoveActiveClass(),PaintApp.addActiveClassToElement(PaintApp.elements.pasteButton),PaintApp.switchMode("Paste")})}var b={dataImage:void 0,initGui:a,onMouseDown:function(a){return function(){if(PaintApp.data.currentElement&&(PaintApp.data.currentElement.element.parentElement.removeChild(PaintApp.data.currentElement.element),PaintApp.data.currentElement=void 0),PaintApp.modes.Paste.dataImage){PaintApp.modes.Paste.releasedFinger=!1,PaintApp.handleCurrentFloatingElement();var b=a.point.x-PaintApp.modes.Paste.dataImage.width/2+"px",c=a.point.y+55-PaintApp.modes.Paste.dataImage.height/2+"px",d=PaintApp.elements.canvas.getContext("2d"),e=(a.point,document.createElement("img"));if(e.src=PaintApp.modes.Paste.dataImage.data,e.style.width=PaintApp.modes.Paste.dataImage.width+"px",e.style.height=PaintApp.modes.Paste.dataImage.height+"px",e.style.position="absolute",e.style.left=b,e.style.padding="0px",e.style.border="5px dotted #500",e.style.top=c,document.body.appendChild(e),PaintApp.data.currentElement={type:"paste",element:e,startPoint:{x:parseInt(e.style.left)+e.getBoundingClientRect().width/2,y:parseInt(e.style.top)+e.getBoundingClientRect().height/2}},PaintApp.modes.Paste.releasedFinger){if(d=PaintApp.elements.canvas.getContext("2d"),d.drawImage(PaintApp.data.currentElement.element,5+PaintApp.data.currentElement.element.getBoundingClientRect().left,PaintApp.data.currentElement.element.getBoundingClientRect().top-55+5),PaintApp.data.isShared){var f={src:PaintApp.collaboration.compress(PaintApp.data.currentElement.element.src),left:PaintApp.data.currentElement.element.getBoundingClientRect().left,top:PaintApp.data.currentElement.element.getBoundingClientRect().top-55+5,width:PaintApp.data.currentElement.element.getBoundingClientRect().width,height:PaintApp.data.currentElement.element.getBoundingClientRect().height};PaintApp.collaboration.sendMessage({action:"drawImage",data:f})}PaintApp.data.currentElement.element.parentElement.removeChild(PaintApp.data.currentElement.element),PaintApp.data.currentElement=void 0,PaintApp.saveCanvas()}}}()},onMouseDrag:function(a){if(PaintApp.data.currentElement){var b=a.point.x-PaintApp.modes.Paste.dataImage.width/2+"px",c=a.point.y+55-PaintApp.modes.Paste.dataImage.height/2+"px";PaintApp.data.currentElement.element.style.left=b,PaintApp.data.currentElement.element.style.top=c}},onMouseUp:function(a){if(PaintApp.modes.Paste.releasedFinger=!0,PaintApp.data.currentElement){var b=PaintApp.elements.canvas.getContext("2d");if(b.drawImage(PaintApp.data.currentElement.element,PaintApp.data.currentElement.element.getBoundingClientRect().left,PaintApp.data.currentElement.element.getBoundingClientRect().top-55,PaintApp.data.currentElement.element.getBoundingClientRect().width,PaintApp.data.currentElement.element.getBoundingClientRect().height),PaintApp.data.isShared){var c={src:PaintApp.data.currentElement.element.src,left:PaintApp.data.currentElement.element.getBoundingClientRect().left,top:PaintApp.data.currentElement.element.getBoundingClientRect().top-55,width:PaintApp.data.currentElement.element.getBoundingClientRect().width,height:PaintApp.data.currentElement.element.getBoundingClientRect().height};PaintApp.collaboration.sendMessage({action:"drawImage",data:c})}PaintApp.data.currentElement.element.parentElement.removeChild(PaintApp.data.currentElement.element),PaintApp.data.currentElement=void 0,PaintApp.saveCanvas()}}};return b});