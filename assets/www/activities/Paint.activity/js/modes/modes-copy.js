/*! Sugarizer 2020-03-14 */
define([],function(){function a(){PaintApp.elements.copyButton=document.getElementById("copy-button"),PaintApp.paletteModesButtons.push(PaintApp.elements.copyButton),PaintApp.elements.copyButton.addEventListener("click",function(){PaintApp.paletteRemoveActiveClass(),PaintApp.addActiveClassToElement(PaintApp.elements.copyButton),PaintApp.switchMode("Copy")})}return{initGui:a,begin:void 0,end:void 0,onMouseDown:function(a){PaintApp.data.currentElement&&(PaintApp.data.currentElement.element.parentElement.removeChild(PaintApp.data.currentElement.element),PaintApp.data.currentElement=void 0),begin=a.point;var b=a.point.x+"px",c=a.point.y+55+"px",d=document.createElement("div");d.style.position="absolute",d.style.padding="0px",d.style.width="1px",d.style.height="1px",d.style.opacity="0.5",d.style.pointerEvents="none",d.style.borderRadius="0px",d.style.border="5px dotted #500",d.style.left=b,d.style.top=c,d.style.verticalAlign="bottom",document.body.appendChild(d),d.style.left=parseInt(b)-d.getBoundingClientRect().width/2+"px",d.style.top=parseInt(c)-d.getBoundingClientRect().height/2+"px",PaintApp.data.currentElement={type:"copy/paste",element:d,startPoint:{x:parseInt(d.style.left)+d.getBoundingClientRect().width/2,y:parseInt(d.style.top)+d.getBoundingClientRect().height/2}}},onMouseDrag:function(a){var b=a.point;begin.x<=b.x?PaintApp.data.currentElement.element.style.width=b.x-begin.x+"px":PaintApp.data.currentElement.element.style.width="0px",begin.y<=b.y?PaintApp.data.currentElement.element.style.height=Math.abs(begin.y-b.y)+"px":PaintApp.data.currentElement.element.style.height="0px"},onMouseUp:function(a){var b=a.point;b.y=b.y+55;var c=parseInt(PaintApp.data.currentElement.element.style.width),d=parseInt(PaintApp.data.currentElement.element.style.height),e=PaintApp.elements.canvas,f=PaintApp.elements.canvas.getContext("2d");if(begin.x<b.x&&begin.y<b.y){try{PaintApp.modes.Paste.data=e.toDataURL()}catch(a){return}var g=f.getImageData(begin.x*window.devicePixelRatio,begin.y*window.devicePixelRatio,c*window.devicePixelRatio,d*window.devicePixelRatio);e=document.createElement("canvas"),e.width=c*window.devicePixelRatio,e.height=d*window.devicePixelRatio,e.getContext("2d").putImageData(g,0,0);try{g=e.toDataURL()}catch(a){return}PaintApp.modes.Paste.dataImage={width:c/window.devicePixelRatio,height:d/window.devicePixelRatio,data:g},PaintApp.elements.pasteButton.click()}}}});