define([],(function(){return{initGui:function initGui(){PaintApp.elements.textButton=document.getElementById("text-button"),PaintApp.paletteModesButtons.push(PaintApp.elements.textButton),new PaintApp.palettes.textPalette.TextPalette(PaintApp.elements.textButton,void 0),PaintApp.elements.textFontSelect=document.getElementById("text-font-select"),PaintApp.elements.textInput=document.getElementById("text-input"),PaintApp.elements.textButton.addEventListener("click",(function(){PaintApp.paletteRemoveActiveClass(),PaintApp.addActiveClassToElement(PaintApp.elements.textButton),PaintApp.switchMode("Text")}))},defaultSize:25,fontFamily:"Arial",onMouseDown:function(t){if(PaintApp.handleCurrentFloatingElement(),text=PaintApp.elements.textInput.value,text){var e=document.createElement("span");e.innerHTML=text,e.style.position="absolute",e.style.padding="0px",e.size=text.length+1,e.style.whiteSpace="nowrap",e.style.fontFamily=PaintApp.modes.Text.fontFamily,e.style.width="auto",e.style.lineHeight=PaintApp.modes.Text.lineHeight,e.style.fontSize=PaintApp.modes.Text.defaultSize+"px",e.style.opacity="0.5",e.style.borderRadius="0px",e.style.border="5px dotted #500",e.style.color=PaintApp.data.color.fill;var n=t.point.x+"px",a=t.point.y+55+"px";e.style.left=n,e.style.top=a,e.style.verticalAlign="bottom",document.body.appendChild(e),e.style.left=parseInt(n)-e.getBoundingClientRect().width/2+"px",e.style.top=parseInt(a)-e.getBoundingClientRect().height/2+"px",PaintApp.data.currentElement={type:"text",element:e,startPoint:{x:parseInt(e.style.left)+e.getBoundingClientRect().width/2,y:parseInt(e.style.top)+e.getBoundingClientRect().height/2}}}},onMouseDrag:function(t){if(PaintApp.data.currentElement){var e=Math.abs(t.point.x-PaintApp.data.currentElement.startPoint.x),n=Math.abs(t.point.y-PaintApp.data.currentElement.startPoint.y+55);distance=e>n?e:n,PaintApp.data.currentElement.element.style.fontSize=PaintApp.modes.Text.defaultSize+distance+"px",PaintApp.data.currentElement.element.style.left=PaintApp.data.currentElement.startPoint.x-PaintApp.data.currentElement.element.getBoundingClientRect().width/2+"px",PaintApp.data.currentElement.element.style.top=PaintApp.data.currentElement.startPoint.y-PaintApp.data.currentElement.element.getBoundingClientRect().height/2+"px"}},onMouseUp:function(t){if(PaintApp.data.currentElement){var e=PaintApp.data.currentElement.element.innerHTML,n=PaintApp.data.currentElement.element.getBoundingClientRect().top-55+PaintApp.data.currentElement.element.getBoundingClientRect().height,a=PaintApp.elements.canvas.getContext("2d");a.font=PaintApp.data.currentElement.element.style.fontSize+" "+PaintApp.modes.Text.fontFamily,a.fillStyle=PaintApp.data.color.fill,a.textAlign="start",a.fillText(e,5+PaintApp.data.currentElement.element.getBoundingClientRect().left,n),PaintApp.data.isShared&&PaintApp.collaboration.sendMessage({action:"text",data:{font:PaintApp.data.currentElement.element.style.fontSize+" "+PaintApp.modes.Text.fontFamily,fillStyle:PaintApp.data.color.fill,textAlign:"start",text:e,left:5+PaintApp.data.currentElement.element.getBoundingClientRect().left,top:n}}),PaintApp.data.currentElement.element.parentElement.removeChild(PaintApp.data.currentElement.element),PaintApp.data.currentElement=void 0,PaintApp.saveCanvas()}}}}));