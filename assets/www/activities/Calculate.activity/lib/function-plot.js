/*! Sugarizer 2017-08-25 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.functionPlot=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c,d,e=window.d3,f=a("events"),g=a("extend"),h=a("./lib/tip"),i=a("./lib/utils"),j=a("./lib/helper/"),k=i.assert;b.exports=function(a){function b(){this.id=a.target,this.linkedGraphs=[this],this.setVars(),this.build(),this.setUpEventListeners()}a=a||{},a.data=a.data||[];var i,l,m,n,o,p,q=e.svg.line().x(function(a){return o(a[0])}).y(function(a){return p(a[1])});return b.prototype=Object.create(f.prototype),b.prototype.updateBounds=function(){i=this.meta.width=(a.width||c.DEFAULT_WIDTH)-m.left-m.right,l=this.meta.height=(a.height||c.DEFAULT_HEIGHT)-m.top-m.bottom;var b=this.meta.xDomain,d=this.meta.yDomain,f=e.format("s"),g=e.format(".0r"),h=function(a){return Math.abs(a)>=1?f(a):g(a)};o=this.meta.xScale=e.scale.linear().domain(b).range([0,i]),p=this.meta.yScale=e.scale.linear().domain(d).range([l,0]),this.meta.xAxis=e.svg.axis().scale(o).orient("bottom").tickFormat(h),this.meta.yAxis=e.svg.axis().scale(p).orient("left").tickFormat(h)},b.prototype.setVars=function(){var b=10;this.meta={},m=this.meta.margin={left:30,right:30,top:20,bottom:20},n=this.meta.zoomBehavior=e.behavior.zoom();var c=this.meta.xDomain=a.xDomain||[-b/2,b/2],d=this.meta.yDomain=a.yDomain||[-b/2,b/2];k(c[0]<c[1]),k(d[0]<d[1]),a.title&&(this.meta.margin.top=40),this.updateBounds()},b.prototype.build=function(){var b=this.root=e.select(a.target).selectAll("svg").data([a]);this.root.enter=b.enter().append("svg").attr("class","function-plot").attr("font-size",this.getFontSize()),b.attr("width",i+m.left+m.right).attr("height",l+m.top+m.bottom),this.buildTitle(),this.buildLegend(),this.buildCanvas(),this.buildClip(),this.buildAxis(),this.buildContent();var c=this.tip=h(g(a.tip,{owner:this}));this.canvas.call(c),this.buildZoomHelper()},b.prototype.buildTitle=function(){var b=this.root.selectAll("text.title").data(function(a){return[a.title].filter(Boolean)});b.enter().append("text").attr("class","title").attr("y",m.top/2).attr("x",m.left+i/2).attr("font-size",25).attr("text-anchor","middle").attr("alignment-baseline","middle").text(a.title),b.exit().remove()},b.prototype.buildLegend=function(){this.root.enter.append("text").attr("class","top-right-legend").attr("text-anchor","end"),this.root.select(".top-right-legend").attr("y",m.top).attr("x",i+m.left)},b.prototype.buildCanvas=function(){var b=this;this.meta.zoomBehavior.x(o).y(p).scaleExtent([1e-5,1/0]).on("zoom",function(){b.emit("all:zoom",o,p)});var c=this.canvas=this.root.selectAll(".canvas").data(function(a){return[a]});this.canvas.enter=c.enter().append("g").attr("class","canvas"),c.attr("transform","translate("+m.left+","+m.top+")").call(n).each(function(){var b=e.select(this);a.disableZoom&&b.on(".zoom",null)})},b.prototype.buildClip=function(){var a=this.id,b=this.canvas.enter.append("defs");b.append("clipPath").attr("id","function-plot-clip-"+a).append("rect").attr("class","clip static-clip"),this.canvas.selectAll(".clip").attr("width",i).attr("height",l)},b.prototype.buildAxis=function(){var a=this.canvas.enter;a.append("g").attr("class","x axis"),a.append("g").attr("class","y axis"),this.canvas.select(".x.axis").attr("transform","translate(0,"+l+")").call(this.meta.xAxis),this.canvas.select(".y.axis").call(this.meta.yAxis),this.canvas.selectAll(".axis path, .axis line").attr("fill","none").attr("stroke","black").attr("shape-rendering","crispedges").attr("opacity",.1)},b.prototype.buildAxisLabel=function(){var a,b,c=this.canvas;a=c.selectAll("text.x.axis-label").data(function(a){return[a.xLabel].filter(Boolean)}),a.enter().append("text").attr("class","x axis-label").attr("text-anchor","end"),a.attr("x",i).attr("y",l-6).text(function(a){return a}),a.exit().remove(),b=c.selectAll("text.y.axis-label").data(function(a){return[a.yLabel].filter(Boolean)}),b.enter().append("text").attr("class","y axis-label").attr("y",6).attr("dy",".75em").attr("text-anchor","end").attr("transform","rotate(-90)"),b.text(function(a){return a}),b.exit().remove()},b.prototype.buildContent=function(){var a=this,b=this.canvas,c=this.content=b.selectAll("g.content").data(function(a){return[a]});c.enter().append("g").attr("clip-path","url(#function-plot-clip-"+this.id+")").attr("class","content");var f=c.selectAll("path.y.origin").data([[[0,p.domain()[0]],[0,p.domain()[1]]]]);f.enter().append("path").attr("class","y origin").attr("stroke","#eee"),f.attr("d",q);var h=c.selectAll("path.x.origin").data([[[o.domain()[0],0],[o.domain()[1],0]]]);h.enter().append("path").attr("class","x origin").attr("stroke","#eee"),h.attr("d",q);var i=c.selectAll("g.graph").data(function(a){return a.data});i.enter().append("g").attr("class","graph"),i.each(function(b,c){var f=g({owner:a,index:c},b.graphOptions),h=f.type||"line";e.select(this).call(d[h](f)),e.select(this).call(j(f))})},b.prototype.buildZoomHelper=function(){var a=this;this.canvas.enter.append("rect").attr("class","zoom-and-drag").style("fill","none").style("pointer-events","all"),this.canvas.select(".zoom-and-drag").attr("width",i).attr("height",l).on("mouseover",function(){a.emit("all:mouseover")}).on("mouseout",function(){a.emit("all:mouseout")}).on("mousemove",function(){a.emit("all:mousemove")})},b.prototype.addLink=function(){for(var a=0;a<arguments.length;a+=1)this.linkedGraphs.push(arguments[a])},b.prototype.getFontSize=function(){var a=Math.max(Math.max(i,l)/60,8);return a>15&&(a=15),a},b.prototype.setUpEventListeners=function(){var a=this,b={mousemove:function(b,c){a.tip.move(b,c)},mouseover:function(){a.tip.show()},mouseout:function(){a.tip.hide()},draw:function(){a.buildContent()},"zoom:scaleUpdate":function(a,b){n.x(o.domain(a.domain())).y(p.domain(b.domain()))},"tip:update":function(b,d,e){var f=a.root.datum().data[e],g=f.title||"",h=f.renderer||function(a,b){return a.toFixed(3)+", "+b.toFixed(3)},i=[];g&&i.push(g),i.push(h(b,d)),a.root.select(".top-right-legend").attr("fill",c.COLORS[e]).text(i.join(" "))}},d={mousemove:function(){var b=e.mouse(a.root.select("rect.zoom-and-drag").node()),c=o.invert(b[0]),d=p.invert(b[1]);a.linkedGraphs.forEach(function(a){a.emit("mousemove",c,d)})},zoom:function(b,c){a.linkedGraphs.forEach(function(a,d){var e=a.canvas;e.select(".x.axis").call(a.meta.xAxis),e.select(".y.axis").call(a.meta.yAxis),d&&a.emit("zoom:scaleUpdate",b,c),a.emit("draw")}),a.emit("all:mousemove")}};Object.keys(b).forEach(function(c){a.on(c,b[c]),!d[c]&&a.on("all:"+c,function(){var b=Array.prototype.slice.call(arguments);a.linkedGraphs.forEach(function(a){var d=b.slice();d.unshift(c),a.emit.apply(a,d)})})}),Object.keys(d).forEach(function(b){a.on("all:"+b,d[b])})},new b},c=b.exports.constants=a("./lib/constants"),d=b.exports.types=a("./lib/types/")},{"./lib/constants":3,"./lib/helper/":6,"./lib/tip":7,"./lib/types/":8,"./lib/utils":11,events:2,extend:12}],2:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],3:[function(a,b){"use strict";var c=window.d3;b.exports={COLORS:["steelblue","red","#05b378","orange","#4040e8","yellow"].map(function(a){return c.hsl(a)}),ITERATIONS_LIMIT:1e3,DEFAULT_WIDTH:550,DEFAULT_HEIGHT:350,TIP_X_EPS:1}},{}],4:[function(a,b){"use strict";var c=a("./utils"),d=a("./constants"),e=c.assert;b.exports={range:function(a,b){var c=b.range||[-1/0,1/0],d=a.meta.xScale,e=Math.max(d.domain()[0],c[0]),f=Math.min(d.domain()[1],c[1]);return[e,f]},eval:function(a,b){e("function"==typeof b.fn);var f=[],g=this.range(a,b),h=g[0],i=g[1],j=b.samples||100,k=b.deltaX;k||(k=(i-h)/j);var l=(i-h)/k;l=l||1,e(l>=0),l>d.ITERATIONS_LIMIT&&(l=d.ITERATIONS_LIMIT,k=(i-h)/l);for(var m=0;l>=m;m+=1){var n=h+k*m,o=b.fn(n);c.isValidNumber(n)&&c.isValidNumber(o)&&f.push([n,o])}return f=this.split(f,b.graphOptions)},split:function(a,b){b=b||{};var c=.001,d=Array.prototype.slice.call(b.limits||[]),e=[],f=0,g=1,h=[];for(d.unshift(-1e8),d.push(1e8);f<a.length;){for(;f<a.length&&a[f][0]<d[g-1]+c;)++f;for(h=[];f<a.length&&a[f][0]>=d[g-1]+c&&a[f][0]<=d[g]-c;)h.push(a[f++]);++g,h.length&&e.push(h)}return e}}},{"./constants":3,"./utils":11}],5:[function(a,b){"use strict";var c=window.d3,d=a("../types/line");b.exports=function(a){function b(a){var b=a.derivative.x0,c=a.fn(b),d=a.derivative.fn(b);g.fn=function(a){return d*(a-b)+c}}function e(b){var c=this;b.derivative.updateOnMouseOver&&!b.derivative.$$mouseListener&&(b.derivative.$$mouseListener=function(a){b.derivative.x0=a,f(c)},a.owner.on("tip:update",b.derivative.$$mouseListener))}var f,g={skipTip:!0};return f=function(f){f.each(function(h){var i=c.select(this);b.call(f,h),e.call(f,h);var j=i.selectAll("g.derivative").data([g]);j.enter().append("g").attr("class","derivative"),j.call(d(a)),j.selectAll("path").attr("opacity",.5)})}}},{"../types/line":9}],6:[function(a,b){"use strict";var c=window.d3,d=a("./derivative");b.exports=function(a){function b(b){b.each(function(b){var e=c.select(this);b.derivative&&e.call(d(a))})}return b}},{"./derivative":5}],7:[function(a,b){"use strict";var c=window.d3,d=a("extend"),e=a("./utils"),f=a("./constants");b.exports=function(a){function b(a,b){return a.append("path").datum(b).attr("stroke","grey").attr("stroke-dasharray","5,5").attr("opacity",.5).attr("d",i)}function g(d){var e=d.selectAll("g.tip").data(function(a){return[a]});e.enter().append("g").attr("class","tip").attr("clip-path","url(#function-plot-clip-"+a.owner.id+")"),g.el=e.selectAll("g.inner-tip").data(function(a){return[a]}),g.el.enter().append("g").attr("class","inner-tip").style("display","none").each(function(){var d=c.select(this);b(d,[[0,-a.owner.meta.height-h],[0,a.owner.meta.height+h]]).attr("class","tip-x-line").style("display","none"),b(d,[[-a.owner.meta.width-h,0],[a.owner.meta.width+h,0]]).attr("class","tip-y-line").style("display","none"),d.append("circle").attr("r",3),d.append("text").attr("transform","translate(5,-5)")}),d.selectAll(".tip-x-line").style("display",a.xLine?null:"none"),d.selectAll(".tip-y-line").style("display",a.yLine?null:"none")}a=d({xLine:!1,yLine:!1,renderer:function(a,b){return"("+a.toFixed(3)+", "+b.toFixed(3)+")"},owner:null},a);var h=20,i=c.svg.line().x(function(a){return a[0]}).y(function(a){return a[1]});return g.move=function(b,c){var d,i,j,k=1/0,l=-1,m=g.el,n=1e8,o=a.owner.meta,p=m.data()[0].data,q=o.xScale,r=o.yScale,s=o.width,t=o.height;for(d=0;d<p.length;d+=1)if(!p[d].skipTip){var u=p[d].range||[-n,n];if(b>u[0]-f.TIP_X_EPS&&b<u[1]+f.TIP_X_EPS){var v=p[d].fn(b);if(e.isValidNumber(v)){var w=Math.abs(v-c);k>w&&(k=w,l=d)}}}if(-1!==l){i=b,p[l].range&&(i=Math.max(i,p[l].range[0]),i=Math.min(i,p[l].range[1])),j=p[l].fn(i),g.show(),a.owner.emit("tip:update",i,j,l);var x=e.restrict(i,q.invert(-h),q.invert(s+h)),y=e.restrict(j,r.invert(t+h),r.invert(-h));m.attr("transform","translate("+q(x)+","+r(y)+")"),m.select("circle").attr("fill",f.COLORS[l]),m.select("text").attr("fill",f.COLORS[l]).text(a.renderer(i,j))}else g.hide()},g.show=function(){this.el.style("display",null)},g.hide=function(){this.el.style("display","none")},Object.keys(a).forEach(function(b){e.getterSetter.call(g,a,b)}),g}},{"./constants":3,"./utils":11,extend:12}],8:[function(a,b){"use strict";b.exports={line:a("./line"),scatter:a("./scatter")}},{"./line":9,"./scatter":10}],9:[function(a,b){"use strict";var c=window.d3,d=a("../constants"),e=a("../data");b.exports=function(a){function b(f){var g=a.index;f.each(function(f){var j=b.el=c.select(this),k=e.eval(a.owner,f),l=j.selectAll("path").data(k);l.enter().append("path").attr("class","line line-"+g).attr("stroke",d.COLORS[g]),l.each(function(){var b,e=c.select(this);a.closed?(e.attr("fill",d.COLORS[g]),e.attr("fill-opacity",.3),b=i):(e.attr("fill","none"),b=h),e.attr("d",b)}),l.exit().remove()})}var f=a.owner.meta.xScale,g=a.owner.meta.yScale,h=c.svg.line().interpolate(a.interpolate||"cardinal").x(function(a){return f(a[0])}).y(function(a){return g(a[1])}),i=c.svg.area().x(function(a){return f(a[0])}).y0(g(0)).y1(function(a){return g(a[1])});return b}},{"../constants":3,"../data":4}],10:[function(a,b){"use strict";var c=window.d3,d=a("../constants"),e=a("../data");b.exports=function(a){function b(b){var h=a.index;b.each(function(b){var i,j,k=c.hsl(d.COLORS[h].toString()),l=e.eval(a.owner,b),m=[];for(i=0;i<l.length;i+=1)for(j=0;j<l[i].length;j+=1)m.push(l[i][j]);var n=c.select(this).selectAll("circle").data(m);n.enter().append("circle").attr("class","circle circle-"+h).attr("fill",c.hsl(k.toString()).brighter(1.5)).attr("stroke",k),n.attr("opacity",.7).attr("r",1).attr("cx",function(a){return f(a[0])}).attr("cy",function(a){return g(a[1])}),n.exit().remove()})}var f=a.owner.meta.xScale,g=a.owner.meta.yScale;return b}},{"../constants":3,"../data":4}],11:[function(a,b){"use strict";b.exports={isValidNumber:function(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)},getterSetter:function(a,b){var c=this;this[b]=function(d){return arguments.length?(a[b]=d,c):a[b]}},restrict:function(a,b,c){if(b>c){var d=b;b=c,c=d}return a=Math.max(a,b),a=Math.min(a,c)},assert:function(a,b){if(b=b||"assertion failed",!a)throw new Error(b)}}},{}],12:[function(a,b){var c,d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=function(a){"use strict";if(!a||"[object Object]"!==e.call(a))return!1;var b=d.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!f)return!1;var g;for(g in a);return g===c||d.call(a,g)};b.exports=function a(){"use strict";var b,d,e,g,h,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||null==j)&&(j={});l>k;++k)if(b=arguments[k],null!=b)for(d in b)e=j[d],g=b[d],j!==g&&(m&&g&&(f(g)||(h=Array.isArray(g)))?(h?(h=!1,i=e&&Array.isArray(e)?e:[]):i=e&&f(e)?e:{},j[d]=a(m,i,g)):g!==c&&(j[d]=g));return j}},{}]},{},[1])(1)});