/*! Sugarizer 2020-03-14 */
define(function(){"use strict";var a={};return a.getEnvironment=function(b){if(a.isSugarizer()){var c=function(a){var b=RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))};window.top.sugar={},window.top.sugar.environment={activityId:c("aid"),activityName:c("n"),bundleId:c("a"),objectId:c("o"),sharedId:c("s"),help:c("h"),standAlone:c("sa")},"undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.storage.local.get("sugar_settings",function(a){window.top.sugar.environment.user=JSON.parse(a.sugar_settings),b(null,window.top.sugar.environment)}):(window.top.sugar.environment.user=JSON.parse(localStorage.sugar_settings),setTimeout(function(){b(null,window.top.sugar.environment)},0))}else if(a.isStandalone())setTimeout(function(){b(null,{})},0);else{var d=function(){b(null,window.top.sugar.environment)};window.top.sugar?setTimeout(function(){d()},0):(window.top.sugar={},window.top.sugar.onEnvironmentSet=function(){d()})}},a.getObjectId=function(b){a.getEnvironment(function(a,c){b(c.objectId)})},a.getURLScheme=function(){return window.location.protocol},a.getHost=function(){return window.location.hostname},a.isStandalone=function(){var b=a.getURLScheme();return"activity:"!==b&&"file:"!==b&&"0.0.0.0"!==window.location.hostname},a.isSugarizer=function(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!0;if("undefined"!=typeof Storage&&void 0!==window.localStorage)try{return null!==window.localStorage.getItem("sugar_settings")}catch(a){return!1}return!1},a.isSugarizerOS=function(){return void 0!==window.sugarizerOS},a});