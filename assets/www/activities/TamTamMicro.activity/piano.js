/*! Sugarizer 2020-03-14 */
enyo.kind({name:"TamTam.TonePlayer",create:function(){this.player=new Tone.Player,this.pitchShift=new Tone.PitchShift},load:function(a){var b=this,c=new XMLHttpRequest;c.open("GET",a+"?time="+(new Date).getTime(),!0),c.responseType="blob",c.onload=function(){var a=URL.createObjectURL(this.response);b.player.load(a)},c.send()},play:function(a){this.pitchShift.pitch=a,this.pitchShift.toMaster(),this.player.connect(this.pitchShift),this.player.start()},destroy:function(){this.pitchShift.disconnect(),this.pitchShift.dispose(),this.player.disconnect(),this.player.dispose()}}),enyo.kind({name:"TamTam.Piano",components:[{tag:"div",classes:"container",components:[{tag:"ul",components:[{tag:"li",name:"C",classes:"standard red",ontap:"handlePlayNote",components:[{tag:"span",content:"1",classes:"number"}]},{tag:"li",name:"D",classes:"standard orange",ontap:"handlePlayNote",components:[{tag:"span",content:"2",classes:"number"}]},{tag:"li",name:"E",classes:"standard yellow",ontap:"handlePlayNote",components:[{tag:"span",content:"3",classes:"number"}]},{tag:"li",name:"F",classes:"standard green",ontap:"handlePlayNote",components:[{tag:"span",content:"4",classes:"number"}]},{tag:"li",name:"G",classes:"standard aquamarine",ontap:"handlePlayNote",components:[{tag:"span",content:"5",classes:"number"}]},{tag:"li",name:"A",classes:"standard blue",ontap:"handlePlayNote",components:[{tag:"span",content:"6",classes:"number"}]},{tag:"li",name:"B",classes:"standard purple",ontap:"handlePlayNote",components:[{tag:"span",content:"7",classes:"number"}]}]},{tag:"ul",classes:"blackkeys",components:[{tag:"li",name:"C#",classes:"black",ontap:"handlePlayNote"},{tag:"li",name:"D#",classes:"black",ontap:"handlePlayNote"},{tag:"li",name:"hidden",classes:"black hidden"},{tag:"li",name:"F#",classes:"black",ontap:"handlePlayNote"},{tag:"li",name:"G#",classes:"black",ontap:"handlePlayNote"},{tag:"li",name:"A#",classes:"black",ontap:"handlePlayNote"}]}]}],handlePlayNote:function(a){if(!a.repeat&&pianoMode){var b=!1;"keydown"==a.type&&(b=!0);var c,d={1:"C",2:"D",3:"E",4:"F",5:"G",6:"A",7:"B"};if(b){if(c=d[a.key],!"1234567".includes(a.key))return;if(a.ctrlKey)if("12456".includes(a.key))c+="#";else{if("3"!=a.key)return;c="F"}}else c=a.name;var e={C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11};tonePlayer.play(e[c])}},handlePlayNoteListener:function(a){this.handlePlayNote(a)},create:function(){this.inherited(arguments),this.collection=0;var a=this;a.handlePlayNoteListener=a.handlePlayNoteListener.bind(this),document.addEventListener("keydown",a.handlePlayNoteListener,!1),tonePlayer.load("audio/database/"+currentPianoMode+".mp3")},destroy:function(){var a=this;a.inherited(arguments),document.removeEventListener("keydown",a.handlePlayNoteListener,!1)}});