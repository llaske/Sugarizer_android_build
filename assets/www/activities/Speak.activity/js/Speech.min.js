/*! Sugarizer 2018-06-12 */
var Speech=function(){function a(a){document.getElementById("speaklang").innerHTML=a.language,meSpeak.loadConfig("mespeak_config.json"),d(a.language)}function b(a){var b=new AIMLInterpreter({name:"WireInterpreter",age:"42"}),c=["js/alice/star.aiml"],d=a.split(" "),e=new Array(256);for(i=0;i<256;i++)e[i]=0;for(i=0;i<d.length;i++)d[i][0]>="a"&&d[i][0]<="z"&&0==e[d[i].charCodeAt(0)+"A".charCodeAt(0)-"a".charCodeAt(0)]&&(e[d[i].charCodeAt(0)+"A".charCodeAt(0)-"a".charCodeAt(0)]=1,c.unshift("js/alice/"+String.fromCharCode(d[i].charCodeAt(0)+"A".charCodeAt(0)-"a".charCodeAt(0))+".aiml")),(d[i][0]>="A"&&d[i][0]<="Z"||d[i][0]>="0"&&d[i][0]<="9")&&0==e[d[i].charCodeAt(0)]&&(e[d[i].charCodeAt(0)]=1,c.unshift("js/alice/"+d[i][0]+".aiml"));b.loadAIMLFilesIntoArray(c),g="Please ask me something else";var f=function(a,b,c){null==a&&(a="Please ask me something else"),g=a.split(".")[0]};b.findAnswerInLoadedAIMLFiles(a,f)}function c(a,b){var c=new XMLHttpRequest;c.url=a;try{c.open("GET",a),c.onreadystatechange=function(){4==c.readyState&&b((200==c.status||0==c.status)&&c.response.length>0)},c.send("")}catch(a){b(!1)}}function d(a,b){var d=meSpeak.getDefaultVoice();if(d==a||0==d.indexOf(a))return void(b&&b());var e="voices/"+a+".json";c(e,function(a){a?meSpeak.loadVoice(e,b):(document.getElementById("speaklang").innerHTML="en",meSpeak.loadVoice("voices/en.json",b))})}function e(a,c){h=c,"2"==document.getElementById("mode").innerHTML?(b(c),setTimeout(function(){d(a,f)},4e3)):d(a,f)}function f(){function a(){document.getElementById("speaking").innerHTML="0"}var b=h,c=document.getElementById("pitch").innerHTML,d=document.getElementById("rate").innerHTML;if("2"==document.getElementById("mode").innerHTML&&(b=g,console.log(g)),/iPad|iPhone/.test(navigator.userAgent)){var e=meSpeak.speak(b,{speed:d,pitch:c,rawdata:"data-url"},a),f=new Audio(e);f.addEventListener("ended",function(){document.getElementById("speaking").innerHTML="0"}),f.play()}else meSpeak.speak(b,{speed:d,pitch:c},a)}var g="",h="";return{init:a,playVoice:e}};