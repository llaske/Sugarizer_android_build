define(["sugar-web/graphics/palette"],(function(t){"use strict";var e={Formatpalette:function(e,o,n){t.Palette.call(this,e,o),this.formatEvent=document.createEvent("CustomEvent"),this.formatEvent.initCustomEvent("format",!0,!0,{}),this.remoteEvent=document.createEvent("CustomEvent"),this.remoteEvent.initCustomEvent("remote",!0,!0,{});var a=this;a.categories=[],a.buttons=[],this.setCategories=function(t){this.categories=t,this.buttons=[];for(var e=document.createElement("div"),o=0;o<t.length;o++){var n=document.createElement("button");n.className="toolbutton palette-button palette-button-notselected",n.setAttribute("id",t[o].id),n.setAttribute("title",t[o].title);var i="url(icons/"+t[o].cmd+".svg)";n.style.backgroundImage=i;t[o].id;n.onclick=function(){a.setFormat(this.id)},this.buttons.push(n),e.appendChild(n)}this.setContent([e])},this.setFormat=function(t){this.getFormat();for(var e=-1,o=0;o<this.categories.length;o++)if(this.categories[o].id==t){e=o;break}-1!=e&&a.getPalette().dispatchEvent(a.formatEvent)}}};return e.Formatpalette.prototype=Object.create(t.Palette.prototype,{addEventListener:{value:function(t,e,o){return this.getPalette().addEventListener(t,e,o)},enumerable:!0,configurable:!0,writable:!0}}),e.Formatpalette.prototype.setCategories=function(t){this.setCategories(t)},e.Formatpalette.prototype.setFormat=function(t){this.setFormat(t)},e.Formatpalette.prototype.getFormat=function(){for(var t=0;t<this.buttons.length;t++)if("toolbutton palette-button palette-button-selected"==this.buttons[t].className)return this.categories[t].id;return""},e}));