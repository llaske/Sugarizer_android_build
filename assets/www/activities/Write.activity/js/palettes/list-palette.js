define(["sugar-web/graphics/palette"],(function(t){"use strict";var e={Listpalette:function(e,s,i){t.Palette.call(this,e,s),this.listEvent=document.createEvent("CustomEvent"),this.listEvent.initCustomEvent("list",!0,!0,{}),this.remoteEvent=document.createEvent("CustomEvent"),this.remoteEvent.initCustomEvent("remote",!0,!0,{});var n=this;n.categories=[],n.buttons=[],this.setCategories=function(t){this.categories=t,this.buttons=[];for(var e=document.createElement("div"),s=0;s<t.length;s++){var i=document.createElement("button");i.className="toolbutton palette-button palette-button-notselected",i.setAttribute("id",t[s].id),i.setAttribute("title",t[s].title);var o="url(icons/"+t[s].cmd+".svg)";i.style.backgroundImage=o;t[s].id;i.onclick=function(){n.setList(this.id)},this.buttons.push(i),e.appendChild(i)}this.setContent([e])},this.setList=function(t){for(var e=this.getList(),s=0!=e.length&&e==t,i=-1,o=0;o<this.categories.length;o++)if(this.categories[o].id==t){i=o;break}if(-1!=i){for(o=0;o<this.buttons.length;o++)this.buttons[o].className="toolbutton palette-button palette-button-notselected";s?this.getPalette().dispatchEvent(this.listEvent):(this.buttons[i].className="toolbutton palette-button palette-button-selected",n.getPalette().dispatchEvent(n.listEvent))}}}};return e.Listpalette.prototype=Object.create(t.Palette.prototype,{addEventListener:{value:function(t,e,s){return this.getPalette().addEventListener(t,e,s)},enumerable:!0,configurable:!0,writable:!0}}),e.Listpalette.prototype.setCategories=function(t){this.setCategories(t)},e.Listpalette.prototype.setList=function(t){this.setList(t)},e.Listpalette.prototype.getList=function(){for(var t=0;t<this.buttons.length;t++)if("toolbutton palette-button palette-button-selected"==this.buttons[t].className)return this.categories[t].id;return""},e}));