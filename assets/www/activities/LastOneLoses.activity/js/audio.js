/*! Sugarizer 2020-03-14 */
enyo.kind({name:"HTML5.Audio",kind:enyo.Control,tag:"audio",published:{src:"",crossorigin:"",preload:"auto",mediagroup:"",loop:!1,muted:"",controlsbar:!1},events:{onSoundEnded:"",onSoundTimeupdate:""},create:function(){this.inherited(arguments),this.isCordova=(enyo.platform.android||enyo.platform.androidChrome||enyo.platform.ios)&&"http"!=document.location.protocol.substr(0,4),this.startPlay=!1,this.srcChanged(),this.crossoriginChanged(),this.preloadChanged(),this.loopChanged(),this.mutedChanged(),this.controlsbarChanged()},rendered:function(){if(this.inherited(arguments),this.hasNode()){var a=this;enyo.dispatcher.listen(a.hasNode(),"ended",function(){a.doSoundEnded()}),enyo.dispatcher.listen(a.hasNode(),"timeupdate",function(b){a.doSoundTimeupdate({timeStamp:b.timeStamp})})}},srcChanged:function(){this.setAttribute("src",this.src)},crossoriginChanged:function(){this.setAttribute("crossorigin",this.crossorigin)},preloadChanged:function(){this.setAttribute("preload",this.preload)},loopChanged:function(){this.setAttribute("loop",this.loop)},mutedChanged:function(){0!=this.muted.length&&this.setAttribute("muted",this.muted)},controlsbarChanged:function(){this.setAttribute("controls",this.controlsbar)},canPlayType:function(a){var b=this.hasNode();return!!b&&b.canPlayType(a)},play:function(){if(this.isCordova){var a=location.pathname.substring(0,1+location.pathname.lastIndexOf("/"))+this.src,b=this;return void new Media(a,function(){var a=window.setInterval(function(){window.clearInterval(a),b.doSoundEnded()},1e3*this.getDuration())},function(){}).play()}var c=this.hasNode();if(c){this.started=!1;var d=c.play();if(d){var b=this;d.then(function(){b.started=!0}).catch(function(){})}else this.started=!0}},pause:function(){var a=this.hasNode();a&&this.started&&a.pause()},paused:function(){var a=this.hasNode();return!!a&&a.paused},ended:function(){var a=this.hasNode();return!!a&&a.ended}});