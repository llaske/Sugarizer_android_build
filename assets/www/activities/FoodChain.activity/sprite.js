enyo.kind({name:"Sprite",published:{x:0,y:0,width:0,height:0,heading:0,images:[],index:-1,sound:""},create:function(){this.inherited(arguments),this.halfWidth=this.width/2,this.halfHeight=this.height/2,this.animating=!1},draw:function(t){t.save(),t.translate(this.x,this.y);var i=(90-this.heading)*(Math.PI/180);t.rotate(i),t.translate(-this.halfWidth,-this.halfHeight);var n=document.getElementById(this.images[this.index]);t.drawImage(n,0,0),t.restore()},computeRect:function(){var t=(90-this.heading)*(Math.PI/180),i=this.halfWidth*Math.cos(t),n=this.halfHeight*Math.cos(t),a=this.halfWidth*Math.sin(t),h=this.halfHeight*Math.sin(t),e=this.x-i+h,s=this.y-n+a,o=this.x+i+h,d=this.y-n-a,m=this.x+i-h,c=this.y+n-a,r=this.x-i-h,x=this.y+n+a,l=Math.min(e,Math.min(o,Math.min(m,r))),u=Math.min(s,Math.min(d,Math.min(c,x)));return{x:l,y:u,dx:Math.max(o,Math.max(o,Math.max(m,r)))-l,dy:Math.max(d,Math.max(d,Math.max(c,x)))-u}},drawBorder:function(t){t.save(),t.strokeStyle="blue";var i=this.computeRect();t.strokeRect(i.x,i.y,i.dx,i.dy),t.restore()},unDraw:function(t){var i=this.computeRect();t.clearRect(i.x,i.y,i.dx,i.dy)},firstImage:function(){this.index=0},nextImage:function(t){this.index=this.index+1,void 0===t&&(t=this.images.length),this.index>=t&&(this.index=0)},useImage:function(t){this.index=t},playSound:function(){""!=this.sound&&FoodChain.sound.play(this.sound)},intersect:function(t){var i=this.computeRect(),n=t.computeRect();return!(n.x>i.x+i.dx||n.x+n.dx<i.x||n.y>i.y+i.dy||n.y+n.dy<i.y)},distance:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},animate:function(t,i,n,a,h){this.animating||(this.animating=!0,this.animation={ctx:t,index:0,images:i,dx:n,dy:a,action:h},this.animation.job=window.setInterval(enyo.bind(this,"animateTimer"),50))},animateTimer:function(){return this.animation.index==this.animation.images.length?(this.animating=!1,void window.clearInterval(this.animation.job)):(this.unDraw(this.animation.ctx),null!=this.animation.dx&&(this.x+=this.animation.dx),null!=this.animation.dy&&(this.y+=this.animation.dy),this.useImage(this.animation.images[this.animation.index]),this.draw(this.animation.ctx),enyo.platform.android&&"http"!=document.location.protocol.substr(0,4)&&(document.getElementById("acanvas").style.display="none",document.getElementById("acanvas").offsetHeight,document.getElementById("acanvas").style.display="block"),null==this.animation.action||this.animation.action(this)?void(this.animation.index=this.animation.index+1):(this.animating=!1,this.animation.index=this.animation.images.length,void window.clearInterval(this.animation.job)))}});