define(["sugar-web/activity/activity","webL10n","sugar-web/graphics/radiobuttonsgroup","sugar-web/datastore","tutorial","sugar-web/env"],(function(e,n,t,o,a,d){l10n=n;var i=null;requirejs(["domReady!"],(function(n){FoodChain.activity=e,FoodChain.activity.setup();new t.RadioButtonsGroup([document.getElementById("en-button"),document.getElementById("fr-button")]);document.getElementById("en-button").onclick=function(){l10n.language.code="en",FoodChain.setLocale()},document.getElementById("fr-button").onclick=function(){l10n.language.code="fr",FoodChain.setLocale()},document.getElementById("pt_BR-button").onclick=function(){l10n.language.code="pt_BR",FoodChain.setLocale()},document.getElementById("help-button").addEventListener("click",(function(e){a.start()}));window.addEventListener("localized",(function(){null==i?d.getEnvironment((function(e,n){var t="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,o=n.user?n.user.language:t;"fr"==o||"en"==o?l10n.language.code=o:"pt"==o&&(l10n.language.code="pt_BR"),FoodChain.sound=new FoodChain.Audio,FoodChain.sound.renderInto(document.getElementById("header")),FoodChain.context.home=i=(new FoodChain.App).renderInto(document.getElementById("body")),FoodChain.setLocale(),FoodChain.loadContext((function(){""!=FoodChain.context.game&&(i.playGame({name:FoodChain.context.game.replace("FoodChain.",""),level:FoodChain.context.level}),FoodChain.context.object.pause(),FoodChain.context.object.play())}))})):FoodChain.setLocale()}),!1),document.getElementById("stop-button").addEventListener("click",(function(e){FoodChain.sound.pause(),FoodChain.saveContext()})),document.getElementById("fullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.opacity=1,document.getElementById("canvas").style.top="0px",document.getElementById("unfullscreen-button").style.visibility="visible"})),document.getElementById("unfullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.opacity=1,document.getElementById("canvas").style.top="55px",document.getElementById("unfullscreen-button").style.visibility="hidden"}))}))}));