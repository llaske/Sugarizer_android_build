enyo.kind({name:"onyx.Popup",kind:"Popup",classes:"onyx-popup",published:{scrimWhenModal:!0,scrim:!1,scrimClassName:""},statics:{count:0},defaultZ:120,showingChanged:function(){this.showing?(onyx.Popup.count++,this.applyZIndex()):onyx.Popup.count>0&&onyx.Popup.count--,this.showHideScrim(this.showing),this.inherited(arguments)},showHideScrim:function(i){if(this.floating&&(this.scrim||this.modal&&this.scrimWhenModal)){var n=this.getScrim();if(i){var s=this.getScrimZIndex();this._scrimZ=s,n.showAtZIndex(s)}else n.hideAtZIndex(this._scrimZ);enyo.call(n,"addRemoveClass",[this.scrimClassName,n.showing])}},getScrimZIndex:function(){return this.findZIndex()-1},getScrim:function(){return this.modal&&this.scrimWhenModal&&!this.scrim?onyx.scrimTransparent.make():onyx.scrim.make()},applyZIndex:function(){this._zIndex=2*onyx.Popup.count+this.findZIndex()+1,this.applyStyle("z-index",this._zIndex)},findZIndex:function(){var i=this.defaultZ;return this._zIndex?i=this._zIndex:this.hasNode()&&(i=Number(enyo.dom.getComputedStyleValue(this.node,"z-index"))||i),this._zIndex=i}});