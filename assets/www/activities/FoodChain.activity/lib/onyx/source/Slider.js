/*! Sugarizer 2018-05-08 */
enyo.kind({name:"onyx.Slider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{value:0,lockBar:!0,tappable:!0},events:{onChange:"",onChanging:"",onAnimateFinish:""},showStripes:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},moreComponents:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"},{classes:"onyx-slider-taparea"},{name:"knob",classes:"onyx-slider-knob"}],create:function(){this.inherited(arguments),this.createComponents(this.moreComponents),this.valueChanged()},valueChanged:function(){this.value=this.clampValue(this.min,this.max,this.value);var a=this.calcPercent(this.value);this.updateKnobPosition(a),this.lockBar&&this.setProgress(this.value)},updateKnobPosition:function(a){this.$.knob.applyStyle("left",a+"%")},calcKnobPosition:function(a){var b=a.clientX-this.hasNode().getBoundingClientRect().left;return b/this.getBounds().width*(this.max-this.min)+this.min},dragstart:function(a,b){if(b.horizontal)return b.preventDefault(),this.dragging=!0,!0},drag:function(a,b){if(this.dragging){var c=this.calcKnobPosition(b);return this.setValue(c),this.doChanging({value:this.value}),!0}},dragfinish:function(a,b){return this.dragging=!1,b.preventTap(),this.doChange({value:this.value}),!0},tap:function(a,b){if(this.tappable){var c=this.calcKnobPosition(b);return this.tapped=!0,this.animateTo(c),!0}},animateTo:function(a){this.$.animator.play({startValue:this.value,endValue:a,node:this.hasNode()})},animatorStep:function(a){return this.setValue(a.value),!0},animatorComplete:function(a){return this.tapped&&(this.tapped=!1,this.doChange({value:this.value})),this.doAnimateFinish(a),!0}});