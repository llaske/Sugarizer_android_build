enyo.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},tools:[{name:"client",fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",classes:"onyx-more-menu",prepend:!0}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(e,t){this.addRemoveClass("active",t.originator.active)},popItem:function(){var e=this.findCollapsibleItem();if(e){this.movedClass&&this.movedClass.length>0&&!e.hasClass(this.movedClass)&&e.addClass(this.movedClass),this.$.menu.addChild(e);var t=this.$.menu.hasNode();return t&&e.hasNode()&&e.insertNodeInParent(t),!0}},pushItem:function(){var e=this.$.menu.children[0];if(e){this.movedClass&&this.movedClass.length>0&&e.hasClass(this.movedClass)&&e.removeClass(this.movedClass),this.$.client.addChild(e);var t=this.$.client.hasNode();if(t&&e.hasNode()){for(var n,s=void 0,i=0;i<this.$.client.children.length;i++){var o=this.$.client.children[i];if(null!=o.toolbarIndex&&o.toolbarIndex!=i){s=o,n=i;break}}if(s&&s.hasNode()){e.insertNodeInParent(t,s.node);var l=this.$.client.children.pop();this.$.client.children.splice(n,0,l)}else e.appendNodeToParent(t)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var e=this.$.client.children,t=e[e.length-1].hasNode();if(t)return t.offsetLeft+t.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){for(var e=this.$.client.children,t=e.length-1;c=e[t];t--){if(!c.unmoveable)return c;null==c.toolbarIndex&&(c.toolbarIndex=t)}}});