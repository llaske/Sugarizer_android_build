/*! Sugarizer 2018-07-01 */
enyo.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},tools:[{name:"client",fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",classes:"onyx-more-menu",prepend:!0}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(a,b){this.addRemoveClass("active",b.originator.active)},popItem:function(){var a=this.findCollapsibleItem();if(a){this.movedClass&&this.movedClass.length>0&&!a.hasClass(this.movedClass)&&a.addClass(this.movedClass),this.$.menu.addChild(a);var b=this.$.menu.hasNode();return b&&a.hasNode()&&a.insertNodeInParent(b),!0}},pushItem:function(){var a=this.$.menu.children,b=a[0];if(b){this.movedClass&&this.movedClass.length>0&&b.hasClass(this.movedClass)&&b.removeClass(this.movedClass),this.$.client.addChild(b);var c=this.$.client.hasNode();if(c&&b.hasNode()){for(var d,e=void 0,f=0;f<this.$.client.children.length;f++){var g=this.$.client.children[f];if(void 0!=g.toolbarIndex&&g.toolbarIndex!=f){e=g,d=f;break}}if(e&&e.hasNode()){b.insertNodeInParent(c,e.node);var h=this.$.client.children.pop();this.$.client.children.splice(d,0,h)}else b.appendNodeToParent(c)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var a=this.$.client.children,b=a[a.length-1].hasNode();if(b)return b.offsetLeft+b.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){for(var a=this.$.client.children,b=a.length-1;c=a[b];b--){if(!c.unmoveable)return c;void 0==c.toolbarIndex&&(c.toolbarIndex=b)}}});