/*! Sugarizer 2019-01-12 */
enyo.kind({name:"enyo.FlyweightRepeater",published:{count:0,multiSelect:!1,toggleSelected:!1},events:{onSetupItem:""},components:[{kind:"Selection",onSelect:"selectDeselect",onDeselect:"selectDeselect"},{name:"client"}],rowOffset:0,bottomUp:!1,create:function(){this.inherited(arguments),this.multiSelectChanged()},multiSelectChanged:function(){this.$.selection.setMulti(this.multiSelect)},setupItem:function(a){this.doSetupItem({index:a,selected:this.isSelected(a)})},generateChildHtml:function(){var a="";this.index=null;for(var b=0,c=0;b<this.count;b++)c=this.rowOffset+(this.bottomUp?this.count-b-1:b),this.setupItem(c),this.$.client.setAttribute("index",c),a+=this.inherited(arguments),this.$.client.teardownRender();return a},previewDomEvent:function(a){var b=this.index=this.rowForEvent(a);a.rowIndex=a.index=b,a.flyweight=this},decorateEvent:function(a,b,c){var d=b&&null!=b.index?b.index:this.index;b&&null!=d&&(b.index=d,b.flyweight=this),this.inherited(arguments)},tap:function(a,b){this.toggleSelected?this.$.selection.toggle(b.index):this.$.selection.select(b.index)},selectDeselect:function(a,b){this.renderRow(b.key)},getSelection:function(){return this.$.selection},isSelected:function(a){return this.getSelection().isSelected(a)},renderRow:function(a){var b=this.fetchRowNode(a);b&&(this.setupItem(a),b.innerHTML=this.$.client.generateChildHtml(),this.$.client.teardownChildren())},fetchRowNode:function(a){if(this.hasNode()){var b=this.node.querySelectorAll('[index="'+a+'"]');return b&&b[0]}},rowForEvent:function(a){for(var b=a.target,c=this.hasNode().id;b&&b.parentNode&&b.id!=c;){var d=b.getAttribute&&b.getAttribute("index");if(null!==d)return Number(d);b=b.parentNode}return-1},prepareRow:function(a){var b=this.fetchRowNode(a);enyo.FlyweightRepeater.claimNode(this.$.client,b)},lockRow:function(){this.$.client.teardownChildren()},performOnRow:function(a,b,c){b&&(this.prepareRow(a),enyo.call(c||null,b),this.lockRow())},statics:{claimNode:function(a,b){var c=b&&b.querySelectorAll("#"+a.id);c=c&&c[0],a.generated=Boolean(c||!a.tag),a.node=c,a.node&&a.rendered();for(var d,e=0,f=a.children;d=f[e];e++)this.claimNode(d,b)}}});