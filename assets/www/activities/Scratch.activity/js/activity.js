/*! Sugarizer 2020-03-14 */
define(["sugar-web/activity/activity","sugar-web/datastore","sugar-web/env"],function(a,b,c){requirejs(["domReady!"],function(b){a.setup();var d=document.getElementById("stop-button"),e=d.cloneNode(!0);document.getElementById("main-toolbar").replaceChild(e,d),e.addEventListener("click",function(b){document.getElementById("myBlocks").addEventListener("click",function(b){console.log("writing...");var c=document.getElementById("myBlocks").value;a.getDatastoreObject().setDataAsText(c),a.getDatastoreObject().save(function(b){null===b?console.log("write done."):console.log("write failed."),window.onbeforeunload=null,a.close()})});for(var c=!1,d=0;d<document.body.getElementsByTagName("span").length;d++){var e=document.getElementsByTagName("span")[d];if("Save to Sugarizer"==e.innerHTML){e.click(),c=!0;break}}console.log(c?"Call saved successfully":"Unable to save")}),c.getEnvironment(function(b,c){c.objectId&&a.getDatastoreObject().loadAsText(function(a,b,c){if(null==a&&null!=c){for(var d=!1,e=0;e<document.body.getElementsByTagName("span").length;e++){if("Load from Sugarizer"==document.getElementsByTagName("span")[e].innerHTML){document.getElementById("myBlocks").value=c,d=!0;break}}console.log(d?"Loaded successfully":"Unable to load")}})})})});