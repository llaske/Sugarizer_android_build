/*! Sugarizer 2020-03-14 */
define(["sugar-web/activity/activity","sugar-web/datastore","sugar-web/env","webL10n","tutorial"],function(a,b,c,d,e){activity=a,requirejs(["domReady!"],function(a){activity.setup();var b=activity.getDatastoreObject();c.getEnvironment(function(a,b){var c="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,e=b.user?b.user.language:c;d.language.code=e}),loadGallery(null),appInit(),b.loadAsText(function(a,b,c){loadGallery(JSON.parse(c));for(var d=0;d<thumbcnvs.length;d++)drawThumb(thumbcnvs[d],gallery[d]);"edit"==mode?editMode():selectorMode(),loadPos(selected)}),document.getElementById("help-button").addEventListener("click",function(a){e.start()}),document.getElementById("fullscreen-button").addEventListener("click",function(){document.getElementById("main-toolbar").style.display="none",document.getElementById("canvas").style.top="0px",document.getElementById("unfullscreen-button").style.visibility="visible",computeSize()});var f=function(a){document.getElementById("main-toolbar").style.display="block",document.getElementById("canvas").style.top="55px",document.getElementById("unfullscreen-button").style.visibility="hidden",computeSize()};document.getElementById("unfullscreen-button").addEventListener("click",f),"ontouchstart"in document.documentElement&&document.getElementById("unfullscreen-button").addEventListener("touchstart",f,!1)})});