/*! Sugarizer 2020-03-14 */
function eventInit(){touchScreen="ontouchstart"in document.documentElement,touchScreen?(document.getElementById("canvas").addEventListener("touchstart",evMousedown,!1),frame.addEventListener("touchmove",evMousemove,!1),frame.addEventListener("touchend",evMouseup,!1)):(document.getElementById("canvas").onmousedown=evMousedown,frame.onmousemove=evMousemove,frame.onmouseup=evMouseup),computeSize(),window.addEventListener("resize",computeSize)}function computeSize(){var a=document.body.clientHeight-("hidden"==document.getElementById("unfullscreen-button").style.visibility?55:0);zoom=a/748;var b=(document.body.clientWidth-1024*zoom)/2;document.getElementById("frame").style.marginLeft=b+"px";var c=function(a){a.style.transform="scale("+zoom+","+zoom+")",a.style.transformOrigin="0% 0%",a.style.width="1024px",a.style.height="748px"};c(document.getElementById("gridcnv")),c(document.getElementById("hitbuffer")),c(document.getElementById("thumbframe"))}function evMousedown(a){a.preventDefault(),touchScreen&&(a=a.touches[0]);var b=localx(a.clientX),c=localy(a.clientY);onStart(b,c),/Android/i.test(navigator.userAgent)&&"http"!=document.location.protocol.substr(0,4)&&(cnv.style.display="none",cnv.offsetHeight,cnv.style.display="block")}function evMousemove(a){if(a.preventDefault(),touchScreen&&(a=a.touches[0]),onMove){var b=localx(a.clientX),c=localy(a.clientY);onMove(b,c)}}function evMouseup(a){a.preventDefault(),onEnd&&onEnd()}function localx(a){return(a-frame.getBoundingClientRect().left)/zoom}function localy(a){return(a-frame.getBoundingClientRect().top)/zoom}var onStart,onMove,onEnd,zoom,touchScreen=!1;