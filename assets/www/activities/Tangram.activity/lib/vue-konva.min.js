/*!
 * vue-konva v2.1.2 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */
!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("vue"),require("konva")):"function"==typeof define&&define.amd?define(["vue","konva"],o):"object"==typeof exports?exports.VueKonva=o(require("vue"),require("konva")):e.VueKonva=o(e.Vue,e.Konva)}(this,(function(e,o){return function(e){var o={};function t(r){if(o[r])return o[r].exports;var a=o[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var a in e)t.d(r,a,function(o){return e[o]}.bind(null,a));return r},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=1)}([function(o,r){o.exports=e},function(e,o,r){e.exports=r(3)},function(e,r){e.exports=o},function(e,o,r){"use strict";r.r(o);var a=r(0),u=r.n(a);function i(e){var o=e.getLayer()||e.getStage();o&&o.batchDraw()}var c={key:!0,style:!0,elm:!0,isRootInsert:!0},f=".vue-konva-event";function s(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e._konvaNode,u={},v=!1;for(var l in r)if(!c[l]){var p="on"===l.slice(0,2),g=r[l]!==o[l];if(p&&g){var y=l.substr(2).toLowerCase();"content"===y.substr(0,7)&&(y="content"+y.substr(7,1).toUpperCase()+y.substr(8)),a.off(y+f,r[l])}!o.hasOwnProperty(l)&&a.setAttr(l,void 0)}for(var b in o)if(!c[b]){var m="on"===b.slice(0,2),k=r[b]!==o[b];if(m&&k){var w=b.substr(2).toLowerCase();"content"===w.substr(0,7)&&(w="content"+w.substr(7,1).toUpperCase()+w.substr(8)),o[b]&&(a.off(w+f),a.on(w+f,o[b]))}m||o[b]===r[b]||(v=!0,u[b]=o[b])}v&&(a.setAttrs(u),i(a))}var v="_konvaNode";function d(e){var o={};return Object.keys(e).forEach((function(r){o["on"+r]=e[r]})),o}var l=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p=u.a.component("v-stage",{render:function(e){return e("div",this.$slots.default)},watch:{config:{handler:function(e){this.uploadKonva()},deep:!0}},props:{config:{type:Object,default:function(){return{}}}},created:function(){this._konvaNode=new window.Konva.Stage({width:this.config.width,height:this.config.height,container:document.createElement("div")})},mounted:function(){this.$el.innerHTML="",this._konvaNode.container(this.$el),this.uploadKonva(),this.validateChildren()},updated:function(){this.uploadKonva(),this.validateChildren()},beforeDestroy:function(){this._konvaNode.destroy()},methods:{getNode:function(){return this._konvaNode},getStage:function(){return this._konvaNode},uploadKonva:function(){var e=this.oldProps||{},o=l({},this.$attrs,this.config,d(this.$listeners));s(this,o,e),this.oldProps=o},validateChildren:function(){}}}),g=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},y={Group:!0,Layer:!0,FastLayer:!0,Label:!0},h=function(e){var o;return(o={})[v]=!0,o.render=function(o){return y[e]?o("slot",this.$slots.default):null},o.watch={config:{handler:function(e){this.uploadKonva()},deep:!0}},o.props={config:{type:Object,default:function(){return{}}}},o.created=function(){this.initKonva()},o.mounted=function(){(function(e){return function n(e){return e._konvaNode?e:e.$parent?n(e.$parent):{}}(e.$parent)})(this)._konvaNode.add(this._konvaNode),i(this._konvaNode)},o.updated=function(){this.uploadKonva();var e=!1,o=[];(this.$vnode.componentOptions.children||[]).forEach((function(e){var r=function n(e){return e?e.$options[v]?e.getNode():0===e.$children.length?null:n(e.$children[0]):null}(e.componentInstance);if(r&&o.push(r),e.componentInstance&&!r){var a=e.componentOptions.tag;console.error('vue-konva error: You are trying to render "'+a+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.')}})),o.forEach((function(o,r){o.getZIndex()!==r&&(o.setZIndex(r),e=!0)})),e&&i(this._konvaNode)},o.destroyed=function(){i(this._konvaNode),this._konvaNode.destroy(),this._konvaNode.off(".vue-konva-event")},o.methods={getNode:function(){return this._konvaNode},getStage:function(){return this._konvaNode},initKonva:function(){var o=window.Konva[e];o?(this._konvaNode=new o,this._konvaNode.VueComponent=this,this.uploadKonva()):console.error("vue-konva error: Can not find node "+e)},uploadKonva:function(){var e=this.oldProps||{},o=g({},this.$attrs,this.config,d(this.$listeners));s(this,o,e),this.oldProps=o}},o};"undefined"==typeof window||window.Konva||r(2);var b=[{name:"Stage",component:p}].concat(["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"].map((function(e){return{name:e,component:h(e)}}))),m={install:function(e,o){var r="v";o&&o.prefix&&(r=o.prefix),b.forEach((function(o){e.component(""+r+o.name,o.component)}))}};o.default=m,"undefined"!=typeof window&&window.Vue&&window.Vue.use(m)}]).default}));