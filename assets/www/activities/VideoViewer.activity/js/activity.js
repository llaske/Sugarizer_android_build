/*! Sugarizer 2020-03-14 */
define(["sugar-web/activity/activity","sugar-web/env","filterpalette","tutorial","webL10n"],function(a,b,c,d,e){var f=!1;requirejs(["domReady!"],function(g){a.setup(),b.getEnvironment(function(a,b){currentenv=b;var c="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,d=b.user?b.user.language:c;e.language.code=d});var h=document.getElementById("filter-button");c=new c.FilterPalette(h,void 0),c.addEventListener("filter",function(){app.setFilter({category:c.getFilter()}),Util.saveContext(),c.popDown()}),document.getElementById("favorite-button").onclick=function(a,b){var c=a.toElement||a.explicitOriginalTarget||a.currentTarget;f=!f,c.style.backgroundImage=f?"url(icons/favorite.svg)":"url(icons/notfavorite.svg)",app.setFilter({favorite:f})},document.getElementById("library-button").onclick=function(a,b){app.showLibraries()},document.getElementById("help-button").onclick=function(a){d.start()},document.getElementById("fullscreen-button").addEventListener("click",function(){document.getElementById("main-toolbar").style.display="none",document.getElementById("unfullscreen-button").style.visibility="visible",app.resize()}),document.getElementById("unfullscreen-button").addEventListener("click",function(){document.getElementById("main-toolbar").style.display="block",document.getElementById("unfullscreen-button").style.visibility="hidden",app.resize()}),app=new VideoViewer.App({activity:a,filter:c}),app.renderInto(document.getElementById("viewer")),(new Sugar.SearchField).renderInto(document.getElementById("search")),Util.loadContext(function(){app.draw()})})});