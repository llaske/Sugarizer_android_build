define(["sugar-web/graphics/palette","text!sugar-web/graphics/menupalette.html","mustache"],(function(t,e,n){"use strict";var a={MenuPalette:function(a,s,i){t.Palette.call(this,a,s),this.selectItemEvent=document.createEvent("CustomEvent"),this.selectItemEvent.initCustomEvent("selectItem",!0,!0,{item:void 0});var r=document.createElement("ul");r.className="menu",r.innerHTML=n.render(e,i),this.setContent([r]),this.buttons=r.querySelectorAll("button");var l=this;function popDownOnButtonClick(t){l.selectItemEvent.detail.target=t.target,l.getPalette().dispatchEvent(l.selectItemEvent),l.popDown()}for(var o=0;o<this.buttons.length;o++)this.buttons[o].addEventListener("click",popDownOnButtonClick)}};return a.MenuPalette.prototype=Object.create(t.Palette.prototype,{addEventListener:{value:function(t,e,n){return this.getPalette().addEventListener(t,e,n)},enumerable:!0,configurable:!0,writable:!0}}),a}));