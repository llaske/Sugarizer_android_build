/*! Sugarizer 2020-03-14 */
var app=null,l10n,preferences,play,sound,mouse={};define(["sugar-web/activity/activity","tutorial"],function(a,b){requirejs(["domReady!","settings"],function(c,d){a.setup(),document.onmousemove=function(a){mouse.position={x:a.pageX,y:a.pageY}},preferences=d,preferences.load(function(){l10n=preferences.l10n;var c=function(){if(null==app){if(preferences.l10n.language.code!=preferences.language)return void(preferences.l10n.language.code=preferences.language);sound=new TankOp.Audio,sound.renderInto(document.getElementById("audio")),app=new TankOp.App({activity:a}),app.load(),app.renderInto(document.getElementById("board")),document.getElementById("fullscreen-button").addEventListener("click",function(){document.getElementById("main-toolbar").style.visibility="hidden",document.getElementById("unfullscreen-button").style.visibility="visible",document.getElementById("unfullscreen-button").style.top="60px";var a=document.getElementsByClassName("body");for(i=0;i<a.length;i++)a[i].style.bottom="50px";play&&play.resize()}),document.getElementById("help-button").addEventListener("click",function(a){b.start(play)}),document.getElementById("unfullscreen-button").addEventListener("click",function(){document.getElementById("main-toolbar").style.visibility="visible",document.getElementById("unfullscreen-button").style.visibility="hidden";var a=document.getElementsByClassName("body");for(i=0;i<a.length;i++)a[i].style.bottom="0px";play&&play.resize()}),document.getElementById("stop-button").addEventListener("click",function(a){sound.pause()})}else app.setLocale()};window.addEventListener("localized",c,!1)})})});