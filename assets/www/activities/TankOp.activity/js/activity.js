var l10n,preferences,play,sound,app=null,mouse={};define(["sugar-web/activity/activity","tutorial"],(function(e,n){requirejs(["domReady!","settings"],(function(t,l){e.setup(),document.onmousemove=function(e){mouse.position={x:e.pageX,y:e.pageY}},(preferences=l).load((function(){l10n=preferences.l10n;window.addEventListener("localized",(function(){if(null==app){if(preferences.l10n.language.code!=preferences.language)return void(preferences.l10n.language.code=preferences.language);(sound=new TankOp.Audio).renderInto(document.getElementById("audio")),(app=new TankOp.App({activity:e})).load(),app.renderInto(document.getElementById("board")),document.getElementById("fullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.visibility="hidden",document.getElementById("unfullscreen-button").style.visibility="visible",document.getElementById("unfullscreen-button").style.top="60px";var e=document.getElementsByClassName("body");for(i=0;i<e.length;i++)e[i].style.bottom="50px";play&&play.resize()})),document.getElementById("help-button").addEventListener("click",(function(e){n.start(play)})),document.getElementById("unfullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.visibility="visible",document.getElementById("unfullscreen-button").style.visibility="hidden";var e=document.getElementsByClassName("body");for(i=0;i<e.length;i++)e[i].style.bottom="0px";play&&play.resize()})),document.getElementById("stop-button").addEventListener("click",(function(e){sound.pause()}))}else app.setLocale()}),!1)}))}))}));