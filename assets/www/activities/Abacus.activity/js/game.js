function Game(t,s,a,i,e,n,c,u){this.palette=null,this.custompalette=null,this.abacus=null,this.customarr=[15,1,4,5,10],this.abacustype=null,this.updateCustom=function(t,s,a,i,e){this.customarr[0]=t,this.customarr[1]=s,this.customarr[2]=a,this.customarr[3]=i,this.customarr[4]=e},this.Custom=function(t,s){this.abacustype=10;var a=this.customarr;this.abacus=new StandardAbacus(t,a[0],a[1],a[3],a[2],a[4],s),this.abacus.init()},this.Decimal=function(t,s){this.abacustype=0,this.abacus=new OneColumnAbacus(t,15,10,10,s),this.abacus.init()},this.Soroban=function(t,s){this.abacustype=1,this.abacus=new StandardAbacus(t,15,1,5,4,10,s,8),this.abacus.init()},this.Suanpan=function(t,s){this.abacustype=2,this.abacus=new StandardAbacus(t,15,2,5,5,10,s),this.abacus.init()},this.Nepohualtzintzin=function(t,s){this.abacustype=3,this.abacus=new StandardAbacus(t,13,3,5,4,20,s),this.abacus.init()},this.Hexadecimal=function(t,s){this.abacustype=4,this.abacus=new StandardAbacus(t,15,1,8,7,16,s),this.abacus.init()},this.Binary=function(t,s){this.abacustype=5,this.abacus=new OneColumnAbacus(t,15,1,2,s),this.abacus.init()},this.Schety=function(t,s){this.abacustype=6,this.abacus=new OneColumnAbacus(t,15,10,10,s,null,!0),this.abacus.init()},this.Fractions=function(t,s){this.abacustype=7,this.abacus=new OneColumnAbacus(t,15,12,10,s,null,!1,!0),this.abacus.init()},this.Caacupé=function(t,s){this.abacustype=8,this.abacus=new OneColumnAbacus(t,15,12,10,s,null,!1,!1,!0),this.abacus.init()},this.Rods=function(t,s){this.abacustype=9,this.abacus=new OneColumnAbacus(t,10,12,10,s,null,!1,!1,!1,!0),this.abacus.init()},this.copy=function(){var t="";console.log(this.abacus),null!=this.abacus&&null!=this.abacus.answertext&&this.abacus.answertext.text.length>0&&(t=this.abacus.answertext.text).indexOf("=")>-1&&(t=t.substring(t.indexOf("=")+2)),function copyToClipboard(t){var s=document.getElementById("copytext");s.value=t,s.select();try{document.execCommand("copy")}catch(s){window.prompt("Copy to clipboard: ",t)}}(t)},this.resize=function(){var t=this.makeData();s.removeAllChildren(),this.customarr=t.customarr,this.initAbacus(t.mode),this.abacus.restore(t.abacusinuse),this.abacus.restoreTri(t.trix)},this.clear=function(){s.removeAllChildren(),this.initAbacus(this.abacustype)},this.makeData=function(){var t={};return t.mode=this.abacustype,t.customarr=this.customarr,t.abacusinuse=this.abacus.save(),t.trix=this.abacus.saveTri(),console.log("arr"),console.log(t),t},this.stop=function(s){void 0===s&&(s=!1);var a=this.makeData();console.log(a);var i=JSON.stringify(a);t.getDatastoreObject().setDataAsText(i),1==s?t.getDatastoreObject().save((function(){location.reload()})):t.getDatastoreObject().save((function(){t.close()}))},this.init=function(){console.log("init"),console.log(t.getDatastoreObject()),t.getDatastoreObject().getMetadata(this.init_canaccessdatastore.bind(this))},this.init_canaccessdatastore=function(s,a){console.log("datastore check");var i=(new Date).getTime();Math.abs(i-a.creation_time)<2e3?(console.log("Time too short"),this.initActivity(!1,[])):t.getDatastoreObject().loadAsText(this.init_getdatastore.bind(this))},this.init_getdatastore=function(t,s,a){null==t&&null!=a?(a=JSON.parse(a),this.initActivity(!0,a)):this.initActivity(!1,[])},this.initAbacus=function(t){switch(s.removeAllChildren(),t){case 0:this.Decimal(s,a);break;case 1:this.Soroban(s,a);break;case 2:this.Suanpan(s,a);break;case 3:this.Nepohualtzintzin(s,a);break;case 4:this.Hexadecimal(s,a);break;case 5:this.Binary(s,a);break;case 6:this.Schety(s,a);break;case 7:this.Fractions(s,a);break;case 8:this.Caacupé(s,a);break;case 9:this.Rods(s,a);break;case 10:this.Custom(s,a)}},this.initActivity=function(t,u){console.log(t),console.log(u),window.Fraction=i,this.palette=new n.AbacusPalette(this,e.getElementById("abacus-button"),void 0),this.custompalette=new c.CustomPalette(this,e.getElementById("settings-button"),void 0),t?(this.customarr=u.customarr,this.initAbacus(u.mode),this.abacus.restore(u.abacusinuse),this.abacus.restoreTri(u.trix)):this.Suanpan(s,a),this.palette.setUsed()}}