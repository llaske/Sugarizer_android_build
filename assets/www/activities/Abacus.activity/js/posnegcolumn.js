/*! Sugarizer 2019-09-21 */
function PosNegColumn(a,b,c,d,e,f,g,h,i,j,k){void 0===j&&(j=!0),void 0===k&&(k=!1),this.elements=[],this.colWidthScale=8/33,this.blockcols=g,this.value=i,this.nullheight=0,this.abaheight=0,this.drawColumn=function(){var d=this.colWidthScale*h.blockWidth,e=c-b,f=new createjs.Shape;f.graphics.beginFill(this.blockcols[0]).drawRect(d/2*-1,0,d,e),f.graphics.beginStroke(this.blockcols[1]),f.graphics.setStrokeStyle(d/8),f.graphics.moveTo(d/2*-1,0),f.graphics.lineTo(d/2*-1,e),f.graphics.moveTo(d/2,0),f.graphics.lineTo(d/2,e),f.x=a,f.y=b,h.stage.addChild(f)},this.updateY=function(){for(var a=h.verticalMargin*h.blockHeight,c=b+a/2,d=h.blockHeight+a,f=0;f<e;f++)null!=this.elements[f]?(this.elements[f].updateIndex(f),this.elements[f].updateY(c),this.elements.indexOf(null)>f?this.elements[f].updateValue(!0,!0):this.elements.lastIndexOf(null)<f?this.elements[f].updateValue(!0,!1):this.elements[f].updateValue(!1),c+=0==k?d:this.abaheight):c+=this.nullheight;h.updateTextItems()},this.initElements=function(){this.elements=[],0==k?(this.nullheight=c-b-d*(h.blockHeight+h.verticalMargin*h.blockHeight),this.nullheight=this.nullheight/2):this.nullheight=h.blockHeight,console.log(c-b-this.nullheight),console.log(d),this.abaheight=(c-b-2*this.nullheight)/d,console.log(this.abaheight);this.elements.push(null);for(var e=0;e<d;e++){if(console.log("make bead"),0==k)var g=new AbacusBead(a,b,f,h,this,e,i);else var g=new AbacusBead(a,b,f,h,this,e,i,this.abaheight);g.init(),console.log(g),this.elements.push(g)}this.elements.push(null)},this.shuntLeft=function(a){if(-1!=this.elements.lastIndexOf(null,a)){console.log("shuntLeft");var b=this.elements.lastIndexOf(null,a),c=b+1,d=a-c+1,e=this.elements.splice(c,d),f=[b,0].concat(e);Array.prototype.splice.apply(this.elements,f),this.updateY()}},this.shuntRight=function(a){if(-1!=this.elements.indexOf(null,a)){console.log("start"),console.log(this.elements);var b=this.elements.indexOf(null,a)+1,c=b-2,d=c-a+1,e=this.elements.splice(a,d);console.log(e),console.log(this.elements);var f=[b-d,0].concat(e);Array.prototype.splice.apply(this.elements,f),this.updateY()}},this.howManyInUse=function(){var a=[],b=this.elements.indexOf(null);0!=b?a.push(this.elements.slice(0,b)):a.push([]);var b=this.elements.lastIndexOf(null);return b!=this.elements.length-1?a.push(this.elements.slice(b+1,this.elements.length)):a.push([]),a},this.updateAges=function(){for(var a=0;a<this.elements.length;a++)null!=this.elements[a]&&1==j&&this.elements[a].updateAge()},this.restore=function(a){for(var b=[],c=0;c<this.elements.length;c++)null!=this.elements[c]&&b.push(this.elements[c]);this.elements=b;for(var c=0;c<a.length;c++)null==a[c]&&this.elements.splice(c,0,null);this.updateY()},this.restoreAge=function(a){if(1==j)for(var b=0;b<this.elements.length;b++)null!=this.elements[b]&&this.elements[b].forceAge(a[b])},this.save=function(){for(var a=[],b=0;b<this.elements.length;b++)null==this.elements[b]?a.push(null):a.push(this.elements[b].age);return a},this.init=function(){this.drawColumn(),this.initElements(),this.updateY()}}