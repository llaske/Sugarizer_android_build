/*! Sugarizer 2020-03-14 */
function runactivity(a,b,c,d,e,f,g,h,i){function j(){function d(){l.update()}function j(){"hidden"===document.getElementById("unfullscreen-button").style.visibility?(k.width=window.innerWidth,k.height=window.innerHeight-55,m.resize()):(k.width=window.innerWidth,k.height=window.innerHeight,m.resize())}k=document.getElementById("actualcanvas"),k.width=window.innerWidth,k.height=window.innerHeight-55,l=new createjs.Stage(k),l.update(),l.mouseEventsEnabled=!0,createjs.Touch.enable(l),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",d);var m=new Game(a,l,c,f,b,g,h,e);setTimeout(function(){m.init()},500),window.addEventListener("activityStop",function(a){a.preventDefault(),m.stop()}),document.getElementById("fullscreen-button").addEventListener("click",function(){document.getElementById("main-toolbar").style.opacity=0,document.getElementById("canvas").style.top="0px",document.getElementById("unfullscreen-button").style.visibility="visible",j()}),document.getElementById("unfullscreen-button").addEventListener("click",function(){document.getElementById("main-toolbar").style.opacity=1,document.getElementById("canvas").style.top="55px",document.getElementById("unfullscreen-button").style.visibility="hidden",j()}),window.addEventListener("resize",j,!1),b.getElementById("clear-button").addEventListener("click",function(a){m.clear()}),b.getElementById("copy-button").addEventListener("click",function(a){m.copy()}),document.getElementById("help-button").addEventListener("click",function(a){i.start()})}var k,l;j()}define(["sugar-web/activity/activity","easeljs","tweenjs","activity/game","activity/standardabacus","activity/standardabacuscolumn","activity/abacusbead","activity/onecolumnabacus","activity/posnegcolumn"],function(a){requirejs(["domReady!"],function(b){requirejs(["sugar-web/env","sugar-web/datastore","fraction","activity/abacuspalette","activity/custompalette","tutorial","webL10n"],function(c,d,e,f,g,h,i){a.setup(),c.getEnvironment(function(a,b){currentenv=b;var c="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,d=b.user?b.user.language:c;window.addEventListener("localized",function(a){a.language!=d&&setTimeout(function(){i.language.code=d},50)})}),a.getXOColor(function(i,j){runactivity(a,b,j,c,d,e,f,g,h)})})})});