/*! Sugarizer 2020-03-14 */
function AbacusBead(a,b,c,d,e,f,g,h){void 0===h&&(h=-1);var i=net.brehaut.Color;this.bead=null,this.originaly=null,this.index=f,this.value=g,this.text=null,this.containerbead=null,this.age=4,this.y=b,this.updateY=function(a){this.containerbead.y=a,this.y=a},this.resetAge=function(){this.age=-1},this.forceAge=function(a){this.age=a-1,console.log(this.age),this.updateAge()},this.updateAge=function(){var a=navigator.userAgent.toLowerCase();if(!(-1!=a.indexOf("safari")&&-1==a.indexOf("chrome")||/Android/i.test(a)||a.match(/ipad|iphone|ipod/g)))if(this.age+=1,this.age<=0)this.redraw("#FFF"),this.age=0;else if(this.age<3){var b=i(c);b=b.setSaturation(b.getSaturation()/3),b.s=b.s/2,console.log(b.toRGB()),this.redraw(b.toRGB())}else 3==this.age&&this.redraw(c)},this.redraw=function(a){var b;b=-1==h?d.blockHeight:h,this.bead.graphics.clear().beginStroke("#000000").setStrokeStyle(d.blockWidth/25).beginFill(a).drawRoundRect(-1*d.blockWidth/2,0,d.blockWidth,b,d.blockHeight/2)},this.drawBead=function(b){void 0===b&&(b=c);var e;e=-1==h?d.blockHeight:h,this.bead=new createjs.Shape,this.bead.graphics.beginStroke("#000000"),this.bead.graphics.setStrokeStyle(d.blockWidth/25),this.bead.graphics.beginFill(b).drawRoundRect(-1*d.blockWidth/2,0,d.blockWidth,e,d.blockHeight/2),this.bead.x=0,this.bead.y=0,this.containerbead=new createjs.Container,this.containerbead.addChild(this.bead),this.containerbead.x=a,this.containerbead.y=this.y,d.stage.addChild(this.containerbead)},this.updateIndex=function(a){var b=this.index;this.index=a,this.index!=b&&this.resetAge()},this.addClickListeners=function(){var a=this,b=e,c="down";this.bead.on("mousedown",function(b){a.originaly=b.stageY}),this.bead.on("pressup",function(c){a.originaly<c.stageY?b.shuntRight(a.index):a.originaly>c.stageY&&b.shuntLeft(a.index)}),this.bead.addEventListener("click",function(d){"down"===c?(b.shuntLeft(a.index),c="up"):"up"===c&&(b.shuntRight(a.index),c="down")})},this.updateValue=function(a,b){void 0===b&&(b=!0),1==a&&this.value.toFraction(!0).length<=4?this.text.text=0==b?"-"+this.value.toFraction(!0):this.value.toFraction(!0):this.text.text=""},this.drawText=function(){var a;a="#000"==c||"#000000"==c?"#FFF":"#000";var b=new createjs.Text("",(d.blockWidth/3).toString()+"px Arial",a);b.set({textAlign:"center"}),b.x=0;var e;e=-1==h?d.blockHeight/3:h/2-d.blockHeight/3,b.y=e,this.containerbead.addChild(b),this.text=b},this.init=function(){this.drawBead(),this.addClickListeners(),this.drawText()}}