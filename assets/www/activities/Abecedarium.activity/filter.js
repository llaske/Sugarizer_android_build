/*! Sugarizer 2019-01-12 */
var minFilterEntries=3;enyo.kind({name:"Abcd.FilterPopup",kind:"onyx.Popup",classes:"filter-popup",centered:!0,modal:!0,floating:!0,published:{filter:null},events:{onFilterChanged:""},components:[{name:"box",classes:"filterBox",components:[]},{name:"trash",kind:"Image",src:"images/trashcan.png",classes:"standardButton trashButton",ontap:"trashTaped"}],create:function(){this.inherited(arguments),this.filterChanged()},rendered:function(){this.displayThemes()},filterChanged:function(){this.render()},displayThemes:function(){this.cleanBox();var a=Abcd.themes.length,b=-1;null!=this.filter&&"Abcd.Collection"==this.filter.kind&&(b=Abcd.collections[this.filter.index].theme),this.$.box.createComponent({classes:"linebreak"}).render();for(var c=0;c<a;c++)this.$.box.createComponent({kind:"Abcd.Theme",index:c,selected:c==b,ontap:"displayCollections"},{owner:this}).render();this.$.box.createComponent({classes:"linebreak"}).render(),this.$.box.createComponent({classes:"linebreak"}).render();for(var c=0;c<26;c++){var d=String.fromCharCode(65+c).toLowerCase();this.$.box.createComponent({kind:"Abcd.Letter",letter:d,selected:null!=this.filter&&this.filter.letter==d,ontap:"filterOnLetter"},{owner:this}).render()}},display:function(a){this.filter=a,this.render(),this.show()},displayCollections:function(a,b){var c=a.index,d=Abcd.collections.length;this.cleanBox();for(var e=0;e<d;e++)Abcd.collections[e].theme==c&&this.$.box.createComponent({kind:"Abcd.Collection",index:e,selected:null!=this.filter&&this.filter.index==e,ontap:"filterOnCollection"},{owner:this}).render()},trashTaped:function(){this.hide(),this.filter=null,this.doFilterChanged()},filterOnLetter:function(a,b){!Abcd.letters.hasOwnProperty(a.letter)||Abcd.letters[a.letter].length<minFilterEntries||(this.hide(),this.filter=a,this.doFilterChanged())},filterOnCollection:function(a,b){for(var c=a.index,d=Abcd.collections[c],e=d.entries.length,f=0,g=0;g<e;g++){var h=d.entries[g];1==Abcd.entries[h][Abcd.context.lang]&&f++}f<minFilterEntries||(this.hide(),this.filter=a,this.doFilterChanged())},cleanBox:function(){var a=[];enyo.forEach(this.$.box.getControls(),function(b){a.push(b)});for(var b=0;b<a.length;b++)a[b].destroy()}});