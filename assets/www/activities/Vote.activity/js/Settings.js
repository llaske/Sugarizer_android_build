var PollSettings={template:'\n\t\t<div class="settings poll-settings">\n\t\t\t<form @submit.prevent="onConfirm">\n\t\t\t\t<div>\n\t\t\t\t\t<div class="image-label">\n\t\t\t\t\t\t<label for="image">{{ l10n.stringImage }}</label>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button type="button" id="delete-image-button" v-if="poll.image.indexOf(\'data:image\') != -1" @click="deleteUserImage"></button>\n\t\t\t\t\t\t\t<button type="button" id="image-edit-button" @click="onUploadClick"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<img :src="poll.image">\n\t\t\t\t</div>\n\t\t\t\t<div id="question">\n\t\t\t\t\t<label for="question">{{ l10n.stringQuestion }}</label>\n\t\t\t\t\t<input type="text" name="question" v-model="poll.question" required>\n\t\t\t\t</div>\n\t\t\t\t<div id="type">\n\t\t\t\t\t<label for="type">{{ l10n.stringType }}</label>\n\t\t\t\t\t<select v-model="poll.typeVariable">\n\t\t\t\t\t\t<option :value="type" v-for="(image, type) in types" :key="type">{{ $root.$refs.SugarL10n.get(type) }}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="poll.typeVariable == \'MCQ\' || poll.typeVariable == \'ImageMCQ\'">\n\t\t\t\t\t<div class="options-label">\n\t\t\t\t\t\t<label for="options">{{ l10n.stringOptions }}</label>\n\t\t\t\t\t\t<button type="button" class="add-option-button" @click="addOption"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<draggable :class="{ \'image-mcq\': poll.typeVariable == \'ImageMCQ\' }" v-model="poll.options" animation="300">\n\t\t\t\t\t\t<div class="option" :id="i" v-for="(option, i) in poll.options" :key="i">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tv-if="poll.typeVariable == \'MCQ\'"\n\t\t\t\t\t\t\t\ttype="text" \n\t\t\t\t\t\t\t\tname="option" \n\t\t\t\t\t\t\t\tv-model="poll.options[i]" \n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="option-image">\n\t\t\t\t\t\t\t\t<img v-if="poll.typeVariable == \'ImageMCQ\'" :src="option">\n\t\t\t\t\t\t\t\t<button type="button" class="delete-option-button" :class="{ \'image-mcq\': poll.typeVariable == \'ImageMCQ\' }" @click="deleteOption(i)"></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</draggable>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="buttons-row">\n\t\t\t\t\t<button type="submit" :disabled="poll.question == \'\'">\n\t\t\t\t\t\t<img src="icons/dialog-ok.svg">\n\t\t\t\t\t\t<span>{{ l10n.stringConfirm }}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type="button" @click="$emit(\'go-back-to\', \'polls-grid\')">\n\t\t\t\t\t\t<img src="icons/dialog-cancel.svg">\n\t\t\t\t\t\t<span>{{ l10n.stringCancel }}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t',props:["polls","activePoll","activePollStatus"],data:()=>({poll:{type:"",typeVariable:"",image:"",question:"",options:[],results:null},types:{YesNo:"images/yesno.png",Rating:"images/rating.png",MCQ:"images/mcq.png",Text:"images/text.png",ImageMCQ:"images/image-mcq.png"},l10n:{stringQuestion:"",stringType:"",stringImage:"",stringOptions:"",stringConfirm:"",stringCancel:""}}),watch:{"poll.typeVariable":function(t,i){this.poll.type=this.$root.$refs.SugarL10n.get(t),-1==this.poll.image.indexOf("data:image")&&(this.poll.image=this.types[t])}},created:function(){this.activePoll&&"editing"==this.activePollStatus?this.poll=JSON.parse(JSON.stringify(this.activePoll)):(this.poll.typeVariable=Object.keys(this.types)[0],this.poll.image=this.types[this.poll.typeVariable])},mounted:function(){this.$root.$refs.SugarL10n.localize(this.l10n)},methods:{onUploadClick(t){let i=this;this.$root.$refs.SugarJournal.insertFromJournal([{mimetype:"image/png"},{mimetype:"image/jpeg"}]).then((t,e)=>{i.poll.image=t})},addOption(){if("MCQ"==this.poll.typeVariable)this.poll.options.push("");else if("ImageMCQ"==this.poll.typeVariable){let t=this;this.$root.$refs.SugarJournal.insertFromJournal([{mimetype:"image/png"},{mimetype:"image/jpeg"}]).then((i,e)=>{t.poll.options.push(i)})}},deleteOption(t){this.$delete(this.poll.options,t)},deleteUserImage(){this.poll.image=this.types[this.poll.typeVariable]},onConfirm(){"MCQ"!=this.poll.typeVariable&&"ImageMCQ"!=this.poll.typeVariable&&this.$delete(this.poll,"options"),this.activePoll&&"editing"==this.activePollStatus?this.editPoll():this.addPoll()},editPoll(){var t=this,i=this.polls.findIndex((function(i){return i.id===t.activePoll.id}));this.polls[i]=this.poll,this.$emit("go-back-to","polls-grid")},addPoll(){var t=this.polls.length;this.poll.id=t,this.polls.push(this.poll),this.$emit("poll-added",this.poll.id)}}};