!function(){"use strict";if(self.Squeak||(self.Squeak={}),!Squeak.Settings){var settings;try{if(settings=self.localStorage,settings["squeak-foo:"]="bar","bar"!==settings["squeak-foo:"])throw Error();delete settings["squeak-foo:"]}catch(y){settings={}}Squeak.Settings=settings}function vR(y,S){return 31<S?0:y<<S}function wR(y,S){return 31<S?0:y>>>S}function ER(){return CR}function FR(y,S){var F,P,H;for((P=S-y)<0&&(P=0-P),F=63,H=1;H<=62;H++)63===F&&DR[H-1]>=P&&(F=H);return F}function GR(y){var S,F,P;for(F=0,S=y;;){if(!(0<(P=S-xR)))return F+=wR(zR,0-P),zR&=wR(255,8-(xR-=S)),F;F+=vR(zR,P),S-=xR,zR=AR[++yR-1],xR=8}}function HR(y,S){var F,P,H,J;for(P=S,H=y;;){if(!((J=(F=8-xR)-H)<0))return zR+=vR(P,J),xR+=H,self;zR+=wR(P,0-J),AR[++yR-1]=zR,P&=vR(1,(zR=xR=0)-J)-1,H-=F}}function IR(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;if(y=BR.stackValue(1),S=BR.stackIntegerValue(0),oe=BR.fetchIntegerofObject(0,y),se=BR.fetchIntegerofObject(1,y),te=BR.fetchIntegerofObject(2,y),ie=BR.fetchIntegerofObject(3,y),re=BR.fetchIntegerofObject(4,y),ae=BR.fetchIntegerofObject(5,y),zR=BR.fetchIntegerofObject(6,y),xR=BR.fetchIntegerofObject(7,y),yR=BR.fetchIntegerofObject(8,y),AR=BR.fetchBytesofObject(9,y),le=BR.fetchInt16ArrayofObject(10,y),ue=BR.fetchIntegerofObject(12,y),ee=BR.fetchIntegerofObject(13,y),DR=BR.fetchInt16ArrayofObject(14,y),ne=BR.fetchInt16ArrayofObject(15,y),BR.failed())return null;for(H=1;H<=S;H++)if(1==(H&ae))32767<(oe=GR(16))&&(oe-=65536),se=GR(6),le[++ue-1]=oe;else{for(P=GR(ee),Q=DR[se],J=0,F=re;0<F;)0<(P&F)&&(J+=Q),Q>>>=1,F>>>=1;J+=Q,0<(P&te)?oe-=J:oe+=J,32767<oe?oe=32767:oe<-32768&&(oe=-32768),(se+=ne[P&ie])<0?se=0:88<se&&(se=88),le[++ue-1]=oe}if(BR.failed())return null;BR.storeIntegerofObjectwithValue(0,y,oe),BR.storeIntegerofObjectwithValue(1,y,se),BR.storeIntegerofObjectwithValue(6,y,zR),BR.storeIntegerofObjectwithValue(7,y,xR),BR.storeIntegerofObjectwithValue(8,y,yR),BR.storeIntegerofObjectwithValue(12,y,ue),BR.pop(1)}function JR(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve;if(y=BR.stackValue(1),S=BR.stackIntegerValue(0),de=BR.fetchInt16ArrayofObject(0,y),he=BR.fetchInt16ArrayofObject(1,y),ue=BR.fetchIntegerofObject(2,y),ce=BR.fetchIntegerofObject(3,y),le=BR.fetchIntegerofObject(4,y),fe=BR.fetchIntegerofObject(5,y),zR=BR.fetchIntegerofObject(6,y),xR=BR.fetchIntegerofObject(7,y),yR=BR.fetchIntegerofObject(8,y),AR=BR.fetchBytesofObject(9,y),ve=BR.fetchInt16ArrayofObject(10,y),be=BR.fetchInt16ArrayofObject(11,y),me=BR.fetchIntegerofObject(12,y),oe=BR.fetchIntegerofObject(13,y),DR=BR.fetchInt16ArrayofObject(14,y),pe=BR.fetchInt16ArrayofObject(15,y),BR.failed())return null;for(ie=de[0],ae=de[1],Q=he[0],ee=he[1],J=1;J<=S;J++)if(1==(J&fe))ie=GR(16),Q=GR(6),ae=GR(16),ee=GR(6),32767<ie&&(ie-=65536),32767<ae&&(ae-=65536),ve[++me-1]=ie,be[me-1]=ae;else{for(P=GR(oe),H=GR(oe),se=DR[Q],ne=DR[ee],te=re=0,F=le;0<F;)0<(P&F)&&(te+=se),0<(H&F)&&(re+=ne),se>>>=1,ne>>>=1,F>>>=1;te+=se,re+=ne,0<(P&ue)?ie-=te:ie+=te,0<(H&ue)?ae-=re:ae+=re,32767<ie?ie=32767:ie<-32768&&(ie=-32768),32767<ae?ae=32767:ae<-32768&&(ae=-32768),(Q+=pe[P&ce])<0?Q=0:88<Q&&(Q=88),(ee+=pe[H&ce])<0?ee=0:88<ee&&(ee=88),ve[++me-1]=ie,be[me-1]=ae}if(de[0]=ie,de[1]=ae,he[0]=Q,he[1]=ee,BR.failed())return null;BR.storeIntegerofObjectwithValue(6,y,zR),BR.storeIntegerofObjectwithValue(7,y,xR),BR.storeIntegerofObjectwithValue(8,y,yR),BR.storeIntegerofObjectwithValue(12,y,me),BR.pop(1)}function KR(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe;if(y=BR.stackValue(1),S=BR.stackIntegerValue(0),le=BR.fetchIntegerofObject(0,y),oe=BR.fetchIntegerofObject(1,y),ae=BR.fetchIntegerofObject(2,y),se=BR.fetchIntegerofObject(4,y),ne=BR.fetchIntegerofObject(5,y),zR=BR.fetchIntegerofObject(6,y),xR=BR.fetchIntegerofObject(7,y),yR=BR.fetchIntegerofObject(8,y),AR=BR.fetchBytesofObject(9,y),fe=BR.fetchInt16ArrayofObject(10,y),ce=BR.fetchIntegerofObject(12,y),ie=BR.fetchIntegerofObject(13,y),DR=BR.fetchInt16ArrayofObject(14,y),ue=BR.fetchInt16ArrayofObject(15,y),BR.failed())return null;for(re=DR[0],J=1;J<=S;J++)if(1==(J&ne))(Q=le=fe[++ce-1])<0&&(Q+=65536),HR(16,Q),J<S&&(oe=FR(le,fe[ce])),HR(6,oe);else{for(te=0,(H=fe[++ce-1]-le)<0&&(te=ae,H=0-H),ee=P=0,F=se;0<F;)re<=H&&(P+=F,ee+=re,H-=re),re>>>=1,F>>>=1;ee+=re,0<te?le-=ee:le+=ee,32767<le?le=32767:le<-32768&&(le=-32768),(oe+=ue[P])<0?oe=0:88<oe&&(oe=88),re=DR[oe],HR(ie,te|P)}if(0<xR&&(AR[++yR-1]=zR),BR.failed())return null;BR.storeIntegerofObjectwithValue(0,y,le),BR.storeIntegerofObjectwithValue(1,y,oe),BR.storeIntegerofObjectwithValue(6,y,zR),BR.storeIntegerofObjectwithValue(7,y,xR),BR.storeIntegerofObjectwithValue(8,y,yR),BR.storeIntegerofObjectwithValue(12,y,ce),BR.pop(1)}function LR(){var y;return y=BR.stackValue(1),BR.stackIntegerValue(0),zR=BR.fetchIntegerofObject(6,y),xR=BR.fetchIntegerofObject(7,y),yR=BR.fetchIntegerofObject(8,y),AR=BR.fetchIntegerofObject(9,y),DR=BR.fetchIntegerofObject(14,y),BR.failed()?null:(success(!1),BR.failed()?null:(BR.storeIntegerofObjectwithValue(6,y,zR),BR.storeIntegerofObjectwithValue(7,y,xR),BR.storeIntegerofObjectwithValue(8,y,yR),void BR.pop(1)))}function MR(y){return 0!=((BR=y).majorVersion()==tR)&&BR.minorVersion()>=uR}var tR,uR,xR,yR,zR,AR,BR,CR,DR,rT,sT,CT,DT,ET,FT,GT,HT,IT,JT,KT,LT,MT,NT,OT,PT,QT,RT,ST,TT,UT,VT,WT,XT,YT,ZT,$T,_T,aU,bU,cU,dU,eU,fU,gU,hU,iU,jU,kU,lU,mU,nU,oU,pU,qU,rU,sU,tU,uU,vU,wU,xU,yU,zU,AU,BU,CU,DU,EU,FU,GU,HU,IU,JU,KU,LU,MU,NU,OU,PU,QU,RU,SU,TU,UU,VU,WU,XU,YU,ZU,$U,_U,aV,bV,cV,dV,eV,fV,gV,hV,iV,jV,kV,lV,mV,nV,oV,pV,qV,rV,sV,tV,uV,vV,wV,xV,yV,zV,AV,BV,CV,DV,EV,FV,GV,HV,IV,JV,KV,LV,MV,NV,OV,PV,QV,RV,SV,TV,UV,VV,WV,XV,YV,ZV,$V,_V,aW,bW,cW,dW,eW,fW,gW,hW,iW,jW,kW,lW,mW,nW,oW,pW,qW,rW,sW,tW,uW,vW,wW,xW,yW,zW,AW,BW,CW,DW,EW,FW,GW,HW,IW,JW,KW,LW,MW,NW,OW,PW,QW,RW,SW,TW,UW,VW,WW,XW,YW,ZW,$W,_W,aX,bX,cX,dX,eX,fX,gX,hX,iX,jX,kX,lX,mX,nX,oX,pX,qX,rX,sX,tX,uX,vX,wX,xX,yX,zX,AX,BX,CX,DX,EX,FX,GX,HX,IX,JX,KX,LX,Mra,Nra,Wra,Xra,Yra,Zra,$ra,_ra,asa,bsa,csa,dsa,esa,fsa,gsa,hsa,isa,jsa,ksa,lsa,msa,nsa,osa,psa,qsa,rsa,ssa,tsa,usa,vsa,wsa,xsa,ysa,zsa,Asa,Bsa,Csa,Dsa,Esa,Fsa,Gsa,Hsa,Isa,Jsa,Ksa,Lsa,Msa,Nsa,Osa,Psa,Qsa,Rsa,Ssa,Tsa,Usa,Vsa,Wsa,Xsa,Ysa,Zsa,$sa,_sa,ata,bta,cta,dta,eta,fta,gta,hta,ita,jta,kta,lta,mta,nta,ota,pta,qta,rta,sta,tta,uta,vta,wta,xta,yta,zta,Ata,Bta,Cta,Dta,Eta,Fta,Gta,Hta,Ita,Jta,Kta,Lta,Mta,Nta,Ota,Pta,Qta,Rta,Sta,Tta,Uta,Vta,Wta,Xta,Yta,Zta,$ta,_ta,aua,bua,cua,dua,kHa,lHa,pHa,qHa,rHa,sHa,tHa,uHa,vHa,wHa,xHa,yHa,zHa,AHa,AIa,BIa,DIa,EIa,HKa,IKa,LKa,MKa,jMa,kMa,qMa,rMa,sMa,tMa,uMa,vMa,wMa,xMa,yMa,zMa,AMa,BMa,CMa,DMa,EMa,FMa,GMa,HMa,IMa,JMa,KMa,LMa,MMa,NMa,OMa,PMa,QMa,RMa,SMa,TMa,UMa,VMa,WMa,XMa,YMa,ZMa,$Ma,_Ma,aNa,bNa,cNa,dNa,eNa,fNa,gNa,hNa,iNa,jNa,kNa,lNa,mNa,nNa,oNa,pNa,qNa,rNa,RPa,SPa,XPa,YPa,ZPa,$Pa,_Pa,aQa,bQa,SZa,TZa,YZa,ZZa,$Za,_Za,a$a,b$a,c$a,wdb,xdb,Bdb,Cdb,Ddb,Edb,Fdb,Gdb,Hdb,Idb,Jdb,Kdb,Ldb,Mdb,Ndb,Odb,Pdb,Qdb,Rdb,Sdb,Tdb,Udb,Vdb,Wdb,Xdb,Ydb,Zdb,$db,_db,aeb,beb,ceb,deb,eeb,feb,geb,heb,ieb,jeb,keb,leb,meb,neb,oeb,peb,qeb,reb,seb,teb,ueb,veb,web,xeb,yeb,zeb,Aeb,Beb,Ceb,Deb,Eeb,Feb,Geb,Heb,Ieb,Jeb,Keb,Leb,Meb,Neb,Oeb,Peb,Qeb,Reb,Seb,Teb,Ueb,Veb,Web,Xeb,Yeb,Zeb,$eb,_eb,afb,bfb,cfb,dfb,efb,ffb,gfb,hfb,ifb,jfb,kfb,lfb,mfb,nfb,ofb,pfb,qfb,rfb,sfb,bjb,cjb,jjb,kjb,ljb,mjb,njb,Rrb,Srb,Vrb,Wrb,Xrb,Yrb,Zrb,$rb,Ntb,Otb,Stb,Ttb,Xvb,Yvb,awb,bwb,QGb,RGb,UGb,VGb,WGb,XGb,YGb,ZGb,wJb,xJb,BJb,CJb,GKb,HKb,PKb,QKb,RKb,SKb,TKb,UKb,VKb,WKb,XKb,YKb,ZKb,$Kb,_Kb,aLb,bLb,cLb,dLb,eLb,fLb,gLb,hLb,iLb,jLb,kLb,lLb,mLb,nLb,oLb,pLb,qLb,rLb,sLb,tLb,uLb,vLb,wLb,xLb,yLb,zLb,ALb,BLb,CLb,DLb,ELb,FLb,GLb,HLb;function tT(y){return"number"==typeof y?FX.classSmallInteger():y.sqClass}function uT(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function wT(y,S){return 0|Math.floor(y/S)}function yT(y,S){return 31<S?0:y<<S}function zT(y,S){return 31<S?0:y>>>S}function AT(y,S){return new Int32Array(y.buffer,y.byteOffset+4*S)}function BT(y,S){return new Float32Array(y.buffer,y.byteOffset+4*S)}function MX(){return LX[aW]}function NX(y){return LX[aW]=y}function OX(){return LX[bW]}function QX(y,S){var F;return S<(F=y+TX()-1&~(TX()-1))?S:F}function SX(y,S){return S-1&~(TX()-1)}function TX(){return LX[dW]}function VX(){return LX[eW]}function WX(y){return LX[eW]=y}function XX(){return LX[fW]}function YX(y){return LX[fW]=y}function $X(y,S){var F;return 0===y?S<0?0-S:S:0===S?y<0?0-y:y:(F=y*y+S*S)<32?[0,1,1,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6][F]:Math.sqrt(F)+.5|0}function _X(y){lY(1)&&(EX[b_()]=y,c_(b_()+1))}function dY(){return LX[gW]}function eY(y){return LX[gW]=y}function fY(){return LX[hW]}function gY(y){return LX[hW]=y}function hY(y){return H0(y)}function jY(){return G3(6),H3()}function kY(y,S){var F,P,H,J;if(!oY(H=bU+y))return 0;if(JX=(P=JX)+H,X0(P,_U),T0(P,0),V0(P,H),F=CZ(P),g_())for(J=0;J<=y-1;J++)F[J]=v3(S[J]);else for(J=0;J<=y-1;J++)F[J]=S[J];return M0(P,ZT,y),P}function lY(y){var S,F,P,H;if(hY(y)){if(0!==fY())for(P=fY(),S=fY()+y,F=1,H=fY();F<=H;F++)uX[--S]=uX[--P];return uX=AT(uX,y),1}}function mY(y,S,F){var P,H,J,Q;if(!oY(H=MV+S))return 0;if(JX=(P=JX)+H,X0(P,F?gV:fV),T0(P,0),V0(P,H),Q=f_(P),g_())for(J=0;J<=S-1;J++)Q[J]=v3(y[J]);else for(J=0;J<=S-1;J++)Q[J]=y[J];return M0(P,KV,S),P}function oY(y){var S,F,P,H;if(lY(y)){if(0!==b_())for(P=b_(),S=b_()+y,F=1,H=b_();F<=H;F++)EX[--S]=EX[--P];return EX=AT(EX,y),1}}function qY(){return G3(3)}function tY(y){return 0==(L0(y,ZU)&vU)}function uY(y,S,F){if(F<S){if(S<y)return S;if(y<F)return F}else{if(y<S)return S;if(F<y)return F}return y}function vY(y){return L0(y,$T)}function wY(y,S){return M0(y,$T,S)}function xY(y){return L0(y,_T)}function yY(y,S){return M0(y,_T,S)}function zY(y){return L0(y,aU)}function AY(y,S){return M0(y,aU,S)}function BY(y){return AT(IX,y+hU)}function DY(y,S){return M0(y,kU,S)}function FY(y,S){return M0(y,lU,S)}function KY(y){return L0(y,UT)}function QY(y){return L0(y,cU)}function SY(y,S,F,P){var H,J,Q,ee,te,re,ie,ae;return J=L0(y,TT),Q=L0(y,VT),32===J?0!=(ae=0|S[Q*P+F])&&0==(4278190080&ae)&&(ae|=4278190080):(ae=S[Q*P+zT(F,ie=[0,5,4,0,3,0,0,0,2,0,0,0,0,0,0,0,1][J])],ee=yT(1,J)-1,ae=zT(ae,ie=32-J-(F&yT(1,ie)-1)*J)&ee,16===J?0!==ae&&(H=(31&ae)<<3,te=(ae>>>5&31)<<3,re=(ae>>>10&31)<<3,ae=(H+=H>>>5)+((te+=te>>>5)<<8)+((re+=re>>>5)<<16)+(255<<24)):ae=0===L0(y,ZT)?0:CZ(y)[ae]),B3(ae)}function TY(y){return L0(y,XT)}function VY(y){return I3(H3()-y+4)}function WY(y,S){return J3(H3()-y+4,S)}function XY(y){return I3(H3()-y+5)}function YY(y,S){return J3(H3()-y+5,S)}function ZY(y){return I3(H3()-y+0)}function $Y(y,S){return J3(H3()-y+0,S)}function _Y(y){return I3(H3()-y+1)}function aZ(y,S){return J3(H3()-y+1,S)}function bZ(y){return I3(H3()-y+2)}function cZ(y,S){return J3(H3()-y+2,S)}function dZ(y){return I3(H3()-y+3)}function eZ(y,S){return J3(H3()-y+3,S)}function fZ(y,S,F){var P,H,J,Q,ee,te;for(J=uT(y),P=y.wordsAsInt32Array(),H=Q=0;H<=J-1;H++){if(ee=j2(H,P),!(0<=(te=k2(H,P))&&te<=S))return;Q+=ee}return Q===F}function jZ(y,S,F,P,H,J,Q){var ee,te,re,ie;if(te=y,re=S,FX.isWords(te)&&((ie=uT(te))===3*re||ie===6*re)&&function(y){var S,F,P;if(FX.isWords(y)){for(P=uT(y),S=y.wordsAsInt32Array(),F=0;F<=P-1;F++)if(!z_(S[F]))return;return 1}}(Q)&&fZ(F,ee=uT(Q),S)&&fZ(P,ee,S)&&fZ(J,ee,S)&&function(y,S){var F,P,H,J;for(P=uT(y),J=y.wordsAsInt32Array(),F=H=0;F<=P-1;F++)H+=j2(F,J);return H===S}(H,S))return 1}function lZ(y){return(W0(y)&lV)===eV?function(y){var S;return S=D_(y)?_3(y):0,O_(y)+S<A$()||a$(y)-S>=u$()&&M_(y)-S>=u$()?0:void _X(y)}(y):(W0(y)&lV)===$U?(F=D_(S=y)?Q3(S):0,!(xY(S)+F<A$()||a$(S)-F>=u$()&&vY(S)-F>=u$())&&void _X(S)):void _X(y);var S,F}function nZ(){return[1,.98078528040323,.923879532511287,.831469612302545,.7071067811865475,.555570233019602,.38268343236509,.1950903220161286,0,-.1950903220161283,-.3826834323650896,-.555570233019602,-.707106781186547,-.831469612302545,-.9238795325112865,-.98078528040323,-1,-.98078528040323,-.923879532511287,-.831469612302545,-.707106781186548,-.555570233019602,-.3826834323650903,-.1950903220161287,0,.1950903220161282,.38268343236509,.555570233019602,.707106781186547,.831469612302545,.9238795325112865,.98078528040323,1]}function oZ(){return[0,.1950903220161282,.3826834323650897,.555570233019602,.707106781186547,.831469612302545,.923879532511287,.98078528040323,1,.98078528040323,.923879532511287,.831469612302545,.7071067811865475,.555570233019602,.38268343236509,.1950903220161286,0,-.1950903220161283,-.3826834323650896,-.555570233019602,-.707106781186547,-.831469612302545,-.9238795325112865,-.98078528040323,-1,-.98078528040323,-.923879532511287,-.831469612302545,-.707106781186548,-.555570233019602,-.3826834323650903,-.1950903220161287,0]}function pZ(y,S){return y<0?0:S<=y?S-1:y}function qZ(){var y,S;for((y=zT(u2(),XX()))<0&&(y=0),(S=zT(q2(),XX())+1)>s2()&&(S=s2());y<S;)KX[y]=0,++y;v2(s2()),r2(0)}function rZ(){return LX[nW]}function sZ(y){return LX[nW]=y}function tZ(){return LX[oW]}function uZ(y){return LX[oW]=y}function vZ(){return LX[pW]}function wZ(y){return LX[pW]=y}function xZ(){return LX[qW]}function yZ(y){return LX[qW]=y}function zZ(){return LX[rW]}function AZ(y){return LX[rW]=y}function BZ(){return BT(LX,sW)}function CZ(y){return AT(IX,y+YT)}function DZ(y,S){var F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe;return H=ae=ZY(y),J=se=_Y(y),ee=ne=bZ(y),te=oe=dZ(y),re=H+=(ne-ae)*S|0,ie=J+=(oe-se)*S|0,re+=((ee+=((F=VY(y))-ne)*S|0)-H)*S|0,J=uY(J,se,ie+=((te+=((P=XY(y))-oe)*S|0)-J)*S|0),te=uY(te,ie,P),Q=jY(),BX?0:(cZ(y,H),eZ(y,J),WY(y,re),YY(y,ie),$Y(Q,re),aZ(Q,ie),cZ(Q,ee),eZ(Q,te),WY(Q,F),YY(Q,P),Q)}function EZ(y){var S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;return J=jY(),BX?0:(P=ie=ZY(y),H=ae=_Y(y),Q=se=bZ(y),ee=ne=dZ(y),te=Q+=(S=VY(y))-se>>1,re=ee+=(F=XY(y))-ne>>1,te+=(P+=se-ie>>1)-Q>>1,re+=(H+=ne-ae>>1)-ee>>1,cZ(y,P),eZ(y,H),WY(y,te),YY(y,re),$Y(J,te),aZ(J,re),cZ(J,Q),eZ(J,ee),WY(J,S),YY(J,F),J)}function FZ(y,S){var F,P,H;F=BY(y)[iU]>>8,(P=U3(y)[iU]>>8)<F&&(H=F,F=P,P=H),b$(y,F),W3(y,S<P-F?P-F:S)}function JZ(){return LX[CW]}function KZ(y){return LX[CW]=y}function LZ(){return LX[DW]}function MZ(y){return LX[DW]=y}function NZ(){return LX[EW]}function PZ(){return LX[FW]}function RZ(y){var S,F,P,H,J,Q;(S=zT(u2(),XX()))<xZ()&&(S=xZ()),(F=zT(q2()+TX()-1,XX()))>tZ()&&(F=tZ()),(P=zT(y,XX()))<zZ()||P>=vZ()||F<xZ()||S>=tZ()||(H=S,J=F,Q=P,(wX||r_())&&wX(H,J,Q))}function SZ(y){return X0(y,W0(y)|vU)}function TZ(y){return X0(y,W0(y)&~vU)}function VZ(y,S){return M0(y,UU,S)}function WZ(y){return L0(y,WU)}function XZ(y,S){return M0(y,WU,S)}function ZZ(y,S){return M0(y,VU,S)}function $Z(){return BT(LX,GW)}function a$(y){return L0(y,vV)}function b$(y,S){return M0(y,vV,S)}function c$(y){return L0(y,wV)}function d$(y,S){return M0(y,wV,S)}function e$(y){return L0(y,xV)}function f$(y,S){return M0(y,xV,S)}function g$(y,S){var F,P,H;for(F=n3(),P=y,H=u3();H<S;){if(0!==(F=n3())&&R$(F,P,H))return 1;Y1(H),P=H,H=u3()}return 0!==(F=n3())?R$(F,P,S):void 0}function h$(){return function(y,S,F,P){var H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe;if(1!==TX())return function(y,S,F,P){var H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve;if(!(Q=g0(y)))return null;for(te=TY(y),ee=KY(y),de=1===QY(y),ae=S-G$(y),se=P-I$(y),oe=n$(y),le=C$(y),ne=ae*oe+se*p$(y),ue=ae*le+se*E$(y),H=TX(),fe=QX(S,F),pe=SX(0,F),J=XX(),re=MX(),ie=OX(),be=S;be<fe;)de&&(ne=a2(ne,te<<16),ue=a2(ue,ee<<16)),me=ne>>16,ve=ue>>16,de||(me=pZ(me,te),ve=pZ(ve,ee)),0<=me&&0<=ve&&me<te&&ve<ee&&(ce=zT((ce=SY(y,Q,me,ve))&re,ie),he=zT(be,J),KX[he]=KX[he]+ce),ne+=oe,ue+=le,++be;for(re=4042322160|zT(MX(),XX()),ie=XX();be<pe;)de&&(ne=a2(ne,te<<16),ue=a2(ue,ee<<16)),me=ne>>16,ve=ue>>16,de||(me=pZ(me,te),ve=pZ(ve,ee)),0<=me&&0<=ve&&me<te&&ve<ee&&(ce=zT((ce=SY(y,Q,me,ve))&re,ie),he=zT(be,J),KX[he]=KX[he]+ce),ne+=yT(oe,ie),ue+=yT(le,ie),be+=H;for(re=MX(),ie=OX();be<F;)de&&(ne=a2(ne,te<<16),ue=a2(ue,ee<<16)),me=ne>>16,ve=ue>>16,de||(me=pZ(me,te),ve=pZ(ve,ee)),0<=me&&0<=ve&&me<te&&ve<ee&&(ce=zT((ce=SY(y,Q,me,ve))&re,ie),he=zT(be,J),KX[he]=KX[he]+ce),ne+=oe,ue+=le,++be}(y,S,F,P);if(!(H=g0(y)))return null;for(Q=TY(y),J=KY(y),oe=1===QY(y),ee=S-G$(y),te=P-I$(y),ie=n$(y),se=C$(y),re=ee*ie+te*p$(y),ae=ee*se+te*E$(y),ue=S,le=F;ue<le;)oe&&(re=a2(re,Q<<16),ae=a2(ae,J<<16)),ce=re>>16,fe=ae>>16,oe||(ce=pZ(ce,Q),fe=pZ(fe,J)),0<=ce&&0<=fe&&ce<Q&&fe<J&&(ne=SY(y,H,ce,fe),KX[ue]=ne),re+=ie,ae+=se,++ue}(G_(),I_(),K_(),JZ())}function l$(y,S,F){var P,H;if(1!==TX())return function(y,S,F){var P,H,J,Q,ee,te,re,ie;if(Q=QX(S,F),te=SX(0,F),P=TX(),H=XX(),(ie=S)<Q)for(re=zT(y&MX(),OX());ie<Q;)ee=zT(ie,H),KX[ee]=KX[ee]+re,++ie;if(ie<te)for(J=4042322160|zT(MX(),XX()),re=zT(y&J,XX());ie<te;)ee=zT(ie,H),KX[ee]=KX[ee]+re,ie+=P;if(ie<F)for(re=zT(y&MX(),OX());ie<F;)ee=zT(ie,H),KX[ee]=KX[ee]+re,++ie}(y,S,F);for(P=S,H=F;P+4<H;)KX[P]=y,KX[P+1]=y,KX[P+2]=y,KX[P+3]=y,P+=4;for(;P<H;)KX[P]=y,++P}function n$(y){return L0(y,EV)}function p$(y){return L0(y,FV)}function r$(){return function(y,S,F,P){var H,J,Q,ee,te,re,ie,ae;for(Q=f_(y),te=d_(y),J=n$(y),H=(S-G$(y))*J+(P-I$(y))*p$(y),re=ie=S,ae=F;((ee=H>>16)<0||te<=ee)&&re<ae;)++re,H+=J;if(ie<re&&(ee<0&&(ee=0),te<=ee&&(ee=te-1),l$(Q[ee],ie,re)),1===TX())for(;(ee=H>>16)<te&&0<=ee&&re<ae;)KX[re]=Q[ee],++re,H+=J;else re=function(y,S,F,P,H,J){var Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce;for(Q=TX(),ee=XX(),ue=d_(y),oe=(ie=F)>>16,ae=QX(ce=H,J),ne=SX(0,J),te=MX(),re=OX();ce<ae&&oe<ue&&0<=oe;){for(le=zT((le=S[oe])&te,re);ce<ae&&ie>>16===oe;)se=zT(ce,ee),KX[se]=KX[se]+le,++ce,ie+=P;oe=ie>>16}for(te=4042322160|zT(MX(),XX()),re=XX();ce<ne&&oe<ue&&0<=oe;){for(le=zT((le=S[oe])&te,re);ce<ne&&ie>>16===oe;)se=zT(ce,ee),KX[se]=KX[se]+le,ce+=Q,ie+=yT(P,re);oe=ie>>16}for(te=MX(),re=OX();ce<J&&oe<ue&&0<=oe;){for(le=zT((le=S[oe])&te,re);ce<J&&ie>>16===oe;)se=zT(ce,ee),KX[se]=KX[se]+le,++ce,ie+=P;oe=ie>>16}return ce}(y,Q,H,J,re,F);re<ae&&(ee<0&&(ee=0),te<=ee&&(ee=te-1),l$(Q[ee],re,ae))}(G_(),I_(),K_(),JZ())}function u$(){return LX[HW]}function w$(){return LX[IW]}function y$(){return LX[JW]}function A$(){return LX[KW]}function C$(y){return L0(y,GV)}function E$(y){return L0(y,HV)}function G$(y){return L0(y,IV)}function I$(y){return L0(y,JV)}function M$(){return function(y,S,F,P){var H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;for(se=f_(y),ne=d_(y),J=S-G$(y),Q=P-I$(y),te=n$(y),ie=C$(y),ee=J*te+Q*p$(y),re=J*ie+Q*E$(y),oe=S,ue=F,ae=(ne-1)*(ne-1);w2(ee>>16,re>>16)>=ae&&oe<ue;)++oe,ee+=te,re+=ie;S<oe&&l$(se[ne-1],S,oe),(H=Z0())[0]=ee,H[1]=re,oe<G$(y)&&(oe=(1===TX()?function(y,S,F,P,H,J,Q){var ee,te,re,ie,ae,se,ne,oe;for(se=S[ae=$X((ee=0|F[0])>>16,(te=0|F[1])>>16)],re=(ae-1)*(ae-1),ne=J,(oe=Q)>G$(y)&&(oe=G$(y));ne<oe;){for(;ne<oe&&w2(ee>>16,te>>16)>=re;)KX[ne]=se,++ne,ee+=P,te+=H;for(ie=w2(ee>>16,te>>16);ie<re;)se=S[--ae],re=(ae-1)*(ae-1)}return F[0]=ee,F[1]=te,ne}:function(y,S,F,P,H,J,Q){var ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de;if(ae=0|F[0],se=0|F[1],ee=TX(),te=XX(),le=((fe=$X(ae>>16,se>>16))-1)*(fe-1),pe=J,Q<(de=G$(y))&&(de=Q),ne=QX(J,de),ue=SX(0,de),pe<ne)for(re=MX(),ie=OX(),he=zT((he=S[fe])&re,ie);pe<ne;){for(;pe<ne&&w2(ae>>16,se>>16)>=le;)oe=zT(pe,te),KX[oe]=KX[oe]+he,++pe,ae+=P,se+=H;for(ce=w2(ae>>16,se>>16);ce<le;)he=zT((he=S[--fe])&re,ie),le=(fe-1)*(fe-1)}if(pe<ue)for(re=4042322160|zT(MX(),XX()),ie=XX(),he=zT((he=S[fe])&re,ie);pe<ue;){for(;pe<ue&&w2(ae>>16,se>>16)>=le;)oe=zT(pe,te),KX[oe]=KX[oe]+he,pe+=ee,ae+=yT(P,ie),se+=yT(H,ie);for(ce=w2(ae>>16,se>>16);ce<le;)he=zT((he=S[--fe])&re,ie),le=(fe-1)*(fe-1)}if(pe<de)for(re=MX(),ie=OX(),he=zT((he=S[fe])&re,ie);pe<de;){for(;pe<de&&w2(ae>>16,se>>16)>=le;)oe=zT(pe,te),KX[oe]=KX[oe]+he,++pe,ae+=P,se+=H;for(ce=w2(ae>>16,se>>16);ce<le;)he=zT((he=S[--fe])&re,ie),le=(fe-1)*(fe-1)}return F[0]=ae,F[1]=se,pe})(y,se,H,te,ie,oe,ue)),oe<ue&&(oe=(1===TX()?function(y,S,F,P,H,J,Q){var ee,te,re,ie,ae,se,ne,oe,ue,le;for(oe=S[se=$X((ee=0|F[0])>>16,(te=0|F[1])>>16)],ie=((ne=d_(y))-1)*(ne-1),ae=(se+1)*(se+1),re=w2(ee>>16,te>>16),ue=J,le=Q;ue<le&&re<ie;){for(;ue<le&&w2(ee>>16,te>>16)<=ae;)KX[ue]=oe,++ue,ee+=P,te+=H;for(re=w2(ee>>16,te>>16);ae<re;)oe=S[++se],ae=(se+1)*(se+1)}return F[0]=ee,F[1]=te,ue}:function(y,S,F,P,H,J,Q){var ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be;if(ae=0|F[0],se=0|F[1],ee=TX(),te=XX(),he=$X(ae>>16,se>>16),ce=((pe=d_(y))-1)*(pe-1),fe=(he+1)*(he+1),ue=w2(ae>>16,se>>16),ne=QX(be=J,Q),le=SX(0,Q),be<ne&&ue<ce)for(re=MX(),ie=OX(),de=zT((de=S[he])&re,ie);be<ne&&ue<ce;){for(;be<ne&&w2(ae>>16,se>>16)<=fe;)oe=zT(be,te),KX[oe]=KX[oe]+de,++be,ae+=P,se+=H;for(ue=w2(ae>>16,se>>16);fe<ue;)de=zT((de=S[++he])&re,ie),fe=(he+1)*(he+1)}if(be<le&&ue<ce)for(re=4042322160|zT(MX(),XX()),ie=XX(),de=zT((de=S[he])&re,ie);be<le&&ue<ce;){for(;be<le&&w2(ae>>16,se>>16)<=fe;)oe=zT(be,te),KX[oe]=KX[oe]+de,be+=ee,ae+=yT(P,ie),se+=yT(H,ie);for(ue=w2(ae>>16,se>>16);fe<ue;)de=zT((de=S[++he])&re,ie),fe=(he+1)*(he+1)}if(be<Q&&ue<ce)for(re=MX(),ie=OX(),de=zT((de=S[he])&re,ie);be<Q&&ue<ce;){for(;be<Q&&w2(ae>>16,se>>16)<=fe;)oe=zT(be,te),KX[oe]=KX[oe]+de,++be,ae+=P,se+=H;for(ue=w2(ae>>16,se>>16);fe<ue;)de=zT((de=S[++he])&re,ie),fe=(he+1)*(he+1)}return F[0]=ae,F[1]=se,be})(y,se,H,te,ie,oe,ue)),oe<F&&l$(se[ne-1],oe,F)}(G_(),I_(),K_(),JZ())}function Q$(y,S){var F;return 0!=(F=x2(y)-x2(S))?0<F:D2(y)>>>0<D2(S)>>>0}function R$(y,S,F){var P,H,J,Q,ee,te;if(0===y)return!1;if(H=S<o2()?o2():S,J=F>yT(s2(),XX())?yT(s2(),XX()):F,H<y$()&&(H=y$()),J>u$()&&(J=u$()),H<u2()&&v2(H),J>q2()&&r2(J),J>o2()&&p2(J),J<=H)return!1;if(y_(y))l$(y,H,J);else{if(te=y,LX[RW]=te,ee=H,LX[SW]=ee,Q=J,LX[TW]=Q,(P=(W0(y)&dV)>>>8)<=1)return!0;switch(P){case 0:case 1:break;case 2:r$();break;case 3:M$();break;case 4:case 5:h$()}}return!1}function T$(){var y,S,F;for(F=JZ();_$()<b_();){if(c$(y=EX[_$()])>F)return!1;if(((S=W0(y))&lV)===aV)return!0;if(!H0(1))return!1;switch(S){case 0:case 1:case 2:case 3:break;case 4:K2(EX[_$()],JZ());break;case 5:!function(y,S){var F,P,H,J,Q,ee,te,re;if(P=Y0(H=_3(y)),Q=a$(y),K2(y,ee=c$(y)),J=WZ(y),te=W_(y),b$(y,Q-P),XZ(y,J+H),0<te?e4(y,Y_(y)+H):(e4(y,H-Y_(y)),b$(y,a$(y)+Y_(y))),re=0-J-P,Y3(y,0),$3(y,re),(P<=0&&re<0?TZ:SZ)(y),ee!==S){for(F=ee;F<=S-1;F++)X2(y);XZ(y,WZ(y)-(S-ee))}}(EX[_$()],JZ());break;case 6:I2(EX[_$()],JZ());break;case 7:!function(y,S){var F,P,H,J,Q,ee,te,re;for(H=Y0(J=Q3(y)),F=vY(y),I2(y,ee=c$(y)),Q=WZ(y),P=0;P<=5;P++)U3(y)[P]=BY(y)[P];if(0===(te=BY(y)[fU])&&BY(y)[dU],((te=0<=te?1:-1)<0?function(y,S,F,P){var H,J;BY(y)[iU]=BY(y)[iU]-256*F,H=U3(y)[iU],U3(y)[iU]=H+256*(S-F),J=U3(y)[jU],U3(y)[jU]=J+256*S,AY(y,P-F)}:function(y,S,F,P){var H,J;BY(y)[iU]=BY(y)[iU]+256*F,H=U3(y)[iU],U3(y)[iU]=H-256*(S-F),J=U3(y)[jU],U3(y)[jU]=J+256*S,AY(y,P-F+S)})(y,J,H,F),0===Q&&(BY(y)[iU]=256*zY(y)),XZ(y,Q+J),re=0-Q-H,N3(y,0),P3(y,re),(H<=0&&re<0?TZ:SZ)(y),FZ(y,J),ee!==S){for(P=ee;P<=S-1;P++)V2(y,P);XZ(y,WZ(y)-(S-ee))}}(EX[_$()],JZ())}t_(y),a_(_$()+1)}return!1}function U$(){var y,S,F;for(S=F=u$();dY()<fY();){if((S=F=a$(y=uX[dY()]))>=u$())return!1;if(Y1(S),D_(y)&&l3(y),tY(y)&&(k3(y),BX))return!1;eY(dY()+1),dY()<fY()&&(F=a$(uX[dY()]))>=y$()&&g$(S,F)}return F<u$()&&g$(F,u$()),!1}function V$(){for(var y,S,F;dY()<fY();)if(0==(y=WZ(S=uX[dY()])-1))_1();else{if(XZ(S,y),((F=W0(S))&lV)===aV)return!0;switch(F){case 0:case 1:case 2:case 3:break;case 4:T2(uX[dY()],JZ());break;case 5:X2(uX[dY()],JZ());break;case 6:R2(uX[dY()],JZ());break;case 7:V2(uX[dY()],JZ())}c2(),eY(dY()+1)}return!1}function W$(y,S){var F;for(F=0;F<C2()&&(D2(F)!==y||x2(F)!==S);)F+=3;return F>=C2()?-1:F}function X$(){return F2()===oV}function Y$(){L3(K3()+3)}function Z$(){return HX}function $$(y,S){var F;return y===S||(0!=(F=c$(y)-c$(S))?F<0:(F=a$(y)-a$(S))<0)}function _$(){return LX[LW]}function a_(y){return LX[LW]=y}function b_(){return LX[MW]}function c_(y){return LX[MW]=y}function d_(y){return L0(y,KV)}function f_(y){return AT(IX,y+LV)}function g_(){return 0!==LX[NW]}function i_(y){return LX[NW]=y}function j_(){return 0!==LX[OW]}function l_(y){return LX[OW]=y}function m_(y,S){var F,P,H,J,Q;if(-1===(F=W$(y,S)))return!1;if(0===F)return Y$(),!0;if(E2(F,D2(0)),y2(F,x2(0)),B2(F,A2(0)),Y$(),C2()<=3)return!0;for(Q=0,F=3;F<C2();)Q$(F,Q)&&(Q=F),F+=3;return Q+3===C2()||(J=D2(Q),E2(Q,s3()),t3(J),P=x2(Q),y2(Q,o3()),p3(P),H=A2(Q),B2(Q,q3()),r3(H)),!0}function n_(y,S){return LX[y]=LX[y]+S}function r_(){return GX=FX.ioLoadFunctionFrom("loadBitBltFrom",vX),wX=FX.ioLoadFunctionFrom("copyBitsFromtoat",vX),!!GX&&!!wX}function s_(){var y,S,F,P;h2(TX()),xZ()<0&&yZ(0),tZ()>s2()&&uZ(s2()),y=yT(xZ(),XX()),LX[JW]=y,S=yT(zZ(),XX()),LX[KW]=S,F=yT(tZ(),XX()),LX[HW]=F,P=yT(vZ(),XX()),LX[IW]=P,c_(0),gY(0),EX=AT(IX,JX),uX=AT(IX,JX),function(){var y,S;for(S=0,y=JX;S<y;)w_(S)&&(c$(S)>=w$()||lZ(S)),S+=L0(S,YU)}(),BX||(0!==b_()?(function e(y,S,F){var P,H,J,Q,ee,te,re,ie,ae,se,ne;if((ae=F+1-S)<=1)return 0;if((H=$$(J=y[S],ee=y[F]))||(se=y[S],y[S]=y[F],y[F]=se,ne=J,J=ee,ee=ne),ae<=2)return 0;if((H=$$(J,Q=y[te=S+F>>1]))?(H=$$(Q,ee))||(se=y[F],y[F]=y[te],y[te]=se,Q=ee):(se=y[S],y[S]=y[te],y[te]=se,Q=J),ae<=3)return 0;for(re=S,ie=F,P=!0;P;){for(H=!0;H;)H=re<=--ie&&$$(Q,se=y[ie]);for(H=!0;H;)H=++re<=ie&&$$(se=y[re],Q);(P=re<=ie)&&(se=y[re],y[re]=y[ie],y[ie]=se)}e(y,S,ie),e(y,re,F)}(EX,0,b_()-1),KZ(c$(EX[0])),JZ()<A$()&&KZ(A$()),v2(0),r2(yT(s2(),XX())-1),qZ()):KZ(w$()))}function t_(y){WZ(y)<=0||function(y,S){var F;if(hY(1)){for(F=fY()-1;!(F<S);)uX[F+1]=uX[F],--F;uX[S]=y,gY(fY()+1)}}(y,function(y){var S,F;for(F=a$(y),S=0;S<fY()&&a$(uX[S])<F;)++S;for(;S<fY()&&a$(uX[S])===F&&$$(uX[S],y);)++S;return S}(y))}function w_(y){var S;return S=W0(y),!(bV<S)&&0!=(W0(y)&bV)}function x_(y){return y_(y)||0!=(W0(y)&dV)}function y_(y){return 0!=(4278190080&y)}function z_(y){return 0===y||y_(y)||0<=(S=y)&&S<JX&&x_(y);var S}function D_(y){return 0!=(W0(y)&iV)}function G_(){return LX[RW]}function I_(){return LX[SW]}function K_(){return LX[TW]}function M_(y){return L0(y,OV)}function O_(y){return L0(y,PV)}function V_(y,S){return M0(y,QV,S)}function W_(y){return L0(y,ZV)}function Y_(y){return L0(y,$V)}function __(y,S,F,P){var H,J,Q,ee,te;if(H=jY(),BX)return 0;for($Y(H,y[0]),aZ(H,y[1]),cZ(H,S[0]),eZ(H,S[1]),WY(H,F[0]),YY(H,F[1]),te=J=function(y,S){var F,P,H;return F=P=H=function(y){var S,F,P,H,J,Q;return J=_Y(y),0<=(F=(Q=dZ(y))-J)*(P=XY(y)-Q)?y:(n_(kW,1),(H=F)<0&&(H=0-H),(S=P-F)<0&&(S=0-S),DZ(y,H/S))}(y),S&&(P=h3(y)),H<P&&(H=P),y!==F&&S&&(P=h3(F)),H<P&&(H=P),H}(H,P),Q=H;Q<=J;Q+=6)if(te<(ee=f3(Q))&&(te=ee),BX)return 0;return wT(te,6)}function e0(y){return(GX||r_())&&GX(y)}function f0(y,S,F,P,H,J,Q){var ee,te,re,ie,ae,se,ne,oe,ue,le;if(S.isNil)ue=0,oe=null;else{if(tT(S)!==FX.classBitmap())return FX.primitiveFail();ue=uT(S),oe=S.wordsAsInt32Array()}return"number"==typeof y||!FX.isPointers(y)||uT(y)<5||tT(ee=FX.fetchPointerofObject(0,y))!==FX.classBitmap()?FX.primitiveFail():(te=uT(ee),ne=FX.fetchIntegerofObject(1,y),ae=FX.fetchIntegerofObject(2,y),re=FX.fetchIntegerofObject(3,y),FX.failed()?null:!(0<=ne&&0<=ae)||32!==re&&8!==re&&16!==re&&1!==re&&2!==re&&4!==re||0!==ue&&ue!==yT(1,re)?FX.primitiveFail():(le=wT(32,re),te!==(se=wT(ne+(le-1),le))*ae?FX.primitiveFail():(ie=kY(ue,oe),BX?null:(M0(ie,XT,ne),M0(ie,UT,ae),M0(ie,TT,re),M0(ie,VT,se),M0(ie,WT,te),M0(ie,cU,F),T0(ie,Q),m0(ie,P,H,J,ne,ae),ie))))}function g0(y){var S,F,P;return(P=S0(y))>uT(CX)?null:(F=FX.fetchPointerofObject(P,CX),uT(S=FX.fetchPointerofObject(0,F))!==L0(y,WT)?null:S.wordsAsInt32Array())}function i0(y,S,F,P,H,J,Q){var ee,te,re,ie,ae,se,ne,oe;if(P!==H||0!==J&&0!==Q){if(ee=6*y,oe=F?(re=(S.int16Array||(S.int16Array=new Int16Array(S.buffer,S.byteOffset)))[0+ee],se=(S.int16Array||(S.int16Array=new Int16Array(S.buffer,S.byteOffset)))[1+ee],ie=(S.int16Array||(S.int16Array=new Int16Array(S.buffer,S.byteOffset)))[2+ee],ne=(S.int16Array||(S.int16Array=new Int16Array(S.buffer,S.byteOffset)))[3+ee],ae=(S.int16Array||(S.int16Array=new Int16Array(S.buffer,S.byteOffset)))[4+ee],(S.int16Array||(S.int16Array=new Int16Array(S.buffer,S.byteOffset)))[5+ee]):(re=0|S[0+ee],se=0|S[1+ee],ie=0|S[2+ee],ne=0|S[3+ee],ae=0|S[4+ee],0|S[5+ee]),re===ie&&se===ne||ie===ae&&ne===oe)return(re!==ae||se!==oe)&&(Z0()[0]=re,Z0()[1]=se,$0()[0]=ae,$0()[1]=oe,z3(2),A0(J,Z0(),$0(),Q,P,H));Z0()[0]=re,Z0()[1]=se,$0()[0]=ie,$0()[1]=ne,_0()[0]=ae,_0()[1]=oe,z3(3),te=__(Z0(),$0(),_0(),0!==J&&0!==Q),BX||z0(J,Q,P,H,te)}}function k0(y){var S;return S=LX[QW],uT(y)<HT?null:(b$(S,FX.fetchIntegerofObject(KT,y)),d$(S,FX.fetchIntegerofObject(LT,y)),f$(S,FX.fetchIntegerofObject(MT,y)),XZ(S,FX.fetchIntegerofObject(JT,y)),S)}function m0(y,S,F,P,H,J){var Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he;F[0]=F[0]+S[0],F[1]=F[1]+S[1],P[0]=P[0]+S[0],P[1]=P[1]+S[1],w3(S),w3(F),w3(P),ie=0<(te=(Q=F[0]-S[0])*Q+(ee=F[1]-S[1])*ee)?(re=Q*H*65536/te|0,ee*H*65536/te|0):re=0,ne=0<(ae=(oe=P[0]-S[0])*oe+(ue=P[1]-S[1])*ue)?(se=oe*J*65536/ae|0,ue*J*65536/ae|0):se=0,le=y,ce=S[0],M0(le,IV,ce),fe=y,he=S[1],M0(fe,JV,he),M0(y,EV,re),M0(y,FV,ie),M0(y,GV,se),M0(y,HV,ne)}function n0(y){var S,F,P,H,J,Q,ee,te;if(FX.isArray(y)){for(CX=y,ee=0;ee<=uT(CX)-1;ee++){if("number"==typeof(Q=FX.fetchPointerofObject(ee,CX)))return;if(!FX.isPointers(Q))return;if(uT(Q)<5)return;if(tT(S=FX.fetchPointerofObject(0,Q))!==FX.classBitmap())return;if(F=uT(S),J=FX.fetchIntegerofObject(1,Q),H=FX.fetchIntegerofObject(2,Q),P=FX.fetchIntegerofObject(3,Q),FX.failed())return;if(!(0<=J&&0<=H))return;if(te=wT(32,P),F!==wT(J+(te-1),te)*H)return}return 1}}function p0(y,S,F,P,H,J){var Q,ee,te,re,ie,ae,se;te=S[1]<=F[1]?(Q=S,ee=F,1):(Q=F,ee=S,-1),b$(y,Q[0]),d$(y,Q[1]-P),f$(y,LZ()),VZ(y,H),ZZ(y,J),re=y,ie=ee[0],M0(re,OV,ie),ae=y,se=ee[1]-P,M0(ae,PV,se),M0(y,_V,te)}function r0(y,S,F,P,H){var J,Q,ee,te,re,ie;J=nZ()[2*y+0]*S+P|0,te=oZ()[2*y+0]*F+H|0,Z0()[0]=J,Z0()[1]=te,ee=nZ()[2*y+2]*S+P|0,ie=oZ()[2*y+2]*F+H|0,_0()[0]=ee,_0()[1]=ie,Q=2*(Q=nZ()[2*y+1]*S+P|0)-(J+ee>>1),re=2*(re=oZ()[2*y+1]*F+H|0)-(te+ie>>1),$0()[0]=Q,$0()[1]=re}function s0(y,S){var F;return tT(S)!==FX.classPoint()||"number"!=typeof(F=FX.fetchPointerofObject(0,S))&&!F.isFloat?FX.primitiveFail():(y[0]="number"==typeof F?F:0|FX.floatValueOf(F),"number"==typeof(F=FX.fetchPointerofObject(1,S))||F.isFloat?void(y[1]="number"==typeof F?F:0|FX.floatValueOf(F)):FX.primitiveFail())}function v0(){var y,S,F,P;return 2!==FX.methodArgumentCount()?tX:0!==(S=V1(FX.stackValue(2)))?S:(F=FX.stackObjectValue(0),y=FX.stackObjectValue(1),FX.failed()?sX:0!==(S=x0(FX.fetchPointerofObject(FT,AX)))?S:e0(FX.fetchPointerofObject(DT,AX))?n0(FX.fetchPointerofObject(ET,AX))?uT(y)<HT?AU:uT(F)<NT?HU:(P=F2())===tV||P===uV||P===sV?TU:0:IU:yU)}function x0(y){return tT(y)!==FX.classBitmap()?zU:(KX=y.words,S=uT(y)-1,LX[fX]=S,0);var S}function y0(y,S,F){return!y.isNil&&("number"==typeof y||uT(y)!==F?FX.primitiveFail():((FX.isWords(y)?function(y,S,F){var P,H;for(H=y.wordsAsFloat32Array(),P=0;P<=F-1;P++)S[P]=H[P]}:function(y,S,F){var P,H;for(P=0;P<=F-1;P++){if("number"!=typeof(H=FX.fetchPointerofObject(P,y))&&!H.isFloat)return FX.primitiveFail();S[P]="number"==typeof H?H:FX.floatValueOf(H)}})(y,S,F),!0))}function z0(y,S,F,P,H){var J,Q,ee,te,re,ie,ae,se,ne,oe,ue;for(ee=0===y||0===S?(te=!1,0):(te=!0,Y0(y)),Q=6*H;0<Q;){if(J=te?(ue=void 0,oY(qU)?(JX=(ue=JX)+qU,X0(ue,jV),T0(ue,0),V0(ue,qU),ue):0):(oe=void 0,oY(ST)?(JX=(oe=JX)+ST,X0(oe,$U),T0(oe,0),V0(oe,ST),oe):0),BX)return;re=J,ae=F,se=P,ne=ee,XY(ie=Q)>=_Y(ie)?(b$(re,ZY(ie)),d$(re,_Y(ie)-ne),DY(re,bZ(ie)),FY(re,dZ(ie)-ne),wY(re,VY(ie)),yY(re,XY(ie)-ne)):(b$(re,VY(ie)),d$(re,XY(ie)-ne),DY(re,bZ(ie)),FY(re,dZ(ie)-ne),wY(re,ZY(ie)),yY(re,_Y(ie)-ne)),f$(re,LZ()),VZ(re,ae),ZZ(re,se),te&&(M0(J,pU,S),W3(J,y),M0(J,oU,y)),Q-=6}E3()}function A0(y,S,F,P,H,J){var Q,ee,te,re;if(ee=0===y||0===P?(Q=oY(NV)?(JX=(re=JX)+NV,X0(re,eV),T0(re,0),V0(re,NV),re):0,0):(Q=oY(XV)?(JX=(te=JX)+XV,X0(te,kV),T0(te,0),V0(te,XV),te):0,Y0(y)),BX)return 0;p0(Q,S,F,ee,H,J),D_(Q)&&(M0(Q,WV,P),e4(Q,y),M0(Q,VV,y))}function C0(y){return"number"==typeof y?LU:FX.isWords(y)?uT(y)<WW?OU:(f4(y),LX[UW]!==VW?KU:C3()!==uT(y)?PU:N0()!==PW?NU:(IX=AT(LX,N0()),EX=AT(IX,P0()),uX=AT(EX,b_()),PW+P0()+b_()+fY()>C3()?QU:0)):MU}function F0(y){0===strcmp(y,vX)&&(wX=GX=0)}function H0(y){return!(PW+JX+b_()+fY()+y>K3()&&(Y2(DV),1))}function I0(){return 0!==LX[XW]}function K0(y){return LX[XW]=y}function L0(y,S){return IX[y+S]}function M0(y,S,F){return IX[y+S]=F}function N0(){return LX[YW]}function P0(){return LX[ZW]}function Q0(y){return LX[ZW]=y}function S0(y){return L0(y,XU)}function T0(y,S){return M0(y,XU,S)}function V0(y,S){return M0(y,YU,S)}function W0(y){return L0(y,ZU)&hV}function X0(y,S){return M0(y,ZU,S)}function Y0(y){return y>>1}function Z0(){return AT(LX,$W)}function $0(){return AT(LX,_W)}function _0(){return AT(LX,aX)}function a1(){return AT(LX,bX)}function b1(){_$()>=b_()&&0===fY()&&G2(oV),JZ()>=w$()&&G2(oV)}function c1(){var y;return 0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(0)))?FX.primitiveFailFor(y):(G2(oV),void a3())}function d1(){var y,S,F;return zX&&(DX=FX.ioMicroMSecs()),1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(F=W1(FX.stackValue(1),tV))?FX.primitiveFailFor(F):(S=FX.stackObjectValue(0),FX.failed()?FX.primitiveFailFor(sX):(y=k0(S))?H0(1)?(0<WZ(y)&&t_(y),BX?FX.primitiveFailFor(DU):(G2(mV),a3(),FX.pop(1),void(zX&&(n_(tW,1),n_(jX,FX.ioMicroMSecs()-DX))))):FX.primitiveFailFor(QU):FX.primitiveFailFor(AU))}function e1(){var y,S,F,P,H,J,Q;return 5!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):(H=FX.positive32BitValueOf(FX.stackValue(0)),F=FX.positive32BitValueOf(FX.stackValue(1)),Q=FX.stackObjectValue(2),y=FX.stackObjectValue(3),J=FX.stackObjectValue(4),FX.failed()?FX.primitiveFailFor(sX):0!==(S=W1(FX.stackValue(5),qV))?FX.primitiveFailFor(S):z_(F)&&z_(H)?(s0(Z0(),J),s0($0(),Q),s0(_0(),y),FX.failed()?FX.primitiveFailFor(sX):(z3(3),H0((P=__(Z0(),$0(),_0(),!1))*ST),BX||(F=v3(F),H=v3(H)),BX||z0(0,0,F,H,P),BX?(E3(),FX.primitiveFailFor(DU)):FX.failed()?FX.primitiveFailFor(GU):(a3(),void FX.pop(5)))):FX.primitiveFailFor(SU))}function f1(){var y,S,F,P,H,J,Q,ee;if(5!==FX.methodArgumentCount())return FX.primitiveFailFor(tX);if(P=FX.positive32BitValueOf(FX.stackValue(0)),H=FX.stackIntegerValue(1),S=FX.positive32BitValueOf(FX.stackValue(2)),J=FX.stackIntegerValue(3),Q=FX.stackObjectValue(4),FX.failed())return FX.primitiveFailFor(sX);if(0!==(y=W1(FX.stackValue(5),qV)))return FX.primitiveFailFor(y);if(F=uT(Q),FX.isWords(Q)){if(ee=!1,F!==3*J&&F!==6*J)return FX.primitiveFailFor(sX)}else{if(!FX.isArray(Q))return FX.primitiveFailFor(sX);if(F!==3*J)return FX.primitiveFailFor(sX);ee=!0}return H0((0===H||0===P?NV:XV)*J)?z_(P)&&z_(S)?(P=v3(P),S=v3(S),BX?FX.primitiveFailFor(DU):0!==P&&0!==H||0!==S?(0!==H&&(H=A3(H))<1&&(H=1),ee?function(y,S,F,P,H){var J,Q,ee,te,re,ie,ae,se,ne;for(J=0;J<=S-1;J++){if(Q=FX.fetchPointerofObject(3*J,y),s0(Z0(),Q),Q=FX.fetchPointerofObject(3*J+1,y),s0($0(),Q),Q=FX.fetchPointerofObject(3*J+2,y),s0(_0(),Q),FX.failed())return;if(z3(3),te=Z0()[0],ae=Z0()[1],re=$0()[0],se=$0()[1],ie=_0()[0],ne=_0()[1],te===ae&&re===se||re===ie&&se===ne)A0(P,Z0(),_0(),H,F,0);else{if(ee=__(Z0(),$0(),_0(),0!==P&&0!==H),BX)return;z0(P,H,F,0,ee)}if(BX)return}}(Q,J,S,H,P):function(y,S,F,P,H,J){var Q;for(Q=1;Q<=S;Q++)if(i0(Q-1,y,J,F,0,P,H),BX)return}(Q.wordsAsInt32Array(),J,S,H,P,3*J===F),BX?FX.primitiveFailFor(DU):FX.failed()?FX.primitiveFailFor(GU):(K0(1),a3(),void FX.pop(5))):FX.pop(5)):FX.primitiveFailFor(SU):FX.primitiveFailFor(QU)}function g1(){var y,S,F,P,H,J,Q,ee,te;return 7!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):(te=FX.stackIntegerValue(0))<=0?FX.primitiveFailFor(sX):(J=FX.stackObjectValue(1),S=FX.stackObjectValue(2),Q=FX.stackObjectValue(3),ee=FX.booleanValueOf(FX.stackValue(4)),y=FX.stackObjectValue(5),H=FX.stackObjectValue(6),FX.failed()?FX.primitiveFailFor(sX):0!==(F=W1(FX.stackValue(7),qV))?FX.primitiveFailFor(F):(s0(Z0(),Q),s0($0(),S),s0(_0(),J),FX.failed()?FX.primitiveFailFor(xU):(P=f0(H,y,ee?1:0,Z0(),$0(),_0(),te-1),BX?FX.primitiveFailFor(DU):FX.failed()?FX.primitiveFailFor(GU):(a3(),void FX.popthenPush(8,FX.positive32BitIntegerFor(P))))))}function h1(){var y,S,F,P,H,J,Q,ee,te;return 7!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):(S=FX.stackObjectValue(0),P=FX.stackObjectValue(1),H=FX.stackObjectValue(2),te=FX.stackObjectValue(3),F=FX.stackObjectValue(4),J=FX.stackIntegerValue(5),Q=FX.stackObjectValue(6),FX.failed()?FX.primitiveFailFor(sX):0!==(y=W1(FX.stackValue(7),qV))?FX.primitiveFailFor(y):jZ(Q,J,F,te,H,P,S)?H0(Math.max(ST,NV)*J)?(ee=uT(Q)===3*J,function(y,S,F,P,H,J,Q,ee){var te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe;if(0!==S)for(ie=le=he=ne=-1,re=ue=fe=se=1,ae=ce=pe=oe=0,te=1;te<=S;te++){if(--re<=0&&(re=j2(++ie,F),0!==(ae=k2(ie,F))&&(ae=v3(ae=Q[ae-1]),BX)))return;if(--ue<=0&&(ue=j2(++le,P),0!==(ce=k2(le,P))&&(ce=v3(ce=Q[ce-1]))),--fe<=0&&(fe=j2(++he,H),0!==(pe=k2(he,H))&&(pe=A3(pe))),--se<=0&&(se=j2(++ne,J),0!==(oe=k2(ne,J))&&(oe=Q[oe-1])),i0(te-1,y,ee,ae,ce,pe,oe),BX)return}}(Q.wordsAsInt32Array(),J,F.wordsAsInt32Array(),te.wordsAsInt32Array(),H.wordsAsInt32Array(),P.wordsAsInt32Array(),S.wordsAsInt32Array(),ee),BX?FX.primitiveFailFor(DU):FX.failed()?FX.primitiveFailFor(GU):(K0(1),a3(),void FX.pop(7))):FX.primitiveFailFor(QU):FX.primitiveFailFor(FU))}function i1(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;return 5!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):(P=FX.booleanValueOf(FX.stackValue(0)),H=FX.stackValue(1),y=FX.stackValue(2),J=FX.stackValue(3),Q=FX.stackValue(4),FX.failed()?FX.primitiveFailFor(sX):0!==(S=W1(FX.stackValue(5),qV))?FX.primitiveFailFor(S):(s0(Z0(),J),s0($0(),y),s0(_0(),H),FX.failed()?FX.primitiveFailFor(xU):(ee=Q,te=Z0(),re=$0(),ie=_0(),ae=P,F=tT(ee)!==FX.classBitmap()?FX.primitiveFail():(ne=uT(ee),se=mY(ee.wordsAsInt32Array(),ne,ae),BX?null:(m0(se,te,re,ie,ne,ne),se)),BX?FX.primitiveFailFor(DU):FX.failed()?FX.primitiveFailFor(GU):(a3(),void FX.popthenPush(6,FX.positive32BitIntegerFor(F))))))}function j1(){var y,S,F,P,H;return 4!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):(P=FX.positive32BitValueOf(FX.stackValue(0)),F=FX.positive32BitValueOf(FX.stackValue(1)),y=FX.stackObjectValue(2),H=FX.stackObjectValue(3),FX.failed()?FX.primitiveFailFor(sX):0!==(S=W1(FX.stackValue(4),qV))?FX.primitiveFailFor(S):z_(F)&&z_(P)?(s0(Z0(),H),s0($0(),y),FX.failed()?FX.primitiveFailFor(xU):(z3(2),F=v3(F),P=v3(P),BX?FX.primitiveFailFor(DU):(A0(0,Z0(),$0(),0,F,P),BX?FX.primitiveFailFor(DU):FX.failed()?FX.primitiveFailFor(GU):(a3(),void FX.pop(4))))):FX.primitiveFailFor(SU))}function k1(){var y,S,F,P,H,J;return 5!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):(y=FX.positive32BitValueOf(FX.stackValue(0)),S=FX.stackIntegerValue(1),H=FX.positive32BitValueOf(FX.stackValue(2)),F=FX.stackObjectValue(3),J=FX.stackObjectValue(4),FX.failed()?FX.primitiveFailFor(sX):0!==(P=W1(FX.stackValue(5),qV))?FX.primitiveFailFor(P):z_(y)&&z_(H)?(H=v3(H),y=v3(y),BX?FX.primitiveFailFor(DU):0===H&&(0===y||S<=0)?FX.pop(5):H0(16*ST)?(S=0<S&&0!==y?A3(S):0,s0(Z0(),J),s0($0(),F),FX.failed()?FX.primitiveFailFor(xU):(function(y,S,F,P){var H,J,Q,ee,te,re;for(re=$0()[0]-Z0()[0]>>1,Q=$0()[1]-Z0()[1]>>1,H=$0()[0]+Z0()[0]>>1,J=$0()[1]+Z0()[1]>>1,ee=0;ee<=15;ee++){if(r0(ee,re,Q,H,J),z3(3),te=__(Z0(),$0(),_0(),0!==y&&0!==S),BX)return;if(z0(y,S,0,P,te),BX)return}}(S,y,0,H),BX?(E3(),FX.primitiveFailFor(DU)):FX.failed()?FX.primitiveFailFor(GU):(K0(1),a3(),void FX.pop(5)))):FX.primitiveFailFor(QU)):FX.primitiveFailFor(SU))}function l1(){var y,S,F,P,H,J,Q,ee;if(5!==FX.methodArgumentCount())return FX.primitiveFailFor(tX);if(P=FX.positive32BitValueOf(FX.stackValue(0)),H=FX.stackIntegerValue(1),S=FX.positive32BitValueOf(FX.stackValue(2)),J=FX.stackIntegerValue(3),Q=FX.stackObjectValue(4),FX.failed())return FX.primitiveFailFor(sX);if(0!==(y=W1(FX.stackValue(5),qV)))return FX.primitiveFailFor(y);if(F=uT(Q),FX.isWords(Q)){if(ee=!1,F!==J&&2*J!==F)return FX.primitiveFailFor(sX)}else{if(!FX.isArray(Q))return FX.primitiveFailFor(sX);if(F!==J)return FX.primitiveFailFor(sX);ee=!0}return H0((0===H||0===P?NV:XV)*J)?z_(P)&&z_(S)?(P=v3(P),S=v3(S),BX?FX.primitiveFailFor(DU):0!==P&&0!==H||0!==S?(0!==H&&(H=A3(H)),ee?function(y,S,F,P,H){var J,Q,ee,te,re;if(s0(Z0(),FX.fetchPointerofObject(0,y)),!FX.failed())for(Q=Z0()[0],te=Z0()[1],J=1;J<=S-1;J++){if(s0(Z0(),FX.fetchPointerofObject(J,y)),FX.failed())return;if(ee=Z0()[0],re=Z0()[1],Z0()[0]=Q,Z0()[1]=te,$0()[0]=ee,$0()[1]=re,z3(2),A0(P,Z0(),$0(),H,F,0),BX)return;Q=ee,te=re}}(Q,J,S,H,P):function(y,S,F,P,H,J){var Q,ee,te,re,ie;for(re=J?(ee=(y.int16Array||(y.int16Array=new Int16Array(y.buffer,y.byteOffset)))[0],(y.int16Array||(y.int16Array=new Int16Array(y.buffer,y.byteOffset)))[1]):(ee=0|y[0],0|y[1]),Q=1;Q<=S-1;Q++){if(ie=J?(te=(y.int16Array||(y.int16Array=new Int16Array(y.buffer,y.byteOffset)))[2*Q],(y.int16Array||(y.int16Array=new Int16Array(y.buffer,y.byteOffset)))[2*Q+1]):(te=0|y[2*Q],0|y[2*Q+1]),Z0()[0]=ee,Z0()[1]=re,$0()[0]=te,$0()[1]=ie,z3(2),A0(P,Z0(),$0(),H,F,0),BX)return;ee=te,re=ie}}(Q.wordsAsInt32Array(),J,S,H,P,J===F),BX?FX.primitiveFailFor(DU):FX.failed()?FX.primitiveFailFor(GU):(K0(1),a3(),void FX.pop(5))):FX.pop(5)):FX.primitiveFailFor(SU):FX.primitiveFail()}function m1(){var y,S,F,P,H,J,Q,ee,te;return 5!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):(y=FX.positive32BitValueOf(FX.stackValue(0)),S=FX.stackIntegerValue(1),H=FX.positive32BitValueOf(FX.stackValue(2)),F=FX.stackObjectValue(3),J=FX.stackObjectValue(4),FX.failed()?FX.primitiveFailFor(sX):0!==(P=W1(FX.stackValue(5),qV))?FX.primitiveFailFor(P):z_(y)&&z_(H)?(y=v3(y),H=v3(H),BX?FX.primitiveFailFor(DU):0!==H||0!==y&&0!==S?H0(4*NV)?(S=0<S&&0!==y?A3(S):0,s0(Z0(),J),s0(_0(),F),FX.failed()?FX.primitiveFailFor(xU):($0()[0]=_0()[0],$0()[1]=Z0()[1],a1()[0]=Z0()[0],a1()[1]=_0()[1],z3(4),ee=y,0,te=H,A0(Q=S,Z0(),$0(),ee,0,te),A0(Q,$0(),_0(),ee,0,te),A0(Q,_0(),a1(),ee,0,te),A0(Q,a1(),Z0(),ee,0,te),FX.failed()?FX.primitiveFailFor(GU):(K0(1),a3(),void FX.pop(5)))):FX.primitiveFailFor(QU):FX.pop(5)):FX.primitiveFailFor(SU))}function n1(){var y,S,F;return zX&&(DX=FX.ioMicroMSecs()),1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(F=W1(FX.stackValue(1),sV))?FX.primitiveFailFor(F):(S=FX.stackObjectValue(0),FX.failed()?FX.primitiveFailFor(sX):(y=k0(S))?(0===WZ(y)?_1():(c2(),eY(dY()+1)),G2(rV),a3(),FX.pop(1),void(zX&&(n_(uW,1),n_(kX,FX.ioMicroMSecs()-DX)))):FX.primitiveFailFor(AU))}function o1(){var y,S,F,P,H,J,Q,ee;if(2!==FX.methodArgumentCount())return FX.primitiveFailFor(tX);if(S=FX.stackValue(0),0!==(H=C0(y=FX.stackValue(1))))return FX.primitiveFailFor(H);if(tT(y)!==tT(S))return FX.primitiveFailFor(zU);if((F=uT(S)-uT(y))<0)return FX.primitiveFailFor(JU);for(Q=LX,P=S.wordsAsInt32Array(),J=0,ee=K3()-1;J<=ee;J++)P[J]=Q[J];for(P[mW]=K3()+F,P[cX]=C3()+F,Q=AT(Q,K3()),P=AT(P,K3()+F),J=0,ee=C3()-K3()-1;J<=ee;J++)P[J]=Q[J];if(0!==(H=C0(S)))return FX.primitiveFailFor(H);FX.pop(2)}function p1(){var y;return zX&&(DX=FX.ioMicroMSecs()),0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(0),nV))||0!==(y=x0(FX.fetchPointerofObject(FT,AX)))?FX.primitiveFailFor(y):e0(FX.fetchPointerofObject(DT,AX))?((JZ()&VX())===VX()&&(RZ(JZ()),b1()),X$()||(eY(0),KZ(JZ()+1),G2(rV)),a3(),void(zX&&(n_(vW,1),n_(lX,FX.ioMicroMSecs()-DX)))):FX.primitiveFailFor(yU)}function q1(){var y,S;S=zX,y=FX.stackObjectValue(0),y=FX.booleanValueOf(y),FX.failed()||(zX=y,FX.pop(2),FX.pushBool(S))}function r1(){var y,S;return zX&&(DX=FX.ioMicroMSecs()),0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(0)))?FX.primitiveFailFor(y):(S=X$(),a3(),FX.pop(1),FX.pushBool(S),void(zX&&(n_(wW,1),n_(mX,FX.ioMicroMSecs()-DX))))}function s1(){var y;return 0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(0)))?FX.primitiveFailFor(y):(FX.pop(1),void FX.pushInteger(TX()))}function t1(){var y,S,F;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(1)))?FX.primitiveFailFor(y):(S=FX.stackObjectValue(0),!FX.failed()&&FX.isWords(S)&&4<=uT(S)?((F=S.wordsAsInt32Array())[0]=F[0]+LX[kW],F[1]=F[1]+LX[iW],F[2]=F[2]+LX[lW],F[3]=F[3]+LX[jW],void FX.pop(1)):FX.primitiveFailFor(sX))}function u1(){var y,S,F;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(1)))?FX.primitiveFailFor(y):(F=FX.stackObjectValue(0),!FX.failed()&&FX.isPointers(F)&&2<=uT(F)?(FX.pushRemappableOop(F),S=FX.makePointwithxValueyValue(xZ(),zZ()),FX.storePointerofObjectwithValue(0,FX.topRemappableOop(),S),S=FX.makePointwithxValueyValue(tZ(),vZ()),F=FX.popRemappableOop(),FX.storePointerofObjectwithValue(1,F,S),void FX.popthenPush(2,F)):FX.primitiveFailFor(sX))}function v1(){var y,S,F;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(1)))?FX.primitiveFailFor(y):(S=FX.stackObjectValue(0),!FX.failed()&&FX.isWords(S)&&9<=uT(S)?((F=S.wordsAsInt32Array())[0]=F[0]+LX[xW],F[1]=F[1]+LX[wW],F[2]=F[2]+LX[BW],F[3]=F[3]+LX[tW],F[4]=F[4]+LX[AW],F[5]=F[5]+LX[yW],F[6]=F[6]+LX[vW],F[7]=F[7]+LX[zW],F[8]=F[8]+LX[uW],void FX.pop(1)):FX.primitiveFailFor(sX))}function w1(){var y;return 0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(0)))?FX.primitiveFailFor(y):(FX.pop(1),void FX.pushInteger(LZ()))}function x1(){var y;return 0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):"number"==typeof(AX=FX.stackValue(0))?FX.primitiveFailFor(BU):FX.isPointers(AX)?uT(AX)<CT?FX.primitiveFailFor(EU):0!==(y=C0(FX.fetchPointerofObject(GT,AX)))?FX.primitiveFailFor(y):(FX.pop(1),void FX.pushInteger(Z2())):FX.primitiveFailFor(CU)}function y1(){var y,S;return 0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(0)))?FX.primitiveFailFor(y):(S=FX.makePointwithxValueyValue(NZ(),PZ()),void FX.popthenPush(1,S))}function z1(){var y,S,F;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(1)))?FX.primitiveFailFor(y):(S=FX.stackObjectValue(0),!FX.failed()&&FX.isWords(S)&&9<=uT(S)?((F=S.wordsAsInt32Array())[0]=F[0]+LX[nX],F[1]=F[1]+LX[mX],F[2]=F[2]+LX[rX],F[3]=F[3]+LX[jX],F[4]=F[4]+LX[qX],F[5]=F[5]+LX[oX],F[6]=F[6]+LX[lX],F[7]=F[7]+LX[pX],F[8]=F[8]+LX[kX],void FX.pop(1)):FX.primitiveFailFor(sX))}function A1(){var y,S,F,P,H,J,Q;return 1!==FX.methodArgumentCount()?FX.primitiveFail():(S=FX.stackObjectValue(0),FX.failed()?null:!FX.isWords(S)||(y=uT(S))<WW?FX.primitiveFail():(f4(S),IX=AT(LX,PW),F=VW,LX[UW]=F,P=y,LX[cX]=P,L3(y),G2(qV),H=PW,LX[YW]=H,Q0(4),X0(0,cV),V0(0,4),T0(0,0),a_(0),c_(0),eY(0),gY(0),$2(0),K0(0),yZ(0),uZ(0),AZ(0),wZ(0),MZ(0),LX[nX]=0,LX[mX]=0,LX[rX]=0,LX[jX]=0,LX[qX]=0,LX[oX]=0,LX[lX]=0,LX[pX]=0,LX[kX]=0,LX[xW]=0,LX[wW]=0,LX[BW]=0,LX[tW]=0,LX[AW]=0,LX[yW]=0,LX[vW]=0,LX[zW]=0,LX[uW]=0,LX[kW]=0,LX[iW]=0,LX[lW]=0,LX[jW]=0,(J=$Z())[0]=1,J[1]=0,J[2]=0,J[3]=0,J[4]=1,l_(J[5]=0),(Q=BZ())[0]=1,Q[1]=0,Q[2]=1,Q[3]=0,Q[4]=1,Q[5]=0,Q[6]=1,i_(Q[7]=0),FX.pop(2),void FX.push(S)))}function B1(){var y;return zX&&(DX=FX.ioMicroMSecs()),0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(0),qV))||0!==(y=x0(FX.fetchPointerofObject(FT,AX)))?FX.primitiveFailFor(y):(s_(),BX?FX.primitiveFailFor(DU):(G2(mV),FX.failed()||a3(),void(zX&&(n_(xW,1),n_(nX,FX.ioMicroMSecs()-DX)))))}function C1(){var y,S,F,P;return zX&&(DX=FX.ioMicroMSecs()),2!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(S=W1(FX.stackValue(2),uV))||0!==(S=x0(FX.fetchPointerofObject(FT,AX)))?FX.primitiveFailFor(S):(F=FX.stackObjectValue(0),y=FX.stackObjectValue(1),FX.failed()||tT(y)!==FX.classBitmap()?FX.primitiveFailFor(sX):uT(F)<NT?FX.primitiveFailFor(HU):(P=FX.fetchIntegerofObject(OT,F),S0(G_())!==P?FX.primitiveFailFor(SU):(P=FX.fetchIntegerofObject(QT,F),I_()!==P?FX.primitiveFailFor(SU):(P=FX.fetchIntegerofObject(PT,F),K_()!==P?FX.primitiveFailFor(SU):uT(y)<K_()-I_()?FX.primitiveFailFor(sX):FX.failed()?null:(function(y,S,F){var P,H,J,Q,ee,te,re,ie;if(re=S,ie=F,H=-1,1===TX())for(;re<ie;)ee=0|y[++H],KX[re]=ee,++re;else for(J=MX(),Q=OX(),P=XX();re<ie;)te=zT(re,P),ee=zT((ee=0|y[++H])&J,Q),KX[te]=KX[te]+ee,++re;ie>q2()&&r2(ie),ie>o2()&&p2(ie)}(y.wordsAsInt32Array(),I_(),K_()),G2(pV),a3(),FX.pop(2),void(zX&&(n_(yW,1),n_(oX,FX.ioMicroMSecs()-DX))))))))}function D1(){var y,S;return 0!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(0)))?FX.primitiveFailFor(y):(S=I0(),a3(),FX.pop(1),void FX.pushBool(S))}function E1(){var y,S;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=V1(FX.stackValue(1)))?FX.primitiveFailFor(y):(S=FX.booleanValueOf(FX.stackValue(0)),FX.failed()?FX.primitiveFailFor(sX):(K0(!0===S?1:0),a3(),void FX.pop(1)))}function F1(){var y,S,F,P,H,J,Q;return zX&&(DX=FX.ioMicroMSecs()),1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(P=FX.stackValue(1),H=rV,J=oV,S=0===(Q=V1(P))?F2()!==H&&F2()!==J?($2(zV),TU):0:Q)?FX.primitiveFailFor(S):(y=FX.stackObjectValue(0),FX.failed()?FX.primitiveFailFor(sX):(F=!1,F2()!==oV&&((F=V$())?(_2(uX[dY()],y),G2(sV)):G2(mV)),FX.failed()?null:(a3(),FX.pop(2),FX.pushBool(!F),void(zX&&(n_(zW,1),n_(pX,FX.ioMicroMSecs()-DX))))))}function G1(){var y,S,F;return zX&&(DX=FX.ioMicroMSecs()),1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(1),pV))||0!==(y=x0(FX.fetchPointerofObject(FT,AX)))?FX.primitiveFailFor(y):n0(FX.fetchPointerofObject(ET,AX))?(0!==rZ()&&(0==(JZ()&VX())&&qZ(),sZ(0)),S=FX.stackObjectValue(0),F=U$(),BX?FX.primitiveFailFor(DU):(F&&b3(S),FX.failed()?FX.primitiveFailFor(SU):(F?G2(uV):(E3(),p2(0),G2(nV)),a3(),FX.pop(2),FX.pushBool(!F),void(zX&&(n_(AW,1),n_(qX,FX.ioMicroMSecs()-DX)))))):FX.primitiveFailFor(IU)}function H1(){var y,S,F;return zX&&(DX=FX.ioMicroMSecs()),1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(S=W1(FX.stackValue(1),mV))?FX.primitiveFailFor(S):(y=FX.stackObjectValue(0),(F=T$())&&(_2(EX[_$()],y),a_(_$()+1)),FX.failed()?FX.primitiveFailFor(RU):(F?G2(tV):(G2(pV),sZ(1),eY(0),E3()),a3(),FX.pop(2),FX.pushBool(!F),void(zX&&(n_(BW,1),n_(rX,FX.ioMicroMSecs()-DX)))))}function I1(){var y,S,F,P,H,J,Q,ee;return 6!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(S=W1(FX.stackValue(6),qV))?FX.primitiveFailFor(S):(ee=FX.positive32BitValueOf(FX.stackValue(0)),Q=FX.positive32BitValueOf(FX.stackValue(1)),J=FX.stackIntegerValue(2),H=FX.stackIntegerValue(3),P=FX.stackIntegerValue(4),F=FX.stackIntegerValue(5),FX.failed()?FX.primitiveFailFor(sX):oY(tU)?z_(Q)&&z_(ee)?(JX=(y=JX)+tU,X0(y,aV),V0(y,tU),T0(y,F),b$(y,P),d$(y,H),f$(y,J),VZ(y,v3(Q)),ZZ(y,v3(ee)),BX?FX.primitiveFailFor(DU):void(FX.failed()||(a3(),FX.pop(6)))):FX.primitiveFailFor(SU):FX.primitiveFailFor(QU))}function J1(){var y,S,F;if(1!==FX.methodArgumentCount())return FX.primitiveFailFor(tX);if(0!==(y=W1(FX.stackValue(1),qV)))return FX.primitiveFailFor(y);if(F=FX.stackIntegerValue(0),FX.failed())return FX.primitiveFailFor(sX);for(S=0;0===S;){if(!oY(tU))return FX.primitiveFailFor(QU);JX=(S=JX)+uU,X0(S,cV),V0(S,uU),T0(S,F)}FX.failed()||(a3(),FX.pop(2),FX.pushInteger(S))}function K1(){var y;return 0!==(y=v0())?FX.primitiveFailFor(y):(U1(),BX?c3():(function(){for(var y;!X$();){if(zX&&(DX=FX.ioMicroMSecs()),y=T$(),zX&&(n_(BW,1),n_(rX,FX.ioMicroMSecs()-DX)),BX)return G2(mV);if(y)return G2(tV),Y2(BV);if(eY(0),E3(),sZ(1),zX&&(DX=FX.ioMicroMSecs()),0!==rZ()&&0==(JZ()&VX())&&qZ(),sZ(0),y=U$(),zX&&(n_(AW,1),n_(qX,FX.ioMicroMSecs()-DX)),BX)return G2(pV);if(y)return G2(uV),Y2(AV);if(E3(),p2(0),zX&&(DX=FX.ioMicroMSecs()),(JZ()&VX())===VX()&&(RZ(JZ()),b1()),zX&&(n_(vW,1),n_(lX,FX.ioMicroMSecs()-DX)),BX)return G2(nV);if(X$())return;if(eY(0),KZ(JZ()+1),zX&&(DX=FX.ioMicroMSecs()),y=V$(),zX&&(n_(zW,1),n_(pX,FX.ioMicroMSecs()-DX)),BX)return G2(rV);if(y)return G2(sV),Y2(yV)}}(),void c3()))}function L1(){var y;if(0!==(y=v0()))return FX.primitiveFailFor(y);U1(),c3()}function M1(){var y,S;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(1),qV))?FX.primitiveFailFor(y):(S=FX.stackIntegerValue(0),FX.failed()?FX.primitiveFailFor(sX):(h2(S),a3(),void FX.pop(1)))}function N1(){var y,S,F;if(S=FX.stackValue(0),!FX.isBytes(S))return FX.primitiveFail();if(256<=((F=S).bytes?F.bytes.length:F.words?4*F.words.length:0))return FX.primitiveFail();S.bytes,y=!1;var P=S.bytesAsString();if(P!==vX&&(vX=P,y=!0),y&&!r_())return FX.primitiveFail();FX.pop(1)}function O1(){var y,S;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(1),qV))?FX.primitiveFailFor(y):(S=FX.stackObjectValue(0),!FX.failed()&&FX.isPointers(S)&&2<=uT(S)?(s0(Z0(),FX.fetchPointerofObject(0,S)),s0($0(),FX.fetchPointerofObject(1,S)),FX.failed()?FX.primitiveFailFor(sX):(yZ(Z0()[0]),AZ(Z0()[1]),uZ($0()[0]),wZ($0()[1]),a3(),void FX.pop(1))):FX.primitiveFailFor(sX))}function P1(){var y,S,F,P;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(1),qV))?FX.primitiveFailFor(y):(S=FX.stackObjectValue(0),FX.failed()?FX.primitiveFailFor(sX):(F=S,P=BZ(),i_(0),y0(F,P,8)&&(i_(1),P[1]=256*P[1],P[3]=256*P[3],P[5]=256*P[5],P[7]=256*P[7]),FX.failed()?FX.primitiveFailFor(GU):(a3(),void FX.pop(1))))}function Q1(){var y,S;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(S=W1(FX.stackValue(1),qV))?FX.primitiveFailFor(S):(y=FX.stackIntegerValue(0),FX.failed()?FX.primitiveFailFor(sX):(MZ(y),a3(),void FX.pop(1)))}function R1(){var y,S,F,P,H;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(1),qV))?FX.primitiveFailFor(y):(S=FX.stackObjectValue(0),FX.failed()?FX.primitiveFailFor(sX):(F=S,l_(0),P=y0(F,H=$Z(),6),!FX.failed()&&P&&(l_(1),H[2]=H[2]+NZ(),H[5]=H[5]+PZ()),FX.failed()?FX.primitiveFailFor(sX):(a3(),void FX.pop(1))))}function S1(){var y,S,F,P;return 1!==FX.methodArgumentCount()?FX.primitiveFailFor(tX):0!==(y=W1(FX.stackValue(1),qV))?FX.primitiveFailFor(y):tT(S=FX.stackValue(0))!==FX.classPoint()?FX.primitiveFailFor(sX):(s0(Z0(),S),FX.failed()?FX.primitiveFailFor(sX):(F=Z0()[0],LX[EW]=F,P=Z0()[1],LX[FW]=P,a3(),void FX.pop(1)))}function U1(){var y,S;if((S=F2())===qV){if(s_(),BX)return;S=mV}if(S===mV){if(zX&&(DX=FX.ioMicroMSecs()),y=T$(),zX&&(n_(BW,1),n_(rX,FX.ioMicroMSecs()-DX)),BX)return G2(mV);if(y)return G2(tV),Y2(BV);eY(0),E3(),sZ(1),S=pV}if(S===pV){if(zX&&(DX=FX.ioMicroMSecs()),0!==rZ()&&0==(JZ()&VX())&&qZ(),sZ(0),y=U$(),zX&&(n_(AW,1),n_(qX,FX.ioMicroMSecs()-DX)),BX)return G2(pV);if(y)return G2(uV),Y2(AV);S=nV,E3(),p2(0)}if(S===nV){if(zX&&(DX=FX.ioMicroMSecs()),(JZ()&VX())===VX()&&(RZ(JZ()),b1()),zX&&(n_(vW,1),n_(lX,FX.ioMicroMSecs()-DX)),BX)return G2(nV);if(X$())return;S=rV,eY(0),KZ(JZ()+1)}if(S===rV){if(zX&&(DX=FX.ioMicroMSecs()),y=V$(),zX&&(n_(zW,1),n_(pX,FX.ioMicroMSecs()-DX)),BX)return G2(rV);if(y)return G2(sV),Y2(yV);G2(mV)}}function V1(y){var S;return FX.failed()?wU:"number"==typeof y?BU:FX.isPointers(y)?uT(y)<CT?EU:(AX=y,0!==(S=C0(FX.fetchPointerofObject(GT,y)))?S:($2(0),JX=P0(),BX=!1,0)):CU}function W1(y,S){var F;return 0!==(F=V1(y))?F:F2()===S?0:($2(zV),TU)}function Y1(y){if(0!==C2())for(;u3()<=y;)if(m_(n3(),m3()),0===C2())return}function _1(){var y;for(y=dY(),gY(fY()-1);y<fY();)uX[y]=uX[y+1],++y}function a2(y,S){var F;for(F=y;F<0;)F+=S;for(;S<=F;)F-=S;return F}function c2(){var y,S;0!==dY()&&(S=a$(y=uX[dY()]),a$(uX[dY()-1])<=S||function(y,S,F){var P;for(P=y;0<P&&a$(uX[P-1])>F;)uX[P]=uX[P-1],--P;uX[P]=S}(dY(),y,S))}function d2(){return xX=L0(yX,pU)}function e2(){return xX=L0(yX,sU)}function f2(){return xX=L0(yX,WV)}function h2(y){var S,F,P,H;4<=y&&(S=4),2<=y&&y<4&&(S=2),y<2&&(S=1),F=S,LX[dW]=F,1===S&&(YX(0),NX(4294967295),WX(0)),2===S&&(YX(1),NX(4244438268),WX(1)),4===S&&(YX(2),NX(4042322160),WX(3)),P=2*XX(),LX[bW]=P,H=XX(),LX[cW]=H}function i2(y){return 0!=((FX=y).majorVersion()==rT)&&FX.minorVersion()>=sT}function j2(y,S){return(0|S[y])>>>16}function k2(y,S){return 65535&(0|S[y])}function l2(y,S,F){qY()&&(E2(0,y),y2(0,S),B2(0,F),3!==C2()&&Q$(0,C2()-3)&&(E2(0,s3()),y2(0,o3()),B2(0,q3()),t3(y),p3(S),r3(F)))}function o2(){return LX[eX]}function p2(y){return LX[eX]=y}function q2(){return LX[dX]}function r2(y){return LX[dX]=y}function s2(){return LX[fX]}function u2(){return LX[gX]}function v2(y){return LX[gX]=y}function w2(y,S){return y*y+S*S}function x2(y){return I3(y+1)}function y2(y,S){return J3(y+1,S)}function A2(y){return I3(y+2)}function B2(y,S){return J3(y+2,S)}function C2(){return H3()}function D2(y){return I3(y)}function E2(y,S){return J3(y,S)}function F2(){return LX[hX]}function G2(y){return LX[hX]=y}function I2(y,S){var F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be;if(!D_(y)&&S>=xY(y))return XZ(y,0);ue=a$(y),le=c$(y),fe=L0(y,kU),he=L0(y,lU),te=2*(fe-ue),re=ue+vY(y)-2*fe,ie=2*(he-le),ae=le+(P=xY(y))-2*he,(se=2*(F=P-le))<2&&(se=2),Q=te*(pe=ne=wT(16777216,se)),Q+=(H=re*(oe=((de=65535&pe)*de>>>16)+de*(be=pe>>>16&255)*2+(be*be<<16)>>>8)*2)>>1,ee=ie*ne,ee+=(J=ae*oe*2)>>1,XZ(y,F),(ce=BY(y))[iU]=256*ue,ce[jU]=256*le,ce[fU]=Q,ce[gU]=ee,ce[dU]=H,ce[eU]=J,(le=c$(y))!==S&&(R2(y,S),XZ(y,F-(S-le)))}function K2(y,S){var F,P,H,J,Q,ee,te,re,ie,ae,se;if(!D_(y)&&S>=O_(y))return XZ(y,0);if(F=M_(y)-a$(y),P=O_(y)-c$(y),H=0<=F?(re=1,te=F,0):(re=-1,te=0-F,1-P),J=0==P?(ie=F,H=0):te<P?(ie=0,te):(ie=wT(te,P)*re,(ae=te)-wT(ae,se=P)*se|0),XZ(y,P),M0(y,ZV,re),M0(y,$V,ie),V_(y,H),M0(y,SV,J),M0(y,RV,P),(ee=c$(y))!==S){for(Q=ee;Q<=S-1;Q++)T2(y);XZ(y,P-(S-ee))}}function Q2(y,S){var F,P,H,J,Q;for(H=y[iU],J=y[jU],F=y[fU],P=y[gU],Q=256*S;J<Q&&0<=P;)H+=F+32768>>16,J+=P+32768>>16,F+=y[dU],P+=y[eU];return y[iU]=H,y[jU]=J,y[fU]=F,y[gU]=P,H>>8}function R2(y,S){b$(y,Q2(BY(y),S))}function T2(y){var S,F;F=a$(y)+Y_(y),0<(S=L0(y,QV)+L0(y,SV))&&(F+=W_(y),S-=L0(y,RV)),V_(y,S),b$(y,F)}function V2(y,S){var F,P,H,J;F=Y0(P=Q3(y)),H=L0(y,mU)+1,J=L0(y,nU)+1,N3(y,H),P3(y,J),F<=H&&TZ(y),0<=J&&SZ(y),J+F<0?Q2(BY(y),S):BY(y)[iU]=256*zY(y),Q2(U3(y),S),FZ(y,P)}function X2(y){var S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;J=X3(y)+1,Q=Z3(y)+1,Y3(y,J),$3(y,Q),(F=Y0(P=_3(y)))<=J&&TZ(y),0<=Q&&SZ(y),S=a$(y),T2(y),H=a$(y),(J<=P||0<=Q+F)&&(te=S,re=H,ue=X3(ee=y),le=Z3(ee),se=Y0(ie=_3(ee)),ne=d4(ee),oe=W_(ee),ae=re-te,ue<ie&&(oe<0?ne-=ae:(ne+=ae,b$(ee,te))),le+se===0&&(0<oe?ne-=Y_(ee):(ne+=Y_(ee),b$(ee,te))),0<le+se&&(oe<0?(ne+=ae,b$(ee,te)):ne-=ae),e4(ee,ne))}function Y2(y){$2(y),BX=!0}function Z2(){return LX[iX]}function $2(y){return LX[iX]=y}function _2(y,S){if(uT(S)<HT)return FX.primitiveFail();var F;FX.storeIntegerofObjectwithValue(IT,S,S0(y)),FX.storeIntegerofObjectwithValue(KT,S,a$(y)),FX.storeIntegerofObjectwithValue(LT,S,JZ()),FX.storeIntegerofObjectwithValue(MT,S,e$(y)),FX.storeIntegerofObjectwithValue(JT,S,WZ(y)),F=y,LX[QW]=F}function a3(){Q0(JX)}function b3(y){var S,F,P;if(S=G_(),F=I_(),P=K_(),uT(y)<NT)return FX.primitiveFail();FX.storeIntegerofObjectwithValue(OT,y,S0(S)),FX.storeIntegerofObjectwithValue(QT,y,F),FX.storeIntegerofObjectwithValue(PT,y,P),FX.storeIntegerofObjectwithValue(RT,y,JZ())}function c3(){if(FX.failed())return null;var y,S,F;BX&&(y=FX.stackObjectValue(1),S=FX.stackObjectValue(0),(F=Z2())===BV&&(_2(EX[_$()],y),a_(_$()+1)),F===AV&&b3(S),F===yV&&_2(uX[dY()],y)),a3(),FX.pop(3),FX.pushInteger(Z2())}function f3(y){var S,F,P,H,J,Q,ee,te,re;return re=_Y(H=y),(P=(ee=XY(H))===re?H:((Q=ee-re)<0&&(Q=0-Q),255<Q?(n_(iW,1),EZ(H)):(te=ZY(H),(J=VY(H)-te)<0&&(J=0-J),32*Q<J?(n_(lW,1),EZ(H)):H)))!==y?(S=f3(y),BX?0:(F=f3(P),BX?0:F<=S?S:F)):y}function h3(y){var S,F,P,H,J,Q;return J=ZY(y),0<=(F=(Q=bZ(y))-J)*(P=VY(y)-Q)?y:(n_(kW,1),(H=F)<0&&(H=0-H),(S=P-F)<0&&(S=0-S),DZ(y,H/S))}function j3(y,S,F){0===C2()?qY()&&(t3(y),p3(S),r3(F)):m_(y,S)||l2(y,S,F)}function k3(y){var S,F;H0(6)&&(S=e$(y)<<1,0!==(F=L0(y,UU))&&j3(F,S,999999999),0!==(F=L0(y,VU))&&j3(F,S,999999999),Y1(a$(y)))}function l3(y){var S,F,P,H,J,Q;switch(Q=W0(y)>>>1,yX=y,Q){case 0:case 1:break;case 2:xX=d4(yX);break;case 3:e2()}switch(H=xX,Q){case 0:case 1:break;case 2:f2();break;case 3:d2()}0!==(F=xX)&&H0(3)&&(S=1+(e$(y)<<1),J=a$(y)+H,-1===(P=W$(F,S))?l2(F,S,J):A2(P)<J&&B2(P,J),Y1(a$(y)))}function m3(){return 0===C2()?-1:o3()}function n3(){return 0===C2()?0:s3()}function o3(){return x2(C2()-3)}function p3(y){return y2(C2()-3,y)}function q3(){return A2(C2()-3)}function r3(y){return B2(C2()-3,y)}function s3(){return D2(C2()-3)}function t3(y){return E2(C2()-3,y)}function u3(){return 0===C2()?999999999:q3()}function v3(y){var S,F,P,H,J,Q;return 0===y||y_(y)?(P=255&y,H=y>>>8&255,J=y>>>16&255,S=y>>>24&255,g_()&&(F=(S*(Q=BZ())[6]+Q[7])/S,J=(J*Q[0]+Q[1])*F|0,H=(H*Q[2]+Q[3])*F|0,P=(P*Q[4]+Q[5])*F|0,S=S*F|0,J=Math.max(J,0),J=Math.min(J,255),H=Math.max(H,0),H=Math.min(H,255),P=Math.max(P,0),P=Math.min(P,255),S=Math.max(S,0),S=Math.min(S,255)),S<1?0:(S<255&&I0()&&Y2(CV),P+(H<<8)+(J<<16)+(S<<24))):y}function w3(y){var S,F;j_()?(F=S=y,function(y,S,F){var P,H,J;H=((P=$Z())[0]*y+P[1]*S+P[2])*TX()|0,J=(P[3]*y+P[4]*S+P[5])*TX()|0,F[0]=H,F[1]=J}(0|S[0],0|S[1],F)):(y[0]=(y[0]+NZ())*TX(),y[1]=(y[1]+PZ())*TX())}function z3(y){0<y&&w3(Z0()),1<y&&w3($0()),2<y&&w3(_0()),3<y&&w3(a1())}function A3(y){var S,F,P,H;return 0===y?0:(Z0()[0]=0,Z0()[1]=0,$0()[0]=256*y,$0()[1]=0,_0()[0]=0,_0()[1]=256*y,z3(3),S=$0()[0]-Z0()[0],F=$0()[1]-Z0()[1],P=128+(0|Math.sqrt(S*S+F*F))>>8,S=_0()[0]-Z0()[0],F=_0()[1]-Z0()[1],(H=128+(0|Math.sqrt(S*S+F*F))>>8)<P&&(P=H),0===P?1:P)}function B3(y){var S,F,P,H,J;return g_()?(F=255&y,P=y>>>8&255,S=y>>>24&255,H=(H=y>>>16&255)*(J=BZ())[0]+J[1]|0,P=P*J[2]+J[3]|0,F=F*J[4]+J[5]|0,S=S*J[6]+J[7]|0,H=Math.max(H,0),H=Math.min(H,255),P=Math.max(P,0),P=Math.min(P,255),F=Math.max(F,0),F=Math.min(F,255),S=Math.max(S,0),(S=Math.min(S,255))<16?0:F+(P<<8)+(H<<16)+(S<<24)):y}function C3(){return LX[cX]}function E3(){L3(C3())}function G3(y){return!!H0(y)&&(L3(K3()-y),!0)}function H3(){return C3()-K3()}function I3(y){return LX[K3()+y]}function J3(y,S){return LX[K3()+y]=S}function K3(){return LX[mW]}function L3(y){return LX[mW]=y}function N3(y,S){return M0(y,mU,S)}function P3(y,S){return M0(y,nU,S)}function Q3(y){return L0(y,oU)}function U3(y){return AT(IX,y+rU)}function W3(y,S){return M0(y,sU,S)}function X3(y){return L0(y,TV)}function Y3(y,S){return M0(y,TV,S)}function Z3(y){return L0(y,UV)}function $3(y,S){return M0(y,UV,S)}function _3(y){return L0(y,VV)}function d4(y){return L0(y,YV)}function e4(y,S){return M0(y,YV,S)}function f4(y){LX=y.wordsAsInt32Array()}function Ora(y){return"number"==typeof y?tta.classSmallInteger():y.sqClass}function Pra(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function Qra(y){return y.bytes?y.bytes.length:y.words?4*y.words.length:0}function Rra(y,S){return 0|Math.floor(y/S)}function Tra(y,S){return 31<S?0:y<<S}function Ura(y,S){return 31<S?0:y>>>S}function Vra(y,S){return S<0?S<-31?0:y>>>0-S:31<S?0:y<<S}function eua(y,S){var F,P;if(Wsa<16){for(F=y^S,P=yta[Wsa];0!==F;)0!=(F&P)&&++Gsa,F=Ura(F,Wsa);return S}return Gsa=16===Wsa?(F=tva(y,S,5,3),Gsa=Gsa+(31&F)+(F>>>5&31)+(F>>>10&31),F=tva(y>>>16,S>>>16,5,3),Gsa+(31&F)+(F>>>5&31)+(F>>>10&31)):(F=tva(y,S,8,3),Gsa+(255&F)+(F>>>8&255)+(F>>>16&255)),S}function fua(y,S){var F,P,H,J;if((Msa&(qsa|osa))!=(qsa|osa))return S;if(Wsa<16){for(F=yta[Wsa]&Osa,J=S,H=1;H<=ata;H++)fwa(P=J&F,ewa(P)+1),J=Ura(J,Wsa);return S}return 16===Wsa?(fwa(P=Rva(65535&S,5,Lsa),ewa(P)+1),fwa(P=Rva(S>>>16,5,Lsa),ewa(P)+1)):fwa(P=Rva(S,8,Lsa),ewa(P)+1),S}function gua(y,S){return y+S}function hua(y,S){var F,P,H,J;return 0==(J=y>>>24)?S:255==J?y:(P=(P=(16711935&y)*J+(16711935&S)*(F=255-J)+16711935)+(P-65537>>>8&16711935)>>>8&16711935)|(H=(H=(16711935&(y>>>8|16711680))*J+(S>>>8&16711935)*F+16711935)+(H-65537>>>8&16711935)>>>8&16711935)<<8}function iua(y,S){return jua(y,S,!1)}function jua(y,S,F){var P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;if(Wsa<16)return S;if(ae=255-Hta,ee=S,1===ata)F&&0===y||(ee=(ne=(ne=(16711935&y)*Hta+(16711935&S)*ae+16711935)+(ne-65537>>>8&16711935)>>>8&16711935)|(oe=(oe=(y>>>8&16711935)*Hta+(S>>>8&16711935)*ae+16711935)+(oe-65537>>>8&16711935)>>>8&16711935)<<8);else for(P=yta[Wsa],le=_sa,ue=S,Q=y,J=1;J<=ata;J++){if(re=Q&P,!(0==(le&P)||F&&0==re)){for(se=ue&P,H=0,ie=1;ie<=3;ie++)H|=Tra(31&Rra((31&Ura(re,te=5*(ie-1)))*Hta+(31&Ura(se,te))*ae+254,255),te);ee=ee&~Tra(P,16*(J-1))|Tra(H,16*(J-1))}le=Ura(le,Wsa),Q=Ura(Q,Wsa),ue=Ura(ue,Wsa)}return ee}function kua(y,S){var F,P,H;return(H=(16711935&(H=((S>>>8&16711935)*(F=255-(y>>>24))>>>8&16711935)+(y>>>8&16711935)))<<8|255*(16777472&H))|16711935&(P=((16711935&S)*F>>>8&16711935)+(16711935&y))|255*(16777472&P)>>>8}function lua(y,S){return 0===y?S:jua(y,S,!0)}function pua(y,S){return y&S}function qua(y,S){return y&~S}function rua(y,S){return~y&S}function sua(y,S){return~y&~S}function tua(y,S){return~S}function uua(y,S){return~y|S}function vua(y,S){return~y|~S}function wua(y,S){return~y}function xua(y,S){return~y^S}function yua(y,S){return y|S}function zua(y,S){return y|~S}function Aua(y,S){return y^S}function Cua(y,S){return 0}function Dua(){Jsa<=dta?(Vta=Sta,kta=dta,Esa=dua):(Vta=Sta+(Jsa-dta),Esa=dua-(Jsa-dta),kta=Jsa),Jsa+Isa<kta+Esa&&(Esa-=kta+Esa-(Jsa+Isa)),Ksa<=eta?(Wta=Tta,lta=eta,Dsa=sta):(Wta=Tta+Ksa-eta,Dsa=sta-(Ksa-eta),lta=Ksa),Ksa+Hsa<lta+Dsa&&(Dsa-=lta+Dsa-(Ksa+Hsa)),Cta||(Vta<0&&(kta-=Vta,Esa+=Vta,Vta=0),Rta<Vta+Esa&&(Esa-=Vta+Esa-Rta),Wta<0&&(lta-=Wta,Dsa+=Wta,Wta=0),Mta<Wta+Dsa&&(Dsa-=Wta+Dsa-Mta))}function Eua(){return Dua(),Esa<=0||Dsa<=0?(Asa=Bsa=Csa=zsa=0,null):kva()?(function(){if(function(){var y,S;if(41===Rsa)if(Ssa=255,Tsa=16777215,Xta=mta=null,2<=tta.methodArgumentCount()){if(Ssa=tta.stackIntegerValue(tta.methodArgumentCount()-2),tta.failed())return tta.primitiveFail();if(Tsa=tta.stackIntegerValue(tta.methodArgumentCount()-1),tta.failed())return tta.primitiveFail();4===tta.methodArgumentCount()&&(S=tta.stackObjectValue(1),tta.isBytes(S)&&(mta=S.bytes),y=tta.stackObjectValue(0),tta.isBytes(y)&&(Xta=y.bytes))}else{if(1!==tta.methodArgumentCount())return tta.primitiveFail();Tsa=tta.stackIntegerValue(0),tta.failed()&&tta.primitiveFail()}}(),tta.failed())return tta.primitiveFail();if(Cta||34!==Rsa&&41!==Rsa||32!==Kta||Lta===Xsa||(41===Rsa?32===Wsa?(function(){var y,S,F,P,H,J,Q,ee;for(H=Dsa+1,J=Wta,ee=lta;0!=--H;){for(S=J*Qta+4*Vta,P=ee*bta+4*kta,F=Esa+1;0!=--F;)if(0==(16777215&(y=Ita[S>>>2]))){for(S+=4,P+=4;0!=--F&&0==(16777215&(y=Ita[S>>>2]));)S+=4,P+=4;++F}else Q=Lva(y,Q=Usa[P>>>2]),Usa[P>>>2]=Q,S+=4,P+=4;++J,++ee}}(),Bsa=(Asa=kta)+Esa,zsa=(Csa=lta)+Dsa,0):16===Wsa?(function(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;for(te=Dsa+1,re=Wta,ae=lta,F=16*(1&kta),$sa&&(F=16-F),wta=Tra(65535,16-F);0!=--te;){for(H=re*Qta+4*Vta,Q=ae*bta+4*(kta>>1),y=4*(3&ae),se=(3&Vta)-1,J=Esa+1,F=65535===(ee=wta)?16:0;0!=--J;)S=gta[y+(se=se+1&3)],0!=(16777215&(P=Ita[H>>>2]))&&(ie=Usa[Q>>>2],Rua(Q,P=Tra(0===(P=Pua(P=Lva(P,ie=(31744&(ie=Ura(ie&=~ee,F)))<<9|(992&ie)<<6|(31&ie)<<3|4278190080),S))?1:P,F),ee)),H+=4,$sa?0===F&&(Q+=4):0!==F&&(Q+=4),F^=16,ee=~ee;++re,++ae}}(),Bsa=(Asa=kta)+Esa,zsa=(Csa=lta)+Dsa,0):8!==Wsa||(function(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;for(H=Lua(),ee=Msa&~psa,ie=Dsa+1,ae=Wta,wta=8*(3&kta),$sa&&(wta=24-wta),xta=Wra^Tra(255,wta),Q=0==(1&kta)?0:522133279,0==(1&(ne=lta))&&(Q^=522133279);0!=--ie;){for(Q^=522133279,F=ae*Qta+4*Vta,J=ne*bta+4*(kta>>2),P=Esa+1,y=wta,re=xta;0!=--P;)31<(te=Rra(((te=16777215&(S=(Ita[F>>>2]&~Q)+Q))>>>16)+(te>>>8&255)+(255&te),3))&&(224<te&&(S=4294967295),se=Usa[J>>>2],Rua(J,S=Tra(S=lva(S=Lva(S,se=H[se=Ura(se&=~re,y)]),ee),y),re)),F+=4,re=$sa?0===y?(J+=4,y=24,16777215):(y-=8,re>>>8|4278190080):32===y?(J+=4,y=0,4294967040):(y+=8,re<<8|255),Q^=522133279;++ae,++ne}}(),Bsa=(Asa=kta)+Esa,zsa=(Csa=lta)+Dsa,0):Wsa<8||8===Wsa&&0==(Msa&qsa)||(32===Wsa&&function(){var y,S,F,P,H,J,Q,ee,te;for(J=Dsa+1,Q=Wta,te=lta;0!=--J;){for(S=Q*Qta+4*Vta,P=te*bta+4*kta,F=Esa+1;0!=--F;)if(255==(H=(y=Ita[S>>>2])>>>24)){for(Usa[P>>>2]=y,S+=4,P+=4;0!=--F&&(y=Ita[S>>>2])>>>24==255;)Usa[P>>>2]=y,S+=4,P+=4;++F}else if(0==H){for(S+=4,P+=4;0!=--F&&(y=Ita[S>>>2])>>>24==0;)S+=4,P+=4;++F}else ee=kua(y,ee=Usa[P>>>2]),Usa[P>>>2]=ee,S+=4,P+=4;++Q,++te}}(),16===Wsa&&function(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;for(re=Dsa+1,ie=Wta,se=lta,F=16*(1&kta),$sa&&(F=16-F),wta=Tra(65535,16-F);0!=--re;){for(H=ie*Qta+4*Vta,Q=se*bta+4*(kta>>1),y=4*(3&se),ne=(3&Vta)-1,J=Esa+1,F=65535===(te=wta)?16:0;0!=--J;)S=gta[y+(ne=ne+1&3)],255==(ee=(P=Ita[H>>>2])>>>24)?Rua(Q,P=Tra(0===(P=Pua(P,S))?1:P,F),te):0!=ee&&(ae=Usa[Q>>>2],Rua(Q,P=Tra(0===(P=Pua(P=kua(P,ae=(31744&(ae=Ura(ae&=~te,F)))<<9|(992&ae)<<6|(31&ae)<<3|4278190080),S))?1:P,F),te)),H+=4,$sa?0===F&&(Q+=4):0!==F&&(Q+=4),F^=16,te=~te;++ie,++se}}(),8===Wsa&&function(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;for(H=Lua(),ee=Msa&~psa,ie=Dsa+1,ae=Wta,wta=8*(3&kta),$sa&&(wta=24-wta),xta=Wra^Tra(255,wta),Q=0==(1&kta)?0:522133279,0==(1&(ne=lta))&&(Q^=522133279);0!=--ie;){for(Q^=522133279,F=ae*Qta+4*Vta,J=ne*bta+4*(kta>>2),P=Esa+1,y=wta,re=xta;0!=--P;)31<(te=(S=(Ita[F>>>2]&~Q)+Q)>>>24)&&(te<224&&(se=Usa[J>>>2],S=kua(S,se=H[se=Ura(se&=~re,y)])),Rua(J,S=Tra(S=lva(S,ee),y),re)),F+=4,re=$sa?0===y?(J+=4,y=24,16777215):(y-=8,re>>>8|4278190080):24===y?(J+=4,y=0,4294967040):(y+=8,re<<8|255),Q^=522133279;++ae,++ne}}(),Bsa=(Asa=kta)+Esa,zsa=(Csa=lta)+Dsa,0))){if(30===Rsa||31===Rsa){if(1!==tta.methodArgumentCount())return tta.primitiveFail();if(Hta=tta.stackIntegerValue(0),!(!tta.failed()&&0<=Hta&&Hta<=255))return tta.primitiveFail()}var y;Gsa=0,Nua(),Cta?function(){var y,S,F,P,H,J;for(F=Dta[Rsa+1],J=1;J<=Dsa;J++){if(S=Bta?Wra:Xua(lta+J-1),_sa=wta,y=F(S,P=Usa[Zsa>>>2]),P=_sa&y|P&~_sa,Usa[Zsa>>>2]=P,Zsa+=4,_sa=Wra,3===Rsa)for(P=S,H=2;H<=Ata-1;H++)Usa[Zsa>>>2]=P,Zsa+=4;else for(H=2;H<=Ata-1;H++)y=F(S,P=Usa[Zsa>>>2]),Usa[Zsa>>>2]=y,Zsa+=4;1<Ata&&(_sa=xta,y=F(S,P=Usa[Zsa>>>2]),P=_sa&y|P&~_sa,Usa[Zsa>>>2]=P,Zsa+=4),Zsa+=Vsa}}():(Lta===Xsa&&Wta<=lta&&(Wta<lta?(Zta=-1,Wta=Wta+Dsa-1,lta=lta+Dsa-1):lta===Wta&&Vta<kta&&(nta=-1,Vta=Vta+Esa-1,kta=kta+Esa-1,1<Ata&&(y=wta,wta=xta,xta=y)),Zsa=lta*bta+4*Rra(kta,ata),Vsa=bta*Zta-Ata*nta*4),Kta!==Wsa||0!==Msa||Ota!==$sa?Kua():(function(){var y,S,F;S=Vta&(F=ata-1),y=kta&F,Eta=0<nta?F<S+Math.min(Esa,ata-y):S-Math.min(Esa,1+y)+1<0,Gta=Ota?(S-y)*Wsa:(y-S)*Wsa,Eta&&(Gta<0?Gta+=32:Gta-=32),Nta=Wta*Qta+4*Rra(Vta,Rra(32,Kta)),Jta=Qta*Zta-Ata*nta*4,Eta&&(Jta-=4*nta)}(),function(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;for(J=Dta[Rsa+1],Q=4*nta,-32===Gta?Gta=H=F=0:F=Gta<0?(H=Gta+32,Tra(Wra,0-Gta)):0===Gta?(H=0,Wra):(H=Gta-32,Ura(Wra,Gta)),ne=~F,Bta?(P=Wra,qta=0):P=Xua(0),ie=lta,ae=1;ae<=Dsa;ae++){if(1<qta&&(P=Xua(ie),ie+=Zta),Eta?(re=Ita[Nta>>>2],Nta+=Q):re=0,_sa=wta,se=Ita[Nta>>>2],Nta+=Q,S=Vra(re&ne,H)|Vra(se&F,Gta),re=se,y=J(S&P,ee=Usa[Zsa>>>2]),ee=_sa&y|ee&~_sa,Usa[Zsa>>>2]=ee,Zsa+=Q,_sa=Wra,3===Rsa)if(0===Gta&&P===Wra)if(-1===nta)for(te=2;te<=Ata-1;te++)se=Ita[Nta>>>2],Nta+=Q,Usa[Zsa>>>2]=se,Zsa+=Q;else for(te=2;te<=Ata-1;te++)Usa[Zsa>>>2]=re,Zsa+=Q,re=Ita[Nta>>>2],Nta+=Q;else for(te=2;te<=Ata-1;te++)se=Ita[Nta>>>2],Nta+=Q,S=Vra(re&ne,H)|Vra(se&F,Gta),re=se,Usa[Zsa>>>2]=S&P,Zsa+=Q;else for(te=2;te<=Ata-1;te++)se=Ita[Nta>>>2],Nta+=Q,S=Vra(re&ne,H)|Vra(se&F,Gta),re=se,y=J(S&P,Usa[Zsa>>>2]),Usa[Zsa>>>2]=y,Zsa+=Q;1<Ata&&(_sa=xta,se=Ita[Nta>>>2],Nta+=Q,y=J((S=Vra(re&ne,H)|Vra(se&F,Gta))&P,ee=Usa[Zsa>>>2]),ee=_sa&y|ee&~_sa,Usa[Zsa>>>2]=ee,Zsa+=Q),Nta+=Jta,Zsa+=Vsa}}())),22!==Rsa&&32!==Rsa||(Asa=Bsa=Csa=zsa=0),Bsa=0<nta?(Asa=kta)+Esa:(Asa=kta-Esa+1,kta+1),zsa=0<Zta?(Csa=lta)+Dsa:(Csa=lta-Dsa+1,lta+1)}}(),void hwa()):tta.primitiveFail()}function Fua(y,S,F){eta=F,dua=S-(Sta=dta=y),Eua(),_va()}function Kua(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he;for(re=Dta[Rsa+1],Pta=Rra(32,Kta),P=yta[Kta],oe=yta[Wsa],y=Msa&~psa,Nta=Wta*Qta+4*Rra(Vta,Pta),H=Esa<(he=Pta-(Vta&Pta-1))?0:Rra(Esa-he,Pta)+1,Jta=Qta-4*H,ce=1+(kta+Esa-1&ata-1),Esa<(te=ata-(kta&ata-1))&&(te=Esa),le=(Vta&Pta-1)*Kta,ie=(kta&ata-1)*Wsa,S=Kta,ue=Wsa,F=0,Ota&&(le=32-Kta-le,S=0-S),$sa&&(ie=32-Wsa-ie,ue=0-ue,F=32-Wsa),ae=1;ae<=Dsa;ae++){for(se=Bta?Wra:Xua(lta+ae-1),Uta=le,jta=ie,_sa=wta,fe=te,Q=Ata;J=vva(fe,y,P,oe,S,ue),jta=F,_sa===Wra?(ne=re(J&se,Usa[Zsa>>>2]),Usa[Zsa>>>2]=_sa&ne):(ne=re(J&se,(ee=Usa[Zsa>>>2])&_sa),ee=_sa&ne|ee&~_sa,Usa[Zsa>>>2]=ee),Zsa+=4,fe=2===Q?(_sa=xta,ce):(_sa=Wra,ata),0!=--Q;);Nta+=Jta,Zsa+=Vsa}}function Lua(){return[0,4278190081,4294967295,4286611584,4294901760,4278255360,4278190335,4278255615,4294967040,4294902015,4280295456,4282400832,4284506208,4288651167,4290756543,4292861919,4278716424,4279242768,4279769112,4280821800,4281348144,4281874488,4282927176,4283453520,4283979864,4285032552,4285558896,4286085240,4287072135,4287598479,4288124823,4289177511,4289703855,4290230199,4291282887,4291809231,4292335575,4293388263,4293914607,4294440951,4278190081,4278203136,4278216192,4278229248,4278242304,4278255360,4278190131,4278203187,4278216243,4278229299,4278242355,4278255411,4278190182,4278203238,4278216294,4278229350,4278242406,4278255462,4278190233,4278203289,4278216345,4278229401,4278242457,4278255513,4278190284,4278203340,4278216396,4278229452,4278242508,4278255564,4278190335,4278203391,4278216447,4278229503,4278242559,4278255615,4281532416,4281545472,4281558528,4281571584,4281584640,4281597696,4281532467,4281545523,4281558579,4281571635,4281584691,4281597747,4281532518,4281545574,4281558630,4281571686,4281584742,4281597798,4281532569,4281545625,4281558681,4281571737,4281584793,4281597849,4281532620,4281545676,4281558732,4281571788,4281584844,4281597900,4281532671,4281545727,4281558783,4281571839,4281584895,4281597951,4284874752,4284887808,4284900864,4284913920,4284926976,4284940032,4284874803,4284887859,4284900915,4284913971,4284927027,4284940083,4284874854,4284887910,4284900966,4284914022,4284927078,4284940134,4284874905,4284887961,4284901017,4284914073,4284927129,4284940185,4284874956,4284888012,4284901068,4284914124,4284927180,4284940236,4284875007,4284888063,4284901119,4284914175,4284927231,4284940287,4288217088,4288230144,4288243200,4288256256,4288269312,4288282368,4288217139,4288230195,4288243251,4288256307,4288269363,4288282419,4288217190,4288230246,4288243302,4288256358,4288269414,4288282470,4288217241,4288230297,4288243353,4288256409,4288269465,4288282521,4288217292,4288230348,4288243404,4288256460,4288269516,4288282572,4288217343,4288230399,4288243455,4288256511,4288269567,4288282623,4291559424,4291572480,4291585536,4291598592,4291611648,4291624704,4291559475,4291572531,4291585587,4291598643,4291611699,4291624755,4291559526,4291572582,4291585638,4291598694,4291611750,4291624806,4291559577,4291572633,4291585689,4291598745,4291611801,4291624857,4291559628,4291572684,4291585740,4291598796,4291611852,4291624908,4291559679,4291572735,4291585791,4291598847,4291611903,4291624959,4294901760,4294914816,4294927872,4294940928,4294953984,4294967040,4294901811,4294914867,4294927923,4294940979,4294954035,4294967091,4294901862,4294914918,4294927974,4294941030,4294954086,4294967142,4294901913,4294914969,4294928025,4294941081,4294954137,4294967193,4294901964,4294915020,4294928076,4294941132,4294954188,4294967244,4294902015,4294915071,4294928127,4294941183,4294954239,4294967295]}function Mua(y,S,F){return y<S?Rra(S-y+rsa,F+1)+1:S===y?0:0-(Rra(y-S+rsa,F+1)+1)}function Nua(){var y,S;wta=($sa?Ura:Tra)(Wra,32-(y=ata-(kta&(S=ata-1)))*Wsa),xta=($sa?Tra:Ura)(Wra,32-(1+(kta+Esa-1&S))*Wsa),Ata=Esa<y?(wta&=xta,xta=0,1):Rra(Esa-y+S,ata)+1,nta=Zta=1,Zsa=lta*bta+4*Rra(kta,ata),Vsa=bta*Zta-Ata*nta*4}function Oua(y,S){return S}function Pua(y,S){var F;return(fta[(F=S<<8)+(y>>>16&255)]<<10)+(fta[F+(y>>>8&255)]<<5)+fta[F+(255&y)]}function Rua(y,S,F){var P;P=Usa[y>>>2],P&=F,P|=S,Usa[y>>>2]=P}function Tua(y,S){var F,P;return"number"==typeof(P=tta.fetchPointerofObject(y,S))?P:-2147483648<=(F=tta.floatValueOf(P))&&F<=2147483647?0|F:(tta.primitiveFail(),0)}function Uua(y,S,F){var P,H;return"number"==typeof(H=tta.fetchPointerofObject(y,S))?H:H.isNil?F:-2147483648<=(P=tta.floatValueOf(H))&&P<=2147483647?0|P:(tta.primitiveFail(),0)}function Vua(y,S){return 32!==Wsa?S:0===S?0:0!=(4278190080&S)?S:S|4278190080&y}function Wua(){return zta}function Xua(y){return ota[(S=y)-Rra(S,F=qta)*F|0];var S,F}function Yua(y){return!!y.isNil||0===Rsa||5===Rsa||10===Rsa||15===Rsa}function _ua(){return Dta[1]=Cua,Dta[2]=pua,Dta[3]=qua,Dta[4]=bwa,Dta[5]=rua,Dta[6]=Oua,Dta[7]=Aua,Dta[8]=yua,Dta[9]=sua,Dta[10]=xua,Dta[11]=tua,Dta[12]=zua,Dta[13]=wua,Dta[14]=uua,Dta[15]=vua,Dta[16]=Oua,Dta[17]=Oua,Dta[18]=Oua,Dta[19]=gua,Dta[20]=cwa,Dta[21]=Iva,Dta[22]=Xva,Dta[23]=eua,Dta[24]=fua,Dta[25]=hua,Dta[26]=zva,Dta[27]=yva,Dta[28]=Tva,Dta[29]=Uva,Dta[30]=Vva,Dta[31]=iua,Dta[32]=lua,Dta[33]=Ova,Dta[34]=dwa,Dta[35]=kua,Dta[36]=kua,Dta[37]=kua,Dta[38]=Wva,Dta[39]=Ava,Dta[40]=xva,Dta[41]=Vua,Dta[42]=Nva,function(){var y,S,F,P,H,J,Q,ee,te;for(S=0;S<=255;S++)for(y=0;y<=15;y++)H=y,te=ee=Q=J=void 0,Q=hta[7&(J=255&(P=S))],ee=ita[J>>>3],te=H<Q?ee+1:ee,Q=hta[7&(J=P>>>8&255)],ee=ita[J>>>3],te|=H<Q?ee+1<<5:ee<<5,Q=hta[7&(J=P>>>16&255)],ee=ita[J>>>3],F=te|=H<Q?ee+1<<10:ee<<10,fta[(y<<8)+S]=F}(),!0}function bva(){var y;if(Usa=tta.fetchPointerofObject(ssa,Xsa),cta=tta.fetchIntegerofObject(vsa,Xsa),Ysa=tta.fetchIntegerofObject(usa,Xsa),!(0<=cta&&0<=Ysa))return!1;if(Wsa=tta.fetchIntegerofObject(tsa,Xsa),$sa=0<Wsa,Wsa<0&&(Wsa=0-Wsa),"number"==typeof Usa){if(!function(y){if(Fta||iva())return Fta(y,(function(y,S,F,P){cta=y,Ysa=S,Wsa=F,$sa=P}))}(Usa))return!1;ata=Rra(32,Wsa),Usa=bta=0}else{if(ata=Rra(32,Wsa),bta=4*Rra(cta+(ata-1),ata),y=Qra(Usa),!tta.isWordsOrBytes(Usa)||y!==bta*Ysa)return!1;Usa=Usa.wordsOrBytes()}return!0}function cva(y){return dva(y,!1)}function dva(y,S){if(Fsa=y,uta=S,Rsa=tta.fetchIntegerofObject(gsa,Fsa),tta.failed()||Rsa<0||xsa-2<Rsa)return!1;if(16<=Rsa&&Rsa<=17)return!1;if(Lta=tta.fetchPointerofObject(hsa,Fsa),Cta=Yua(Lta),pta=tta.fetchPointerofObject(esa,Fsa),Bta=Yua(pta),Xsa=tta.fetchPointerofObject(bsa,y),!(tta.isPointers(Xsa)&&4<=Pra(Xsa)))return!1;if(!bva())return!1;if(dta=Uua(csa,Fsa,0),eta=Uua(dsa,Fsa,0),dua=Uua(lsa,Fsa,cta),sta=Uua(fsa,Fsa,Ysa),tta.failed())return!1;if(Cta)Sta=Tta=0;else{if(!(tta.isPointers(Lta)&&4<=Pra(Lta)))return!1;if(!function(){var y;if(Ita=tta.fetchPointerofObject(ssa,Lta),Rta=Tua(vsa,Lta),Mta=Tua(usa,Lta),!(0<=Rta&&0<=Mta))return!1;if(Kta=tta.fetchIntegerofObject(tsa,Lta),Ota=0<Kta,Kta<0&&(Kta=0-Kta),"number"==typeof Ita){if(!function(y){if(Fta||iva())return Fta(y,(function(y,S,F,P){Rta=y,Mta=S,Kta=F,Ota=P}))}(Ita))return!1;Pta=Rra(32,Kta),Ita=Qta=0}else{if(Pta=Rra(32,Kta),Qta=4*Rra(Rta+(Pta-1),Pta),y=Qra(Ita),!tta.isWordsOrBytes(Ita)||y!==Qta*Mta)return!1;Ita=Ita.wordsOrBytes()}return!0}())return!1;if(!function(){var y,S,F,P;if(Msa=Osa=Lsa=0,Nsa=Psa=Qsa=null,(S=tta.fetchPointerofObject(asa,Fsa)).isNil)return!0;if(Msa=qsa,P=!1,tta.isWords(S))F=Pra(S),Nsa=S.words,P=!0;else{if(!(tta.isPointers(S)&&3<=Pra(S)))return!1;if(Qsa=gva(tta.fetchPointerofObject(0,S)),Psa=gva(tta.fetchPointerofObject(1,S)),(y=tta.fetchPointerofObject(2,S)).isNil)F=0;else{if(!tta.isWords(y))return!1;F=Pra(y),Nsa=y.words}Msa|=psa}return 0==(F&F-1)&&(Osa=F-1,Lsa=0,512===F&&(Lsa=3),4096===F&&(Lsa=4),32768===F&&(Lsa=5),0===F?(Nsa=null,Osa=0):Msa|=osa,P&&Zva(),!function(y,S){return!y||!S||0===y[ysa]&&0===y[wsa]&&0===y[msa]&&0===y[Xra]&&16711680===S[ysa]&&65280===S[wsa]&&255===S[msa]&&4278190080===S[Xra]}(Qsa,Psa)?Msa|=nsa:Qsa=Psa=null,!0)}())return!1;0==(Msa&psa)&&Zva(),Sta=Uua(isa,Fsa,0),Tta=Uua(jsa,Fsa,0)}return!!function(){var y;if(Bta)return!(ota=null);if(tta.isPointers(pta)&&4<=Pra(pta))y=tta.fetchPointerofObject(ssa,pta),qta=tta.fetchIntegerofObject(usa,pta),tta.isWords(y)||(Bta=!0);else{if(tta.isPointers(pta)||!tta.isWords(pta))return!1;qta=Pra(y=pta)}return ota=y.wordsOrBytes(),!0}()&&(Jsa=Uua($ra,Fsa,0),Ksa=Uua(_ra,Fsa,0),Isa=Uua(Zra,Fsa,cta),Hsa=Uua(Yra,Fsa,Ysa),!tta.failed()&&(Jsa<0&&(Isa+=Jsa,Jsa=0),Ksa<0&&(Hsa+=Ksa,Ksa=0),cta<Jsa+Isa&&(Isa=cta-Jsa),Ysa<Ksa+Hsa&&(Hsa=Ysa-Ksa),!0))}function gva(y){return y.isNil?null:"number"!=typeof y&&tta.isWords(y)&&4===Pra(y)?y.words:(tta.primitiveFail(),null)}function iva(){return Fta=tta.ioLoadFunctionFrom("ioGetSurfaceFormat","SurfacePlugin"),vta=tta.ioLoadFunctionFrom("ioLockSurface","SurfacePlugin"),Yta=tta.ioLoadFunctionFrom("ioUnlockSurface","SurfacePlugin"),Fta&&vta&&Yta}function kva(){var y,S,F,P,H,J;if(rta=!1,0===Usa){if(!vta&&!iva())return;if(P=vta,y=tta.fetchIntegerofObject(ssa,Xsa),0===Ita&&!Cta&&(S=tta.fetchIntegerofObject(ssa,Lta))===y)return Ita=uta?(J=Math.min(Vta,kta),H=Math.max(Vta,kta)+Esa,P(S,(function(y){Qta=y}),J,F=Math.min(Wta,lta),H-J,Math.max(Wta,lta)+Dsa-F)):P(S,(function(y){Qta=y}),0,0,Rta,Mta),bta=Qta,rta=!0,0!==(Usa=Ita);Usa=P(y,(function(y){bta=y}),kta,lta,Esa,Dsa),rta=!0}if(0===Ita&&!Cta){if(S=tta.fetchIntegerofObject(ssa,Lta),!vta&&!iva())return;P=vta,Ita=uta?P(S,(function(y){Qta=y}),0,0,Rta,Mta):P(S,(function(y){Qta=y}),Vta,Wta,Esa,Dsa),rta=!0}return 0!==Usa&&(0!==Ita||Cta)}function lva(y,S){var F,P,H;return F=y,0!=(S&qsa)&&(0!=(S&nsa)&&(H=Vra((P=y)&Psa[0],Qsa[0]),H|=Vra(P&Psa[1],Qsa[1]),0==(F=(H|=Vra(P&Psa[2],Qsa[2]))|Vra(P&Psa[3],Qsa[3]))&&0!==y&&(F=1)),0!=(S&osa)&&(F=Nsa[F&Osa])),F}function mva(y){0===strcmp(y,"SurfacePlugin")&&(Fta=vta=Yta=0)}function nva(y,S,F,P){var H,J,Q;for(Q=yta[F],H=0,J=1;J<=P;J++)(y&Q)===Q&&(H|=S&Q),Q=Tra(Q,F);return H}function ova(y,S,F,P,H){var J,Q,ee;return(Q=(y^(ee=y&H))+(S^(J=S&H)))^ee^J|Ura(ee&J|(ee|J)&Q,F-1)*P}function pva(y,S,F,P){var H,J,Q;for(Q=yta[F],H=0,J=1;J<=P;J++)H|=Math.max(S&Q,y&Q),Q=Tra(Q,F);return H}function qva(y,S,F,P){var H,J,Q;for(Q=yta[F],H=0,J=1;J<=P;J++)H|=Math.min(S&Q,y&Q),Q=Tra(Q,F);return H}function rva(y,S,F,P){var H,J,Q;return J=Ura((1+(y&(Q=yta[F])))*(1+(S&Q))-1&(H=Tra(Q,F)),F),1===P?J:(J|=(1+(Ura(y,F)&Q))*(1+(Ura(S,F)&Q))-1&H,2===P?J:(J|=Tra((1+(Ura(y,2*F)&Q))*(1+(Ura(S,2*F)&Q))-1&H,F),3===P?J:J|=Tra((1+(Ura(y,3*F)&Q))*(1+(Ura(S,3*F)&Q))-1&H,2*F)))}function tva(y,S,F,P){var H,J,Q,ee,te;for(te=yta[F],J=0,ee=1;ee<=P;ee++)J|=(Q=y&te)<(H=S&te)?H-Q:Q-H,te=Tra(te,F);return J}function vva(y,S,F,P,H,J){var Q,ee,te,re,ie,ae;if(te=Ita[Nta>>>2],ae=0,ee=Uta,re=jta,ie=y,S===(qsa|osa))for(;Q=Ura(te,ee)&F,ae|=Tra(Nsa[Q&Osa]&P,re),re+=J,0!=(4294967264&(ee+=H))&&(Ota?ee+=32:ee-=32,te=Ita[(Nta+=4)>>>2]),0!=--ie;);else for(;ae|=Tra(lva(Q=Ura(te,ee)&F,S)&P,re),re+=J,0!=(4294967264&(ee+=H))&&(Ota?ee+=32:ee-=32,te=Ita[(Nta+=4)>>>2]),0!=--ie;);return Uta=ee,ae}function wva(y,S){var F,P,H;return y<0||S<0||(P=y>>>14)>=Rta||(H=S>>>14)>=Mta?0:(F=H*Qta+4*Ura(P,_ta),Ura(Ita[F>>>2],Uta=aua[P&$ta])&bua)}function xva(y,S){var F,P,H,J,Q;if(32===Wsa)return y===S?0:S;for(Q=yta[P=Wsa],H=0,J=1;J<=ata;J++)(y&Q)==(F=S&Q)&&(F=0),H|=F,Q=Tra(Q,P);return H}function yva(y,S){return nva(~y,S,Wsa,ata)}function zva(y,S){return 0===y?S:y|nva(~y,S,Wsa,ata)}function Ava(y,S){var F,P,H,J,Q;if(1===ata)return S;if(F=0,H=Tra(1,Wsa)-1,J=Tra(H,(ata-1)*Wsa),F|=Tra(S&H,P=32-Wsa)|Ura(S&J,P),ata<=2)return F;for(Q=2;Q<=ata>>1;Q++)H=Tra(H,Wsa),J=Ura(J,Wsa),F|=Tra(S&H,P-=2*Wsa)|Ura(S&J,P);return F}function Bva(){return cva(tta.stackValue(tta.methodArgumentCount()))?(Eua(),tta.failed()?null:(_va(),tta.failed()?null:(tta.pop(tta.methodArgumentCount()),22===Rsa||32===Rsa?(tta.pop(1),tta.pushInteger(Gsa)):void 0))):tta.primitiveFail()}function Cva(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;if(6!==tta.methodArgumentCount())return tta.primitiveFail();if(ie=tta.stackIntegerValue(0),H=tta.stackObjectValue(1),te=tta.stackObjectValue(2),Ora(H)!==tta.classArray()||Ora(te)!==tta.classArray())return tta.primitiveFail();if(256!==Pra(te))return tta.primitiveFail();if(tta.failed())return null;if(J=Pra(H)-2,F=tta.stackIntegerValue(3),ae=tta.stackIntegerValue(4),ne=tta.stackObjectValue(5),!tta.isBytes(ne))return tta.primitiveFail();if(!(0<ae&&0<F&&F<=Qra(ne)))return tta.primitiveFail();if(!cva(P=tta.stackObjectValue(6)))return tta.primitiveFail();if(30===Rsa||31===Rsa)return tta.primitiveFail();for(Q=0!==Usa&&0!==Ita&&!1===Cta&&Lta!==Xsa&&(0!==Msa||Ota!==$sa||Kta!==Wsa),re=dta,S=ne.bytes,y=ae;y<=F;y++){if(se=S[y-1],(ee=tta.fetchIntegerofObject(se,te))<0||J<ee)return tta.primitiveFail();if(Sta=tta.fetchIntegerofObject(ee,H),dua=tta.fetchIntegerofObject(ee+1,H)-Sta,tta.failed())return null;if(Dua(),0<Esa&&0<Dsa&&(Q?(Nua(),Kua(),Bsa=(Asa=kta)+Esa,zsa=(Csa=lta)+Dsa):Eua()),tta.failed())return null;dta=dta+dua+ie}Asa=re,_va(),tta.storeIntegerofObjectwithValue(csa,P,dta),tta.pop(6)}function Dva(){var y,S,F;if(S=tta.stackValue(2),F=tta.stackIntegerValue(1),y=tta.stackIntegerValue(0),!cva(S))return tta.primitiveFail();tta.failed()||(function(y,S){var F,P,H,J,Q,ee,te,re,ie,ae;if(H=0<y?1:0===y?0:-1,ae=0<S?1:0===S?0:-1,ee=P=9999,Q=ie=-9999,(J=Math.abs(S))<(te=Math.abs(y))){for(F=te>>1,re=1;re<=te;re++)if(dta+=H,(F-=J)<0&&(eta+=ae,F+=te),re<te){if(Eua(),tta.failed())return;Asa<Bsa&&Csa<zsa&&(ee=Math.min(ee,Asa),Q=Math.max(Q,Bsa),P=Math.min(P,Csa),4e3<(Q-ee)*((ie=Math.max(ie,zsa))-P)&&(Asa=ee,Bsa=Q,Csa=P,zsa=ie,_va(),ee=P=9999,Q=ie=-9999))}}else for(F=J>>1,re=1;re<=J;re++)if(eta+=ae,(F-=te)<0&&(dta+=H,F+=J),re<J){if(Eua(),tta.failed())return;Asa<Bsa&&Csa<zsa&&(ee=Math.min(ee,Asa),Q=Math.max(Q,Bsa),P=Math.min(P,Csa),4e3<(Q-ee)*((ie=Math.max(ie,zsa))-P)&&(Asa=ee,Bsa=Q,Csa=P,zsa=ie,_va(),ee=P=9999,Q=ie=-9999))}Asa=ee,Bsa=Q,Csa=P,zsa=ie,tta.storeIntegerofObjectwithValue(csa,Fsa,dta),tta.storeIntegerofObjectwithValue(dsa,Fsa,eta)}(F,y),_va()),tta.failed()||tta.pop(2)}function Eva(){var y,S,F,P,H,J,Q,ee,te,re,ie;return te=tta.stackIntegerValue(1),re=tta.stackIntegerValue(0),tta.stackValue(2),tta.failed()?null:te<0||re<0?(ie=0,tta.failed()||tta.popthenPush(3,ie),null):(S=tta.stackValue(tta.methodArgumentCount()),tta.isPointers(S)&&4<=Pra(S)?(P=tta.fetchPointerofObject(ssa,S),tta.isWordsOrBytes(P)?(dua=tta.fetchIntegerofObject(vsa,S),sta=tta.fetchIntegerofObject(usa,S),F=tta.fetchIntegerofObject(tsa,S),tta.failed()?null:dua<=te||sta<=re?(ie=0,tta.failed()||tta.popthenPush(3,ie),null):F<0?(tta.primitiveFail(),null):(H=Rra(32,F),Q=Rra(dua+(H-1),H),Qra(P)!==Q*sta*4?(tta.primitiveFail(),null):(J=tta.fetchLong32ofObject(re*Q+Rra(te,H),P),ee=Ura(4294967295,32-F),y=Ura(J,32-(1+(te&H-1))*F)&ee,ie=tta.positive32BitIntegerFor(y),tta.failed()||tta.popthenPush(3,ie),null))):(tta.primitiveFail(),null)):(tta.primitiveFail(),null))}function Fva(){return dva(tta.stackValue(tta.methodArgumentCount()),!0)?(function(){var y;y=Cta,Cta=!0,Dua(),(Cta=y)||Esa<=0||Dsa<=0?Asa=Bsa=Csa=zsa=0:kva()?(Nua(),function(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke;if(te=Dta[Rsa+1],!(Pra(Fsa)>=ksa+12))return tta.primitiveFail();if((H=sta-1)<=0&&(H=1),(ve=Mua(pe=Tua(ksa,Fsa),F=Tua(ksa+3,Fsa),H))<0&&(pe=F-H*ve),(de=Mua(ue=Tua(ksa+1,Fsa),F=Tua(ksa+4,Fsa),H))<0&&(ue=F-H*de),(re=Mua(ce=Tua(ksa+9,Fsa),F=Tua(ksa+6,Fsa),H))<0&&(ce=F-H*re),(J=Mua(ie=Tua(ksa+10,Fsa),F=Tua(ksa+7,Fsa),H))<0&&(ie=F-H*J),!tta.failed()){if(2===tta.methodArgumentCount())if(ke=tta.stackIntegerValue(1),(fe=tta.stackValue(0)).isNil){if(Kta<16)return tta.primitiveFail()}else{if(Pra(fe)<Tra(1,Kta))return tta.primitiveFail();fe=fe.wordsOrBytes()}else ke=1,fe=tta.nilObject();for((H=dua-1)<=0&&(H=1),be=1+(kta+Esa-1&ata-1),Esa<(ee=ata-(kta&ata-1))&&(ee=Esa),eta<Ksa&&(pe+=(Ksa-eta)*ve,ue+=(Ksa-eta)*de,ce+=(Ksa-eta)*re,ie+=(Ksa-eta)*J),function(){var y,S;for(cua=0,S=Kta;1!==S;)++cua,S>>>=1;for(bua=yta[Kta],$ta=Tra(1,_ta=5-cua)-1,y=0;y<=$ta;y++)aua[y]=Ota?32-Tra(y+1,cua):Tra(y,cua)}(),1<ke&&0==(Msa&psa)&&(Nsa?$va(8,Lsa):16===Wsa&&$va(8,5)),y=Msa&~psa,S=$sa?(le=0-Wsa,32-Wsa):(le=Wsa,0),ae=1;ae<=Dsa;ae++){for(he=Mua(pe,ce,H),Vta=0<=he?pe:ce-H*he,se=Mua(ue,ie,H),Wta=0<=se?ue:ie-H*se,jta=$sa?32-(1+(kta&ata-1))*Wsa:(kta&ata-1)*Wsa,dta<Jsa&&(Vta+=(Jsa-dta)*he,Wta+=(Jsa-dta)*se),ne=Bta?Wra:Xua(lta+ae-1),_sa=wta,me=ee,F=Ata;P=1===ke?mwa(me,he,se,ve,de,le,y):lwa(me,he,se,ve,de,fe,ke,le),jta=S,_sa===Wra?(oe=te(P&ne,Usa[Zsa>>>2]),Usa[Zsa>>>2]=_sa&oe):(oe=te(P&ne,(Q=Usa[Zsa>>>2])&_sa),Q=_sa&oe|Q&~_sa,Usa[Zsa>>>2]=Q),Zsa+=4,me=2===F?(_sa=xta,be):(_sa=Wra,ata),0!=--F;);pe+=ve,ue+=de,ce+=re,ie+=J,Zsa+=Vsa}}}(),Bsa=0<nta?(Asa=kta)+Esa:(Asa=kta-Esa+1,kta+1),zsa=0<Zta?(Csa=lta)+Dsa:(Csa=lta-Dsa+1,lta+1),hwa()):tta.primitiveFail()}(),tta.failed()?null:(_va(),tta.failed()?null:void tta.pop(tta.methodArgumentCount()))):tta.primitiveFail()}function Iva(y,S){var F,P;return Wsa<16?(P=Tra(1,Wsa)-1,F=Tra(Rra(4294967295,P),Wsa-1),ova(y,S,Wsa,P,F)):16===Wsa?ova(2147450879&y,2147450879&S,5,P=31,F=1108361744):ova(y,S,8,P=255,F=2155905152)}function Lva(y,S){var F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;return 0===(oe=y)?S:(ne=255&oe,H=255&(oe>>>=8),te=255&(oe>>>=8),ee=255&(oe>>>=8),255!=(ie=255&Ssa)&&(ee=ee*ie>>>8,te=te*ie>>>8,H=H*ie>>>8,ne=ne*ie>>>8),J=255&(re=S),ue=255&(P=Tsa),Xta&&(J=Xta[J],ue=Xta[ue]),255<(se=(J*(255-ne)>>>8)+(ue*ne>>>8))&&(se=255),mta&&(se=mta[se]),J=255&(re>>>=8),ue=255&(P>>>=8),Xta&&(J=Xta[J],ue=Xta[ue]),255<(F=(J*(255-H)>>>8)+(ue*H>>>8))&&(F=255),mta&&(F=mta[F]),J=255&(re>>>=8),ue=255&(P>>>=8),Xta&&(J=Xta[J],ue=Xta[ue]),255<(ae=(J*(255-te)>>>8)+(ue*te>>>8))&&(ae=255),mta&&(ae=mta[ae]),P>>>=8,255<(Q=((255&(re>>>=8))*(255-ee)>>>8)+ee)&&(Q=255),(((Q<<8)+ae<<8)+F<<8)+se)}function Nva(y,S){return 0===y?S:function(y,S,F,P){var H,J,Q,ee,te,re;for(re=yta[F],J=0,ee=1;ee<=P;ee++)Q=Ura(y&re,(ee-1)*F),H=Ura(S&re,(ee-1)*F),32!==F&&(H=16===F?(Q=4278190080|Pva(Q),4278190080|Pva(H)):(Q=4278190080|Rva(Q,F,32),4278190080|Rva(H,F,32))),te=Lva(Q,H),32!==F&&(te=Rva(te,32,F)),J|=Tra(te,(ee-1)*F),re=Tra(re,F);return J}(y,S,Wsa,ata)}function Ova(y,S){var F,P,H,J,Q,ee,te,re,ie,ae;for(Q=yta[Wsa],ee=16===Wsa?(P=5,31):(P=8,255),ie=_sa,te=S,J=y,re=1;re<=ata;re++)0<(ie&Q)&&(ae=te&Q,F=J&Q,H=Wsa<16?F==ae?0:1:((H=tva(F,ae,P,3))&ee)+(Ura(H,P)&ee)+(Ura(Ura(H,P),P)&ee),Gsa+=H),ie=Ura(ie,Wsa),J=Ura(J,Wsa),te=Ura(te,Wsa);return S}function Pva(y){return(31&y)<<3|(992&y)<<6|(31744&y)<<9}function Rva(y,S,F){var P,H,J,Q;return 0<(P=F-S)?(Q=Tra(1,S)-1,H=(J=Tra(y,P))&(Q=Tra(Q,P)),Q=Tra(Q,F),H+((J=Tra(J,P))&Q)+(Tra(J,P)&Tra(Q,F))):0===P?5===S?32767&y:8===S?16777215&y:y:0===y?y:(Q=Tra(1,F)-1,H=(J=Ura(y,P=S-F))&Q,Q=Tra(Q,F),0===(H=H+((J=Ura(J,P))&Q)+(Ura(J,P)&Tra(Q,F)))?1:H)}function Tva(y,S){return Wsa<16?pva(y,S,Wsa,ata):16===Wsa?pva(y,S,5,3)+(pva(y>>>16,S>>>16,5,3)<<16):pva(y,S,8,4)}function Uva(y,S){return Wsa<16?qva(y,S,Wsa,ata):16===Wsa?qva(y,S,5,3)+(qva(y>>>16,S>>>16,5,3)<<16):qva(y,S,8,4)}function Vva(y,S){var F;return F=~y,Wsa<16?qva(F,S,Wsa,ata):16===Wsa?qva(F,S,5,3)+(qva(F>>>16,S>>>16,5,3)<<16):qva(F,S,8,4)}function Wva(y,S){return Wsa<16?rva(y,S,Wsa,ata):16===Wsa?rva(y,S,5,3)+(rva(y>>>16,S>>>16,5,3)<<16):rva(y,S,8,4)}function Xva(y,S){return Wsa<16?tva(y,S,Wsa,ata):16===Wsa?tva(y,S,5,3)+(tva(y>>>16,S>>>16,5,3)<<16):tva(y,S,8,4)}function Yva(y){return 0!=((tta=y).majorVersion()==Mra)&&tta.minorVersion()>=Nra}function Zva(){var y,S;if(y=S=0,!(Kta<=8)){if(16===Kta&&(y=5),32===Kta&&(y=8),0===Lsa){if(Wsa<=8)return;16===Wsa&&(S=5),32===Wsa&&(S=8)}else S=Lsa;$va(y,S)}}function $va(y,S){var F,P,H=[0,0,0,0],J=[0,0,0,0];0!=(F=S-y)&&(F<=0?(P=Tra(1,S)-1,J[ysa]=Tra(P,2*y-F),J[wsa]=Tra(P,y-F),J[msa]=Tra(P,0-F),J[Xra]=0):(P=Tra(1,y)-1,J[ysa]=Tra(P,2*y),J[wsa]=Tra(P,y),J[msa]=P),H[ysa]=3*F,H[wsa]=2*F,H[msa]=F,H[Xra]=0,Qsa=H,Psa=J,Msa=Msa|qsa|nsa)}function _va(){tta.showDisplayBitsLeftTopRightBottom(Xsa,Asa,Csa,Bsa,zsa)}function bwa(y,S){return y}function cwa(y,S){return y-S}function dwa(y,S){var F,P,H,J,Q,ee;if((Msa&(qsa|osa))!=(qsa|osa))return S;for(F=yta[Wsa],H=S,Q=_sa,J=1;J<=ata;J++)0!=(Q&F)&&(ee=H&F,fwa(P=Wsa<16?ee:Rva(ee,16===Wsa?5:8,Lsa),ewa(P)+1)),Q=Ura(Q,Wsa),H=Ura(H,Wsa);return S}function ewa(y){return Nsa[y&Osa]}function fwa(y,S){return Nsa[y&Osa]=S}function hwa(){var y,S,F,P;if(rta){if(!Yta&&!iva())return;F=Yta,P=!1,"number"==typeof(y=tta.fetchPointerofObject(ssa,Xsa))&&(F(y,Asa,Csa,Bsa-Asa,zsa-Csa),Usa=bta=0,P=!0),Cta||"number"==typeof(S=tta.fetchPointerofObject(ssa,Lta))&&(P&&S===y||F(S,0,0,0,0),Ita=Qta=0),rta=!1}}function lwa(y,S,F,P,H,J,Q,ee){var te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke,ge;ue=yta[Wsa],re=0,le=2===Q?(ie=S>>1,se=F>>1,oe=P>>1,H>>1):(ie=Rra(S,Q),se=Rra(F,Q),oe=Rra(P,Q),Rra(H,Q)),ne=y;do{be=Vta,fe=Wta,me=ve=de=he=0,ke=0,ae=Q;do{for(ge=be,pe=fe,te=Q;ce=wva(ge,pe),25===Rsa&&0===ce||(++ke,he+=255&(ce=Kta<16?J[ce]:16===Kta?Pva(ce):ce),de+=ce>>>8&255,ve+=ce>>>16&255,me+=ce>>>24),ge+=ie,pe+=se,0!=--te;);be+=oe,fe+=le}while(0!=--ae);re|=Tra((ce=0===ke||25===Rsa&&ke<Q*Q>>1?0:(4===ke?(ve>>>=2,de>>>=2,he>>>=2,me>>>=2):(ve=Rra(ve,ke),de=Rra(de,ke),he=Rra(he,ke),me=Rra(me,ke)),0===(ce=(me<<24)+(ve<<16)+(de<<8)+he)&&0<ve+de+he+me&&(ce=1),lva(ce,Msa)))&ue,jta),jta+=ee,Vta+=S,Wta+=F}while(0!=--ne);return re}function mwa(y,S,F,P,H,J,Q){var ee,te,re,ie;if(re=yta[Wsa],ie=0,te=y,Q===(qsa|osa))for(;ee=wva(Vta,Wta),ie|=Tra(Nsa[ee&Osa]&re,jta),jta+=J,Vta+=S,Wta+=F,0!=--te;);else for(;ie|=Tra(lva(ee=wva(Vta,Wta),Q)&re,jta),jta+=J,Vta+=S,Wta+=F,0!=--te;);return ie}function CroquetPlugin(){return{getModuleName:function(){return"CroquetPlugin"},interpreterProxy:null,setInterpreter:function(y){return this.interpreterProxy=y,!0},primitiveGatherEntropy:function(y){var S=this.interpreterProxy.stackObjectValue(0);return this.interpreterProxy.failed()?null:S.isBytes()?(window.crypto.getRandomValues(S.bytes),this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.trueObject()),!0):this.interpreterProxy.primitiveFail()}}}function registerCroquetPlugin(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("CroquetPlugin",CroquetPlugin()):self.setTimeout(registerCroquetPlugin,100)}function mHa(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function oHa(y,S){return 31<S?0:y<<S}function BHa(y){return sHa.success(sHa.isWords(y)),sHa.failed()?0:y.wordsAsFloat32Array()}function DHa(){return tHa}function EHa(y){var S,F;return sHa.success(6<=mHa(y)),!sHa.failed()&&(uHa=sHa.fetchIntegerofObject(0,y),pHa=sHa.fetchIntegerofObject(1,y),S=sHa.fetchPointerofObject(2,y),AHa=mHa(S),zHa=BHa(S),S=sHa.fetchPointerofObject(3,y),wHa=mHa(S),F=S,sHa.success(sHa.isWords(F)),vHa=F.words,S=sHa.fetchPointerofObject(4,y),yHa=mHa(S),xHa=BHa(S),S=sHa.fetchPointerofObject(5,y),rHa=mHa(S),qHa=BHa(S),sHa.success(oHa(1,uHa)===pHa&&1+(pHa>>2)===AHa&&pHa===yHa&&pHa===rHa&&yHa===rHa),!1===sHa.failed())}function FHa(){var y,S,F,P,H;for(P=0,F=wHa;P<F;){if(y=vHa[P]-1,S=vHa[P+1]-1,!(y<yHa&&S<yHa))return sHa.success(!1);H=xHa[y],xHa[y]=xHa[S],xHa[S]=H,H=qHa[y],qHa[y]=qHa[S],qHa[S]=H,P+=2}}function GHa(){if(!EHa(sHa.stackObjectValue(0)))return null;FHa(),sHa.failed()&&FHa()}function HHa(){if(!EHa(sHa.stackObjectValue(0)))return null;JHa()}function IHa(){var y;if(y=sHa.booleanValueOf(sHa.stackValue(0)),!EHa(sHa.stackObjectValue(1)))return null;!function(y){if(FHa(),sHa.failed())return FHa();(function(y){var S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce;for(F=pHa>>1,P=pHa>>2,se=1;se<=uHa;se++)for(ae=(ie=oHa(1,se))>>1,le=pHa,ce=ie,S=0|Math.floor(le/ce),re=1;re<=ae;re++)for(ee=(ue=(re-1)*S)<P?(oe=zHa[AHa-ue-1],zHa[ue]):(oe=0-zHa[ue-P],zHa[F-ue]),y||(ee=0-ee),H=re;H<=pHa;)J=H-1,ne=xHa[te=H+ae-1]*oe-qHa[te]*ee,Q=xHa[te]*ee+qHa[te]*oe,xHa[te]=xHa[J]-ne,qHa[te]=qHa[J]-Q,xHa[J]=xHa[J]+ne,qHa[J]=qHa[J]+Q,H+=ie})(y),y||JHa()}(y),sHa.failed()||sHa.pop(1)}function JHa(){var y,S;if(!(pHa<=1))for(S=1/pHa,y=0;y<=pHa-1;y++)xHa[y]=xHa[y]*S,qHa[y]=qHa[y]*S}function KHa(y){return 0!=((sHa=y).majorVersion()==kHa)&&sHa.minorVersion()>=lHa}function CIa(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function FIa(){return EIa}function GIa(){var y,S,F,P,H,J;if(y=DIa.stackObjectValue(0),H=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(y)),DIa.success(DIa.isWords(H)),DIa.failed())return null;if(P=CIa(y),DIa.success(P===CIa(H)),DIa.failed())return null;for(J=H.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),F=0;F<=P-1;F++)J[F]=J[F]+S[F];DIa.pop(1)}function HIa(){var y,S,F,P,H;if(H=DIa.stackFloatValue(0),F=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(F)),DIa.failed())return null;for(S=CIa(F),P=F.wordsAsFloat32Array(),y=0;y<=S-1;y++)P[y]=P[y]+H;DIa.pop(1)}function IIa(){var y,S,F;return S=DIa.stackIntegerValue(0),F=DIa.stackObjectValue(1),DIa.failed()?null:(DIa.success(DIa.isWords(F)),DIa.success(0<S&&S<=CIa(F)),DIa.failed()?null:(y=F.wordsAsFloat32Array()[S-1],DIa.pop(2),void DIa.pushFloat(y)))}function JIa(){var y,S,F,P;return y="number"==typeof(P=DIa.stackValue(0))?P:DIa.floatValueOf(P),S=DIa.stackIntegerValue(1),F=DIa.stackObjectValue(2),DIa.failed()?null:(DIa.success(DIa.isWords(F)),DIa.success(0<S&&S<=CIa(F)),DIa.failed()?null:(F.wordsAsFloat32Array()[S-1]=y,void(DIa.failed()||DIa.popthenPush(3,P))))}function KIa(){var y,S,F,P,H,J;if(y=DIa.stackObjectValue(0),H=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(y)),DIa.success(DIa.isWords(H)),DIa.failed())return null;if(P=CIa(y),DIa.success(P===CIa(H)),DIa.failed())return null;for(J=H.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),F=0;F<=P-1;F++)if(0===S[F])return DIa.primitiveFail();for(F=0;F<=P-1;F++)J[F]=J[F]/S[F];DIa.pop(1)}function LIa(){var y,S,F,P,H,J;if(J=DIa.stackFloatValue(0),P=DIa.stackObjectValue(1),DIa.failed())return null;if(0===J)return DIa.primitiveFail();if(DIa.success(DIa.isWords(P)),DIa.failed())return null;for(F=CIa(P),H=P.wordsAsFloat32Array(),S=1/J,y=0;y<=F-1;y++)H[y]=H[y]*S;DIa.pop(1)}function MIa(){var y,S,F,P,H,J,Q;if(y=DIa.stackObjectValue(0),H=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(y)),DIa.success(DIa.isWords(H)),DIa.failed())return null;if(P=CIa(y),DIa.success(P===CIa(H)),DIa.failed())return null;for(J=H.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),F=Q=0;F<=P-1;F++)Q+=J[F]*S[F];DIa.pop(2),DIa.pushFloat(Q)}function NIa(){var y,S,F,P,H,J;if(y=DIa.stackObjectValue(0),H=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(y)),DIa.success(DIa.isWords(H)),DIa.failed())return null;if(DIa.pop(2),(P=CIa(y))!==CIa(H))return DIa.pushBool(!1);for(J=H.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),F=0;F<=P-1;F++)if(J[F]!==S[F])return DIa.pushBool(!1);return DIa.pushBool(!0)}function OIa(){var y,S,F,P,H;if(F=DIa.stackObjectValue(0),DIa.failed())return null;if(DIa.success(DIa.isWords(F)),DIa.failed())return null;for(S=CIa(F),P=F.wordsAsInt32Array(),y=H=0;y<=S-1;y++)H+=P[y];return DIa.pop(1),DIa.pushInteger(536870911&H)}function PIa(){var y,S,F,P,H;if(F=DIa.stackObjectValue(0),DIa.failed())return null;if(DIa.success(DIa.isWords(F)),DIa.failed())return null;for(S=CIa(F),DIa.success(!0),P=F.wordsAsFloat32Array(),y=H=0;y<=S-1;y++)H+=P[y]*P[y];H=Math.sqrt(H),DIa.popthenPush(1,DIa.floatObjectOf(H))}function QIa(){var y,S,F,P,H,J;if(y=DIa.stackObjectValue(0),H=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(y)),DIa.success(DIa.isWords(H)),DIa.failed())return null;if(P=CIa(y),DIa.success(P===CIa(H)),DIa.failed())return null;for(J=H.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),F=0;F<=P-1;F++)J[F]=J[F]*S[F];DIa.pop(1)}function RIa(){var y,S,F,P,H;if(H=DIa.stackFloatValue(0),F=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(F)),DIa.failed())return null;for(S=CIa(F),P=F.wordsAsFloat32Array(),y=0;y<=S-1;y++)P[y]=P[y]*H;DIa.pop(1)}function SIa(){var y,S,F,P,H;if(P=DIa.stackObjectValue(0),DIa.failed())return null;if(DIa.success(DIa.isWords(P)),DIa.failed())return null;for(F=CIa(P),DIa.success(!0),H=P.wordsAsFloat32Array(),y=S=0;y<=F-1;y++)S+=H[y]*H[y];if(DIa.success(0<S),DIa.failed())return null;for(S=Math.sqrt(S),y=0;y<=F-1;y++)H[y]=H[y]/S}function TIa(){var y,S,F,P,H,J;if(y=DIa.stackObjectValue(0),H=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(y)),DIa.success(DIa.isWords(H)),DIa.failed())return null;if(P=CIa(y),DIa.success(P===CIa(H)),DIa.failed())return null;for(J=H.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),F=0;F<=P-1;F++)J[F]=J[F]-S[F];DIa.pop(1)}function UIa(){var y,S,F,P,H;if(H=DIa.stackFloatValue(0),F=DIa.stackObjectValue(1),DIa.failed())return null;if(DIa.success(DIa.isWords(F)),DIa.failed())return null;for(S=CIa(F),P=F.wordsAsFloat32Array(),y=0;y<=S-1;y++)P[y]=P[y]-H;DIa.pop(1)}function VIa(){var y,S,F,P,H;if(F=DIa.stackObjectValue(0),DIa.failed())return null;if(DIa.success(DIa.isWords(F)),DIa.failed())return null;for(S=CIa(F),P=F.wordsAsFloat32Array(),y=H=0;y<=S-1;y++)H+=P[y];DIa.popthenPush(1,DIa.floatObjectOf(H))}function WIa(y){return 0!=((DIa=y).majorVersion()==AIa)&&DIa.minorVersion()>=BIa}function JKa(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function KKa(y,S){return new Int32Array(y.buffer,y.byteOffset+4*S)}function NKa(y,S){var F,P,H,J;return F=y[0],H=y[1],(P=S[0]-F)*P+(J=S[1]-H)*J}function PKa(){return MKa}function SKa(y){console.log(MKa+": "+y)}function TKa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke,ge,ye,Se,Fe,Pe,we,Ie,Oe,_e,Xe,Ce,Ae,je,Ve,xe,Ze,Ye,Me,Le,Te,Be,Ne,qe,We;if(_e=LKa.stackValue(11),Xe=LKa.stackValue(10),Ce=LKa.stackValue(9),Ae=LKa.stackValue(8),je=LKa.stackValue(7),Ve=LKa.stackValue(6),xe=LKa.stackValue(5),Ze=LKa.stackValue(4),Ye=LKa.stackIntegerValue(3),Me=LKa.stackValue(2),Le=LKa.stackValue(1),Te=LKa.stackValue(0),LKa.failed())return null;if(LKa.failed())return SKa("failed 1"),null;if(LKa.success(LKa.isWords(_e)&&LKa.isWords(Xe)&&LKa.isWords(Ce)&&LKa.isWords(Ae)&&LKa.isWords(je)&&LKa.isWords(Ve)&&LKa.isWords(xe)&&LKa.isWords(Ze)&&LKa.isWords(Me)&&LKa.isWords(Le)&&LKa.isWords(Te)),LKa.failed())return SKa("failed 2"),null;if(LKa.success(LKa.isMemberOf(_e,"PointArray")&&LKa.isMemberOf(Xe,"PointArray")),LKa.failed())return SKa("failed 3"),null;if(se=_e.wordsAsInt32Array(),ce=Xe.wordsAsInt32Array(),he=Ce.wordsAsInt32Array(),te=Ae.wordsAsInt32Array(),oe=je.wordsAsInt32Array(),ie=Ve.wordsAsInt32Array(),Pe=xe.wordsAsInt32Array(),y=Ze.wordsAsInt32Array(),de=Me.wordsAsInt32Array(),Ie=Le.wordsAsInt32Array(),pe=Te.wordsAsInt32Array(),fe=JKa(Xe)>>>1,ge=JKa(Ce)>>>1,re=JKa(Ae)>>>1,S=JKa(Ve),ae=JKa(Me),LKa.success(ae===JKa(Le)&&ae===JKa(Te)&&re<ae),LKa.failed())return SKa("failed 4"),null;if(LKa.success(JKa(je)>=ge-1&&JKa(_e)>>>1>=ge&&re-1<=S&&re<=fe&&JKa(xe)>=ge-1&&JKa(Ze)>=re-1),LKa.failed())return SKa("failed 5"),null;if(ye=Ye>>>1,ue=(F=1&Ye)?0:ye*ye>>>10,pe[Ie[de[0]=0]=0]=2,ve=0-ue,!((ne=re)-1<=fe&&ne-1<=S))return LKa.primitiveFail(),null;for(me=1;me<=ne;me++)ve=ve+(ie[P=me-1]+NKa(KKa(ce,P<<1),se)>>>7)+ue,Ie[me]=ve,de[me]=ve*me,pe[me]=me+1;for(ve=Ie[0]-ue,ke=1;ke<=ge;ke++){for(be=(H=ke-1)<<1,Fe=de[0],ve=ve+(oe[H]+NKa(KKa(se,be),ce)>>>7)+ue,Ie[0]=ve,de[0]=ve*ke,pe[0]=ke+1,ne=re,me=1;me<=ne;me++)J=(P=me-1)<<1,Se=de[me],Oe=de[P],le=oe[H]+NKa(KKa(se,be),KKa(ce,me<<1))>>>7,0===(ve=Ie[me])?Se+=le:(Se=Se+ve+le*pe[me],le+=ve),ee=ie[P]+NKa(KKa(ce,J),KKa(se,ke<<1))>>>7,0===(ve=Ie[P])?Oe+=ee:(Oe=Oe+ve+ee*pe[P],ee+=ve),F?Fe=1<<29:Fe+=(NKa(KKa(te,J),KKa(he,be))+NKa(KKa(ce,J),KKa(se,be)))*(16+(Ne=y[P],qe=Pe[H],We=void 0,180<(We=Math.abs(qe-Ne))&&(We=360-We),We*We>>>6))>>>11,we=Fe<=Se&&Fe<=Oe?(Q=Fe,ve=0,1):Se<=Oe?(Q=Se,ve=le+ue,pe[me]+1):(Q=Oe,ve=ee+ue,pe[P]+1),Fe=de[me],de[me]=Math.min(Q,1<<29),Ie[me]=Math.min(ve,1<<29),pe[me]=we;ve=Ie[0]}return Be=Q,LKa.failed()||LKa.popthenPush(13,Be),null}function UKa(){return LKa.failed()||LKa.popthenPush(1,2e3),null}function VKa(y){return 0!=((LKa=y).majorVersion()==HKa)&&LKa.minorVersion()>=IKa}function lMa(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function nMa(y,S){return 0|Math.floor(y/S)}function oMa(y,S){return 31<S?0:y<<S}function tNa(y,S){return!("number"==typeof S||!fNa.isPointers(S)||lMa(S)<TMa||(y[sMa]=fNa.fetchIntegerofObject(sMa,S),y[tMa]=fNa.fetchIntegerofObject(tMa,S),y[NMa]=fNa.fetchIntegerofObject(NMa,S),y[XMa]=fNa.fetchIntegerofObject(XMa,S),y[qMa]=fNa.fetchIntegerofObject(qMa,S),y[PMa]=fNa.fetchIntegerofObject(PMa,S),y[UMa]=fNa.fetchIntegerofObject(UMa,S),fNa.failed()))}function uNa(y,S){var F,P,H,J;if("number"==typeof S)return!1;if(!fNa.isPointers(S))return!1;if(lMa(S)<TMa)return!1;if("number"==typeof(F=fNa.fetchPointerofObject(OMa,S)))return!1;if(!fNa.isPointers(F))return!1;if(J=lMa(F),RMa<J)return!1;for(H=0;H<=J-1;H++){if("number"==typeof(P=fNa.fetchPointerofObject(H,F)))return!1;if(!fNa.isWords(P))return!1;if(lMa(P)!==vMa)return!1;y[H]=P.wordsAsInt32Array()}return!fNa.failed()}function ANa(y){var S,F;return kNa<y&&(function(){for(var y;kNa<=16;){if(!(mNa<nNa))return;if(y=lNa[mNa],++mNa,255===y){if(!(mNa<nNa&&0===lNa[mNa]))return--mNa;++mNa}jNa=jNa<<8|y,kNa+=8}}(),kNa<y)?-1:(S=jNa,jNa&=oMa(1,F=kNa-=y)-1,31<F?0:S>>>F)}function BNa(){return oNa}function DNa(y,S){var F,P,H,J,Q;if(P=y[0]>>>24,QMa<P)return-1;for(J=2;;){if((F=ANa(P))<0)return-1;if(S<=(H=J+F-1))return-1;if(0==(1056964608&(Q=y[H])))return Q;if(J=65535&Q,QMa<(P=Q>>>24&255))return-1}return-1}function FNa(){var y,S,F,P,H,J,Q,ee;return F=S=_Ma[sMa],P=_Ma[tMa],Q=_Ma[NMa],ee=_Ma[XMa],0!==Q&&0!==ee&&(F=nMa(F,Q),P=nMa(P,ee)),y=(P>>>3)*_Ma[qMa]+(F>>>3),J=((7&P)<<3)+(7&F),H=$Ma[y][J],++S<8*_Ma[PMa]?_Ma[sMa]=S:(_Ma[sMa]=0,_Ma[tMa]++),H}function GNa(){var y,S,F,P,H,J,Q,ee;return F=S=bNa[sMa],P=bNa[tMa],Q=bNa[NMa],ee=bNa[XMa],0!==Q&&0!==ee&&(F=nMa(F,Q),P=nMa(P,ee)),y=(P>>>3)*bNa[qMa]+(F>>>3),J=((7&P)<<3)+(7&F),H=aNa[y][J],++S<8*bNa[PMa]?bNa[sMa]=S:(bNa[sMa]=0,bNa[tMa]++),H}function HNa(){var y,S,F,P,H,J,Q,ee;return F=S=rNa[sMa],P=rNa[tMa],Q=rNa[NMa],ee=rNa[XMa],0!==Q&&0!==ee&&(F=nMa(F,Q),P=nMa(P,ee)),y=(P>>>3)*rNa[qMa]+(F>>>3),J=((7&P)<<3)+(7&F),H=qNa[y][J],++S<8*rNa[PMa]?rNa[sMa]=S:(rNa[sMa]=0,rNa[tMa]++),H}function INa(){var y;return 4!==fNa.methodArgumentCount()?fNa.primitiveFail():(eNa=fNa.stackIntegerValue(0),y=fNa.stackObjectValue(1),fNa.failed()?null:fNa.isWords(y)&&3===lMa(y)?(pNa=y.wordsAsInt32Array(),y=fNa.stackObjectValue(2),fNa.failed()?null:fNa.isWords(y)?(hNa=lMa(y),gNa=y.wordsAsInt32Array(),y=fNa.stackObjectValue(3),fNa.failed()?null:PNa(y)?(function(){var y,S;for(rNa[sMa]=0,y=rNa[tMa]=0;y<=hNa-1;y++)S=HNa(),S+=pNa[MMa],S=Math.min(S,SMa),pNa[MMa]=S&eNa,S&=SMa-eNa,S=Math.max(S,1),gNa[y]=4278190080+(S<<16)+(S<<8)+S}(),void fNa.pop(4)):fNa.primitiveFail()):fNa.primitiveFail()):fNa.primitiveFail())}function JNa(){var y,S,F;return 4!==fNa.methodArgumentCount()?fNa.primitiveFail():(eNa=fNa.stackIntegerValue(0),y=fNa.stackObjectValue(1),fNa.failed()?null:fNa.isWords(y)&&3===lMa(y)?(pNa=y.wordsAsInt32Array(),y=fNa.stackObjectValue(2),fNa.failed()?null:fNa.isWords(y)?(hNa=lMa(y),gNa=y.wordsAsInt32Array(),y=fNa.stackObjectValue(3),fNa.failed()?null:fNa.isPointers(y)&&3===lMa(y)&&PNa(fNa.fetchPointerofObject(0,y))?(S=fNa.fetchPointerofObject(1,y),tNa(_Ma,S)&&uNa($Ma,S)?(F=fNa.fetchPointerofObject(2,y),tNa(bNa,F)&&uNa(aNa,F)?(function(){var y,S,F,P,H,J,Q;for(rNa[sMa]=0,rNa[tMa]=0,_Ma[sMa]=0,_Ma[tMa]=0,bNa[sMa]=0,H=bNa[tMa]=0;H<=hNa-1;H++)Q=HNa(),S=FNa(),S-=WMa,F=GNa(),J=Q+(EMa*(F-=WMa)>>16)+pNa[VMa],J=Math.min(J,SMa),J=Math.max(J,0),pNa[VMa]=J&eNa,J&=SMa-eNa,J=Math.max(J,1),P=Q-(xMa*S>>16)-(AMa*F>>16)+pNa[MMa],P=Math.min(P,SMa),P=Math.max(P,0),pNa[MMa]=P&eNa,P&=SMa-eNa,P=Math.max(P,1),y=Q+(GMa*S>>16)+pNa[rMa],y=Math.min(y,SMa),y=Math.max(y,0),pNa[rMa]=y&eNa,y&=SMa-eNa,y=Math.max(y,1),gNa[H]=4278190080+(J<<16)+(P<<8)+y}(),void fNa.pop(4)):fNa.primitiveFail()):fNa.primitiveFail()):fNa.primitiveFail()):fNa.primitiveFail()):fNa.primitiveFail())}function KNa(){var y,S,F,P;return 5!==fNa.methodArgumentCount()?fNa.primitiveFail():(F=fNa.stackObjectValue(0),fNa.failed()?null:function(y){var S,F,P;if(!(lMa(y)<5)&&fNa.isPointers(y)&&"number"!=typeof(S=fNa.fetchPointerofObject(0,y))&&fNa.isBytes(S)&&(lNa=S.bytes,F=(P=S).bytes?P.bytes.length:P.words?4*P.words.length:0,mNa=fNa.fetchIntegerofObject(1,y),nNa=fNa.fetchIntegerofObject(2,y),jNa=fNa.fetchIntegerofObject(3,y),kNa=fNa.fetchIntegerofObject(4,y),!fNa.failed()&&!(F<nNa||mNa<0||nNa<=mNa)))return 1}(F)?(S=fNa.stackObjectValue(1),fNa.failed()?null:fNa.isWords(S)?(ZMa=lMa(S),YMa=S.wordsAsInt32Array(),S=fNa.stackObjectValue(2),fNa.failed()?null:fNa.isWords(S)?(dNa=lMa(S),cNa=S.wordsAsInt32Array(),F=fNa.stackObjectValue(3),fNa.failed()?null:tNa(rNa,F)?(S=fNa.stackObjectValue(4),fNa.failed()?null:fNa.isWords(S)&&lMa(S)===vMa?(y=S.wordsAsInt32Array(),fNa.failed()?null:(function(y,S){var F,P,H,J;if((F=DNa(cNa,dNa))<0)return fNa.primitiveFail();for(0!==F&&(F=MNa(ANa(F),F)),F=S[UMa]=S[UMa]+F,y[0]=F,P=1;P<=vMa-1;P++)y[P]=0;for(H=1;H<vMa;){if((F=DNa(YMa,ZMa))<0)return fNa.primitiveFail();if(J=F>>>4,0!=(F&=15)){if(H+=J,F=MNa(ANa(F),F),H<0||vMa<=H)return fNa.primitiveFail();y[iNa[H]]=F}else{if(15!=J)return;H+=J}++H}}(y,rNa),fNa.failed()?null:(P=fNa.stackValue(0),fNa.storeIntegerofObjectwithValue(1,P,mNa),fNa.storeIntegerofObjectwithValue(3,P,jNa),fNa.storeIntegerofObjectwithValue(4,P,kNa),fNa.storeIntegerofObjectwithValue(UMa,fNa.stackValue(3),rNa[UMa]),void fNa.pop(5)))):fNa.primitiveFail()):fNa.primitiveFail()):fNa.primitiveFail()):fNa.primitiveFail()):fNa.primitiveFail())}function LNa(){var y,S;return 2!==fNa.methodArgumentCount()?fNa.primitiveFail():(y=fNa.stackObjectValue(0),fNa.failed()?null:fNa.isWords(y)&&lMa(y)===vMa?(S=y.wordsAsInt32Array(),y=fNa.stackObjectValue(1),fNa.failed()?null:fNa.isWords(y)&&lMa(y)===vMa?(function(y,S){var F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de=new Array(64);for(H=0;H<=uMa-1;H++){for(F=-1,Q=1;Q<=uMa-1;Q++)-1===F&&0!==y[Q*uMa+H]&&(F=Q);if(-1===F)for(P=y[H]*S[0]<<2,J=0;J<=uMa-1;J++)de[J*uMa+H]=P;else ne=(le=((ce=y[2*uMa+H]*S[2*uMa+H])+(fe=y[6*uMa+H]*S[6*uMa+H]))*zMa)+fe*(0-HMa),oe=le+ce*BMa,re=(ee=(ce=y[H]*S[H])+(fe=y[4*uMa+H]*S[4*uMa+H])<<13)+oe,se=ee-oe,ie=(te=ce-fe<<13)+ne,ae=te-ne,ee=y[7*uMa+H]*S[7*uMa+H],te=y[5*uMa+H]*S[5*uMa+H],ne=y[3*uMa+H]*S[3*uMa+H],le=ee+(oe=y[uMa+H]*S[uMa+H]),ce=te+ne,pe=((fe=ee+ne)+(he=te+oe))*DMa,fe*=0-IMa,he*=0-yMa,ee=(ee*=wMa)+(le*=0-CMa)+(fe+=pe),te=(te*=JMa)+(ce*=0-KMa)+(he+=pe),ne=(ne*=LMa)+ce+fe,oe=(oe*=FMa)+le+he,de[H]=re+oe>>11,de[7*uMa+H]=re-oe>>11,de[+uMa+H]=ie+ne>>11,de[6*uMa+H]=ie-ne>>11,de[2*uMa+H]=ae+te>>11,de[5*uMa+H]=ae-te>>11,de[3*uMa+H]=se+ee>>11,de[4*uMa+H]=se-ee>>11}for(H=0;H<=vMa-uMa;H+=uMa)ne=(le=((ce=de[H+2])+(fe=de[H+6]))*zMa)+fe*(0-HMa),oe=le+ce*BMa,re=(ee=de[H]+de[H+4]<<13)+oe,se=ee-oe,ie=(te=de[H]-de[H+4]<<13)+ne,ae=te-ne,ee=de[H+7],te=de[H+5],ne=de[H+3],le=ee+(oe=de[H+1]),ce=te+ne,pe=((fe=ee+ne)+(he=te+oe))*DMa,fe*=0-IMa,he*=0-yMa,ee=(ee*=wMa)+(le*=0-CMa)+(fe+=pe),te=(te*=JMa)+(ce*=0-KMa)+(he+=pe),ne=(ne*=LMa)+ce+fe,ue=(re+(oe=(oe*=FMa)+le+he)>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H]=ue,ue=(re-oe>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H+7]=ue,ue=(ie+ne>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H+1]=ue,ue=(ie-ne>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H+6]=ue,ue=(ae+te>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H+2]=ue,ue=(ae-te>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H+5]=ue,ue=(se+ee>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H+3]=ue,ue=(se-ee>>18)+WMa,ue=Math.min(ue,SMa),ue=Math.max(ue,0),y[H+4]=ue}(y.wordsAsInt32Array(),S),void fNa.pop(2)):fNa.primitiveFail()):fNa.primitiveFail())}function MNa(y,S){return y<oMa(1,S-1)?y-oMa(1,S)+1:y}function NNa(y){return 0!=((fNa=y).majorVersion()==jMa)&&fNa.minorVersion()>=kMa}function PNa(y){return tNa(rNa,y)&&uNa(qNa,y)}function TPa(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function UPa(y,S){return 0|Math.floor(y/S)}function VPa(y,S){return y-UPa(y,S)*S|0}function cQa(y,S){var F,P;return 0===y?0<=S?90:270:(F=S/y,P=Math.atan(F),0<=y?0<=S?P/.0174532925199433:360+P/.0174532925199433:180+P/.0174532925199433)}function dQa(y){var S,F;return F=(S=90-y)/360|0,S<0&&--F,.0174532925199433*(S-360*F)}function eQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;if(re=XPa.stackValue(0),S=XPa.stackValue(1),ue=XPa.stackValue(2),se=XPa.stackValue(3),P=XPa.stackIntegerValue(4),J=XPa.stackIntegerValue(5),H=XPa.stackValue(6),XPa.failed())return null;if(!XPa.isWords(H))return XPa.primitiveFail(),null;if(!XPa.isWords(se))return XPa.primitiveFail(),null;if(!XPa.isWords(ue))return XPa.primitiveFail(),null;if(!XPa.isWords(S))return XPa.primitiveFail(),null;if(!XPa.isBytes(re))return XPa.primitiveFail(),null;if(P*J!==TPa(H))return XPa.primitiveFail(),null;if(ee=TPa(se),TPa(ue)!==ee)return XPa.primitiveFail(),null;if(TPa(S)!==ee)return XPa.primitiveFail(),null;if(TPa(re)!==ee)return XPa.primitiveFail(),null;for(ae=se.wordsAsFloat32Array(),oe=ue.wordsAsFloat32Array(),y=S.words,te=re.bytes,F=H.words,Q=0;Q<=ee-1;Q++)ie=0|ae[Q],ne=0|oe[Q],0!==te[Q]&&0<=ie&&0<=ne&&ie<J&&ne<P&&(F[ne*J+ie]=y[Q]);if(XPa.failed())return null;XPa.pop(7)}function fQa(){var y,S,F,P,H,J,Q;if(J=XPa.stackValue(0),F=XPa.stackValue(1),XPa.failed())return null;if(!XPa.isWords(F))return XPa.primitiveFail(),null;if(!XPa.isWords(J))return XPa.primitiveFail(),null;if(Q=TPa(F),TPa(J)!==Q)return XPa.primitiveFail(),null;for(S=F.wordsAsFloat32Array(),H=J.wordsAsFloat32Array(),P=0;P<=Q-1;P++)y=S[P],0<(y=90-(y/=.0174532925199433))||(y+=360),H[P]=y;if(XPa.failed())return null;XPa.pop(2)}function gQa(){return ZPa}function hQa(){var y,S,F;return S=XPa.stackValue(0),F=XPa.stackIntegerValue(1),XPa.failed()?null:!XPa.isWords(S)||TPa(S)<F?(XPa.primitiveFail(),null):(y=DQa(y=S.wordsAsFloat32Array()[F-1]),XPa.failed()?null:(XPa.pop(3),void XPa.pushFloat(y)))}function iQa(){YPa=17,aQa=UPa(_Pa=2147483647,$Pa=16807),bQa=VPa(_Pa,$Pa)}function jQa(y){var S,F,P,H;return P=y<0?0-y:y,S=UPa(YPa,aQa),F=VPa(YPa,aQa),H=(65535&(YPa=$Pa*F-bQa*S))*(P+1)>>>16,y<0?0-H:H}function kQa(){var y;if(y=XPa.stackIntegerValue(0),XPa.failed())return null;YPa=65536&y,XPa.pop(1)}function lQa(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=XPa.stackIntegerValue(0),ee=XPa.stackIntegerValue(1),Q=XPa.stackValue(2),F=XPa.stackValue(3),XPa.failed())return null;if((P=TPa(F))!==TPa(Q))return XPa.primitiveFail(),null;if(te<-32)return XPa.primitiveFail(),null;if(8<te)return XPa.primitiveFail(),null;for(S=F.words,J=Q.words,H=0;H<=P-1;H++)re=S[H],255<(y=(ie=te)<0?ie<-31?0:re>>>0-ie:31<ie?0:re<<ie)&&(y=255),y<0&&(y=0),J[H]=y<<24&4278190080|ee;XPa.pop(4)}function mQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae;if(ie=XPa.stackValue(0),ae=XPa.stackIntegerValue(1),ee=XPa.stackValue(2),P=XPa.stackValue(3),XPa.failed())return null;if(te=ie.words[0],XPa.failed())return null;if(re=Math.log(te),(H=TPa(P))!==TPa(ee))return XPa.primitiveFail(),null;for(S=P.words,Q=ee.words,J=0;J<=H-1;J++)255<(y=0===(F=S[J])?0:255/re*Math.log(F)|0)&&(y=255),Q[J]=y<<24&4278190080|ae;XPa.pop(4)}function nQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;if(y=XPa.stackIntegerValue(0),te=XPa.stackIntegerValue(1),ne=XPa.stackValue(2),ae=XPa.stackValue(3),ee=XPa.stackValue(4),H=XPa.stackValue(5),!XPa.isWords(ne))return XPa.primitiveFail(),null;if(!XPa.isWords(ae))return XPa.primitiveFail(),null;if(!XPa.isWords(ee))return XPa.primitiveFail(),null;if(!XPa.isWords(H))return XPa.primitiveFail(),null;if(J=TPa(ee),TPa(ae)!==J)return XPa.primitiveFail(),null;if(TPa(ne)!==J)return XPa.primitiveFail(),null;if(TPa(H)!==y*te)return XPa.primitiveFail(),null;for(ie=ae.wordsAsFloat32Array(),se=ne.wordsAsFloat32Array(),Q=ee.words,F=H.words,S=0;S<=y*te-1;S++)F[S]=0;for(S=0;S<=J-1;S++)re=ie[S],0<=(P=te*se[S]+re)&&P<y*te&&(F[P]=Q[S]);if(XPa.failed())return null;XPa.pop(6)}function oQa(){var y,S,F,P,H,J,Q,ee,te;return F=XPa.stackIntegerValue(0),H=XPa.stackIntegerValue(1),te=XPa.stackFloatValue(2),Q=XPa.stackFloatValue(3),S=XPa.stackValue(4),XPa.failed()?null:XPa.isWords(S)&&TPa(S)===F*H?(J=0|Q,ee=0|te,y=S.words,P=0<=J&&J<H&&0<=ee&&ee<F?y[ee*H+J]:0,XPa.failed()?null:(XPa.pop(6),void XPa.pushInteger(P))):(XPa.primitiveFail(),null)}function pQa(){var y,S,F,P,H,J,Q,ee,te,re;return F=XPa.stackIntegerValue(0),J=XPa.stackIntegerValue(1),H=XPa.stackIntegerValue(2),re=XPa.stackFloatValue(3),ee=XPa.stackFloatValue(4),S=XPa.stackValue(5),XPa.failed()?null:XPa.isWords(S)&&TPa(S)===F*J?(Q=0|ee,te=0|re,1073741823<(P=H)&&(P=1073741823),P<0&&(P=0),y=S.words,0<=Q&&Q<J&&0<=te&&te<F&&(y[te*J+Q]=P),XPa.failed()?null:void XPa.pop(6)):(XPa.primitiveFail(),null)}function qQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe;if(Q=XPa.stackValue(0),S=XPa.stackIntegerValue(1),H=XPa.stackIntegerValue(2),P=XPa.stackValue(3),oe=XPa.stackValue(4),ae=XPa.stackValue(5),XPa.failed())return null;if(!XPa.isWords(Q))return XPa.primitiveFail(),null;if(!XPa.isWords(ae))return XPa.primitiveFail(),null;if(!XPa.isWords(oe))return XPa.primitiveFail(),null;if(!XPa.isWords(P))return XPa.primitiveFail(),null;if(S*H!==TPa(P))return XPa.primitiveFail(),null;if(te=TPa(ae),TPa(oe)!==te)return XPa.primitiveFail(),null;if(TPa(Q)!==te)return XPa.primitiveFail(),null;for(ie=ae.wordsAsFloat32Array(),ne=oe.wordsAsFloat32Array(),J=Q.words,y=P.words,ee=0;ee<=te-1;ee++)re=0|ie[ee],se=0|ne[ee],0<=re&&0<=se&&re<H&&se<S&&(F=se*H+re,J[ee]=y[F]);if(XPa.failed())return null;XPa.pop(6)}function rQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe;return y=XPa.stackIntegerValue(0),ne=XPa.stackIntegerValue(1),ae=XPa.stackIntegerValue(2),te=XPa.stackIntegerValue(3),S=XPa.stackFloatValue(4),F=XPa.stackFloatValue(5),oe=XPa.stackFloatValue(6),J=XPa.stackValue(7),fe=XPa.stackValue(8),le=XPa.stackValue(9),ee=XPa.stackIntegerValue(10),XPa.failed()?null:XPa.isWords(le)&&XPa.isWords(fe)&&XPa.isWords(J)?(se=TPa(le),TPa(fe)!==se||TPa(J)!==se?(XPa.primitiveFail(),null):(ue=le.wordsAsFloat32Array(),ce=fe.wordsAsFloat32Array(),H=J.wordsAsFloat32Array(),P=oe,re=ue[Q=ee-1]+P*Math.cos(H[Q]),ie=ce[Q]-P*Math.sin(H[Q]),JQa(Q,ue,H,re,F,te,ae),KQa(Q,ce,H,ie,S,ne,y),XPa.failed()?null:void XPa.pop(11))):(XPa.primitiveFail(),null)}function sQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce;if(ie=XPa.stackValue(0),S=XPa.stackIntegerValue(1),H=XPa.stackIntegerValue(2),P=XPa.stackValue(3),ce=XPa.stackValue(4),oe=XPa.stackValue(5),XPa.failed())return null;if(!XPa.isWords(oe))return XPa.primitiveFail(),null;if(!XPa.isWords(ce))return XPa.primitiveFail(),null;if(!XPa.isWords(P))return XPa.primitiveFail(),null;if(S*H!==TPa(P))return XPa.primitiveFail(),null;if(te=TPa(oe),TPa(ce)!==te)return XPa.primitiveFail(),null;if((ee="number"==typeof ie)&&(Q=ie),!ee){if(!XPa.isMemberOf(ie,"WordArray"))return XPa.primitiveFail(),null;if(TPa(ie)!==te)return XPa.primitiveFail(),null}for(ne=oe.wordsAsFloat32Array(),le=ce.wordsAsFloat32Array(),ee||(ae=ie.words),y=P.words,ee&&(re=Q),J=0;J<=te-1;J++)se=0|ne[J],ue=0|le[J],0<=se&&0<=ue&&se<H&&ue<S&&(F=ue*H+se,ee||(re=ae[J]),y[F]=re);if(XPa.failed())return null;XPa.pop(6)}function tQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe;if(y=XPa.stackIntegerValue(0),ne=XPa.stackIntegerValue(1),ae=XPa.stackIntegerValue(2),te=XPa.stackIntegerValue(3),S=XPa.stackFloatValue(4),F=XPa.stackFloatValue(5),le=XPa.stackValue(6),J=XPa.stackValue(7),pe=XPa.stackValue(8),fe=XPa.stackValue(9),XPa.failed())return null;if(!XPa.isWords(fe))return XPa.primitiveFail(),null;if(!XPa.isWords(pe))return XPa.primitiveFail(),null;if(!XPa.isWords(J))return XPa.primitiveFail(),null;if(le.isFloat)ee=!1;else{if(!XPa.isWords(le))return XPa.primitiveFail(),null;ee=!0}if(se=TPa(fe),TPa(pe)!==se)return XPa.primitiveFail(),null;if(TPa(J)!==se)return XPa.primitiveFail(),null;if(ee&&TPa(le)!==se)return XPa.primitiveFail(),null;for(ce=fe.wordsAsFloat32Array(),he=pe.wordsAsFloat32Array(),H=J.wordsAsFloat32Array(),ee?ue=le.wordsAsFloat32Array():oe=XPa.floatValueOf(le),Q=0;Q<=se-1;Q++)P=ee?ue[Q]:oe,re=ce[Q]+P*Math.cos(H[Q]),ie=he[Q]-P*Math.sin(H[Q]),JQa(Q,ce,H,re,F,te,ae),KQa(Q,he,H,ie,S,ne,y);if(XPa.failed())return null;XPa.pop(10)}function uQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de;if(ie=XPa.stackIntegerValue(0),H=XPa.stackIntegerValue(1),he=XPa.stackIntegerValue(2),S=XPa.stackValue(3),ne=XPa.stackFloatValue(4),ue=XPa.stackFloatValue(5),oe=XPa.stackFloatValue(6),XPa.failed())return null;if(!XPa.isWords(S))return XPa.primitiveFail(),null;if(TPa(S)!==H*he)return XPa.primitiveFail(),null;for(y=S.words,ce=oe,fe=ue,ce=Math.max(ce,0),fe=Math.max(fe,0),ce=Math.min(ce,he-1),fe=Math.min(fe,H-1),ae=Math.max(ce-ie,0),F=Math.min(ce+ie,he-1),se=Math.max(fe-ie,0),P=Math.min(fe+ie,H-1),J=y[fe*he+ce],Q=-1,de=se;de<=P;de++)for(re=de*he,pe=ae;pe<=F;pe++)J<(le=y[re+pe])&&(Q=pe,ee=de,J=le);if(te=-1===Q?DQa(ne):cQa(Q-ce,ee-fe)+90|0,XPa.failed())return null;XPa.pop(8),XPa.pushFloat(te)}function vQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=XPa.stackObjectValue(0),y=XPa.stackObjectValue(1),te=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(y)),XPa.success(XPa.isWords(te)),XPa.success(XPa.isWords(re)),XPa.failed())return null;if(ee=TPa(y),XPa.success(ee===TPa(te)),XPa.success(ee===TPa(re)),XPa.failed())return null;if(J=XPa.isMemberOf(y,"WordArray"),Q=XPa.isMemberOf(te,"WordArray"),J&&Q){if(!XPa.isMemberOf(re,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(re,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]+ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]+S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]+ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]+S[H];XPa.pop(4),XPa.push(re)}function wQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=XPa.stackObjectValue(0),y=XPa.stackValue(1),re=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(re)),XPa.success(XPa.isWords(ie)),XPa.failed())return null;if(te=TPa(re),XPa.success(te===TPa(ie)),XPa.failed())return null;if(Q="number"==typeof y,ee=XPa.isMemberOf(re,"WordArray"),Q&&ee){if(!XPa.isMemberOf(ie,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(ie,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=ae[H]+J;else for(ae=re.words,S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]+S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]+J;else for(F=re.wordsAsFloat32Array(),S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]+S;XPa.pop(4),XPa.push(ie)}function xQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=XPa.stackObjectValue(0),y=XPa.stackObjectValue(1),te=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(y)),XPa.success(XPa.isWords(te)),XPa.success(XPa.isWords(re)),XPa.failed())return null;if(ee=TPa(y),XPa.success(ee===TPa(te)),XPa.success(ee===TPa(re)),XPa.failed())return null;if(J=XPa.isMemberOf(y,"WordArray"),Q=XPa.isMemberOf(te,"WordArray"),J&&Q){if(!XPa.isMemberOf(re,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(re,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]/ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]/S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]/ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]/S[H];XPa.pop(4),XPa.push(re)}function yQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=XPa.stackObjectValue(0),y=XPa.stackValue(1),re=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(re)),XPa.success(XPa.isWords(ie)),XPa.failed())return null;if(te=TPa(re),XPa.success(te===TPa(ie)),XPa.failed())return null;if(Q="number"==typeof y,ee=XPa.isMemberOf(re,"WordArray"),Q&&ee){if(!XPa.isMemberOf(ie,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(ie,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=UPa(ae[H],J);else for(ae=re.words,S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]/S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]/J;else for(F=re.wordsAsFloat32Array(),S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]/S;XPa.pop(4),XPa.push(ie)}function zQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=XPa.stackObjectValue(0),y=XPa.stackObjectValue(1),te=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(y)),XPa.success(XPa.isWords(te)),XPa.success(XPa.isWords(re)),XPa.failed())return null;if(ee=TPa(y),XPa.success(ee===TPa(te)),XPa.success(ee===TPa(re)),XPa.failed())return null;if(J=XPa.isMemberOf(y,"WordArray"),Q=XPa.isMemberOf(te,"WordArray"),J&&Q){if(!XPa.isMemberOf(re,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(re,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]*ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]*S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]*ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]*S[H];XPa.pop(4),XPa.push(re)}function AQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=XPa.stackObjectValue(0),y=XPa.stackValue(1),re=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(re)),XPa.success(XPa.isWords(ie)),XPa.failed())return null;if(te=TPa(re),XPa.success(te===TPa(ie)),XPa.failed())return null;if(Q="number"==typeof y,ee=XPa.isMemberOf(re,"WordArray"),Q&&ee){if(!XPa.isMemberOf(ie,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(ie,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=ae[H]*J;else for(ae=re.words,S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]*S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]*J;else for(F=re.wordsAsFloat32Array(),S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]*S;XPa.pop(4),XPa.push(ie)}function BQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=XPa.stackObjectValue(0),y=XPa.stackObjectValue(1),te=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(y)),XPa.success(XPa.isWords(te)),XPa.success(XPa.isWords(re)),XPa.failed())return null;if(ee=TPa(y),XPa.success(ee===TPa(te)),XPa.success(ee===TPa(re)),XPa.failed())return null;if(J=XPa.isMemberOf(y,"WordArray"),Q=XPa.isMemberOf(te,"WordArray"),J&&Q){if(!XPa.isMemberOf(re,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(re,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]-ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]-S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]-ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]-S[H];XPa.pop(4),XPa.push(re)}function CQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=XPa.stackObjectValue(0),y=XPa.stackValue(1),re=XPa.stackObjectValue(2),XPa.failed())return null;if(XPa.success(XPa.isWords(re)),XPa.success(XPa.isWords(ie)),XPa.failed())return null;if(te=TPa(re),XPa.success(te===TPa(ie)),XPa.failed())return null;if(Q="number"==typeof y,ee=XPa.isMemberOf(re,"WordArray"),Q&&ee){if(!XPa.isMemberOf(ie,"WordArray"))return XPa.primitiveFail(),null}else if(!XPa.isMemberOf(ie,"KedamaFloatArray"))return XPa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=ae[H]-J;else for(ae=re.words,S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]-S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]-J;else for(F=re.wordsAsFloat32Array(),S=XPa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]-S;XPa.pop(4),XPa.push(ie)}function DQa(y){var S;return 0<(S=90-y/.0174532925199433)||(S+=360),S}function EQa(){var y,S,F,P,H,J,Q;if(y=XPa.stackFloatValue(0),F=XPa.stackValue(1),Q=XPa.stackIntegerValue(2),P=XPa.stackIntegerValue(3),J=XPa.stackIntegerValue(4),XPa.failed())return null;if(!XPa.isWords(F))return XPa.primitiveFail(),null;if(!(Q<=TPa(F)&&1<=P&&P<=Q))return XPa.primitiveFail(),null;if(S=F.wordsAsFloat32Array(),XPa.failed())return null;for(H=P;H<=Q;H++)S[H-1]=jQa(J)*y;XPa.pop(5)}function FQa(){var y,S,F,P,H,J,Q;if(y=XPa.stackFloatValue(0),H=XPa.stackValue(1),Q=XPa.stackIntegerValue(2),S=XPa.stackIntegerValue(3),J=XPa.stackIntegerValue(4),XPa.failed())return null;if(!XPa.isWords(H))return XPa.primitiveFail(),null;if(!(Q<=TPa(H)&&1<=S&&S<=Q))return XPa.primitiveFail(),null;if(P=H.words,XPa.failed())return null;for(F=S;F<=Q;F++)P[F-1]=jQa(J)*y|0;XPa.pop(5)}function GQa(){var y,S;return y=XPa.stackIntegerValue(0),XPa.failed()?null:(S=jQa(y),XPa.failed()?null:(XPa.pop(2),void XPa.pushInteger(S)))}function HQa(){var y,S,F,P,H;return S=XPa.stackFloatValue(0),y=XPa.stackFloatValue(1),H=XPa.stackFloatValue(2),P=XPa.stackFloatValue(3),XPa.failed()?null:(F=cQa(P-y,H-S),360<(F+=90)&&(F-=360),XPa.failed()?null:(XPa.pop(5),void XPa.pushFloat(F)))}function IQa(){var y,S,F,P,H,J,Q;return S=XPa.stackFloatValue(0),y=XPa.stackFloatValue(1),H=XPa.stackFloatValue(2),P=XPa.stackFloatValue(3),XPa.failed()?null:(J=y-P,Q=S-H,F=Math.sqrt(J*J+Q*Q),XPa.failed()?null:(XPa.pop(5),void XPa.pushFloat(F)))}function JQa(y,S,F,P,H,J,Q){var ee,te;(te=P)<0&&(1===J&&(te+=H),2===J&&(te=0),3===J&&(te=0-te,ee=F[y],F[y]=ee<3.141592653589793?3.141592653589793-ee:9.42477796076938-ee)),H<=te&&(1===Q&&(te-=H),2===Q&&(te=H-1e-6),3===Q&&(te=H-1e-6-(te-H),ee=F[y],F[y]=ee<3.141592653589793?3.141592653589793-ee:9.42477796076938-ee)),S[y]=te}function KQa(y,S,F,P,H,J,Q){var ee;(ee=P)<0&&(1===J&&(ee+=H),2===J&&(ee=0),3===J&&(ee=0-ee,F[y]=6.283185307179586-F[y])),H<=ee&&(1===Q&&(ee-=H),2===Q&&(ee=H-1e-6),3===Q&&(ee=H-1e-6-(ee-H),F[y]=6.283185307179586-F[y])),S[y]=ee}function LQa(){var y,S,F,P,H,J,Q,ee;if(Q=XPa.stackValue(0),F=XPa.stackValue(1),XPa.failed())return null;if(!XPa.isWords(F))return XPa.primitiveFail(),null;if(ee=TPa(F),Q.isFloat)H=!1;else{if(!XPa.isWords(Q))return XPa.primitiveFail(),null;if(TPa(Q)!==ee)return XPa.primitiveFail(),null;H=!0}for(S=F.wordsAsFloat32Array(),H?J=Q.wordsAsFloat32Array():y=dQa(y=XPa.floatValueOf(Q)),P=0;P<=ee-1;P++)H&&(y=dQa(y=J[P])),S[P]=y;if(XPa.failed())return null;XPa.pop(2)}function MQa(y){return 0!=((XPa=y).majorVersion()==RPa)&&XPa.minorVersion()>=SPa}function NQa(){var y,S,F;return y=XPa.stackFloatValue(0),S=XPa.stackValue(1),F=XPa.stackIntegerValue(2),XPa.failed()?null:!XPa.isWords(S)||TPa(S)<F?(XPa.primitiveFail(),null):(S.wordsAsFloat32Array()[F-1]=dQa(y),XPa.failed()?null:void XPa.pop(3))}function OQa(){return!0}function PQa(){var y,S,F,P,H,J,Q,ee;return P=XPa.stackIntegerValue(0),F=XPa.stackIntegerValue(1),y=XPa.stackFloatValue(2),J=XPa.stackFloatValue(3),S=XPa.stackValue(4),Q=XPa.stackIntegerValue(5),ee=XPa.stackValue(6),XPa.failed()?null:XPa.isWords(ee)&&XPa.isWords(S)?(H=TPa(ee),TPa(S)!==H?(XPa.primitiveFail(),null):(JQa(Q-1,ee.wordsAsFloat32Array(),S.wordsAsFloat32Array(),J,y,F,P),XPa.failed()?null:void XPa.pop(7))):(XPa.primitiveFail(),null)}function QQa(){var y,S,F,P,H,J,Q,ee;return y=XPa.stackIntegerValue(0),H=XPa.stackIntegerValue(1),S=XPa.stackFloatValue(2),J=XPa.stackFloatValue(3),F=XPa.stackValue(4),Q=XPa.stackIntegerValue(5),ee=XPa.stackValue(6),XPa.failed()?null:XPa.isWords(ee)&&XPa.isWords(F)?(P=TPa(ee),TPa(F)!==P?(XPa.primitiveFail(),null):(KQa(Q-1,ee.wordsAsFloat32Array(),F.wordsAsFloat32Array(),J,S,H,y),XPa.failed()?null:void XPa.pop(7))):(XPa.primitiveFail(),null)}function RQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(Q=XPa.stackIntegerValue(0),J=XPa.stackIntegerValue(1),y=XPa.stackFloatValue(2),ie=XPa.stackValue(3),F=XPa.stackValue(4),se=XPa.stackValue(5),XPa.failed())return null;if(!XPa.isWords(se))return XPa.primitiveFail(),null;if(!XPa.isWords(F))return XPa.primitiveFail(),null;if(ie.isFloat)H=!1;else{if(!XPa.isWords(ie))return XPa.primitiveFail(),null;H=!0}if(ee=TPa(se),TPa(F)!==ee)return XPa.primitiveFail(),null;if(H&&TPa(ie)!==ee)return XPa.primitiveFail(),null;for(ae=se.wordsAsFloat32Array(),S=F.wordsAsFloat32Array(),H?re=ie.wordsAsFloat32Array():te=XPa.floatValueOf(ie),P=0;P<=ee-1;P++)JQa(P,ae,S,H?re[P]:te,y,J,Q);if(XPa.failed())return null;XPa.pop(6)}function SQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(y=XPa.stackIntegerValue(0),ee=XPa.stackIntegerValue(1),S=XPa.stackFloatValue(2),ie=XPa.stackValue(3),P=XPa.stackValue(4),se=XPa.stackValue(5),XPa.failed())return null;if(!XPa.isWords(se))return XPa.primitiveFail(),null;if(!XPa.isWords(P))return XPa.primitiveFail(),null;if(ie.isFloat)J=!1;else{if(!XPa.isWords(ie))return XPa.primitiveFail(),null;J=!0}if(Q=TPa(se),TPa(P)!==Q)return XPa.primitiveFail(),null;if(J&&TPa(ie)!==Q)return XPa.primitiveFail(),null;for(ae=se.wordsAsFloat32Array(),F=P.wordsAsFloat32Array(),J?re=ie.wordsAsFloat32Array():te=XPa.floatValueOf(ie),H=0;H<=Q-1;H++)KQa(H,ae,F,J?re[H]:te,S,ee,y);if(XPa.failed())return null;XPa.pop(6)}function TQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;if(ie=XPa.stackValue(0),ue=XPa.stackValue(1),ne=XPa.stackValue(2),J=XPa.stackValue(3),P=XPa.stackValue(4),XPa.failed())return null;if(!XPa.isWords(ie))return XPa.primitiveFail(),null;if(!XPa.isWords(ne))return XPa.primitiveFail(),null;if(!XPa.isWords(ue))return XPa.primitiveFail(),null;if((ae=TPa(ie))<0)return XPa.primitiveFail(),null;if(TPa(ne)!==ae)return XPa.primitiveFail(),null;if(TPa(ue)!==ae)return XPa.primitiveFail(),null;if(P.isFloat){if(!J.isFloat)return XPa.primitiveFail(),null;S=!1}else{if(J.isFloat)return XPa.primitiveFail(),null;S=!0}if(S){if(TPa(P)!==ae)return XPa.primitiveFail(),null;if(TPa(J)!==ae)return XPa.primitiveFail(),null}for(re=ie.wordsAsFloat32Array(),se=ne.wordsAsFloat32Array(),oe=ue.wordsAsFloat32Array(),S&&(F=P.wordsAsFloat32Array(),H=J.wordsAsFloat32Array()),S||(Q=XPa.floatValueOf(P),ee=XPa.floatValueOf(J)),y=0;y<=ae-1;y++)S&&(Q=F[y],ee=H[y]),te=cQa(Q-se[y],ee-oe[y]),360<(te+=90)&&(te-=360),re[y]=te;if(XPa.failed())return null;XPa.pop(6),XPa.push(ie)}function UQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;if(re=XPa.stackValue(0),le=XPa.stackValue(1),ne=XPa.stackValue(2),J=XPa.stackValue(3),P=XPa.stackValue(4),XPa.failed())return null;if(!XPa.isWords(re))return XPa.primitiveFail(),null;if(!XPa.isWords(ne))return XPa.primitiveFail(),null;if(!XPa.isWords(le))return XPa.primitiveFail(),null;if((ie=TPa(re))<0)return XPa.primitiveFail(),null;if(TPa(ne)!==ie)return XPa.primitiveFail(),null;if(TPa(le)!==ie)return XPa.primitiveFail(),null;if(P.isFloat){if(!J.isFloat)return XPa.primitiveFail(),null;S=!1}else{if(J.isFloat)return XPa.primitiveFail(),null;S=!0}if(S){if(TPa(P)!==ie)return XPa.primitiveFail(),null;if(TPa(J)!==ie)return XPa.primitiveFail(),null}for(te=re.wordsAsFloat32Array(),se=ne.wordsAsFloat32Array(),ue=le.wordsAsFloat32Array(),S&&(F=P.wordsAsFloat32Array(),H=J.wordsAsFloat32Array()),S||(Q=XPa.floatValueOf(P),ee=XPa.floatValueOf(J)),y=0;y<=ie-1;y++)S&&(Q=F[y],ee=H[y]),ae=Q-se[y],oe=ee-ue[y],te[y]=Math.sqrt(ae*ae+oe*oe);if(XPa.failed())return null;XPa.pop(6),XPa.push(re)}function VQa(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce;if(ce=XPa.stackIntegerValue(0),ue=XPa.stackIntegerValue(1),Q=XPa.stackIntegerValue(2),te=XPa.stackIntegerValue(3),F=XPa.stackValue(4),re=XPa.stackValue(5),XPa.failed())return null;if(se=TPa(re),H=TPa(F),te*Q!==se)return XPa.primitiveFail(),null;if(se*ue*ce!==H)return XPa.primitiveFail(),null;for(ee=re.words,S=F.words,oe=P=ae=ie=0;oe<=Q-1;oe++){for(le=0;le<=ce-1;le++){for(ne=0;ne<=te-1;ne++)for(y=ee[ie],++ie,J=0;J<=ue-1;J++)S[P]=y,++P;ie=ae}ie=ae+=te}XPa.pop(6)}function UZa(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function VZa(y,S){return 0|Math.floor(y/S)}function WZa(y,S){return y-VZa(y,S)*S|0}function d$a(y,S){var F,P;return 0===y?0<=S?90:270:(F=S/y,P=Math.atan(F),0<=y?0<=S?P/.0174532925199433:360+P/.0174532925199433:180+P/.0174532925199433)}function e$a(y){var S,F;return F=(S=90-y)/360|0,S<0&&--F,.0174532925199433*(S-360*F)}function f$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;if(re=YZa.stackValue(0),S=YZa.stackValue(1),ue=YZa.stackValue(2),se=YZa.stackValue(3),P=YZa.stackIntegerValue(4),J=YZa.stackIntegerValue(5),H=YZa.stackValue(6),YZa.failed())return null;if(!YZa.isWords(H))return YZa.primitiveFail(),null;if(!YZa.isWords(se))return YZa.primitiveFail(),null;if(!YZa.isWords(ue))return YZa.primitiveFail(),null;if(!YZa.isWords(S))return YZa.primitiveFail(),null;if(!YZa.isBytes(re))return YZa.primitiveFail(),null;if(P*J!==UZa(H))return YZa.primitiveFail(),null;if(ee=UZa(se),UZa(ue)!==ee)return YZa.primitiveFail(),null;if(UZa(S)!==ee)return YZa.primitiveFail(),null;if(UZa(re)!==ee)return YZa.primitiveFail(),null;for(ae=se.wordsAsFloat32Array(),oe=ue.wordsAsFloat32Array(),y=S.words,te=re.bytes,F=H.words,Q=0;Q<=ee-1;Q++)ie=0|ae[Q],ne=0|oe[Q],0!==te[Q]&&0<=ie&&0<=ne&&ie<J&&ne<P&&(F[ne*J+ie]=y[Q]);if(YZa.failed())return null;YZa.pop(7)}function g$a(){var y,S,F,P,H,J,Q;if(J=YZa.stackValue(0),F=YZa.stackValue(1),YZa.failed())return null;if(!YZa.isWords(F))return YZa.primitiveFail(),null;if(!YZa.isWords(J))return YZa.primitiveFail(),null;if(Q=UZa(F),UZa(J)!==Q)return YZa.primitiveFail(),null;for(S=F.wordsAsFloat32Array(),H=J.wordsAsFloat32Array(),P=0;P<=Q-1;P++)y=S[P],0<(y=90-(y/=.0174532925199433))||(y+=360),H[P]=y;if(YZa.failed())return null;YZa.pop(2)}function h$a(){return $Za}function i$a(){var y,S,F;return S=YZa.stackValue(0),F=YZa.stackIntegerValue(1),YZa.failed()?null:!YZa.isWords(S)||UZa(S)<F?(YZa.primitiveFail(),null):(y=_$a(y=S.wordsAsFloat32Array()[F-1]),YZa.failed()?null:(YZa.pop(3),void YZa.pushFloat(y)))}function j$a(){ZZa=17,b$a=VZa(a$a=2147483647,_Za=16807),c$a=WZa(a$a,_Za)}function k$a(y){var S,F,P,H;return P=y<0?0-y:y,S=VZa(ZZa,b$a),F=WZa(ZZa,b$a),H=(65535&(ZZa=_Za*F-c$a*S))*(P+1)>>>16,y<0?0-H:H}function l$a(){var y;if(y=YZa.stackIntegerValue(0),YZa.failed())return null;ZZa=65536&y,YZa.pop(1)}function m$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=YZa.stackIntegerValue(0),ee=YZa.stackIntegerValue(1),Q=YZa.stackValue(2),F=YZa.stackValue(3),YZa.failed())return null;if((P=UZa(F))!==UZa(Q))return YZa.primitiveFail(),null;if(te<-32)return YZa.primitiveFail(),null;if(8<te)return YZa.primitiveFail(),null;for(S=F.words,J=Q.words,H=0;H<=P-1;H++)re=S[H],255<(y=(ie=te)<0?ie<-31?0:re>>>0-ie:31<ie?0:re<<ie)&&(y=255),y<0&&(y=0),J[H]=y<<24&4278190080|ee;YZa.pop(4)}function n$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae;if(ie=YZa.stackValue(0),ae=YZa.stackIntegerValue(1),ee=YZa.stackValue(2),P=YZa.stackValue(3),YZa.failed())return null;if(te=ie.words[0],YZa.failed())return null;if(re=Math.log(te),(H=UZa(P))!==UZa(ee))return YZa.primitiveFail(),null;for(S=P.words,Q=ee.words,J=0;J<=H-1;J++)255<(y=0===(F=S[J])?0:255/re*Math.log(F)|0)&&(y=255),Q[J]=y<<24&4278190080|ae;YZa.pop(4)}function o$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;if(y=YZa.stackIntegerValue(0),te=YZa.stackIntegerValue(1),ne=YZa.stackValue(2),ae=YZa.stackValue(3),ee=YZa.stackValue(4),H=YZa.stackValue(5),!YZa.isWords(ne))return YZa.primitiveFail(),null;if(!YZa.isWords(ae))return YZa.primitiveFail(),null;if(!YZa.isWords(ee))return YZa.primitiveFail(),null;if(!YZa.isWords(H))return YZa.primitiveFail(),null;if(J=UZa(ee),UZa(ae)!==J)return YZa.primitiveFail(),null;if(UZa(ne)!==J)return YZa.primitiveFail(),null;if(UZa(H)!==y*te)return YZa.primitiveFail(),null;for(ie=ae.wordsAsFloat32Array(),se=ne.wordsAsFloat32Array(),Q=ee.words,F=H.words,S=0;S<=y*te-1;S++)F[S]=0;for(S=0;S<=J-1;S++)re=ie[S],0<=(P=te*se[S]+re)&&P<y*te&&(F[P]=Q[S]);if(YZa.failed())return null;YZa.pop(6)}function p$a(){var y,S,F,P,H,J,Q,ee,te;return F=YZa.stackIntegerValue(0),H=YZa.stackIntegerValue(1),te=YZa.stackFloatValue(2),Q=YZa.stackFloatValue(3),S=YZa.stackValue(4),YZa.failed()?null:YZa.isWords(S)&&UZa(S)===F*H?(J=0|Q,ee=0|te,y=S.words,P=0<=J&&J<H&&0<=ee&&ee<F?y[ee*H+J]:0,YZa.failed()?null:(YZa.pop(6),void YZa.pushInteger(P))):(YZa.primitiveFail(),null)}function q$a(){var y,S,F,P,H,J,Q,ee,te,re;return F=YZa.stackIntegerValue(0),J=YZa.stackIntegerValue(1),H=YZa.stackIntegerValue(2),re=YZa.stackFloatValue(3),ee=YZa.stackFloatValue(4),S=YZa.stackValue(5),YZa.failed()?null:YZa.isWords(S)&&UZa(S)===F*J?(Q=0|ee,te=0|re,1073741823<(P=H)&&(P=1073741823),P<0&&(P=0),y=S.words,0<=Q&&Q<J&&0<=te&&te<F&&(y[te*J+Q]=P),YZa.failed()?null:void YZa.pop(6)):(YZa.primitiveFail(),null)}function r$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe;if(Q=YZa.stackValue(0),S=YZa.stackIntegerValue(1),H=YZa.stackIntegerValue(2),P=YZa.stackValue(3),oe=YZa.stackValue(4),ae=YZa.stackValue(5),YZa.failed())return null;if(!YZa.isWords(Q))return YZa.primitiveFail(),null;if(!YZa.isWords(ae))return YZa.primitiveFail(),null;if(!YZa.isWords(oe))return YZa.primitiveFail(),null;if(!YZa.isWords(P))return YZa.primitiveFail(),null;if(S*H!==UZa(P))return YZa.primitiveFail(),null;if(te=UZa(ae),UZa(oe)!==te)return YZa.primitiveFail(),null;if(UZa(Q)!==te)return YZa.primitiveFail(),null;for(ie=ae.wordsAsFloat32Array(),ne=oe.wordsAsFloat32Array(),J=Q.words,y=P.words,ee=0;ee<=te-1;ee++)re=0|ie[ee],se=0|ne[ee],0<=re&&0<=se&&re<H&&se<S&&(F=se*H+re,J[ee]=y[F]);if(YZa.failed())return null;YZa.pop(6)}function s$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe;return y=YZa.stackIntegerValue(0),ne=YZa.stackIntegerValue(1),ae=YZa.stackIntegerValue(2),te=YZa.stackIntegerValue(3),S=YZa.stackFloatValue(4),F=YZa.stackFloatValue(5),oe=YZa.stackFloatValue(6),J=YZa.stackValue(7),fe=YZa.stackValue(8),le=YZa.stackValue(9),ee=YZa.stackIntegerValue(10),YZa.failed()?null:YZa.isWords(le)&&YZa.isWords(fe)&&YZa.isWords(J)?(se=UZa(le),UZa(fe)!==se||UZa(J)!==se?(YZa.primitiveFail(),null):(ue=le.wordsAsFloat32Array(),ce=fe.wordsAsFloat32Array(),H=J.wordsAsFloat32Array(),P=oe,re=ue[Q=ee-1]+P*Math.cos(H[Q]),ie=ce[Q]-P*Math.sin(H[Q]),f_a(Q,ue,H,re,F,te,ae),g_a(Q,ce,H,ie,S,ne,y),YZa.failed()?null:void YZa.pop(11))):(YZa.primitiveFail(),null)}function t$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de;if(oe=YZa.stackValue(0),S=YZa.stackIntegerValue(1),H=YZa.stackIntegerValue(2),P=YZa.stackValue(3),de=YZa.stackValue(4),fe=YZa.stackValue(5),ae=YZa.stackValue(6),YZa.failed())return null;if(!YZa.isBytes(ae))return YZa.primitiveFail(),null;if(!YZa.isWords(fe))return YZa.primitiveFail(),null;if(!YZa.isWords(de))return YZa.primitiveFail(),null;if(!YZa.isWords(P))return YZa.primitiveFail(),null;if(S*H!==UZa(P))return YZa.primitiveFail(),null;if(se=UZa(fe),UZa(ae)!==se)return YZa.primitiveFail(),null;if(UZa(de)!==se)return YZa.primitiveFail(),null;if(ie=ae.bytes,ce=fe.wordsAsFloat32Array(),pe=de.wordsAsFloat32Array(),te="number"==typeof oe)ne=oe;else{if(UZa(oe)!==se)return YZa.primitiveFail(),null;(re=YZa.isMemberOf(oe,"WordArray"))?ue=oe.words:J=oe.wordsAsFloat32Array()}for(y=P.words,ee=0;ee<=se-1;ee++)1===ie[ee]&&(le=0|ce[ee],he=0|pe[ee],0<=le&&0<=he&&le<H&&he<S&&(F=he*H+le,te?y[F]=ne:re?y[F]=ue[ee]:(Q=J[ee],y[F]=Q)));if(YZa.failed())return null;YZa.pop(7)}function u$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be;if(y=YZa.stackIntegerValue(0),ue=YZa.stackIntegerValue(1),ne=YZa.stackIntegerValue(2),te=YZa.stackIntegerValue(3),S=YZa.stackFloatValue(4),F=YZa.stackFloatValue(5),fe=YZa.stackValue(6),J=YZa.stackValue(7),be=YZa.stackValue(8),pe=YZa.stackValue(9),se=YZa.stackValue(10),YZa.failed())return null;if(!YZa.isBytes(se))return YZa.primitiveFail(),null;if(!YZa.isWords(pe))return YZa.primitiveFail(),null;if(!YZa.isWords(be))return YZa.primitiveFail(),null;if(!YZa.isWords(J))return YZa.primitiveFail(),null;if(fe.isFloat)ee=!1;else{if(!YZa.isWords(fe))return YZa.primitiveFail(),null;ee=!0}if(oe=UZa(pe),UZa(be)!==oe)return YZa.primitiveFail(),null;if(UZa(J)!==oe)return YZa.primitiveFail(),null;if(UZa(se)!==oe)return YZa.primitiveFail(),null;if(ee&&UZa(fe)!==oe)return YZa.primitiveFail(),null;for(ae=se.bytes,he=pe.wordsAsFloat32Array(),de=be.wordsAsFloat32Array(),H=J.wordsAsFloat32Array(),ee?ce=fe.wordsAsFloat32Array():le=YZa.floatValueOf(fe),Q=0;Q<=oe-1;Q++)1===ae[Q]&&(P=ee?ce[Q]:le,re=he[Q]+P*Math.cos(H[Q]),ie=de[Q]-P*Math.sin(H[Q]),f_a(Q,he,H,re,F,te,ne),g_a(Q,de,H,ie,S,ue,y));if(YZa.failed())return null;YZa.pop(11)}function v$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de;if(ie=YZa.stackIntegerValue(0),H=YZa.stackIntegerValue(1),he=YZa.stackIntegerValue(2),S=YZa.stackValue(3),ne=YZa.stackFloatValue(4),ue=YZa.stackFloatValue(5),oe=YZa.stackFloatValue(6),YZa.failed())return null;if(!YZa.isWords(S))return YZa.primitiveFail(),null;if(UZa(S)!==H*he)return YZa.primitiveFail(),null;for(y=S.words,ce=oe,fe=ue,ce=Math.max(ce,0),fe=Math.max(fe,0),ce=Math.min(ce,he-1),fe=Math.min(fe,H-1),ae=Math.max(ce-ie,0),F=Math.min(ce+ie,he-1),se=Math.max(fe-ie,0),P=Math.min(fe+ie,H-1),J=y[fe*he+ce],Q=-1,de=se;de<=P;de++)for(re=de*he,pe=ae;pe<=F;pe++)J<(le=y[re+pe])&&(Q=pe,ee=de,J=le);if(te=-1===Q?_$a(ne):d$a(Q-ce,ee-fe)+90|0,YZa.failed())return null;YZa.pop(8),YZa.pushFloat(te)}function w$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(te)),YZa.success(YZa.isWords(re)),YZa.failed())return null;if(ee=UZa(y),YZa.success(ee===UZa(te)),YZa.success(ee===UZa(re)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),Q=YZa.isMemberOf(te,"WordArray"),J&&Q){if(!YZa.isMemberOf(re,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(re,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]+ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]+S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]+ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]+S[H];YZa.pop(4),YZa.push(re)}function x$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=YZa.stackObjectValue(0),y=YZa.stackValue(1),re=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(re)),YZa.success(YZa.isWords(ie)),YZa.failed())return null;if(te=UZa(re),YZa.success(te===UZa(ie)),YZa.failed())return null;if(Q="number"==typeof y,ee=YZa.isMemberOf(re,"WordArray"),Q&&ee){if(!YZa.isMemberOf(ie,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(ie,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=ae[H]+J;else for(ae=re.words,S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]+S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]+J;else for(F=re.wordsAsFloat32Array(),S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]+S;YZa.pop(4),YZa.push(ie)}function y$a(){var y,S,F,P,H,J,Q,ee;if(J=YZa.stackObjectValue(0),ee=YZa.stackValue(1),YZa.failed())return null;if(YZa.success(YZa.isBytes(ee)),YZa.success(YZa.isBytes(J)),YZa.failed())return null;if(F=UZa(ee),P=UZa(J),YZa.failed())return null;for(P<(S=F)&&(S=P),H=J.bytes,Q=ee.bytes,y=0;y<=S-1;y++)Q[y]=Q[y]+H[y]===2;YZa.pop(1)}function z$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(te)),YZa.success(YZa.isWords(re)),YZa.failed())return null;if(ee=UZa(y),YZa.success(ee===UZa(te)),YZa.success(ee===UZa(re)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),Q=YZa.isMemberOf(te,"WordArray"),J&&Q){if(!YZa.isMemberOf(re,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(re,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]/ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]/S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]/ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]/S[H];YZa.pop(4),YZa.push(re)}function A$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=YZa.stackObjectValue(0),y=YZa.stackValue(1),re=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(re)),YZa.success(YZa.isWords(ie)),YZa.failed())return null;if(te=UZa(re),YZa.success(te===UZa(ie)),YZa.failed())return null;if(Q="number"==typeof y,ee=YZa.isMemberOf(re,"WordArray"),Q&&ee){if(!YZa.isMemberOf(ie,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(ie,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=VZa(ae[H],J);else for(ae=re.words,S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]/S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]/J;else for(F=re.wordsAsFloat32Array(),S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]/S;YZa.pop(4),YZa.push(ie)}function B$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),ee=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(ee)),YZa.success(YZa.isBytes(te)),YZa.failed())return null;if(Q=UZa(y),YZa.success(Q===UZa(ee)),YZa.success(Q===UZa(te)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),YZa.isMemberOf(ee,"WordArray"))if(J)for(ie=ee.words,re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]===re[H];else for(ie=ee.words,F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]===F[H];else if(J)for(P=ee.wordsAsFloat32Array(),re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]===re[H];else for(P=ee.wordsAsFloat32Array(),F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]===F[H];YZa.pop(4),YZa.push(te)}function C$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(re=YZa.stackObjectValue(0),y=YZa.stackValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(te)),YZa.success(YZa.isBytes(re)),YZa.failed())return null;if(ee=UZa(te),YZa.success(ee===UZa(re)),YZa.failed())return null;if(Q="number"==typeof y,YZa.isMemberOf(te,"WordArray"))if(Q)for(ie=te.words,J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]===J;else for(ie=te.words,F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]===F;else if(Q)for(P=te.wordsAsFloat32Array(),J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]===J;else for(P=te.wordsAsFloat32Array(),F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]===F;YZa.pop(4),YZa.push(re)}function D$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),ee=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(ee)),YZa.success(YZa.isBytes(te)),YZa.failed())return null;if(Q=UZa(y),YZa.success(Q===UZa(ee)),YZa.success(Q===UZa(te)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),YZa.isMemberOf(ee,"WordArray"))if(J)for(ie=ee.words,re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]>=re[H];else for(ie=ee.words,F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]>=F[H];else if(J)for(P=ee.wordsAsFloat32Array(),re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]>=re[H];else for(P=ee.wordsAsFloat32Array(),F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]>=F[H];YZa.pop(4),YZa.push(te)}function E$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(re=YZa.stackObjectValue(0),y=YZa.stackValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(te)),YZa.success(YZa.isBytes(re)),YZa.failed())return null;if(ee=UZa(te),YZa.success(ee===UZa(re)),YZa.failed())return null;if(Q="number"==typeof y,YZa.isMemberOf(te,"WordArray"))if(Q)for(ie=te.words,J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]>=J;else for(ie=te.words,F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]>=F;else if(Q)for(P=te.wordsAsFloat32Array(),J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]>=J;else for(P=te.wordsAsFloat32Array(),F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]>=F;YZa.pop(4),YZa.push(re)}function F$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),ee=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(ee)),YZa.success(YZa.isBytes(te)),YZa.failed())return null;if(Q=UZa(y),YZa.success(Q===UZa(ee)),YZa.success(Q===UZa(te)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),YZa.isMemberOf(ee,"WordArray"))if(J)for(ie=ee.words,re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]>re[H];else for(ie=ee.words,F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]>F[H];else if(J)for(P=ee.wordsAsFloat32Array(),re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]>re[H];else for(P=ee.wordsAsFloat32Array(),F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]>F[H];YZa.pop(4),YZa.push(te)}function G$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(re=YZa.stackObjectValue(0),y=YZa.stackValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(te)),YZa.success(YZa.isBytes(re)),YZa.failed())return null;if(ee=UZa(te),YZa.success(ee===UZa(re)),YZa.failed())return null;if(Q="number"==typeof y,YZa.isMemberOf(te,"WordArray"))if(Q)for(ie=te.words,J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]>J;else for(ie=te.words,F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]>F;else if(Q)for(P=te.wordsAsFloat32Array(),J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]>J;else for(P=te.wordsAsFloat32Array(),F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]>F;YZa.pop(4),YZa.push(re)}function H$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),ee=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(ee)),YZa.success(YZa.isBytes(te)),YZa.failed())return null;if(Q=UZa(y),YZa.success(Q===UZa(ee)),YZa.success(Q===UZa(te)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),YZa.isMemberOf(ee,"WordArray"))if(J)for(ie=ee.words,re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]<=re[H];else for(ie=ee.words,F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]<=F[H];else if(J)for(P=ee.wordsAsFloat32Array(),re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]<=re[H];else for(P=ee.wordsAsFloat32Array(),F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]<=F[H];YZa.pop(4),YZa.push(te)}function I$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(re=YZa.stackObjectValue(0),y=YZa.stackValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(te)),YZa.success(YZa.isBytes(re)),YZa.failed())return null;if(ee=UZa(te),YZa.success(ee===UZa(re)),YZa.failed())return null;if(Q="number"==typeof y,YZa.isMemberOf(te,"WordArray"))if(Q)for(ie=te.words,J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]<=J;else for(ie=te.words,F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]<=F;else if(Q)for(P=te.wordsAsFloat32Array(),J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]<=J;else for(P=te.wordsAsFloat32Array(),F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]<=F;YZa.pop(4),YZa.push(re)}function J$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),ee=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(ee)),YZa.success(YZa.isBytes(te)),YZa.failed())return null;if(Q=UZa(y),YZa.success(Q===UZa(ee)),YZa.success(Q===UZa(te)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),YZa.isMemberOf(ee,"WordArray"))if(J)for(ie=ee.words,re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]<re[H];else for(ie=ee.words,F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]<F[H];else if(J)for(P=ee.wordsAsFloat32Array(),re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]<re[H];else for(P=ee.wordsAsFloat32Array(),F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]<F[H];YZa.pop(4),YZa.push(te)}function K$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(re=YZa.stackObjectValue(0),y=YZa.stackValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(te)),YZa.success(YZa.isBytes(re)),YZa.failed())return null;if(ee=UZa(te),YZa.success(ee===UZa(re)),YZa.failed())return null;if(Q="number"==typeof y,YZa.isMemberOf(te,"WordArray"))if(Q)for(ie=te.words,J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]<J;else for(ie=te.words,F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]<F;else if(Q)for(P=te.wordsAsFloat32Array(),J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]<J;else for(P=te.wordsAsFloat32Array(),F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]<F;YZa.pop(4),YZa.push(re)}function L$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(te)),YZa.success(YZa.isWords(re)),YZa.failed())return null;if(ee=UZa(y),YZa.success(ee===UZa(te)),YZa.success(ee===UZa(re)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),Q=YZa.isMemberOf(te,"WordArray"),J&&Q){if(!YZa.isMemberOf(re,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(re,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]*ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]*S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]*ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]*S[H];YZa.pop(4),YZa.push(re)}function M$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=YZa.stackObjectValue(0),y=YZa.stackValue(1),re=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(re)),YZa.success(YZa.isWords(ie)),YZa.failed())return null;if(te=UZa(re),YZa.success(te===UZa(ie)),YZa.failed())return null;if(Q="number"==typeof y,ee=YZa.isMemberOf(re,"WordArray"),Q&&ee){if(!YZa.isMemberOf(ie,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(ie,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=ae[H]*J;else for(ae=re.words,S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]*S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]*J;else for(F=re.wordsAsFloat32Array(),S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]*S;YZa.pop(4),YZa.push(ie)}function N$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(te=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),ee=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(ee)),YZa.success(YZa.isBytes(te)),YZa.failed())return null;if(Q=UZa(y),YZa.success(Q===UZa(ee)),YZa.success(Q===UZa(te)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),YZa.isMemberOf(ee,"WordArray"))if(J)for(ie=ee.words,re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]!==re[H];else for(ie=ee.words,F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=ie[H]!==F[H];else if(J)for(P=ee.wordsAsFloat32Array(),re=y.words,S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]!==re[H];else for(P=ee.wordsAsFloat32Array(),F=y.wordsAsFloat32Array(),S=te.bytes,H=0;H<=Q-1;H++)S[H]=P[H]!==F[H];YZa.pop(4),YZa.push(te)}function O$a(){var y,S,F,P,H,J,Q,ee,te,re,ie;if(re=YZa.stackObjectValue(0),y=YZa.stackValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(te)),YZa.success(YZa.isBytes(re)),YZa.failed())return null;if(ee=UZa(te),YZa.success(ee===UZa(re)),YZa.failed())return null;if(Q="number"==typeof y,YZa.isMemberOf(te,"WordArray"))if(Q)for(ie=te.words,J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]!==J;else for(ie=te.words,F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=ie[H]!==F;else if(Q)for(P=te.wordsAsFloat32Array(),J=y,S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]!==J;else for(P=te.wordsAsFloat32Array(),F=YZa.floatValueOf(y),S=re.bytes,H=0;H<=ee-1;H++)S[H]=P[H]!==F;YZa.pop(4),YZa.push(re)}function P$a(){var y,S,F,P;if(P=YZa.stackValue(0),YZa.failed())return null;if(YZa.success(YZa.isBytes(P)),YZa.failed())return null;if(S=UZa(P),YZa.failed())return null;for(F=P.bytes,y=0;y<=S-1;y++)0===F[y]?F[y]=1:F[y]=0}function Q$a(){var y,S,F,P,H,J,Q,ee;if(J=YZa.stackObjectValue(0),ee=YZa.stackValue(1),YZa.failed())return null;if(YZa.success(YZa.isBytes(ee)),YZa.success(YZa.isBytes(J)),YZa.failed())return null;if(F=UZa(ee),P=UZa(J),YZa.failed())return null;for(P<(S=F)&&(S=P),H=J.bytes,Q=ee.bytes,y=0;y<=S-1;y++)Q[y]=0<Q[y]+H[y];YZa.pop(1)}function R$a(){var y,S,F,P,H,J,Q,ee;if(J=YZa.stackValue(0),P=YZa.stackObjectValue(1),YZa.failed())return null;if(H=YZa.isIntegerValue(J)?J:YZa.booleanValueOf(J),ee=YZa.fetchPointerofObject(1,P),F=YZa.fetchPointerofObject(0,P),YZa.failed())return null;if(!YZa.isBytes(F))return YZa.primitiveFail(),null;if(!YZa.isBytes(ee))return YZa.primitiveFail(),null;for(Q=ee.bytes,S=F.bytes,y=0;y<=UZa(ee)-1;y++)1===S[y]&&(Q[y]=H);YZa.pop(1)}function S$a(){var y,S,F,P,H,J,Q;if(H=YZa.stackIntegerValue(0),P=YZa.stackObjectValue(1),YZa.failed())return null;if(H|=4278190080,Q=YZa.fetchPointerofObject(1,P),F=YZa.fetchPointerofObject(0,P),YZa.failed())return null;if(!YZa.isBytes(F))return YZa.primitiveFail(),null;if(!YZa.isWords(Q))return YZa.primitiveFail(),null;for(J=Q.words,S=F.bytes,y=0;y<=UZa(Q)-1;y++)1===S[y]&&(J[y]=H);YZa.pop(1)}function T$a(){var y,S,F,P,H,J,Q;if(H=YZa.stackFloatValue(0),P=YZa.stackObjectValue(1),YZa.failed())return null;if(Q=YZa.fetchPointerofObject(1,P),F=YZa.fetchPointerofObject(0,P),YZa.failed())return null;if(!YZa.isBytes(F))return YZa.primitiveFail(),null;if(!YZa.isWords(Q))return YZa.primitiveFail(),null;for(J=Q.wordsAsFloat32Array(),S=F.bytes,y=0;y<=UZa(Q)-1;y++)1===S[y]&&(J[y]=H);YZa.pop(1)}function U$a(){var y,S,F,P,H,J,Q;if(H=YZa.stackValue(0),P=YZa.stackObjectValue(1),YZa.failed())return null;if(Q=YZa.fetchPointerofObject(1,P),F=YZa.fetchPointerofObject(0,P),YZa.failed())return null;if(!YZa.isBytes(F))return YZa.primitiveFail(),null;if(!YZa.isPointers(Q))return YZa.primitiveFail(),null;for(J=Q.wordsAsInt32Array(),S=F.bytes,y=0;y<=UZa(Q)-1;y++)1===S[y]&&(J[y]=H);YZa.pop(1)}function V$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;if(Q=YZa.stackIntegerValue(0),J=YZa.stackObjectValue(1),ie=YZa.stackIntegerValue(2),re=YZa.stackIntegerValue(3),H=YZa.stackObjectValue(4),YZa.failed())return null;if(se=YZa.fetchPointerofObject(1,H),F=YZa.fetchPointerofObject(0,H),YZa.failed())return null;if(!YZa.isBytes(F))return YZa.primitiveFail(),null;if(!YZa.isBytes(se)||!YZa.isBytes(J))return YZa.primitiveFail(),null;if(ae=se.bytes,S=F.bytes,ee=J.bytes,ne=UZa(se),P=UZa(F),te=UZa(J),ie<re)return YZa.primitiveFail(),null;if(re<1)return YZa.primitiveFail(),null;if(ne<re)return YZa.primitiveFail(),null;if(P<re)return YZa.primitiveFail(),null;if(ne<ie)return YZa.primitiveFail(),null;if(P<ie)return YZa.primitiveFail(),null;if(Q<1)return YZa.primitiveFail(),null;if(te<Q)return YZa.primitiveFail(),null;if(te-Q+1<ie-re+1)return YZa.primitiveFail(),null;for(y=re-1;y<=ie-1;y++)1===S[y]&&(ae[y]=ee[Q+y-re]);YZa.pop(4)}function W$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe;if(ie=YZa.stackIntegerValue(0),re=YZa.stackObjectValue(1),oe=YZa.stackIntegerValue(2),ne=YZa.stackIntegerValue(3),te=YZa.stackObjectValue(4),YZa.failed())return null;if(ce=YZa.fetchPointerofObject(1,te),J=YZa.fetchPointerofObject(0,te),YZa.failed())return null;if(!YZa.isBytes(J))return YZa.primitiveFail(),null;if(!(YZa.isWords(ce)&&YZa.isWords(re)||YZa.isPointers(ce)&&YZa.isPointers(re)))return YZa.primitiveFail(),null;if(H=J.bytes,fe=UZa(ce),Q=UZa(J),se=UZa(re),oe<ne)return YZa.primitiveFail(),null;if(ne<1)return YZa.primitiveFail(),null;if(fe<ne)return YZa.primitiveFail(),null;if(Q<ne)return YZa.primitiveFail(),null;if(fe<oe)return YZa.primitiveFail(),null;if(Q<oe)return YZa.primitiveFail(),null;if(ie<1)return YZa.primitiveFail(),null;if(se<ie)return YZa.primitiveFail(),null;if(se-ie+1<oe-ne+1)return YZa.primitiveFail(),null;if(ue=YZa.isMemberOf(ce,"KedamaFloatArray"),ee=YZa.isMemberOf(re,"KedamaFloatArray"),ue&&ee)for(S=ce.wordsAsFloat32Array(),y=re.wordsAsFloat32Array(),P=ne-1;P<=oe-1;P++)1===H[P]&&(S[P]=y[ie+P-ne]);if(ue&&!ee)for(S=ce.wordsAsFloat32Array(),ae=re.words,P=ne-1;P<=oe-1;P++)1===H[P]&&(S[P]=ae[ie+P-ne]);if(!ue&&ee)for(le=ce.words,y=re.wordsAsFloat32Array(),P=ne-1;P<=oe-1;P++)1===H[P]&&(F=y[ie+P-ne]>>>0,le[P]=F);if(!ue&&!ee)for(le=ce.words,ae=re.words,P=ne-1;P<=oe-1;P++)1===H[P]&&(le[P]=ae[ie+P-ne]);YZa.pop(4)}function X$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe;if(se=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),ae=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(ae)),YZa.success(YZa.isWords(se)),YZa.failed())return null;if(ie=UZa(y),YZa.success(ie===UZa(ae)),YZa.success(ie===UZa(se)),YZa.failed())return null;if(te=YZa.isMemberOf(y,"WordArray"),re=YZa.isMemberOf(ae,"WordArray"),te&&re){if(!YZa.isMemberOf(se,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(se,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(re)if(te)for(ce=ae.words,le=y.words,fe=se.words,ee=0;ee<=ie-1;ee++)ue=WZa(oe=ce[ee],ne=le[ee]),fe[ee]=ue;else for(ce=ae.words,H=y.wordsAsFloat32Array(),Q=se.wordsAsFloat32Array(),ee=0;ee<=ie-1;ee++)P=(oe=ce[ee])/(S=H[ee]),P=Math.floor(P),Q[ee]=oe-P*S;else if(te)for(J=ae.wordsAsFloat32Array(),le=y.words,Q=se.wordsAsFloat32Array(),ee=0;ee<=ie-1;ee++)P=(F=J[ee])/(ne=le[ee]),P=Math.floor(P),Q[ee]=F-P*ne;else for(J=ae.wordsAsFloat32Array(),H=y.wordsAsFloat32Array(),Q=se.wordsAsFloat32Array(),ee=0;ee<=ie-1;ee++)P=(F=J[ee])/(S=H[ee]),P=Math.floor(P),Q[ee]=F-P*S;YZa.pop(4),YZa.push(se)}function Y$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;if(se=YZa.stackObjectValue(0),y=YZa.stackValue(1),ae=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(ae)),YZa.success(YZa.isWords(se)),YZa.failed())return null;if(ie=UZa(ae),YZa.success(ie===UZa(se)),YZa.failed())return null;if(te="number"==typeof y,re=YZa.isMemberOf(ae,"WordArray"),te&&re){if(!YZa.isMemberOf(se,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(se,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(re)if(te)for(oe=ae.words,ee=y,ue=se.words,Q=0;Q<=ie-1;Q++)ue[Q]=WZa(oe[Q],ee);else for(oe=ae.words,S=YZa.floatValueOf(y),J=se.wordsAsFloat32Array(),Q=0;Q<=ie-1;Q++)P=(ne=oe[Q])/S,P=Math.floor(P),J[Q]=ne-P*S;else if(te)for(H=ae.wordsAsFloat32Array(),ee=y,J=se.wordsAsFloat32Array(),Q=0;Q<=ie-1;Q++)P=(F=H[Q])/ee,P=Math.floor(P),J[Q]=F-P*ee;else for(H=ae.wordsAsFloat32Array(),S=YZa.floatValueOf(y),J=se.wordsAsFloat32Array(),Q=0;Q<=ie-1;Q++)P=(F=H[Q])/S,P=Math.floor(P),J[Q]=F-P*S;YZa.pop(4),YZa.push(se)}function Z$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(re=YZa.stackObjectValue(0),y=YZa.stackObjectValue(1),te=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(y)),YZa.success(YZa.isWords(te)),YZa.success(YZa.isWords(re)),YZa.failed())return null;if(ee=UZa(y),YZa.success(ee===UZa(te)),YZa.success(ee===UZa(re)),YZa.failed())return null;if(J=YZa.isMemberOf(y,"WordArray"),Q=YZa.isMemberOf(te,"WordArray"),J&&Q){if(!YZa.isMemberOf(re,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(re,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(Q)if(J)for(ae=te.words,ie=y.words,se=re.words,H=0;H<=ee-1;H++)se[H]=ae[H]-ie[H];else for(ae=te.words,S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=ae[H]-S[H];else if(J)for(F=te.wordsAsFloat32Array(),ie=y.words,P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]-ie[H];else for(F=te.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),P=re.wordsAsFloat32Array(),H=0;H<=ee-1;H++)P[H]=F[H]-S[H];YZa.pop(4),YZa.push(re)}function $$a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se;if(ie=YZa.stackObjectValue(0),y=YZa.stackValue(1),re=YZa.stackObjectValue(2),YZa.failed())return null;if(YZa.success(YZa.isWords(re)),YZa.success(YZa.isWords(ie)),YZa.failed())return null;if(te=UZa(re),YZa.success(te===UZa(ie)),YZa.failed())return null;if(Q="number"==typeof y,ee=YZa.isMemberOf(re,"WordArray"),Q&&ee){if(!YZa.isMemberOf(ie,"WordArray"))return YZa.primitiveFail(),null}else if(!YZa.isMemberOf(ie,"KedamaFloatArray"))return YZa.primitiveFail(),null;if(ee)if(Q)for(ae=re.words,J=y,se=ie.words,H=0;H<=te-1;H++)se[H]=ae[H]-J;else for(ae=re.words,S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=ae[H]-S;else if(Q)for(F=re.wordsAsFloat32Array(),J=y,P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]-J;else for(F=re.wordsAsFloat32Array(),S=YZa.floatValueOf(y),P=ie.wordsAsFloat32Array(),H=0;H<=te-1;H++)P[H]=F[H]-S;YZa.pop(4),YZa.push(ie)}function _$a(y){var S;return 0<(S=90-y/.0174532925199433)||(S+=360),S}function a_a(){var y,S,F,P,H,J,Q;if(y=YZa.stackFloatValue(0),F=YZa.stackValue(1),Q=YZa.stackIntegerValue(2),P=YZa.stackIntegerValue(3),J=YZa.stackIntegerValue(4),YZa.failed())return null;if(!YZa.isWords(F))return YZa.primitiveFail(),null;if(!(Q<=UZa(F)&&1<=P&&P<=Q))return YZa.primitiveFail(),null;if(S=F.wordsAsFloat32Array(),YZa.failed())return null;for(H=P;H<=Q;H++)S[H-1]=k$a(J)*y;YZa.pop(5)}function b_a(){var y,S,F,P,H,J,Q;if(y=YZa.stackFloatValue(0),H=YZa.stackValue(1),Q=YZa.stackIntegerValue(2),S=YZa.stackIntegerValue(3),J=YZa.stackIntegerValue(4),YZa.failed())return null;if(!YZa.isWords(H))return YZa.primitiveFail(),null;if(!(Q<=UZa(H)&&1<=S&&S<=Q))return YZa.primitiveFail(),null;if(P=H.words,YZa.failed())return null;for(F=S;F<=Q;F++)P[F-1]=k$a(J)*y|0;YZa.pop(5)}function c_a(){var y,S;return y=YZa.stackIntegerValue(0),YZa.failed()?null:(S=k$a(y),YZa.failed()?null:(YZa.pop(2),void YZa.pushInteger(S)))}function d_a(){var y,S,F,P,H;return S=YZa.stackFloatValue(0),y=YZa.stackFloatValue(1),H=YZa.stackFloatValue(2),P=YZa.stackFloatValue(3),YZa.failed()?null:(F=d$a(P-y,H-S),360<(F+=90)&&(F-=360),YZa.failed()?null:(YZa.pop(5),void YZa.pushFloat(F)))}function e_a(){var y,S,F,P,H,J,Q;return S=YZa.stackFloatValue(0),y=YZa.stackFloatValue(1),H=YZa.stackFloatValue(2),P=YZa.stackFloatValue(3),YZa.failed()?null:(J=y-P,Q=S-H,F=Math.sqrt(J*J+Q*Q),YZa.failed()?null:(YZa.pop(5),void YZa.pushFloat(F)))}function f_a(y,S,F,P,H,J,Q){var ee,te;(te=P)<0&&(1===J&&(te+=H),2===J&&(te=0),3===J&&(te=0-te,ee=F[y],F[y]=ee<3.141592653589793?3.141592653589793-ee:9.42477796076938-ee)),H<=te&&(1===Q&&(te-=H),2===Q&&(te=H-1e-6),3===Q&&(te=H-1e-6-(te-H),ee=F[y],F[y]=ee<3.141592653589793?3.141592653589793-ee:9.42477796076938-ee)),S[y]=te}function g_a(y,S,F,P,H,J,Q){var ee;(ee=P)<0&&(1===J&&(ee+=H),2===J&&(ee=0),3===J&&(ee=0-ee,F[y]=6.283185307179586-F[y])),H<=ee&&(1===Q&&(ee-=H),2===Q&&(ee=H-1e-6),3===Q&&(ee=H-1e-6-(ee-H),F[y]=6.283185307179586-F[y])),S[y]=ee}function h_a(){var y,S,F,P,H,J,Q,ee,te,re;if(te=YZa.stackValue(0),F=YZa.stackValue(1),Q=YZa.stackValue(2),YZa.failed())return null;if(!YZa.isBytes(Q))return YZa.primitiveFail(),null;if(!YZa.isWords(F))return YZa.primitiveFail(),null;if(re=UZa(F),te.isFloat)H=!1;else{if(!YZa.isWords(te))return YZa.primitiveFail(),null;if(UZa(te)!==re)return YZa.primitiveFail(),null;H=!0}for(J=Q.bytes,S=F.wordsAsFloat32Array(),H?ee=te.wordsAsFloat32Array():y=e$a(y=YZa.floatValueOf(te)),P=0;P<=re-1;P++)1===J[P]&&(H&&(y=e$a(y=ee[P])),S[P]=y);if(YZa.failed())return null;YZa.pop(3)}function i_a(y){return 0!=((YZa=y).majorVersion()==SZa)&&YZa.minorVersion()>=TZa}function j_a(){var y,S,F;return y=YZa.stackFloatValue(0),S=YZa.stackValue(1),F=YZa.stackIntegerValue(2),YZa.failed()?null:!YZa.isWords(S)||UZa(S)<F?(YZa.primitiveFail(),null):(S.wordsAsFloat32Array()[F-1]=e$a(y),YZa.failed()?null:void YZa.pop(3))}function k_a(){return!0}function l_a(){var y,S,F,P,H,J,Q,ee;return P=YZa.stackIntegerValue(0),F=YZa.stackIntegerValue(1),y=YZa.stackFloatValue(2),J=YZa.stackFloatValue(3),S=YZa.stackValue(4),Q=YZa.stackIntegerValue(5),ee=YZa.stackValue(6),YZa.failed()?null:YZa.isWords(ee)&&YZa.isWords(S)?(H=UZa(ee),UZa(S)!==H?(YZa.primitiveFail(),null):(f_a(Q-1,ee.wordsAsFloat32Array(),S.wordsAsFloat32Array(),J,y,F,P),YZa.failed()?null:void YZa.pop(7))):(YZa.primitiveFail(),null)}function m_a(){var y,S,F,P,H,J,Q,ee;return y=YZa.stackIntegerValue(0),H=YZa.stackIntegerValue(1),S=YZa.stackFloatValue(2),J=YZa.stackFloatValue(3),F=YZa.stackValue(4),Q=YZa.stackIntegerValue(5),ee=YZa.stackValue(6),YZa.failed()?null:YZa.isWords(ee)&&YZa.isWords(F)?(P=UZa(ee),UZa(F)!==P?(YZa.primitiveFail(),null):(g_a(Q-1,ee.wordsAsFloat32Array(),F.wordsAsFloat32Array(),J,S,H,y),YZa.failed()?null:void YZa.pop(7))):(YZa.primitiveFail(),null)}function n_a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;if(re=YZa.stackIntegerValue(0),Q=YZa.stackIntegerValue(1),y=YZa.stackFloatValue(2),ne=YZa.stackValue(3),F=YZa.stackValue(4),le=YZa.stackValue(5),te=YZa.stackValue(6),YZa.failed())return null;if(!YZa.isBytes(te))return YZa.primitiveFail(),null;if(!YZa.isWords(le))return YZa.primitiveFail(),null;if(!YZa.isWords(F))return YZa.primitiveFail(),null;if(ne.isFloat)H=!1;else{if(!YZa.isWords(ne))return YZa.primitiveFail(),null;H=!0,J=YZa.isMemberOf(ne,"WordArray")}if(ie=UZa(le),UZa(te)!==ie)return YZa.primitiveFail(),null;if(UZa(F)!==ie)return YZa.primitiveFail(),null;if(H&&UZa(ne)!==ie)return YZa.primitiveFail(),null;for(ee=te.bytes,ue=le.wordsAsFloat32Array(),S=F.wordsAsFloat32Array(),H?J?oe=ne.words:se=ne.wordsAsFloat32Array():ae=YZa.floatValueOf(ne),P=0;P<=ie-1;P++)1===ee[P]&&f_a(P,ue,S,H?J?oe[P]:se[P]:ae,y,Q,re);if(YZa.failed())return null;YZa.pop(7)}function o_a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;if(y=YZa.stackIntegerValue(0),ie=YZa.stackIntegerValue(1),S=YZa.stackFloatValue(2),ne=YZa.stackValue(3),P=YZa.stackValue(4),le=YZa.stackValue(5),te=YZa.stackValue(6),YZa.failed())return null;if(!YZa.isBytes(te))return YZa.primitiveFail(),null;if(!YZa.isWords(le))return YZa.primitiveFail(),null;if(!YZa.isWords(P))return YZa.primitiveFail(),null;if(ne.isFloat)J=!1;else{if(!YZa.isWords(ne))return YZa.primitiveFail(),null;J=!0,Q=YZa.isMemberOf(ne,"WordArray")}if(re=UZa(le),UZa(te)!==re)return YZa.primitiveFail(),null;if(UZa(P)!==re)return YZa.primitiveFail(),null;if(J&&UZa(ne)!==re)return YZa.primitiveFail(),null;for(ee=te.bytes,ue=le.wordsAsFloat32Array(),F=P.wordsAsFloat32Array(),J?Q?oe=ne.words:se=ne.wordsAsFloat32Array():ae=YZa.floatValueOf(ne),H=0;H<=re-1;H++)1===ee[H]&&g_a(H,ue,F,J?Q?oe[H]:se[H]:ae,S,ie,y);if(YZa.failed())return null;YZa.pop(7)}function p_a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;if(ie=YZa.stackValue(0),ue=YZa.stackValue(1),ne=YZa.stackValue(2),J=YZa.stackValue(3),P=YZa.stackValue(4),YZa.failed())return null;if(!YZa.isWords(ie))return YZa.primitiveFail(),null;if(!YZa.isWords(ne))return YZa.primitiveFail(),null;if(!YZa.isWords(ue))return YZa.primitiveFail(),null;if((ae=UZa(ie))<0)return YZa.primitiveFail(),null;if(UZa(ne)!==ae)return YZa.primitiveFail(),null;if(UZa(ue)!==ae)return YZa.primitiveFail(),null;if(P.isFloat){if(!J.isFloat)return YZa.primitiveFail(),null;S=!1}else{if(J.isFloat)return YZa.primitiveFail(),null;S=!0}if(S){if(UZa(P)!==ae)return YZa.primitiveFail(),null;if(UZa(J)!==ae)return YZa.primitiveFail(),null}for(re=ie.wordsAsFloat32Array(),se=ne.wordsAsFloat32Array(),oe=ue.wordsAsFloat32Array(),S&&(F=P.wordsAsFloat32Array(),H=J.wordsAsFloat32Array()),S||(Q=YZa.floatValueOf(P),ee=YZa.floatValueOf(J)),y=0;y<=ae-1;y++)S&&(Q=F[y],ee=H[y]),te=d$a(Q-se[y],ee-oe[y]),360<(te+=90)&&(te-=360),re[y]=te;if(YZa.failed())return null;YZa.pop(6),YZa.push(ie)}function q_a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;if(re=YZa.stackValue(0),le=YZa.stackValue(1),ne=YZa.stackValue(2),J=YZa.stackValue(3),P=YZa.stackValue(4),YZa.failed())return null;if(!YZa.isWords(re))return YZa.primitiveFail(),null;if(!YZa.isWords(ne))return YZa.primitiveFail(),null;if(!YZa.isWords(le))return YZa.primitiveFail(),null;if((ie=UZa(re))<0)return YZa.primitiveFail(),null;if(UZa(ne)!==ie)return YZa.primitiveFail(),null;if(UZa(le)!==ie)return YZa.primitiveFail(),null;if(P.isFloat){if(!J.isFloat)return YZa.primitiveFail(),null;S=!1}else{if(J.isFloat)return YZa.primitiveFail(),null;S=!0}if(S){if(UZa(P)!==ie)return YZa.primitiveFail(),null;if(UZa(J)!==ie)return YZa.primitiveFail(),null}for(te=re.wordsAsFloat32Array(),se=ne.wordsAsFloat32Array(),ue=le.wordsAsFloat32Array(),S&&(F=P.wordsAsFloat32Array(),H=J.wordsAsFloat32Array()),S||(Q=YZa.floatValueOf(P),ee=YZa.floatValueOf(J)),y=0;y<=ie-1;y++)S&&(Q=F[y],ee=H[y]),ae=Q-se[y],oe=ee-ue[y],te[y]=Math.sqrt(ae*ae+oe*oe);if(YZa.failed())return null;YZa.pop(6),YZa.push(re)}function r_a(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce;if(ce=YZa.stackIntegerValue(0),ue=YZa.stackIntegerValue(1),Q=YZa.stackIntegerValue(2),te=YZa.stackIntegerValue(3),F=YZa.stackValue(4),re=YZa.stackValue(5),YZa.failed())return null;if(se=UZa(re),H=UZa(F),te*Q!==se)return YZa.primitiveFail(),null;if(se*ue*ce!==H)return YZa.primitiveFail(),null;for(ee=re.words,S=F.words,oe=P=ae=ie=0;oe<=Q-1;oe++){for(le=0;le<=ce-1;le++){for(ne=0;ne<=te-1;ne++)for(y=ee[ie],++ie,J=0;J<=ue-1;J++)S[P]=y,++P;ie=ae}ie=ae+=te}YZa.pop(6)}function ydb(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function Adb(y,S){return y-(F=y,P=S,(0|Math.floor(F/P))*S)|0;var F,P}function yfb(y,S,F){var P,H,J,Q,ee;H=(0-seb)/nfb*F,Q=0-(ee=Math.exp(H))*ee,H=2*seb/nfb*S,J=(0-(J=ee*Math.cos(H)*2))*(P=1/(P=1-J-Q)),Q=(0-Q)*P,Sfb(y,P),Ufb(y,J),Wfb(y,Q)}function zfb(y,S){var F,P;return F=Rfb(y)*S+Tfb(y)*(P=Xfb(y))+Vfb(y)*Zfb(y),$fb(y,P),Yfb(y,S),F}function Bfb(y){return cfb.success(cfb.isWords(y)),cfb.failed()?0:y.wordsAsFloat32Array()}function Dfb(){return dfb}function Efb(){var y;return 0===pfb?0:(rfb=hfb<gfb?(y=Xeb*rfb+Yeb*sfb,sfb=rfb,y):y=Zeb*rfb-$eb,pfb<=hfb&&((hfb=0)<afb[deb]?(jfb=afb[deb],function(){var y,S,F,P,H;H=lfb/nfb,y=Math.sin(2*seb*12.7*H),S=Math.sin(2*seb*7.1*H),F=Math.sin(2*seb*4.7*H),P=2*afb[keb]*afb[deb]/100*(y+S+F),jfb+=P}(),jfb+=(Hfb()-32767)*afb[reb]/32768*afb[deb],0===Adb(ifb,2)?jfb+=afb[beb]*afb[deb]*(1-afb[Peb]):jfb-=afb[beb]*afb[deb]*(1-afb[Peb]),jfb<0&&(jfb=0),ffb=pfb=nfb/jfb|0,0<afb[Web]&&(ffb>>=1),gfb=pfb*afb[Peb]|0,function(y,S,F){var P,H,J,Q,ee,te,re,ie,ae,se,ne,oe;ae=(se=pfb*y|0)/pfb,ie=F,P=(te=S)<=0?1:1-(ee=(1-ae)/te)/(Math.exp(ee)-1),oe=function(y,S,F,P){var H,J,Q,ee,te,re,ie;if(0<(ee=Nfb(0,y,S,F,P)))for(te=0,H=ee,J=Nfb(re=1,y,S,F,P);0<J;)te=re,H=J,J=Nfb(re*=2,y,S,F,P);else for(re=0,H=Nfb(te=-1,y,S,F,P),J=ee;H<0;)re=te,J=H,H=Nfb(te*=2,y,S,F,P);for(;ceb<re-te;)0<(Q=Nfb(ie=(re+te)/2,y,S,F,P))?(te=ie,H=Q):(re=ie,J=Q);return(re+te)/2}(Q=seb*(ie+1),Math.cos(Q),Math.sin(Q),te/ae*Q*P),ne=Q/se,re=Math.exp(oe*ne),Xeb=2*Math.cos(ne)*re,Yeb=0-re*re,sfb=0,rfb=re*Math.sin(ne),H=Math.exp(-1/(te*pfb)),J=Math.pow(H,pfb-se),$eb=(1-(Zeb=H))*J/(1-J),function(){var y,S,F,P;for(S=0,F=rfb,P=sfb,y=1;y<=gfb;y++)S=Xeb*F+Yeb*P,P=F,F=S;0!==S&&(rfb=rfb/S*1e4)}()}(afb[Peb],afb[Keb],afb[Leb]),0<(rfb+=(Hfb()-32767)*afb[Ueb]/32768*rfb)&&(rfb=0),0!==Adb(ifb,2)&&0<(rfb*=1-afb[beb])&&(rfb=0),ifb=Adb(ifb+1,65535)):ffb=pfb=1),++hfb,y)}function Ffb(y){return 32.767*Math.pow(2,(y-87)/6)}function Hfb(){return ofb=1309*ofb+13849&65535}function Mfb(){var y,S,F,P,H,J,Q,ee;return y=Bfb(cfb.stackValue(2)),J=F=cfb.stackValue(1),cfb.success(cfb.isWords(J)),S=cfb.failed()?0:J.wordsAsInt16Array(),H=cfb.stackIntegerValue(0),cfb.failed()?null:(Q=P=cfb.stackObjectValue(3),cfb.success(22===ydb(Q)),cfb.failed()||(ee=cfb.fetchPointerofObject(0,Q),kfb=Bfb(ee),jfb=cfb.fetchFloatofObject(2,Q),pfb=cfb.fetchIntegerofObject(3,Q),hfb=cfb.fetchIntegerofObject(4,Q),gfb=cfb.fetchIntegerofObject(5,Q),ffb=cfb.fetchIntegerofObject(6,Q),Xeb=cfb.fetchFloatofObject(7,Q),Yeb=cfb.fetchFloatofObject(8,Q),rfb=cfb.fetchFloatofObject(9,Q),sfb=cfb.fetchFloatofObject(10,Q),Zeb=cfb.fetchFloatofObject(11,Q),$eb=cfb.fetchFloatofObject(12,Q),bfb=cfb.fetchFloatofObject(13,Q),qfb=cfb.fetchFloatofObject(14,Q),efb=cfb.fetchFloatofObject(15,Q),ifb=cfb.fetchIntegerofObject(16,Q),lfb=cfb.fetchIntegerofObject(17,Q),ofb=cfb.fetchIntegerofObject(18,Q),_eb=cfb.fetchIntegerofObject(19,Q),mfb=cfb.fetchIntegerofObject(20,Q),nfb=cfb.fetchIntegerofObject(21,Q),!1!==cfb.failed())?null:(cfb.success(2*ydb(F)>=mfb),cfb.failed()?null:(function(y,S,F){var P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke;for(function(y){var S,F,P,H,J,Q,ee,te,re,ie,ae;ie=.6*Ffb((afb=y)[Kdb]),ae=.6*Ffb(afb[Mdb]),S=.4*Ffb(afb[Bdb]),P=.15*Ffb(afb[Ddb]),J=.06*Ffb(afb[Fdb]),ee=.04*Ffb(afb[Hdb]),F=.15*Ffb(afb[Cdb]),H=.06*Ffb(afb[Edb]),Q=.04*Ffb(afb[Gdb]),te=.022*Ffb(afb[Idb]),re=.03*Ffb(afb[Jdb]),8<=_eb&&(16e3<=nfb?Ofb(Jeb,7500,600):_eb=6),7<=_eb&&(16e3<=nfb?Ofb(Ieb,6500,500):_eb=6),6<=_eb&&Ofb(Geb,afb[jeb],afb[Wdb]),5<=_eb&&Ofb(Eeb,afb[ieb],afb[Udb]),Ofb(Beb,afb[heb],afb[Sdb]),Ofb(yeb,afb[geb],afb[Qdb]),Ofb(veb,afb[feb],afb[Odb]),Ofb(teb,afb[eeb],afb[Ndb]),Ofb(Meb,afb[leb],afb[Ydb]),Ofb(Reb,afb[oeb],afb[$db]),yfb(Oeb,afb[meb],afb[Zdb]),yfb(Teb,afb[peb],afb[_db]),Pfb(Neb,afb[leb],afb[Ydb],ie),Pfb(Seb,afb[oeb],afb[$db],ae),Pfb(ueb,afb[eeb],afb[Ndb],S),Pfb(xeb,afb[feb],afb[Odb],P),Pfb(Aeb,afb[geb],afb[Qdb],J),Pfb(Deb,afb[heb],afb[Sdb],ee),Pfb(web,afb[feb],afb[Pdb],F),Pfb(zeb,afb[geb],afb[Rdb],H),Pfb(Ceb,afb[heb],afb[Tdb],Q),Pfb(Feb,afb[ieb],afb[Vdb],te),Pfb(Heb,afb[jeb],afb[Xdb],re)}(y),0<jfb?(de=Ffb(afb[Web]-7),ue=Ffb(afb[Web]),he=.1*Ffb(afb[Veb])):de=ue=he=0,ee=.25*Ffb(afb[neb]),H=.05*Ffb(afb[Ldb]),Q=.05*Ffb(afb[aeb]),(re=afb[qeb]-3)<=0&&(re=57),P=Ffb(re),Pfb(Qeb,0,nfb,P),se=efb,fe=mfb+(ae=F)-1;ae<=fe;)se=(Hfb()-32768)/4,efb=se+=.75*efb,ffb<hfb&&(se*=.5),te=ee*se,pe=Efb(),qfb=pe,hfb<gfb&&(pe+=he*(Hfb()-32768)/4),ie=de*pe,oe=ue*pe,oe+=J=H*se,ve=ie+=J,ke=void 0,ne=0<_eb?(ke=zfb(Oeb,ve),ke=Qfb(Meb,ke),ke=zfb(Teb,ke),ke=Qfb(Reb,ke),8<=_eb&&(ke=Qfb(Jeb,ke)),7<=_eb&&(ke=Qfb(Ieb,ke)),6<=_eb&&(ke=Qfb(Geb,ke)),5<=_eb&&(ke=Qfb(Eeb,ke)),4<=_eb&&(ke=Qfb(Beb,ke)),3<=_eb&&(ke=Qfb(yeb,ke)),2<=_eb&&(ke=Qfb(veb,ke)),1<=_eb&&(ke=Qfb(teb,ke)),ke):0,ne+=Qfb(ueb,me=oe)+Qfb(xeb,me)+Qfb(Aeb,me)+Qfb(Deb,me)+Qfb(Neb,me)+Qfb(Seb,me),le=te+oe-bfb,bfb=oe,ne=Qfb(web,be=le)-Qfb(zeb,be)+Qfb(Ceb,be)-Qfb(Feb,be)+Qfb(Heb,be)-ne,(ce=(ne=Qfb(Qeb,ne=Q*le-ne))*P|0)<-32768&&(ce=-32768),32767<ce&&(ce=32767),S[ae-1]=ce,++ae,++lfb}(y,S,H),function(y){var S,F,P,H,J,Q,ee,te,re,ie,ae;if(cfb.pushRemappableOop(y),cfb.pushRemappableOop(cfb.floatObjectOf(jfb)),cfb.pushRemappableOop(cfb.floatObjectOf(Xeb)),cfb.pushRemappableOop(cfb.floatObjectOf(Yeb)),cfb.pushRemappableOop(cfb.floatObjectOf(rfb)),cfb.pushRemappableOop(cfb.floatObjectOf(sfb)),cfb.pushRemappableOop(cfb.floatObjectOf(Zeb)),cfb.pushRemappableOop(cfb.floatObjectOf($eb)),cfb.pushRemappableOop(cfb.floatObjectOf(bfb)),cfb.pushRemappableOop(cfb.floatObjectOf(qfb)),ee=cfb.floatObjectOf(efb),re=cfb.popRemappableOop(),J=cfb.popRemappableOop(),H=cfb.popRemappableOop(),P=cfb.popRemappableOop(),ae=cfb.popRemappableOop(),ie=cfb.popRemappableOop(),F=cfb.popRemappableOop(),S=cfb.popRemappableOop(),te=cfb.popRemappableOop(),Q=cfb.popRemappableOop(),!cfb.failed())return cfb.storePointerofObjectwithValue(2,Q,te),cfb.storeIntegerofObjectwithValue(3,Q,pfb),cfb.storeIntegerofObjectwithValue(4,Q,hfb),cfb.storeIntegerofObjectwithValue(5,Q,gfb),cfb.storeIntegerofObjectwithValue(6,Q,ffb),cfb.storePointerofObjectwithValue(7,Q,S),cfb.storePointerofObjectwithValue(8,Q,F),cfb.storePointerofObjectwithValue(9,Q,ie),cfb.storePointerofObjectwithValue(10,Q,ae),cfb.storePointerofObjectwithValue(11,Q,P),cfb.storePointerofObjectwithValue(12,Q,H),cfb.storePointerofObjectwithValue(13,Q,J),cfb.storePointerofObjectwithValue(14,Q,re),cfb.storePointerofObjectwithValue(15,Q,ee),cfb.storeIntegerofObjectwithValue(16,Q,ifb),cfb.storeIntegerofObjectwithValue(17,Q,lfb),cfb.storeIntegerofObjectwithValue(18,Q,ofb),!1===cfb.failed()}(P)?void cfb.pop(3):null)))}function Nfb(y,S,F,P,H){return Math.exp(y*S)*((H*(y*y+1)+y)*P-F)+1}function Ofb(y,S,F){var P,H,J,Q;P=(0-seb)/nfb*F,J=0-(Q=Math.exp(P))*Q,P=2*seb/nfb*S,Sfb(y,1-(H=Q*Math.cos(P)*2)-J),Ufb(y,H),Wfb(y,J)}function Pfb(y,S,F,P){Ofb(y,S,F),Sfb(y,Rfb(y)*P)}function Qfb(y,S){var F,P;return F=Rfb(y)*S+Tfb(y)*(P=Xfb(y))+Vfb(y)*Zfb(y),$fb(y,P),Yfb(y,F),F}function Rfb(y){return kfb[5*y-5]}function Sfb(y,S){kfb[5*y-5]=S}function Tfb(y){return kfb[5*y-4]}function Ufb(y,S){kfb[5*y-4]=S}function Vfb(y){return kfb[5*y-3]}function Wfb(y,S){kfb[5*y-3]=S}function Xfb(y){return kfb[5*y-2]}function Yfb(y,S){kfb[5*y-2]=S}function Zfb(y){return kfb[5*y-1]}function $fb(y,S){kfb[5*y-1]=S}function cgb(y){return 0!=((cfb=y).majorVersion()==wdb)&&cfb.minorVersion()>=xdb}function djb(y){return"number"==typeof y?kjb.classSmallInteger():y.sqClass}function ejb(y){return y.bytes?y.bytes.length:y.words?4*y.words.length:0}function fjb(y,S){return 0|Math.floor(y/S)}function gjb(y,S){return y-fjb(y,S)*S|0}function hjb(y,S){return 31<S?0:y<<S}function ijb(y,S){return 31<S?0:y>>>S}function ojb(y,S,F){var P,H,J,Q,ee,te,re,ie,ae;if(S<1||F<1)return kjb.primitiveFail();if(H=y,!((te=Math.min(F,wjb((ae=H).bytes,ejb(ae))))<S)){if(ee=1+(S-1>>3),P=1+(te-1>>3),Q=gjb(S-1,8),J=7-gjb(te-1,8),ee==P)return re=hjb(255,Q)&ijb(255,J),0!=(Rjb(H,ee)&re);if(0!==ijb(Rjb(H,ee),Q))return 1;for(ie=1+ee;ie<=P-1;ie++)if(0!==Rjb(H,ie))return 1;return 0!=(255&hjb(Rjb(H,P),J))}}function pjb(y,S){var F,P,H;return H=kjb.instantiateClassindexableSize(djb(y),S),P=(F=ejb(y))<S?F:S,ujb(y.bytes,H.bytes,P),H}function qjb(y,S){var F,P,H;return"number"==typeof y?(F=(P=y)<0?kjb.classLargeNegativeInteger():kjb.classLargePositiveInteger(),function(y,S){var F,P,H;for(F=S.bytes,P=1,H=xjb(y);P<=H;P++)F[P-1]=Bjb(y,P)}(P,H=kjb.instantiateClassindexableSize(F,S))):H=pjb(y,S),H}function tjb(y,S,F){var P,H,J;for(J=F-1;0<=J;){if((H=S[J])!==(P=y[J]))return H<P?1:-1;--J}return 0}function ujb(y,S,F){var P,H;for(P=F-1,H=0;H<=P;H++)S[H]=y[H]}function wjb(y,S){var F,P;for(P=S;0===(F=y[P-1]);)if(0==--P)return 0;return Gjb(F)+8*(P-1)}function xjb(y){return y<256&&-256<y?1:y<65536&&-65536<y?2:y<16777216&&-16777216<y?3:4}function Bjb(y,S){return S<1&&kjb.primitiveFail(),4<S?0:y<0?255&ijb(0-y,8*(S-1)):255&ijb(y,8*(S-1))}function Djb(y,S,F,P,H){return function(){for(var J=F-S+1,Q=0;Q<J;Q++)y[Q+S]=P[Q+H];return 0}()}function Gjb(y){var S,F;return F=0,(S=y)<65536||(S>>>=16,F+=16),S<256||(S>>>=8,F+=8),S<16||(S>>>=4,F+=4),S<4||(S>>>=2,F+=2),S<2||(S>>>=1,++F),F+S}function Hjb(y){var S,F,P,H,J,Q;for(J=(Q=y)<0?kjb.classLargeNegativeInteger():kjb.classLargePositiveInteger(),S=xjb(Q),P=(F=kjb.instantiateClassindexableSize(J,S)).bytes,H=1;H<=S;H++)P[H-1]=Bjb(Q,H);return F}function Ijb(y,S){var F,P,H,J;return P=ejb(y),0===(J=wjb(y.bytes,P))?0:(F=J+S+7>>3,H=kjb.instantiateClassindexableSize(djb(y),F),function(y,S,F,P,H){var J,Q,ee,te,re,ie,ae;for(J=y>>3,re=gjb(y,8),ae=J-1,te=0;te<=ae;te++)P[te]=0;if(0===re)return Djb(P,J,H-1,S,0);for(ie=8-re,ae=F-1,te=Q=0;te<=ae;te++)ee=S[te],P[te+J]=255&(Q|hjb(ee,re)),Q=ijb(ee,ie);0!==Q&&(P[H-1]=Q)}(S,y.bytes,P,H.bytes,F),H)}function Jjb(y,S,F){var P,H,J,Q,ee;return H=(ee=wjb(y.bytes,F))+7>>3,(Q=ee-S)<=0?kjb.instantiateClassindexableSize(djb(y),0):(J=7+Q>>3,P=kjb.instantiateClassindexableSize(djb(y),J),function(y,S,F,P,H){var J,Q,ee,te,re,ie,ae,se;if(Q=y>>3,0===(re=gjb(y,8)))return Djb(P,0,H-1,S,Q);for(ie=8-re,ee=ijb(S[Q],re),ae=F-1,J=se=1+Q;J<=ae;J++)te=S[J],P[J-se]=255&(ee|hjb(te,ie)),ee=ijb(te,re);0!==ee&&(P[H-1]=ee)}(S,y.bytes,H,P.bytes,J),P)}function Kjb(y,S){var F,P,H,J,Q,ee,te,re,ie,ae;return re=ejb(y),ie=ejb(S),Q=djb(y),te=re<=ie?(J=y,P=re,ae=S,ie):(J=S,P=ie,ae=y,re),F=kjb.instantiateClassindexableSize(Q,te),0<(H=function(y,S,F,P,H){var J,Q,ee;for(Q=S-1,J=ee=0;J<=Q;J++)ee=(ee>>>8)+y[J]+F[J],H[J]=255&ee;for(Q=P-1,J=S;J<=Q;J++)ee=(ee>>>8)+F[J],H[J]=255&ee;return ee>>>8}(J.bytes,P,ae.bytes,te,F.bytes))&&(ee=kjb.instantiateClassindexableSize(Q,te+1),ujb(F.bytes,ee.bytes,te),(F=ee).bytes[te]=H),F}function Ljb(y,S,F){var P,H,J,Q,ee,te,re,ie,ae;if("number"==typeof y){if(y<0)return kjb.primitiveFail();J=Hjb(y)}else{if(djb(y)===kjb.classLargeNegativeInteger())return kjb.primitiveFail();J=y}if("number"==typeof S){if(S<0)return kjb.primitiveFail();Q=Hjb(S)}else{if(djb(S)===kjb.classLargeNegativeInteger())return kjb.primitiveFail();Q=S}return te=(re=ejb(J))<(ie=ejb(Q))?(P=re,H=J,ee=ie,Q):(P=ie,H=Q,ee=re,J),ae=kjb.instantiateClassindexableSize(kjb.classLargePositiveInteger(),ee),function(y,S,F,P,H,J){var Q,ee;if(ee=F-1,y!==jjb)if(y!==mjb){if(y!==njb)return kjb.primitiveFail();for(Q=0;Q<=ee;Q++)J[Q]=S[Q]^P[Q];for(ee=H-1,Q=F;Q<=ee;Q++)J[Q]=P[Q]}else{for(Q=0;Q<=ee;Q++)J[Q]=S[Q]|P[Q];for(ee=H-1,Q=F;Q<=ee;Q++)J[Q]=P[Q]}else{for(Q=0;Q<=ee;Q++)J[Q]=S[Q]&P[Q];for(ee=H-1,Q=F;Q<=ee;Q++)J[Q]=0}}(F,H.bytes,P,te.bytes,ee,ae.bytes),kjb.failed()?0:Yjb(ae)}function Mjb(y,S){var F,P;return P=ejb(y),(F=ejb(S))!==P?P<F?-1:1:tjb(y.bytes,S.bytes,P)}function Njb(y,S,F){var P,H,J,Q,ee,te,re,ie,ae;return ae=ejb(y),ie=ejb(S),P=F?kjb.classLargeNegativeInteger():kjb.classLargePositiveInteger(),(re=ae-ie+1)<=0?(H=kjb.instantiateClassindexableSize(kjb.classArray(),2),kjb.stObjectatput(H,1,0),kjb.stObjectatput(H,2,y)):(Q=qjb(Q=Ijb(S,te=8-Gjb(xkb(S,ie))),Ojb(Q)+1),Ojb(J=Ijb(y,te))===ae&&(J=qjb(J,ae+1)),ee=kjb.instantiateClassindexableSize(P,re),function(y,S,F,P,H,J){var Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be;for(he=J,de=y[(fe=S-1)-1],re=1==fe?0:y[fe-2],ue=1;ue<=he;ue++){if(F[(le=P+1-ue)-1]===de)ee=255;else for(be=gjb(pe=((pe=F[le-1])<<8)+F[le-2],de),ae=(ne=(ee=fjb(pe,de))*re)>>>8,ie=255&ne,se=le<3?0:F[le-3];(be<ae||be===ae&&se<ie)&&(--ee,ie<re?(--ae,ie=ie+256-re):ie-=re,de<=ae);)ae-=de;for(oe=le-fe,te=0,ce=1;ce<=S;ce++)ae=y[ce-1]*(ee>>>8),ie=y[ce-1]*(255&ee),Q=F[oe-1]-te-(255&ie),F[oe-1]=255&Q,te=ae+(ie>>>8)-(Q>>=8),++oe;if(0<te)for(--ee,oe=le-fe,te=0,ce=1;ce<=S;ce++)te=(te>>>8)+F[oe-1]+y[ce-1],F[oe-1]=255&te,++oe;H[J-ue]=ee}}(Q.bytes,Ojb(Q),J.bytes,Ojb(J),ee.bytes,Ojb(ee)),J=Jjb(J,te,Ojb(Q)-1),H=kjb.instantiateClassindexableSize(kjb.classArray(),2),kjb.stObjectatput(H,1,ee),kjb.stObjectatput(H,2,J)),H}function Ojb(y){return("number"==typeof y?xjb:ejb)(y)}function Pjb(y,S,F,P){var H,J,Q,ee;return Q=ejb(y),ee=ejb(S),Q<=(J=ejb(F))&&ee<=J&&0<=P&&P<=255?(H=kjb.instantiateClassindexableSize(kjb.classLargePositiveInteger(),J),function(y,S,F,P,H,J,Q,ee){var te,re,ie,ae,se,ne,oe,ue;for(ne=S-1,se=P-1,ae=J-1,re=ie=0;re<=ne;re++){for(ue=ee[0]+y[re]*F[0],ue+=(oe=ue*Q&255)*H[0],te=1;te<=se;te++)ue=(ue>>>8)+ee[te]+y[re]*F[te]+oe*H[te],ee[te-1]=255&ue;for(te=P;te<=ae;te++)ue=(ue>>>8)+ee[te]+oe*H[te],ee[te-1]=255&ue;ue=(ue>>>8)+ie,ee[ae]=255&ue,ie=ue>>>8}for(re=S;re<=ae;re++){for(ue=ee[0],ue+=(oe=ue*Q&255)*H[0],te=1;te<=ae;te++)ue=(ue>>>8)+ee[te]+oe*H[te],ee[te-1]=255&ue;ue=(ue>>>8)+ie,ee[ae]=255&ue,ie=ue>>>8}if(0!==ie||1!==tjb(H,ee,J))for(re=ue=0;re<=ae;re++)ue=ue+ee[re]-H[re],ee[re]=255&ue,ue>>=8}(y.bytes,Q,S.bytes,ee,F.bytes,J,P,H.bytes),Yjb(H)):kjb.primitiveFail()}function Qjb(y,S,F){var P,H,J,Q,ee,te,re,ie;return ee=(ie=ejb(y))<=(re=ejb(S))?(Q=y,J=ie,P=S,re):(Q=S,J=re,P=y,ie),H=F?kjb.classLargeNegativeInteger():kjb.classLargePositiveInteger(),te=kjb.instantiateClassindexableSize(H,ee+J),function(y,S,F,P,H){var J,Q,ee,te,re,ie,ae,se;if(!(1===S&&0===y[0]||1===P&&0===F[0]))for(se=S-1,ie=P-1,re=0;re<=se;re++)if(0!==(ee=y[re])){for(ae=re,Q=te=0;Q<=ie;Q++)te=(J=(J=F[Q])*ee+te+H[ae])>>>8,H[ae]=255&J,++ae;H[ae]=te}}(Q.bytes,J,P.bytes,ee,te.bytes),Wjb(te)}function Rjb(y,S){return S>ejb(y)?0:xkb(y,S)}function Sjb(y,S){var F,P,H,J,Q,ee,te,re,ie,ae;if(te=djb(y)===kjb.classLargeNegativeInteger(),(re=ejb(y))===(ie=ejb(S))){for(;1<re&&Rjb(y,re)===Rjb(S,re);)--re;ie=re}return ae=re<ie||re===ie&&Rjb(y,re)<Rjb(S,re)?(P=S,ee=ie,J=y,F=re,0==te):(P=y,ee=re,J=S,F=ie,te),Q=ee,H=kjb.instantiateClassindexableSize(ae?kjb.classLargeNegativeInteger():kjb.classLargePositiveInteger(),Q),function(y,S,F,P,H){var J,Q;for(J=Q=0;J<=S-1;J++)Q=Q+F[J]-y[J],H[J]=255&Q,Q>>=8;for(J=S;J<=P-1;J++)Q+=F[J],H[J]=255&Q,Q>>=8}(J.bytes,F,P.bytes,ee,H.bytes),(ae?Xjb:Yjb)(H)}function Tjb(){return ljb}function Vjb(y){var S,F;if("number"==typeof y)return 1;if(0!==(F=Ojb(y))&&0!==xkb(y,F)){if(4<F)return 1;if(!(F<4)){if(djb(y)===kjb.classLargePositiveInteger())return xkb(y,4)>Bjb(1073741823,4);if(!(xkb(y,4)<Bjb(-1073741824,4)))for(S=1;S<=4;S++)if(xkb(y,S)!==Bjb(-1073741824,S))return 1}}}function Wjb(y){return(djb(y)===kjb.classLargePositiveInteger()?Yjb:Xjb)(y)}function Xjb(y){var S,F,P,H,J;for(F=H=Ojb(y);0!==F&&0===xkb(y,F);)--F;if(0===F)return 0;if(F<=4){if(P=-1073741824,F<4||Rjb(y,4)<Bjb(P,4)){for(J=0,S=F;1<=S;S+=-1)J=256*J-xkb(y,S);return J}for(S=1;S<=4;S++)if(Rjb(y,S)!==Bjb(P,S))return F<H?pjb(y,F):y;return P}return F<H?pjb(y,F):y}function Yjb(y){var S,F,P,H;for(F=H=Ojb(y);0!==F&&0===xkb(y,F);)--F;if(0===F)return 0;if(F<=4&&Rjb(y,4)<=Bjb(1073741823,4)){for(P=0,S=F;1<=S;S+=-1)P=256*P+xkb(y,S);return P}return F<H?pjb(y,F):y}function Zjb(){var y,S,F,P;return S=kjb.stackIntegerValue(1),F=kjb.stackIntegerValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(2))),y=kjb.stackValue(2),kjb.failed()||(P=ojb("number"==typeof y?Hjb(y):y,S,F)?kjb.trueObject():kjb.falseObject(),kjb.failed()||kjb.popthenPush(3,P)),null}function $jb(){var y,S;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),y=kjb.stackValue(0),kjb.failed()?null:"number"==typeof y?(S=Hjb(y),kjb.failed()||kjb.popthenPush(2,S),null):(kjb.failed()||kjb.popthenPush(2,y),null)}function _jb(){var y;return y=kjb.trueObject(),kjb.failed()||kjb.popthenPush(1,y),null}function akb(){var y,S,F,P;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),S=kjb.stackValue(1),F=kjb.stackIntegerValue(0),kjb.failed()||(y="number"==typeof S?Hjb(S):S,P=0<=F?Ijb(y,F):Wjb(Jjb(y,0-F,ejb(y))),kjb.failed()||kjb.popthenPush(3,P)),null}function bkb(){var y,S,F;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),S=kjb.stackValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),y=kjb.stackValue(1),kjb.failed()||(F=Kjb("number"==typeof y?Hjb(y):y,"number"==typeof S?Hjb(S):S),kjb.failed()||kjb.popthenPush(2,F)),null}function ckb(){var y,S,F;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),y=kjb.stackValue(1),kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),S=kjb.stackValue(0),kjb.failed()||(F=Kjb("number"==typeof y?Hjb(y):y,"number"==typeof S?Hjb(S):S),kjb.failed()||kjb.popthenPush(3,F)),null}function dkb(){var y,S,F;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),S=kjb.stackValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),y=kjb.stackValue(1),kjb.failed()||(F=Ljb(y,S,jjb),kjb.failed()||kjb.popthenPush(2,F)),null}function ekb(){var y,S,F,P;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(2))),y=kjb.stackValue(2),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),S=kjb.stackValue(1),F=kjb.stackIntegerValue(0),kjb.failed()||(P=Ljb(y,S,F),kjb.failed()||kjb.popthenPush(4,P)),null}function fkb(){var y,S,F;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),S=kjb.stackValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),y=kjb.stackValue(1),kjb.failed()||(F=Ljb(y,S,mjb),kjb.failed()||kjb.popthenPush(2,F)),null}function gkb(){var y,S,F,P;return F=kjb.stackIntegerValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),S=kjb.stackValue(1),kjb.failed()||(y="number"==typeof S?Hjb(S):S,P=0<=F?Ijb(y,F):Wjb(Jjb(y,0-F,ejb(y))),kjb.failed()||kjb.popthenPush(2,P)),null}function hkb(){var y,S,F,P;return F=kjb.stackIntegerValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),S=kjb.stackValue(1),kjb.failed()||(y="number"==typeof S?Hjb(S):S,P=0<=F?Ijb(y,F):Wjb(Jjb(y,0-F,ejb(y))),kjb.failed()||kjb.popthenPush(2,P)),null}function ikb(){var y,S,F;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),S=kjb.stackValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),y=kjb.stackValue(1),kjb.failed()||(F=Ljb(y,S,njb),kjb.failed()||kjb.popthenPush(2,F)),null}function jkb(){var y,S,F,P,H;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),P=kjb.stackValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),S=kjb.stackValue(1),kjb.failed()?null:"number"==typeof S?"number"==typeof P?(y=S)>(F=P)?(H=1,kjb.failed()||kjb.popthenPush(2,H),null):(H=y<F?-1:0,kjb.failed()||kjb.popthenPush(2,H),null):(H=-1,kjb.failed()||kjb.popthenPush(2,H),null):(H="number"==typeof P?1:Mjb(S,P),kjb.failed()||kjb.popthenPush(2,H),null)}function kkb(){var y,S,F,P,H;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),F=kjb.stackValue(1),kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),P=kjb.stackValue(0),kjb.failed()?null:"number"==typeof F?"number"==typeof P?(y=F)>(S=P)?(H=1,kjb.failed()||kjb.popthenPush(3,H),null):(H=y<S?-1:0,kjb.failed()||kjb.popthenPush(3,H),null):(H=-1,kjb.failed()||kjb.popthenPush(3,H),null):(H="number"==typeof P?1:Mjb(F,P),kjb.failed()||kjb.popthenPush(3,H),null)}function lkb(){var y,S,F,P,H,J;if(kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),P=kjb.stackValue(1),H=kjb.booleanValueOf(kjb.stackValue(0)),kjb.success(kjb.isKindOfInteger(kjb.stackValue(2))),S=kjb.stackValue(2),kjb.failed())return null;if(!Vjb(S))return kjb.primitiveFail(),null;if(!Vjb(P))return kjb.primitiveFail(),null;if(y="number"==typeof S?Hjb(S):S,"number"==typeof P){if(0===P)return kjb.primitiveFail(),null;F=Hjb(P)}else F=P;return J=Njb(y,F,H),kjb.failed()||kjb.popthenPush(3,J),null}function mkb(){var y,S,F,P,H,J;if(kjb.success(kjb.isKindOfInteger(kjb.stackValue(2))),F=kjb.stackValue(2),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),P=kjb.stackValue(1),H=kjb.booleanValueOf(kjb.stackValue(0)),kjb.failed())return null;if(y="number"==typeof F?Hjb(F):F,"number"==typeof P){if(0===P)return kjb.primitiveFail(),null;S=Hjb(P)}else S=P;return J=Njb(y,S,H),kjb.failed()||kjb.popthenPush(4,J),null}function nkb(){var y,S,F,P;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),S=kjb.stackValue(1),F=kjb.booleanValueOf(kjb.stackValue(0)),kjb.success(kjb.isKindOfInteger(kjb.stackValue(2))),y=kjb.stackValue(2),kjb.failed()||(P=Qjb("number"==typeof y?Hjb(y):y,"number"==typeof S?Hjb(S):S,F),kjb.failed()||kjb.popthenPush(3,P)),null}function okb(){var y,S,F,P;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(2))),y=kjb.stackValue(2),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),S=kjb.stackValue(1),F=kjb.booleanValueOf(kjb.stackValue(0)),kjb.failed()||(P=Qjb("number"==typeof y?Hjb(y):y,"number"==typeof S?Hjb(S):S,F),kjb.failed()||kjb.popthenPush(4,P)),null}function pkb(){var y,S,F;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),S=kjb.stackValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),y=kjb.stackValue(1),kjb.failed()||(F=Sjb("number"==typeof y?Hjb(y):y,"number"==typeof S?Hjb(S):S),kjb.failed()||kjb.popthenPush(2,F)),null}function qkb(){var y,S,F;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),y=kjb.stackValue(1),kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),S=kjb.stackValue(0),kjb.failed()||(F=Sjb("number"==typeof y?Hjb(y):y,"number"==typeof S?Hjb(S):S),kjb.failed()||kjb.popthenPush(3,F)),null}function rkb(){var y,S,F,P;for(S=Tjb().length,y=(P=kjb.instantiateClassindexableSize(kjb.classString(),S)).bytes,F=0;F<=S-1;F++)y[F]=Tjb()[F];return kjb.failed()||kjb.popthenPush(1,P),null}function skb(){var y,S,F,P,H;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(2))),S=kjb.stackValue(2),kjb.success(kjb.isKindOfInteger(kjb.stackValue(1))),F=kjb.stackValue(1),P=kjb.stackIntegerValue(0),kjb.success(kjb.isKindOfInteger(kjb.stackValue(3))),y=kjb.stackValue(3),kjb.failed()||(H=Pjb("number"==typeof y?Hjb(y):y,"number"==typeof S?Hjb(S):S,"number"==typeof F?Hjb(F):F,P),kjb.failed()||kjb.popthenPush(4,H)),null}function tkb(){var y,S;return kjb.success(kjb.isKindOfInteger(kjb.stackValue(0))),y=kjb.stackValue(0),kjb.failed()?null:"number"==typeof y?(kjb.failed()||kjb.popthenPush(2,y),null):(S=Wjb(y),kjb.failed()||kjb.popthenPush(2,S),null)}function ukb(){var y,S;return kjb.success(kjb.stackValue(0).sqClass===kjb.classLargeNegativeInteger()),y=kjb.stackValue(0),kjb.failed()||(S=Xjb(y),kjb.failed()||kjb.popthenPush(1,S)),null}function vkb(){var y,S;return kjb.success(kjb.stackValue(0).sqClass===kjb.classLargePositiveInteger()),y=kjb.stackValue(0),kjb.failed()||(S=Yjb(y),kjb.failed()||kjb.popthenPush(1,S)),null}function wkb(y){return 0!=((kjb=y).majorVersion()==bjb)&&kjb.minorVersion()>=cjb}function xkb(y,S){return y.bytes[S-1]}function Trb(y){return"number"==typeof y?Vrb.classSmallInteger():y.sqClass}function Urb(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function _rb(){return $rb}function asb(y){return Vrb.failed()?null:Vrb.isWords(y)&&6===Urb(y)?y.wordsAsFloat32Array():(Vrb.primitiveFail(),null)}function bsb(y){var S,F;if(!Vrb.failed()){if(Trb(y)!==Vrb.classPoint())return Vrb.primitiveFail();if(!(S="number"==typeof(F=Vrb.fetchPointerofObject(0,y)))&&!F.isFloat)return Vrb.primitiveFail();if(Wrb=S?F:Vrb.floatValueOf(F),!(S="number"==typeof(F=Vrb.fetchPointerofObject(1,y)))&&!F.isFloat)return Vrb.primitiveFail();Xrb=S?F:Vrb.floatValueOf(F)}}function dsb(y){var S,F,P,H,J;if(H=Wrb-y[2],J=Xrb-y[5],0==(S=y[0]*y[4]-y[1]*y[3]))return Vrb.primitiveFail();S=1/S,F=H*y[4]-y[1]*J,P=y[0]*J-H*y[3],Yrb=F*S,Zrb=P*S}function esb(y){Yrb=Wrb*y[0]+Xrb*y[1]+y[2],Zrb=Wrb*y[3]+Xrb*y[4]+y[5]}function fsb(y){return-1073741824<=y&&Yrb<=1073741823}function gsb(y){var S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;if(P=asb(H=Vrb.stackObjectValue(0)),F=asb(Vrb.stackObjectValue(1)),S=asb(Vrb.stackObjectValue(2)),Vrb.failed())return null;Q=F,ee=P,te=(J=S)[0]*Q[0]+J[1]*Q[3],re=J[0]*Q[1]+J[1]*Q[4],ie=J[0]*Q[2]+J[1]*Q[5]+J[2],ae=J[3]*Q[0]+J[4]*Q[3],se=J[3]*Q[1]+J[4]*Q[4],ne=J[3]*Q[2]+J[4]*Q[5]+J[5],ee[0]=te,ee[1]=re,ee[2]=ie,ee[3]=ae,ee[4]=se,ee[5]=ne,Vrb.popthenPush(y+1,H)}function hsb(y){var S;if(bsb(Vrb.stackObjectValue(0)),S=asb(Vrb.stackObjectValue(1)),Vrb.failed())return null;dsb(S),Vrb.failed()||nsb(y)}function isb(y){var S,F,P,H,J,Q,ee,te,re,ie,ae;return P=Vrb.stackObjectValue(0),ae=Vrb.stackObjectValue(1),H=asb(Vrb.stackObjectValue(2)),Vrb.failed()?null:Trb(ae)===Trb(P)&&Vrb.isPointers(ae)&&2===Urb(ae)?(bsb(Vrb.fetchPointerofObject(0,ae)),Vrb.failed()?null:(re=Wrb,ie=Xrb,dsb(H),ee=J=Yrb,te=Q=Zrb,bsb(Vrb.fetchPointerofObject(1,ae)),Vrb.failed()?null:(S=Wrb,F=Xrb,dsb(H),ee=Math.min(ee,Yrb),J=Math.max(J,Yrb),te=Math.min(te,Zrb),Q=Math.max(Q,Zrb),Wrb=S,Xrb=ie,dsb(H),ee=Math.min(ee,Yrb),J=Math.max(J,Yrb),te=Math.min(te,Zrb),Q=Math.max(Q,Zrb),Wrb=re,Xrb=F,dsb(H),ee=Math.min(ee,Yrb),J=Math.max(J,Yrb),te=Math.min(te,Zrb),Q=Math.max(Q,Zrb),Vrb.failed()||(P=osb(P,ee,te,J,Q)),void(Vrb.failed()||Vrb.popthenPush(y+1,P))))):Vrb.primitiveFail()}function jsb(y){var S;if(S=asb(Vrb.stackObjectValue(0)),Vrb.failed())return null;Vrb.pop(1),Vrb.pushBool(1===S[0]&&0===S[1]&&0===S[2]&&0===S[3]&&1===S[4]&&0===S[5])}function ksb(y){var S;if(S=asb(Vrb.stackObjectValue(0)),Vrb.failed())return null;Vrb.pop(1),Vrb.pushBool(1===S[0]&&0===S[1]&&0===S[3]&&1===S[4])}function lsb(y){var S;if(bsb(Vrb.stackObjectValue(0)),S=asb(Vrb.stackObjectValue(1)),Vrb.failed())return null;esb(S),nsb(y)}function msb(y){var S,F,P,H,J,Q,ee,te,re,ie,ae;return P=Vrb.stackObjectValue(0),ae=Vrb.stackObjectValue(1),H=asb(Vrb.stackObjectValue(2)),Vrb.failed()?null:Trb(ae)===Trb(P)&&Vrb.isPointers(ae)&&2===Urb(ae)?(bsb(Vrb.fetchPointerofObject(0,ae)),Vrb.failed()?null:(re=Wrb,ie=Xrb,esb(H),ee=J=Yrb,te=Q=Zrb,bsb(Vrb.fetchPointerofObject(1,ae)),Vrb.failed()?null:(S=Wrb,F=Xrb,esb(H),ee=Math.min(ee,Yrb),J=Math.max(J,Yrb),te=Math.min(te,Zrb),Q=Math.max(Q,Zrb),Wrb=S,Xrb=ie,esb(H),ee=Math.min(ee,Yrb),J=Math.max(J,Yrb),te=Math.min(te,Zrb),Q=Math.max(Q,Zrb),Wrb=re,Xrb=F,esb(H),ee=Math.min(ee,Yrb),J=Math.max(J,Yrb),P=osb(P,ee,te=Math.min(te,Zrb),J,Q=Math.max(Q,Zrb)),void(Vrb.failed()||Vrb.popthenPush(y+1,P))))):Vrb.primitiveFail()}function nsb(y){return Zrb+=.5,fsb(Yrb+=.5)&&fsb(Zrb)?void Vrb.popthenPush(y+1,Vrb.makePointwithxValueyValue(0|Yrb,0|Zrb)):Vrb.primitiveFail()}function osb(y,S,F,P,H){var J,Q,ee,te,re,ie,ae;return fsb(te=S+.5)&&fsb(Q=P+.5)&&fsb(re=F+.5)&&fsb(ee=H+.5)?(Vrb.pushRemappableOop(y),ie=Vrb.makePointwithxValueyValue(0|te,0|re),Vrb.pushRemappableOop(ie),J=Vrb.makePointwithxValueyValue(0|Q,0|ee),ie=Vrb.popRemappableOop(),ae=Vrb.popRemappableOop(),Vrb.storePointerofObjectwithValue(0,ae,ie),Vrb.storePointerofObjectwithValue(1,ae,J),ae):Vrb.primitiveFail()}function psb(y){return 0!=((Vrb=y).majorVersion()==Rrb)&&Vrb.minorVersion()>=Srb}function Qtb(y,S){return y-(F=y,P=S,(0|Math.floor(F/P))*S)|0;var F,P}function Utb(y,S,F){var P,H;for(P=0;P<=3;P++)S[F+P-1]=255&(31<(H=8*(3-P))?0:y>>>H);return F+4}function Vtb(y,S,F){return y<=223?(S[F-1]=y,F+1):y<=7935?(S[F-1]=224+(y>>8),S[F]=Qtb(y,256),F+2):(S[F-1]=255,Utb(y,S,F+1))}function Wtb(){return Ttb}function Xtb(y){var S,F,P,H,J,Q,ee,te;if(Stb.stackValue(3),S=Stb.stackBytes(2),F=Stb.stackBytes(1),P=Stb.stackBytes(0),Stb.failed())return null;for(ee=S.length,te=F.length,Q=1;Q<=Math.min(ee,te);Q++)if((H=P[S[Q-1]])!==(J=P[F[Q-1]]))return H<J?Stb.failed()||Stb.popthenPush(y+1,1):Stb.failed()||Stb.popthenPush(y+1,3),null;return ee===te?Stb.failed()||Stb.popthenPush(y+1,2):ee<te?Stb.failed()||Stb.popthenPush(y+1,1):Stb.failed()||Stb.popthenPush(y+1,3),null}function Ytb(y){var S,F,P,H,J,Q,ee,te,re,ie;if(Stb.stackValue(2),S=Stb.stackInt32Array(1),F=Stb.stackBytes(0),Stb.failed())return null;for(H=Vtb(re=S.length,F,1),Q=1;Q<=re;){for(P=((ie=S[Q-1])>>>8&255)==(ee=255&ie)&&(ie>>>16&255)==ee&&(ie>>>24&255)==ee,J=Q;J<re&&ie===S[J];)++J;if(Q<J)P?(F[(H=Vtb(4*(J-Q+1)+1,F,H))-1]=ee,++H):H=Utb(ie,F,H=Vtb(4*(J-Q+1)+2,F,H)),Q=J+1;else if(P)F[(H=Vtb(5,F,H))-1]=ee,++H,++Q;else{for(;J<re&&S[J-1]!==S[J];)++J;for(J===re&&++J,H=Vtb(4*(J-Q)+3,F,H),te=Q;te<=J-1;te++)H=Utb(S[te-1],F,H);Q=J}}return Stb.failed()||Stb.popthenPush(y+1,H-1),null}function Ztb(y){var S,F,P,H,J;if(Stb.stackValue(2),S=Stb.stackBytes(1),F=Stb.stackUint16Array(0),Stb.failed())return null;for(H=S.length,P=1;P<=H;P++)J=S[P-1],F[P-1]=127<J?J-256<<8:J<<8;if(Stb.failed())return null;Stb.pop(y)}function $tb(y){var S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne;if(Stb.stackValue(3),S=Stb.stackInt32Array(2),F=Stb.stackBytes(1),P=Stb.stackIntegerValue(0),Stb.failed())return null;for(te=P,ee=F.length,ie=1,ne=S.length+1;te<=ee;){if(H=F[te-1],++te,!(H<=223))if(H<=254)H=256*(H-224)+F[te-1],++te;else for(H=0,re=1;re<=4;re++)H=(H<<8)+F[te-1],++te;if(ne<ie+(se=H>>>2))return Stb.primitiveFail(),null;if(1==(J=3&H))for(Q=F[te-1],++te,Q|=Q<<8,Q|=Q<<16,re=1;re<=se;re++)S[ie-1]=Q,++ie;if(2==J){for(Q=0,re=1;re<=4;re++)Q=Q<<8|F[te-1],++te;for(re=1;re<=se;re++)S[ie-1]=Q,++ie}if(3==J)for(ae=1;ae<=se;ae++){for(Q=0,re=1;re<=4;re++)Q=Q<<8|F[te-1],++te;S[ie-1]=Q,++ie}}if(Stb.failed())return null;Stb.pop(y)}function _tb(y){var S,F,P,H,J;if(Stb.stackValue(3),S=Stb.stackBytes(2),F=Stb.stackBytes(1),P=Stb.stackIntegerValue(0),Stb.failed())return null;if(256!==F.length)return Stb.failed()||Stb.popthenPush(y+1,0),null;for(H=P,J=S.length;H<=J&&0===F[S[H-1]];)++H;return J<H?Stb.failed()||Stb.popthenPush(y+1,0):Stb.failed()||Stb.popthenPush(y+1,H),null}function aub(y){var S,F,P,H,J,Q;if(Stb.stackValue(4),S=Stb.stackBytes(3),F=Stb.stackBytes(2),P=Stb.stackIntegerValue(1),H=Stb.stackBytes(0),Stb.failed())return null;if(0===S.length)return Stb.failed()||Stb.popthenPush(y+1,0),null;for(Q=P;Q<=F.length-S.length+1;Q++)for(J=1;H[F[Q+J-1-1]]===H[S[J-1]];){if(J===S.length)return Stb.failed()||Stb.popthenPush(y+1,Q),null;++J}return Stb.failed()||Stb.popthenPush(y+1,0),null}function bub(y){var S,F,P,H,J;if(Stb.stackValue(3),S=Stb.stackIntegerValue(2),F=Stb.stackBytes(1),P=Stb.stackIntegerValue(0),Stb.failed())return null;for(J=F.length,H=P;H<=J;H++)if(F[H-1]===S)return Stb.failed()||Stb.popthenPush(y+1,H),null;return Stb.failed()||Stb.popthenPush(y+1,0),null}function cub(y){var S,F,P,H,J,Q;if(Stb.stackValue(2),S=Stb.stackBytes(1),F=Stb.stackIntegerValue(0),Stb.failed())return null;for(P=S.length,H=268435455&F,Q=1;Q<=P;Q++)H=9741*(J=16383&(H+=S[Q-1]))+16384*(9741*(H>>>14)+101*J&16383)&268435455;return Stb.failed()||Stb.popthenPush(y+1,H),null}function dub(y){var S,F,P,H,J;if(Stb.stackValue(4),S=Stb.stackBytes(3),F=Stb.stackIntegerValue(2),P=Stb.stackIntegerValue(1),H=Stb.stackBytes(0),Stb.failed())return null;for(J=F;J<=P;J++)S[J-1]=H[S[J-1]];if(Stb.failed())return null;Stb.pop(y)}function eub(y){return 0!=((Stb=y).majorVersion()==Ntb)&&Stb.minorVersion()>=Otb}function Zvb(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function $vb(y,S){return 0|Math.floor(y/S)}function _vb(y,S){return y-$vb(y,S)*S|0}function cwb(y,S,F,P,H){var J,Q,ee,te,re,ie,ae;Q=$vb(F,60),te=(1e3-P)*H,re=(1e3-$vb(P*(J=_vb(F,60)),60))*H,ie=(1e3-$vb(P*(60-J),60))*H,ae=$vb(1e3*H,3922),te=$vb(te,3922),re=$vb(re,3922),ie=$vb(ie,3922),0===Q&&(ee=(ae<<16)+(ie<<8)+te),1===Q&&(ee=(re<<16)+(ae<<8)+te),2===Q&&(ee=(te<<16)+(ae<<8)+ie),3===Q&&(ee=(te<<16)+(re<<8)+ae),4===Q&&(ee=(ie<<16)+(te<<8)+ae),5===Q&&(ee=(ae<<16)+(te<<8)+re),0===ee&&(ee=1),y[S]=ee}function dwb(y){return awb.success(awb.isWordsOrBytes(y)),awb.failed()?0:y.wordsAsFloat64Array()}function ewb(y){return awb.success(awb.isWords(y)),awb.failed()?0:y.words}function fwb(){return bwb}function gwb(y,S,F,P,H){var J,Q;return 0==(Q=H-P)?0:(J=y===H?$vb(60*(S-F),Q):S===H?120+$vb(60*(F-y),Q):240+$vb(60*(y-S),Q))<0?J+360:J}function hwb(y,S,F){var P,H;return 0===y?S:0===S?y:(0==(H=((P=1024-F)*(y>>>16&255)+F*(S>>>16&255)>>10<<16)+(P*(y>>>8&255)+F*(S>>>8&255)>>10<<8)+(P*(255&y)+F*(255&S)>>10))&&(H=1),H)}function iwb(y,S,F,P,H){var J,Q,ee,te,re,ie,ae;return(te=S>>>10)<-1||P<=te||(ie=F>>>10)<-1||H<=ie?0:(re=1023&S,-1===te&&(re=te=0),te===P-1&&(re=0),ae=1023&F,-1===ie&&(ae=ie=0),ie===H-1&&(ae=0),ee=16777215&y[Q=ie*P+te],0<re&&(ee=hwb(ee,16777215&y[Q+1],re)),0===ae?ee:(J=16777215&y[Q=(ie+1)*P+te],0<re&&(J=hwb(J,16777215&y[Q+1],re)),hwb(ee,J,ae)))}function jwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le;if(Q=awb.stackValue(2),re=awb.stackValue(1),oe=awb.stackIntegerValue(0),J=ewb(Q),te=ewb(re),ne=Zvb(Q),awb.success(Zvb(re)===ne),awb.failed())return null;for(H=$vb(ne,oe),le=1;le<=H-2;le++)for(ue=1;ue<=oe-2;ue++){for(ee=se=P=y=0,F=-1;F<=1;F++)for(S=-1;S<=1;S++)0!=(ae=16777215&J[(le+F)*oe+(ue+S)])&&(se+=ae>>>16&255,P+=ae>>>8&255,y+=255&ae,++ee);ie=0===ee?0:($vb(se,ee)<<16)+($vb(P,ee)<<8)+$vb(y,ee),te[le*oe+ue]=ie}return awb.pop(3),0}function kwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue;if(Q=awb.stackValue(2),ie=awb.stackValue(1),oe=awb.stackIntegerValue(0),J=ewb(Q),ue=Zvb(Q),re=ewb(ie),awb.success(Zvb(ie)===ue),awb.failed())return null;for(H=0;H<=ue-1;H++)0!=(ae=16777215&J[H])&&((ee=te=se=ae>>>16&255)<(F=ae>>>8&255)&&(ee=F),ee<(y=255&ae)&&(ee=y),F<te&&(te=F),y<te&&(te=y),P=gwb(se,F,y,te,ee),ne=0===ee?0:$vb(1e3*(ee-te),ee),S=$vb(1e3*ee,255),1e3<(S+=10*oe)&&(S=1e3),S<0&&(S=0),cwb(re,H,P,ne,S));return awb.pop(3),0}function lwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae=0,se=0;if(te=awb.stackValue(2),F=awb.stackValue(1),P=awb.stackIntegerValue(0),awb.success(awb.isWords(te)),awb.success(awb.isWords(F)),y=$vb(2*Zvb(te),P),re=2*Zvb(F),awb.success(y<=re),awb.failed())return null;for(ee=te.wordsAsInt16Array(),S=F.wordsAsInt16Array(),H=1;H<=y;H++){for(Q=0,J=1;J<=P;J++)(ie=ee[ae++])<0&&(ie=0-ie),Q<ie&&(Q=ie);S[se++]=Q}return awb.pop(3),0}function mwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe;if(Q=awb.stackValue(7),ee=awb.stackIntegerValue(6),J=awb.stackIntegerValue(5),ie=awb.stackValue(4),ae=awb.stackIntegerValue(3),re=awb.stackIntegerValue(2),S=awb.stackIntegerValue(1),F=awb.stackIntegerValue(0),H=ewb(Q),te=ewb(ie),awb.success(S+2*ee<ae),awb.success(F+2*J<re),awb.failed())return null;for(oe=0;oe<=J-1;oe++)for(y=(F+2*oe)*ae+S,ne=0;ne<=ee-1;ne++)se=H[ne+oe*ee],te[P=y+2*ne]=se,te[P+1]=se,te[P+ae]=se,te[P+ae+1]=se;return awb.pop(8),0}function nwb(){var y,S,F,P,H,J,Q,ee=0,te=0;if(J=awb.stackValue(2),S=awb.stackValue(1),P=awb.booleanValueOf(awb.stackValue(0)),awb.success(awb.isWords(J)),awb.success(awb.isWords(S)),Q=Zvb(J),awb.success(Zvb(S)>=Q>>1),awb.failed())return null;for(H=J.wordsAsInt16Array(),y=S.wordsAsInt16Array(),P&&ee++,F=1;F<=Q;F++)y[te++]=H[ee],ee+=2;return awb.pop(3),0}function owb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he;if(ee=awb.stackValue(3),re=awb.stackValue(2),ce=awb.stackIntegerValue(1),ae=awb.stackIntegerValue(0),Q=ewb(ee),te=ewb(re),le=Zvb(ee),awb.success(Zvb(re)===le),awb.failed())return null;for($vb(le,ce),S=ce>>1,F=(J=$vb(le,ce))>>1,ne=ae/100,fe=0;fe<=ce-1;fe++)for(he=0;he<=J-1;he++)P=(fe-S)/S,H=(he-F)/F,ue=(se=Math.pow(Math.sqrt(P*P+H*H),ne))<=1?(y=Math.atan2(H,P),oe=1024*(S+se*Math.cos(y)*S)|0,1024*(F+se*Math.sin(y)*F)|0):(oe=1024*fe,1024*he),ie=iwb(Q,oe,ue,ce,J),te[he*ce+fe]=ie;return awb.pop(4),0}function pwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he;if(ee=ewb(awb.stackValue(11)),re=awb.stackIntegerValue(10),te=awb.stackIntegerValue(9),ie=ewb(awb.stackValue(8)),se=awb.stackIntegerValue(7),ae=awb.stackIntegerValue(6),le=awb.stackIntegerValue(5),ce=awb.stackIntegerValue(4),H=awb.stackIntegerValue(3),J=awb.stackIntegerValue(2),P=awb.stackIntegerValue(1),S=awb.stackIntegerValue(0),awb.success(0<=le&&0<=ce),awb.success(le+2*P<=re),awb.success(ce+2*S<=te),awb.success(0<=H&&0<=J),awb.success(H+P<=se),awb.success(J+S<=ae),awb.failed())return null;for(he=0;he<=S-1;he++)for(ue=re*(ce+2*he)+le,F=se*(J+he)+H,fe=0;fe<=P-1;fe++)oe=16711680&(ne=ee[ue]),Q=65280&ne,y=255&ne,oe+=16711680&(ne=ee[ue+1]),Q+=65280&ne,y+=255&ne,oe+=16711680&(ne=ee[ue+re]),Q+=65280&ne,y+=255&ne,oe+=16711680&(ne=ee[ue+re+1]),Q+=65280&ne,y+=255&ne,ie[F]=oe>>>2&16711680|Q>>>2&65280|y>>>2,ue+=2,++F;return awb.pop(12),0}function qwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe;if(ee=ewb(awb.stackValue(11)),re=awb.stackIntegerValue(10),te=awb.stackIntegerValue(9),ie=ewb(awb.stackValue(8)),se=awb.stackIntegerValue(7),ae=awb.stackIntegerValue(6),ce=awb.stackIntegerValue(5),fe=awb.stackIntegerValue(4),H=awb.stackIntegerValue(3),J=awb.stackIntegerValue(2),P=awb.stackIntegerValue(1),S=awb.stackIntegerValue(0),awb.success(0<=ce&&0<=fe),awb.success(ce+2*P<=re),awb.success(fe+2*S<=te),awb.success(0<=H&&0<=J),awb.success(H+P<=se),awb.success(J+S<=ae),awb.failed())return null;for(pe=0;pe<=S-1;pe++)for(le=re*(fe+2*pe)+ce,F=se*(J+pe)+H,he=0;he<=P-1;he++)ue=(16711680&(ne=ee[le]))+(16711680&(oe=ee[le+re+1]))>>>1&16711680,Q=(65280&ne)+(65280&oe)>>>1&65280,y=(255&ne)+(255&oe)>>>1,ie[F]=Q|y|ue,le+=2,++F;return awb.pop(12),0}function rwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe;if(J=awb.stackValue(2),re=awb.stackValue(1),ne=awb.stackIntegerValue(0),H=ewb(J),oe=Zvb(J),te=ewb(re),awb.success(Zvb(re)===oe),awb.failed())return null;for(P=0;P<=oe-1;P++)0!=(ie=16777215&H[P])&&((Q=ee=ae=ie>>>16&255)<(F=ie>>>8&255)&&(Q=F),Q<(y=255&ie)&&(Q=y),F<ee&&(ee=F),y<ee&&(ee=y),S=$vb(1e3*Q,255),se=0===Q?0:$vb(1e3*(Q-ee),Q),S<110&&(S=110,se=1e3),se<90&&(se=90),cwb(te,P,_vb((110===S||90===se?0:gwb(ae,F,y,ee,Q))+ne+36e7,360),se,S));return awb.pop(3),0}function swb(){var y,S,F,P,H,J,Q;return S=awb.stackValue(3),H=awb.stackIntegerValue(2),J=awb.stackIntegerValue(1),Q=awb.stackIntegerValue(0),y=ewb(S),P=Zvb(S),awb.failed()?null:(F=iwb(y,J,Q,H,$vb(P,H)),awb.pop(5),awb.pushInteger(F),0)}function twb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe;if(J=awb.stackValue(2),re=awb.stackValue(1),ne=awb.stackIntegerValue(0),H=ewb(J),oe=Zvb(J),te=ewb(re),awb.success(Zvb(re)===oe),awb.failed())return null;for(P=0;P<=oe-1;P++)(ie=16777215&H[P])<2||((Q=ee=ae=ie>>>16&255)<(F=ie>>>8&255)&&(Q=F),Q<(y=255&ie)&&(Q=y),F<ee&&(ee=F),y<ee&&(ee=y),S=$vb(1e3*Q,255),0<(se=0===Q?0:$vb(1e3*(Q-ee),Q))&&(1e3<(se+=10*ne)&&(se=1e3),se<0&&(se=0),cwb(te,P,gwb(ae,F,y,ee,Q),se,S)));return awb.pop(3),0}function uwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve;if(F=awb.stackValue(5),P=awb.stackIntegerValue(4),S=awb.stackIntegerValue(3),te=awb.stackValue(2),ie=awb.stackIntegerValue(1),ee=awb.stackIntegerValue(0),awb.success(Zvb(F)===P*S),awb.success(Zvb(te)===ie*ee),y=ewb(F),Q=ewb(te),awb.failed())return null;for(H=J=0,me=$vb(1024*P,ie),ve=$vb(1024*S,ee),se=0;se<=ee-1;se++){for(ae=H=0;ae<=ie-1;ae++)he=(1024-(1023&H))*(1024-(1023&J)),pe=(1023&H)*(1024-(1023&J)),de=(1024-(1023&H))*(1023&J),be=(1023&H)*(1023&J),ne=y[ce=(J>>>10)*P+(H>>>10)],oe=H>>>10<P-1?y[ce+1]:ne,J>>>10<S-1&&(ce+=P),ue=y[ce],le=H>>>10<P-1?y[ce+1]:ue,(fe=0)===ne&&(ne=oe,fe+=he),0===oe&&(oe=ne,fe+=pe),0===ue&&(ue=le,fe+=de),0===le&&(le=ue,fe+=be),0===ne&&(ne=ue,oe=le),0===ue&&(ue=ne,le=oe),re=0,fe<5e5&&(re=((ce=he*(ne>>>16&255)+pe*(oe>>>16&255)+de*(ue>>>16&255)+be*(le>>>16&255))>>>20&255)<<16,re|=((ce=he*(ne>>>8&255)+pe*(oe>>>8&255)+de*(ue>>>8&255)+be*(le>>>8&255))>>>20&255)<<8,0==(re|=(ce=he*(255&ne)+pe*(255&oe)+de*(255&ue)+be*(255&le))>>>20&255)&&(re=1)),Q[se*ie+ae]=re,H+=me;J+=ve}return awb.pop(6),0}function vwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke,ge,ye,Se,Fe,Pe,we,Ie,Oe;if(fe=awb.stackValue(5),be=awb.stackValue(4),we=awb.stackIntegerValue(3),ce=ewb(fe),de=ewb(be),F=Zvb(fe),ge=awb.stackIntegerValue(2),y=awb.stackValue(1),P=awb.stackValue(0),S=dwb(y),H=dwb(P),awb.success(Zvb(be)===F),awb.failed())return null;for(ue=$vb(F,we),J=_vb(Math.random(),ge)-1,ye=0;ye<=J/2-1;ye++)for(Ie=_vb(Math.random(),we),Oe=_vb(Math.random(),ue),ve=_vb(Math.random(),8),ne=-4;ne<=4;ne++)for(oe=-4;oe<=4;oe++)(ee=ne*ne+oe*oe)<25&&0<ee&&(ie=Oe+oe|0,0<(te=Ie+ne|0)&&0<ie&&ie<ue&&te<we&&(S[ie*we+te]=ve*(1-ee/25)));for(se=1;se<=we-2;se++)for(Q=1;Q<=ue-2;Q++)S[Fe=Q*we+se]=(H[Fe+1]+H[Fe-1]+H[Fe+we]+H[Fe-we]+H[Fe-1-we]/2+H[Fe-1+we]/2+H[Fe+1-we]/2+H[Fe+1+we]/2)/4-S[Fe],S[Fe]=.9*S[Fe];for(ke=0;ke<=we*ue;ke++)Se=H[ke],H[ke]=S[ke],S[ke]=Se;for(he=0;he<=ue-1;he++)for(le=0;le<=we-1;le++)me=1<le&&le<we-1&&1<he&&he<ue-1?((re=64*(S[Pe=he*we+le]-S[Pe-1]+(S[Pe+1]-S[Pe])))<2&&(re=-2),2<re&&(re=2),(ae=(S[Pe]-S[Pe-we]+(S[Pe+we]-S[Pe]))/64)<2&&(ae=-2),2<ae&&(ae=2),(pe=(he+ae)*we+(le+re)|0)<we*ue&&0<=pe?ce[pe]:ce[le+he*we]):ce[le+he*we],de[le+he*we]=me;return awb.pop(6),0}function wwb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve;if(ae=awb.stackValue(3),ne=awb.stackValue(2),be=awb.stackIntegerValue(1),J=awb.stackIntegerValue(0),ie=ewb(ae),se=ewb(ne),pe=Zvb(ae),awb.success(Zvb(ne)===pe),awb.failed())return null;for(fe=(S=be>>1)<(F=(re=$vb(pe,be))>>1)?(ce=F/(ue=S),1):(ce=1,(ue=F)<S?S/F:1),de=-3.141592653589793*J/180,le=ue*ue,me=0;me<=be-1;me++)for(ve=0;ve<=re-1;ve++)(H=(Q=ce*(me-S))*Q+(ee=fe*(ve-F))*ee)<le&&(y=(te=1-Math.sqrt(H)/ue)*te*de,he=Math.sin(y),oe=iwb(ie,1024*(((P=Math.cos(y))*Q-he*ee)/ce+S)|0,1024*((he*Q+P*ee)/fe+F)|0,be,re),se[be*ve+me]=oe);return awb.pop(4),0}function xwb(y){return 0!=((awb=y).majorVersion()==Xvb)&&awb.minorVersion()>=Yvb}function SocketPlugin(){return{getModuleName:function(){return"SocketPlugin (http-only)"},interpreterProxy:null,primHandler:null,handleCounter:0,needProxy:new Set,status:0,lookupCache:{localhost:{address:[127,0,0,1],validUntil:Number.MAX_SAFE_INTEGER}},lastLookup:null,lookupSemaIdx:0,TCP_Socket_Type:0,Resolver_Uninitialized:0,Resolver_Ready:1,Resolver_Busy:2,Resolver_Error:3,Socket_InvalidSocket:-1,Socket_Unconnected:0,Socket_WaitingForConnection:1,Socket_Connected:2,Socket_OtherEndClosed:3,Socket_ThisEndClosed:4,setInterpreter:function(y){return this.interpreterProxy=y,this.primHandler=this.interpreterProxy.vm.primHandler,!0},_signalSemaphore:function(y){y<=0||this.primHandler.signalSemaphoreWithIndex(y)},_signalLookupSemaphore:function(){this._signalSemaphore(this.lookupSemaIdx)},_getAddressFromLookupCache:function(y,S){if(y){if(y.match(/^\d+\.\d+\.\d+\.\d+$/)){var F=y.split(".").map((function(y){return+y}));if(F.every((function(y){return y<=255})))return new Uint8Array(F)}var P=this.lookupCache[y];if(P&&(S||P.validUntil>=Date.now()))return new Uint8Array(P.address)}return null},_addAddressFromResponseToLookupCache:function(y){if(y&&0===y.Status&&y.Question&&y.Answer){var t=function(y,S){y[S]&&y[S].replace&&(y[S]=y[S].replace(/\.$/,""))},S=y.Question[0];t(S,"name"),y.Answer.forEach((function(y){t(y,"name"),t(y,"data")}));var F=S.name,P=null,H=86400;y.Answer.some((function(y){if(y.name===F){if(y.TTL&&(H=Math.min(H,y.TTL)),1===y.type)return P=y.data.split(".").map((function(y){return+y})),!0;5===y.type&&(F=y.data)}return!1}))&&(this.lookupCache[S.name]={address:P,validUntil:Date.now()+1e3*H})}},_compareAddresses:function(y,S){return y.every((function(y,F){return S[F]===y}))},_reverseLookupNameForAddress:function(y){var S=this,F=null;return Object.keys(this.lookupCache).some((function(P){return!!S._compareAddresses(y,S.lookupCache[P].address)&&(F=P,!0)})),F||y.join(".")},_newSocketHandle:function(y,S,F,P){var H=this;return{hostAddress:null,host:null,port:null,connSemaIndex:S,readSemaIndex:F,writeSemaIndex:P,webSocket:null,sendBuffer:null,sendTimeout:null,response:null,responseReadUntil:0,responseReceived:!1,status:H.Socket_Unconnected,_signalConnSemaphore:function(){H._signalSemaphore(this.connSemaIndex)},_signalReadSemaphore:function(){H._signalSemaphore(this.readSemaIndex)},_signalWriteSemaphore:function(){H._signalSemaphore(this.writeSemaIndex)},_otherEndClosed:function(){this.status=H.Socket_OtherEndClosed,this.webSocket=null,this._signalConnSemaphore()},_hostAndPort:function(){return this.host+":"+this.port},_requestNeedsProxy:function(){return H.needProxy.has(this._hostAndPort())},_getURL:function(y,S){var F="";return(S||this._requestNeedsProxy())&&(F="object"==typeof SqueakJS&&SqueakJS.options.proxy||"https://corsproxy.io/?"),443!==this.port?F+="http://"+this._hostAndPort()+y:F+="https://"+this.host+y,F},_performRequest:function(){if(this.webSocket)this._performWebSocketSend();else{var y=new TextDecoder("utf-8").decode(this.sendBuffer),S=this.sendBuffer.findIndex((function(y,S,F){return"\r"===F[S]&&"\r"===F[S+2]&&"\n"===F[S+1]&&"\n"===F[S+3]}));this.sendBuffer=0<=S?this.sendBuffer.subarray(S+4):null;var F=y.split("\r\n\r\n")[0].split("\n"),P=F[0].split(" "),H=P[0];if("GET"!==H&&"PUT"!==H&&"POST"!==H)return this._otherEndClosed(),-1;for(var J=P[1],Q=!1,ee=!1,te=null,re=1;re<F.length;re++){var ie=F[re];if(ie.match(/Content-Length:/i)){var ae=parseInt(ie.substr(16)),se=this.sendBuffer.byteLength;te=this.sendBuffer.subarray(se-ae,se)}else if(ie.match(/Host:/i)){var ne=ie.substr(6).trim();this.host!==ne&&(console.warn("Host for "+this.hostAddress+" was "+this.host+" but from HTTP request now "+ne),this.host=ne)}ie.match(/Connection: Upgrade/i)?Q=!0:ie.match(/Upgrade: WebSocket/i)&&(ee=!0)}"GET"===H&&Q&&ee?this._performWebSocketRequest(J,H,te,F):self.fetch?this._performFetchAPIRequest(J,H,te,F):this._performXMLHTTPRequest(J,H,te,F)}},_performFetchAPIRequest:function(y,S,F,P){for(var J=this,Q={},ee=1;ee<P.length;ee++){var te=P[ee].split(":");2===te.length&&(Q[te[0]]=te[1].trim())}"object"==typeof SqueakJS&&SqueakJS.options.ajax&&(Q["X-Requested-With"]="XMLHttpRequest");var re={method:S,headers:Q,body:F,mode:"cors"};fetch(this._getURL(y),re).then(J._handleFetchAPIResponse.bind(J)).catch((function(Q){var ee=J._getURL(y,!0);console.warn("Retrying with CORS proxy: "+ee),fetch(ee,re).then((function(y){console.log("Success: "+ee),J._handleFetchAPIResponse(y),H.needProxy.add(J._hostAndPort())})).catch((function(H){console.warn("Fetch API failed, retrying with XMLHttpRequest"),J._performXMLHTTPRequest(y,S,F,P)}))}))},_handleFetchAPIResponse:function(y){if(null===this.response){var S=["HTTP/1.0 ",y.status," ",y.statusText,"\r\n"];y.headers.forEach((function(y,F,P){S=S.concat([F,": ",y,"\r\n"])})),S.push("\r\n"),this.response=[new TextEncoder("utf-8").encode(S.join(""))]}this._readIncremental(y.body.getReader())},_readIncremental:function(y){var S=this;return y.read().then((function(F){if(!F.done)return S.response.push(F.value),S._signalReadSemaphore(),S._readIncremental(y);S.responseReceived=!0}))},_performXMLHTTPRequest:function(y,S,F,P){for(var J,Q=this,ee=1;ee<P.length;ee++){var te=P[ee];if(te.match(/Content-Type:/i)){J=encodeURIComponent(te.substr(14));break}}var re=new XMLHttpRequest;re.open(S,this._getURL(y)),void 0!==J&&re.setRequestHeader("Content-type",J),"object"==typeof SqueakJS&&SqueakJS.options.ajax&&re.setRequestHeader("X-Requested-With","XMLHttpRequest"),re.responseType="arraybuffer",re.onload=function(y){Q._handleXMLHTTPResponse(this)},re.onerror=function(P){var J=Q._getURL(y,!0);console.warn("Retrying with CORS proxy: "+J);var ee=new XMLHttpRequest;ee.open(S,J),ee.responseType=re.responseType,"object"==typeof SqueakJS&&SqueakJS.options.ajaxx&&ee.setRequestHeader("X-Requested-With","XMLHttpRequest"),ee.onload=function(y){console.log("Success: "+J),Q._handleXMLHTTPResponse(this),H.needProxy.add(Q._hostAndPort())},ee.onerror=function(){Q._otherEndClosed(),console.error("Failed to download:\n"+J)},ee.send(F)},re.send(F)},_handleXMLHTTPResponse:function(y){this.responseReceived=!0;var S=y.response;if(S){var F=new TextEncoder("utf-8").encode("HTTP/1.0 "+y.status+" "+y.statusText+"\r\n"+y.getAllResponseHeaders()+"\r\n"),P=new Uint8Array(F.byteLength+S.byteLength);P.set(F,0),P.set(new Uint8Array(S),F.byteLength),this.response=[P],this._signalReadSemaphore()}else this._otherEndClosed()},_performWebSocketRequest:function(y,S,F,P){for(var J,Q,ee=this._getURL(y),te=1;te<P.length;te++){var re=P[te].split(":");if("Sec-WebSocket-Protocol"===re[0]){if(J=re[1].trim(),Q)break}else if("Sec-WebSocket-Key"===re[0]&&(Q=re[1].trim(),J))break}this.webSocket=new WebSocket(ee.replace(/^http/,"ws"),J);var ie=this;this.webSocket.onopen=function(){ie.status!==H.Socket_Connected&&(ie.status=H.Socket_Connected,ie._signalConnSemaphore(),ie._signalWriteSemaphore());var y=new Uint8Array(sha1.array(Q+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11")),S=Squeak.bytesAsString(y);ie._performWebSocketReceive("HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: "+btoa(S)+"\r\n\r\n",!0)},this.webSocket.onmessage=function(y){ie._performWebSocketReceive(y.data)},this.webSocket.onerror=function(y){ie._otherEndClosed(),console.error("Error in WebSocket:",y)},this.webSocket.onclose=function(){ie._otherEndClosed()}},_performWebSocketReceive:function(y,S){var F=!y.substr;if(F||(y=new TextEncoder("utf-8").encode(y)),!S){var P,H=2+y.length+4;P=y.byteLength<126?y.length:y.byteLength<65535?(H+=2,126):(H+=8,127);var J,Q=new Uint8Array(H);Q[0]=F?130:129,Q[1]=128|P,J=126===P?(Q[2]=y.length>>>8,Q[3]=255&y.length,4):127===P?(Q[2]=y.length>>>56,Q[3]=y.length>>>48&255,Q[4]=y.length>>>40&255,Q[5]=y.length>>>32&255,Q[6]=y.length>>>24&255,Q[7]=y.length>>>16&255,Q[8]=y.length>>>8&255,Q[9]=255&y.length,10):2;var ee=new Uint8Array(4);Q.set(ee,J),J+=4;var te=y;Q.set(te,J),y=Q}this.response&&this.response.length?this.response.push(y):this.response=[y],this.responseReceived=!0,this._signalReadSemaphore()},_performWebSocketSend:function(){var y,S=15&this.sendBuffer[0];if(0==S)return console.error("No support for WebSocket frame continuation yet!"),!0;if(1==S)y=!1;else{if(2!=S)return 8==S?(this.webSocket.close(),void(this.webSocket=null)):9==S||10==S?void 0:void console.error("Unsupported WebSocket frame opcode "+S);y=!0}var F,P,H=this.sendBuffer[1],J=H>>>7,Q=127&H;F=126===Q?(Q=this.sendBuffer[2]<<8|this.sendBuffer[3],4):127===Q?(Q=this.sendBuffer[2]<<56|this.sendBuffer[3]<<48|this.sendBuffer[4]<<40|this.sendBuffer[5]<<32|this.sendBuffer[6]<<24|this.sendBuffer[7]<<16|this.sendBuffer[8]<<8|this.sendBuffer[9],10):2,J&&(P=this.sendBuffer.subarray(F,F+4),F+=4);var ee,te=this.sendBuffer.subarray(F,F+Q);F+=Q,J&&(te=te.map((function(y,S){return y^P[3&S]}))),ee=y?te:Squeak.bytesAsString(te),this.sendBuffer=this.sendBuffer.subarray(F),this.webSocket.send(ee),0<this.sendBuffer.byteLength&&this._performWebSocketSend()},connect:function(y,S){this.hostAddress=y,this.host=H._reverseLookupNameForAddress(y),this.port=S,this.status=H.Socket_Connected,this._signalConnSemaphore(),this._signalWriteSemaphore()},close:function(){this.status!=H.Socket_Connected&&this.status!=H.Socket_OtherEndClosed&&this.status!=H.Socket_WaitingForConnection||(this.webSocket&&(this.webSocket.close(),this.webSocket=null),this.status=H.Socket_Unconnected,this._signalConnSemaphore())},destroy:function(){this.status=H.Socket_InvalidSocket},dataAvailable:function(){if(this.status==H.Socket_InvalidSocket)return!1;if(this.status==H.Socket_Connected){if(this.webSocket)return this.response&&0<this.response.length;if(this.response&&0<this.response.length)return this._signalReadSemaphore(),!0;this.responseSentCompletly&&(this.status=H.Socket_OtherEndClosed,this._signalConnSemaphore())}return!1},recv:function(y){if(null===this.response)return[];var S=this.response[0];if(S.length>y){var F=S.subarray(y);F?this.response[0]=F:this.response.shift(),S=S.subarray(0,y)}else this.response.shift();return this.responseReceived&&0===this.response.length&&!this.webSocket&&(this.responseSentCompletly=!0),S},send:function(y,S,F){null!==this.sendTimeout&&self.clearTimeout(this.sendTimeout),this.lastSend=Date.now();var P=y.bytes.subarray(S,F);if(null===this.sendBuffer)this.sendBuffer=P.slice();else{var H=this.sendBuffer.byteLength+P.byteLength,J=new Uint8Array(H);J.set(this.sendBuffer,0),J.set(P,this.sendBuffer.byteLength),this.sendBuffer=J}return this.sendTimeout=self.setTimeout(this._performRequest.bind(this),50),P.byteLength}}},primitiveHasSocketAccess:function(y){return this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.trueObject()),!0},primitiveInitializeNetwork:function(y){return 1===y&&(this.lookupSemaIdx=this.interpreterProxy.stackIntegerValue(0),this.status=this.Resolver_Ready,this.interpreterProxy.pop(y),!0)},primitiveResolverNameLookupResult:function(y){if(0!==y)return!1;if(!this.lastLookup||!this.lastLookup.substr)return this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),!0;var S=this._getAddressFromLookupCache(this.lastLookup,!0);return this.interpreterProxy.popthenPush(y+1,S?this.primHandler.makeStByteArray(S):this.interpreterProxy.nilObject()),!0},primitiveResolverStartNameLookup:function(y){if(1!==y)return!1;var S=this.lastLookup=this.interpreterProxy.stackValue(0).bytesAsString();if(this._getAddressFromLookupCache(S,!1))this.status=this.Resolver_Ready,this._signalLookupSemaphore();else{var F="https://9.9.9.9:5053/dns-query?name="+encodeURIComponent(this.lastLookup)+"&type=A",P=!1;if(self.fetch){var H=this;self.fetch(F,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",referrer:"no-referrer",referrerPolicy:"no-referrer"}).then((function(y){return y.json()})).then((function(y){H._addAddressFromResponseToLookupCache(y)})).catch((function(y){console.error("Name lookup failed",y)})).then((function(){S===H.lastLookup&&(H.status=H.Resolver_Ready,H._signalLookupSemaphore())})),P=!0}else{H=this;var s=function(){S===H.lastLookup&&(H.status=H.Resolver_Ready,H._signalLookupSemaphore())},J=new XMLHttpRequest;J.open("GET",F,!0),J.timeout=2e3,J.responseType="json",J.onload=function(y){H._addAddressFromResponseToLookupCache(this.response),s()},J.onerror=function(){console.error("Name lookup failed",J.statusText),s()},J.send(),P=!0}P&&(this.status=this.Resolver_Busy,this._signalLookupSemaphore())}return this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),!0},primitiveResolverAddressLookupResult:function(y){if(0!==y)return!1;if(!this.lastLookup||!this.lastLookup.every)return this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),!0;var S=this._reverseLookupNameForAddress(this.lastLookup),F=this.primHandler.makeStString(S);return this.interpreterProxy.popthenPush(y+1,F),!0},primitiveResolverStartAddressLookup:function(y){return 1===y&&(this.lastLookup=this.interpreterProxy.stackBytes(0),this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),this.status=this.Resolver_Ready,this._signalLookupSemaphore(),!0)},primitiveResolverStatus:function(y){return 0===y&&(this.interpreterProxy.popthenPush(y+1,this.status),!0)},primitiveResolverAbortLookup:function(y){return 0===y&&(this.lastLookup=null,this.status=this.Resolver_Ready,this._signalLookupSemaphore(),this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),!0)},primitiveSocketRemoteAddress:function(y){if(1!==y)return!1;var S=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==S&&(this.interpreterProxy.popthenPush(y+1,S.hostAddress?this.primHandler.makeStByteArray(S.hostAddress):this.interpreterProxy.nilObject()),!0)},primitiveSocketRemotePort:function(y){if(1!==y)return!1;var S=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==S&&(this.interpreterProxy.popthenPush(y+1,S.port),!0)},primitiveSocketConnectionStatus:function(y){if(1!==y)return!1;var S=this.interpreterProxy.stackObjectValue(0).handle;if(void 0===S)return!1;var F=S.status;return void 0===F&&(F=this.Socket_InvalidSocket),this.interpreterProxy.popthenPush(y+1,F),!0},primitiveSocketConnectToPort:function(y){if(3!==y)return!1;var S=this.interpreterProxy.stackObjectValue(2).handle;if(void 0===S)return!1;var F=this.interpreterProxy.stackBytes(1),P=this.interpreterProxy.stackIntegerValue(0);return S.connect(F,P),this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),!0},primitiveSocketCloseConnection:function(y){if(1!==y)return!1;var S=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==S&&(S.close(),this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),!0)},primitiveSocketCreate3Semaphores:function(y){if(7!==y)return!1;var S=this.interpreterProxy.stackIntegerValue(0),F=this.interpreterProxy.stackIntegerValue(1),P=this.interpreterProxy.stackIntegerValue(2),H=this.interpreterProxy.stackIntegerValue(3);if(this.interpreterProxy.stackIntegerValue(5)!==this.TCP_Socket_Type)return!1;var J="{SqueakJS Socket #"+ ++this.handleCounter+"}",Q=this.primHandler.makeStString(J);return Q.handle=this._newSocketHandle(H,P,F,S),this.interpreterProxy.popthenPush(y+1,Q),!0},primitiveSocketDestroy:function(y){if(1!==y)return!1;var S=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==S&&(S.destroy(),this.interpreterProxy.popthenPush(y+1,S.status),!0)},primitiveSocketReceiveDataAvailable:function(y){if(1!==y)return!1;var S=this.interpreterProxy.stackObjectValue(0).handle;if(void 0===S)return!1;var F=this.interpreterProxy.falseObject();return S.dataAvailable()&&(F=this.interpreterProxy.trueObject()),this.interpreterProxy.popthenPush(y+1,F),!0},primitiveSocketReceiveDataBufCount:function(y){if(4!==y)return!1;var S=this.interpreterProxy.stackObjectValue(3).handle;if(void 0===S)return!1;var F=this.interpreterProxy.stackObjectValue(2),P=this.interpreterProxy.stackIntegerValue(1)-1,H=this.interpreterProxy.stackIntegerValue(0);if(P+H>F.bytes.length)return!1;var J=S.recv(H);return F.bytes.set(J,P),this.interpreterProxy.popthenPush(y+1,J.length),!0},primitiveSocketSendDataBufCount:function(y){if(4!==y)return!1;var S=this.interpreterProxy.stackObjectValue(3).handle;if(void 0===S)return!1;var F=this.interpreterProxy.stackObjectValue(2),P=this.interpreterProxy.stackIntegerValue(1)-1;if(P<0)return!1;var H=P+this.interpreterProxy.stackIntegerValue(0);if(H>F.length)return!1;var J=S.send(F,P,H);return this.interpreterProxy.popthenPush(y+1,J),!0},primitiveSocketSendDone:function(y){return 1===y&&(this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.trueObject()),!0)},primitiveSocketListenWithOrWithoutBacklog:function(y){return!(y<2||(this.interpreterProxy.popthenPush(y+1,this.interpreterProxy.nilObject()),0))}}}function registerSocketPlugin(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("SocketPlugin",SocketPlugin()):self.setTimeout(registerSocketPlugin,100)}function SpeechPlugin(){return{getModuleName:function(){return"SpeechPlugin"},interpreterProxy:null,primHandler:null,voiceInput:null,semaphoreIndex:null,shouldListen:!1,recognition:null,synth:self.speechSynthesis,setInterpreter:function(y){return this.interpreterProxy=y,this.primHandler=this.interpreterProxy.vm.primHandler,!0},primitiveSpeak:function(y){var S,F;if(1===y)S=this.interpreterProxy.stackValue(0).bytesAsString();else{if(2!==y)return!1;S=this.interpreterProxy.stackValue(1).bytesAsString();var P=this.interpreterProxy.stackValue(0).bytesAsString();F=this.synth.getVoices().filter((function(y){return y.name===P}))}var H=new SpeechSynthesisUtterance(S);return F&&0<F.length&&(H.voice=F[0]),this.synth.speak(H),this.interpreterProxy.pop(y),!0},primitiveRegisterSemaphore:function(y){return 1===y&&(this.semaphoreIndex=this.interpreterProxy.stackIntegerValue(0),this.interpreterProxy.pop(y),!0)},primitiveUnregisterSemaphore:function(y){return 0===y&&!(this.semaphoreIndex=null)},primitiveGetLastRecognitionResult:function(y){if(0!==y)return!1;if(null===this.semaphoreIndex)return!1;if(null===this.voiceInput)return!1;var S=this.primHandler.makeStArray(this.voiceInput);return this.voiceInput=[],this.interpreterProxy.popthenPush(1,S),!0},primitiveStartListening:function(y){return 0===y&&(this.recognition=new webkitSpeechRecognition,this.recognition.lang="en-US",this.recognition.interimResults=!0,this.recognition.onresult=this._onRecognitionResult.bind(this),this.recognition.onerror=function(y){console.log(y)},this.recognition.onend=function(y){this.shouldListen&&this.recognition.start()}.bind(this),this.shouldListen=!0,this.recognition.start(),!0)},_onRecognitionResult:function(y){this.voiceInput=[];for(var S=y.resultIndex;S<y.results.length;S++){for(var F=y.results[S],P=[F.isFinal,[]],H=0;H<F.length;H++){var J=F[H].transcript;P[1].push([J,F[H].confidence])}0<P[1].length&&this.voiceInput.push(P)}null!==this.semaphoreIndex&&0<this.voiceInput.length&&this.primHandler.signalSemaphoreWithIndex(this.semaphoreIndex)},primitiveStopListening:function(y){return 0===y&&(this.voiceInput=[],this.recognition.stop(),!(this.shouldListen=!1))}}}function registerSpeechPlugin(){"object"==typeof Squeak&&Squeak.registerExternalModule?"webkitSpeechRecognition"in self?Squeak.registerExternalModule("SpeechPlugin",SpeechPlugin()):console.warn("SpeechPlugin: Web Speech API is not supported by this browser."):self.setTimeout(registerSpeechPlugin,100)}function SqueakSSL(){return{getModuleName:function(){return"SqueakSSL (fake)"},interpreterProxy:null,primHandler:null,handleCounter:0,SQSSL_OK:0,SQSSL_NEED_MORE_DATA:-1,SQSSL_INVALID_STATE:-2,SQSSL_BUFFER_TOO_SMALL:-3,SQSSL_INPUT_TOO_LARGE:-4,SQSSL_GENERIC_ERROR:-5,SQSSL_OUT_OF_MEMORY:-6,SQSSL_PROP_VERSION:0,SQSSL_PROP_LOGLEVEL:1,SQSSL_PROP_SSLSTATE:2,SQSSL_PROP_CERTSTATE:3,SQSSL_PROP_PEERNAME:0,SQSSL_PROP_CERTNAME:1,SQSSL_PROP_SERVERNAME:2,setInterpreter:function(y){return this.interpreterProxy=y,this.primHandler=this.interpreterProxy.vm.primHandler,!0},primitiveCreate:function(y){var S="{SqueakJS SSL #"+ ++this.handleCounter+"}",F=this.primHandler.makeStString(S);return F.handle=!0,this.interpreterProxy.popthenPush(y+1,F),!0},primitiveConnect:function(y){return 5===y&&(this.interpreterProxy.popthenPush(y+1,0),!0)},primitiveDestroy:function(y){return 1===y&&(this.interpreterProxy.popthenPush(y+1,1),!0)},primitiveGetIntProperty:function(y){return 2===y&&void 0!==this.interpreterProxy.stackObjectValue(1).handle&&(S=this.interpreterProxy.stackIntegerValue(0)===this.SQSSL_PROP_CERTSTATE?this.SQSSL_OK:0,this.interpreterProxy.popthenPush(y+1,S),!0);var S},primitiveSetStringProperty:function(y){return 3===y&&void 0!==this.interpreterProxy.stackObjectValue(2).handle&&(this.interpreterProxy.pop(y),!0)},primitiveGetStringProperty:function(y){return 2===y&&void 0!==this.interpreterProxy.stackObjectValue(1).handle&&(S=this.interpreterProxy.stackIntegerValue(0)===this.SQSSL_PROP_PEERNAME?this.primHandler.makeStString("*"):this.interpreterProxy.nilObject(),this.interpreterProxy.popthenPush(y+1,S),!0);var S},primitiveEncrypt:function(y){if(5!==y)return!1;if(void 0===this.interpreterProxy.stackObjectValue(4).handle)return!1;var S=this.interpreterProxy.stackObjectValue(3),F=(this.interpreterProxy.stackIntegerValue(2),this.interpreterProxy.stackIntegerValue(1));return this.interpreterProxy.stackObjectValue(0).bytes=S.bytes,this.interpreterProxy.popthenPush(y+1,F),!0},primitiveDecrypt:function(y){if(5!==y)return!1;if(void 0===this.interpreterProxy.stackObjectValue(4).handle)return!1;var S=this.interpreterProxy.stackObjectValue(3),F=(this.interpreterProxy.stackIntegerValue(2),this.interpreterProxy.stackIntegerValue(1));return this.interpreterProxy.stackObjectValue(0).bytes=S.bytes,this.interpreterProxy.popthenPush(y+1,F),!0}}}function registerSqueakSSL(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("SqueakSSL",SqueakSSL()):self.setTimeout(registerSqueakSSL,100)}function TGb(y,S){return y-(F=y,P=S,(0|Math.floor(F/P))*S)|0;var F,P}function $Gb(){return ZGb}function _Gb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe;if(y=YGb.stackValue(3),S=YGb.stackInt16Array(2),F=YGb.stackIntegerValue(1),P=YGb.stackIntegerValue(0),ce=YGb.fetchInt32ArrayofObject(7,y),fe=YGb.fetchInt32ArrayofObject(8,y),le=YGb.fetchIntegerofObject(9,y),ne=YGb.fetchIntegerofObject(10,y),se=YGb.fetchIntegerofObject(11,y),oe=YGb.fetchInt16ArrayofObject(12,y),ue=YGb.fetchInt16ArrayofObject(13,y),YGb.failed())return null;for(re=F;re<=F+P-1;re++){for(H=J=0,ae=1;ae<=le;ae++)(Q=se-ce[ae-1])<1&&(Q+=ne),H+=(ie=fe[ae-1])*oe[Q-1],J+=ie*ue[Q-1];32767<(te=S[(ee=2*re-1)-1]+(H>>15))&&(te=32767),te<-32767&&(te=-32767),S[ee-1]=te,oe[se-1]=te,32767<(te=S[++ee-1]+(J>>15))&&(te=32767),te<-32767&&(te=-32767),S[ee-1]=te,ue[se-1]=te,se=TGb(se,ne)+1}if(YGb.failed())return null;YGb.storeIntegerofObjectwithValue(11,y,se),YGb.pop(3)}function aHb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me;if(y=YGb.stackValue(5),S=YGb.stackIntegerValue(4),F=YGb.stackInt16Array(3),P=YGb.stackIntegerValue(2),H=YGb.stackIntegerValue(1),J=YGb.stackIntegerValue(0),he=YGb.fetchIntegerofObject(3,y),pe=YGb.fetchIntegerofObject(4,y),de=YGb.fetchIntegerofObject(5,y),ne=YGb.fetchIntegerofObject(7,y),me=YGb.fetchInt16ArrayofObject(8,y),be=YGb.fetchIntegerofObject(9,y),ue=YGb.fetchIntegerofObject(10,y),le=YGb.fetchIntegerofObject(11,y),oe=YGb.fetchIntegerofObject(14,y),ce=YGb.fetchIntegerofObject(15,y),fe=YGb.fetchIntegerofObject(16,y),YGb.failed())return null;for(Q=0!==oe&&0!==fe,te=P+S-1,se=P;se<=te;se++)ae=he*me[ue>>15]>>15,Q?(re=oe*me[ce>>15],(ce=TGb(ce+fe,be))<0&&(ce+=be),(ue=TGb(ue+le+re,be))<0&&(ue+=be)):ue=TGb(ue+le,be),0<H&&(32767<(ie=F[(ee=2*se-1)-1]+(ae*H>>15))&&(ie=32767),ie<-32767&&(ie=-32767),F[ee-1]=ie),0<J&&(32767<(ie=F[(ee=2*se)-1]+(ae*J>>15))&&(ie=32767),ie<-32767&&(ie=-32767),F[ee-1]=ie),0!==pe&&(he+=pe,(0<pe&&de<=he||pe<0&&he<=de)&&(he=de,pe=0));if(ne-=S,YGb.failed())return null;YGb.storeIntegerofObjectwithValue(3,y,he),YGb.storeIntegerofObjectwithValue(4,y,pe),YGb.storeIntegerofObjectwithValue(7,y,ne),YGb.storeIntegerofObjectwithValue(10,y,ue),YGb.storeIntegerofObjectwithValue(15,y,ce),YGb.pop(5)}function bHb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke,ge,ye,Se,Fe;if(y=YGb.stackValue(5),S=YGb.stackIntegerValue(4),F=YGb.stackInt16Array(3),P=YGb.stackIntegerValue(2),H=YGb.stackIntegerValue(1),J=YGb.stackIntegerValue(0),ye=YGb.fetchIntegerofObject(3,y),Se=YGb.fetchIntegerofObject(4,y),Fe=YGb.fetchIntegerofObject(5,y),fe=YGb.fetchIntegerofObject(7,y),be=YGb.fetchIntegerofObject(8,y),pe=YGb.fetchInt16ArrayofObject(10,y),me=YGb.fetchInt16ArrayofObject(11,y),he=YGb.fetchIntegerofObject(16,y),de=YGb.fetchIntegerofObject(17,y),ge=YGb.fetchIntegerofObject(18,y),ve=YGb.fetchIntegerofObject(19,y),ke=YGb.fetchIntegerofObject(20,y),YGb.failed())return null;for(re=pe!==me,Q=H*ye>>15,ee=J*ye>>15,te=2*P-1,ie=P+S-1,ce=P;ce<=ie;ce++){if(de<(le=(ve+=ke)>>9)&&be<fe&&(le=(ve-=ge)>>9),(ne=le+1)>he){if(he<le)return fe=0,YGb.failed()||(YGb.storeIntegerofObjectwithValue(3,y,ye),YGb.storeIntegerofObjectwithValue(4,y,Se),YGb.storeIntegerofObjectwithValue(7,y,fe),YGb.storeIntegerofObjectwithValue(19,y,ve),YGb.popthenPush(6,null)),null;ne=0===ge?le:1+(ve-ge>>9)}se=ve&UGb,oe=ae=pe[le-1]*(VGb-se)+pe[ne-1]*se>>9,re&&(oe=me[le-1]*(VGb-se)+me[ne-1]*se>>9),0<H&&(32767<(ue=F[te-1]+(Q*ae>>15))&&(ue=32767),ue<-32767&&(ue=-32767),F[te-1]=ue),++te,0<J&&(32767<(ue=F[te-1]+(ee*oe>>15))&&(ue=32767),ue<-32767&&(ue=-32767),F[te-1]=ue),++te,0!==Se&&(ye+=Se,(0<Se&&Fe<=ye||Se<0&&ye<=Fe)&&(ye=Fe,Se=0),Q=H*ye>>15,ee=J*ye>>15)}if(fe-=S,YGb.failed())return null;YGb.storeIntegerofObjectwithValue(3,y,ye),YGb.storeIntegerofObjectwithValue(4,y,Se),YGb.storeIntegerofObjectwithValue(7,y,fe),YGb.storeIntegerofObjectwithValue(19,y,ve),YGb.pop(5)}function cHb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de;if(y=YGb.stackValue(5),S=YGb.stackIntegerValue(4),F=YGb.stackInt16Array(3),P=YGb.stackIntegerValue(2),H=YGb.stackIntegerValue(1),J=YGb.stackIntegerValue(0),he=YGb.fetchIntegerofObject(3,y),pe=YGb.fetchIntegerofObject(4,y),de=YGb.fetchIntegerofObject(5,y),oe=YGb.fetchIntegerofObject(7,y),ue=YGb.fetchInt16ArrayofObject(8,y),le=YGb.fetchIntegerofObject(9,y),ce=YGb.fetchIntegerofObject(10,y),fe=YGb.fetchIntegerofObject(11,y),YGb.failed())return null;for(te=P+S-1,se=ae=le,ne=P;ne<=te;ne++)fe<=(ae=se+ce)&&(ae=WGb+(ae-fe)),Q=ue[(se>>15)-1]+ue[(ae>>15)-1]>>1,ie=(ue[(se>>15)-1]=Q)*he>>15,se=ae,0<H&&(32767<(re=F[(ee=2*ne-1)-1]+(ie*H>>15))&&(re=32767),re<-32767&&(re=-32767),F[ee-1]=re),0<J&&(32767<(re=F[(ee=2*ne)-1]+(ie*J>>15))&&(re=32767),re<-32767&&(re=-32767),F[ee-1]=re),0!==pe&&(he+=pe,(0<pe&&de<=he||pe<0&&he<=de)&&(he=de,pe=0));if(le=ae,oe-=S,YGb.failed())return null;YGb.storeIntegerofObjectwithValue(3,y,he),YGb.storeIntegerofObjectwithValue(4,y,pe),YGb.storeIntegerofObjectwithValue(7,y,oe),YGb.storeIntegerofObjectwithValue(9,y,le),YGb.pop(5)}function dHb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de;if(y=YGb.stackValue(5),S=YGb.stackIntegerValue(4),F=YGb.stackInt16Array(3),P=YGb.stackIntegerValue(2),H=YGb.stackIntegerValue(1),J=YGb.stackIntegerValue(0),he=YGb.fetchIntegerofObject(3,y),pe=YGb.fetchIntegerofObject(4,y),de=YGb.fetchIntegerofObject(5,y),ne=YGb.fetchIntegerofObject(7,y),ue=YGb.fetchInt16ArrayofObject(8,y),le=YGb.fetchIntegerofObject(10,y),fe=YGb.fetchIntegerofObject(11,y),oe=YGb.fetchIntegerofObject(12,y),ce=YGb.fetchIntegerofObject(13,y),YGb.failed())return null;for(ee=P+S-1,te=P,se=oe+(fe>>>16);se<=le&&te<=ee;)ae=ue[se-1]*he>>15,0<H&&(32767<(ie=F[(Q=2*te-1)-1]+(ae*H>>15))&&(ie=32767),ie<-32767&&(ie=-32767),F[Q-1]=ie),0<J&&(32767<(ie=F[(Q=2*te)-1]+(ae*J>>15))&&(ie=32767),ie<-32767&&(ie=-32767),F[Q-1]=ie),0!==pe&&(he+=pe,(0<pe&&de<=he||pe<0&&he<=de)&&(he=de,pe=0)),XGb<=(fe+=ce)&&(oe+=re=fe>>>16,fe-=re<<16),se=oe+(fe>>>16),++te;if(ne-=S,YGb.failed())return null;YGb.storeIntegerofObjectwithValue(3,y,he),YGb.storeIntegerofObjectwithValue(4,y,pe),YGb.storeIntegerofObjectwithValue(7,y,ne),YGb.storeIntegerofObjectwithValue(11,y,fe),YGb.storeIntegerofObjectwithValue(12,y,oe),YGb.pop(5)}function eHb(y){return 0!=((YGb=y).majorVersion()==QGb)&&YGb.minorVersion()>=RGb}function yJb(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function zJb(y,S){return 0|Math.floor(y/S)}function DJb(y){return BJb.success(BJb.isWords(y)),BJb.failed()?0:y.words}function EJb(){return CJb}function FJb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce;if(re=BJb.stackValue(4),P=BJb.stackValue(3),ne=BJb.stackIntegerValue(2),Q=BJb.stackIntegerValue(1),S=BJb.stackIntegerValue(0),te=DJb(re),F=DJb(P),BJb.success(yJb(re)===yJb(P)),BJb.success(yJb(re)===ne*Q),BJb.failed())return null;for(y=(2*S+1)*(2*S+1),le=0;le<=Q-1;le++)for((ae=le-S)<0&&(ae=0),Q<=(J=le+S)&&(J=Q-1),oe=0;oe<=ne-1;oe++){for((ie=oe-S)<0&&(ie=0),ne<=(H=oe+S)&&(H=ne-1),se=0,ce=ae;ce<=J;ce++)for(ee=ce*ne,ue=ie;ue<=H;ue++)se+=te[ee+ue];F[le*ne+oe]=zJb(se,y)}BJb.pop(5)}function GJb(){var y,S,F,P,H;if(F=BJb.stackValue(1),P=BJb.stackIntegerValue(0),S=DJb(F),H=yJb(F),BJb.failed())return null;for(y=0;y<=H-1;y++)S[y]=S[y]*P>>>10;BJb.pop(2)}function HJb(){var y,S,F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he;if(oe=BJb.stackValue(6),F=BJb.stackValue(5),ue=BJb.stackIntegerValue(4),P=BJb.stackIntegerValue(3),Q=BJb.stackIntegerValue(2),te=BJb.stackIntegerValue(1),ae=BJb.stackIntegerValue(0),se=DJb(oe),y=DJb(F),BJb.success(yJb(F)===ue*P),BJb.success(yJb(F)===yJb(oe)*Q*Q),BJb.failed())return null;for((re=0)<(4&te)&&(re+=65536),0<(2&te)&&(re+=256),0<(1&te)&&++re,ne=-1,ce=0;ce<=zJb(P,Q)-1;ce++)for(le=0;le<=zJb(ue,Q)-1;le++)for(fe=se[++ne],255<(H=(he=ae)<0?he<-31?0:fe>>>0-he:31<he?0:fe<<he)&&(H=255),ee=H<=0?1:H*re,ie=J=(ce*ue+le)*Q;ie<=J+(Q-1)*ue;ie+=ue)for(S=ie;S<=ie+Q-1;S++)y[S]=ee;BJb.pop(7)}function IJb(y){return 0!=((BJb=y).majorVersion()==wJb)&&BJb.minorVersion()>=xJb}function IKb(y){return"number"==typeof y?$Kb.classSmallInteger():y.sqClass}function JKb(y){return y.pointers?y.pointers.length:y.words?y.words.length:y.bytes?y.bytes.length:0}function KKb(y){return y.bytes?y.bytes.length:y.words?4*y.words.length:0}function MKb(y,S){return y-(F=y,P=S,(0|Math.floor(F/P))*S)|0;var F,P}function NKb(y,S){return 31<S?0:y<<S}function ILb(y,S,F){var P;if(hLb[y+F]!==hLb[S+F])return 0;if(hLb[y+F-1]!==hLb[S+F-1])return 0;if(hLb[y]!==hLb[S])return 0;if(hLb[y+1]!==hLb[S+1])return 1;for(P=2;P<UKb&&hLb[y+P]===hLb[S+P];)++P;return P}function LLb(y){var S;for(S=IKb(y);!S.isNil&&7<=S.classInstSize();)S=S.superclass();return!S.isNil&&(bLb=S.classInstSize(),1)}function MLb(y){return zLb[wLb]=y,oLb[wLb]=0,xLb[y]++,++wLb===yLb||0==(4095&wLb)&&aMb()}function NLb(y,S){var F,P;return zLb[wLb]=y-VKb,oLb[wLb]=S,P=BLb[y-VKb],xLb[P]++,F=S<257?mLb[S-1]:mLb[256+(S-1>>>7)],nLb[F]++,++ALb,++wLb===yLb||0==(4095&wLb)&&aMb()}function OLb(y,S,F,P,H){var J,Q,ee,te,re,ie,ae;if(ae=S<<16|F,UKb<=S)return ae;if(!(0<(ee=y-(ie=rLb[cMb(y+VKb-1)]))&&ee<RKb))return ae;for(Q=P,re=RKb<y?y-RKb:0,J=S;;){if(te=ILb(y,ie,J),CLb<y+te&&(te=CLb-y),te===VKb&&RKb>>2<y-ie&&(te=VKb-1),J<te){if(ae=te<<16|ie,UKb<=(J=te))return ae;if(H<J)return ae}if(!(0<--Q))return ae;if((ie=sLb[ie&WKb])<=re)return ae}}function PLb(){return _Kb}function QLb(y){var S;tLb=cMb(y+VKb-1),S=rLb[tLb],rLb[tLb]=y,sLb[y&WKb]=S}function TLb(y,S){if(!(0<=S&&NKb(1,y)>S))return $Kb.primitiveFail();for(eLb|=NKb(S,fLb),fLb+=y;8<=fLb&&CLb<iLb;)hLb[CLb]=255&eLb,++CLb,eLb>>>=8,fLb-=8}function ULb(){var y,S,F,P,H;return 3!==$Kb.methodArgumentCount()?$Kb.primitiveFail():(S=$Kb.stackIntegerValue(0),y=$Kb.stackIntegerValue(1),F=$Kb.stackIntegerValue(2),P=$Kb.stackObjectValue(3),$Kb.failed()?null:function(y){var S;if($Kb.isPointers(y)&&15<=JKb(y)&&(S=$Kb.fetchPointerofObject(0,y),$Kb.isBytes(S))){if(0===bLb){if(!LLb(y))return;if(JKb(y)<bLb+5)return void(bLb=0)}if(hLb=S.bytes,iLb=KKb(S),CLb=$Kb.fetchIntegerofObject(1,y),DLb=$Kb.fetchIntegerofObject(2,y),S=$Kb.fetchPointerofObject(bLb+0,y),$Kb.isWords(S)&&JKb(S)===QKb&&(rLb=S.words,S=$Kb.fetchPointerofObject(bLb+1,y),$Kb.isWords(S)&&JKb(S)===XKb&&(sLb=S.words,tLb=$Kb.fetchIntegerofObject(bLb+2,y),gLb=$Kb.fetchIntegerofObject(bLb+3,y),S=$Kb.fetchPointerofObject(bLb+5,y),$Kb.isBytes(S)&&(yLb=JKb(S),zLb=S.bytes,S=$Kb.fetchPointerofObject(bLb+6,y),$Kb.isWords(S)&&JKb(S)>=yLb&&(oLb=S.words,S=$Kb.fetchPointerofObject(bLb+7,y),$Kb.isWords(S)&&JKb(S)===TKb&&(xLb=S.words,S=$Kb.fetchPointerofObject(bLb+8,y),$Kb.isWords(S)&&JKb(S)===SKb))))))return nLb=S.words,wLb=$Kb.fetchIntegerofObject(bLb+9,y),ALb=$Kb.fetchIntegerofObject(bLb+10,y),!$Kb.failed()}}(P)?(H=function(y,S,F){var P,H,J,Q,ee,te,re,ie,ae;if(y<gLb)return!1;if(yLb<=wLb)return!0;for(H=!1,J=gLb;J<=y;){if(H||(re=OLb(J,VKb-1,J,S,F),QLb(J),ee=65535&re,Q=re>>>16),ae=65535&(re=OLb(J+1,Q,ee,S,F)),(ie=re>>>16)<=Q&&VKb<=Q){for(P=NLb(Q,J-ee),te=1;te<=Q-1;te++)QLb(++J);H=!1,++J}else P=MLb(hLb[J]),++J<=y&&!P&&(QLb(J),H=!0,ee=ae,Q=ie);if(P)return gLb=J,!0}return gLb=J,!1}(F,y,S),$Kb.failed()||($Kb.storeIntegerofObjectwithValue(bLb+2,P,tLb),$Kb.storeIntegerofObjectwithValue(bLb+3,P,gLb),$Kb.storeIntegerofObjectwithValue(bLb+9,P,wLb),$Kb.storeIntegerofObjectwithValue(bLb+10,P,ALb)),void($Kb.failed()||($Kb.pop(4),$Kb.pushBool(H)))):$Kb.primitiveFail())}function VLb(){var y,S,F,P,H,J;if(2!==$Kb.methodArgumentCount())return $Kb.primitiveFail();if(y=$Kb.stackIntegerValue(0),P=$Kb.stackObjectValue(1),$Kb.failed())return null;if(!$Kb.isWords(P))return $Kb.primitiveFail();for(J=JKb(P),H=P.wordsAsInt32Array(),F=0;F<=J-1;F++)S=H[F],H[F]=y<=S?S-y:0;$Kb.pop(2)}function WLb(){var y,S;if(2!==$Kb.methodArgumentCount())return $Kb.primitiveFail();if(y=$Kb.stackValue(0),!$Kb.isWords(y))return $Kb.primitiveFail();if(kLb=y.words,lLb=JKb(y),y=$Kb.stackValue(1),!$Kb.isWords(y))return $Kb.primitiveFail();if(uLb=y.words,vLb=JKb(y),S=$Kb.stackValue(2),!$Kb.isPointers(S))return $Kb.primitiveFail();if(0===aLb){if(!function(y){var S;for(S=IKb(y);!S.isNil&&13<=S.classInstSize();)S=S.superclass();return!S.isNil&&(aLb=S.classInstSize(),1)}(S))return $Kb.primitiveFail();if(JKb(S)<aLb+8)return aLb=0,$Kb.primitiveFail()}return JKb(S)<aLb+8?$Kb.primitiveFail():(DLb=$Kb.fetchIntegerofObject(2,S),HLb=$Kb.fetchIntegerofObject(aLb+0,S),eLb=$Kb.fetchIntegerofObject(aLb+1,S),fLb=$Kb.fetchIntegerofObject(aLb+2,S),GLb=$Kb.fetchIntegerofObject(aLb+4,S),FLb=$Kb.fetchIntegerofObject(aLb+5,S),$Kb.failed()?null:(--DLb,--GLb,--FLb,y=$Kb.fetchPointerofObject(0,S),$Kb.isBytes(y)?(hLb=y.bytes,iLb=KKb(y),y=$Kb.fetchPointerofObject(aLb+3,S),$Kb.isBytes(y)?(ELb=y.bytes,function(){var y,S,F,P,H,J,Q,ee,te,re,ie;for(J=iLb-1;DLb<J&&GLb<=FLb;)if(ee=eLb,Q=fLb,te=GLb,(ie=dMb(uLb,vLb))<256)hLb[++DLb]=ie;else{if(256===ie)return HLb&=ZKb;if(H=65535&ie,0<(F=(ie>>>16)-1)&&(H+=fMb(F)),y=65535&(ie=dMb(kLb,lLb)),0<(F=ie>>>16)&&(y+=fMb(F)),J<=DLb+H)return eLb=ee,fLb=Q,GLb=te;for(re=(S=DLb)-y,P=1;P<=H;P++)hLb[S+P]=hLb[re+P];DLb+=H}}(),void($Kb.failed()||($Kb.storeIntegerofObjectwithValue(2,S,DLb+1),$Kb.storeIntegerofObjectwithValue(aLb+0,S,HLb),$Kb.storeIntegerofObjectwithValue(aLb+1,S,eLb),$Kb.storeIntegerofObjectwithValue(aLb+2,S,fLb),$Kb.storeIntegerofObjectwithValue(aLb+4,S,GLb+1),$Kb.pop(2)))):$Kb.primitiveFail()):$Kb.primitiveFail()))}function XLb(){var y,S,F,P,H,J,Q,ee;if(4!==$Kb.methodArgumentCount())return $Kb.primitiveFail();if(F=$Kb.stackObjectValue(0),ee=$Kb.stackIntegerValue(1),Q=$Kb.stackIntegerValue(2),y=$Kb.positive32BitValueOf($Kb.stackValue(3)),$Kb.failed())return 0;if(!($Kb.isBytes(F)&&Q<=ee&&0<Q))return $Kb.primitiveFail();if(!(ee<=KKb(F)))return $Kb.primitiveFail();for(S=F.bytes,--ee,H=65535&y,J=y>>>16&65535,P=--Q;P<=ee;P++)H=MKb(H+S[P],65521),J=MKb(J+H,65521);y=(J<<16)+H,$Kb.popthenPush(5,$Kb.positive32BitIntegerFor(y))}function YLb(){var y,S,F,P,H,J;if(4!==$Kb.methodArgumentCount())return $Kb.primitiveFail();if(S=$Kb.stackObjectValue(0),J=$Kb.stackIntegerValue(1),H=$Kb.stackIntegerValue(2),F=$Kb.positive32BitValueOf($Kb.stackValue(3)),$Kb.failed())return 0;if(!($Kb.isBytes(S)&&H<=J&&0<H))return $Kb.primitiveFail();if(!(J<=KKb(S)))return $Kb.primitiveFail();for(y=S.bytes,--J,P=--H;P<=J;P++)F=jLb[255&(F^y[P])]^F>>>8;$Kb.popthenPush(5,$Kb.positive32BitIntegerFor(F))}function ZLb(){var y,S,F,P,H,J;return 4!==$Kb.methodArgumentCount()?$Kb.primitiveFail():(S=$Kb.stackObjectValue(0),P=$Kb.stackObjectValue(1),y=$Kb.stackObjectValue(2),F=$Kb.stackObjectValue(3),H=$Kb.stackObjectValue(4),$Kb.failed()?null:function(y){var S;if(0===bLb){if(!LLb(y))return;if(JKb(y)<bLb+3)return void(bLb=0)}return $Kb.isPointers(y)&&JKb(y)>=bLb+3&&(S=$Kb.fetchPointerofObject(0,y),$Kb.isBytes(S)?(hLb=S.bytes,iLb=KKb(S),CLb=$Kb.fetchIntegerofObject(1,y),DLb=$Kb.fetchIntegerofObject(2,y),eLb=$Kb.fetchIntegerofObject(bLb+0,y),fLb=$Kb.fetchIntegerofObject(bLb+1,y),!$Kb.failed()):$Kb.primitiveFail())}(H)&&$Kb.isPointers(S)&&2<=JKb(S)&&$Kb.isPointers(P)&&2<=JKb(P)&&$Kb.isPointers(F)&&3<=JKb(F)&&$Kb.isPointers(y)&&3<=JKb(y)?(J=function(y,S,F,P){var H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he;if(fe=$Kb.fetchPointerofObject(0,y),!((ue=$Kb.fetchIntegerofObject(1,y))<=(oe=$Kb.fetchIntegerofObject(2,y))&&$Kb.isBytes(fe)&&oe<=KKb(fe)))return $Kb.primitiveFail();if(se=fe.bytes,fe=$Kb.fetchPointerofObject(0,S),!($Kb.isWords(fe)&&oe<=JKb(fe)&&$Kb.fetchIntegerofObject(1,S)===ue&&$Kb.fetchIntegerofObject(2,S)===oe))return $Kb.primitiveFail();if(Q=fe.words,fe=$Kb.fetchPointerofObject(0,F),!$Kb.isWords(fe))return $Kb.primitiveFail();if(ne=JKb(fe),le=fe.words,fe=$Kb.fetchPointerofObject(1,F),!$Kb.isWords(fe)||ne!==JKb(fe))return $Kb.primitiveFail();if(ce=fe.words,fe=$Kb.fetchPointerofObject(0,P),!$Kb.isWords(fe))return $Kb.primitiveFail();if(te=JKb(fe),ee=fe.words,fe=$Kb.fetchPointerofObject(1,P),!$Kb.isWords(fe)||te!==JKb(fe))return $Kb.primitiveFail();for(re=fe.words,TLb(0,0),he=0;ue<oe&&CLb+4<iLb;)if(ae=se[ue],J=Q[ue],++ue,0===J){if(++he,!(ae<ne))return $Kb.primitiveFail();TLb(le[ae],ce[ae])}else{if(he=he+ae+VKb,!(ae<256))return $Kb.primitiveFail();if(!((H=BLb[ae])<ne))return $Kb.primitiveFail();if(TLb(le[H],ce[H]),0!==(ie=qLb[H-257])&&TLb(ie,ae-=dLb[H-257]),!(--J<32768))return $Kb.primitiveFail();if(!((H=J<256?mLb[J]:mLb[256+(J>>>7)])<te))return $Kb.primitiveFail();TLb(ee[H],re[H]),0!==(ie=pLb[H])&&TLb(ie,J-=cLb[H])}return $Kb.failed()?null:($Kb.storeIntegerofObjectwithValue(1,y,ue),$Kb.storeIntegerofObjectwithValue(1,S,ue),he)}(F,y,P,S),$Kb.failed()||($Kb.storeIntegerofObjectwithValue(1,H,CLb),$Kb.storeIntegerofObjectwithValue(bLb+0,H,eLb),$Kb.storeIntegerofObjectwithValue(bLb+1,H,fLb)),void($Kb.failed()||($Kb.pop(5),$Kb.pushInteger(J)))):$Kb.primitiveFail())}function _Lb(y){return 0!=(($Kb=y).majorVersion()==GKb)&&$Kb.minorVersion()>=HKb}function aMb(){var y;return wLb===yLb||0==(4095&wLb)&&!(10*ALb<=wLb)&&!((y=wLb-ALb)<=ALb)&&4*y<=ALb}function cMb(y){return S=hLb[y],(tLb<<5^S)&PKb;var S}function dMb(y,S){var F,P,H,J;if(F=y[0]>>>24,YKb<F)return $Kb.primitiveFail(),0;for(H=2;;){if(S<=(P=H+fMb(F)-1))return $Kb.primitiveFail(),0;if(0==(1056964608&(J=y[P])))return J;if(H=65535&J,YKb<(F=J>>>24&255))return $Kb.primitiveFail(),0}return 0}function fMb(y){for(var S,F,P;fLb<y;)F=ELb[++GLb],eLb+=NKb(F,fLb),fLb+=8;return S=eLb&NKb(1,y)-1,eLb=31<(P=y)?0:eLb>>>P,fLb-=y,S}Object.extend||(Object.extend=function(y){for(var S=1;S<arguments.length;S++)if("object"==typeof arguments[S])for(var F in arguments[S])y[F]=arguments[S][F]}),Function.prototype.subclass||(Function.prototype.subclass=function(y){function t(){return this.initialize&&this.initialize.apply(this,arguments),this}function r(){}r.prototype=this.prototype,t.prototype=new r;for(var S=1;S<arguments.length;S++)Object.extend(t.prototype,arguments[S]);var F=y.split("."),P=F.pop();return F.reduce((function(y,S){return y[S]||(y[S]={}),y[S]}),self)[P]=t}),Object.extend(Squeak,"version",{vmVersion:"SqueakJS 1.1.0",vmDate:"2023-10-23",vmBuild:"unknown",vmPath:"unknown",vmFile:"vm.js",vmMakerVersion:"[VMMakerJS-bf.17 VMMaker-bf.353]",vmInterpreterVersion:"JSInterpreter VMMaker.js-codefrau.1",platformName:"JS",platformSubtype:"unknown",osVersion:"unknown",windowSystem:"unknown"},"object header",{HeaderTypeMask:3,HeaderTypeSizeAndClass:0,HeaderTypeClass:1,HeaderTypeFree:2,HeaderTypeShort:3},"special objects",{splOb_NilObject:0,splOb_FalseObject:1,splOb_TrueObject:2,splOb_SchedulerAssociation:3,splOb_ClassBitmap:4,splOb_ClassInteger:5,splOb_ClassString:6,splOb_ClassArray:7,splOb_SmalltalkDictionary:8,splOb_ClassFloat:9,splOb_ClassMethodContext:10,splOb_ClassBlockContext:11,splOb_ClassPoint:12,splOb_ClassLargePositiveInteger:13,splOb_TheDisplay:14,splOb_ClassMessage:15,splOb_ClassCompiledMethod:16,splOb_TheLowSpaceSemaphore:17,splOb_ClassSemaphore:18,splOb_ClassCharacter:19,splOb_SelectorDoesNotUnderstand:20,splOb_SelectorCannotReturn:21,splOb_ProcessSignalingLowSpace:22,splOb_SpecialSelectors:23,splOb_CharacterTable:24,splOb_SelectorMustBeBoolean:25,splOb_ClassByteArray:26,splOb_ClassProcess:27,splOb_CompactClasses:28,splOb_TheTimerSemaphore:29,splOb_TheInterruptSemaphore:30,splOb_FloatProto:31,splOb_SelectorCannotInterpret:34,splOb_MethodContextProto:35,splOb_ClassBlockClosure:36,splOb_ClassFullBlockClosure:37,splOb_ExternalObjectsArray:38,splOb_ClassPseudoContext:39,splOb_ClassTranslatedMethod:40,splOb_TheFinalizationSemaphore:41,splOb_ClassLargeNegativeInteger:42,splOb_ClassExternalAddress:43,splOb_ClassExternalStructure:44,splOb_ClassExternalData:45,splOb_ClassExternalFunction:46,splOb_ClassExternalLibrary:47,splOb_SelectorAboutToReturn:48,splOb_SelectorRunWithIn:49,splOb_SelectorAttemptToAssign:50,splOb_PrimErrTableIndex:51,splOb_ClassAlien:52,splOb_InvokeCallbackSelector:53,splOb_ClassUnsafeAlien:54,splOb_ClassWeakFinalizer:55},"known classes",{AdditionalMethodState_selector:1,Class_superclass:0,Class_mdict:1,Class_format:2,Class_instVars:null,Class_name:6,ClassBinding_value:1,Context_sender:0,Context_instructionPointer:1,Context_stackPointer:2,Context_method:3,Context_closure:4,Context_receiver:5,Context_tempFrameStart:6,Context_smallFrameSize:16,Context_largeFrameSize:56,BlockContext_caller:0,BlockContext_argumentCount:3,BlockContext_initialIP:4,BlockContext_home:5,Closure_outerContext:0,Closure_startpc:1,Closure_numArgs:2,Closure_firstCopiedValue:3,ClosureFull_method:1,ClosureFull_receiver:3,ClosureFull_firstCopiedValue:4,Stream_array:0,Stream_position:1,Stream_limit:2,ProcSched_processLists:0,ProcSched_activeProcess:1,Link_nextLink:0,LinkedList_firstLink:0,LinkedList_lastLink:1,Semaphore_excessSignals:2,Mutex_owner:2,Proc_suspendedContext:1,Proc_priority:2,Proc_myList:3,Assn_key:0,Assn_value:1,MethodDict_array:1,MethodDict_selectorStart:2,Message_selector:0,Message_arguments:1,Message_lookupClass:2,Point_x:0,Point_y:1,LargeInteger_bytes:0,LargeInteger_neg:1,WeakFinalizationList_first:0,WeakFinalizerItem_list:0,WeakFinalizerItem_next:1},"constants",{MinSmallInt:-1073741824,MaxSmallInt:1073741823,NonSmallInt:-1342177280,MillisecondClockMask:536870911},"error codes",{PrimNoErr:0,PrimErrGenericFailure:1,PrimErrBadReceiver:2,PrimErrBadArgument:3,PrimErrBadIndex:4,PrimErrBadNumArgs:5,PrimErrInappropriate:6,PrimErrUnsupported:7,PrimErrNoModification:8,PrimErrNoMemory:9,PrimErrNoCMemory:10,PrimErrNotFound:11,PrimErrBadMethod:12,PrimErrNamedInternal:13,PrimErrObjectMayMove:14,PrimErrLimitExceeded:15,PrimErrObjectIsPinned:16,PrimErrWritePastObject:17},"modules",{externalModules:Squeak.externalModules||{},registerExternalModule:function(y,S){this.externalModules[y]=S}},"time",{Epoch:Date.UTC(1901,0,1)+6e4*(new Date).getTimezoneOffset(),EpochUTC:Date.UTC(1901,0,1),totalSeconds:function(){return Math.floor((Date.now()-Squeak.Epoch)/1e3)}},"utils",{bytesAsString:function(y){for(var S=[],F=0;F<y.length;)S.push(String.fromCharCode.apply(null,y.subarray(F,F+=16348)));return S.join("")},word64FromUint32:function(y,S){return y<2097152?4294967296*y+S:4292870144<y?4294967296*(y>>0)+S:[y,S]}}),Object.subclass("Squeak.Object","initialization",{initInstanceOf:function(y,S,F,P){this.sqClass=y,this.hash=F;var H=y.pointers[Squeak.Class_format],J=(H>>1&63)+(H>>10&192)-1;this._format=H>>7&15,this._format<8?6!=this._format?0<J+S&&(this.pointers=this.fillArray(J+S,P)):0<S&&(y.isFloatClass?(this.isFloat=!0,this.float=0):this.words=new Uint32Array(S)):0<S&&(this.bytes=new Uint8Array(S))},initAsClone:function(y,S){this.sqClass=y.sqClass,this.hash=S,this._format=y._format,y.isFloat?(this.isFloat=y.isFloat,this.float=y.float):(y.pointers&&(this.pointers=y.pointers.slice(0)),y.words&&(this.words=new Uint32Array(y.words)),y.bytes&&(this.bytes=new Uint8Array(y.bytes)))},initFromImage:function(y,S,F,P){this.oop=y,this.sqClass=S,this._format=F,this.hash=P},classNameFromImage:function(y,S){var F=y[S[this.oop][Squeak.Class_name]];if(F&&8<=F._format&&F._format<12){var P=S[F.oop],H=F.decodeBytes(P.length,P,0,3&F._format);return Squeak.bytesAsString(H)}return"Class"},renameFromImage:function(y,S,F){var P=this.sqClass<32?y[F[this.sqClass-1]]:y[this.sqClass];if(!P)return this;var H=P.instProto||P.classInstProto(P.classNameFromImage(y,S));if(!H)return this;var J=new H;return J.oop=this.oop,J.sqClass=this.sqClass,J._format=this._format,J.hash=this.hash,J},installFromImage:function(y,S,F,P,H,J){var Q=this.sqClass;this.sqClass=0<Q&&Q<32?y[F[Q-1]]:y[Q];var ee=S[this.oop],te=ee.length;if(this._format<5){if(0<te){var re=ee;this.pointers=this.decodePointers(te,re,y)}}else if(12<=this._format){var ie=this.decodeWords(1,ee,H)[0]>>10&255;re=this.decodeWords(1+ie,ee,H),this.pointers=this.decodePointers(1+ie,re,y),this.bytes=this.decodeBytes(te-(1+ie),ee,1+ie,3&this._format)}else 8<=this._format?0<te&&(this.bytes=this.decodeBytes(te,ee,0,3&this._format)):this.sqClass==P?(this.isFloat=!0,this.float=this.decodeFloat(ee,H,J)):0<te&&(this.words=this.decodeWords(te,ee,H));this.mark=!1},decodePointers:function(y,S,F){for(var P=new Array(y),H=0;H<y;H++){var J=S[H];P[H]=1==(1&J)?J>>1:F[J]||42424242}return P},decodeWords:function(y,S,F){for(var P=new DataView(S.buffer,S.byteOffset),H=new Uint32Array(y),J=0;J<y;J++)H[J]=P.getUint32(4*J,F);return H},decodeBytes:function(y,S,F,P){var H=4*y-P,J=new Uint8Array(S.buffer,S.byteOffset+4*F,H),Q=new Uint8Array(H);return Q.set(J),Q},decodeFloat:function(y,S,F){var P=new DataView(y.buffer,y.byteOffset);if(!S)return P.getFloat64(0,!1);if(F)return P.getFloat64(0,!0);var H=new ArrayBuffer(8),J=new DataView(H);return J.setUint32(0,P.getUint32(4)),J.setUint32(4,P.getUint32(0)),J.getFloat64(0,!0)},fillArray:function(y,S){for(var F=[],P=0;P<y;P++)F[P]=S;return F}},"testing",{isWords:function(){return 6===this._format},isBytes:function(){var y=this._format;return 8<=y&&y<=11},isWordsOrBytes:function(){var y=this._format;return 6==y||8<=y&&y<=11},isPointers:function(){return this._format<=4},isWeak:function(){return 4===this._format},isMethod:function(){return 12<=this._format},sameFormats:function(y,S){return y<8?y===S:(12&y)==(12&S)},sameFormatAs:function(y){return this.sameFormats(this._format,y._format)}},"printing",{toString:function(){return this.sqInstName()},bytesAsString:function(){return this.bytes?Squeak.bytesAsString(this.bytes):""},bytesAsNumberString:function(y){if(!this.bytes)return"";for(var S="0123456789ABCDEF",F=[],P=0,H=this.bytes.length-1;0<=H;H--)F.push(S[this.bytes[H]>>4]),F.push(S[15&this.bytes[H]]),P=256*P+this.bytes[H];var J=y?"-":"",Q=9007199254740991<P?"":"";return J+"16r"+F.join("")+" ("+Q+J+P+"L)"},assnKeyAsString:function(){return this.pointers[Squeak.Assn_key].bytesAsString()},slotNameAt:function(y){var S=this.instSize();return y<=S?this.sqClass.allInstVarNames()[y-1]||"ivar"+(y-1):(y-S).toString()},sqInstName:function(){if(this.isNil)return"nil";if(this.isTrue)return"true";if(this.isFalse)return"false";if(this.isFloat){var y=this.float.toString();return/\./.test(y)||(y+=".0"),y}var S=this.sqClass.className();if(/ /.test(S))return"the "+S;switch(S){case"String":case"ByteString":return"'"+this.bytesAsString()+"'";case"Symbol":case"ByteSymbol":return"#"+this.bytesAsString();case"Point":return this.pointers.join("@");case"Rectangle":return this.pointers.join(" corner: ");case"Association":case"ReadOnlyVariableBinding":return this.pointers.join("->");case"LargePositiveInteger":return this.bytesAsNumberString(!1);case"LargeNegativeInteger":return this.bytesAsNumberString(!0);case"Character":var F=this.pointers?this.pointers[0]:this.hash;return"$"+String.fromCharCode(F)+" ("+F.toString()+")";case"CompiledMethod":return this.methodAsString();case"CompiledBlock":return"[] in "+this.blockOuterCode().sqInstName()}return/^[aeiou]/i.test(S)?"an"+S:"a"+S}},"accessing",{pointersSize:function(){return this.pointers?this.pointers.length:0},bytesSize:function(){return this.bytes?this.bytes.length:0},wordsSize:function(){return this.isFloat?2:this.words?this.words.length:0},instSize:function(){var y=this._format;return 4<y||2===y?0:y<2?this.pointersSize():this.sqClass.classInstSize()},indexableSize:function(y){var S=this._format;return S<2?-1:3===S&&y.vm.isContext(this)&&!y.allowAccessBeyondSP?this.pointers[Squeak.Context_stackPointer]:S<6?this.pointersSize()-this.instSize():S<8?this.wordsSize():S<12?this.bytesSize():this.bytesSize()+4*this.pointersSize()},floatData:function(){var y=new ArrayBuffer(8),S=new DataView(y);return S.setFloat64(0,this.float,!1),S},wordsAsFloat32Array:function(){return this.float32Array||this.words&&(this.float32Array=new Float32Array(this.words.buffer))},wordsAsFloat64Array:function(){return this.float64Array||this.words&&(this.float64Array=new Float64Array(this.words.buffer))},wordsAsInt32Array:function(){return this.int32Array||this.words&&(this.int32Array=new Int32Array(this.words.buffer))},wordsAsInt16Array:function(){return this.int16Array||this.words&&(this.int16Array=new Int16Array(this.words.buffer))},wordsAsUint16Array:function(){return this.uint16Array||this.words&&(this.uint16Array=new Uint16Array(this.words.buffer))},wordsAsUint8Array:function(){return this.uint8Array||this.words&&(this.uint8Array=new Uint8Array(this.words.buffer))},wordsOrBytes:function(){return this.words?this.words:this.uint32Array?this.uint32Array:this.bytes?this.uint32Array=new Uint32Array(this.bytes.buffer,0,this.bytes.length>>>2):null},setAddr:function(y){var S=this.snapshotSize();return this.oop=y+4*S.header,y+4*(S.header+S.body)},snapshotSize:function(){var y=this.isFloat?2:this.words?this.words.length:this.pointers?this.pointers.length:0;return this.bytes&&(y+=this.bytes.length+3>>>2),{header:63<++y?2:this.sqClass.isCompact?0:1,body:y}},addr:function(){return this.oop-4*this.snapshotSize().header},totalBytes:function(){var y=this.snapshotSize();return 4*(y.header+y.body)},writeTo:function(y,S,F){this.bytes&&(this._format|=3&-this.bytes.length);var P=S,H=this.snapshotSize(),J=(15&this._format)<<8|(4095&this.hash)<<17;switch(H.header){case 2:y.setUint32(S,H.body<<2|Squeak.HeaderTypeSizeAndClass),S+=4,y.setUint32(S,this.sqClass.oop|Squeak.HeaderTypeSizeAndClass),S+=4,y.setUint32(S,J|Squeak.HeaderTypeSizeAndClass),S+=4;break;case 1:y.setUint32(S,this.sqClass.oop|Squeak.HeaderTypeClass),S+=4,y.setUint32(S,J|H.body<<2|Squeak.HeaderTypeClass),S+=4;break;case 0:var Q=F.compactClasses.indexOf(this.sqClass)+1;y.setUint32(S,J|Q<<12|H.body<<2|Squeak.HeaderTypeShort),S+=4}if(this.isFloat)y.setFloat64(S,this.float),S+=8;else if(this.words)for(var ee=0;ee<this.words.length;ee++)y.setUint32(S,this.words[ee]),S+=4;else if(this.pointers)for(ee=0;ee<this.pointers.length;ee++)y.setUint32(S,F.objectToOop(this.pointers[ee])),S+=4;if(this.bytes){for(ee=0;ee<this.bytes.length;ee++)y.setUint8(S++,this.bytes[ee]);S+=3&-this.bytes.length}if(S!==P+this.totalBytes())throw Error("written size does not match");return S}},"as class",{classInstFormat:function(){return this.pointers[Squeak.Class_format]>>7&15},classInstSize:function(){var y=this.pointers[Squeak.Class_format];return(y>>10&192)+(y>>1&63)-1},classInstIsBytes:function(){var y=this.classInstFormat();return 8<=y&&y<=11},classInstIsPointers:function(){return this.classInstFormat()<=4},instVarNames:function(){for(var y=3;y<=4;y++){var S=this.pointers[y].pointers;if(S&&S.length&&S[0].bytes)return S.map((function(y){return y.bytesAsString()}))}return[]},allInstVarNames:function(){var y=this.superclass();return y.isNil?this.instVarNames():y.allInstVarNames().concat(this.instVarNames())},superclass:function(){return this.pointers[0]},className:function(){if(!this.pointers)return"_NOTACLASS_";for(var y=6;y<=7;y++)if((P=this.pointers[y])&&P.bytes)return P.bytesAsString();for(var S=5;S<=6;S++){var F=this.pointers[S];if(F&&F.pointers)for(y=6;y<=7;y++){var P;if((P=F.pointers[y])&&P.bytes)return P.bytesAsString()+" class"}}return"_SOMECLASS_"},defaultInst:function(){return Squeak.Object},classInstProto:function(y){if(this.instProto)return this.instProto;var S=this.defaultInst();try{var F=(y=y||this.className()).replace(/[^A-Za-z0-9]/g,"_");F="UndefinedObject"===F?"nil":"True"===F?"true_":"False"===F?"false_":(/^[AEIOU]/.test(F)?"an":"a")+F,(S=new Function("return function "+F+"() {};")()).prototype=this.defaultInst().prototype}catch(y){}return Object.defineProperty(this,"instProto",{value:S}),S}},"as method",{methodSignFlag:function(){return!1},methodNumLits:function(){return this.pointers[0]>>9&255},methodNumArgs:function(){return this.pointers[0]>>24&15},methodPrimitiveIndex:function(){var y=805306879&this.pointers[0];return 511<y?(511&y)+(y>>19):y},methodClassForSuper:function(){return this.pointers[this.methodNumLits()].pointers[Squeak.Assn_value]},methodNeedsLargeFrame:function(){return 0<(131072&this.pointers[0])},methodAddPointers:function(y){this.pointers=y},methodTempCount:function(){return this.pointers[0]>>18&63},methodGetLiteral:function(y){return this.pointers[1+y]},methodGetSelector:function(y){return this.pointers[1+y]},methodAsString:function(){return"aCompiledMethod"}},"as context",{contextHome:function(){return this.contextIsBlock()?this.pointers[Squeak.BlockContext_home]:this},contextIsBlock:function(){return"number"==typeof this.pointers[Squeak.BlockContext_argumentCount]},contextMethod:function(){return this.contextHome().pointers[Squeak.Context_method]},contextSender:function(){return this.pointers[Squeak.Context_sender]},contextSizeWithStack:function(y){if(y&&y.activeContext===this)return y.sp+1;var S=this.pointers[Squeak.Context_stackPointer];return Squeak.Context_tempFrameStart+("number"==typeof S?S:0)}}),Squeak.Object.subclass("Squeak.ObjectSpur","initialization",{initInstanceOf:function(y,S,F,P){this.sqClass=y,this.hash=F;var H=y.pointers[Squeak.Class_format],J=65535&H,Q=H>>16&31;(this._format=Q)<12?Q<10?0<J+S&&(this.pointers=this.fillArray(J+S,P)):0<S&&(y.isFloatClass?(this.isFloat=!0,this.float=0):this.words=new Uint32Array(S)):0<S&&(this.bytes=new Uint8Array(S))},installFromImage:function(y,S,F,P,H,J,Q){var ee=this.sqClass;if(ee<32)throw Error("Invalid class ID: "+ee);if(this.sqClass=F[ee],!this.sqClass)throw Error("Class ID not in class table: "+ee);var te=S[this.oop],re=te.length;switch(this._format){case 0:case 1:case 2:case 3:case 4:case 5:if(0<re){var ie=te;this.pointers=this.decodePointers(re,ie,y,J,Q)}break;case 11:re--,this._format=10;case 10:this.sqClass===P?(this.isFloat=!0,this.float=this.decodeFloat(te,H,!0)):0<re&&(this.words=this.decodeWords(re,te,H));break;case 12:case 13:throw Error("16 bit arrays not supported yet");case 20:case 21:case 22:case 23:re--,this._format-=4;case 16:case 17:case 18:case 19:0<re&&(this.bytes=this.decodeBytes(re,te,0,3&this._format));break;case 28:case 29:case 30:case 31:re--,this._format-=4;case 24:case 25:case 26:case 27:var ae=this.decodeWords(1,te,H)[0]>>(Q?3:1),se=32767&ae,ne=(ie=Q?this.decodeWords64(1+se,te,H):this.decodeWords(1+se,te,H),Q?2*(1+se):1+se);this.pointers=this.decodePointers(1+se,ie,y,J,Q),this.bytes=this.decodeBytes(re-ne,te,ne,3&this._format),Q&&(this.pointers[0]=2147483648&te[1]|ae);break;default:throw Error("Unknown object format: "+this._format)}this.mark=!1},decodeWords64:function(y,S,F){for(var P=new Array(y),H=0;H<y;H++){var J=S[2*H],Q=S[2*H+1];P[H]=Squeak.word64FromUint32(Q,J)}return P},decodePointers:function(y,S,F,P,H){for(var J=new Array(y),Q=0;Q<y;Q++){var ee=S[Q];if("number"!=typeof ee)if(4==(7&ee[1]))J[Q]=this.decodeSmallFloat(ee[0],ee[1],H);else{if(1!=(7&ee[1]))throw 2==(7&ee[1])?Error("Large Immediate Characters not implemented yet"):Error("Large OOPs not implemented yet");J[Q]=H.makeLargeFromSmall(ee[0],ee[1])}else if(1==(1&ee))J[Q]=H?(0<=ee?ee<=8589934591:-8589934592<=ee)?ee/4>>1:H.makeLargeFromSmall((ee-(ee>>>0))/4294967296>>>0,ee>>>0):ee>>1;else if(2==(3&ee)){if(ee<0||8589934591<ee)throw Error("Large Immediate Characters not implemented yet");J[Q]=P(ee>>>(H?3:2))}else H&&4==(7&ee)?J[Q]=this.decodeSmallFloat((ee-(ee>>>0))/4294967296>>>0,ee>>>0,H):(J[Q]=F[ee]||42424242,J[Q])}return J},decodeSmallFloat:function(y,S,F){var P=0,H=0,J=(8&S)<<28;return 0==(y|4294967280&S)?P=J:(P=939524096+(y>>>4)|J,H=S>>>4|(15&y)<<28),F.makeFloat(new Uint32Array([H,P]))},overhead64:function(y){var S=0,F=0,P=0;if(this._format<=5)S=-2&y.length;else if(24<=this._format){var H=1==(1&(S=1+(y[0]>>3&32767))),J=28<=this._format;H&&(S+=J?1:-1),P=y.length/2,F=y.length-S}else P=(F=y.length)/2;return{bytes:4*S,sizeHeader:255<=F&&P<255}},initInstanceOfChar:function(y,S){this.oop=S<<2|2,this.sqClass=y,this.hash=S,this._format=7,this.mark=!0},initInstanceOfFloat:function(y,S){this.sqClass=y,this.hash=0,this._format=10,this.isFloat=!0,this.float=this.decodeFloat(S,!0,!0)},initInstanceOfLargeInt:function(y,S){this.sqClass=y,this.hash=0,this._format=16,this.bytes=new Uint8Array(S)},classNameFromImage:function(y,S){var F=y[S[this.oop][Squeak.Class_name]];if(F&&16<=F._format&&F._format<24){var P=S[F.oop],H=F.decodeBytes(P.length,P,0,7&F._format);return Squeak.bytesAsString(H)}return"Class"},renameFromImage:function(y,S,F){var P=F[this.sqClass];if(!P)return this;var H=P.instProto||P.classInstProto(P.classNameFromImage(y,S));if(!H)return this;var J=new H;return J.oop=this.oop,J.sqClass=this.sqClass,J._format=this._format,J.hash=this.hash,J}},"accessing",{instSize:function(){return this._format<2?this.pointersSize():this.sqClass.classInstSize()},indexableSize:function(y){var S=this._format;return S<2?-1:3===S&&y.vm.isContext(this)?this.pointers[Squeak.Context_stackPointer]:S<6?this.pointersSize()-this.instSize():S<12?this.wordsSize():S<16?this.shortsSize():S<24?this.bytesSize():4*this.pointersSize()+this.bytesSize()},snapshotSize:function(){var y=this.isFloat?2:this.words?this.words.length:this.pointers?this.pointers.length:0;this.bytes&&(y+=this.bytes.length+3>>>2);var S=255<=y?2:0;return y+=1&y,(y+=2)<4&&(y=4),{header:S,body:y}},writeTo:function(y,S,F,P){var H=this.isFloat?2:this.words?this.words.length:this.pointers?this.pointers.length:0;this.bytes&&(H+=this.bytes.length+3>>>2,this._format|=3&-this.bytes.length);var J=S,Q=this._format<<24|4194303&this.sqClass.hash,ee=H<<24|4194303&this.hash;if(255<=H&&(y.setUint32(S,H,F),S+=4,ee=255<<24|4194303&this.hash,y.setUint32(S,ee,F),S+=4),y.setUint32(S,Q,F),S+=4,y.setUint32(S,ee,F),S+=4,this.isFloat)y.setFloat64(S,this.float,F),S+=8;else if(this.words)for(var te=0;te<this.words.length;te++)y.setUint32(S,this.words[te],F),S+=4;else if(this.pointers){var re=0;if(24<=this._format){var ie=this.methodSignFlag()?2147483648:0,ae=this.pointers[0]<<1|1|ie;y.setUint32(S,ae,F),S+=4,re=1}for(te=re;te<this.pointers.length;te++)y.setUint32(S,P(this.pointers[te]),F),S+=4}if(this.bytes){for(te=0;te<this.bytes.length;te++)y.setUint8(S++,this.bytes[te]);S+=3&-this.bytes.length}if((S+=0===H?8:4*(1&H))!==J+this.totalBytes())throw Error("written size does not match");return S}},"testing",{isBytes:function(){var y=this._format;return 16<=y&&y<=23},isPointers:function(){return this._format<=6},isWords:function(){return 10===this._format},isWordsOrBytes:function(){var y=this._format;return 10===y||16<=y&&y<=23},isWeak:function(){return 4===this._format},isMethod:function(){return 24<=this._format},sameFormats:function(y,S){return y<16?y===S:(248&y)==(248&S)}},"as class",{defaultInst:function(){return Squeak.ObjectSpur},classInstFormat:function(){return this.pointers[Squeak.Class_format]>>16&31},classInstSize:function(){return 65535&this.pointers[Squeak.Class_format]},classInstIsBytes:function(){var y=this.classInstFormat();return 16<=y&&y<=23},classInstIsPointers:function(){return this.classInstFormat()<=6},classByteSizeOfInstance:function(y){var S=this.classInstFormat(),F=this.classInstSize();return F+=S<9?y:16<=S?(y+3)/4|0:12<=S?(y+1)/2|0:10<=S?y:2*y,F+=1&F,(F+=255<=F?4:2)<4&&(F=4),4*F}},"as compiled block",{blockOuterCode:function(){return this.pointers[this.pointers.length-1]}},"as method",{methodSignFlag:function(){return this.pointers[0]<0},methodNumLits:function(){return 32767&this.pointers[0]},methodPrimitiveIndex:function(){return 0==(65536&this.pointers[0])?0:this.bytes[1]+256*this.bytes[2]},methodAsString:function(){var y=this.pointers[this.pointers.length-1].pointers[Squeak.ClassBinding_value],S=this.pointers[this.pointers.length-2];return S.pointers&&(S=S.pointers[Squeak.AdditionalMethodState_selector]),y.className()+">>"+S.bytesAsString()}}),Object.subclass("Squeak.Image","about",{about:function(){}},"initializing",{initialize:function(y){this.headRoom=32e6,this.totalMemory=0,this.name=y,this.gcCount=0,this.gcMilliseconds=0,this.pgcCount=0,this.pgcMilliseconds=0,this.gcTenured=0,this.allocationCount=0,this.oldSpaceCount=0,this.youngSpaceCount=0,this.newSpaceCount=0,this.hasNewInstances={}},readFromBuffer:function(y,S,F){console.log("squeak: reading "+this.name+" ("+y.byteLength+" bytes)"),this.startupTime=Date.now();for(var P=new DataView(y),H=!1,J=0,e=function(){var y=P.getUint32(J,H);return J+=4,y},Q=e,ee=4,l=function(S,F){if(F){for(var P=[];P.length<S;)P.push(Q());return P}var H=new Uint32Array(y,J,S*ee/4);return J+=S*ee,H},te=[6501,6502,6504,68e3,68002,68004],re=0,ie=0;H=!H,J=ie,re=Q(),!(0<=te.indexOf(72174&re));)if(H||(ie+=512),512<ie)throw Error("bad image version");var ae=0!=(1&(this.version=re));this.hasClosures=!(0<=[6501,6502,68e3].indexOf(re)),this.isSpur=0!=(16&re);var se=68e3<=re;if(se&&!this.isSpur)throw Error("64 bit non-spur images not supported yet");se&&(Q=function(){var y=P.getUint32(J,!0),S=P.getUint32(J+4,!0);return J+=8,Squeak.word64FromUint32(S,y)},ee=8);var ne=e(),oe=Q(),ue=Q(),le=Q();this.savedHeaderWords=[];for(var ce=0;ce<7;ce++)this.savedHeaderWords.push(e()),se&&ce<3&&e();var fe,he=Q(),pe={},de={},be=ie+ne;if(J=be,this.isSpur){this.oldSpaceBytes=he-16;for(var me=J+he,ve=0,ke=null,ge=0,ye={};J<me;){for(;J<me-16;){var Se=J,Fe=e(),Pe=e(),we=Pe>>>24;255===we&&(we=Fe,Fe=e(),Pe=e()),Me=ve+J-8-be;var Ie=4194303&Fe;if(Le=4194303&Pe,Te=l(we,(Ze=Fe>>>24&31)<10&&0<Ie),J+=se?8*(we<1?1-we:0):4*(we<2?2-we:1&we),32<=Ie){if((Ye=new Squeak.ObjectSpur).initFromImage(Me,Ie,Ze,Le),fe&&(fe.nextObject=Ye),this.oldSpaceCount++,fe=Ye,pe[ue+Me]=Ye,de[Me]=Te,ye[Me]=ge,se){var Oe=Ye.overhead64(Te);ge+=Oe.bytes,Oe.sizeHeader&&(ye[Me]-=8,ge-=8)}}else ge+=J-Se,16!=Ie||ke||(ke=Te),Ie&&(pe[ue+Me]=Te)}if(J!==me-16)throw Error("invalid segment");var _e=e(),Xe=e(),Ce=e();if(e(),0!==Ce){var Ae=4278190080&Xe?4*(16777215&_e):0;me+=Ce,ve+=Ae,ge+=16+Ae,this.oldSpaceBytes+=Ae+Ce}}this.oldSpaceBytes-=ge,this.firstOldObject=pe[ue],this.lastOldObject=Ye,this.lastOldObject.nextObject=null}else{for(;J<be+oe;){var je=0,Ve=0,xe=Q();switch(xe&Squeak.HeaderTypeMask){case Squeak.HeaderTypeSizeAndClass:je=xe>>>2,Ve=Q(),xe=Q();break;case Squeak.HeaderTypeClass:Ve=xe-Squeak.HeaderTypeClass,je=(xe=Q())>>>2&63;break;case Squeak.HeaderTypeShort:je=xe>>>2&63,Ve=xe>>>12&31;break;case Squeak.HeaderTypeFree:throw Error("Unexpected free block")}var Ze,Ye,Me=J-4-be,Le=xe>>>17&4095,Te=l(--je,(Ze=xe>>>8&15)<5);(Ye=new Squeak.Object).initFromImage(Me,Ve,Ze,Le),Ve<32&&(Ye.hash|=268435456),fe&&(fe.nextObject=Ye),this.oldSpaceCount++,fe=Ye,pe[ue+Me]=Ye,de[Me]=Te}this.firstOldObject=pe[ue+4],this.lastOldObject=Ye,this.lastOldObject.nextObject=null,this.oldSpaceBytes=oe}this.totalMemory=this.oldSpaceBytes+this.headRoom;var Be=pe[le],Ne=this.isSpur?this.spurClassTable(pe,de,ke,Be):de[pe[de[Be.oop][Squeak.splOb_CompactClasses]].oop],qe=null;for(Ye=this.firstOldObject,fe=null;Ye;)fe=qe,qe=Ye.renameFromImage(pe,de,Ne),fe?fe.nextObject=qe:this.firstOldObject=qe,pe[ue+Ye.oop]=qe,Ye=Ye.nextObject;this.lastOldObject=qe,this.lastOldObject.nextObject=null;var We=pe[le],Re=de[pe[de[We.oop][Squeak.splOb_CompactClasses]].oop],De=pe[de[We.oop][Squeak.splOb_ClassFloat]];this.isSpur&&(this.initImmediateClasses(pe,de,We),Re=this.spurClassTable(pe,de,ke,We),ae=this.getCharacter.bind(this),this.initSpurOverrides());var Ue=this.firstOldObject,Ke=0,Ee=function(){if(Ue){for(var y=Ke+(this.oldSpaceCount/20|0);Ue&&Ke<y;)Ue.installFromImage(pe,de,Re,De,H,ae,se&&{makeFloat:function(y){return this.instantiateFloat(y)}.bind(this),makeLargeFromSmall:function(y,S){return this.instantiateLargeFromSmall(y,S)}.bind(this)}),Ue=Ue.nextObject,Ke++;return F&&F(Ke/this.oldSpaceCount),!0}return this.specialObjectsArray=We,this.decorateKnownObjects(),this.isSpur?(this.fixSkippedOops(ye),se&&this.fixPCs(),this.ensureFullBlockClosureClass(this.specialObjectsArray,Re)):(this.fixCompiledMethods(),this.fixCompactOops()),!1}.bind(this);if(F)self.setTimeout((function e(){Ee()?self.setTimeout(e,0):S&&S()}),0);else{for(;Ee(););S&&S()}},decorateKnownObjects:function(){var y=this.specialObjectsArray.pointers;if(y[Squeak.splOb_NilObject].isNil=!0,y[Squeak.splOb_TrueObject].isTrue=!0,y[Squeak.splOb_FalseObject].isFalse=!0,y[Squeak.splOb_ClassFloat].isFloatClass=!0,!this.isSpur){this.compactClasses=this.specialObjectsArray.pointers[Squeak.splOb_CompactClasses].pointers;for(var S=0;S<this.compactClasses.length;S++)this.compactClasses[S].isNil||(this.compactClasses[S].isCompact=!0)}Number.prototype.sqInstName||Object.defineProperty(Number.prototype,"sqInstName",{enumerable:!1,value:function(){return this.toString()}})},fixCompactOops:function(){if(!this.isSpur){for(var y=this.firstOldObject,S=0;y;){var F=268435455<y.hash;if(F!=!!y.sqClass.isCompact){var P=0===y.snapshotSize().header;F!=P&&(S+=P?-4:4)}y.hash&=268435455,y.oop+=S,y=y.nextObject}this.oldSpaceBytes+=S}},fixCompiledMethods:function(){if(!(6502<=this.version))for(var y=this.firstOldObject,S=this.specialObjectsArray.pointers[Squeak.splOb_ClassCompiledMethod];y;)y.isMethod()&&(y.sqClass=S),y=y.nextObject},fixSkippedOops:function(y){for(var S=this.firstOldObject;S;)S.oop-=y[S.oop],S=S.nextObject;if((S=this.lastOldObject).addr()+S.totalBytes()!==this.oldSpaceBytes)throw Error("image size doesn't match object sizes")},fixPCs:function(){for(var y=this.specialObjectsArray.pointers[Squeak.splOb_ClassMethodContext],S=Squeak.Context_instructionPointer,F=Squeak.Context_method,P=this.specialObjectsArray.pointers[Squeak.splOb_ClassBlockClosure],H=Squeak.Closure_startpc,J=Squeak.Closure_outerContext,Q=this.firstOldObject;Q;)Q.sqClass===y?Q.pointers[S]-=4*Q.pointers[F].pointers.length:Q.sqClass===P&&(Q.pointers[H]-=4*Q.pointers[J].pointers[F].pointers.length),Q=Q.nextObject},ensureFullBlockClosureClass:function(y,S){y.pointers[Squeak.splOb_ClassFullBlockClosure].isNil&&S[38]&&(y.pointers[Squeak.splOb_ClassFullBlockClosure]=S[38])}},"garbage collection - full",{fullGC:function(y){this.vm.addMessage("fullGC: "+y);var S=Date.now(),F=this.markReachableObjects();return this.removeUnmarkedOldObjects(),this.appendToOldObjects(F),this.finalizeWeakReferences(),this.allocationCount+=this.newSpaceCount,this.newSpaceCount=0,this.youngSpaceCount=0,this.hasNewInstances={},this.gcCount++,this.gcMilliseconds+=Date.now()-S,console.log("Full GC ("+y+"): "+(Date.now()-S)+" ms"),0<F.length?F[0]:null},gcRoots:function(){return this.vm.storeContextRegisters(),[this.specialObjectsArray,this.vm.activeContext]},markReachableObjects:function(){var y=this.gcRoots(),S=[];for(this.weakObjects=[];0<y.length;){var F=y.pop();if(!F.mark){F.oop<0&&S.push(F),F.mark=!0,F.sqClass.mark||y.push(F.sqClass);var P=F.pointers;if(P){var H=P.length;if(F.isWeak()&&(H=F.sqClass.classInstSize(),this.weakObjects.push(F)),this.vm.isContext(F))for(var J=H=F.contextSizeWithStack();J<P.length;J++)P[J]=this.vm.nilObj;for(J=0;J<H;J++)"object"!=typeof P[J]||P[J].mark||y.push(P[J])}}}return this.isSpur?S:S.sort((function(y,S){return S.oop-y.oop}))},removeUnmarkedOldObjects:function(){var y=0,S=0,F=this.firstOldObject;for(F.mark=!1;;){var P=F.nextObject;if(!P)return this.lastOldObject=F,this.lastOldObject.nextObject=null,this.oldSpaceBytes-=S,void(this.oldSpaceCount-=y);if(P.dirty&&(P.dirty=!1),P.mark)(F=P).mark=!1,F.oop-=S;else{var H=P;F.nextObject=H.nextObject,H.oop=-++this.newSpaceCount,S+=H.totalBytes(),y++}}},appendToOldObjects:function(y){for(var S=this.lastOldObject,F=0;F<y.length;F++){var P=y[F];P.mark=!1,this.oldSpaceBytes=P.setAddr(this.oldSpaceBytes),S.nextObject=P,S=P}S.nextObject=null,this.lastOldObject=S,this.lastOldObject.nextObject=null,this.oldSpaceCount+=y.length,this.gcTenured+=y.length,this.vm.signalLowSpaceIfNecessary(this.bytesLeft())},tenureIfYoung:function(y){y.oop<0&&this.appendToOldObjects([y])},finalizeWeakReferences:function(){var y=this.weakObjects;this.weakObjects=null;for(var S=0;S<y.length;S++){for(var F=y[S],P=F.pointers,H=F.sqClass.classInstSize(),J=!1,Q=H;Q<P.length;Q++)P[Q].oop<0&&(P[Q]=this.vm.nilObj,J=!0);if(J&&(this.vm.pendingFinalizationSignals++,2<=H)){var ee=F.pointers[Squeak.WeakFinalizerItem_list];if(ee.sqClass==this.vm.specialObjects[Squeak.splOb_ClassWeakFinalizer]){var te=ee.pointers[Squeak.WeakFinalizationList_first];F.pointers[Squeak.WeakFinalizerItem_next]=te,ee.pointers[Squeak.WeakFinalizationList_first]=F}}}0<this.vm.pendingFinalizationSignals&&this.vm.forceInterruptCheck()}},"garbage collection - partial",{partialGC:function(y){this.vm.addMessage("partialGC: "+y);var S=Date.now(),F=this.findYoungObjects();return this.appendToYoungSpace(F),this.finalizeWeakReferences(),this.cleanupYoungSpace(F),this.allocationCount+=this.newSpaceCount-F.length,this.youngSpaceCount=F.length,this.newSpaceCount=this.youngSpaceCount,this.pgcCount++,this.pgcMilliseconds+=Date.now()-S,console.log("Partial GC ("+y+"): "+(Date.now()-S)+" ms"),F[0]},youngRoots:function(){for(var y=this.gcRoots().filter((function(y){return y.oop<0})),S=this.firstOldObject;S;){if(S.dirty){for(var F=S.pointers,P=!1,H=0;H<F.length;H++){var J=F[H];"object"==typeof J&&J.oop<0&&(y.push(J),P=!0)}S.dirty=P}S=S.nextObject}return y},findYoungObjects:function(){var y=this.youngRoots(),S=[];for(this.weakObjects=[];0<y.length;){var F=y.pop();if(!F.mark){S.push(F),F.mark=!0,F.sqClass.oop<0&&y.push(F.sqClass);var P=F.pointers;if(P){var H=P.length;if(F.isWeak()&&(H=F.sqClass.classInstSize(),this.weakObjects.push(F)),this.vm.isContext(F))for(var J=H=F.contextSizeWithStack();J<P.length;J++)P[J]=this.vm.nilObj;for(J=0;J<H;J++){var Q=P[J];"object"==typeof Q&&Q.oop<0&&y.push(Q)}}}}return this.isSpur?S:S.sort((function(y,S){return S.oop-y.oop}))},appendToYoungSpace:function(y){for(var S=this.lastOldObject.oop+1,F=0;F<y.length;F++){var P=y[F];this.hasNewInstances[P.oop]&&(delete this.hasNewInstances[P.oop],this.hasNewInstances[S]=!0),P.oop=S,P.nextObject=y[F+1],S++}},cleanupYoungSpace:function(y){for(var S=y[0],F=-1;S;)this.hasNewInstances[S.oop]&&(delete this.hasNewInstances[S.oop],this.hasNewInstances[F]=!0),S.oop=F,S.mark=!1,S=S.nextObject,F--}},"creating",{registerObject:function(y){return y.oop=-++this.newSpaceCount,this.lastHash=13849+27181*this.lastHash&4294967295,4095&this.lastHash},registerObjectSpur:function(y){return y.oop=-++this.newSpaceCount,0},instantiateClass:function(y,S,F){var P=new(y.classInstProto()),H=this.registerObject(P);return P.initInstanceOf(y,S,H,F),this.hasNewInstances[y.oop]=!0,P},clone:function(y){var S=new(y.sqClass.classInstProto()),F=this.registerObject(S);return S.initAsClone(y,F),this.hasNewInstances[S.sqClass.oop]=!0,S}},"operations",{bulkBecome:function(y,S,F,P){if(!y)return!S;var H=y.length;if(H!==S.length)return!1;var J=null;0<this.newSpaceCount?J=this.partialGC("become"):this.vm.storeContextRegisters();for(var Q={},ee=0;ee<H;ee++){if(!(re=y[ee]).sqClass)return!1;if(Q[re.oop])return!1;Q[re.oop]=S[ee]}if(F)for(ee=0;ee<H;ee++){if(!(re=S[ee]).sqClass)return!1;if(Q[re.oop])return!1;Q[re.oop]=y[ee]}if(P)for(ee=0;ee<H;ee++){if(!S[ee].sqClass)return!1;var te=y[ee].hash;y[ee].hash=S[ee].hash,S[ee].hash=te,this.isSpur&&this.classTable[te]===y[ee]&&(this.classTable[te]=S[ee])}this.lastOldObject.nextObject=J;for(var re=this.firstOldObject;re;){var ie=Q[re.sqClass.oop];ie&&(re.sqClass=ie).oop<0&&(re.dirty=!0);var ae=re.pointers;if(ae)for(var se=0;se<ae.length;se++)(ie=Q[ae[se].oop])&&(ae[se]=ie).oop<0&&(re.dirty=!0);re=re.nextObject}return this.lastOldObject.nextObject=null,this.vm.flushMethodCacheAfterBecome(Q),!0},objectAfter:function(y){return y.nextObject||this.nextObjectWithGC("nextObject",y)},someInstanceOf:function(y){for(var S=this.firstOldObject;S;){if(S.sqClass===y)return S;S=S.nextObject||this.nextObjectWithGCFor(S,y)}return null},nextInstanceAfter:function(y){for(var S=y.sqClass;;){if(!(y=y.nextObject||this.nextObjectWithGCFor(y,S)))return null;if(y.sqClass===S)return y}},nextObjectWithGC:function(y,S){var F=0<S.oop?0:this.youngSpaceCount;return this.newSpaceCount<=F?null:(S.oop<0&&this.fullGC(y),this.partialGC(y))},nextObjectWithGCFor:function(y,S){return this.hasNewInstances[S.oop]?this.nextObjectWithGC("instance of "+S.className(),y):null},allInstancesOf:function(y){for(var S=this.firstOldObject,F=[];S;)S.sqClass===y&&F.push(S),S=S.nextObject||this.nextObjectWithGCFor(S,y);return F},writeToBuffer:function(){function e(F){y.setUint32(S,F),S+=4}var y=new DataView(new ArrayBuffer(64+this.oldSpaceBytes)),S=0;for(e(this.formatVersion()),e(64),e(this.oldSpaceBytes),e(this.firstOldObject.addr()),e(this.objectToOop(this.specialObjectsArray)),e(this.lastHash),e(52429400);S<64;)e(0);for(var F=this.firstOldObject,P=0;F;)S=F.writeTo(y,S,this),F=F.nextObject,P++;if(S!==y.byteLength)throw Error("wrong image size");if(P!==this.oldSpaceCount)throw Error("wrong object count");return y.buffer},objectToOop:function(y){if("number"==typeof y)return y<<1|1;if(y.oop<0)throw Error("temporary oop");return y.oop},bytesLeft:function(){return this.totalMemory-this.oldSpaceBytes},formatVersion:function(){return this.isSpur?6521:this.hasClosures?6504:6502},segmentVersion:function(){var y=this.isSpur?"seod":"does";return this.formatVersion()|y.charCodeAt(0)<<24},storeImageSegment:function(y,S,F){var P=new DataView(y.words.buffer),H=0,J=S.pointers,Q=0;P.setUint32(H,this.segmentVersion()),H+=4,this.fullGC("storeImageSegment"),F.mark=!0;for(var ee=0;ee<F.pointers.length;ee++)"object"==typeof F.pointers[ee]&&(F.pointers[ee].mark=!0);for(this.markReachableObjects(),F.mark=!1,ee=0;ee<F.pointers.length;ee++)"object"==typeof F.pointers[ee]&&(F.pointers[ee].mark=!1);var te={},re=[];function c(y){var S=te[y.oop];if(!S){if(y.mark){if(Q>=J.length)return 0;S=2147483652+4*Q,J[Q++]=y}else{if(H+y.totalBytes()>P.byteLength)return 0;S=H+4*(y.snapshotSize().header+1),H=y.writeTo(P,H,this),re.push(y)}te[y.oop]=S}return S}function f(){for(var y=this.firstOldObject;y;)y.mark=!1,y=y.nextObject;return this.weakObjects=null,!1}for(c=c.bind(this),f=f.bind(this),c(F);0<re.length;){var ie=re.shift(),ae=te[ie.oop],se=ie.snapshotSize().header,ne=ie.pointers;if(0<se){var oe=c(ie.sqClass);if(!oe)return f();var ue=1===se?Squeak.HeaderTypeClass:Squeak.HeaderTypeSizeAndClass;P.setUint32(ae-8,oe|ue)}if(ne)for(ee=0;ee<ne.length;ee++){var le=ne[ee];if("object"==typeof le){var ce=c(le);if(!ce)return f();P.setUint32(ae+4*ee,ce)}}}ie=y.oop<S.oop?y:S;for(var fe=0;ie;)ie.oop-=fe,ie===y?(fe+=4*ie.words.length-H,ie.words=new Uint32Array(ie.words.buffer.slice(0,H))):ie===S&&(fe+=4*(ie.pointers.length-Q),ie.pointers.length=Q),ie=ie.nextObject;return this.oldSpaceBytes-=fe,f(),!0},loadImageSegment:function(y,S){function a(){var y=F.getUint32(H,P);return H+=4,y}function r(y,S){if(S<5){for(var P=[];P.length<y;)P.push(a());return P}var J=new Uint32Array(F.buffer,H,y);return H+=4*y,J}var F=new DataView(y.words.buffer),P=!1,H=0,J=a();if(!0&J&&(P=!0,!(H=0)&(J=a())))return console.error("image segment format not supported"),null;this.tenureIfYoung(y);for(var Q=y,ee=Q.nextObject,te=y.oop,re={},ie={};H<F.byteLength;){var ae=0,se=0,ne=a();switch(ne&Squeak.HeaderTypeMask){case Squeak.HeaderTypeSizeAndClass:ae=ne>>>2,se=a(),ne=a();break;case Squeak.HeaderTypeClass:se=ne-Squeak.HeaderTypeClass,ae=(ne=a())>>>2&63;break;case Squeak.HeaderTypeShort:ae=ne>>>2&63,se=ne>>>12&31;break;case Squeak.HeaderTypeFree:throw Error("Unexpected free block")}var oe=H,ue=ne>>>8&15,le=ne>>>17&4095,ce=r(--ae,ue),fe=new Squeak.Object;fe.initFromImage(oe+te,se,ue,le),Q.nextObject=fe,this.oldSpaceCount++,Q=fe,re[oe]=fe,ie[oe+te]=ce}fe.nextObject=ee;for(var he=0;he<S.pointers.length;he++)re[2147483652+4*he]=S.pointers[he];var pe=this.specialObjectsArray.pointers[Squeak.splOb_CompactClasses].pointers,de=0,be=pe.map((function(y){return re[--de]=y,de}));y.words=new Uint32Array([y.words[0]]);for(var me=y.nextObject,ve=this.specialObjectsArray.pointers[Squeak.splOb_ClassFloat],ke=me;ke.installFromImage(re,ie,be,ve,P,!1),(ke=ke.nextObject)!==ee;);return me}},"spur support",{initSpurOverrides:function(){this.registerObject=this.registerObjectSpur,this.writeToBuffer=this.writeToBufferSpur,this.storeImageSegment=this.storeImageSegmentSpur,this.loadImageSegment=this.loadImageSegmentSpur},spurClassTable:function(y,S,F,P){for(var H={},J=this.firstOldObject,Q=0;Q<4096;Q++){var ee=y[F[Q]];if(ee.oop&&(ee=S[ee.oop]),1024===ee.length)for(var te=0;te<1024;te++){var re=y[ee[te]];if(!re)throw Error("Invalid class table entry (oop "+ee[te]+")");re!==J&&(H[ae=1024*Q+te]=re)}}for(var ie in Squeak)if(/^splOb_Class/.test(ie)){var ae,se=y[S[P.oop][Squeak[ie]]];se!==J&&0<(ae=se.hash)&&ae<1024&&(H[ae]=se)}return H[3]=H[1],this.classTable=H,this.classTableIndex=1024,H},enterIntoClassTable:function(y){for(var S=this.classTableIndex,F=this.classTable;S<=4194303;){if(!F[S])return(F[S]=y).hash=S,this.classTableIndex=S;S++}return console.error("class table full?"),null},initImmediateClasses:function(y,S,F){var P=S[F.oop];this.characterClass=y[P[Squeak.splOb_ClassCharacter]],this.floatClass=y[P[Squeak.splOb_ClassFloat]],this.largePosIntClass=y[P[Squeak.splOb_ClassLargePositiveInteger]],this.largeNegIntClass=y[P[Squeak.splOb_ClassLargeNegativeInteger]],this.characterClass.classInstProto("Character"),this.floatClass.classInstProto("BoxedFloat64"),this.largePosIntClass.classInstProto("LargePositiveInteger"),this.largeNegIntClass.classInstProto("LargeNegativeInteger"),this.characterTable={}},getCharacter:function(y){var S=this.characterTable[y];return S||((S=new this.characterClass.instProto).initInstanceOfChar(this.characterClass,y),this.characterTable[y]=S),S},instantiateFloat:function(y){var S=new this.floatClass.instProto;return this.registerObjectSpur(S),this.hasNewInstances[this.floatClass.oop]=!0,S.initInstanceOfFloat(this.floatClass,y),S},instantiateLargeFromSmall:function(y,S){S=y<<29|S>>>3;var F=(y>>=3)<0;F&&(y=-y,0!=(S=-S)&&y--);var P=0===y?4:y<=255?5:y<=65535?6:y<=16777215?7:8,H=F?this.largeNegIntClass:this.largePosIntClass,J=new H.instProto;this.registerObjectSpur(J),this.hasNewInstances[H.oop]=!0,J.initInstanceOfLargeInt(H,P);for(var Q=J.bytes,ee=0;ee<4;ee++)Q[ee]=255&S,S>>=8;for(ee=4;ee<P;ee++)Q[ee]=255&y,y>>=8;return J},ensureClassesInTable:function(){for(var y=this.firstOldObject,S=1024;y;){var F=y.sqClass;if(0===F.hash&&this.enterIntoClassTable(F),F.hash>S&&(S=F.hash),this.classTable[F.hash]!==F)throw Error("Class not in class table");y=y.nextObject}return 1+(S>>10)},classTableBytes:function(y){return 4*(4108+1028*y)},writeFreeLists:function(y,S,F,P){return y.setUint32(S,167772178,F),S+=4,y.setUint32(S,536870912,F),(S+=4)+128},writeClassTable:function(y,S,F,P,H){y.setUint32(S,4104,F),S+=4,y.setUint32(S,4278190080,F),S+=4,y.setUint32(S,33554448,F),S+=4,y.setUint32(S,4278190080,F),S+=4;for(var J=0;J<H;J++)y.setUint32(S,16624+4112*J,F),S+=4;S+=4*(4104-H);var Q=0;for(J=0;J<H;J++){y.setUint32(S,1024,F),S+=4,y.setUint32(S,4278190080,F),S+=4,y.setUint32(S,33554448,F),S+=4,y.setUint32(S,4278190080,F),S+=4;for(var ee=0;ee<1024;ee++){var te=this.classTable[Q];if(te&&te.pointers){if(!te.hash)throw Error("class without id");(te.hash!==Q&&32<=Q||te.oop<0)&&(console.warn("freeing class index "+Q+" "+te.className()),te=null,delete this.classTable[Q])}te&&y.setUint32(S,P(te),F),S+=4,Q++}}return S},writeToBufferSpur:function(){var y=this.ensureClassesInTable(),S=136+this.classTableBytes(y),F=new DataView(new ArrayBuffer(64+S+this.oldSpaceBytes+16)),P=!0,H=Date.now(),J=0;function n(y){F.setUint32(J,y,P),J+=4}function o(y){if("number"==typeof y)return y<<1|1;if(7===y._format){if(y.hash!==y.oop>>2||2!=(3&y.oop))throw Error("Bad immediate char");return y.oop}if(y.oop<0)throw Error("temporary oop");return y.oop<48?y.oop:y.oop+S}for(n(this.formatVersion()),n(64),n(S+this.oldSpaceBytes+16),n(this.firstOldObject.addr()),n(o(this.specialObjectsArray)),this.savedHeaderWords.forEach(n),n(S+this.oldSpaceBytes+16);J<64;)n(0);var Q=this.firstOldObject,ee=0;for(J=Q.writeTo(F,J,P,o),Q=Q.nextObject,ee++,J=Q.writeTo(F,J,P,o),Q=Q.nextObject,ee++,J=Q.writeTo(F,J,P,o),Q=Q.nextObject,ee++,J=this.writeFreeLists(F,J,P,o),J=this.writeClassTable(F,J,P,o,y);Q;)J=Q.writeTo(F,J,P,o),Q=Q.nextObject,ee++;if(n(1241513987),n(8388608),n(0),n(0),J!==F.byteLength)throw Error("wrong image size");if(ee!==this.oldSpaceCount)throw Error("wrong object count");var te=Date.now()-H;return console.log("Wrote "+ee+" objects in "+te+" ms, image size "+J+" bytes"),F.buffer},storeImageSegmentSpur:function(y,S,F){return this.vm.warnOnce("not implemented for Spur yet: primitive 98 (primitiveStoreImageSegment)"),!1},loadImageSegmentSpur:function(y,S){return this.vm.warnOnce("not implemented for Spur yet: primitive 99 (primitiveLoadImageSegment)"),null}}),Object.subclass("Squeak.Interpreter","initialization",{initialize:function(y,S){console.log("squeak: initializing interpreter "+Squeak.vmVersion),this.Squeak=Squeak,this.image=y,(this.image.vm=this).primHandler=new Squeak.Primitives(this,S),this.loadImageState(),this.hackImage(),this.initVMState(),this.loadInitialContext(),this.initCompiler(),console.log("squeak: ready")},loadImageState:function(){this.specialObjects=this.image.specialObjectsArray.pointers,this.specialSelectors=this.specialObjects[Squeak.splOb_SpecialSelectors].pointers,this.nilObj=this.specialObjects[Squeak.splOb_NilObject],this.falseObj=this.specialObjects[Squeak.splOb_FalseObject],this.trueObj=this.specialObjects[Squeak.splOb_TrueObject],this.hasClosures=this.image.hasClosures,this.getGlobals=this.globalsGetter(),this.hasClosures||this.findMethod("UnixFileDirectory class>>pathNameDelimiter")||(this.primHandler.emulateMac=!0),6501==this.image.version&&(this.primHandler.reverseDisplay=!0)},initVMState:function(){this.byteCodeCount=0,this.sendCount=0,this.interruptCheckCounter=0,this.interruptCheckCounterFeedBackReset=1e3,this.interruptChecksEveryNms=3,this.lowSpaceThreshold=1e6,this.signalLowSpace=!1,this.nextPollTick=0,this.nextWakeupTick=0,this.lastTick=0,this.interruptKeycode=2094,this.interruptPending=!1,this.pendingFinalizationSignals=0,this.freeContexts=this.nilObj,this.freeLargeContexts=this.nilObj,this.reclaimableContextCount=0,this.nRecycledContexts=0,this.nAllocatedContexts=0,this.methodCacheSize=1024,this.methodCacheMask=this.methodCacheSize-1,this.methodCacheRandomish=0,this.methodCache=[];for(var y=0;y<this.methodCacheSize;y++)this.methodCache[y]={lkupClass:null,selector:null,method:null,primIndex:0,argCount:0,mClass:null};this.breakOutOfInterpreter=!1,this.breakOutTick=0,this.breakOnMethod=null,this.breakOnNewMethod=!1,this.breakOnContextChanged=!1,this.breakOnContextReturned=null,this.messages={},this.startupTime=Date.now()},loadInitialContext:function(){var y=this.specialObjects[Squeak.splOb_SchedulerAssociation].pointers[Squeak.Assn_value].pointers[Squeak.ProcSched_activeProcess];this.activeContext=y.pointers[Squeak.Proc_suspendedContext],this.activeContext.dirty=!0,this.fetchContextRegisters(this.activeContext),this.reclaimableContextCount=0},globalsGetter:function(){var y=this.specialObjects[Squeak.splOb_SmalltalkDictionary],S=y.sqClass.className();if("Association"===S&&(S=(y=y.pointers[1]).sqClass.className()),"SystemDictionary"===S)return function(){return y.pointers[1].pointers};if("SmalltalkImage"===S){var F=y.pointers[0],P=F.sqClass.className();if("SystemDictionary"===P)return function(){return F.pointers[1].pointers};if("Environment"===P)return function(){return F.pointers[2].pointers[1].pointers}}return console.warn("cannot find global dict"),function(){return[]}},initCompiler:function(){if(!Squeak.Compiler)return console.warn("Squeak.Compiler not loaded, using interpreter only");try{if(42!==new Function("return 42")())return console.warn("function constructor not working, disabling JIT")}catch(y){return console.warn("disabling JIT: "+y)}var y=this.image.oldSpaceCount/(this.startupTime-this.image.startupTime);if(y<10)return console.warn("Slow machine detected (loaded "+(1e3*y|0)+" objects/sec), using interpreter only");try{console.log("squeak: initializing JIT compiler"),this.compiler=new Squeak.Compiler(this)}catch(y){console.warn("Compiler "+y)}},hackImage:function(){[{method:"SmalltalkImage>>wordSize",literal:{index:1,old:8,hack:4},enabled:!0},{method:"ReleaseBuilder class>>prepareEnvironment",bytecode:{pc:28,old:216,hack:135},enabled:("object"==typeof location?location.hash:"").includes("wizard=false")}].forEach((function(y){try{var S=y.enabled&&this.findMethod(y.method);if(S){var F=y.primitive,P=y.bytecode,H=y.literal,J=!0;F?S.pointers[0]|=F:P&&S.bytes[P.pc]===P.old?S.bytes[P.pc]=P.hack:P&&S.bytes[P.pc]===P.hack?J=!1:H&&S.pointers[H.index].pointers[1]===H.old?S.pointers[H.index].pointers[1]=H.hack:H&&S.pointers[H.index].pointers[1]===H.hack?J=!1:(J=!1,console.error("Failed to hack "+y.method)),J&&console.warn("Hacking "+y.method)}}catch(S){console.error("Failed to hack "+y.method+" with error "+S)}}),this)}},"interpreting",{interpretOne:function(y){if(this.method.methodSignFlag())return this.interpretOneSistaWithExtensions(y,0,0);if(!this.method.compiled){var S,F,P=this.Squeak;switch(this.byteCodeCount++,S=this.nextByte()){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return void this.push(this.receiver.pointers[15&S]);case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:return void this.push(this.homeContext.pointers[P.Context_tempFrameStart+(15&S)]);case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:case 59:case 60:case 61:case 62:case 63:return void this.push(this.method.methodGetLiteral(31&S));case 64:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:return void this.push(this.method.methodGetLiteral(31&S).pointers[P.Assn_value]);case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:return this.receiver.dirty=!0,void(this.receiver.pointers[7&S]=this.pop());case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:return void(this.homeContext.pointers[P.Context_tempFrameStart+(7&S)]=this.pop());case 112:return void this.push(this.receiver);case 113:return void this.push(this.trueObj);case 114:return void this.push(this.falseObj);case 115:return void this.push(this.nilObj);case 116:return void this.push(-1);case 117:return void this.push(0);case 118:return void this.push(1);case 119:return void this.push(2);case 120:return void this.doReturn(this.receiver);case 121:return void this.doReturn(this.trueObj);case 122:return void this.doReturn(this.falseObj);case 123:return void this.doReturn(this.nilObj);case 124:return void this.doReturn(this.pop());case 125:return void this.doReturn(this.pop(),this.activeContext.pointers[P.BlockContext_caller]);case 126:case 127:return void this.nono();case 128:return void this.extendedPush(this.nextByte());case 129:return void this.extendedStore(this.nextByte());case 130:return void this.extendedStorePop(this.nextByte());case 131:return F=this.nextByte(),void this.send(this.method.methodGetSelector(31&F),F>>5,!1);case 132:return void this.doubleExtendedDoAnything(this.nextByte());case 133:return F=this.nextByte(),void this.send(this.method.methodGetSelector(31&F),F>>5,!0);case 134:return F=this.nextByte(),void this.send(this.method.methodGetSelector(63&F),F>>6,!1);case 135:return void this.pop();case 136:return void this.push(this.top());case 137:return void this.push(this.exportThisContext());case 138:return void this.pushNewArray(this.nextByte());case 139:return void this.callPrimBytecode(129);case 140:return F=this.nextByte(),void this.push(this.homeContext.pointers[P.Context_tempFrameStart+this.nextByte()].pointers[F]);case 141:return F=this.nextByte(),void(this.homeContext.pointers[P.Context_tempFrameStart+this.nextByte()].pointers[F]=this.top());case 142:return F=this.nextByte(),void(this.homeContext.pointers[P.Context_tempFrameStart+this.nextByte()].pointers[F]=this.pop());case 143:return void this.pushClosureCopy();case 144:case 145:case 146:case 147:case 148:case 149:case 150:case 151:return void(this.pc+=1+(7&S));case 152:case 153:case 154:case 155:case 156:case 157:case 158:case 159:return void this.jumpIfFalse(1+(7&S));case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:return F=this.nextByte(),this.pc+=256*((7&S)-4)+F,void((7&S)<4&&this.interruptCheckCounter--<=0&&this.checkForInterrupts());case 168:case 169:case 170:case 171:return void this.jumpIfTrue(256*(3&S)+this.nextByte());case 172:case 173:case 174:case 175:return void this.jumpIfFalse(256*(3&S)+this.nextByte());case 176:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)+this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 177:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)-this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 178:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)<this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 179:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)>this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 180:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)<=this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 181:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)>=this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 182:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)===this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 183:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)!==this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 184:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)*this.stackIntOrFloat(0))||this.sendSpecial(15&S));case 185:return this.success=!0,void(this.pop2AndPushIntResult(this.quickDivide(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&S));case 186:return this.success=!0,void(this.pop2AndPushIntResult(this.mod(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&S));case 187:return this.success=!0,void(this.primHandler.primitiveMakePoint(1,!0)||this.sendSpecial(15&S));case 188:return this.success=!0,void(this.pop2AndPushIntResult(this.safeShift(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&S));case 189:return this.success=!0,void(this.pop2AndPushIntResult(this.div(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&S));case 190:return this.success=!0,void(this.pop2AndPushIntResult(this.stackInteger(1)&this.stackInteger(0))||this.sendSpecial(15&S));case 191:return this.success=!0,void(this.pop2AndPushIntResult(this.stackInteger(1)|this.stackInteger(0))||this.sendSpecial(15&S));case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:return void(this.primHandler.quickSendOther(this.receiver,15&S)||this.sendSpecial(16+(15&S)));case 208:case 209:case 210:case 211:case 212:case 213:case 214:case 215:case 216:case 217:case 218:case 219:case 220:case 221:case 222:case 223:return void this.send(this.method.methodGetSelector(15&S),0,!1);case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:return void this.send(this.method.methodGetSelector(15&S),1,!1);case 240:case 241:case 242:case 243:case 244:case 245:case 246:case 247:case 248:case 249:case 250:case 251:case 252:case 253:case 254:case 255:return void this.send(this.method.methodGetSelector(15&S),2,!1)}throw Error("not a bytecode: "+S)}if(y){if(!this.compiler.enableSingleStepping(this.method))return this.method.compiled=null,this.interpretOne(y);this.breakNow()}this.method.compiled(this)},interpretOneSistaWithExtensions:function(y,S,F){var P,H,J=this.Squeak;switch(this.byteCodeCount++,P=this.nextByte()){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return void this.push(this.receiver.pointers[15&P]);case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:return void this.push(this.method.methodGetLiteral(15&P).pointers[J.Assn_value]);case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:case 59:case 60:case 61:case 62:case 63:return void this.push(this.method.methodGetLiteral(31&P));case 64:case 65:case 66:case 67:case 68:case 69:case 70:case 71:return void this.push(this.homeContext.pointers[J.Context_tempFrameStart+(7&P)]);case 72:case 73:case 74:case 75:return void this.push(this.homeContext.pointers[J.Context_tempFrameStart+(3&P)+8]);case 76:return void this.push(this.receiver);case 77:return void this.push(this.trueObj);case 78:return void this.push(this.falseObj);case 79:return void this.push(this.nilObj);case 80:return void this.push(0);case 81:return void this.push(1);case 82:return 0==F?void this.push(this.exportThisContext()):void this.nono();case 83:return void this.push(this.top());case 84:case 85:case 86:case 87:case 217:case 218:case 219:case 220:case 221:case 222:case 223:case 230:case 236:case 246:case 247:case 254:case 255:return void this.nono();case 88:return void this.doReturn(this.receiver);case 89:return void this.doReturn(this.trueObj);case 90:return void this.doReturn(this.falseObj);case 91:return void this.doReturn(this.nilObj);case 92:return void this.doReturn(this.pop());case 93:return void this.doReturn(this.nilObj,this.activeContext.pointers[J.BlockContext_caller]);case 94:return 0==S?void this.doReturn(this.pop(),this.activeContext.pointers[J.BlockContext_caller]):void this.nono();case 95:return;case 96:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)+this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 97:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)-this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 98:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)<this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 99:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)>this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 100:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)<=this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 101:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)>=this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 102:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)===this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 103:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)!==this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 104:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)*this.stackIntOrFloat(0))||this.sendSpecial(15&P));case 105:return this.success=!0,void(this.pop2AndPushIntResult(this.quickDivide(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&P));case 106:return this.success=!0,void(this.pop2AndPushIntResult(this.mod(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&P));case 107:return this.success=!0,void(this.primHandler.primitiveMakePoint(1,!0)||this.sendSpecial(15&P));case 108:return this.success=!0,void(this.pop2AndPushIntResult(this.safeShift(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&P));case 109:return this.success=!0,void(this.pop2AndPushIntResult(this.div(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&P));case 110:return this.success=!0,void(this.pop2AndPushIntResult(this.stackInteger(1)&this.stackInteger(0))||this.sendSpecial(15&P));case 111:return this.success=!0,void(this.pop2AndPushIntResult(this.stackInteger(1)|this.stackInteger(0))||this.sendSpecial(15&P));case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 125:case 126:case 127:return void(this.primHandler.quickSendOther(this.receiver,15&P)||this.sendSpecial(16+(15&P)));case 128:case 129:case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 141:case 142:case 143:return void this.send(this.method.methodGetSelector(15&P),0,!1);case 144:case 145:case 146:case 147:case 148:case 149:case 150:case 151:case 152:case 153:case 154:case 155:case 156:case 157:case 158:case 159:return void this.send(this.method.methodGetSelector(15&P),1,!1);case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 174:case 175:return void this.send(this.method.methodGetSelector(15&P),2,!1);case 176:case 177:case 178:case 179:case 180:case 181:case 182:case 183:return void(this.pc+=1+(7&P));case 184:case 185:case 186:case 187:case 188:case 189:case 190:case 191:return void this.jumpIfTrue(1+(7&P));case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:return void this.jumpIfFalse(1+(7&P));case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:return this.receiver.dirty=!0,void(this.receiver.pointers[7&P]=this.pop());case 208:case 209:case 210:case 211:case 212:case 213:case 214:case 215:return void(this.homeContext.pointers[J.Context_tempFrameStart+(7&P)]=this.pop());case 216:return void this.pop();case 224:return H=this.nextByte(),void this.interpretOneSistaWithExtensions(y,(S<<8)+H,F);case 225:return H=this.nextByte(),void this.interpretOneSistaWithExtensions(y,S,(F<<8)+(H<128?H:H-256));case 226:return H=this.nextByte(),void this.push(this.receiver.pointers[H+(S<<8)]);case 227:return H=this.nextByte(),void this.push(this.method.methodGetLiteral(H+(S<<8)).pointers[J.Assn_value]);case 228:return H=this.nextByte(),void this.push(this.method.methodGetLiteral(H+(S<<8)));case 229:return H=this.nextByte(),void this.push(this.homeContext.pointers[J.Context_tempFrameStart+H]);case 231:return void this.pushNewArray(this.nextByte());case 232:return H=this.nextByte(),void this.push(H+(F<<8));case 233:return H=this.nextByte(),void this.push(this.image.getCharacter(H+(F<<8)));case 234:return H=this.nextByte(),void this.send(this.method.methodGetSelector((H>>3)+(S<<5)),(7&H)+(F<<3),!1);case 235:H=this.nextByte();var Q=this.method.methodGetSelector((H>>3)+(S<<5));return 64<=F?void this.sendSuperDirected(Q,(7&H)+((63&F)<<3)):void this.send(Q,(7&H)+(F<<3),!0);case 237:var ee=this.nextByte()+(F<<8);return this.pc+=ee,void(ee<0&&this.interruptCheckCounter--<=0&&this.checkForInterrupts());case 238:return void this.jumpIfTrue(this.nextByte()+(F<<8));case 239:return void this.jumpIfFalse(this.nextByte()+(F<<8));case 240:return this.receiver.dirty=!0,void(this.receiver.pointers[this.nextByte()+(S<<8)]=this.pop());case 241:return(te=this.method.methodGetLiteral(this.nextByte()+(S<<8))).dirty=!0,void(te.pointers[J.Assn_value]=this.pop());case 242:return void(this.homeContext.pointers[J.Context_tempFrameStart+this.nextByte()]=this.pop());case 243:return this.receiver.dirty=!0,void(this.receiver.pointers[this.nextByte()+(S<<8)]=this.top());case 244:var te;return(te=this.method.methodGetLiteral(this.nextByte()+(S<<8))).dirty=!0,void(te.pointers[J.Assn_value]=this.top());case 245:return void(this.homeContext.pointers[J.Context_tempFrameStart+this.nextByte()]=this.top());case 248:return void this.callPrimBytecode(245);case 249:return void this.pushFullClosure(S);case 250:return void this.pushClosureCopyExtended(S,F);case 251:return H=this.nextByte(),void this.push(this.homeContext.pointers[J.Context_tempFrameStart+this.nextByte()].pointers[H]);case 252:return H=this.nextByte(),void(this.homeContext.pointers[J.Context_tempFrameStart+this.nextByte()].pointers[H]=this.top());case 253:return H=this.nextByte(),void(this.homeContext.pointers[J.Context_tempFrameStart+this.nextByte()].pointers[H]=this.pop())}throw Error("not a bytecode: "+P)},interpret:function(y,S){if(this.frozen)return"frozen";for(this.isIdle=!1,this.breakOutOfInterpreter=!1,this.breakOutTick=this.primHandler.millisecondClockValue()+(y||500);!1===this.breakOutOfInterpreter;)this.method.compiled?this.method.compiled(this):this.interpretOne();if("function"==typeof this.breakOutOfInterpreter)return this.breakOutOfInterpreter(S);var F="break"==this.breakOutOfInterpreter?"break":this.isIdle?this.nextWakeupTick?Math.max(1,this.nextWakeupTick-this.primHandler.millisecondClockValue()):"sleep":0;return S&&S(F),F},goIdle:function(){var y=0!==this.nextWakeupTick;this.forceInterruptCheck(),this.checkForInterrupts();var S=0!==this.nextWakeupTick;this.isIdle=S||!y,this.breakOut()},freeze:function(y){var S;this.frozen=!0,this.breakOutOfInterpreter=function(y){if(!y)throw Error("need function to restart interpreter");return S=y,"frozen"}.bind(this);var F=function(){if(this.frozen=!1,!S)throw Error("no continue function");S(0)}.bind(this);return y&&self.setTimeout((function(){y(F)}),0),F},breakOut:function(){this.breakOutOfInterpreter=this.breakOutOfInterpreter||!0},nextByte:function(){return this.method.bytes[this.pc++]},nono:function(){throw Error("Oh No!")},forceInterruptCheck:function(){this.interruptCheckCounter=-1e3},checkForInterrupts:function(){var y=this.primHandler.millisecondClockValue();if(y<this.lastTick&&(this.nextPollTick=y+(this.nextPollTick-this.lastTick),this.breakOutTick=y+(this.breakOutTick-this.lastTick),0!==this.nextWakeupTick&&(this.nextWakeupTick=y+(this.nextWakeupTick-this.lastTick))),-100<this.interruptCheckCounter&&(y-this.lastTick<this.interruptChecksEveryNms?this.interruptCheckCounterFeedBackReset+=10:this.interruptCheckCounterFeedBackReset<=1e3?this.interruptCheckCounterFeedBackReset=1e3:this.interruptCheckCounterFeedBackReset-=12),this.interruptCheckCounter=this.interruptCheckCounterFeedBackReset,this.lastTick=y,this.signalLowSpace&&(this.signalLowSpace=!1,(S=this.specialObjects[Squeak.splOb_TheLowSpaceSemaphore]).isNil||this.primHandler.synchronousSignal(S)),this.interruptPending&&(this.interruptPending=!1,(S=this.specialObjects[Squeak.splOb_TheInterruptSemaphore]).isNil||this.primHandler.synchronousSignal(S)),0!==this.nextWakeupTick&&y>=this.nextWakeupTick&&(this.nextWakeupTick=0,(S=this.specialObjects[Squeak.splOb_TheTimerSemaphore]).isNil||this.primHandler.synchronousSignal(S)),0<this.pendingFinalizationSignals){var S=this.specialObjects[Squeak.splOb_TheFinalizationSemaphore];this.pendingFinalizationSignals=0,S.isNil||this.primHandler.synchronousSignal(S)}0<this.primHandler.semaphoresToSignal.length&&this.primHandler.signalExternalSemaphores(),!this.method.compiled&&this.compiler&&this.compiler.compile(this.method),y>=this.breakOutTick&&this.breakOut()},extendedPush:function(y){var S=63&y;switch(y>>6){case 0:this.push(this.receiver.pointers[S]);break;case 1:this.push(this.homeContext.pointers[Squeak.Context_tempFrameStart+S]);break;case 2:this.push(this.method.methodGetLiteral(S));break;case 3:this.push(this.method.methodGetLiteral(S).pointers[Squeak.Assn_value])}},extendedStore:function(y){var S=63&y;switch(y>>6){case 0:this.receiver.dirty=!0,this.receiver.pointers[S]=this.top();break;case 1:this.homeContext.pointers[Squeak.Context_tempFrameStart+S]=this.top();break;case 2:this.nono();break;case 3:var F=this.method.methodGetLiteral(S);F.dirty=!0,F.pointers[Squeak.Assn_value]=this.top()}},extendedStorePop:function(y){var S=63&y;switch(y>>6){case 0:this.receiver.dirty=!0,this.receiver.pointers[S]=this.pop();break;case 1:this.homeContext.pointers[Squeak.Context_tempFrameStart+S]=this.pop();break;case 2:this.nono();break;case 3:var F=this.method.methodGetLiteral(S);F.dirty=!0,F.pointers[Squeak.Assn_value]=this.pop()}},doubleExtendedDoAnything:function(y){var S=this.nextByte();switch(y>>5){case 0:this.send(this.method.methodGetSelector(S),31&y,!1);break;case 1:this.send(this.method.methodGetSelector(S),31&y,!0);break;case 2:this.push(this.receiver.pointers[S]);break;case 3:this.push(this.method.methodGetLiteral(S));break;case 4:this.push(this.method.methodGetLiteral(S).pointers[Squeak.Assn_value]);break;case 5:this.receiver.dirty=!0,this.receiver.pointers[S]=this.top();break;case 6:this.receiver.dirty=!0,this.receiver.pointers[S]=this.pop();break;case 7:var F=this.method.methodGetLiteral(S);F.dirty=!0,F.pointers[Squeak.Assn_value]=this.top()}},jumpIfTrue:function(y){var S=this.pop();S.isTrue?this.pc+=y:S.isFalse||(this.push(S),this.send(this.specialObjects[Squeak.splOb_SelectorMustBeBoolean],0,!1))},jumpIfFalse:function(y){var S=this.pop();S.isFalse?this.pc+=y:S.isTrue||(this.push(S),this.send(this.specialObjects[Squeak.splOb_SelectorMustBeBoolean],0,!1))},sendSpecial:function(y){this.send(this.specialSelectors[2*y],this.specialSelectors[2*y+1],!1)},callPrimBytecode:function(y){this.pc+=2,this.primFailCode&&(this.method.bytes[this.pc]===y&&this.stackTopPut(this.getErrorObjectFromPrimFailCode()),this.primFailCode=0)},getErrorObjectFromPrimFailCode:function(){var y=this.specialObjects[Squeak.splOb_PrimErrTableIndex];if(y&&y.pointers){var S=y.pointers[this.primFailCode-1];if(S)return S}return this.primFailCode}},"closures",{pushNewArray:function(y){var S=127<y,F=127&y,P=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray],F);if(S){for(var H=0;H<F;H++)P.pointers[H]=this.stackValue(F-H-1);this.popN(F)}this.push(P)},pushClosureCopy:function(){var y=this.nextByte(),S=15&y,F=y>>4,P=256*this.nextByte()+this.nextByte(),H=this.encodeSqueakPC(this.pc,this.method),J=this.newClosure(S,H,F);if(J.pointers[Squeak.Closure_outerContext]=this.activeContext,(this.reclaimableContextCount=0)<F){for(var Q=0;Q<F;Q++)J.pointers[Squeak.Closure_firstCopiedValue+Q]=this.stackValue(F-Q-1);this.popN(F)}this.pc+=P,this.push(J)},pushClosureCopyExtended:function(y,S){var F=this.nextByte(),P=this.nextByte(),H=(7&F)+8*this.mod(y,16),J=(F>>3&7)+8*this.div(y,16),Q=P+(S<<8),ee=this.encodeSqueakPC(this.pc,this.method),te=this.newClosure(H,ee,J);if(te.pointers[Squeak.Closure_outerContext]=this.activeContext,(this.reclaimableContextCount=0)<J){for(var re=0;re<J;re++)te.pointers[Squeak.Closure_firstCopiedValue+re]=this.stackValue(J-re-1);this.popN(J)}this.pc+=Q,this.push(te)},pushFullClosure:function(y){var S,F=this.nextByte(),P=this.nextByte(),H=F+(y<<8),J=63&P;S=1==(P>>6&1)?this.vm.nilObj:this.activeContext;var Q=this.method.methodGetLiteral(H),ee=this.newFullClosure(S,J,Q);if(1==(P>>7&1))throw Error("on-stack receiver not yet supported");if(ee.pointers[Squeak.ClosureFull_receiver]=this.receiver,(this.reclaimableContextCount=0)<J){for(var te=0;te<J;te++)ee.pointers[Squeak.ClosureFull_firstCopiedValue+te]=this.stackValue(J-te-1);this.popN(J)}this.push(ee)},newClosure:function(y,S,F){var P=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassBlockClosure],F);return P.pointers[Squeak.Closure_startpc]=S,P.pointers[Squeak.Closure_numArgs]=y,P},newFullClosure:function(y,S,F){var P=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassFullBlockClosure],S);return P.pointers[Squeak.Closure_outerContext]=y,P.pointers[Squeak.ClosureFull_method]=F,P.pointers[Squeak.Closure_numArgs]=F.methodNumArgs(),P}},"sending",{send:function(y,S,F){var P,H=this.stackValue(S);P=F?(P=this.method.methodClassForSuper()).pointers[Squeak.Class_superclass]:this.getClass(H);var J=this.findSelectorInClass(y,S,P);J.primIndex&&(this.verifyAtSelector=y,this.verifyAtClass=P),this.executeNewMethod(H,J.method,J.argCount,J.primIndex,J.mClass,y)},sendSuperDirected:function(y,S){var F=this.pop().pointers[Squeak.Class_superclass],P=this.stackValue(S),H=this.findSelectorInClass(y,S,F);H.primIndex&&(this.verifyAtSelector=y,this.verifyAtClass=F),this.executeNewMethod(P,H.method,H.argCount,H.primIndex,H.mClass,y)},sendAsPrimitiveFailure:function(y,S,F){this.executeNewMethod(y,S,F,0)},findSelectorInClass:function(y,S,F){this.currentSelector=y;var P=this.findMethodCacheEntry(y,F);if(P.method)return P;for(var H,J=F;!J.isNil;){if((H=J.pointers[Squeak.Class_mdict]).isNil){var Q=this.specialObjects[Squeak.splOb_SelectorCannotInterpret],ee=this.createActualMessage(y,S,F);return this.popNandPush(S,ee),this.findSelectorInClass(Q,1,J.superclass())}var te=this.lookupSelectorInDict(H,y);if(!te.isNil)return P.method=te,P.primIndex=te.isMethod()?te.methodPrimitiveIndex():576,P.argCount=S,P.mClass=J,P;J=J.superclass()}var re=this.specialObjects[Squeak.splOb_SelectorDoesNotUnderstand];if(y===re)throw Error("Recursive not understood error encountered");var ie=this.createActualMessage(y,S,F);return this.popNandPush(S,ie),this.findSelectorInClass(re,1,F)},lookupSelectorInDict:function(y,S){for(var F=y.pointersSize(),P=(F-Squeak.MethodDict_selectorStart-1&S.hash)+Squeak.MethodDict_selectorStart,H=!1;;){var J=y.pointers[P];if(J===S)return y.pointers[Squeak.MethodDict_array].pointers[P-Squeak.MethodDict_selectorStart];if(J.isNil)return this.nilObj;if(++P===F){if(H)return this.nilObj;P=Squeak.MethodDict_selectorStart,H=!0}}},executeNewMethod:function(y,S,F,P,H,J){if(this.sendCount++,S===this.breakOnMethod&&this.breakNow("executing method "+this.printMethod(S,H,J)),this.logSends&&console.log(this.sendCount+" "+this.printMethod(S,H,J)),this.breakOnContextChanged&&(this.breakOnContextChanged=!1,this.breakNow()),!(0<P&&this.tryPrimitive(P,F,S))){var Q=this.allocateOrRecycleContext(S.methodNeedsLargeFrame()),ee=S.methodTempCount(),te=Squeak.Context_tempFrameStart+ee-1;if(Q.pointers[Squeak.Context_method]=S,Q.pointers[Squeak.BlockContext_initialIP]=this.nilObj,Q.pointers[Squeak.Context_sender]=this.activeContext,this.arrayCopy(this.activeContext.pointers,this.sp-F,Q.pointers,Squeak.Context_tempFrameStart-1,F+1),this.arrayFill(Q.pointers,Squeak.Context_tempFrameStart+F,Squeak.Context_tempFrameStart+ee,this.nilObj),this.popN(F+1),this.reclaimableContextCount++,this.storeContextRegisters(),this.activeContext=Q,this.activeContext.dirty=!0,this.homeContext=Q,this.method=S,this.pc=0,this.sp=te,this.receiver=Q.pointers[Squeak.Context_receiver],this.receiver!==y)throw Error("receivers don't match");!S.compiled&&this.compiler&&this.compiler.compile(S,H,J),this.interruptCheckCounter--<=0&&this.checkForInterrupts()}},doReturn:function(y,S){if(!S){var F=this.homeContext;if(this.hasClosures)for(var P;!(P=F.pointers[Squeak.Context_closure]).isNil;)F=P.pointers[Squeak.Closure_outerContext];S=F.pointers[Squeak.Context_sender]}if(S.isNil||S.pointers[Squeak.Context_instructionPointer].isNil)return this.cannotReturn(y);for(var H,J=this.activeContext.pointers[Squeak.Context_sender];J!==S;){if(J.isNil)return this.cannotReturn(y);if(this.isUnwindMarked(J))return this.aboutToReturnThrough(y,J);J=J.pointers[Squeak.Context_sender]}for(J=this.activeContext;J!==S;)this.breakOnContextReturned===J&&(this.breakOnContextReturned=null,this.breakNow()),H=J.pointers[Squeak.Context_sender],J.pointers[Squeak.Context_sender]=this.nilObj,J.pointers[Squeak.Context_instructionPointer]=this.nilObj,0<this.reclaimableContextCount&&(this.reclaimableContextCount--,this.recycleIfPossible(J)),J=H;this.activeContext=J,this.activeContext.dirty=!0,this.fetchContextRegisters(this.activeContext),this.push(y),this.breakOnContextChanged&&(this.breakOnContextChanged=!1,this.breakNow())},aboutToReturnThrough:function(y,S){this.push(this.exportThisContext()),this.push(y),this.push(S);var F=this.specialObjects[Squeak.splOb_SelectorAboutToReturn];this.send(F,2)},cannotReturn:function(y){this.push(this.exportThisContext()),this.push(y);var S=this.specialObjects[Squeak.splOb_SelectorCannotReturn];this.send(S,1)},tryPrimitive:function(y,S,F){if(255<y&&y<520){if(264<=y)return this.popNandPush(1,this.top().pointers[y-264]),!0;switch(y){case 256:return!0;case 257:return this.popNandPush(1,this.trueObj),!0;case 258:return this.popNandPush(1,this.falseObj),!0;case 259:return this.popNandPush(1,this.nilObj),!0}return this.popNandPush(1,y-261),!0}var P=this.sp,H=this.activeContext,J=this.primHandler.doPrimitive(y,S,F);return J&&this.sp!==P-S&&H===this.activeContext&&117!==y&&!this.frozen&&this.warnOnce("stack unbalanced after primitive "+y,"error"),J},createActualMessage:function(y,S,F){var P=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMessage],0),H=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray],S);return this.arrayCopy(this.activeContext.pointers,this.sp-S+1,H.pointers,0,S),P.pointers[Squeak.Message_selector]=y,P.pointers[Squeak.Message_arguments]=H,P.pointers.length>Squeak.Message_lookupClass&&(P.pointers[Squeak.Message_lookupClass]=F),P},primitivePerform:function(y){var S=this.stackValue(y-1),F=this.stackValue(y),P=y-1,H=this.sp-P,J=this.activeContext.pointers;this.arrayCopy(J,1+H,J,H,P),this.sp--;var Q=this.findSelectorInClass(S,P,this.getClass(F));return this.executeNewMethod(F,Q.method,Q.argCount,Q.primIndex,Q.mClass,S),!0},primitivePerformWithArgs:function(y,S){var F=S?3:2,P=this.stackValue(F),H=this.stackValue(F-1),J=this.stackValue(F-2);if(J.sqClass!==this.specialObjects[Squeak.splOb_ClassArray])return!1;var Q=S?this.top():this.getClass(P);if(S)for(var ee=this.getClass(P);ee!==Q;)if((ee=ee.pointers[Squeak.Class_superclass]).isNil)return!1;var te=J.pointersSize(),re=this.sp-(F-1),ie=this.activeContext.pointers;this.arrayCopy(J.pointers,0,ie,re,te),this.sp+=te-y;var ae=this.findSelectorInClass(H,te,Q);return this.executeNewMethod(P,ae.method,ae.argCount,ae.primIndex,ae.mClass,H),!0},primitiveInvokeObjectAsMethod:function(y,S){for(var F=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray],y),P=0;P<y;P++)F.pointers[y-P-1]=this.pop();var H=this.pop(),J=this.currentSelector,Q=this.specialObjects[Squeak.splOb_SelectorRunWithIn];return this.push(S),this.push(J),this.push(F),this.push(H),this.send(Q,3,!1),!0},findMethodCacheEntry:function(y,S){var F;this.methodCacheRandomish=this.methodCacheRandomish+1&3;for(var P=(y.hash^S.hash)&this.methodCacheMask,H=P,J=0;J<4;J++){if((F=this.methodCache[H]).selector===y&&F.lkupClass===S)return F;J===this.methodCacheRandomish&&(P=H),H=H+y.hash&this.methodCacheMask}return(F=this.methodCache[P]).lkupClass=S,F.selector=y,F.method=null,F},flushMethodCache:function(){for(var y=0;y<this.methodCacheSize;y++)this.methodCache[y].selector=null,this.methodCache[y].method=null;return!0},flushMethodCacheForSelector:function(y){for(var S=0;S<this.methodCacheSize;S++)this.methodCache[S].selector===y&&(this.methodCache[S].selector=null,this.methodCache[S].method=null);return!0},flushMethodCacheForMethod:function(y){for(var S=0;S<this.methodCacheSize;S++)this.methodCache[S].method===y&&(this.methodCache[S].selector=null,this.methodCache[S].method=null);return!0},flushMethodCacheAfterBecome:function(y){this.flushMethodCache()}},"contexts",{isUnwindMarked:function(y){return!!this.isMethodContext(y)&&198==y.pointers[Squeak.Context_method].methodPrimitiveIndex()},newActiveContext:function(y){this.storeContextRegisters(),this.activeContext=y,this.activeContext.dirty=!0,this.fetchContextRegisters(y),this.breakOnContextChanged&&(this.breakOnContextChanged=!1,this.breakNow())},exportThisContext:function(){return this.storeContextRegisters(),this.reclaimableContextCount=0,this.activeContext},fetchContextRegisters:function(y){var S=y.pointers[Squeak.Context_method];this.isSmallInt(S)?(this.homeContext=y.pointers[Squeak.BlockContext_home],S=this.homeContext.pointers[Squeak.Context_method]):this.homeContext=y,this.receiver=this.homeContext.pointers[Squeak.Context_receiver],this.method=S,this.pc=this.decodeSqueakPC(y.pointers[Squeak.Context_instructionPointer],S),this.sp=this.decodeSqueakSP(y.pointers[Squeak.Context_stackPointer])},storeContextRegisters:function(){this.activeContext.pointers[Squeak.Context_instructionPointer]=this.encodeSqueakPC(this.pc,this.method),this.activeContext.pointers[Squeak.Context_stackPointer]=this.encodeSqueakSP(this.sp)},encodeSqueakPC:function(y,S){return y+4*S.pointers.length+1},decodeSqueakPC:function(y,S){return y-4*S.pointers.length-1},encodeSqueakSP:function(y){return y-(Squeak.Context_tempFrameStart-1)},decodeSqueakSP:function(y){return y+(Squeak.Context_tempFrameStart-1)},recycleIfPossible:function(y){if(this.isMethodContext(y))if(y.pointersSize()===Squeak.Context_tempFrameStart+Squeak.Context_smallFrameSize)y.pointers[0]=this.freeContexts,this.freeContexts=y;else{if(y.pointersSize()!==Squeak.Context_tempFrameStart+Squeak.Context_largeFrameSize)return;y.pointers[0]=this.freeLargeContexts,this.freeLargeContexts=y}},allocateOrRecycleContext:function(y){var S;return y?this.freeLargeContexts.isNil?(this.nAllocatedContexts++,this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMethodContext],Squeak.Context_largeFrameSize)):(S=this.freeLargeContexts,this.freeLargeContexts=S.pointers[0],this.nRecycledContexts++,S):this.freeContexts.isNil?(this.nAllocatedContexts++,this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMethodContext],Squeak.Context_smallFrameSize)):(S=this.freeContexts,this.freeContexts=S.pointers[0],this.nRecycledContexts++,S)}},"stack access",{pop:function(){return this.activeContext.pointers[this.sp--]},popN:function(y){this.sp-=y},push:function(y){this.activeContext.pointers[++this.sp]=y},popNandPush:function(y,S){this.activeContext.pointers[this.sp-=y-1]=S},top:function(){return this.activeContext.pointers[this.sp]},stackTopPut:function(y){this.activeContext.pointers[this.sp]=y},stackValue:function(y){return this.activeContext.pointers[this.sp-y]},stackInteger:function(y){return this.checkSmallInt(this.stackValue(y))},stackIntOrFloat:function(y){var S=this.stackValue(y);if("number"==typeof S)return S;if(void 0===S)return this.success=!1,0;if(S.isFloat)return this.resultIsFloat=!0,S.float;var F=S.bytes;if(F&&4==F.length){for(var P=0,H=3;0<=H;H--)P=256*P+F[H];if(S.sqClass===this.specialObjects[Squeak.splOb_ClassLargePositiveInteger])return P;if(S.sqClass===this.specialObjects[Squeak.splOb_ClassLargeNegativeInteger])return-P}return this.success=!1,0},pop2AndPushIntResult:function(y){return!(!this.success||!this.canBeSmallInt(y)||(this.popNandPush(2,y),0))},pop2AndPushNumResult:function(y){if(this.success){if(this.resultIsFloat)return this.popNandPush(2,this.primHandler.makeFloat(y)),!0;if(y>=Squeak.MinSmallInt&&y<=Squeak.MaxSmallInt)return this.popNandPush(2,y),!0;if(-4294967295<=y&&y<=4294967295){var S=y<0,F=S?-y:y,P=S?Squeak.splOb_ClassLargeNegativeInteger:Squeak.splOb_ClassLargePositiveInteger,H=this.instantiateClass(this.specialObjects[P],4),J=H.bytes;return J[0]=255&F,J[1]=F>>8&255,J[2]=F>>16&255,J[3]=F>>24&255,this.popNandPush(2,H),!0}}return!1},pop2AndPushBoolResult:function(y){return!!this.success&&(this.popNandPush(2,y?this.trueObj:this.falseObj),!0)}},"numbers",{getClass:function(y){return this.isSmallInt(y)?this.specialObjects[Squeak.splOb_ClassInteger]:y.sqClass},canBeSmallInt:function(y){return y>=Squeak.MinSmallInt&&y<=Squeak.MaxSmallInt},isSmallInt:function(y){return"number"==typeof y},checkSmallInt:function(y){return"number"==typeof y?y:(this.success=!1,1)},quickDivide:function(y,S){if(0===S)return Squeak.NonSmallInt;var F=y/S|0;return F*S===y?F:Squeak.NonSmallInt},div:function(y,S){return 0===S?Squeak.NonSmallInt:Math.floor(y/S)},mod:function(y,S){return 0===S?Squeak.NonSmallInt:y-Math.floor(y/S)*S},safeShift:function(y,S){if(S<0)return S<-31?y<0?-1:0:y>>-S;if(31<S)return 0==y?0:Squeak.NonSmallInt;var F=y<<S;return F>>S===y?F:Squeak.NonSmallInt}},"utils",{isContext:function(y){return y.sqClass===this.specialObjects[Squeak.splOb_ClassMethodContext]||y.sqClass===this.specialObjects[Squeak.splOb_ClassBlockContext]},isMethodContext:function(y){return y.sqClass===this.specialObjects[Squeak.splOb_ClassMethodContext]},instantiateClass:function(y,S){return this.image.instantiateClass(y,S,this.nilObj)},arrayFill:function(y,S,F,P){for(var H=S;H<F;H++)y[H]=P},arrayCopy:function(y,S,F,P,H){if(y===F&&S<P)for(var J=H-1;0<=J;J--)F[P+J]=y[S+J];else for(J=0;J<H;J++)F[P+J]=y[S+J]},signalLowSpaceIfNecessary:function(y){y<this.lowSpaceThreshold&&0<this.lowSpaceThreshold&&(this.signalLowSpace=!0,this.lowSpaceThreshold=0,this.specialObjects[Squeak.splOb_ProcessSignalingLowSpace].isNil&&(this.specialObjects[Squeak.splOb_ProcessSignalingLowSpace]=this.activeProcess),this.forceInterruptCheck())}},"debugging",{addMessage:function(y){return this.messages[y]?++this.messages[y]:this.messages[y]=1},warnOnce:function(y,S){1==this.addMessage(y)&&console[S||"warn"](y)},printMethod:function(y,S,F){return y.sqClass!=this.specialObjects[Squeak.splOb_ClassCompiledMethod]?this.printMethod(y.blockOuterCode(),S,F):F?S.className()+">>"+F.bytesAsString():(y=y||this.activeContext.contextMethod(),this.allMethodsDo((function(S,F,H){if(F===y)return P=S.className()+">>"+H.bytesAsString()})),P||(S?"("+S.pointers[Squeak.Context_receiver]+")>>?":"?>>?"));var P},allInstancesOf:function(y,S){"string"==typeof y&&(y=this.globalNamed(y));for(var F=[],P=this.image.someInstanceOf(y);P;)S?S(P):F.push(P),P=this.image.nextInstanceAfter(P);return F},globalNamed:function(y){return this.allGlobalsDo((function(S,F){if(S.bytesAsString()===y)return F}))},allGlobalsDo:function(y){for(var S=this.getGlobals(),F=0;F<S.length;F++){var P=S[F];if(!P.isNil){var H=y(P.pointers[0],P.pointers[1]);if(H)return H}}},allMethodsDo:function(y){this.allGlobalsDo((function(S,F){if(F.pointers&&9<=F.pointers.length)for(var P=[F,F.sqClass],H=0;H<P.length;H++){var J=P[H],Q=J.pointers[1];if(Q.pointers&&Q.pointers[1]){var ee=Q.pointers[1].pointers;if(ee){var te=Q.pointers;if(ee.length+2===te.length)for(var re=0;re<ee.length;re++){var ie=ee[re],ae=te[2+re];if(ie.isMethod&&ie.isMethod()&&ae.bytesSize&&ae.bytesSize()&&y.call(null,J,ie,ae))return!0}}}}}))},printStack:function(y,S){"number"==typeof y&&(S=y,y=null),y=y||this.activeContext,S=S||100;for(var F=[],P=Math.max(S,1e6);!y.isNil&&0<P--;)F.push(y),y=y.pointers[Squeak.Context_sender];F.length>S+200&&(y.isNil||F.push("..."),F=F.slice(0,S).concat(["..."]).concat(F.slice(-200)));for(var H=[],J=F.length;0<J--;)if((y=F[J]).pointers){var Q="",ee=y.pointers[Squeak.Context_method];"number"==typeof ee?(ee=y.pointers[Squeak.BlockContext_home].pointers[Squeak.Context_method],Q="[] in "):y.pointers[Squeak.Context_closure].isNil||(Q="[] in "),H.push(Q+this.printMethod(ee,y)+"\n")}else H.push("...\n");return H.join("")},findMethod:function(y){var S,F=y.split(">>")[0],P=y.split(">>")[1];return this.allMethodsDo((function(y,H,J){if(P.length==J.bytesSize()&&P==J.bytesAsString()&&F==y.className())return S=H})),S},breakNow:function(y){y&&console.log("Break: "+y),this.breakOutOfInterpreter="break"},breakOn:function(y){return this.breakOnMethod=y&&this.findMethod(y)},breakOnReturnFromThisContext:function(){this.breakOnContextChanged=!1,this.breakOnContextReturned=this.activeContext},breakOnSendOrReturn:function(){this.breakOnContextChanged=!0,this.breakOnContextReturned=null},printActiveContext:function(y){function e(S){var F=S.sqInstName?S.sqInstName():S.toString();return(F=JSON.stringify(F).slice(1,-1)).length>y-3&&(F=F.slice(0,y-3)+"..."),F}y=y||72;for(var S=this.activeContext,F="number"==typeof S.pointers[Squeak.BlockContext_argumentCount],P=S.pointers[Squeak.Context_closure],H=!F&&!P.isNil,J=F?S.pointers[Squeak.BlockContext_home]:S,Q=H?P.pointers[Squeak.Closure_numArgs]:J.pointers[Squeak.Context_method].methodTempCount(),ee=this.decodeSqueakSP(0),te=J.contextSizeWithStack(this)-1,re=ee+1,ie=re+Q-1,ae="",se=ee;se<=te;se++){var ne="";se==ee?ne="=rcvr":se<=ie&&(ne="=tmp"+(se-re)),ae+="\nctx["+se+"]"+ne+": "+e(J.pointers[se])}if(F){ae+="\n";var oe=S.pointers[3],ue=this.decodeSqueakSP(1),le=ue+oe;for(se=ue;se<=this.sp;se++)ne="",se<=le&&(ne="=arg"+(se-ue)),ae+="\nblk["+se+"]"+ne+": "+e(S.pointers[se])}return ae},printAllProcesses:function(){for(var y=this.specialObjects[Squeak.splOb_SchedulerAssociation].pointers[Squeak.Assn_value],S=y.pointers[Squeak.ProcSched_activeProcess],F="Active: "+this.printProcess(S,!0),P=y.pointers[Squeak.ProcSched_processLists].pointers,H=P.length-1;0<=H;H--)for(var J=P[H].pointers[Squeak.LinkedList_firstLink];!J.isNil;)F+="\nRunnable: "+this.printProcess(J),J=J.pointers[Squeak.Link_nextLink];for(var Q=this.specialObjects[Squeak.splOb_ClassSemaphore],ee=this.image.someInstanceOf(Q);ee;){for(J=ee.pointers[Squeak.LinkedList_firstLink];!J.isNil;)F+="\nWaiting: "+this.printProcess(J),J=J.pointers[Squeak.Link_nextLink];ee=this.image.nextInstanceAfter(ee)}return F},printProcess:function(y,S){var F=y.pointers[Squeak.Proc_suspendedContext],P=y.pointers[Squeak.Proc_priority],H=this.printStack(S?null:F);return y.toString()+" at priority "+P+"\n"+H},printByteCodes:function(y,S,F,P){return y=y||this.method,new Squeak.InstructionPrinter(y,this).printInstructions(S,F,P)},willSendOrReturn:function(){var y=this.method.bytes[this.pc];if(this.method.methodSignFlag()){if(96<=y&&y<=127)F=this.specialSelectors[2*(y-96)];else if(128<=y&&y<=175)F=this.method.methodGetSelector(15&y);else if(234==y||235==y)this.method.methodGetSelector(this.method.bytes[this.pc+1]>>3);else if(88<=y&&y<=94)return!0}else{if(120<=y&&y<=125)return!0;if(y<131||200==y)return!1;if(176<=y)return!0;if(y<=134){var S;if(132===y){if(1<this.method.bytes[this.pc+1]>>5)return!1;S=this.method.bytes[this.pc+2]}else S=this.method.bytes[this.pc+1]&(134===y?63:31);var F=this.method.methodGetLiteral(S);if("blockCopy:"!==F.bytesAsString())return!0}}return!1},nextSendSelector:function(){var y,S=this.method.bytes[this.pc];if(this.method.methodSignFlag())if(96<=S&&S<=127)y=this.specialSelectors[2*(S-96)];else if(128<=S&&S<=175)y=this.method.methodGetSelector(15&S);else{if(234!=S&&235!=S)return null;this.method.methodGetSelector(this.method.bytes[this.pc+1]>>3)}else{if(S<131||200==S)return null;if(208<=S)y=this.method.methodGetLiteral(15&S);else if(176<=S)y=this.specialSelectors[2*(S-176)];else if(S<=134){var F;if(132===S){if(1<this.method.bytes[this.pc+1]>>5)return null;F=this.method.bytes[this.pc+2]}else F=this.method.bytes[this.pc+1]&(134===S?63:31);y=this.method.methodGetLiteral(F)}}if(y){var P=y.bytesAsString();if("blockCopy:"!==P)return P}}}),Object.subclass("Squeak.InterpreterProxy","initialization",{VM_PROXY_MAJOR:1,VM_PROXY_MINOR:11,initialize:function(y){this.vm=y,this.remappableOops=[],Object.defineProperty(this,"successFlag",{get:function(){return y.primHandler.success},set:function(S){y.primHandler.success=S}})},majorVersion:function(){return this.VM_PROXY_MAJOR},minorVersion:function(){return this.VM_PROXY_MINOR}},"success",{failed:function(){return!this.successFlag},primitiveFail:function(){this.successFlag=!1},primitiveFailFor:function(y){this.successFlag=!1},success:function(y){y||(this.successFlag=!1)}},"stack access",{pop:function(y){this.vm.popN(y)},popthenPush:function(y,S){this.vm.popNandPush(y,S)},push:function(y){this.vm.push(y)},pushBool:function(y){this.vm.push(y?this.vm.trueObj:this.vm.falseObj)},pushInteger:function(y){this.vm.push(y)},pushFloat:function(y){this.vm.push(this.floatObjectOf(y))},stackValue:function(y){return this.vm.stackValue(y)},stackIntegerValue:function(y){var S=this.vm.stackValue(y);return"number"==typeof S?S:(this.successFlag=!1,0)},stackFloatValue:function(y){this.vm.success=!0;var S=this.vm.stackIntOrFloat(y);return this.vm.success?S:(this.successFlag=!1,0)},stackObjectValue:function(y){var S=this.vm.stackValue(y);return"number"!=typeof S?S:(this.successFlag=!1,this.vm.nilObj)},stackBytes:function(y){var S=this.vm.stackValue(y);return S.bytes?S.bytes:("number"!=typeof S&&S.isBytes()||(this.successFlag=!1),[])},stackWords:function(y){var S=this.vm.stackValue(y);return S.words?S.words:("number"!=typeof S&&S.isWords()||(this.successFlag=!1),[])},stackInt32Array:function(y){var S=this.vm.stackValue(y);return S.words?S.wordsAsInt32Array():("number"!=typeof S&&S.isWords()||(this.successFlag=!1),[])},stackInt16Array:function(y){var S=this.vm.stackValue(y);return S.words?S.wordsAsInt16Array():("number"!=typeof S&&S.isWords()||(this.successFlag=!1),[])},stackUint16Array:function(y){var S=this.vm.stackValue(y);return S.words?S.wordsAsUint16Array():("number"!=typeof S&&S.isWords()||(this.successFlag=!1),[])}},"object access",{isBytes:function(y){return"number"!=typeof y&&y.isBytes()},isWords:function(y){return"number"!=typeof y&&y.isWords()},isWordsOrBytes:function(y){return"number"!=typeof y&&y.isWordsOrBytes()},isPointers:function(y){return"number"!=typeof y&&y.isPointers()},isIntegerValue:function(y){return"number"==typeof y&&-1073741824<=y&&y<=1073741823},isArray:function(y){return y.sqClass===this.vm.specialObjects[Squeak.splOb_ClassArray]},isMemberOf:function(y,S){var F=y.sqClass.pointers[Squeak.Class_name].bytes;if(S.length!==F.length)return!1;for(var P=0;P<S.length;P++)if(S.charCodeAt(P)!==F[P])return!1;return!0},booleanValueOf:function(y){return!!y.isTrue||!y.isFalse&&(this.successFlag=!1)},positive32BitValueOf:function(y){return this.vm.primHandler.positive32BitValueOf(y)},positive32BitIntegerFor:function(y){return this.vm.primHandler.pos32BitIntFor(y)},floatValueOf:function(y){return y.isFloat?y.float:(this.successFlag=!1,0)},floatObjectOf:function(y){return this.vm.primHandler.makeFloat(y)},fetchPointerofObject:function(y,S){return S.pointers[y]},fetchBytesofObject:function(y,S){var F=S.pointers[y];return F.bytes?F.bytes:F.words?F.wordsAsUint8Array():("number"!=typeof F&&F.isWordsOrBytes()||(this.successFlag=!1),[])},fetchWordsofObject:function(y,S){var F=S.pointers[y];return F.words?F.words:("number"!=typeof F&&F.isWords()||(this.successFlag=!1),[])},fetchInt32ArrayofObject:function(y,S){var F=S.pointers[y];return F.words?F.wordsAsInt32Array():("number"!=typeof F&&F.isWords()||(this.successFlag=!1),[])},fetchInt16ArrayofObject:function(y,S){var F=S.pointers[y];return F.words?F.wordsAsInt16Array():("number"!=typeof F&&F.isWords()||(this.successFlag=!1),[])},fetchUint16ArrayofObject:function(y,S){var F=S.pointers[y];return F.words?F.wordsAsUint16Array():("number"!=typeof F&&F.isWords()||(this.successFlag=!1),[])},fetchIntegerofObject:function(y,S){var F=S.pointers[y];return"number"==typeof F?F:(this.successFlag=!1,0)},fetchLong32ofObject:function(y,S){return S.words[y]},fetchFloatofObject:function(y,S){return this.floatValueOf(S.pointers[y])},storeIntegerofObjectwithValue:function(y,S,F){"number"==typeof F?S.pointers[y]=F:this.successFlag=!1},storePointerofObjectwithValue:function(y,S,F){S.pointers[y]=F},stObjectatput:function(y,S,F){if(y.sqClass!==this.classArray())throw Error("Array expected");if(S<1||S>=y.pointers.length)return this.successFlag=!1;y.pointers[S]=F}},"constant access",{isKindOfInteger:function(y){return"number"==typeof y||y.sqClass==this.classLargeNegativeInteger()||y.sqClass==this.classLargePositiveInteger()},classArray:function(){return this.vm.specialObjects[Squeak.splOb_ClassArray]},classBitmap:function(){return this.vm.specialObjects[Squeak.splOb_ClassBitmap]},classSmallInteger:function(){return this.vm.specialObjects[Squeak.splOb_ClassInteger]},classLargePositiveInteger:function(){return this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger]},classLargeNegativeInteger:function(){return this.vm.specialObjects[Squeak.splOb_ClassLargeNegativeInteger]},classPoint:function(){return this.vm.specialObjects[Squeak.splOb_ClassPoint]},classString:function(){return this.vm.specialObjects[Squeak.splOb_ClassString]},nilObject:function(){return this.vm.nilObj},falseObject:function(){return this.vm.falseObj},trueObject:function(){return this.vm.trueObj}},"vm functions",{instantiateClassindexableSize:function(y,S){return this.vm.instantiateClass(y,S)},methodArgumentCount:function(){return this.argCount},makePointwithxValueyValue:function(y,S){return this.vm.primHandler.makePointWithXandY(y,S)},pushRemappableOop:function(y){this.remappableOops.push(y)},popRemappableOop:function(){return this.remappableOops.pop()},showDisplayBitsLeftTopRightBottom:function(y,S,F,P,H){if(S<P&&F<H){var J={left:S,top:F,right:P,bottom:H};this.vm.primHandler.displayDirty(y,J)}},ioLoadFunctionFrom:function(y,S){return this.vm.primHandler.loadFunctionFrom(y,S)}}),Object.subclass("Squeak.InstructionStream","initialization",{initialize:function(y,S){this.vm=S,this.method=y,this.pc=0,this.specialConstants=[S.trueObj,S.falseObj,S.nilObj,-1,0,1,2]}},"decoding",{interpretNextInstructionFor:function(y){var S=this.method,F=S.bytes[this.pc++],P=F/16|0,H=F%16;if(0==P)return y.pushReceiverVariable(H);if(1==P)return y.pushTemporaryVariable(H);if(2==P)return y.pushConstant(S.methodGetLiteral(H));if(3==P)return y.pushConstant(S.methodGetLiteral(16+H));if(4==P)return y.pushLiteralVariable(S.methodGetLiteral(H));if(5==P)return y.pushLiteralVariable(S.methodGetLiteral(16+H));if(6==P)return H<8?y.popIntoReceiverVariable(H):y.popIntoTemporaryVariable(H-8);if(7==P){if(0==H)return y.pushReceiver();if(H<8)return y.pushConstant(this.specialConstants[H-1]);if(8==H)return y.methodReturnReceiver();if(H<12)return y.methodReturnConstant(this.specialConstants[H-9]);if(12==H)return y.methodReturnTop();if(13==H)return y.blockReturnTop();if(13<H)throw Error("unusedBytecode")}return 8==P?this.interpretExtension(H,S,y):9==P?H<8?y.jump(1+H):y.jumpIf(!1,H-8+1):10==P?(F=this.method.bytes[this.pc++],H<8?y.jump(256*(H-4)+F):y.jumpIf(H<12,256*(3&H)+F)):11==P?y.send(this.vm.specialSelectors[2*H],this.vm.specialSelectors[2*H+1],!1):12==P?y.send(this.vm.specialSelectors[2*(16+H)],this.vm.specialSelectors[2*(16+H)+1],!1):12<P?y.send(S.methodGetLiteral(H),P-13,!1):void 0},interpretExtension:function(y,S,F){if(y<=6){var P=this.method.bytes[this.pc++];if(y<=2){var H=P/64|0,J=P%64;if(0===y){if(0===H)return F.pushReceiverVariable(J);if(1===H)return F.pushTemporaryVariable(J);if(2===H)return F.pushConstant(this.method.methodGetLiteral(J));if(3===H)return F.pushLiteralVariable(this.method.methodGetLiteral(J))}if(1===y){if(0===H)return F.storeIntoReceiverVariable(J);if(1===H)return F.storeIntoTemporaryVariable(J);if(2===H)throw Error("illegalStore");if(3===H)return F.storeIntoLiteralVariable(this.method.methodGetLiteral(J))}if(2===y){if(0===H)return F.popIntoReceiverVariable(J);if(1===H)return F.popIntoTemporaryVariable(J);if(2===H)throw Error("illegalStore");if(3===H)return F.popIntoLiteralVariable(this.method.methodGetLiteral(J))}}if(3===y)return F.send(this.method.methodGetLiteral(P%32),P/32|0,!1);if(4===y){var Q=this.method.bytes[this.pc++];if(0==(H=P/32|0))return F.send(this.method.methodGetLiteral(Q),P%32,!1);if(1===H)return F.send(this.method.methodGetLiteral(Q),P%32,!0);if(2===H)return F.pushReceiverVariable(Q);if(3===H)return F.pushConstant(this.method.methodGetLiteral(Q));if(4===H)return F.pushLiteralVariable(this.method.methodGetLiteral(Q));if(5===H)return F.storeIntoReceiverVariable(Q);if(6===H)return F.popIntoReceiverVariable(Q);if(7===H)return F.storeIntoLiteralVariable(this.method.methodGetLiteral(Q))}if(5===y)return F.send(this.method.methodGetLiteral(31&P),P>>5,!0);if(6===y)return F.send(this.method.methodGetLiteral(63&P),P>>6,!1)}if(7===y)return F.doPop();if(8===y)return F.doDup();if(9===y)return F.pushActiveContext();if(P=this.method.bytes[this.pc++],10===y)return P<128?F.pushNewArray(P):F.popIntoNewArray(P-128);if(Q=this.method.bytes[this.pc++],11===y)return F.callPrimitive(P+256*Q);if(12===y)return F.pushRemoteTemp(P,Q);if(13===y)return F.storeIntoRemoteTemp(P,Q);if(14===y)return F.popIntoRemoteTemp(P,Q);var ee=this.method.bytes[this.pc++];return F.pushClosureCopy(P>>4,15&P,256*Q+ee)}}),Squeak.InstructionStream.subclass("Squeak.InstructionStreamSista","decoding",{interpretNextInstructionFor:function(y){return this.interpretNextInstructionExtFor(y,0,0)},interpretNextInstructionExtFor:function(y,S,F){this.Squeak;var P=this.method.bytes[this.pc++];switch(P){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return y.pushReceiverVariable(15&P);case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:return y.pushLiteralVariable(this.method.methodGetLiteral(15&P));case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:case 59:case 60:case 61:case 62:case 63:return y.pushConstant(this.method.methodGetLiteral(31&P));case 64:case 65:case 66:case 67:case 68:case 69:case 70:case 71:return y.pushTemporaryVariable(15&P);case 72:case 73:case 74:case 75:return y.pushTemporaryVariable(8+(3&P));case 76:return y.pushReceiver();case 77:return y.pushConstant(this.vm.trueObj);case 78:return y.pushConstant(this.vm.falseObj);case 79:return y.pushConstant(this.vm.nilObj);case 80:return y.pushConstant(0);case 81:return y.pushConstant(1);case 82:return y.pushActiveContext();case 83:return y.doDup();case 88:return y.methodReturnReceiver();case 89:return y.methodReturnConstant(this.vm.trueObj);case 90:return y.methodReturnConstant(this.vm.falseObj);case 91:return y.methodReturnConstant(this.vm.nilObj);case 92:return y.methodReturnTop();case 93:return y.blockReturnConstant(this.vm.nilObj);case 94:if(0===S)return y.blockReturnTop();break;case 95:return y.nop();case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 125:case 126:case 127:return y.send(this.vm.specialSelectors[2*(P-96)],this.vm.specialSelectors[2*(P-96)+1],!1);case 128:case 129:case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 141:case 142:case 143:return y.send(this.method.methodGetLiteral(15&P),0,!1);case 144:case 145:case 146:case 147:case 148:case 149:case 150:case 151:case 152:case 153:case 154:case 155:case 156:case 157:case 158:case 159:return y.send(this.method.methodGetLiteral(15&P),1,!1);case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 174:case 175:return y.send(this.method.methodGetLiteral(15&P),2,!1);case 176:case 177:case 178:case 179:case 180:case 181:case 182:case 183:return y.jump(1+(7&P));case 184:case 185:case 186:case 187:case 188:case 189:case 190:case 191:return y.jumpIf(!0,1+(7&P));case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:return y.jumpIf(!1,1+(7&P));case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:return y.popIntoReceiverVariable(7&P);case 208:case 209:case 210:case 211:case 212:case 213:case 214:case 215:return y.popIntoTemporaryVariable(P-208);case 216:return y.doPop()}var H=this.method.bytes[this.pc++];switch(P){case 224:return this.interpretNextInstructionExtFor(y,(S<<8)+H,F);case 225:return this.interpretNextInstructionExtFor(y,S,(F<<8)+(H<128?H:H-256));case 226:return y.pushReceiverVariable(H+(S<<8));case 227:return y.pushLiteralVariable(this.method.methodGetLiteral(H+(S<<8)));case 228:return y.pushConstant(this.method.methodGetLiteral(H+(S<<8)));case 229:return y.pushTemporaryVariable(H);case 231:return H<128?y.pushNewArray(H):y.popIntoNewArray(H-128);case 232:return y.pushConstant(H+(F<<8));case 233:return y.pushConstant("$"+H+(F<<8));case 234:return y.send(this.method.methodGetSelector((H>>3)+(S<<5)),(7&H)+(F<<3),!1);case 235:var J=this.method.methodGetSelector((H>>3)+(S<<5));return 64<=F?y.sendSuperDirected(J):y.send(J,(7&H)+(F<<3),!0);case 237:return y.jump(H+(F<<8));case 238:return y.jumpIf(!0,H+(F<<8));case 239:return y.jumpIf(!1,H+(F<<8));case 240:return y.popIntoReceiverVariable(H+(S<<8));case 241:return y.popIntoLiteralVariable(this.method.methodGetLiteral(H+(S<<8)));case 242:return y.popIntoTemporaryVariable(H);case 243:return y.storeIntoReceiverVariable(H+(S<<8));case 244:return y.storeIntoLiteralVariable(this.method.methodGetLiteral(H+(S<<8)));case 245:return y.storeIntoTemporaryVariable(H)}var Q=this.method.bytes[this.pc++];switch(P){case 248:return y.callPrimitive(H+(Q<<8));case 249:var ee=H+(S<<8),te=63&Q,re=this.method.methodGetLiteral(ee);return y.pushFullClosure(ee,te,re.methodNumArgs());case 250:var ie=(7&H)+8*this.mod(S,16),ae=(te=(H>>3&7)+8*this.div(S,16),Q+(F<<8));return y.pushClosureCopy(te,ie,ae);case 251:return y.pushRemoteTemp(H,Q);case 252:return y.storeIntoRemoteTemp(H,Q);case 253:return y.popIntoRemoteTemp(H,Q)}throw Error("Unknown bytecode: "+P)}}),Object.subclass("Squeak.InstructionPrinter","initialization",{initialize:function(y,S){this.method=y,this.vm=S}},"printing",{printInstructions:function(y,S,F){this.indent=y,this.highlight=S,this.highlightPC=F,this.innerIndents={},this.result="",this.scanner=this.method.methodSignFlag()?new Squeak.InstructionStreamSista(this.method,this.vm):new Squeak.InstructionStream(this.method,this.vm),this.oldPC=this.scanner.pc,this.endPC=0,this.done=!1;try{for(;!this.done;)this.scanner.interpretNextInstructionFor(this)}catch(y){this.print("!!! "+y.message)}return this.result},print:function(y){this.oldPC===this.highlightPC?this.highlight&&(this.result+=this.highlight):this.indent&&(this.result+=this.indent),this.result+=this.oldPC;for(var S=0;S<this.innerIndents[this.oldPC];S++)this.result+="   ";for(this.result+=" <",S=this.oldPC;S<this.scanner.pc;S++)S>this.oldPC&&(this.result+=" "),this.result+=(this.method.bytes[S]+256).toString(16).substr(-2).toUpperCase();this.result+="> "+y+"\n",this.oldPC=this.scanner.pc}},"decoding",{blockReturnConstant:function(y){this.print("blockReturn: "+y.toString())},blockReturnTop:function(){this.print("blockReturn")},doDup:function(){this.print("dup")},doPop:function(){this.print("pop")},jump:function(y){this.print("jumpTo: "+(this.scanner.pc+y)),this.scanner.pc+y>this.endPC&&(this.endPC=this.scanner.pc+y)},jumpIf:function(y,S){this.print((y?"jumpIfTrue: ":"jumpIfFalse: ")+(this.scanner.pc+S)),this.scanner.pc+S>this.endPC&&(this.endPC=this.scanner.pc+S)},methodReturnReceiver:function(){this.print("return: receiver"),this.done=this.scanner.pc>this.endPC},methodReturnTop:function(){this.print("return: topOfStack"),this.done=this.scanner.pc>this.endPC},methodReturnConstant:function(y){this.print("returnConst: "+y.toString()),this.done=this.scanner.pc>this.endPC},nop:function(){this.print("nop")},popIntoLiteralVariable:function(y){this.print("popIntoBinding: "+y.assnKeyAsString())},popIntoReceiverVariable:function(y){this.print("popIntoInstVar: "+y)},popIntoTemporaryVariable:function(y){this.print("popIntoTemp: "+y)},pushActiveContext:function(){this.print("push: thisContext")},pushConstant:function(y){var S=y.sqInstName?y.sqInstName():y.toString();this.print("pushConst: "+S)},pushLiteralVariable:function(y){this.print("pushBinding: "+y.assnKeyAsString())},pushReceiver:function(){this.print("push: self")},pushReceiverVariable:function(y){this.print("pushInstVar: "+y)},pushTemporaryVariable:function(y){this.print("pushTemp: "+y)},send:function(y,S,F){this.print((F?"superSend: #":"send: #")+(y.bytesAsString?y.bytesAsString():y))},sendSuperDirected:function(y){this.print("directedSuperSend: #"+(y.bytesAsString?y.bytesAsString():y))},storeIntoLiteralVariable:function(y){this.print("storeIntoBinding: "+y.assnKeyAsString())},storeIntoReceiverVariable:function(y){this.print("storeIntoInstVar: "+y)},storeIntoTemporaryVariable:function(y){this.print("storeIntoTemp: "+y)},pushNewArray:function(y){this.print("push: (Array new: "+y+")")},popIntoNewArray:function(y){this.print("pop: "+y+" into: (Array new: "+y+")")},pushRemoteTemp:function(y,S){this.print("push: "+y+" ofTemp: "+S)},storeIntoRemoteTemp:function(y,S){this.print("storeInto: "+y+" ofTemp: "+S)},popIntoRemoteTemp:function(y,S){this.print("popInto: "+y+" ofTemp: "+S)},pushClosureCopy:function(y,S,F){var P=this.scanner.pc,H=P+F;this.print("closure("+P+"-"+(H-1)+"): "+y+" copied, "+S+" args");for(var J=P;J<H;J++)this.innerIndents[J]=(this.innerIndents[J]||0)+1;H>this.endPC&&(this.endPC=H)},pushFullClosure:function(y,S,F){this.print("pushFullClosure: (self literalAt: "+y+") numCopied: "+S+" numArgs: "+F)},callPrimitive:function(y){this.print("primitive: "+y)}}),Object.subclass("Squeak.Primitives","initialization",{initialize:function(y,S){this.vm=y,this.oldPrims=!this.vm.image.hasClosures,this.allowAccessBeyondSP=this.oldPrims,this.deferDisplayUpdates=!1,this.semaphoresToSignal=[],this.initDisplay(S),this.initAtCache(),this.initModules(),this.initPlugins(),y.image.isSpur&&(this.charFromInt=this.charFromIntSpur,this.charToInt=this.charToIntSpur,this.identityHash=this.identityHashSpur)},initDisplay:function(y){this.display=y},initModules:function(){this.loadedModules={},this.builtinModules={},this.patchModules={},this.interpreterProxy=new Squeak.InterpreterProxy(this.vm)},initPlugins:function(){}},"dispatch",{quickSendOther:function(y,S){switch(this.success=!0,S){case 0:return this.popNandPushIfOK(2,this.objectAt(!0,!0,!1));case 1:return this.popNandPushIfOK(3,this.objectAtPut(!0,!0,!1));case 2:return this.popNandPushIfOK(1,this.objectSize(!0));case 6:return this.pop2andPushBoolIfOK(this.vm.stackValue(1)===this.vm.stackValue(0));case 7:return this.popNandPushIfOK(1,this.vm.getClass(this.vm.top()));case 8:return this.popNandPushIfOK(2,this.doBlockCopy());case 9:return this.primitiveBlockValue(0);case 10:return this.primitiveBlockValue(1)}return!1},doPrimitive:function(y,S,F){switch(this.success=!0,y){case 1:return this.popNandPushIntIfOK(2,this.stackInteger(1)+this.stackInteger(0));case 2:return this.popNandPushIntIfOK(2,this.stackInteger(1)-this.stackInteger(0));case 3:return this.pop2andPushBoolIfOK(this.stackInteger(1)<this.stackInteger(0));case 4:return this.pop2andPushBoolIfOK(this.stackInteger(1)>this.stackInteger(0));case 5:return this.pop2andPushBoolIfOK(this.stackInteger(1)<=this.stackInteger(0));case 6:return this.pop2andPushBoolIfOK(this.stackInteger(1)>=this.stackInteger(0));case 7:return this.pop2andPushBoolIfOK(this.stackInteger(1)===this.stackInteger(0));case 8:return this.pop2andPushBoolIfOK(this.stackInteger(1)!==this.stackInteger(0));case 9:return this.popNandPushIntIfOK(2,this.stackInteger(1)*this.stackInteger(0));case 10:return this.popNandPushIntIfOK(2,this.vm.quickDivide(this.stackInteger(1),this.stackInteger(0)));case 11:return this.popNandPushIntIfOK(2,this.vm.mod(this.stackInteger(1),this.stackInteger(0)));case 12:return this.popNandPushIntIfOK(2,this.vm.div(this.stackInteger(1),this.stackInteger(0)));case 13:return this.popNandPushIntIfOK(2,this.stackInteger(1)/this.stackInteger(0)|0);case 14:return this.popNandPushIfOK(2,this.doBitAnd());case 15:return this.popNandPushIfOK(2,this.doBitOr());case 16:return this.popNandPushIfOK(2,this.doBitXor());case 17:return this.popNandPushIfOK(2,this.doBitShift());case 18:return this.primitiveMakePoint(S,!1);case 19:return!1;case 20:return this.vm.warnOnce("missing primitive: 20 (primitiveRemLargeIntegers)"),!1;case 21:return this.vm.warnOnce("missing primitive: 21 (primitiveAddLargeIntegers)"),!1;case 22:return this.vm.warnOnce("missing primitive: 22 (primitiveSubtractLargeIntegers)"),!1;case 23:return this.primitiveLessThanLargeIntegers();case 24:return this.primitiveGreaterThanLargeIntegers();case 25:return this.primitiveLessOrEqualLargeIntegers();case 26:return this.primitiveGreaterOrEqualLargeIntegers();case 27:return this.primitiveEqualLargeIntegers();case 28:return this.primitiveNotEqualLargeIntegers();case 29:return this.vm.warnOnce("missing primitive: 29 (primitiveMultiplyLargeIntegers)"),!1;case 30:return this.vm.warnOnce("missing primitive: 30 (primitiveDivideLargeIntegers)"),!1;case 31:return this.vm.warnOnce("missing primitive: 31 (primitiveModLargeIntegers)"),!1;case 32:return this.vm.warnOnce("missing primitive: 32 (primitiveDivLargeIntegers)"),!1;case 33:return this.vm.warnOnce("missing primitive: 33 (primitiveQuoLargeIntegers)"),!1;case 34:return this.vm.warnOnce("missing primitive: 34 (primitiveBitAndLargeIntegers)"),!1;case 35:return this.vm.warnOnce("missing primitive: 35 (primitiveBitOrLargeIntegers)"),!1;case 36:return this.vm.warnOnce("missing primitive: 36 (primitiveBitXorLargeIntegers)"),!1;case 37:return this.vm.warnOnce("missing primitive: 37 (primitiveBitShiftLargeIntegers)"),!1;case 38:return this.popNandPushIfOK(S+1,this.objectAt(!1,!1,!1));case 39:return this.popNandPushIfOK(S+1,this.objectAtPut(!1,!1,!1));case 40:return this.popNandPushFloatIfOK(S+1,this.stackInteger(0));case 41:return this.popNandPushFloatIfOK(S+1,this.stackFloat(1)+this.stackFloat(0));case 42:return this.popNandPushFloatIfOK(S+1,this.stackFloat(1)-this.stackFloat(0));case 43:return this.pop2andPushBoolIfOK(this.stackFloat(1)<this.stackFloat(0));case 44:return this.pop2andPushBoolIfOK(this.stackFloat(1)>this.stackFloat(0));case 45:return this.pop2andPushBoolIfOK(this.stackFloat(1)<=this.stackFloat(0));case 46:return this.pop2andPushBoolIfOK(this.stackFloat(1)>=this.stackFloat(0));case 47:return this.pop2andPushBoolIfOK(this.stackFloat(1)===this.stackFloat(0));case 48:return this.pop2andPushBoolIfOK(this.stackFloat(1)!==this.stackFloat(0));case 49:return this.popNandPushFloatIfOK(S+1,this.stackFloat(1)*this.stackFloat(0));case 50:return this.popNandPushFloatIfOK(S+1,this.safeFDiv(this.stackFloat(1),this.stackFloat(0)));case 51:return this.popNandPushIfOK(S+1,this.floatAsSmallInt(this.stackFloat(0)));case 52:return this.popNandPushFloatIfOK(S+1,this.floatFractionPart(this.stackFloat(0)));case 53:return this.popNandPushIntIfOK(S+1,this.frexp_exponent(this.stackFloat(0))-1);case 54:return this.popNandPushFloatIfOK(2,this.ldexp(this.stackFloat(1),this.stackFloat(0)));case 55:return this.popNandPushFloatIfOK(S+1,Math.sqrt(this.stackFloat(0)));case 56:return this.popNandPushFloatIfOK(S+1,Math.sin(this.stackFloat(0)));case 57:return this.popNandPushFloatIfOK(S+1,Math.atan(this.stackFloat(0)));case 58:return this.popNandPushFloatIfOK(S+1,Math.log(this.stackFloat(0)));case 59:return this.popNandPushFloatIfOK(S+1,Math.exp(this.stackFloat(0)));case 60:return this.popNandPushIfOK(S+1,this.objectAt(!1,!1,!1));case 61:return this.popNandPushIfOK(S+1,this.objectAtPut(!1,!1,!1));case 62:return this.popNandPushIfOK(S+1,this.objectSize(!1));case 63:return this.popNandPushIfOK(S+1,this.objectAt(!1,!0,!1));case 64:return this.popNandPushIfOK(S+1,this.objectAtPut(!1,!0,!1));case 65:return this.vm.warnOnce("missing primitive: 65 (primitiveNext)"),!1;case 66:return this.vm.warnOnce("missing primitive: 66 (primitiveNextPut)"),!1;case 67:return this.vm.warnOnce("missing primitive: 67 (primitiveAtEnd)"),!1;case 68:return this.popNandPushIfOK(S+1,this.objectAt(!1,!1,!0));case 69:return this.popNandPushIfOK(S+1,this.objectAtPut(!1,!1,!0));case 70:return this.popNandPushIfOK(S+1,this.instantiateClass(this.stackNonInteger(0),0));case 71:return this.popNandPushIfOK(S+1,this.instantiateClass(this.stackNonInteger(1),this.stackPos32BitInt(0)));case 72:return this.primitiveArrayBecome(S,!1,!0);case 73:return this.popNandPushIfOK(S+1,this.objectAt(!1,!1,!0));case 74:return this.popNandPushIfOK(S+1,this.objectAtPut(!1,!1,!0));case 75:return this.popNandPushIfOK(S+1,this.identityHash(this.stackNonInteger(0)));case 76:return this.primitiveStoreStackp(S);case 77:return this.popNandPushIfOK(S+1,this.someInstanceOf(this.stackNonInteger(0)));case 78:return this.popNandPushIfOK(S+1,this.nextInstanceAfter(this.stackNonInteger(0)));case 79:return this.primitiveNewMethod(S);case 80:return this.popNandPushIfOK(2,this.doBlockCopy());case 81:return this.primitiveBlockValue(S);case 82:return this.primitiveBlockValueWithArgs(S);case 83:return this.vm.primitivePerform(S);case 84:return this.vm.primitivePerformWithArgs(S,!1);case 85:return this.primitiveSignal();case 86:return this.primitiveWait();case 87:return this.primitiveResume();case 88:return this.primitiveSuspend();case 89:return this.vm.flushMethodCache();case 90:return this.primitiveMousePoint(S);case 91:return this.primitiveTestDisplayDepth(S);case 92:return this.vm.warnOnce("missing primitive: 92 (primitiveSetDisplayMode)"),!1;case 93:return this.primitiveInputSemaphore(S);case 94:return this.primitiveGetNextEvent(S);case 95:return this.primitiveInputWord(S);case 96:return this.namedPrimitive("BitBltPlugin","primitiveCopyBits",S);case 97:return this.primitiveSnapshot(S);case 98:return this.primitiveStoreImageSegment(S);case 99:return this.primitiveLoadImageSegment(S);case 100:return this.vm.primitivePerformWithArgs(S,!0);case 101:return this.primitiveBeCursor(S);case 102:return this.primitiveBeDisplay(S);case 103:return this.primitiveScanCharacters(S);case 104:return this.vm.warnOnce("missing primitive: 104 (primitiveDrawLoop)"),!1;case 105:return this.popNandPushIfOK(S+1,this.doStringReplace());case 106:return this.primitiveScreenSize(S);case 107:return this.primitiveMouseButtons(S);case 108:return this.primitiveKeyboardNext(S);case 109:return this.primitiveKeyboardPeek(S);case 110:return this.pop2andPushBoolIfOK(this.vm.stackValue(1)===this.vm.stackValue(0));case 111:return this.popNandPushIfOK(S+1,this.vm.getClass(this.vm.top()));case 112:return this.popNandPushIfOK(S+1,this.vm.image.bytesLeft());case 113:return this.primitiveQuit(S);case 114:return this.primitiveExitToDebugger(S);case 115:return this.primitiveChangeClass(S);case 116:return this.vm.flushMethodCacheForMethod(this.vm.top());case 117:return this.doNamedPrimitive(S,F);case 118:return this.primitiveDoPrimitiveWithArgs(S);case 119:return this.vm.flushMethodCacheForSelector(this.vm.top());case 120:return this.vm.warnOnce("missing primitive:121 (primitiveCalloutToFFI)"),!1;case 121:return this.primitiveImageName(S);case 122:return this.primitiveReverseDisplay(S);case 123:return this.vm.warnOnce("missing primitive: 123 (primitiveValueUninterruptably)"),!1;case 124:return this.popNandPushIfOK(2,this.registerSemaphore(Squeak.splOb_TheLowSpaceSemaphore));case 125:return this.popNandPushIfOK(2,this.setLowSpaceThreshold());case 126:return this.primitiveDeferDisplayUpdates(S);case 127:return this.primitiveShowDisplayRect(S);case 128:return this.primitiveArrayBecome(S,!0,!0);case 129:return this.popNandPushIfOK(1,this.vm.image.specialObjectsArray);case 130:return this.primitiveFullGC(S);case 131:return this.primitivePartialGC(S);case 132:return this.pop2andPushBoolIfOK(this.pointsTo(this.stackNonInteger(1),this.vm.top()));case 133:return this.popNIfOK(S);case 134:return this.popNandPushIfOK(2,this.registerSemaphore(Squeak.splOb_TheInterruptSemaphore));case 135:return this.popNandPushIfOK(1,this.millisecondClockValue());case 136:return this.primitiveSignalAtMilliseconds(S);case 137:return this.popNandPushIfOK(1,this.secondClock());case 138:return this.popNandPushIfOK(S+1,this.someObject());case 139:return this.popNandPushIfOK(S+1,this.nextObject(this.vm.top()));case 140:return this.primitiveBeep(S);case 141:return this.primitiveClipboardText(S);case 142:return this.popNandPushIfOK(S+1,this.makeStString(this.filenameToSqueak(Squeak.vmPath)));case 143:case 144:return this.primitiveShortAtAndPut(S);case 145:return this.primitiveConstantFill(S);case 146:return this.namedPrimitive("JoystickTabletPlugin","primitiveReadJoystick",S);case 147:return this.namedPrimitive("BitBltPlugin","primitiveWarpBits",S);case 148:return this.popNandPushIfOK(S+1,this.vm.image.clone(this.vm.top()));case 149:return this.primitiveGetAttribute(S);case 150:if(this.oldPrims)return this.primitiveFileAtEnd(S);case 151:if(this.oldPrims)return this.primitiveFileClose(S);case 152:if(this.oldPrims)return this.primitiveFileGetPosition(S);case 153:if(this.oldPrims)return this.primitiveFileOpen(S);case 154:if(this.oldPrims)return this.primitiveFileRead(S);case 155:if(this.oldPrims)return this.primitiveFileSetPosition(S);case 156:if(this.oldPrims)return this.primitiveFileDelete(S);case 157:if(this.oldPrims)return this.primitiveFileSize(S);break;case 158:return this.oldPrims?this.primitiveFileWrite(S):(this.vm.warnOnce("missing primitive: 158 (primitiveCompareWith)"),!1);case 159:return this.oldPrims?this.primitiveFileRename(S):this.popNandPushIntIfOK(S+1,1664525*this.stackSigned53BitInt(0)&268435455);case 160:return this.oldPrims?this.primitiveDirectoryCreate(S):this.primitiveAdoptInstance(S);case 161:return this.oldPrims?this.primitiveDirectoryDelimitor(S):(this.vm.warnOnce("missing primitive: 161 (primitiveSetIdentityHash)"),!1);case 162:if(this.oldPrims)return this.primitiveDirectoryLookup(S);break;case 163:return this.oldPrims?this.primitiveDirectoryDelete(S):(this.vm.warnOnce("missing primitive: 163 (primitiveGetImmutability)"),!1);case 164:return this.popNandPushIfOK(S+1,this.vm.trueObj);case 165:case 166:return this.primitiveIntegerAtAndPut(S);case 167:return!1;case 168:return this.primitiveCopyObject(S);case 169:return this.oldPrims?this.primitiveDirectorySetMacTypeAndCreator(S):this.pop2andPushBoolIfOK(this.vm.stackValue(1)!==this.vm.stackValue(0));case 170:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundStart",S):this.primitiveAsCharacter(S);case 171:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundStartWithSemaphore",S):this.popNandPushIfOK(S+1,this.stackNonInteger(0).hash);case 172:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundStop",S):(this.vm.warnOnce("missing primitive: 172 (primitiveFetchMourner)"),this.popNandPushIfOK(S,this.vm.nilObj));case 173:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundAvailableSpace",S):this.popNandPushIfOK(S+1,this.objectAt(!1,!1,!0));case 174:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundPlaySamples",S):this.popNandPushIfOK(S+1,this.objectAtPut(!1,!1,!0));case 175:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundPlaySilence",S):this.popNandPushIfOK(S+1,this.behaviorHash(this.stackNonInteger(0)));case 176:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primWaveTableSoundmixSampleCountintostartingAtpan",S):this.popNandPushIfOK(S+1,this.vm.image.isSpur?4194303:4095);case 177:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primFMSoundmixSampleCountintostartingAtpan",S):this.popNandPushIfOK(S+1,this.allInstancesOf(this.stackNonInteger(0)));case 178:return!!this.oldPrims&&this.namedPrimitive("SoundGenerationPlugin","primPluckedSoundmixSampleCountintostartingAtpan",S);case 179:if(this.oldPrims)return this.namedPrimitive("SoundGenerationPlugin","primSampledSoundmixSampleCountintostartingAtpan",S);break;case 180:return!!this.oldPrims&&this.namedPrimitive("SoundGenerationPlugin","primitiveMixFMSound",S);case 181:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primitiveMixPluckedSound",S):this.primitiveSizeInBytesOfInstance(S);case 182:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","oldprimSampledSoundmixSampleCountintostartingAtleftVolrightVol",S):this.primitiveSizeInBytes(S);case 183:if(this.oldPrims)return this.namedPrimitive("SoundGenerationPlugin","primitiveApplyReverb",S);break;case 184:if(this.oldPrims)return this.namedPrimitive("SoundGenerationPlugin","primitiveMixLoopedSampledSound",S);break;case 185:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primitiveMixSampledSound",S):this.primitiveExitCriticalSection(S);case 186:if(this.oldPrims)break;return this.primitiveEnterCriticalSection(S);case 187:if(this.oldPrims)break;return this.primitiveTestAndSetOwnershipOfCriticalSection(S);case 188:if(this.oldPrims)break;return this.primitiveExecuteMethodArgsArray(S);case 189:return!!this.oldPrims&&this.namedPrimitive("SoundPlugin","primitiveSoundInsertSamples",S);case 190:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundStartRecording",S);case 191:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundStopRecording",S);case 192:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundGetRecordingSampleRate",S);case 193:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundRecordSamples",S);case 194:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundSetRecordLevel",S);break;case 195:case 196:case 197:case 198:case 199:return!1;case 200:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveInitializeNetwork",S):this.primitiveClosureCopyWithCopiedValues(S);case 201:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverStartNameLookup",S):this.primitiveClosureValue(S);case 202:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverNameLookupResult",S):this.primitiveClosureValue(S);case 203:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverStartAddressLookup",S):this.primitiveClosureValue(S);case 204:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverAddressLookupResult",S):this.primitiveClosureValue(S);case 205:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverAbortLookup",S):this.primitiveClosureValue(S);case 206:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverLocalAddress",S):this.primitiveClosureValueWithArgs(S);case 207:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverStatus",S):this.primitiveFullClosureValue(S);case 208:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverError",S):this.primitiveFullClosureValueWithArgs(S);case 209:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketCreate",S):this.primitiveFullClosureValueNoContextSwitch(S);case 210:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketDestroy",S):this.popNandPushIfOK(2,this.objectAt(!1,!1,!1));case 211:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketConnectionStatus",S):this.popNandPushIfOK(3,this.objectAtPut(!1,!1,!1));case 212:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketError",S):this.popNandPushIfOK(1,this.objectSize(!1));case 213:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketLocalAddress",S);case 214:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketLocalPort",S);case 215:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketRemoteAddress",S);case 216:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketRemotePort",S);case 217:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketConnectToPort",S);case 218:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketListenOnPort",S):(this.vm.warnOnce("missing primitive: 218 (tryNamedPrimitiveInForWithArgs"),!1);case 219:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketCloseConnection",S);case 220:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketAbortConnection",S);break;case 221:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketReceiveDataBufCount",S):this.primitiveClosureValueNoContextSwitch(S);case 222:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketReceiveDataAvailable",S):this.primitiveClosureValueNoContextSwitch(S);case 223:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketSendDataBufCount",S);case 224:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketSendDone",S);break;case 230:return this.primitiveRelinquishProcessorForMicroseconds(S);case 231:return this.primitiveForceDisplayUpdate(S);case 232:return this.vm.warnOnce("missing primitive: 232 (primitiveFormPrint)"),!1;case 233:return this.primitiveSetFullScreen(S);case 234:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveDecompressFromByteArray",S);case 235:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveCompareString",S);case 236:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveConvert8BitSigned",S);case 237:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveCompressToByteArray",S);case 238:if(this.oldPrims)return this.namedPrimitive("SerialPlugin","primitiveSerialPortOpen",S);case 239:if(this.oldPrims)return this.namedPrimitive("SerialPlugin","primitiveSerialPortClose",S);break;case 240:return this.oldPrims?this.namedPrimitive("SerialPlugin","primitiveSerialPortWrite",S):this.popNandPushIfOK(1,this.microsecondClockUTC());case 241:return this.oldPrims?this.namedPrimitive("SerialPlugin","primitiveSerialPortRead",S):this.popNandPushIfOK(1,this.microsecondClockLocal());case 242:if(this.oldPrims)break;return this.primitiveSignalAtUTCMicroseconds(S);case 243:return this.oldPrims?this.namedPrimitive("MiscPrimitivePlugin","primitiveTranslateStringWithTable",S):(this.vm.warnOnce("missing primitive: 243 (primitiveUpdateTimeZone)"),!1);case 244:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveFindFirstInString",S);case 245:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveIndexOfAsciiInString",S);case 246:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveFindSubstring",S);break;case 248:return this.primitiveArrayBecome(S,!1,!1);case 249:return this.primitiveArrayBecome(S,!1,!0);case 254:return this.primitiveVMParameter(S);case 521:return this.namedPrimitive("MIDIPlugin","primitiveMIDIClosePort",S);case 522:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetClock",S);case 523:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetPortCount",S);case 524:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetPortDirectionality",S);case 525:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetPortName",S);case 526:return this.namedPrimitive("MIDIPlugin","primitiveMIDIOpenPort",S);case 527:return this.namedPrimitive("MIDIPlugin","primitiveMIDIParameterGetOrSet",S);case 528:return this.namedPrimitive("MIDIPlugin","primitiveMIDIRead",S);case 529:return this.namedPrimitive("MIDIPlugin","primitiveMIDIWrite",S);case 550:return this.namedPrimitive("ADPCMCodecPlugin","primitiveDecodeMono",S);case 551:return this.namedPrimitive("ADPCMCodecPlugin","primitiveDecodeStereo",S);case 552:return this.namedPrimitive("ADPCMCodecPlugin","primitiveEncodeMono",S);case 553:return this.namedPrimitive("ADPCMCodecPlugin","primitiveEncodeStereo",S);case 571:return this.primitiveUnloadModule(S);case 572:return this.primitiveListBuiltinModule(S);case 573:return this.primitiveListLoadedModule(S);case 575:return this.vm.warnOnce("missing primitive: 575 (primitiveHighBit)"),!1;case 576:return this.vm.primitiveInvokeObjectAsMethod(S,F);case 578:return this.vm.warnOnce("missing primitive: 578 (primitiveSuspendAndBackupPC)"),!1}return console.error("primitive "+y+" not implemented yet"),!1},namedPrimitive:function(y,S,F){var P=""===y?this:this.loadedModules[y];void 0===P&&(P=this.loadModule(y),this.loadedModules[y]=P);var H=!1,J=this.vm.sp;if(P){this.interpreterProxy.argCount=F;var Q=P[S];"function"==typeof Q?H=P[S](F):"string"==typeof Q?H=this[Q](F):this.vm.warnOnce("missing primitive: "+y+"."+S)}else this.vm.warnOnce("missing module: "+y+" ("+S+")");return(!0===H||!1!==H&&this.success)&&this.vm.sp!==J-F&&!this.vm.frozen&&this.vm.warnOnce("stack unbalanced after primitive "+y+"."+S,"error"),!0===H||!1===H?H:this.success},doNamedPrimitive:function(y,S){if(S.pointersSize()<2)return!1;var F=S.pointers[1];if(4!==F.pointersSize())return!1;this.primMethod=S;var P=F.pointers[0].bytesAsString(),H=F.pointers[1].bytesAsString();return this.namedPrimitive(P,H,y)},fakePrimitive:function(y,S,F){return this.vm.warnOnce("faking primitive: "+y),void 0===S?this.vm.popN(F):this.vm.popNandPush(F+1,this.makeStObject(S)),!0}},"modules",{loadModule:function(y){var S=Squeak.externalModules[y]||this.builtinModules[y]||this.loadModuleDynamically(y);if(!S)return null;if(this.patchModules[y]&&this.patchModule(S,y),S.setInterpreter&&!S.setInterpreter(this.interpreterProxy))return console.log("Wrong interpreter proxy version: "+y),null;var F=S.initialiseModule;return"function"==typeof F?S.initialiseModule():"string"==typeof F&&this[F](),this.interpreterProxy.failed()?(console.log("Module initialization failed: "+y),null):(console.log("Loaded module: "+y),S)},loadModuleDynamically:function(y){},patchModule:function(y,S){var F=this.patchModules[S];for(var P in F)y[P]=F[P]},unloadModule:function(y){var S=this.loadedModules[y];if(!y||!S||S===this)return null;delete this.loadedModules[y];var F=S.unloadModule;return"function"==typeof F?S.unloadModule(this):"string"==typeof F&&this[F](this),console.log("Unloaded module: "+y),S},loadFunctionFrom:function(y,S){var F=""===S?this:this.loadedModules[S];if(void 0===F&&(F=this.loadModule(S),this.loadedModules[S]=F),!F)return null;var P=F[y];return"function"==typeof P?P.bind(F):"string"==typeof P?this[P].bind(this):(this.vm.warnOnce("missing primitive: "+S+"."+y),null)},primitiveUnloadModule:function(y){var S=this.stackNonInteger(0).bytesAsString();return!!S&&(this.unloadModule(S),this.popNIfOK(y))},primitiveListBuiltinModule:function(y){var S=this.stackInteger(0)-1;if(!this.success)return!1;var F=Object.keys(this.builtinModules);return this.popNandPushIfOK(y+1,this.makeStObject(F[S]))},primitiveListLoadedModule:function(y){var S=this.stackInteger(0)-1;if(!this.success)return!1;var F=[];for(var P in this.loadedModules){var H=this.loadedModules[P];if(H){var J=H.getModuleName?H.getModuleName():P;F.push(J)}}return this.popNandPushIfOK(y+1,this.makeStObject(F[S]))}},"stack access",{popNIfOK:function(y){return!!this.success&&(this.vm.popN(y),!0)},pop2andPushBoolIfOK:function(y){return this.vm.success=this.success,this.vm.pop2AndPushBoolResult(y)},popNandPushIfOK:function(y,S){return!(!this.success||null==S||(this.vm.popNandPush(y,S),0))},popNandPushIntIfOK:function(y,S){return!(!this.success||!this.vm.canBeSmallInt(S))&&this.popNandPushIfOK(y,S)},popNandPushFloatIfOK:function(y,S){return!!this.success&&this.popNandPushIfOK(y,this.makeFloat(S))},stackNonInteger:function(y){return this.checkNonInteger(this.vm.stackValue(y))},stackInteger:function(y){return this.checkSmallInt(this.vm.stackValue(y))},stackPos32BitInt:function(y){return this.positive32BitValueOf(this.vm.stackValue(y))},pos32BitIntFor:function(y){if(0<=y&&y<=Squeak.MaxSmallInt)return y;for(var S=this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger],F=this.vm.instantiateClass(S,4),P=F.bytes,H=0;H<4;H++)P[H]=y>>>8*H&255;return F},pos53BitIntFor:function(y){if(y<=4294967295)return this.pos32BitIntFor(y);if(9007199254740991<y)return console.warn("Out of range: pos53BitIntFor("+y+")"),this.success=!1,0;for(var S=y<=0xffffffffff?5:y<=0xffffffffffff?6:7,F=this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger],P=this.vm.instantiateClass(F,S),H=P.bytes,J=0;J<S;J++)H[J]=255&y,y/=256;return P},stackSigned32BitInt:function(y){var S=this.vm.stackValue(y);if("number"==typeof S)return S;if(4!==S.bytesSize())return this.success=!1,0;for(var F=S.bytes,P=0,H=0,J=1;H<4;H++,J*=256)P+=F[H]*J;return this.isA(S,Squeak.splOb_ClassLargePositiveInteger)&&P<=2147483647?P:this.isA(S,Squeak.splOb_ClassLargeNegativeInteger)&&-2147483648<=-P?-P:(this.success=!1,0)},signed32BitIntegerFor:function(y){if(y>=Squeak.MinSmallInt&&y<=Squeak.MaxSmallInt)return y;for(var S=y<0,F=S?-y:y,P=S?Squeak.splOb_ClassLargeNegativeInteger:Squeak.splOb_ClassLargePositiveInteger,H=this.vm.instantiateClass(this.vm.specialObjects[P],4),J=H.bytes,Q=0;Q<4;Q++)J[Q]=F>>>8*Q&255;return H},stackFloat:function(y){return this.checkFloat(this.vm.stackValue(y))},stackBoolean:function(y){return this.checkBoolean(this.vm.stackValue(y))},stackSigned53BitInt:function(y){var S=this.vm.stackValue(y);if("number"==typeof S)return S;var F=S.bytesSize();if(F<=7){for(var P=S.bytes,H=0,J=0,Q=1;J<F;J++,Q*=256)H+=P[J]*Q;if(H<=9007199254740991){if(this.isA(S,Squeak.splOb_ClassLargePositiveInteger))return H;if(this.isA(S,Squeak.splOb_ClassLargeNegativeInteger))return-H}}return this.success=!1,0}},"numbers",{doBitAnd:function(){var y=this.stackPos32BitInt(1),S=this.stackPos32BitInt(0);return this.success?this.pos32BitIntFor(y&S):0},doBitOr:function(){var y=this.stackPos32BitInt(1),S=this.stackPos32BitInt(0);return this.success?this.pos32BitIntFor(y|S):0},doBitXor:function(){var y=this.stackPos32BitInt(1),S=this.stackPos32BitInt(0);return this.success?this.pos32BitIntFor(y^S):0},doBitShift:function(){var y=this.stackPos32BitInt(1),S=this.stackInteger(0);return this.success?0<this.vm.safeShift(y,S)?this.pos32BitIntFor(this.vm.safeShift(y,S)):(this.success=!1,0):0},safeFDiv:function(y,S){return 0===S?(this.success=!1,1):y/S},floatAsSmallInt:function(y){var S=0<=y?Math.floor(y):Math.ceil(y);return this.ensureSmallInt(S)},floatFractionPart:function(y){return-9007199254740991<=y&&y<=9007199254740991?y-Math.floor(y):(this.success=!1,0)},frexp_exponent:function(y){if(0==y)return 0;var S=new DataView(new ArrayBuffer(8));S.setFloat64(0,y);var F=S.getUint32(0)>>>20&2047;return 0===F&&(S.setFloat64(0,y*Math.pow(2,64)),F=(S.getUint32(0)>>>20&2047)-64),F-1022},ldexp:function(y,S){for(var F=Math.min(3,Math.ceil(Math.abs(S)/1023)),P=y,H=0;H<F;H++)P*=Math.pow(2,Math.floor((S+H)/F));return P},primitiveLessThanLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)<this.stackSigned53BitInt(0))},primitiveGreaterThanLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)>this.stackSigned53BitInt(0))},primitiveLessOrEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)<=this.stackSigned53BitInt(0))},primitiveGreaterOrEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)>=this.stackSigned53BitInt(0))},primitiveEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)===this.stackSigned53BitInt(0))},primitiveNotEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)!==this.stackSigned53BitInt(0))}},"utils",{floatOrInt:function(y){return y.isFloat?y.float:"number"==typeof y?y:0},positive32BitValueOf:function(y){if("number"==typeof y)return 0<=y?y:(this.success=!1,0);if(!this.isA(y,Squeak.splOb_ClassLargePositiveInteger)||4!==y.bytesSize())return this.success=!1,0;for(var S=y.bytes,F=0,P=0,H=1;P<4;P++,H*=256)F+=S[P]*H;return F},checkFloat:function(y){return y.isFloat?y.float:"number"==typeof y?y:(this.success=!1,0)},checkSmallInt:function(y){return"number"==typeof y?y:(this.success=!1,0)},checkNonInteger:function(y){return"number"!=typeof y?y:(this.success=!1,this.vm.nilObj)},checkBoolean:function(y){return!!y.isTrue||!y.isFalse&&(this.success=!1)},indexableSize:function(y){return"number"==typeof y?-1:y.indexableSize(this)},isA:function(y,S){return y.sqClass===this.vm.specialObjects[S]},isKindOf:function(y,S){for(var F=y.sqClass,P=this.vm.specialObjects[S];!F.isNil;){if(F===P)return!0;F=F.pointers[Squeak.Class_superclass]}return!1},isAssociation:function(y){return"number"!=typeof y&&2==y.pointersSize()},ensureSmallInt:function(y){return y===(0|y)&&this.vm.canBeSmallInt(y)?y:(this.success=!1,0)},charFromInt:function(y){var S=this.vm.specialObjects[Squeak.splOb_CharacterTable].pointers[y];if(S)return S;var F=this.vm.specialObjects[Squeak.splOb_ClassCharacter];return(S=this.vm.instantiateClass(F,0)).pointers[0]=y,S},charFromIntSpur:function(y){return this.vm.image.getCharacter(y)},charToInt:function(y){return y.pointers[0]},charToIntSpur:function(y){return y.hash},makeFloat:function(y){var S=this.vm.specialObjects[Squeak.splOb_ClassFloat],F=this.vm.instantiateClass(S,2);return F.float=y,F},makeLargeIfNeeded:function(y){return this.vm.canBeSmallInt(y)?y:this.makeLargeInt(y)},makeLargeInt:function(y){if(y<0)throw Error("negative large ints not implemented yet");if(4294967295<y)throw Error("large large ints not implemented yet");return this.pos32BitIntFor(y)},makePointWithXandY:function(y,S){var F=this.vm.specialObjects[Squeak.splOb_ClassPoint],P=this.vm.instantiateClass(F,0);return P.pointers[Squeak.Point_x]=y,P.pointers[Squeak.Point_y]=S,P},makeStArray:function(y,S){for(var F=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray],y.length),P=0;P<y.length;P++)F.pointers[P]=this.makeStObject(y[P],S);return F},makeStByteArray:function(y){for(var S=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassByteArray],y.length),F=0;F<y.length;F++)S.bytes[F]=255&y[F];return S},makeStString:function(y){for(var S=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassString],y.length),F=0;F<y.length;++F)S.bytes[F]=255&y.charCodeAt(F);return S},makeStObject:function(y,S){if(null==y)return this.vm.nilObj;if(!0===y)return this.vm.trueObj;if(!1===y)return this.vm.falseObj;if(y.sqClass)return y;if("number"==typeof y)return y===(0|y)?this.makeLargeIfNeeded(y):this.makeFloat(y);if(S){var F=this.vm.instantiateClass(S,0);return F.jsObject=y,F}if("string"==typeof y||"Uint8Array"===y.constructor.name)return this.makeStString(y);if("Array"===y.constructor.name)return this.makeStArray(y);throw Error("cannot make smalltalk object")},pointsTo:function(y,S){return!!y.pointers&&0<=y.pointers.indexOf(S)},asUint8Array:function(y){if("Uint8Array"===y.constructor.name)return y;if("ArrayBuffer"===y.constructor.name)return new Uint8Array(y);if("string"!=typeof y)throw Error("unknown buffer type");for(var S=new Uint8Array(y.length),F=0;F<y.length;F++)S[F]=y.charCodeAt(F);return S},filenameToSqueak:function(y){var S="/SqueakJS"+("/"!==y[0]?"/":"")+y;return this.emulateMac&&(S=("Macintosh HD"+S).replace(/\//g,"").replace(/:/g,"/").replace(//g,":")),S},filenameFromSqueak:function(y){var S=this.emulateMac?y.replace(/^[^:]*:/,":").replace(/\//g,"").replace(/:/g,"/").replace(//g,":"):y;return S.replace(/^\/*SqueakJS\/?/,"/")}},"indexing",{objectAt:function(y,S,F){var P,H=this.stackNonInteger(1),J=this.stackPos32BitInt(0);if(!this.success)return H;if(y){if((P=this.atCache[H.hash&this.atCacheMask]).array!==H)return this.success=!1,H}else{if(H.isFloat){var Q=H.floatData();return 1==J?this.pos32BitIntFor(Q.getUint32(0,!1)):2==J?this.pos32BitIntFor(Q.getUint32(4,!1)):(this.success=!1,H)}P=this.makeAtCacheInfo(this.atCache,this.vm.specialSelectors[32],H,S,F)}if(J<1||J>P.size)return this.success=!1,H;if(F)return H.pointers[J-1];if(H.isPointers())return H.pointers[J-1+P.ivarOffset];if(H.isWords())return P.convertChars?this.charFromInt(1073741823&H.words[J-1]):this.pos32BitIntFor(H.words[J-1]);if(H.isBytes())return P.convertChars?this.charFromInt(255&H.bytes[J-1]):255&H.bytes[J-1];var ee=4*H.pointersSize();return J-1-ee<0?(this.success=!1,H):255&H.bytes[J-1-ee]},objectAtPut:function(y,S,F){var P,H=this.stackNonInteger(2),J=this.stackPos32BitInt(1);if(!this.success)return H;if(y){if((P=this.atPutCache[H.hash&this.atCacheMask]).array!==H)return this.success=!1,H}else{if(H.isFloat){var Q=this.stackPos32BitInt(0);if(!this.success||1!=J&&2!=J)this.success=!1;else{var ee=H.floatData();ee.setUint32(1==J?0:4,Q,!1),H.float=ee.getFloat64(0)}return this.vm.stackValue(0)}P=this.makeAtCacheInfo(this.atPutCache,this.vm.specialSelectors[34],H,S,F)}if(J<1||J>P.size)return this.success=!1,H;var te,re=this.vm.stackValue(0);if(F)return H.dirty=!0,H.pointers[J-1]=re;if(H.isPointers())return H.dirty=!0,H.pointers[J-1+P.ivarOffset]=re;if(H.isWords()){if(S){if(re.sqClass!==this.vm.specialObjects[Squeak.splOb_ClassCharacter])return this.success=!1,re;if("number"!=typeof(te=this.charToInt(re)))return this.success=!1,re}else te=this.stackPos32BitInt(0);return this.success&&(H.words[J-1]=te),re}if(S){if(re.sqClass!==this.vm.specialObjects[Squeak.splOb_ClassCharacter])return this.success=!1,re;if("number"!=typeof(te=this.charToInt(re)))return this.success=!1,re}else{if("number"!=typeof re)return this.success=!1,re;te=re}if(te<0||255<te)return this.success=!1,re;if(H.isBytes())return H.bytes[J-1]=te,re;var ie=4*H.pointersSize();return J-1-ie<0?(this.success=!1,H):(H.bytes[J-1-ie]=te,re)},objectSize:function(y){var S=this.vm.stackValue(0),F=-1;return y?S.sqClass===this.vm.specialObjects[Squeak.splOb_ClassArray]?F=S.pointersSize():S.sqClass===this.vm.specialObjects[Squeak.splOb_ClassString]&&(F=S.bytesSize()):F=this.indexableSize(S),-1===F?(this.success=!1,-1):this.pos32BitIntFor(F)},initAtCache:function(){this.atCacheSize=32,this.atCacheMask=this.atCacheSize-1,this.atCache=[],this.atPutCache=[],this.nonCachedInfo={};for(var y=0;y<this.atCacheSize;y++)this.atCache.push({}),this.atPutCache.push({})},makeAtCacheInfo:function(y,S,F,P,H){var J;return(J=this.vm.verifyAtSelector!==S||this.vm.verifyAtClass!==F.sqClass||this.vm.isContext(F)?this.nonCachedInfo:y[F.hash&this.atCacheMask]).array=F,J.convertChars=P,H?(J.size=F.instSize()+Math.max(0,F.indexableSize(this)),J.ivarOffset=0):(J.size=F.indexableSize(this),J.ivarOffset=F.isPointers()?F.instSize():0),J}},"basic",{instantiateClass:function(y,S){return 4*S>this.vm.image.bytesLeft()?(console.warn("squeak: out of memory"),this.success=!1,this.vm.primFailCode=Squeak.PrimErrNoMemory,null):this.vm.instantiateClass(y,S)},someObject:function(){return this.vm.image.firstOldObject},nextObject:function(y){return this.vm.image.objectAfter(y)||0},someInstanceOf:function(y){return this.vm.image.someInstanceOf(y)||(this.success=!1,0)},nextInstanceAfter:function(y){return this.vm.image.nextInstanceAfter(y)||(this.success=!1,0)},allInstancesOf:function(y){var S=this.vm.image.allInstancesOf(y),F=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray],S.length);return F.pointers=S,F},identityHash:function(y){return y.hash},identityHashSpur:function(y){var S=y.hash;return 0<S?S:y.hash=this.newObjectHash()},behaviorHash:function(y){var S=y.hash;return 0<S?S:this.vm.image.enterIntoClassTable(y)},newObjectHash:function(y){return Math.floor(4194302*Math.random())+1},primitiveSizeInBytesOfInstance:function(y){if(1<y)return!1;var S=this.stackNonInteger(y),F=y?this.stackInteger(0):0,P=S.classByteSizeOfInstance(F);return this.popNandPushIfOK(y+1,this.makeLargeIfNeeded(P))},primitiveSizeInBytes:function(y){var S=this.stackNonInteger(0).totalBytes();return this.popNandPushIfOK(y+1,this.makeLargeIfNeeded(S))},primitiveAsCharacter:function(y){var S=this.stackInteger(0);if(S<0||1073741823<S)return!1;var F=this.charFromInt(S);return!!F&&this.popNandPushIfOK(y+1,F)},primitiveFullGC:function(y){this.vm.image.fullGC("primitive");var S=this.vm.image.bytesLeft();return this.popNandPushIfOK(1,this.makeLargeIfNeeded(S))},primitivePartialGC:function(y){this.vm.image.partialGC("primitive");var S=this.vm.image.bytesLeft();return this.popNandPushIfOK(1,this.makeLargeIfNeeded(S))},primitiveMakePoint:function(y,S){var F=this.vm.stackValue(1),P=this.vm.stackValue(0);return!(S&&(this.checkFloat(F),this.checkFloat(P),!this.success)||(this.vm.popNandPush(1+y,this.makePointWithXandY(F,P)),0))},primitiveStoreStackp:function(y){var S=this.stackNonInteger(1),F=this.stackInteger(0);if(!this.success||F<0||this.vm.decodeSqueakSP(F)>=S.pointers.length)return!1;for(var P=S.pointers[Squeak.Context_stackPointer];P<F;)S.pointers[this.vm.decodeSqueakSP(++P)]=this.vm.nilObj;return S.pointers[Squeak.Context_stackPointer]=F,this.vm.popN(y),!0},primitiveChangeClass:function(y){if(2<y)return!1;var S=this.stackNonInteger(1),F=this.stackNonInteger(0);return!!this.changeClassTo(S,F.sqClass)&&this.popNIfOK(y)},primitiveAdoptInstance:function(y){if(2<y)return!1;var S=this.stackNonInteger(1),F=this.stackNonInteger(0);return!!this.changeClassTo(F,S)&&this.popNIfOK(y)},changeClassTo:function(y,S){if(y.sqClass.isCompact!==S.isCompact)return!1;var F=S.classInstIsPointers();if(y.isPointers()){if(!F)return!1;if(y.sqClass.classInstSize()!==S.classInstSize())return!1}else{if(F)return!1;var P=y.isBytes(),H=S.classInstIsBytes();if(P&&!H){if(y.bytes){if(3&y.bytes.length)return!1;y.words=new Uint32Array(y.bytes.buffer),delete y.bytes}}else!P&&H&&y.words&&(y.bytes=new Uint8Array(y.words.buffer),delete y.words)}return y._format=S.classInstFormat(),y.sqClass=S,!0},primitiveDoPrimitiveWithArgs:function(y){var S=this.stackNonInteger(0),F=this.stackInteger(1);if(!this.success)return!1;var P=S.pointersSize(),H=this.vm.activeContext.pointersSize();if(this.vm.sp+P>=H)return!1;this.vm.popN(2);for(var J=0;J<P;J++)this.vm.push(S.pointers[J]);return!!this.vm.tryPrimitive(F,P)||(this.vm.popN(P),this.vm.push(F),this.vm.push(S),!1)},primitiveShortAtAndPut:function(y){var S,F=this.stackNonInteger(y),P=this.stackInteger(y-1)-1,H=F.wordsAsInt16Array();if(!this.success||!H||P<0||P>=H.length)return!1;if(y<2)S=H[P];else{if((S=this.stackInteger(0))<-32768||32767<S)return!1;H[P]=S}return this.popNandPushIfOK(y+1,S),!0},primitiveIntegerAtAndPut:function(y){var S,F=this.stackNonInteger(y),P=this.stackInteger(y-1)-1,H=F.wordsAsInt32Array();if(!this.success||!H||P<0||P>=H.length)return!1;if(y<2)S=this.signed32BitIntegerFor(H[P]);else{if(S=this.stackSigned32BitInt(0),!this.success)return!1;H[P]=S}return this.popNandPushIfOK(y+1,S),!0},primitiveConstantFill:function(y){var S=this.stackNonInteger(1),F=this.stackPos32BitInt(0);if(!this.success||!S.isWordsOrBytes())return!1;var P=S.words||S.bytes;if(P){if(P===S.bytes&&255<F)return!1;for(var H=0;H<P.length;H++)P[H]=F}return this.vm.popN(y),!0},primitiveNewMethod:function(y){var S=this.stackInteger(0),F=this.stackInteger(1);if(!this.success)return 0;var P=this.vm.instantiateClass(this.vm.stackValue(2),F);P.pointers=[S];for(var H=P.methodNumLits(),J=0;J<H;J++)P.pointers.push(this.vm.nilObj);return this.vm.popNandPush(1+y,P),this.vm.breakOnNewMethod&&(this.vm.breakOnMethod=P),!0},primitiveExecuteMethodArgsArray:function(y){var S=this.stackNonInteger(0),F=this.stackNonInteger(1),P=this.vm.stackValue(2);if(!this.success||!S.isMethod()||4<y)return!1;var H=S.methodNumArgs();if(H!==F.pointersSize())return!1;this.vm.popNandPush(y+1,P);for(var J=0;J<H;J++)this.vm.push(F.pointers[J]);return this.vm.executeNewMethod(P,S,H,S.methodPrimitiveIndex(),null,null),!0},primitiveArrayBecome:function(y,S,F){var P=this.stackNonInteger(y),H=this.stackNonInteger(y-1);return 1<y&&(F=this.stackBoolean(y-2)),!!this.success&&(this.success=this.vm.image.bulkBecome(P.pointers,H.pointers,S,F),this.popNIfOK(y))},doStringReplace:function(){var y=this.stackNonInteger(4),S=this.stackInteger(3)-1,F=this.stackInteger(2)-S,P=this.stackNonInteger(1),H=this.stackInteger(0)-1;if(!this.success)return y;if(!P.sameFormatAs(y))return this.success=!1,y;if(P.isPointers()){var J=P.pointersSize();if((H+=P.instSize())<0||J<H+F)return this.success=!1,y;if(J=y.pointersSize(),(S+=y.instSize())<0||J<S+F)return this.success=!1,y;for(var Q=0;Q<F;Q++)y.pointers[S+Q]=P.pointers[H+Q];return y}if(P.isWords()){if(J=P.wordsSize(),H<0||J<H+F)return this.success=!1,y;if(J=y.wordsSize(),S<0||J<S+F)return this.success=!1,y;if(P.isFloat&&y.isFloat)y.float=P.float;else if(P.isFloat)y.wordsAsFloat64Array()[S]=P.float;else if(y.isFloat)y.float=P.wordsAsFloat64Array()[H];else for(Q=0;Q<F;Q++)y.words[S+Q]=P.words[H+Q];return y}if(J=P.bytesSize(),H<0||J<H+F)return this.success=!1,y;if(J=y.bytesSize(),S<0||J<S+F)return this.success=!1,y;for(Q=0;Q<F;Q++)y.bytes[S+Q]=P.bytes[H+Q];return y},primitiveCopyObject:function(y){var S=this.stackNonInteger(1),F=this.stackNonInteger(0),P=S.pointersSize();if(!this.success||S.isWordsOrBytes()||S.sqClass!==F.sqClass||P!==F.pointersSize())return!1;for(var H=0;H<P;H++)S.pointers[H]=F.pointers[H];return S.dirty=F.dirty,this.vm.popN(y),!0},primitiveStoreImageSegment:function(y){var S=this.stackNonInteger(2),F=this.stackNonInteger(1),P=this.stackNonInteger(0);return!!(S.pointers&&F.words&&P.pointers)&&!!this.vm.image.storeImageSegment(F,P,S)&&(this.vm.popN(y),!0)},primitiveLoadImageSegment:function(y){var S=this.stackNonInteger(1),F=this.stackNonInteger(0);if(!S.words||!F.pointers)return!1;var P=this.vm.image.loadImageSegment(S,F);return!!P&&this.popNandPushIfOK(y+1,P)}},"blocks/closures",{doBlockCopy:function(){var y=this.vm.stackValue(1),S=this.stackInteger(0),F=y;if(this.vm.isContext(F)||(this.success=!1),!this.success)return y;"number"==typeof F.pointers[Squeak.Context_method]&&(F=F.pointers[Squeak.BlockContext_home]);var P=F.pointersSize()-F.instSize(),H=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassBlockContext],P),J=this.vm.encodeSqueakPC(this.vm.pc+2,this.vm.method);return H.pointers[Squeak.BlockContext_initialIP]=J,H.pointers[Squeak.Context_instructionPointer]=J,H.pointers[Squeak.Context_stackPointer]=0,H.pointers[Squeak.BlockContext_argumentCount]=S,H.pointers[Squeak.BlockContext_home]=F,H.pointers[Squeak.Context_sender]=this.vm.nilObj,H},primitiveBlockValue:function(y){var S=this.vm.stackValue(y);if(!this.isA(S,Squeak.splOb_ClassBlockContext))return!1;var F=S,P=F.pointers[Squeak.BlockContext_argumentCount];if("number"!=typeof P)return!1;if(P!=y)return!1;if(!F.pointers[Squeak.BlockContext_caller].isNil)return!1;this.vm.arrayCopy(this.vm.activeContext.pointers,this.vm.sp-y+1,F.pointers,Squeak.Context_tempFrameStart,y);var H=F.pointers[Squeak.BlockContext_initialIP];return F.pointers[Squeak.Context_instructionPointer]=H,F.pointers[Squeak.Context_stackPointer]=y,F.pointers[Squeak.BlockContext_caller]=this.vm.activeContext,this.vm.popN(y+1),this.vm.newActiveContext(F),this.vm.interruptCheckCounter--<=0&&this.vm.checkForInterrupts(),!0},primitiveBlockValueWithArgs:function(y){var S=this.vm.stackValue(1),F=this.vm.stackValue(0);if(!this.isA(S,Squeak.splOb_ClassBlockContext))return!1;if(!this.isA(F,Squeak.splOb_ClassArray))return!1;var P=S.pointers[Squeak.BlockContext_argumentCount];if("number"!=typeof P)return!1;if(P!=F.pointersSize())return!1;if(!S.pointers[Squeak.BlockContext_caller].isNil)return!1;this.vm.arrayCopy(F.pointers,0,S.pointers,Squeak.Context_tempFrameStart,P);var H=S.pointers[Squeak.BlockContext_initialIP];return S.pointers[Squeak.Context_instructionPointer]=H,S.pointers[Squeak.Context_stackPointer]=P,S.pointers[Squeak.BlockContext_caller]=this.vm.activeContext,this.vm.popN(y+1),this.vm.newActiveContext(S),this.vm.interruptCheckCounter--<=0&&this.vm.checkForInterrupts(),!0},primitiveClosureCopyWithCopiedValues:function(y){return this.vm.breakNow("primitiveClosureCopyWithCopiedValues"),!1},primitiveClosureValue:function(y){var S=this.vm.stackValue(y);return y===S.pointers[Squeak.Closure_numArgs]&&(this.activateNewClosureMethod(S,y),this.vm.interruptCheckCounter--<=0&&this.vm.checkForInterrupts(),!0)},primitiveClosureValueWithArgs:function(y){var S=this.vm.top(),F=S.pointersSize(),P=this.vm.stackValue(y);if(F!==P.pointers[Squeak.Closure_numArgs])return!1;this.vm.pop();for(var H=0;H<F;H++)this.vm.push(S.pointers[H]);return this.activateNewClosureMethod(P,F),this.vm.interruptCheckCounter--<=0&&this.vm.checkForInterrupts(),!0},primitiveClosureValueNoContextSwitch:function(y){var S=this.vm.stackValue(y);return y===S.pointers[Squeak.Closure_numArgs]&&(this.activateNewClosureMethod(S,y),!0)},primitiveFullClosureValue:function(y){var S=this.vm.stackValue(y);return y===S.pointers[Squeak.Closure_numArgs]&&(this.activateNewFullClosure(S,y),this.vm.interruptCheckCounter--<=0&&this.vm.checkForInterrupts(),!0)},primitiveFullClosureValueWithArgs:function(y){var S=this.vm.top(),F=S.pointersSize(),P=this.vm.stackValue(y);if(F!==P.pointers[Squeak.Closure_numArgs])return!1;this.vm.pop();for(var H=0;H<F;H++)this.vm.push(S.pointers[H]);return this.activateNewFullClosure(P,F),this.vm.interruptCheckCounter--<=0&&this.vm.checkForInterrupts(),!0},primitiveFullClosureValueNoContextSwitch:function(y){var S=this.vm.stackValue(y);return y===S.pointers[Squeak.Closure_numArgs]&&(this.activateNewFullClosure(S,y),!0)},activateNewClosureMethod:function(y,S){var F=y.pointers[Squeak.Closure_outerContext],P=F.pointers[Squeak.Context_method],H=this.vm.allocateOrRecycleContext(P.methodNeedsLargeFrame()),J=y.pointers.length-Squeak.Closure_firstCopiedValue;H.pointers[Squeak.Context_sender]=this.vm.activeContext,H.pointers[Squeak.Context_instructionPointer]=y.pointers[Squeak.Closure_startpc],H.pointers[Squeak.Context_stackPointer]=S+J,H.pointers[Squeak.Context_method]=F.pointers[Squeak.Context_method],H.pointers[Squeak.Context_closure]=y,H.pointers[Squeak.Context_receiver]=F.pointers[Squeak.Context_receiver];for(var Q=Squeak.Context_tempFrameStart,ee=0;ee<S;ee++)H.pointers[Q++]=this.vm.stackValue(S-ee-1);for(ee=0;ee<J;ee++)H.pointers[Q++]=y.pointers[Squeak.Closure_firstCopiedValue+ee];this.vm.popN(S+1),this.vm.newActiveContext(H)},activateNewFullClosure:function(y,S){var F=y.pointers[Squeak.ClosureFull_method],P=this.vm.allocateOrRecycleContext(F.methodNeedsLargeFrame()),H=y.pointers.length-Squeak.ClosureFull_firstCopiedValue;P.pointers[Squeak.Context_sender]=this.vm.activeContext,P.pointers[Squeak.Context_instructionPointer]=this.vm.encodeSqueakPC(0,F),P.pointers[Squeak.Context_stackPointer]=F.methodTempCount(),P.pointers[Squeak.Context_method]=F,P.pointers[Squeak.Context_closure]=y,P.pointers[Squeak.Context_receiver]=y.pointers[Squeak.ClosureFull_receiver];for(var J=Squeak.Context_tempFrameStart,Q=0;Q<S;Q++)P.pointers[J++]=this.vm.stackValue(S-Q-1);for(Q=0;Q<H;Q++)P.pointers[J++]=y.pointers[Squeak.ClosureFull_firstCopiedValue+Q];this.vm.popN(S+1),this.vm.newActiveContext(P)}},"scheduling",{primitiveResume:function(){return this.resume(this.vm.top()),!0},primitiveSuspend:function(){var y=this.vm.top();if(y===this.activeProcess())this.vm.popNandPush(1,this.vm.nilObj),this.transferTo(this.wakeHighestPriority());else{var S=y.pointers[Squeak.Proc_myList];if(S.isNil)return!1;if(this.removeProcessFromList(y,S),!this.success)return!1;y.pointers[Squeak.Proc_myList]=this.vm.nilObj,this.vm.popNandPush(1,S)}return!0},getScheduler:function(){return this.vm.specialObjects[Squeak.splOb_SchedulerAssociation].pointers[Squeak.Assn_value]},activeProcess:function(){return this.getScheduler().pointers[Squeak.ProcSched_activeProcess]},resume:function(y){var S=this.activeProcess();S.pointers[Squeak.Proc_priority]<y.pointers[Squeak.Proc_priority]?(this.putToSleep(S),this.transferTo(y)):this.putToSleep(y)},putToSleep:function(y){var S=y.pointers[Squeak.Proc_priority],F=this.getScheduler().pointers[Squeak.ProcSched_processLists].pointers[S-1];this.linkProcessToList(y,F)},transferTo:function(y){var S=this.getScheduler(),F=S.pointers[Squeak.ProcSched_activeProcess];S.pointers[Squeak.ProcSched_activeProcess]=y,S.dirty=!0,F.pointers[Squeak.Proc_suspendedContext]=this.vm.activeContext,F.dirty=!0,this.vm.newActiveContext(y.pointers[Squeak.Proc_suspendedContext]),y.pointers[Squeak.Proc_suspendedContext]=this.vm.nilObj,this.vm.reclaimableContextCount=0,this.vm.breakOnContextChanged&&(this.vm.breakOnContextChanged=!1,this.vm.breakNow())},wakeHighestPriority:function(){var y,S=this.getScheduler().pointers[Squeak.ProcSched_processLists],F=S.pointersSize()-1;do{if(F<0)throw Error("scheduler could not find a runnable process");y=S.pointers[F--]}while(this.isEmptyList(y));return this.removeFirstLinkOfList(y)},linkProcessToList:function(y,S){if(this.isEmptyList(S))S.pointers[Squeak.LinkedList_firstLink]=y;else{var F=S.pointers[Squeak.LinkedList_lastLink];F.pointers[Squeak.Link_nextLink]=y,F.dirty=!0}S.pointers[Squeak.LinkedList_lastLink]=y,S.dirty=!0,y.pointers[Squeak.Proc_myList]=S,y.dirty=!0},isEmptyList:function(y){return y.pointers[Squeak.LinkedList_firstLink].isNil},removeFirstLinkOfList:function(y){var S=y.pointers[Squeak.LinkedList_firstLink];if(S===y.pointers[Squeak.LinkedList_lastLink])y.pointers[Squeak.LinkedList_firstLink]=this.vm.nilObj,y.pointers[Squeak.LinkedList_lastLink]=this.vm.nilObj;else{var F=S.pointers[Squeak.Link_nextLink];y.pointers[Squeak.LinkedList_firstLink]=F,y.dirty=!0}return S.pointers[Squeak.Link_nextLink]=this.vm.nilObj,S},removeProcessFromList:function(y,S){var F=S.pointers[Squeak.LinkedList_firstLink],P=S.pointers[Squeak.LinkedList_lastLink];if(y===F){var H=y.pointers[Squeak.Link_nextLink];S.pointers[Squeak.LinkedList_firstLink]=H,y===P&&(S.pointers[Squeak.LinkedList_lastLink]=this.vm.nilObj)}else{for(var J=F;;){if(J.isNil)return this.success=!1;if((H=J.pointers[Squeak.Link_nextLink])===y)break;J=H}H=y.pointers[Squeak.Link_nextLink],J.pointers[Squeak.Link_nextLink]=H,y===P&&(S.pointers[Squeak.LinkedList_lastLink]=J)}y.pointers[Squeak.Link_nextLink]=this.vm.nilObj},registerSemaphore:function(y){var S=this.vm.top();return this.isA(S,Squeak.splOb_ClassSemaphore)?this.vm.specialObjects[y]=S:this.vm.specialObjects[y]=this.vm.nilObj,this.vm.stackValue(1)},primitiveWait:function(){var y=this.vm.top();if(!this.isA(y,Squeak.splOb_ClassSemaphore))return!1;var S=y.pointers[Squeak.Semaphore_excessSignals];return 0<S?y.pointers[Squeak.Semaphore_excessSignals]=S-1:(this.linkProcessToList(this.activeProcess(),y),this.transferTo(this.wakeHighestPriority())),!0},primitiveSignal:function(){var y=this.vm.top();return!!this.isA(y,Squeak.splOb_ClassSemaphore)&&(this.synchronousSignal(y),!0)},synchronousSignal:function(y){this.isEmptyList(y)?y.pointers[Squeak.Semaphore_excessSignals]++:this.resume(this.removeFirstLinkOfList(y))},signalAtMilliseconds:function(y,S){this.isA(y,Squeak.splOb_ClassSemaphore)?(this.vm.specialObjects[Squeak.splOb_TheTimerSemaphore]=y,this.vm.nextWakeupTick=S):(this.vm.specialObjects[Squeak.splOb_TheTimerSemaphore]=this.vm.nilObj,this.vm.nextWakeupTick=0)},primitiveSignalAtMilliseconds:function(y){var S=this.stackInteger(0),F=this.stackNonInteger(1);return!!this.success&&(this.signalAtMilliseconds(F,S),this.vm.popN(y),!0)},primitiveSignalAtUTCMicroseconds:function(y){var S=this.stackSigned53BitInt(0),F=this.stackNonInteger(1);if(!this.success)return!1;var P=S/1e3+Squeak.EpochUTC-this.vm.startupTime&Squeak.MillisecondClockMask;return this.signalAtMilliseconds(F,P),this.vm.popN(y),!0},signalSemaphoreWithIndex:function(y){this.semaphoresToSignal.push(y)},signalExternalSemaphores:function(){for(var y=this.vm.specialObjects[Squeak.splOb_ExternalObjectsArray].pointers,S=this.vm.specialObjects[Squeak.splOb_ClassSemaphore];this.semaphoresToSignal.length;){var F=y[this.semaphoresToSignal.shift()-1];F.sqClass==S&&this.synchronousSignal(F)}},primitiveEnterCriticalSection:function(y){if(1<y)return!1;var S=this.vm.stackValue(y),F=y?this.vm.top():this.activeProcess(),P=S.pointers[Squeak.Mutex_owner];return P.isNil?(S.pointers[Squeak.Mutex_owner]=F,S.dirty=!0,this.popNandPushIfOK(y+1,this.vm.falseObj)):P===F?this.popNandPushIfOK(y+1,this.vm.trueObj):(this.popNandPushIfOK(y+1,this.vm.falseObj),this.linkProcessToList(F,S),this.transferTo(this.wakeHighestPriority())),!0},primitiveExitCriticalSection:function(y){var S=this.vm.top();if(this.isEmptyList(S))S.pointers[Squeak.Mutex_owner]=this.vm.nilObj;else{var F=this.removeFirstLinkOfList(S);S.pointers[Squeak.Mutex_owner]=F,S.dirty=!0,this.resume(F)}return!0},primitiveTestAndSetOwnershipOfCriticalSection:function(y){if(1<y)return!1;var S=this.vm.stackValue(y),F=y?this.vm.top():this.activeProcess(),P=S.pointers[Squeak.Mutex_owner];return P.isNil?(S.pointers[Squeak.Mutex_owner]=F,S.dirty=!0,this.popNandPushIfOK(y+1,this.vm.falseObj)):P===F?this.popNandPushIfOK(y+1,this.vm.trueObj):this.popNandPushIfOK(y+1,this.vm.nilObj),!0}},"vm functions",{primitiveGetAttribute:function(y){var S=this.stackInteger(0);if(!this.success)return!1;var F=this.display.argv,P=this.display.vmOptions,H=null;switch(S){case 0:H=F&&F[0]||this.filenameToSqueak(Squeak.vmPath+Squeak.vmFile);break;case 1:H=F&&F[1]||this.display.documentName;break;case 2:H=F&&F[2]||this.display.documentName;break;case 1001:H=Squeak.platformName;break;case 1002:H=Squeak.osVersion;break;case 1003:H=Squeak.platformSubtype;break;case 1004:H=Squeak.vmVersion+" "+Squeak.vmMakerVersion;break;case 1005:H=Squeak.windowSystem;break;case 1006:H=Squeak.vmBuild;break;case 1007:H=Squeak.vmInterpreterVersion;break;case 1009:H=Squeak.vmVersion+" Date: "+Squeak.vmDate;break;default:if(0<=S&&F&&F.length>S)H=F[S];else{if(!(S<0&&P&&P.length>-S-1))return!1;H=P[-S-1]}}return this.vm.popNandPush(y+1,this.makeStObject(H)),!0},setLowSpaceThreshold:function(){var y=this.stackInteger(0);return this.success&&(this.vm.lowSpaceThreshold=y),this.vm.stackValue(1)},primitiveVMParameter:function(y){var S=this.vm.image.isSpur?71:44;switch(y){case 0:for(var F=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray],S),P=0;P<S;P++)F.pointers[P]=this.makeStObject(this.vmParameterAt(P+1));return this.popNandPushIfOK(1,F);case 1:var H=this.stackInteger(0);return!(H<1||S<H)&&this.popNandPushIfOK(2,this.makeStObject(this.vmParameterAt(H)));case 2:return this.popNandPushIfOK(3,0)}return!1},vmParameterAt:function(y){switch(y){case 1:case 2:return this.vm.image.oldSpaceBytes;case 3:case 67:return this.vm.image.totalMemory;case 4:return this.vm.image.allocationCount+this.vm.image.newSpaceCount;case 7:return this.vm.image.gcCount;case 8:return this.vm.image.gcMilliseconds;case 9:return this.vm.image.pgcCount;case 10:return this.vm.image.pgcMilliseconds;case 11:return this.vm.image.gcTenured;case 15:case 16:case 17:case 18:case 19:case 20:case 22:case 44:case 46:case 48:case 65:return 0;case 23:return this.vm.image.extraVMMemory;case 40:return 4;case 41:return this.vm.image.formatVersion();case 54:return this.vm.image.bytesLeft()}return null},primitiveImageName:function(y){return 0==y?this.popNandPushIfOK(1,this.makeStString(this.filenameToSqueak(this.vm.image.name))):(this.vm.image.name=this.filenameFromSqueak(this.vm.top().bytesAsString()),Squeak.Settings.squeakImageName=this.vm.image.name,this.vm.popN(y),!0)},primitiveSnapshot:function(y){this.vm.popNandPush(1,this.vm.trueObj),this.vm.storeContextRegisters(),this.activeProcess().pointers[Squeak.Proc_suspendedContext]=this.vm.activeContext,this.vm.image.fullGC("snapshot");var S=this.vm.image.writeToBuffer();return Squeak.flushAllFiles&&(Squeak.flushAllFiles(),Squeak.filePut(this.vm.image.name,S)),this.vm.popNandPush(1,this.vm.falseObj),!0},primitiveQuit:function(y){return Squeak.flushAllFiles&&Squeak.flushAllFiles(),this.display.quitFlag=!0,this.vm.breakNow("quit"),!0},primitiveExitToDebugger:function(y){return this.vm.breakNow("debugger primitive"),!0},primitiveSetGCBiasToGrow:function(y){return this.fakePrimitive(".primitiveSetGCBiasToGrow",0,y)},primitiveSetGCBiasToGrowGCLimit:function(y){return this.fakePrimitive(".primitiveSetGCBiasToGrowGCLimit",0,y)}},"time",{primitiveRelinquishProcessorForMicroseconds:function(y){return this.vm.popN(y),this.vm.goIdle(),!0},millisecondClockValue:function(){return Date.now()-this.vm.startupTime&Squeak.MillisecondClockMask},millisecondClockValueSet:function(y){this.vm.startupTime=Date.now()-y},secondClock:function(){return this.pos32BitIntFor(Squeak.totalSeconds())},microsecondClock:function(y){var S=Date.now()-y.epoch;if("object"!=typeof performance)return this.pos53BitIntFor(1e3*S);var F=1e3*performance.now()%1e3|0,P=y.millis,H=y.micros;return S<P&&(S=P),S===P&&F<H&&S++,y.millis=S,y.micros=F,this.pos53BitIntFor(1e3*S+F)},microsecondClockUTC:function(){return this.microsecondClockUTCState||(this.microsecondClockUTCState={epoch:Squeak.EpochUTC,millis:0,micros:0}),this.microsecondClock(this.microsecondClockUTCState)},microsecondClockLocal:function(){return this.microsecondClockLocalState||(this.microsecondClockLocalState={epoch:Squeak.Epoch,millis:0,micros:0}),this.microsecondClock(this.microsecondClockLocalState)},primitiveUtcWithOffset:function(y){var S=new Date,F=this.pos53BitIntFor(1e3*S.getTime()),P=-60*S.getTimezoneOffset();if(0<y){var H=this.vm.stackValue(0);return H.pointers[0]=F,H.pointers[1]=P,this.popNandPushIfOK(y+1,H),!0}var J=[F,P];return this.popNandPushIfOK(y+1,this.makeStArray(J)),!0}}),Object.subclass("Squeak.Compiler","initialization",{initialize:function(y){this.vm=y,this.comments=!!Squeak.Compiler.comments,this.specialSelectors=["+","-","<",">","<=",">=","=","~=","*","/","\\\\","@","bitShift:","//","bitAnd:","bitOr:","at:","at:put:","size","next","nextPut:","atEnd","==","class","blockCopy:","value","value:","do:","new","new:","x","y"],this.doitCounter=0}},"accessing",{compile:function(y,S,F){if(!y.methodSignFlag())if(void 0===y.compiled)y.compiled=!1;else{this.singleStep=!1,this.debug=this.comments;var P=S&&S.className(),H=F&&F.bytesAsString();y.compiled=this.generate(y,P,H)}},enableSingleStepping:function(y,S,F){if(!y.compiled||!y.compiled.canSingleStep){this.singleStep=!0,this.debug=!0,S||this.vm.allMethodsDo((function(P,H,J){if(H===y)return S=P,F=J,!0}));var P=S&&S.className(),H=F&&F.bytesAsString(),J=S&&S.allInstVarNames();y.compiled=this.generate(y,P,H,J),y.compiled.canSingleStep=!0}return!0},functionNameFor:function(y,S){if(void 0===y||"?"===y)return"DOIT_"+ ++this.doitCounter;if(!/[^a-zA-Z0-9:_]/.test(S))return(y+"_"+S).replace(/[: ]/g,"_");var F=S.replace(/./g,(function(y){return{"|":"OR","~":"NOT","<":"LT","=":"EQ",">":"GT","&":"AND","@":"AT","*":"TIMES","+":"PLUS","\\":"MOD","-":"MINUS",",":"COMMA","/":"DIV","?":"IF"}[y]||"OPERATOR"}));return y.replace(/[ ]/,"_")+"__"+F+"__"}},"generating",{generate:function(y,S,F,P){for(this.method=y,this.pc=0,this.endPC=0,this.prevPC=0,this.source=[],this.sourceLabels={},this.needsLabel={},this.sourcePos={},this.needsVar={},this.needsBreak=!1,S&&F&&this.source.push("// ",S,">>",F,"\n"),this.instVarNames=P,this.allVars=["context","stack","rcvr","inst[","temp[","lit["],this.sourcePos.context=this.source.length,this.source.push("var context = vm.activeContext;\n"),this.sourcePos.stack=this.source.length,this.source.push("var stack = context.pointers;\n"),this.sourcePos.rcvr=this.source.length,this.source.push("var rcvr = vm.receiver;\n"),this.sourcePos["inst["]=this.source.length,this.source.push("var inst = rcvr.pointers;\n"),this.sourcePos["temp["]=this.source.length,this.source.push("var temp = vm.homeContext.pointers;\n"),this.sourcePos["lit["]=this.source.length,this.source.push("var lit = vm.method.pointers;\n"),this.sourcePos["loop-start"]=this.source.length,this.source.push("while (true) switch (vm.pc) {\ncase 0:\n"),this.done=!1;!this.done;){var H=y.bytes[this.pc++],J=0;switch(248&H){case 0:case 8:this.generatePush("inst[",15&H,"]");break;case 16:case 24:this.generatePush("temp[",6+(15&H),"]");break;case 32:case 40:case 48:case 56:this.generatePush("lit[",1+(31&H),"]");break;case 64:case 72:case 80:case 88:this.generatePush("lit[",1+(31&H),"].pointers[1]");break;case 96:this.generatePopInto("inst[",7&H,"]");break;case 104:this.generatePopInto("temp[",6+(7&H),"]");break;case 112:switch(H){case 112:this.generatePush("rcvr");break;case 113:this.generatePush("vm.trueObj");break;case 114:this.generatePush("vm.falseObj");break;case 115:this.generatePush("vm.nilObj");break;case 116:this.generatePush("-1");break;case 117:this.generatePush("0");break;case 118:this.generatePush("1");break;case 119:this.generatePush("2")}break;case 120:switch(H){case 120:this.generateReturn("rcvr");break;case 121:this.generateReturn("vm.trueObj");break;case 122:this.generateReturn("vm.falseObj");break;case 123:this.generateReturn("vm.nilObj");break;case 124:this.generateReturn("stack[vm.sp]");break;case 125:this.generateBlockReturn();break;default:throw Error("unusedBytecode")}break;case 128:case 136:this.generateExtended(H);break;case 144:this.generateJump(1+(7&H));break;case 152:this.generateJumpIf(!1,1+(7&H));break;case 160:J=y.bytes[this.pc++],this.generateJump(256*((7&H)-4)+J);break;case 168:J=y.bytes[this.pc++],this.generateJumpIf(H<172,256*(3&H)+J);break;case 176:case 184:this.generateNumericOp(H);break;case 192:case 200:this.generateQuickPrim(H);break;case 208:case 216:this.generateSend("lit[",1+(15&H),"]",0,!1);break;case 224:case 232:this.generateSend("lit[",1+(15&H),"]",1,!1);break;case 240:case 248:this.generateSend("lit[",1+(15&H),"]",2,!1)}}var Q=this.functionNameFor(S,F);return this.singleStep?(this.debug&&this.source.push("// all valid PCs have a label;\n"),this.source.push("default: throw Error('invalid PC');\n}")):(this.sourcePos["loop-end"]=this.source.length,this.source.push("default: vm.interpretOne(true); return;\n}"),this.deleteUnneededLabels()),this.deleteUnneededVariables(),new Function("'use strict';\nreturn function "+Q+"(vm) {\n"+this.source.join("")+"}")()},generateExtended:function(y){var S,F;switch(y){case 128:switch((S=this.method.bytes[this.pc++])>>6){case 0:return void this.generatePush("inst[",63&S,"]");case 1:return void this.generatePush("temp[",6+(63&S),"]");case 2:return void this.generatePush("lit[",1+(63&S),"]");case 3:return void this.generatePush("lit[",1+(63&S),"].pointers[1]")}case 129:switch((S=this.method.bytes[this.pc++])>>6){case 0:return void this.generateStoreInto("inst[",63&S,"]");case 1:return void this.generateStoreInto("temp[",6+(63&S),"]");case 2:throw Error("illegal store into literal");case 3:return void this.generateStoreInto("lit[",1+(63&S),"].pointers[1]")}return;case 130:switch((S=this.method.bytes[this.pc++])>>6){case 0:return void this.generatePopInto("inst[",63&S,"]");case 1:return void this.generatePopInto("temp[",6+(63&S),"]");case 2:throw Error("illegal pop into literal");case 3:return void this.generatePopInto("lit[",1+(63&S),"].pointers[1]")}case 131:return S=this.method.bytes[this.pc++],void this.generateSend("lit[",1+(31&S),"]",S>>5,!1);case 132:switch(S=this.method.bytes[this.pc++],F=this.method.bytes[this.pc++],S>>5){case 0:return void this.generateSend("lit[",1+F,"]",31&S,!1);case 1:return void this.generateSend("lit[",1+F,"]",31&S,!0);case 2:return void this.generatePush("inst[",F,"]");case 3:return void this.generatePush("lit[",1+F,"]");case 4:return void this.generatePush("lit[",1+F,"].pointers[1]");case 5:return void this.generateStoreInto("inst[",F,"]");case 6:return void this.generatePopInto("inst[",F,"]");case 7:return void this.generateStoreInto("lit[",1+F,"].pointers[1]")}case 133:return S=this.method.bytes[this.pc++],void this.generateSend("lit[",1+(31&S),"]",S>>5,!0);case 134:return S=this.method.bytes[this.pc++],void this.generateSend("lit[",1+(63&S),"]",S>>6,!1);case 135:return void this.generateInstruction("pop","vm.sp--");case 136:return this.needsVar.stack=!0,void this.generateInstruction("dup","var dup = stack[vm.sp]; stack[++vm.sp] = dup");case 137:return this.needsVar.stack=!0,void this.generateInstruction("push thisContext","stack[++vm.sp] = vm.exportThisContext()");case 138:var P=127<(S=this.method.bytes[this.pc++]),H=127&S;return void this.generateClosureTemps(H,P);case 139:return S=this.method.bytes[this.pc++],F=this.method.bytes[this.pc++],void this.generateCallPrimitive(S+256*F);case 140:return S=this.method.bytes[this.pc++],F=this.method.bytes[this.pc++],void this.generatePush("temp[",6+F,"].pointers[",S,"]");case 141:return S=this.method.bytes[this.pc++],F=this.method.bytes[this.pc++],void this.generateStoreInto("temp[",6+F,"].pointers[",S,"]");case 142:return S=this.method.bytes[this.pc++],F=this.method.bytes[this.pc++],void this.generatePopInto("temp[",6+F,"].pointers[",S,"]");case 143:var J=15&(S=this.method.bytes[this.pc++]),Q=S>>4,ee=(F=this.method.bytes[this.pc++])<<8|this.method.bytes[this.pc++];return void this.generateClosureCopy(J,Q,ee)}},generatePush:function(y,S,F,P,H){this.debug&&this.generateDebugCode("push",y,S,F,P,H),this.generateLabel(),this.needsVar[y]=!0,this.needsVar.stack=!0,this.source.push("stack[++vm.sp] = ",y),void 0!==S&&(this.source.push(S,F),void 0!==P&&this.source.push(P,H)),this.source.push(";\n")},generateStoreInto:function(y,S,F,P,H){this.debug&&this.generateDebugCode("store into",y,S,F,P,H),this.generateLabel(),this.needsVar[y]=!0,this.needsVar.stack=!0,this.source.push(y),void 0!==S&&(this.source.push(S,F),void 0!==P&&this.source.push(P,H)),this.source.push(" = stack[vm.sp];\n"),this.generateDirty(y,S)},generatePopInto:function(y,S,F,P,H){this.debug&&this.generateDebugCode("pop into",y,S,F,P,H),this.generateLabel(),this.needsVar[y]=!0,this.needsVar.stack=!0,this.source.push(y),void 0!==S&&(this.source.push(S,F),void 0!==P&&this.source.push(P,H)),this.source.push(" = stack[vm.sp--];\n"),this.generateDirty(y,S)},generateReturn:function(y){this.debug&&this.generateDebugCode("return",y),this.generateLabel(),this.needsVar[y]=!0,this.source.push("vm.pc = ",this.pc,"; vm.doReturn(",y,"); return;\n"),this.needsBreak=!1,this.done=this.pc>this.endPC},generateBlockReturn:function(){this.debug&&this.generateDebugCode("block return"),this.generateLabel(),this.needsVar.stack=!0,this.source.push("vm.pc = ",this.pc,"; vm.doReturn(stack[vm.sp--], context.pointers[0]); return;\n"),this.needsBreak=!1},generateJump:function(y){var S=this.pc+y;this.debug&&this.generateDebugCode("jump to "+S),this.generateLabel(),this.needsVar.context=!0,this.source.push("vm.pc = ",S,"; "),y<0&&this.source.push("\nif (vm.interruptCheckCounter-- <= 0) {\n","   vm.checkForInterrupts();\n","   if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return;\n","}\n"),this.singleStep&&this.source.push("\nif (vm.breakOutOfInterpreter) return;\n"),this.source.push("continue;\n"),this.needsBreak=!1,this.needsLabel[S]=!0,S>this.endPC&&(this.endPC=S)},generateJumpIf:function(y,S){var F=this.pc+S;this.debug&&this.generateDebugCode("jump if "+y+" to "+F),this.generateLabel(),this.needsVar.stack=!0,this.source.push("var cond = stack[vm.sp--]; if (cond === vm.",y,"Obj) {vm.pc = ",F,"; "),this.singleStep&&this.source.push("if (vm.breakOutOfInterpreter) return; else "),this.source.push("continue}\n","else if (cond !== vm.",!y,"Obj) {vm.sp++; vm.pc = ",this.pc,"; vm.send(vm.specialObjects[25], 0, false); return}\n"),this.needsLabel[this.pc]=!0,this.needsLabel[F]=!0,F>this.endPC&&(this.endPC=F)},generateQuickPrim:function(y){switch(this.debug&&this.generateDebugCode("quick send #"+this.specialSelectors[16+(15&y)]),this.generateLabel(),y){case 192:return this.needsVar.stack=!0,this.source.push("var a, b; if ((a=stack[vm.sp-1]).sqClass === vm.specialObjects[7] && typeof (b=stack[vm.sp]) === 'number' && b>0 && b<=a.pointers.length) {\n","  stack[--vm.sp] = a.pointers[b-1];","} else { var c = vm.primHandler.objectAt(true,true,false); if (vm.primHandler.success) stack[--vm.sp] = c; else {\n","  vm.pc = ",this.pc,"; vm.sendSpecial(16); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return; }}\n"),void(this.needsLabel[this.pc]=!0);case 193:return this.needsVar.stack=!0,this.source.push("var a, b; if ((a=stack[vm.sp-2]).sqClass === vm.specialObjects[7] && typeof (b=stack[vm.sp-1]) === 'number' && b>0 && b<=a.pointers.length) {\n","  var c = stack[vm.sp]; stack[vm.sp-=2] = a.pointers[b-1] = c; a.dirty = true;","} else { vm.primHandler.objectAtPut(true,true,false); if (vm.primHandler.success) stack[vm.sp-=2] = c; else {\n","  vm.pc = ",this.pc,"; vm.sendSpecial(17); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return; }}\n"),void(this.needsLabel[this.pc]=!0);case 194:return this.needsVar.stack=!0,this.source.push("if (stack[vm.sp].sqClass === vm.specialObjects[7]) stack[vm.sp] = stack[vm.sp].pointersSize();\n","else if (stack[vm.sp].sqClass === vm.specialObjects[6]) stack[vm.sp] = stack[vm.sp].bytesSize();\n","else { vm.pc = ",this.pc,"; vm.sendSpecial(18); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return; }\n"),void(this.needsLabel[this.pc]=!0);case 198:return this.needsVar.stack=!0,void this.source.push("var cond = stack[vm.sp-1] === stack[vm.sp];\nstack[--vm.sp] = cond ? vm.trueObj : vm.falseObj;\n");case 199:return this.needsVar.stack=!0,void this.source.push("stack[vm.sp] = typeof stack[vm.sp] === 'number' ? vm.specialObjects[5] : stack[vm.sp].sqClass;\n");case 200:return this.needsVar.rcvr=!0,this.source.push("vm.pc = ",this.pc,"; if (!vm.primHandler.quickSendOther(rcvr, ",15&y,")) ","{vm.sendSpecial(",16+(15&y),"); return}\n"),this.needsLabel[this.pc]=!0,void(this.needsLabel[this.pc+2]=!0);case 201:case 202:case 203:return this.needsVar.rcvr=!0,this.source.push("vm.pc = ",this.pc,"; if (!vm.primHandler.quickSendOther(rcvr, ",15&y,")) vm.sendSpecial(",16+(15&y),"); return;\n"),void(this.needsLabel[this.pc]=!0)}this.needsVar.rcvr=!0,this.needsVar.context=!0,this.source.push("vm.pc = ",this.pc,"; if (!vm.primHandler.quickSendOther(rcvr, ",15&y,"))"," vm.sendSpecial(",16+(15&y),");\n","if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return;\n"),this.needsBreak=!1,this.needsLabel[this.pc]=!0},generateNumericOp:function(y){switch(this.debug&&this.generateDebugCode("quick send #"+this.specialSelectors[15&y]),this.generateLabel(),this.needsLabel[this.pc]=!0,y){case 176:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = vm.primHandler.signed32BitIntegerFor(a + b);\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(0); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 177:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = vm.primHandler.signed32BitIntegerFor(a - b);\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(1); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 178:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a < b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(2); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 179:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a > b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(3); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 180:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a <= b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(4); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 181:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a >= b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(5); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 182:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a === b ? vm.trueObj : vm.falseObj;\n","} else if (a === b && a.float === a.float) {\n","   stack[--vm.sp] = vm.trueObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(6); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 183:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a !== b ? vm.trueObj : vm.falseObj;\n","} else if (a === b && a.float === a.float) {\n","   stack[--vm.sp] = vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(7); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 184:return void this.source.push("vm.success = true; vm.resultIsFloat = false; if(!vm.pop2AndPushNumResult(vm.stackIntOrFloat(1) * vm.stackIntOrFloat(0))) { vm.pc = ",this.pc,"; vm.sendSpecial(8); return}\n");case 185:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.quickDivide(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(9); return}\n");case 186:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.mod(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(10); return}\n");case 187:return void this.source.push("vm.success = true; if(!vm.primHandler.primitiveMakePoint(1, true)) { vm.pc = ",this.pc,"; vm.sendSpecial(11); return}\n");case 188:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.safeShift(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(12); return}\n");case 189:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.div(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(13); return}\n");case 190:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.stackInteger(1) & vm.stackInteger(0))) { vm.pc = ",this.pc,"; vm.sendSpecial(14); return}\n");case 191:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.stackInteger(1) | vm.stackInteger(0))) { vm.pc = ",this.pc,"; vm.sendSpecial(15); return}\n")}},generateSend:function(y,S,F,P,H){this.debug&&this.generateDebugCode("send "+("lit["===y?this.method.pointers[S].bytesAsString():"...")),this.generateLabel(),this.needsVar[y]=!0,this.needsVar.context=!0,this.source.push("vm.pc = ",this.pc,"; vm.send(",y,S,F,", ",P,", ",H,"); ","if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return;\n"),this.needsBreak=!1,this.needsLabel[this.pc]=!0},generateClosureTemps:function(y,S){if(this.debug&&this.generateDebugCode("closure temps"),this.generateLabel(),this.needsVar.stack=!0,this.source.push("var array = vm.instantiateClass(vm.specialObjects[7], ",y,");\n"),S){for(var F=0;F<y;F++)this.source.push("array.pointers[",F,"] = stack[vm.sp - ",y-F-1,"];\n");this.source.push("stack[vm.sp -= ",y-1,"] = array;\n")}else this.source.push("stack[++vm.sp] = array;\n")},generateClosureCopy:function(y,S,F){var P=this.pc,H=P+F;if(this.debug&&this.generateDebugCode("push closure("+P+"-"+(H-1)+"): "+S+" copied, "+y+" args"),this.generateLabel(),this.needsVar.stack=!0,this.source.push("var closure = vm.instantiateClass(vm.specialObjects[36], ",S,");\n","closure.pointers[0] = context; vm.reclaimableContextCount = 0;\n","closure.pointers[1] = ",P+4*this.method.pointers.length+1,";\n","closure.pointers[2] = ",y,";\n"),0<S){for(var J=0;J<S;J++)this.source.push("closure.pointers[",J+3,"] = stack[vm.sp - ",S-J-1,"];\n");this.source.push("stack[vm.sp -= ",S-1,"] = closure;\n")}else this.source.push("stack[++vm.sp] = closure;\n");this.source.push("vm.pc = ",H,";\n"),this.singleStep&&this.source.push("if (vm.breakOutOfInterpreter) return;\n"),this.source.push("continue;\n"),this.needsBreak=!1,this.needsLabel[P]=!0,this.needsLabel[H]=!0,H>this.endPC&&(this.endPC=H)},generateCallPrimitive:function(y){this.debug&&this.generateDebugCode("call primitive "+y),this.generateLabel(),129===this.method.bytes[this.pc]&&(this.needsVar.stack=!0,this.source.push("if (vm.primFailCode) {stack[vm.sp] = vm.getErrorObjectFromPrimFailCode(); vm.primFailCode = 0;}\n"))},generateDirty:function(y,S){switch(y){case"inst[":this.source.push("rcvr.dirty = true;\n");break;case"lit[":this.source.push(y,S,"].dirty = true;\n");break;case"temp[":break;default:throw Error("unexpected target "+y)}},generateLabel:function(){this.prevPC&&(this.sourceLabels[this.prevPC]=this.source.length,this.source.push("case ",this.prevPC,":\n")),this.prevPC=this.pc},generateDebugCode:function(y,S,F,P,H,J){this.needsBreak&&(this.source.push("if (vm.breakOutOfInterpreter) {vm.pc = ",this.prevPC,"; return}\n"),this.needsLabel[this.prevPC]=!0);for(var Q=[],ee=this.prevPC;ee<this.pc;ee++)Q.push((this.method.bytes[ee]+256).toString(16).slice(-2).toUpperCase());if(this.source.push("// ",this.prevPC," <",Q.join(" "),"> ",y),S)switch(this.source.push(" "),S){case"vm.nilObj":this.source.push("nil");break;case"vm.trueObj":this.source.push("true");break;case"vm.falseObj":this.source.push("false");break;case"rcvr":this.source.push("self");break;case"stack[vm.sp]":this.source.push("top of stack");break;case"inst[":this.instVarNames?this.source.push(this.instVarNames[F]):this.source.push("inst var ",F);break;case"temp[":this.source.push("tmp",F-6),"]"!==P&&this.source.push("[",H,"]");break;case"lit[":var te=this.method.pointers[F];"]"===P?this.source.push(te):this.source.push(te.pointers[0].bytesAsString());break;default:this.source.push(S)}this.source.push("\n"),this.needsBreak=this.singleStep},generateInstruction:function(y,S){this.debug&&this.generateDebugCode(y),this.generateLabel(),this.source.push(S,";\n")},deleteUnneededLabels:function(){var y=!1;for(var S in this.sourceLabels)if(this.needsLabel[S])y=!0;else for(var F=0;F<3;F++)this.source[this.sourceLabels[S]+F]="";y||(this.source[this.sourcePos["loop-start"]]="",this.source[this.sourcePos["loop-end"]]="")},deleteUnneededVariables:function(){this.needsVar.stack&&(this.needsVar.context=!0),this.needsVar["inst["]&&(this.needsVar.rcvr=!0);for(var y=0;y<this.allVars.length;y++){var S=this.allVars[y];this.needsVar[S]||(this.source[this.sourcePos[S]]="")}}}),Object.extend(Squeak,"audio",{startAudioOut:function(){if(!this.audioOutContext){var y=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;this.audioOutContext=y&&new y}return this.audioOutContext},startAudioIn:function(y,S){return this.audioInContext?(this.audioInSource.disconnect(),y(this.audioInContext,this.audioInSource)):(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?void navigator.getUserMedia({audio:!0,toString:function(){return"audio"}},(function(S){var F=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;this.audioInContext=F&&new F,this.audioInSource=this.audioInContext.createMediaStreamSource(S),y(this.audioInContext,this.audioInSource)}),(function(){S("cannot access microphone")})):S("test: audio input not supported"))},stopAudio:function(){this.audioInSource&&this.audioInSource.disconnect()}}),Object.extend(Squeak,"known classes",{BitBlt_dest:0,BitBlt_source:1,BitBlt_halftone:2,BitBlt_combinationRule:3,BitBlt_destX:4,BitBlt_destY:5,BitBlt_width:6,BitBlt_height:7,BitBlt_sourceX:8,BitBlt_sourceY:9,BitBlt_clipX:10,BitBlt_clipY:11,BitBlt_clipW:12,BitBlt_clipH:13,BitBlt_colorMap:14,BitBlt_warpBase:15,Form_bits:0,Form_width:1,Form_height:2,Form_depth:3,Form_offset:4}),Object.extend(Squeak.Primitives.prototype,"display",{displayDirty:function(){}}),Object.extend(Squeak.Primitives.prototype,"display",{initDisplay:function(y){this.display=y,this.display.vm=this.vm,this.indexedColors=[4294967295,4278190081,4294967295,4286611584,4294901760,4278255360,4278190335,4278255615,4294967040,4294902015,4280295456,4282400832,4284506208,4288651167,4290756543,4292861919,4278716424,4279242768,4279769112,4280821800,4281348144,4281874488,4282927176,4283453520,4283979864,4285032552,4285558896,4286085240,4287072135,4287598479,4288124823,4289177511,4289703855,4290230199,4291282887,4291809231,4292335575,4293388263,4293914607,4294440951,4278190081,4278203136,4278216192,4278229248,4278242304,4278255360,4278190131,4278203187,4278216243,4278229299,4278242355,4278255411,4278190182,4278203238,4278216294,4278229350,4278242406,4278255462,4278190233,4278203289,4278216345,4278229401,4278242457,4278255513,4278190284,4278203340,4278216396,4278229452,4278242508,4278255564,4278190335,4278203391,4278216447,4278229503,4278242559,4278255615,4281532416,4281545472,4281558528,4281571584,4281584640,4281597696,4281532467,4281545523,4281558579,4281571635,4281584691,4281597747,4281532518,4281545574,4281558630,4281571686,4281584742,4281597798,4281532569,4281545625,4281558681,4281571737,4281584793,4281597849,4281532620,4281545676,4281558732,4281571788,4281584844,4281597900,4281532671,4281545727,4281558783,4281571839,4281584895,4281597951,4284874752,4284887808,4284900864,4284913920,4284926976,4284940032,4284874803,4284887859,4284900915,4284913971,4284927027,4284940083,4284874854,4284887910,4284900966,4284914022,4284927078,4284940134,4284874905,4284887961,4284901017,4284914073,4284927129,4284940185,4284874956,4284888012,4284901068,4284914124,4284927180,4284940236,4284875007,4284888063,4284901119,4284914175,4284927231,4284940287,4288217088,4288230144,4288243200,4288256256,4288269312,4288282368,4288217139,4288230195,4288243251,4288256307,4288269363,4288282419,4288217190,4288230246,4288243302,4288256358,4288269414,4288282470,4288217241,4288230297,4288243353,4288256409,4288269465,4288282521,4288217292,4288230348,4288243404,4288256460,4288269516,4288282572,4288217343,4288230399,4288243455,4288256511,4288269567,4288282623,4291559424,4291572480,4291585536,4291598592,4291611648,4291624704,4291559475,4291572531,4291585587,4291598643,4291611699,4291624755,4291559526,4291572582,4291585638,4291598694,4291611750,4291624806,4291559577,4291572633,4291585689,4291598745,4291611801,4291624857,4291559628,4291572684,4291585740,4291598796,4291611852,4291624908,4291559679,4291572735,4291585791,4291598847,4291611903,4291624959,4294901760,4294914816,4294927872,4294940928,4294953984,4294967040,4294901811,4294914867,4294927923,4294940979,4294954035,4294967091,4294901862,4294914918,4294927974,4294941030,4294954086,4294967142,4294901913,4294914969,4294928025,4294941081,4294954137,4294967193,4294901964,4294915020,4294928076,4294941132,4294954188,4294967244,4294902015,4294915071,4294928127,4294941183,4294954239,4294967295]},primitiveBeCursor:function(y){if(this.display.cursorCanvas){var S=this.loadForm(this.stackNonInteger(y),!0),F=1===y?this.loadForm(this.stackNonInteger(0)):null;if(!this.success||!S)return!1;var P=this.display.cursorCanvas,H=P.getContext("2d"),J={left:0,top:0,right:S.width,bottom:S.height};P.width=S.width,P.height=S.height,1===S.depth?F?(S=this.cursorMergeMask(S,F),this.showForm(H,S,J,[0,4278190335,4294967295,4278190080])):this.showForm(H,S,J,[0,4278190080]):this.showForm(H,S,J,!0);var Q=this.display.context.canvas,ee=Q.offsetWidth/Q.width;P.style.width=(P.width*ee|0)+"px",P.style.height=(P.height*ee|0)+"px",this.display.cursorOffsetX=S.offsetX*ee|0,this.display.cursorOffsetY=S.offsetY*ee|0}return this.vm.popN(y),!0},cursorMergeMask:function(y,S){for(var F=new Uint32Array(16),P=0;P<16;P++){for(var H=y.bits[P],J=S.bits[P],Q=2147483648,ee=0,te=0;te<16;te++)ee=ee|(J&Q)>>te|(H&Q)>>te+1,Q>>>=1;F[P]=ee}return{obj:y.obj,bits:F,depth:2,width:16,height:16,offsetX:y.offsetX,offsetY:y.offsetY,msb:!0,pixPerWord:16,pitch:1}},primitiveBeDisplay:function(y){var S=this.vm.stackValue(0);return this.vm.specialObjects[Squeak.splOb_TheDisplay]=S,this.vm.popN(y),!0},primitiveReverseDisplay:function(y){if(this.reverseDisplay=!this.reverseDisplay,this.redrawDisplay(),this.display.cursorCanvas){for(var S=this.display.cursorCanvas,F=S.getContext("2d"),P=F.getImageData(0,0,S.width,S.height),H=new Uint32Array(P.data.buffer),J=0;J<H.length;J++)H[J]=16777215^H[J];F.putImageData(P,0,0)}return!0},primitiveShowDisplayRect:function(y){var S={left:this.stackInteger(3),top:this.stackInteger(1),right:this.stackInteger(2),bottom:this.stackInteger(0)};return!!this.success&&(this.redrawDisplay(S),this.vm.popN(y),!0)},redrawDisplay:function(y){var S=this.theDisplay(),F={left:0,top:0,right:S.width,bottom:S.height};y&&(y.left>F.left&&(F.left=y.left),y.right<F.right&&(F.right=y.right),y.top>F.top&&(F.top=y.top),y.bottom<F.bottom&&(F.bottom=y.bottom)),F.left<F.right&&F.top<F.bottom&&this.displayUpdate(S,F)},showForm:function(y,S,F,P){if(F){var H=F.left,J=F.top,Q=F.right-H,ee=F.bottom-J,te=y.createImageData(Q,ee),re=te.data;re.buffer||(re=new Uint8Array(Q*ee*4));var ie=new Uint32Array(re.buffer);switch(S.depth){case 1:case 2:case 4:case 8:var ae=P||this.swappedColors;if(!ae){ae=[];for(var se=0;se<256;se++){var ne=(4278255360&(ve=this.indexedColors[se]))+((16711680&ve)>>16)+((255&ve)<<16);ae[se]=ne}this.swappedColors=ae}this.reverseDisplay&&(ae=P?P.map((function(y){return 16777215^y})):(this.reversedColors||(this.reversedColors=ae.map((function(y){return 16777215^y}))),this.reversedColors));for(var oe=(1<<S.depth)-1,ue=32-(H%S.pixPerWord+1)*S.depth,le=0;le<ee;le++){for(var ce=S.pitch*J+(H/S.pixPerWord|0),fe=ue,he=S.bits[ce],pe=te.width*le,de=0;de<Q;de++)ie[pe++]=ae[he>>>fe&oe],(fe-=S.depth)<0&&(fe=32-S.depth,he=S.bits[++ce]);J++}break;case 16:for(ue=H%2?0:16,le=0;le<ee;le++){for(ce=S.pitch*J+(H/2|0),fe=ue,he=S.bits[ce],pe=te.width*le,de=0;de<Q;de++){var be=he>>>fe;ie[pe++]=((31744&be)>>7)+((992&be)<<6)+((31&be)<<19)+4278190080,(fe-=16)<0&&(fe=16,he=S.bits[++ce])}J++}break;case 32:var me=P?0:4278190080;for(le=0;le<ee;le++){for(ce=S.pitch*J+H,pe=te.width*le,de=0;de<Q;de++){var ve;ne=4278255360&(ve=S.bits[ce++])|(16711680&ve)>>16|(255&ve)<<16|me,ie[pe++]=ne}J++}break;default:throw Error("depth not implemented")}te.data!==re&&te.data.set(re),y.putImageData(te,F.left,F.top)}},primitiveDeferDisplayUpdates:function(y){var S=this.stackBoolean(0);return!!this.success&&(this.deferDisplayUpdates=S,this.vm.popN(y),!0)},primitiveForceDisplayUpdate:function(y){return this.vm.breakOut(),this.vm.popN(y),!0},primitiveScanCharacters:function(y){if(6!==y)return!1;var S=this.stackInteger(0),F=this.stackNonInteger(1),P=this.stackInteger(2),H=this.stackNonInteger(3),J=this.stackInteger(4),Q=this.stackInteger(5);if(!this.success)return!1;if(F.pointersSize()<258||!H.isBytes())return!1;if(!(0<Q&&0<J&&J<=H.bytesSize()))return!1;var ee=this.stackNonInteger(6);if(!this.success||ee.pointersSize()<4)return!1;var te=this.checkSmallInt(ee.pointers[0]),re=this.checkSmallInt(ee.pointers[1]),ie=this.checkNonInteger(ee.pointers[2]),ae=this.checkNonInteger(ee.pointers[3]);if(!this.success||256!==ae.pointersSize())return!1;var se=ie.pointersSize()-2;for(re=Q;re<=J;){var ne=H.bytes[re-1],oe=F.pointers[ne];if(!oe.isNil)return this.ensureSmallInt(te),!!this.success&&(ee.pointers[0]=te,ee.pointers[1]=re,this.popNandPushIfOK(7,oe));var ue=this.checkSmallInt(ae.pointers[ne]);if(!this.success||ue<0||se<ue)return!1;var le=this.checkSmallInt(ie.pointers[ue]),ce=this.checkSmallInt(ie.pointers[ue+1]);if(!this.success)return!1;var fe=te+ce-le;if(P<fe)return this.ensureSmallInt(te),!!this.success&&(ee.pointers[0]=te,ee.pointers[1]=re,oe=F.pointers[257],this.popNandPushIfOK(7,oe));te=fe+S,re+=1}return this.ensureSmallInt(te),!!this.success&&(ee.pointers[0]=te,ee.pointers[1]=J,oe=F.pointers[256],this.popNandPushIfOK(7,oe))},primitiveScreenSize:function(y){var S=this.display,F=S.width||S.context.canvas.width,P=S.height||S.context.canvas.height;return this.popNandPushIfOK(y+1,this.makePointWithXandY(F,P))},primitiveScreenScaleFactor:function(y){var S=1/(this.display.initialScale||1);return this.popNandPushIfOK(y+1,this.makeFloat(S))},primitiveSetFullScreen:function(y){var S=this.stackBoolean(0);if(!this.success)return!1;if(this.display.fullscreen!=S)if(this.display.fullscreenRequest){var F=this.vm.freeze();this.display.fullscreenRequest(S,(function(){F()}))}else this.display.fullscreen=S,this.vm.breakOut();return this.vm.popN(y),!0},primitiveTestDisplayDepth:function(y){return this.pop2andPushBoolIfOK(0<=[1,2,4,8,16,32].indexOf(this.stackInteger(0)))},loadForm:function(y,S){if(y.isNil)return null;var F={obj:y,bits:y.pointers[Squeak.Form_bits].wordsOrBytes(),depth:y.pointers[Squeak.Form_depth],width:y.pointers[Squeak.Form_width],height:y.pointers[Squeak.Form_height]};if(S){var P=y.pointers[Squeak.Form_offset];F.offsetX=P.pointers?P.pointers[Squeak.Point_x]:0,F.offsetY=P.pointers?P.pointers[Squeak.Point_y]:0}return 0===F.width||0===F.height?F:0<F.width&&0<F.height?(F.msb=0<F.depth,F.msb||(F.depth=-F.depth),0<F.depth?(F.pixPerWord=32/F.depth,F.pitch=(F.width+(F.pixPerWord-1))/F.pixPerWord|0,F.bits.length!==F.pitch*F.height?null:F):null):null},theDisplay:function(){return this.loadForm(this.vm.specialObjects[Squeak.splOb_TheDisplay])},displayDirty:function(y,S){this.deferDisplayUpdates||y!=this.vm.specialObjects[Squeak.splOb_TheDisplay]||this.displayUpdate(this.theDisplay(),S)},displayUpdate:function(y,S){this.showForm(this.display.context,y,S),this.display.lastTick=this.vm.lastTick,this.display.idle=0},primitiveBeep:function(y){var S=Squeak.startAudioOut();if(S){var F=S.createOscillator();F.connect(S.destination),F.type="square",F.frequency.value=880,F.start(),F.stop(S.currentTime+.05)}else this.vm.warnOnce("could not initialize audio");return this.popNIfOK(y)}}),Object.extend(Squeak,"files",{fsck:function(y,S,F,P){if(S=S||"",P=P||{dirs:0,files:0,bytes:0,deleted:0},!F&&(F={},Object.keys(Squeak.Settings).forEach((function(y){var S=y.match(/squeak-file(\.lz)?:(.*)$/);S&&(F[S[2]]=!0)})),window.SqueakDBFake&&Object.keys(SqueakDBFake.bigFiles).forEach((function(y){F[y]=!0})),"undefined"!=typeof indexedDB))return this.dbTransaction("readonly","fsck cursor",(function(H){var J=H.openCursor();J.onsuccess=function(H){var J=H.target.result;J?(F[J.key]=!0,J.continue()):Squeak.fsck(y,S,F,P)},J.onerror=function(y){console.error("fsck failed")}}));var H=Squeak.dirList(S);for(var J in H){var Q=S+"/"+J;H[J][3]?"squeak:"+Q in Squeak.Settings?(Squeak.fsck(null,Q,F,P),P.dirs++):(console.log("Deleting stale directory "+Q),Squeak.dirDelete(Q),P.deleted++):F[Q]?(F[Q]=!1,P.files++,P.bytes+=H[J][4]):(console.log("Deleting stale file entry "+Q),Squeak.fileDelete(Q,!0),P.deleted++)}if(""===S){console.log("squeak fsck: "+P.dirs+" directories, "+P.files+" files, "+(P.bytes/1e6).toFixed(1)+" MBytes");var ee=[];for(var Q in F)F[Q]&&ee.push(Q);if(0<ee.length){for(var te=0;te<ee.length;te++)console.log("Deleting orphaned file "+ee[te]),delete Squeak.Settings["squeak-file:"+ee[te]],delete Squeak.Settings["squeak-file.lz:"+ee[te]],P.deleted++;"undefined"!=typeof indexedDB&&this.dbTransaction("readwrite","fsck delete",(function(y){for(var S=0;S<ee.length;S++)y.delete(ee[S])}))}y&&y(P)}},dbTransaction:function(y,S,F,P){function t(){F(Squeak.dbFake()),P&&P()}if("undefined"==typeof indexedDB)return t();function n(){var H=SqueakDB.transaction("files",y),J=H.objectStore("files");H.oncomplete=function(y){P&&P()},H.onerror=function(y){console.error(y.target.error.name+": "+S)},H.onabort=function(y){console.error(y.target.error.name+": aborting "+S),F(Squeak.dbFake()),P&&P()},F(J)}if(window.SqueakDB)return n();var H;try{H=indexedDB.open("squeak")}catch(H){}if(!H)return t();H.onsuccess=function(y){console.log("Opened files database."),window.SqueakDB=this.result,SqueakDB.onversionchange=function(y){delete window.SqueakDB,this.close()},SqueakDB.onerror=function(y){console.error("Error accessing database: "+y.target.error.name)},n()},H.onupgradeneeded=function(y){console.log("Creating files database"),y.target.result.createObjectStore("files")},H.onerror=function(y){console.error(y.target.error.name+": cannot open files database"),console.warn("Falling back to local storage"),t()},H.onblocked=function(y){console.log("Database upgrade needed, but was blocked."),console.warn("Falling back to local storage"),t()}},dbFake:function(){return"undefined"==typeof SqueakDBFake&&("undefined"==typeof indexedDB&&console.warn("IndexedDB not supported by this browser, using localStorage"),window.SqueakDBFake={bigFiles:{},bigFileThreshold:1e5,get:function(y){var S=SqueakDBFake.bigFiles[y];if(!S){var F=Squeak.Settings["squeak-file:"+y];if(!F){var P=Squeak.Settings["squeak-file.lz:"+y];P&&("object"==typeof LZString?F=LZString.decompressFromUTF16(P):console.error("LZString not loaded: cannot decompress "+y))}if(F){for(var H=new Uint8Array(F.length),J=0;J<H.length;J++)H[J]=255&F.charCodeAt(J);S=H.buffer}}var Q={result:S};return setTimeout((function(){Q.onsuccess&&Q.onsuccess({target:Q})}),0),Q},put:function(y,S){if(y.byteLength>SqueakDBFake.bigFileThreshold)SqueakDBFake.bigFiles[S]||console.log("File "+S+" ("+y.byteLength+" bytes) too large, storing in memory only"),SqueakDBFake.bigFiles[S]=y;else{var F=Squeak.bytesAsString(new Uint8Array(y));if("object"==typeof LZString){var P=LZString.compressToUTF16(F);Squeak.Settings["squeak-file.lz:"+S]=P,delete Squeak.Settings["squeak-file:"+S]}else Squeak.Settings["squeak-file:"+S]=F}var H={};return setTimeout((function(){H.onsuccess&&H.onsuccess()}),0),H},delete:function(y){delete Squeak.Settings["squeak-file:"+y],delete Squeak.Settings["squeak-file.lz:"+y],delete SqueakDBFake.bigFiles[y];var S={};return setTimeout((function(){S.onsuccess&&S.onsuccess()}),0),S},openCursor:function(){var y={};return setTimeout((function(){y.onsuccess&&y.onsuccess({target:y})}),0),y}}),SqueakDBFake},fileGet:function(y,S,F){F=F||function(y){console.log(y)};var P=this.splitFilePath(y);if(!P.basename)return F("Invalid path: "+y);if(Squeak.debugFiles){console.log("Reading "+P.fullname);var H=S;S=function(y){console.log("Read "+y.byteLength+" bytes from "+P.fullname),H(y)}}if(window.SqueakDBFake&&SqueakDBFake.bigFiles[P.fullname])return S(SqueakDBFake.bigFiles[P.fullname]);this.dbTransaction("readonly","get "+y,(function(y){var H=y.get(P.fullname);H.onerror=function(y){F(y.target.error.name)},H.onsuccess=function(y){if(void 0!==this.result)return S(this.result);Squeak.fetchTemplateFile(P.fullname,(function(y){S(y)}),(function(){if("undefined"==typeof indexedDB)return F("file not found: "+P.fullname);var y=Squeak.dbFake().get(P.fullname);y.onerror=function(y){F("file not found: "+P.fullname)},y.onsuccess=function(y){S(this.result)}}))}}))},filePut:function(y,S,F){var P=this.splitFilePath(y);if(!P.basename)return null;var H=this.dirList(P.dirname);if(!H)return null;var J=H[P.basename],Q=this.totalSeconds();if(J){if(J[3])return null}else J=[P.basename,Q,0,!1,0],H[P.basename]=J;return Squeak.debugFiles&&console.log("Writing "+P.fullname+" ("+S.byteLength+" bytes)"),J[2]=Q,J[4]=S.byteLength||S.length||0,Squeak.Settings["squeak:"+P.dirname]=JSON.stringify(H),this.dbTransaction("readwrite","put "+y,(function(y){y.put(S,P.fullname)}),(function(){F&&F()})),J},fileDelete:function(y,S){var F=this.splitFilePath(y);if(!F.basename)return!1;var P=this.dirList(F.dirname);if(!P)return!1;var H=P[F.basename];return!(!H||H[3]||(delete P[F.basename],Squeak.Settings["squeak:"+F.dirname]=JSON.stringify(P),Squeak.debugFiles&&console.log("Deleting "+F.fullname),S||this.dbTransaction("readwrite","delete "+y,(function(y){y.delete(F.fullname)})),0))},fileRename:function(y,S){var F=this.splitFilePath(y);if(!F.basename)return!1;var P=this.splitFilePath(S);if(!P.basename)return!1;var H=this.dirList(F.dirname);if(!H)return!1;var J=H[F.basename];if(!J||J[3])return!1;var Q=F.dirname==P.dirname,ee=Q?H:this.dirList(P.dirname);return!!ee&&!ee[P.basename]&&(Squeak.debugFiles&&console.log("Renaming "+F.fullname+" to "+P.fullname),delete H[F.basename],J[0]=P.basename,ee[P.basename]=J,Squeak.Settings["squeak:"+P.dirname]=JSON.stringify(ee),Q||(Squeak.Settings["squeak:"+F.dirname]=JSON.stringify(H)),this.fileGet(F.fullname,function(y){this.dbTransaction("readwrite","rename "+F.fullname+" to "+P.fullname,(function(S){S.delete(F.fullname),S.put(y,P.fullname)}))}.bind(this),function(y){console.log("File rename failed: "+y)}.bind(this)),!0)},fileExists:function(y){var S=this.splitFilePath(y);if(!S.basename)return!1;var F=this.dirList(S.dirname);if(!F)return!1;var P=F[S.basename];return!(!P||P[3])},dirCreate:function(y,S){var F=this.splitFilePath(y);if(!F.basename)return!1;S&&!Squeak.Settings["squeak:"+F.dirname]&&Squeak.dirCreate(F.dirname,!0);var P=this.dirList(F.dirname);if(!P)return!1;if(P[F.basename])return!1;Squeak.debugFiles&&console.log("Creating directory "+F.fullname);var H=this.totalSeconds(),J=[F.basename,H,H,!0,0];return P[F.basename]=J,Squeak.Settings["squeak:"+F.fullname]=JSON.stringify({}),Squeak.Settings["squeak:"+F.dirname]=JSON.stringify(P),!0},dirDelete:function(y){var S=this.splitFilePath(y);if(!S.basename)return!1;var F=this.dirList(S.dirname);if(!F)return!1;if(!F[S.basename])return!1;var P=this.dirList(S.fullname);if(P)for(var H in P)return!1;return Squeak.debugFiles&&console.log("Deleting directory "+S.fullname),delete F[S.basename],Squeak.Settings["squeak:"+S.dirname]=JSON.stringify(F),delete Squeak.Settings["squeak:"+S.fullname],!0},dirList:function(y,S){var F=this.splitFilePath(y),P=Squeak.Settings["squeak:"+F.fullname],H=S&&Squeak.Settings["squeak-template:"+F.fullname];function s(y,S){for(var F in S)if(S.hasOwnProperty(F)){var P=S[F];y[P[0]]=P}}if(P||H){var J={};return H&&s(J,JSON.parse(H).entries),P&&s(J,JSON.parse(P)),J}return"/"==F.fullname?{}:null},splitFilePath:function(y){"/"!==y[0]&&(y="/"+y);var S=(y=y.replace(/\/\//g,"/")).match(/(.*)\/(.*)/);return{fullname:y,dirname:S[1]?S[1]:"/",basename:S[2]?S[2]:null}},splitUrl:function(y,S){var F=y.match(/(.*\/)?(.*)/),P=F[1]||"",H=F[2]||"";return P.match(/^[a-z]+:\/\//)||(S&&!S.match(/\/$/)&&(S+="/"),y=(P=(S||"")+P)+H),{full:y,uptoslash:P,filename:H}},flushFile:function(y){if(y.modified){var S=y.contents.buffer;S.byteLength!==y.size&&(S=new ArrayBuffer(y.size),new Uint8Array(S).set(y.contents.subarray(0,y.size))),Squeak.filePut(y.name,S),y.modified=!1}},flushAllFiles:function(){if("undefined"!=typeof SqueakFiles)for(var y in SqueakFiles)this.flushFile(SqueakFiles[y])},closeAllFiles:function(){Squeak.flushAllFiles(),delete window.SqueakFiles},fetchTemplateDir:function(y,S){function o(y,S){var F=JSON.parse(Squeak.Settings["squeak-template:"+y]);for(var P in F.entries){var H=F.entries[P];H[3]&&Squeak.fetchTemplateDir(y+"/"+H[0],S+"/"+H[0])}}if(y=Squeak.splitFilePath(y).fullname,Squeak.Settings["squeak-template:"+y])o(y,S);else{var F=S+"/sqindex.json",P=new XMLHttpRequest;P.open("GET",F,!0),P.onload=function(F){if(200==P.status){console.log("adding template "+y),function e(y){var S=Squeak.splitFilePath(y);if("/"!==S.dirname&&e(S.dirname),!(y=JSON.parse(Squeak.Settings["squeak-template:"+S.dirname]||'{"entries": {}}')).entries[S.basename]){var F=Squeak.totalSeconds();y.entries[S.basename]=[S.basename,F,F,!0,0],Squeak.Settings["squeak-template:"+S.dirname]=JSON.stringify(y)}}(y);var H=JSON.parse(P.response),J={url:S,entries:{}};for(var Q in H){var ee=H[Q];J.entries[ee[0]]=ee}Squeak.Settings["squeak-template:"+y]=JSON.stringify(J),o(y,S)}else P.onerror(P.statusText)},P.onerror=function(y){console.log("cannot load template index "+F)},P.send()}},fetchTemplateFile:function(y,S,F){y=Squeak.splitFilePath(y);var P=Squeak.Settings["squeak-template:"+y.dirname];if(!P)return F();var H=JSON.parse(P).url;if(!H)return F();H+="/"+y.basename;var J=new XMLHttpRequest;J.open("get",H,!0),J.responseType="arraybuffer",J.timeout=3e4,J.onreadystatechange=function(){if(this.readyState==this.DONE)if(200==this.status){var P=this.response;console.log("Got "+P.byteLength+" bytes from "+H),Squeak.dirCreate(y.dirname,!0),Squeak.filePut(y.fullname,P),S(P)}else console.error("Download failed ("+this.status+") "+H),F()},console.log("Fetching "+H),J.send()}}),Object.extend(Squeak,"events",{Mouse_Blue:1,Mouse_Yellow:2,Mouse_Red:4,Keyboard_Shift:8,Keyboard_Ctrl:16,Keyboard_Alt:32,Keyboard_Cmd:64,Mouse_All:7,Keyboard_All:120,EventTypeNone:0,EventTypeMouse:1,EventTypeKeyboard:2,EventTypeDragDropFiles:3,EventKeyChar:0,EventKeyDown:1,EventKeyUp:2,EventDragEnter:1,EventDragMove:2,EventDragLeave:3,EventDragDrop:4}),Object.extend(Squeak.Primitives.prototype,"input",{primitiveClipboardText:function(y){if(0===y){if("string"!=typeof this.display.clipboardString)return!1;this.vm.popNandPush(1,this.makeStString(this.display.clipboardString))}else if(1===y){var S=this.vm.top();S.bytes&&(this.display.clipboardString=S.bytesAsString(),this.display.clipboardStringChanged=!0),this.vm.pop()}return!0},primitiveKeyboardNext:function(y){return this.popNandPushIfOK(y+1,this.ensureSmallInt(this.display.keys.shift()))},primitiveKeyboardPeek:function(y){var S=this.display.keys.length;return this.popNandPushIfOK(y+1,S?this.ensureSmallInt(this.display.keys[0]||0):this.vm.nilObj)},primitiveMouseButtons:function(y){return this.popNandPushIfOK(y+1,this.ensureSmallInt(this.display.buttons)),this.vm.breakOut(),20<this.display.idle++&&this.vm.goIdle(),!0},primitiveMousePoint:function(y){var S=this.ensureSmallInt(this.display.mouseX),F=this.ensureSmallInt(this.display.mouseY);return this.popNandPushIfOK(y+1,this.makePointWithXandY(S,F))},primitiveInputSemaphore:function(y){var S=this.stackInteger(0);return!!this.success&&(this.inputEventSemaIndex=S,this.display.signalInputEvent=function(){this.signalSemaphoreWithIndex(this.inputEventSemaIndex)}.bind(this),this.display.signalInputEvent(),this.popNIfOK(y))},primitiveInputWord:function(y){return this.popNandPushIfOK(1,0)},primitiveGetNextEvent:function(y){this.display.idle++;var S=this.stackNonInteger(0);return!!this.display.getNextEvent&&(this.display.getNextEvent(S.pointers,this.vm.startupTime),this.popNIfOK(y))}}),Object.extend(Squeak.Primitives.prototype,"initialization",{initPlugins:function(){Object.extend(this.builtinModules,{JavaScriptPlugin:this.findPluginFunctions("js_"),FilePlugin:this.findPluginFunctions("","primitive(Disable)?(File|Directory)"),DropPlugin:this.findPluginFunctions("","primitiveDropRequest"),SoundPlugin:this.findPluginFunctions("snd_"),JPEGReadWriter2Plugin:this.findPluginFunctions("jpeg2_"),SqueakFFIPrims:this.findPluginFunctions("ffi_","",!0),SecurityPlugin:{primitiveDisableImageWrite:this.fakePrimitive.bind(this,"SecurityPlugin.primitiveDisableImageWrite",0)},LocalePlugin:{primitiveTimezoneOffset:this.fakePrimitive.bind(this,"LocalePlugin.primitiveTimezoneOffset",0)}}),Object.extend(this.patchModules,{ScratchPlugin:this.findPluginFunctions("scratch_")})},findPluginFunctions:function(y,S,F){S=S||"(initialise|shutdown|prim)";var P={},H=new RegExp("^"+y+S,"i");for(var J in this)if(H.test(J)&&"function"==typeof this[J]){var Q=J;y&&(Q=J[y.length].toLowerCase()+J.slice(y.length+1)),P[Q]=F?J:this[J].bind(this)}return P}}),Object.extend(Squeak,"known classes",{ExtLibFunc_handle:0,ExtLibFunc_flags:1,ExtLibFunc_argTypes:2,ExtLibFunc_name:3,ExtLibFunc_module:4,ExtLibFunc_errorCodeName:5}),Object.extend(Squeak.Primitives.prototype,"FFI",{ffi_primitiveCalloutWithArgs:function(y){var S=this.stackNonInteger(1),F=this.stackNonInteger(0);if(!this.isKindOf(S,Squeak.splOb_ClassExternalFunction))return!1;var P=S.pointers[Squeak.ExtLibFunc_module].bytesAsString(),H=S.pointers[Squeak.ExtLibFunc_name].bytesAsString(),J=F.pointers.join(", ");return this.vm.warnOnce("FFI: ignoring "+P+": "+H+"("+J+")"),!1}}),Object.extend(Squeak.Primitives.prototype,"JavaScriptPlugin",{js_primitiveDoUnderstand:function(y){var S=this.stackNonInteger(1),F=this.js_objectOrGlobal(S),P=this.stackNonInteger(0).pointers,H=P[0].bytesAsString(),J=P[1].pointers||[],Q=!("jsObject"in S),ee=null;try{var te=H.match(/([^:]*)/)[0];if(Q||"new"!==te){if(!(te in F))return this.js_setError("Property not found: "+te);var re=F[te];if("function"==typeof re&&(!Q||0<J.length))ee=re.apply(F,this.js_fromStArray(J));else if(0==J.length)ee=re;else{if(1!=J.length)return this.js_setError("Property "+te+" is not a function");F[te]=this.js_fromStObject(J[0])}}else if(0===J.length)ee=new F;else{var ie=[null].concat(this.js_fromStArray(J));ee=new(Function.prototype.bind.apply(F,ie))}}catch(y){return this.js_setError(y.message)}var ae=this.makeStObject(ee,S.sqClass);return this.popNandPushIfOK(y+1,ae)},js_primitiveAsString:function(y){var S=this.js_objectOrGlobal(this.stackNonInteger(0));return this.popNandPushIfOK(y+1,this.makeStString(String(S)))},js_primitiveTypeof:function(y){var S=this.js_objectOrGlobal(this.stackNonInteger(0));return this.popNandPushIfOK(y+1,this.makeStString(typeof S))},js_primitiveAt:function(y){var S,F=this.stackNonInteger(1),P=this.vm.stackValue(0);try{var H=this.js_objectOrGlobal(F)[this.js_fromStObject(P)];S=this.makeStObject(H,F.sqClass)}catch(y){return this.js_setError(y.message)}return this.popNandPushIfOK(y+1,S)},js_primitiveAtPut:function(y){var S=this.stackNonInteger(2),F=this.vm.stackValue(1),P=this.vm.stackValue(0);try{var H=this.js_objectOrGlobal(S),J=this.js_fromStObject(F),Q=this.js_fromStObject(P);H[J]=Q}catch(y){return this.js_setError(y.message)}return this.popNandPushIfOK(y+1,P)},js_primitiveSqueakAsJSObject:function(y){var S=this.stackNonInteger(1),F=this.vm.stackValue(0);return this.success&&(S.jsObject=F),this.popNIfOK(y)},js_primitiveInitCallbacks:function(y){return this.js_callbackSema=this.stackInteger(0),this.js_activeCallback=null,this.popNIfOK(y)},js_primitiveGetActiveCallbackBlock:function(y){var S=this.js_activeCallback;return S?this.popNandPushIfOK(y+1,S.block):this.js_setError("No active callback")},js_primitiveGetActiveCallbackArgs:function(y){var S=this.stackNonInteger(y),F=this.js_activeCallback;if(!F)return this.js_setError("No active callback");try{var P=this.makeStArray(F.args,S);return this.popNandPushIfOK(y+1,P)}catch(y){return this.js_setError(y.message)}},js_primitiveReturnFromCallback:function(y){return 1===y&&(this.js_activeCallback?(this.js_activeCallback.result=this.vm.pop(),this.vm.breakOut(),!0):this.js_setError("No active callback"))},js_primitiveGetError:function(y){var S=this.makeStObject(this.js_error);return this.js_error=null,this.popNandPushIfOK(y+1,S)},js_setError:function(y){return this.js_error=String(y),!1},js_fromStObject:function(y){if("number"==typeof y)return y;if(y.jsObject)return y.jsObject;if(y.isFloat)return y.float;if(y.isNil)return null;if(y.isTrue)return!0;if(y.isFalse)return!1;if(y.bytes||y.sqClass===this.vm.specialObjects[Squeak.splOb_ClassString])return y.bytesAsString();if(y.sqClass===this.vm.specialObjects[Squeak.splOb_ClassArray])return this.js_fromStArray(y.pointers||[],!0);if(y.sqClass===this.vm.specialObjects[Squeak.splOb_ClassBlockContext]||y.sqClass===this.vm.specialObjects[Squeak.splOb_ClassBlockClosure])return this.js_fromStBlock(y);throw Error("asJSArgument needed for "+y)},js_fromStArray:function(y,S){if(0<y.length&&S&&this.isAssociation(y[0]))return this.js_fromStDict(y);for(var F=[],P=0;P<y.length;P++)F.push(this.js_fromStObject(y[P]));return F},js_fromStDict:function(y){for(var S={},F=0;F<y.length;F++){var P=y[F].pointers;if(!P||2!==P.length)throw Error(P+" is not an Association");var H=this.js_fromStObject(P[0]),J=this.js_fromStObject(P[1]);S[H]=J}return S},js_fromStBlock:function(y){if(!this.js_callbackSema)throw Error("CallbackSemaphore not set");this.vm.reclaimableContextCount=0;var S=y.pointers[Squeak.BlockContext_argumentCount];"number"!=typeof S&&(S=y.pointers[Squeak.Closure_numArgs]);var F=this;return function(){for(var P=[],H=0;H<S;H++)P.push(arguments[H]);return new Promise((function(S,H){self.setTimeout((function(){F.js_executeCallbackAsync(y,P,S,H)}),0)}))}},js_executeCallbackAsync:function(y,S,F,P){var H=this;this.js_activeCallback||this.vm.frozen?self.setTimeout((function(){H.js_executeCallbackAsync(y,S,F,P)}),0):this.js_executeCallback(y,S,F,P)},js_executeCallback:function(y,S,F,P){if(this.js_activeCallback)return console.error("Callback: already active");this.js_activeCallback={block:y,args:S,result:null},this.signalSemaphoreWithIndex(this.js_callbackSema),this.vm.forceInterruptCheck();for(var H=Date.now()+500;Date.now()<H&&!this.js_activeCallback.result;)this.vm.interpret();var J=this.js_activeCallback.result;if(this.js_activeCallback=null,J)try{F(this.js_fromStObject(J))}catch(y){F(J.toString())}else P(Error("SqueakJS timeout"))},js_objectOrGlobal:function(y){return"jsObject"in y?y.jsObject:self}}),Object.extend(Squeak.Primitives.prototype,"Obsolete",{primitiveFloatArrayAt:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveAt",y)},primitiveFloatArrayMulFloatArray:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveMulFloatArray",y)},primitiveFloatArrayAddScalar:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveAddScalar",y)},primitiveFloatArrayDivFloatArray:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveDivFloatArray",y)},primitiveFloatArrayDivScalar:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveDivScalar",y)},primitiveFloatArrayHash:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveHash",y)},primitiveFloatArrayAtPut:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveAtPut",y)},primitiveFloatArrayMulScalar:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveMulScalar",y)},primitiveFloatArrayAddFloatArray:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveAddFloatArray",y)},primitiveFloatArraySubScalar:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveSubScalar",y)},primitiveFloatArraySubFloatArray:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveSubFloatArray",y)},primitiveFloatArrayEqual:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveEqual",y)},primitiveFloatArrayDotProduct:function(y){return this.namedPrimitive("FloatArrayPlugin","primitiveDotProduct",y)},m23PrimitiveInvertRectInto:function(y){return this.namedPrimitive("Matrix2x3Plugin","primitiveInvertRectInto",y)},m23PrimitiveTransformPoint:function(y){return this.namedPrimitive("Matrix2x3Plugin","primitiveTransformPoint",y)},m23PrimitiveIsPureTranslation:function(y){return this.namedPrimitive("Matrix2x3Plugin","primitiveIsPureTranslation",y)},m23PrimitiveComposeMatrix:function(y){return this.namedPrimitive("Matrix2x3Plugin","primitiveComposeMatrix",y)},m23PrimitiveTransformRectInto:function(y){return this.namedPrimitive("Matrix2x3Plugin","primitiveTransformRectInto",y)},m23PrimitiveIsIdentity:function(y){return this.namedPrimitive("Matrix2x3Plugin","primitiveIsIdentity",y)},m23PrimitiveInvertPoint:function(y){return this.namedPrimitive("Matrix2x3Plugin","primitiveInvertPoint",y)},primitiveDeflateBlock:function(y){return this.namedPrimitive("ZipPlugin","primitiveDeflateBlock",y)},primitiveDeflateUpdateHashTable:function(y){return this.namedPrimitive("ZipPlugin","primitiveDeflateUpdateHashTable",y)},primitiveUpdateGZipCrc32:function(y){return this.namedPrimitive("ZipPlugin","primitiveUpdateGZipCrc32",y)},primitiveInflateDecompressBlock:function(y){return this.namedPrimitive("ZipPlugin","primitiveInflateDecompressBlock",y)},primitiveZipSendBlock:function(y){return this.namedPrimitive("ZipPlugin","primitiveZipSendBlock",y)},primitiveFFTTransformData:function(y){return this.namedPrimitive("FFTPlugin","primitiveFFTTransformData",y)},primitiveFFTScaleData:function(y){return this.namedPrimitive("FFTPlugin","primitiveFFTScaleData",y)},primitiveFFTPermuteData:function(y){return this.namedPrimitive("FFTPlugin","primitiveFFTPermuteData",y)},gePrimitiveMergeFillFrom:function(y){return this.namedPrimitive("B2DPlugin","primitiveMergeFillFrom",y)},gePrimitiveCopyBuffer:function(y){return this.namedPrimitive("B2DPlugin","primitiveCopyBuffer",y)},gePrimitiveAddRect:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddRect",y)},gePrimitiveAddGradientFill:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddGradientFill",y)},gePrimitiveSetClipRect:function(y){return this.namedPrimitive("B2DPlugin","primitiveSetClipRect",y)},gePrimitiveSetBitBltPlugin:function(y){return this.namedPrimitive("B2DPlugin","primitiveSetBitBltPlugin",y)},gePrimitiveRegisterExternalEdge:function(y){return this.namedPrimitive("B2DPlugin","primitiveRegisterExternalEdge",y)},gePrimitiveGetClipRect:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetClipRect",y)},gePrimitiveAddBezier:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddBezier",y)},gePrimitiveInitializeProcessing:function(y){return this.namedPrimitive("B2DPlugin","primitiveInitializeProcessing",y)},gePrimitiveRenderImage:function(y){return this.namedPrimitive("B2DPlugin","primitiveRenderImage",y)},gePrimitiveGetOffset:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetOffset",y)},gePrimitiveSetDepth:function(y){return this.namedPrimitive("B2DPlugin","primitiveSetDepth",y)},gePrimitiveAddBezierShape:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddBezierShape",y)},gePrimitiveSetEdgeTransform:function(y){return this.namedPrimitive("B2DPlugin","primitiveSetEdgeTransform",y)},gePrimitiveGetTimes:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetTimes",y)},gePrimitiveNextActiveEdgeEntry:function(y){return this.namedPrimitive("B2DPlugin","primitiveNextActiveEdgeEntry",y)},gePrimitiveAddBitmapFill:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddBitmapFill",y)},gePrimitiveGetDepth:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetDepth",y)},gePrimitiveAbortProcessing:function(y){return this.namedPrimitive("B2DPlugin","primitiveAbortProcessing",y)},gePrimitiveNextGlobalEdgeEntry:function(y){return this.namedPrimitive("B2DPlugin","primitiveNextGlobalEdgeEntry",y)},gePrimitiveGetFailureReason:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetFailureReason",y)},gePrimitiveDisplaySpanBuffer:function(y){return this.namedPrimitive("B2DPlugin","primitiveDisplaySpanBuffer",y)},gePrimitiveGetCounts:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetCounts",y)},gePrimitiveChangedActiveEdgeEntry:function(y){return this.namedPrimitive("B2DPlugin","primitiveChangedActiveEdgeEntry",y)},gePrimitiveRenderScanline:function(y){return this.namedPrimitive("B2DPlugin","primitiveRenderScanline",y)},gePrimitiveGetBezierStats:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetBezierStats",y)},gePrimitiveFinishedProcessing:function(y){return this.namedPrimitive("B2DPlugin","primitiveFinishedProcessing",y)},gePrimitiveNeedsFlush:function(y){return this.namedPrimitive("B2DPlugin","primitiveNeedsFlush",y)},gePrimitiveAddLine:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddLine",y)},gePrimitiveSetOffset:function(y){return this.namedPrimitive("B2DPlugin","primitiveSetOffset",y)},gePrimitiveNextFillEntry:function(y){return this.namedPrimitive("B2DPlugin","primitiveNextFillEntry",y)},gePrimitiveInitializeBuffer:function(y){return this.namedPrimitive("B2DPlugin","primitiveInitializeBuffer",y)},gePrimitiveDoProfileStats:function(y){return this.namedPrimitive("B2DPlugin","primitiveDoProfileStats",y)},gePrimitiveAddActiveEdgeEntry:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddActiveEdgeEntry",y)},gePrimitiveSetAALevel:function(y){return this.namedPrimitive("B2DPlugin","primitiveSetAALevel",y)},gePrimitiveNeedsFlushPut:function(y){return this.namedPrimitive("B2DPlugin","primitiveNeedsFlushPut",y)},gePrimitiveAddCompressedShape:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddCompressedShape",y)},gePrimitiveSetColorTransform:function(y){return this.namedPrimitive("B2DPlugin","primitiveSetColorTransform",y)},gePrimitiveAddOval:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddOval",y)},gePrimitiveRegisterExternalFill:function(y){return this.namedPrimitive("B2DPlugin","primitiveRegisterExternalFill",y)},gePrimitiveAddPolygon:function(y){return this.namedPrimitive("B2DPlugin","primitiveAddPolygon",y)},gePrimitiveGetAALevel:function(y){return this.namedPrimitive("B2DPlugin","primitiveGetAALevel",y)}}),Object.extend(Squeak.Primitives.prototype,"DropPlugin",{primitiveDropRequestFileHandle:function(y){var S=this.stackInteger(0),F=this.display.droppedFiles||[];if(S<1||F.length<S)return!1;var P=F[S-1],H=this.fileOpen(P,!1);if(!H)return!1;var J=this.makeFileHandle(P,H,!1);return this.popNandPushIfOK(y+1,J),!0},primitiveDropRequestFileName:function(y){var S=this.stackInteger(0),F=this.display.droppedFiles||[];if(S<1||F.length<S)return!1;var P=this.makeStString(this.filenameToSqueak(F[S-1]));return this.popNandPushIfOK(y+1,P)}}),Object.extend(Squeak.Primitives.prototype,"FilePlugin",{primitiveDirectoryCreate:function(y){var S=this.stackNonInteger(0);if(!this.success)return!1;var F=this.filenameFromSqueak(S.bytesAsString());if(this.success=Squeak.dirCreate(F),!this.success){var P=Squeak.splitFilePath(F);console.log("Directory not created: "+P.fullname)}return this.popNIfOK(y)},primitiveDirectoryDelete:function(y){var S=this.stackNonInteger(0);if(!this.success)return!1;var F=this.filenameFromSqueak(S.bytesAsString());return this.success=Squeak.dirDelete(F),this.popNIfOK(y)},primitiveDirectoryDelimitor:function(y){var S=this.emulateMac?":":"/";return this.popNandPushIfOK(1,this.charFromInt(S.charCodeAt(0)))},primitiveDirectoryEntry:function(y){var S=this.stackNonInteger(1),F=this.stackNonInteger(0);if(!this.success)return!1;var P=F.bytesAsString(),H=this.filenameFromSqueak(P),J=S.bytesAsString(),Q=this.filenameFromSqueak(J),ee=Squeak.dirList(Q,!0);if(!ee){var te=Squeak.splitFilePath(Q);return console.log("Directory not found: "+te.fullname),!1}var re="."===H?[".",0,0,!0,0]:ee[H];return this.popNandPushIfOK(y+1,this.makeStObject(re)),!0},primitiveDirectoryLookup:function(y){var S=this.stackInteger(0),F=this.stackNonInteger(1);if(!this.success)return!1;var P=F.bytesAsString(),H=this.filenameFromSqueak(P),J=Squeak.dirList(H,!0);if(!J){var Q=Squeak.splitFilePath(H);return console.log("Directory not found: "+Q.fullname),!1}var ee=J[Object.keys(J).sort()[S-1]];return"/"===P&&(1===S?((ee=ee||[0,0,0,0,0])[0]="SqueakJS",ee[3]=!0):ee=null),this.popNandPushIfOK(y+1,this.makeStObject(ee)),!0},primitiveDirectorySetMacTypeAndCreator:function(y){return this.popNIfOK(y)},primitiveFileAtEnd:function(y){var S=this.stackNonInteger(0);return!(!this.success||!S.file||(this.popNandPushIfOK(y+1,this.makeStObject(S.filePos>=S.file.size)),0))},primitiveFileClose:function(y){var S=this.stackNonInteger(0);return!(!this.success||!S.file)&&("string"==typeof S.file?this.fileConsoleFlush(S.file):(this.fileClose(S.file),this.vm.breakOut(),S.file=null),this.popNIfOK(y))},primitiveFileDelete:function(y){var S=this.stackNonInteger(0);if(!this.success)return!1;var F=this.filenameFromSqueak(S.bytesAsString());return this.success=Squeak.fileDelete(F),this.popNIfOK(y)},primitiveFileFlush:function(y){var S=this.stackNonInteger(0);return!(!this.success||!S.file)&&("string"==typeof S.file?this.fileConsoleFlush(S.file):(Squeak.flushFile(S.file),this.vm.breakOut()),this.popNIfOK(y))},primitiveFileGetPosition:function(y){var S=this.stackNonInteger(0);return!(!this.success||!S.file||(this.popNandPushIfOK(y+1,this.makeLargeIfNeeded(S.filePos)),0))},makeFileHandle:function(y,S,F){var P=this.makeStString("squeakjs:"+y);return P.file=S,P.fileWrite=F,P.filePos=0,P},primitiveFileOpen:function(y){var S=this.stackBoolean(0),F=this.stackNonInteger(1);if(!this.success)return!1;var P=this.filenameFromSqueak(F.bytesAsString()),H=this.fileOpen(P,S);if(!H)return!1;var J=this.makeFileHandle(H.name,H,S);return this.popNandPushIfOK(y+1,J),!0},primitiveFileRead:function(y){var S=this.stackInteger(0),F=this.stackInteger(1)-1,P=this.stackNonInteger(2),H=this.stackNonInteger(3);if(!this.success||!P.isWordsOrBytes()||!H.file)return!1;if(!S)return this.popNandPushIfOK(y+1,0);var J=P.isWords()?P.wordsSize():P.bytesSize();return!(F<0||J<F+S)&&("string"==typeof H.file?(this.popNandPushIfOK(y+1,0),!0):this.fileContentsDo(H.file,function(J){if(!J.contents)return this.popNandPushIfOK(y+1,0);var Q,ee;if(P.isWords()){Q=new Uint32Array(J.contents.buffer),ee=P.words,S=Math.min(S,J.size-H.filePos>>>2);for(var te=0;te<S;te++)ee[F+te]=Q[H.filePos+te];H.filePos+=S<<2}else for(Q=J.contents,ee=P.bytes,S=Math.min(S,J.size-H.filePos),te=0;te<S;te++)ee[F+te]=Q[H.filePos++];this.popNandPushIfOK(y+1,Math.max(0,S))}.bind(this)))},primitiveFileRename:function(y){var S=this.stackNonInteger(1),F=this.stackNonInteger(0);if(!this.success)return!1;var P=this.filenameFromSqueak(S.bytesAsString()),H=this.filenameFromSqueak(F.bytesAsString());return this.success=Squeak.fileRename(P,H),this.vm.breakOut(),this.popNIfOK(y)},primitiveFileSetPosition:function(y){var S=this.stackPos32BitInt(0),F=this.stackNonInteger(1);return!(!this.success||!F.file)&&(F.filePos=S,this.popNIfOK(y))},primitiveFileSize:function(y){var S=this.stackNonInteger(0);return!(!this.success||!S.file||(this.popNandPushIfOK(y+1,this.makeLargeIfNeeded(S.file.size)),0))},primitiveFileStdioHandles:function(y){var S=[null,this.makeFileHandle("console.log","log",!0),this.makeFileHandle("console.error","error",!0)];return this.popNandPushIfOK(y+1,this.makeStArray(S)),!0},primitiveFileTruncate:function(y){var S=this.stackPos32BitInt(0),F=this.stackNonInteger(1);return!!(this.success&&F.file&&F.fileWrite)&&(F.file.size>S&&(F.file.size=S,F.file.modified=!0,F.filePos>F.file.size&&(F.filePos=F.file.size)),this.popNIfOK(y))},primitiveDisableFileAccess:function(y){return this.fakePrimitive("FilePlugin.primitiveDisableFileAccess",0,y)},primitiveFileWrite:function(y){var S=this.stackInteger(0),F=this.stackInteger(1)-1,P=this.stackNonInteger(2),H=this.stackNonInteger(3);if(!this.success||!H.file||!H.fileWrite)return!1;if(!S)return this.popNandPushIfOK(y+1,0);var J=P.bytes;return J||(J=P.wordsAsUint8Array(),F*=4,S*=4),!!J&&!(F<0||F+S>J.length)&&("string"==typeof H.file?(this.fileConsoleWrite(H.file,J,F,S),this.popNandPushIfOK(y+1,S),!0):this.fileContentsDo(H.file,function(P){var Q=J,ee=P.contents||[];if(H.filePos+S>ee.length){var te=0===ee.length?H.filePos+S:Math.max(H.filePos+S,ee.length+1e4);P.contents=new Uint8Array(te),P.contents.set(ee),ee=P.contents}for(var re=0;re<S;re++)ee[H.filePos++]=Q[F+re];H.filePos>P.size&&(P.size=H.filePos),P.modified=!0,this.popNandPushIfOK(y+1,S)}.bind(this)))},fileOpen:function(y,S){"undefined"==typeof SqueakFiles&&(window.SqueakFiles={});var F=Squeak.splitFilePath(y);if(!F.basename)return null;var P=Squeak.dirList(F.dirname,!0);if(!P)return null;var H=P[F.basename],J=null;if(H){if(Q=SqueakFiles[F.fullname])return++Q.refCount,Q}else{if(!S)return console.log("File not found: "+F.fullname),null;if(J=new Uint8Array,!(H=Squeak.filePut(F.fullname,J.buffer)))return console.log("Cannot create file: "+F.fullname),null}var Q={name:F.fullname,size:H[4],contents:J,modified:!1,refCount:1};return SqueakFiles[Q.name]=Q},fileClose:function(y){Squeak.flushFile(y),0==--y.refCount&&delete SqueakFiles[y.name]},fileContentsDo:function(y,S){if(y.contents)S(y);else{if(!1===y.contents)return!1;this.vm.freeze(function(F){Squeak.fileGet(y.name,function(P){if(null==P)return error(y.name);y.contents=this.asUint8Array(P),F(),S(y)}.bind(this),function(P){console.log("File get failed: "+P),y.contents=!1,F(),S(y)}.bind(this))}.bind(this))}return!0},fileConsoleBuffer:{log:"",error:""},fileConsoleWrite:function(y,S,F,P){var H=S.subarray(F,F+P),J=this.fileConsoleBuffer[y]+Squeak.bytesAsString(H),Q=J.match("([^]*)\n(.*)");Q&&(console[y](Q[1]),J=Q[2]),this.fileConsoleBuffer[y]=J},fileConsoleFlush:function(y){var S=this.fileConsoleBuffer[y];S&&(console[y](S),this.fileConsoleBuffer[y]="")}}),Object.extend(Squeak.Primitives.prototype,"JPEGReadWriter2Plugin",{jpeg2_primJPEGPluginIsPresent:function(y){return this.popNandPushIfOK(y+1,this.vm.trueObj)},jpeg2_primImageHeight:function(y){var S=this.stackNonInteger(0).wordsOrBytes();if(!S)return!1;var F=S[1];return this.popNandPushIfOK(y+1,F)},jpeg2_primImageWidth:function(y){var S=this.stackNonInteger(0).wordsOrBytes();if(!S)return!1;var F=S[0];return this.popNandPushIfOK(y+1,F)},jpeg2_primJPEGCompressStructSize:function(y){return this.popNandPushIfOK(y+1,0)},jpeg2_primJPEGDecompressStructSize:function(y){return this.popNandPushIfOK(y+1,8)},jpeg2_primJPEGErrorMgr2StructSize:function(y){return this.popNandPushIfOK(y+1,0)},jpeg2_primJPEGReadHeaderfromByteArrayerrorMgr:function(y){var S=this.stackNonInteger(2).wordsOrBytes(),F=this.stackNonInteger(1).bytes;if(!S||!F)return!1;var P=this.vm.freeze();return this.jpeg2_readImageFromBytes(F,function(y){this.jpeg2state={src:F,img:y},S[0]=y.width,S[1]=y.height,P()}.bind(this),function(){S[0]=0,S[1]=0,P()}.bind(this)),this.popNIfOK(y)},jpeg2_primJPEGReadImagefromByteArrayonFormdoDitheringerrorMgr:function(y){var S=this.stackNonInteger(3).bytes,F=this.stackNonInteger(2).pointers,P=this.stackBoolean(1);if(!this.success||!S||!F)return!1;var H=this.jpeg2state;if(!H||H.src!==S)return console.error("jpeg read did not match header info"),!1;var J=F[Squeak.Form_depth],Q=this.jpeg2_getPixelsFromImage(H.img),ee=F[Squeak.Form_bits].words;if(32===J)this.jpeg2_copyPixelsToForm32(Q,ee);else{if(16!==J)return!1;P?this.jpeg2_ditherPixelsToForm16(Q,ee):this.jpeg2_copyPixelsToForm16(Q,ee)}return this.popNIfOK(y)},jpeg2_primJPEGWriteImageonByteArrayformqualityprogressiveJPEGerrorMgr:function(y){return this.vm.warnOnce("JPEGReadWritePlugin2: writing not implemented yet"),!1},jpeg2_readImageFromBytes:function(y,S,F){var P=new Blob([y],{type:"image/jpeg"}),H=new Image;H.onload=function(){S(H)},H.onerror=function(){console.warn("could not render JPEG"),F()},H.src=(window.URL||window.webkitURL).createObjectURL(P)},jpeg2_getPixelsFromImage:function(y){var S=document.createElement("canvas"),F=S.getContext("2d");return S.width=y.width,S.height=y.height,F.drawImage(y,0,0),F.getImageData(0,0,y.width,y.height)},jpeg2_copyPixelsToForm32:function(y,S){for(var F=y.data,P=0;P<S.length;P++){var H=F[4*P+0],J=F[4*P+1],Q=F[4*P+2];S[P]=4278190080|H<<16|J<<8|Q}},jpeg2_copyPixelsToForm16:function(y,S){for(var F=y.width,P=y.height,H=y.data,J=0;J<P;J++)for(var Q=0;Q<F;Q+=2){var ee=J*P+Q,te=H[4*ee+0]>>3<<10|H[4*ee+1]>>3<<5|H[4*ee+2]>>3;0===te&&(te=1),0==(65535&(te=te<<16|H[4*ee+4]>>3<<10|H[4*ee+5]>>3<<5|H[4*ee+6]>>3))&&(te|=1),S[ee>>1]=te}},jpeg2_ditherPixelsToForm16:function(y,S){for(var F=y.width>>1,P=y.height,H=y.data,J=[2,0,14,12,1,3,13,15],Q=[10,8,6,4,9,11,5,7],ee=0;ee<P;ee++)for(var te=0;te<F;te++){var re,ie,ae=ee*P+2*te<<2,se=H[ae],ne=H[1+ae],oe=H[2+ae],ue=H[4+ae],le=H[5+ae],ce=H[6+ae],fe=(3&ee)<<1|1&te,he=J[fe],pe=Q[fe];ie=(re=496*se>>8)>>4,se=he<(15&re)?ie+1:ie,ie=(re=496*ne>>8)>>4,ne=he<(15&re)?ie+1:ie,ie=(re=496*oe>>8)>>4,oe=he<(15&re)?ie+1:ie,ie=(re=496*ue>>8)>>4,ue=pe<(15&re)?ie+1:ie,ie=(re=496*le>>8)>>4,le=pe<(15&re)?ie+1:ie,ie=(re=496*ce>>8)>>4;var de=se<<10|ne<<5|oe;0===de&&(de=1),0==(65535&(de=de<<16|ue<<10|le<<5|(ce=pe<(15&re)?ie+1:ie)))&&(de|=1),S[ae>>3]=de}}}),Object.extend(Squeak.Primitives.prototype,"ScratchPluginAdditions",{scratch_primitiveOpenURL:function(y){var S=this.stackNonInteger(0).bytesAsString();if(""==S)return!1;if(/^\/SqueakJS\//.test(S)){S=S.slice(10);var F=Squeak.splitFilePath(S),P=Squeak.Settings["squeak-template:"+F.dirname];P&&(S=JSON.parse(P).url+"/"+F.basename)}return window.open(S,"_blank"),this.popNIfOK(y)},scratch_primitiveGetFolderPath:function(y){var S,F=this.stackInteger(0);if(!this.success)return!1;if(1===F)S="/";return!!S&&(this.vm.popNandPush(y+1,this.makeStString(this.filenameToSqueak(S))),!0)}}),Object.extend(Squeak.Primitives.prototype,"SoundPlugin",{snd_primitiveSoundStart:function(y){return this.snd_primitiveSoundStartWithSemaphore(y)},snd_primitiveSoundStartWithSemaphore:function(y){var S=this.stackInteger(y-1),F=this.stackInteger(y-2),P=this.stackBoolean(y-3),H=3<y?this.stackInteger(y-4):0;return!!this.success&&(this.audioContext=Squeak.startAudioOut(),this.audioContext?(this.audioSema=H,this.audioNextTimeSlot=0,this.audioBuffersReady=[],this.audioBuffersUnused=[this.audioContext.createBuffer(P?2:1,S,F),this.audioContext.createBuffer(P?2:1,S,F)],console.log("sound: started"),this.popNIfOK(y)):(this.vm.warnOnce("could not initialize audio"),!1))},snd_playNextBuffer:function(){if(this.audioContext&&0!==this.audioBuffersReady.length){var y=this.audioContext.createBufferSource();y.buffer=this.audioBuffersReady.shift(),y.connect(this.audioContext.destination),this.audioNextTimeSlot<this.audioContext.currentTime&&(0<this.audioNextTimeSlot&&console.log("sound "+this.audioContext.currentTime.toFixed(3)+": buffer underrun by "+(this.audioContext.currentTime-this.audioNextTimeSlot).toFixed(3)+" s"),this.audioNextTimeSlot=this.audioContext.currentTime),y.start(this.audioNextTimeSlot),this.audioNextTimeSlot+=y.buffer.duration,window.setTimeout(function(){this.audioContext&&this.vm.forceInterruptCheck&&(this.audioBuffersUnused.push(y.buffer),this.audioSema&&this.signalSemaphoreWithIndex(this.audioSema),this.vm.forceInterruptCheck())}.bind(this),1e3*(this.audioNextTimeSlot-this.audioContext.currentTime)),this.snd_playNextBuffer()}},snd_primitiveSoundAvailableSpace:function(y){if(!this.audioContext)return console.log("sound: no audio context"),!1;var S=0;if(0<this.audioBuffersUnused.length){var F=this.audioBuffersUnused[0];S=F.length*F.numberOfChannels*2}return this.popNandPushIfOK(y+1,S)},snd_primitiveSoundPlaySamples:function(y){if(!this.audioContext||0===this.audioBuffersUnused.length)return console.log("sound: play but no free buffers"),!1;var S=this.stackInteger(2),F=this.stackNonInteger(1).wordsAsInt16Array(),P=this.stackInteger(0)-1;if(!this.success||!F)return!1;for(var H=this.audioBuffersUnused.shift(),J=H.numberOfChannels,Q=0;Q<J;Q++)for(var ee=H.getChannelData(Q),te=P+Q,re=0;re<S;re++)ee[re]=F[te]/32768,te+=J;return this.audioBuffersReady.push(H),this.snd_playNextBuffer(),this.popNIfOK(y)},snd_primitiveSoundPlaySilence:function(y){if(!this.audioContext||0===this.audioBuffersUnused.length)return console.log("sound: play but no free buffers"),!1;for(var S=this.audioBuffersUnused.shift(),F=S.numberOfChannels,P=S.length,H=0;H<F;H++)for(var J=S.getChannelData(H),Q=0;Q<P;Q++)J[Q]=0;return this.audioBuffersReady.push(S),this.snd_playNextBuffer(),this.popNandPushIfOK(y+1,P)},snd_primitiveSoundStop:function(y){return this.audioContext&&(this.audioContext=null,this.audioBuffersReady=null,this.audioBuffersUnused=null,this.audioNextTimeSlot=0,this.audioSema=0,console.log("sound: stopped")),this.popNIfOK(y)},snd_primitiveSoundStartRecording:function(y){if(3!==y)return!1;var S=this.stackNonInteger(3),F=this.stackInteger(2),P=this.stackBoolean(1),H=this.stackInteger(0);if(!this.success)return!1;var J=this.primMethod,Q=this.vm.freeze(),ee=this;return Squeak.startAudioIn((function(S,J){for(console.log("sound: recording started"),ee.audioInContext=S,ee.audioInSource=J,ee.audioInSema=H,ee.audioInBuffers=[],ee.audioInBufferIndex=0,ee.audioInOverSample=1;F*ee.audioInOverSample<ee.audioInContext.sampleRate;)ee.audioInOverSample*=2;for(var te=1024*ee.audioInOverSample;te/ee.audioInContext.sampleRate<.1;)te*=2;ee.audioInProcessor=S.createScriptProcessor(te,P?2:1,P?2:1),ee.audioInProcessor.onaudioprocess=function(y){ee.snd_recordNextBuffer(y.inputBuffer)},ee.audioInSource.connect(ee.audioInProcessor),ee.audioInProcessor.connect(S.destination),ee.vm.popN(y),window.setTimeout(Q,0)}),(function(F){console.warn(F),ee.vm.sendAsPrimitiveFailure(S,J,y),window.setTimeout(Q,0)})),!0},snd_recordNextBuffer:function(y){this.audioInContext&&(5<this.audioInBuffers.length&&this.audioInBuffers.shift(),this.audioInBuffers.push(y),this.audioInSema&&this.signalSemaphoreWithIndex(this.audioInSema),this.vm.forceInterruptCheck())},snd_primitiveSoundGetRecordingSampleRate:function(y){if(!this.audioInContext)return!1;var S=this.audioInContext.sampleRate/this.audioInOverSample|0;return console.log("sound: actual recording rate "+S+"x"+this.audioInOverSample),this.popNandPushIfOK(y+1,S)},snd_primitiveSoundRecordSamples:function(y){var S=this.stackNonInteger(1).wordsAsInt16Array(),F=this.stackInteger(0)-1;if(!this.success)return!1;for(var P=0;F<S.length&&0!==this.audioInBuffers.length;){for(var H=this.audioInBuffers[0],J=H.numberOfChannels,Q=J,ee=this.audioInOverSample,te=(S.length-F)/Q,re=(H.length-this.audioInBufferIndex)/ee,ie=Math.min(re,te),ae=0;ae<J;ae++)for(var se=H.getChannelData(ae),ne=this.audioInBufferIndex,oe=F+ae,ue=0;ue<ie;ue++)S[oe]=32768*se[ne]&65535,oe+=Q,ne+=ee;P+=ie*J,F+=ie*J,ne<H.length?this.audioInBufferIndex=ne:(this.audioInBufferIndex=0,this.audioInBuffers.shift())}return this.popNandPushIfOK(y+1,P)},snd_primitiveSoundStopRecording:function(y){return this.audioInContext&&(this.audioInSource.disconnect(),this.audioInProcessor.disconnect(),this.audioInContext=null,this.audioInSema=0,this.audioInBuffers=null,this.audioInSource=null,this.audioInProcessor=null,console.log("sound recording stopped")),!0},snd_primitiveSoundSetRecordLevel:function(y){return!0}}),tR=1,uR=11,xR=0,yR=0,zR=0,AR=null,BR=null,CR="ADPCMCodecPlugin 3 November 2014 (e)",DR=null,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("ADPCMCodecPlugin",{primitiveDecodeStereo:JR,primitiveEncodeStereo:LR,setInterpreter:MR,primitiveEncodeMono:KR,primitiveDecodeMono:IR,getModuleName:ER}):self.setTimeout(e,100)}(),rT=1,sT=11,CT=12,DT=2,ET=3,FT=1,GT=0,HT=6,IT=0,JT=4,KT=1,LT=2,MT=3,NT=6,OT=0,PT=2,QT=1,RT=3,ST=16,TT=12,UT=11,VT=14,WT=13,XT=10,YT=18,ZT=15,$T=14,_T=15,aU=21,bU=18,cU=16,dU=4,eU=5,fU=2,gU=3,hU=10,iU=0,jU=1,kU=12,lU=13,mU=18,nU=19,oU=20,pU=16,qU=28,rU=22,sU=17,tU=10,uU=4,vU=65536,wU=100,xU=121,yU=122,zU=114,AU=112,BU=101,CU=102,DU=104,EU=103,FU=120,GU=119,HU=113,IU=123,JU=115,KU=108,LU=105,MU=106,NU=110,OU=107,PU=109,QU=111,RU=118,SU=117,TU=116,UU=8,VU=9,WU=7,XU=2,YU=1,ZU=0,$U=6,_U=1024,aV=2,bV=255,cV=256,dV=65280,eV=4,fV=512,gV=768,hV=65535,iV=1,jV=7,kV=5,lV=254,mV=1,nV=5,oV=8,pV=3,qV=0,rV=6,sV=7,tV=2,uV=4,vV=4,wV=5,xV=6,yV=6,zV=2,AV=5,BV=4,CV=3,DV=1,EV=6,FV=7,GV=8,HV=9,IV=4,JV=5,KV=10,LV=12,MV=12,NV=16,OV=14,PV=15,QV=13,RV=15,SV=14,TV=18,UV=19,VV=20,WV=16,XV=21,YV=17,ZV=10,$V=12,_V=11,aW=51,bW=50,cW=53,dW=48,eW=52,fW=49,gW=13,hW=14,iW=109,jW=111,kW=108,lW=110,mW=10,nW=69,oW=43,pW=45,qW=42,rW=44,sW=24,tW=97,uW=107,vW=103,wW=93,xW=91,yW=101,zW=105,AW=99,BW=95,CW=88,DW=113,EW=46,FW=47,GW=18,HW=37,IW=39,JW=36,KW=38,LW=11,MW=12,NW=17,OW=16,PW=128,QW=65,RW=66,SW=67,TW=68,UW=0,VW=1097753705,WW=256,XW=63,YW=8,ZW=9,$W=80,_W=82,aX=84,bX=86,cX=1,dX=34,eX=35,fX=33,gX=32,hX=2,iX=64,jX=96,kX=106,lX=102,mX=92,nX=90,oX=100,pX=104,qX=98,rX=94,sX=3,tX=5,uX=null,vX="BitBltPlugin",wX=null,xX=0,yX=0,zX=0,AX=0,BX=0,CX=0,DX=0,EX=null,FX=null,GX=null,HX="B2DPlugin 14 November 2014 (e)",IX=null,JX=0,KX=null,LX=null,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("B2DPlugin",{primitiveMergeFillFrom:C1,primitiveCopyBuffer:o1,primitiveAddRect:m1,primitiveAddGradientFill:i1,primitiveSetClipRect:O1,initialiseModule:r_,primitiveSetBitBltPlugin:N1,primitiveRegisterExternalEdge:I1,primitiveGetClipRect:u1,primitiveAddBezier:e1,primitiveInitializeProcessing:B1,primitiveRenderImage:K1,primitiveGetOffset:y1,primitiveSetDepth:Q1,primitiveAddBezierShape:f1,primitiveSetEdgeTransform:R1,getModuleName:Z$,primitiveGetTimes:z1,primitiveNextActiveEdgeEntry:F1,primitiveAddBitmapFill:g1,primitiveGetDepth:w1,primitiveAbortProcessing:c1,primitiveNextGlobalEdgeEntry:H1,primitiveGetFailureReason:x1,primitiveDisplaySpanBuffer:p1,moduleUnloaded:F0,primitiveGetCounts:v1,primitiveChangedActiveEdgeEntry:n1,primitiveRenderScanline:L1,primitiveGetBezierStats:t1,primitiveFinishedProcessing:r1,setInterpreter:i2,primitiveNeedsFlush:D1,primitiveAddLine:j1,primitiveSetOffset:S1,primitiveNextFillEntry:G1,primitiveInitializeBuffer:A1,primitiveDoProfileStats:q1,primitiveAddActiveEdgeEntry:d1,primitiveSetAALevel:M1,primitiveNeedsFlushPut:E1,primitiveAddCompressedShape:h1,primitiveSetColorTransform:P1,primitiveAddOval:k1,primitiveRegisterExternalFill:J1,primitiveAddPolygon:l1,primitiveGetAALevel:s1}):self.setTimeout(e,100)}(),Mra=1,Nra=11,Wra=4294967295,Xra=3,Yra=13,Zra=12,$ra=10,_ra=11,asa=14,bsa=0,csa=4,dsa=5,esa=2,fsa=7,gsa=3,hsa=1,isa=8,jsa=9,ksa=15,lsa=6,msa=2,nsa=2,osa=4,psa=8,qsa=1,rsa=16384,ssa=0,tsa=3,usa=2,vsa=1,wsa=1,xsa=43,ysa=0,zsa=0,Asa=0,Bsa=0,Csa=0,Dsa=0,Esa=0,Fsa=0,Gsa=0,Hsa=0,Isa=0,Jsa=0,Ksa=0,Lsa=0,Msa=0,Nsa=null,Osa=0,Psa=null,Qsa=null,Rsa=0,Ssa=0,Tsa=0,Usa=0,Vsa=0,Wsa=0,Xsa=0,Ysa=0,Zsa=0,$sa=0,_sa=0,ata=0,bta=0,cta=0,dta=0,eta=0,fta=new Array(4096),gta=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5],hta=[0,2,4,6,8,12,14,16],ita=[0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],jta=0,kta=0,lta=0,mta=null,nta=0,ota=0,pta=0,qta=0,rta=0,sta=0,tta=null,uta=0,vta=null,wta=0,xta=0,yta=[0,1,3,0,15,31,0,0,255,0,0,0,0,0,0,0,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],zta="BitBltPlugin 3 November 2014 (e)",Ata=0,Bta=0,Cta=0,Dta=new Array(43),Eta=0,Fta=null,Gta=0,Hta=0,Ita=0,Jta=0,Kta=0,Lta=0,Mta=0,Nta=0,Ota=0,Pta=0,Qta=0,Rta=0,Sta=0,Tta=0,Uta=0,Vta=0,Wta=0,Xta=null,Yta=null,Zta=0,$ta=0,_ta=0,aua=new Array(32),bua=0,cua=0,dua=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("BitBltPlugin",{primitiveCopyBits:Bva,copyBits:Eua,moduleUnloaded:mva,primitiveDrawLoop:Dva,primitiveDisplayString:Cva,initialiseModule:_ua,loadBitBltFrom:cva,setInterpreter:Yva,primitiveWarpBits:Fva,getModuleName:Wua,primitivePixelValueAt:Eva,copyBitsFromtoat:Fua}):self.setTimeout(e,100)}(),registerCroquetPlugin(),kHa=1,lHa=11,pHa=0,qHa=null,rHa=0,sHa=null,tHa="FFTPlugin 3 November 2014 (e)",uHa=0,vHa=null,wHa=0,xHa=null,yHa=0,zHa=null,AHa=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("FFTPlugin",{primitiveFFTTransformData:IHa,setInterpreter:KHa,primitiveFFTPermuteData:GHa,primitiveFFTScaleData:HHa,getModuleName:DHa}):self.setTimeout(e,100)}(),AIa=1,BIa=11,DIa=null,EIa="FloatArrayPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("FloatArrayPlugin",{primitiveMulFloatArray:QIa,primitiveEqual:NIa,primitiveAtPut:JIa,primitiveAt:IIa,primitiveNormalize:SIa,primitiveSubFloatArray:TIa,primitiveDivFloatArray:KIa,primitiveAddScalar:HIa,primitiveDotProduct:MIa,primitiveSubScalar:UIa,setInterpreter:WIa,primitiveSum:VIa,getModuleName:FIa,primitiveHashArray:OIa,primitiveMulScalar:RIa,primitiveLength:PIa,primitiveAddFloatArray:GIa,primitiveDivScalar:LIa}):self.setTimeout(e,100)}(),HKa=1,IKa=11,LKa=null,MKa="GeniePlugin v2.0 14 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("GeniePlugin",{primVersionNO:UKa,setInterpreter:VKa,primSameClassAbsoluteStrokeDistanceMyPoints_otherPoints_myVectors_otherVectors_mySquaredLengths_otherSquaredLengths_myAngles_otherAngles_maxSizeAndReferenceFlag_rowBase_rowInsertRemove_rowInsertRemoveCount:TKa,getModuleName:PKa}):self.setTimeout(e,100)}(),jMa=1,kMa=11,qMa=5,rMa=2,sMa=0,tMa=1,uMa=8,vMa=64,wMa=2446,xMa=22554,yMa=3196,zMa=4433,AMa=46802,BMa=6270,CMa=7373,DMa=9633,EMa=91881,FMa=12299,GMa=116130,HMa=15137,IMa=16069,JMa=16819,KMa=20995,LMa=25172,MMa=1,NMa=2,OMa=4,PMa=8,QMa=16,RMa=128,SMa=255,TMa=11,UMa=10,VMa=0,WMa=127,XMa=3,YMa=null,ZMa=0,$Ma=new Array(128),_Ma=new Array(11),aNa=new Array(128),bNa=new Array(11),cNa=null,dNa=0,eNa=0,fNa=null,gNa=null,hNa=0,iNa=[0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63],jNa=0,kNa=0,lNa=null,mNa=0,nNa=0,oNa="JPEGReaderPlugin 3 November 2014 (e)",pNa=null,qNa=new Array(128),rNa=new Array(11),function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("JPEGReaderPlugin",{setInterpreter:NNa,primitiveIdctInt:LNa,primitiveColorConvertMCU:JNa,primitiveColorConvertGrayscaleMCU:INa,primitiveDecodeMCU:KNa,getModuleName:BNa}):self.setTimeout(e,100)}(),RPa=1,SPa=11,XPa=null,YPa=0,ZPa="KedamaPlugin 3 November 2014 (e)",$Pa=0,_Pa=0,aQa=0,bQa=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("KedamaPlugin",{makeMaskLog:mQa,vectorGetDistanceTo:UQa,getScalarHeading:hQa,shutdownModule:OQa,primitiveAddScalar:wQa,primSetPixelsAtXY:sQa,turtleScalarSetX:PQa,primPixelAtXY:oQa,primUpHill:uQa,primScalarForward:rQa,primitiveDivArrays:xQa,getModuleName:gQa,primitiveSubArrays:BQa,scalarGetAngleTo:HQa,randomRange:GQa,setInterpreter:MQa,kedamaSetRandomSeed:kQa,drawTurtlesInArray:eQa,turtleScalarSetY:QQa,randomIntoIntegerArray:FQa,getHeadingArrayInto:fQa,makeTurtlesMap:nQa,setHeadingArrayFrom:LQa,turtlesSetX:RQa,setScalarHeading:NQa,makeMask:lQa,primitiveDivScalar:yQa,primitiveSubScalar:CQa,primPixelsAtXY:qQa,vectorGetAngleTo:TQa,primitiveMulArrays:zQa,primPixelAtXYPut:pQa,zoomBitmap:VQa,initialiseModule:iQa,primitiveAddArrays:vQa,scalarGetDistanceTo:IQa,turtlesSetY:SQa,randomIntoFloatArray:EQa,primTurtlesForward:tQa,primitiveMulScalar:AQa}):self.setTimeout(e,100)}(),SZa=1,TZa=11,YZa=null,ZZa=0,$Za="KedamaPlugin2 13 November 2014 (e)",_Za=0,a$a=0,b$a=0,c$a=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("KedamaPlugin2",{primitiveAddArrays:w$a,getModuleName:h$a,primitiveMulArrays:L$a,drawTurtlesInArray:f$a,primitiveGTScalar:G$a,setScalarHeading:j_a,primitiveSubScalar:$$a,turtleScalarSetY:m_a,vectorGetAngleTo:p_a,primitiveRemArrays:X$a,primitiveLTArrays:J$a,primitiveAddScalar:x$a,primPixelsAtXY:r$a,primitiveMulScalar:M$a,primSetPixelsAtXY:t$a,setHeadingArrayFrom:h_a,primPixelAtXYPut:q$a,makeMaskLog:n$a,primitiveLTScalar:K$a,scalarGetAngleTo:d_a,primitiveOrByteArray:Q$a,primitiveLEArrays:H$a,primitiveRemScalar:Y$a,getHeadingArrayInto:g$a,turtlesSetX:n_a,primitivePredicateReplaceBytes:V$a,primitiveDivArrays:z$a,makeMask:m$a,primitiveLEScalar:I$a,kedamaSetRandomSeed:l$a,randomIntoIntegerArray:b_a,setInterpreter:i_a,primitivePredicateAtAllPutColor:S$a,makeTurtlesMap:o$a,randomIntoFloatArray:a_a,primUpHill:v$a,shutdownModule:k_a,primitiveDivScalar:A$a,primitiveGEArrays:D$a,primitiveNotByteArray:P$a,randomRange:c_a,initialiseModule:j$a,getScalarHeading:i$a,primPixelAtXY:p$a,primitivePredicateAtAllPutNumber:T$a,primitiveEQArrays:B$a,primitiveNEArrays:N$a,primScalarForward:s$a,vectorGetDistanceTo:q_a,turtlesSetY:o_a,turtleScalarSetX:l_a,primTurtlesForward:u$a,primitiveGEScalar:E$a,primitiveAndByteArray:y$a,primitivePredicateReplaceWords:W$a,primitiveGTArrays:F$a,primitivePredicateAtAllPutObject:U$a,primitiveEQScalar:C$a,primitivePredicateAtAllPutBoolean:R$a,zoomBitmap:r_a,primitiveNEScalar:O$a,scalarGetDistanceTo:e_a,primitiveSubArrays:Z$a}):self.setTimeout(e,100)}(),wdb=1,xdb=11,Bdb=46,Cdb=34,Ddb=47,Edb=35,Fdb=48,Gdb=36,Hdb=49,Idb=37,Jdb=38,Kdb=45,Ldb=9,Mdb=50,Ndb=13,Odb=17,Pdb=40,Qdb=19,Rdb=41,Sdb=21,Tdb=42,Udb=23,Vdb=43,Wdb=25,Xdb=44,Ydb=27,Zdb=29,$db=31,_db=33,aeb=39,beb=4,ceb=1e-4,deb=0,eeb=12,feb=16,geb=18,heb=20,ieb=22,jeb=24,keb=1,leb=26,meb=28,neb=10,oeb=30,peb=32,qeb=51,reb=2,seb=3.141592653589793,teb=12,ueb=3,veb=13,web=7,xeb=4,yeb=14,zeb=8,Aeb=5,Beb=15,Ceb=9,Deb=6,Eeb=16,Feb=10,Geb=17,Heb=11,Ieb=18,Jeb=19,Keb=7,Leb=8,Meb=20,Neb=1,Oeb=21,Peb=6,Qeb=24,Reb=22,Seb=2,Teb=23,Ueb=3,Veb=11,Web=5,Xeb=0,Yeb=0,Zeb=0,$eb=0,_eb=0,afb=null,bfb=0,cfb=null,dfb="Klatt 3 November 2014 (e)",efb=0,ffb=0,gfb=0,hfb=0,ifb=0,jfb=0,kfb=null,lfb=0,mfb=0,nfb=0,ofb=0,pfb=0,qfb=0,rfb=0,sfb=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("Klatt",{setInterpreter:cgb,primitiveSynthesizeFrameIntoStartingAt:Mfb,getModuleName:Dfb}):self.setTimeout(e,100)}(),bjb=1,cjb=11,jjb=0,kjb=null,ljb="LargeIntegers v1.5 (e)",mjb=1,njb=2,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("LargeIntegers",{primDigitAddWith:ckb,primDigitBitShiftMagnitude:hkb,primGetModuleName:rkb,primDigitBitLogicWithOp:ekb,primCheckIfCModuleExists:_jb,primDigitCompare:jkb,primDigitMultiplyNegative:nkb,primDigitBitShift:gkb,primNormalizePositive:vkb,primDigitSubtractWith:qkb,_primDigitBitShift:akb,primDigitMultiplyWithNegative:okb,primDigitSubtract:pkb,primDigitDivNegative:lkb,primNormalizeNegative:ukb,primDigitBitOr:fkb,primMontgomeryTimesModulo:skb,primDigitBitAnd:dkb,primDigitDivWithNegative:mkb,setInterpreter:wkb,primNormalize:tkb,primDigitBitXor:ikb,primDigitCompareWith:kkb,primDigitAdd:bkb,getModuleName:Tjb,primAsLargeInteger:$jb,primAnyBitFromTo:Zjb}):self.setTimeout(e,100)}(),Rrb=1,Srb=11,Vrb=null,Wrb=0,Xrb=0,Yrb=0,Zrb=0,$rb="Matrix2x3Plugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("Matrix2x3Plugin",{primitiveInvertPoint:hsb,primitiveInvertRectInto:isb,primitiveIsIdentity:jsb,primitiveComposeMatrix:gsb,setInterpreter:psb,primitiveTransformRectInto:msb,primitiveIsPureTranslation:ksb,getModuleName:_rb,primitiveTransformPoint:lsb}):self.setTimeout(e,100)}(),Ntb=1,Otb=11,Stb=null,Ttb="MiscPrimitivePlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("MiscPrimitivePlugin",{primitiveConvert8BitSigned:Ztb,primitiveCompareString:Xtb,primitiveTranslateStringWithTable:dub,primitiveStringHash:cub,primitiveCompressToByteArray:Ytb,primitiveFindSubstring:aub,primitiveIndexOfAsciiInString:bub,setInterpreter:eub,primitiveDecompressFromByteArray:$tb,getModuleName:Wtb,primitiveFindFirstInString:_tb}):self.setTimeout(e,100)}(),Xvb=1,Yvb=11,awb=null,bwb="ScratchPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("ScratchPlugin",{primitiveCondenseSound:lwb,getModuleName:fwb,primitiveFisheye:owb,primitiveWaterRipples1:vwb,primitiveHalfSizeDiagonal:qwb,primitiveScale:uwb,primitiveDoubleSize:mwb,setInterpreter:xwb,primitiveWhirl:wwb,primitiveBlur:jwb,primitiveBrightnessShift:kwb,primitiveHalfSizeAverage:pwb,primitiveSaturationShift:twb,primitiveHueShift:rwb,primitiveInterpolate:swb,primitiveExtractChannel:nwb}):self.setTimeout(e,100)}(),registerSocketPlugin(),registerSpeechPlugin(),registerSqueakSSL(),QGb=1,RGb=11,UGb=511,VGb=512,WGb=32768,XGb=536870912,YGb=null,ZGb="SoundGenerationPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("SoundGenerationPlugin",{primitiveMixFMSound:aHb,primitiveMixSampledSound:dHb,setInterpreter:eHb,getModuleName:$Gb,primitiveApplyReverb:_Gb,primitiveMixPluckedSound:cHb,primitiveMixLoopedSampledSound:bHb}):self.setTimeout(e,100)}(),wJb=1,xJb=11,BJb=null,CJb="StarSqueakPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("StarSqueakPlugin",{primitiveDiffuseFromToWidthHeightDelta:FJb,primitiveEvaporateRate:GJb,setInterpreter:IJb,primitiveMapFromToWidthHeightPatchSizeRgbFlagsShift:HJb,getModuleName:EJb}):self.setTimeout(e,100)}(),GKb=1,HKb=11,PKb=32767,QKb=32768,RKb=32768,SKb=30,TKb=286,UKb=258,VKb=3,WKb=32767,XKb=32768,YKb=16,ZKb=1,$Kb=null,_Kb="ZipPlugin 3 November 2014 (e)",aLb=0,bLb=0,cLb=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],dLb=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],eLb=0,fLb=0,gLb=0,hLb=null,iLb=0,jLb=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],kLb=null,lLb=0,mLb=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],nLb=null,oLb=null,pLb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qLb=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],rLb=null,sLb=null,tLb=0,uLb=null,vLb=0,wLb=0,xLb=null,yLb=0,zLb=null,ALb=0,BLb=[257,258,259,260,261,262,263,264,265,265,266,266,267,267,268,268,269,269,269,269,270,270,270,270,271,271,271,271,272,272,272,272,273,273,273,273,273,273,273,273,274,274,274,274,274,274,274,274,275,275,275,275,275,275,275,275,276,276,276,276,276,276,276,276,277,277,277,277,277,277,277,277,277,277,277,277,277,277,277,277,278,278,278,278,278,278,278,278,278,278,278,278,278,278,278,278,279,279,279,279,279,279,279,279,279,279,279,279,279,279,279,279,280,280,280,280,280,280,280,280,280,280,280,280,280,280,280,280,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284],CLb=0,DLb=0,ELb=null,FLb=0,GLb=0,HLb=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("ZipPlugin",{primitiveZipSendBlock:ZLb,primitiveUpdateAdler32:XLb,primitiveUpdateGZipCrc32:YLb,primitiveDeflateUpdateHashTable:VLb,setInterpreter:_Lb,getModuleName:PLb,primitiveDeflateBlock:ULb,primitiveInflateDecompressBlock:WLb}):self.setTimeout(e,100)}();var LZString$1={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(y){if(null==y)return"";var S,F,P,H,J,Q,ee,te="",re=0;for(y=LZString$1.compress(y);re<2*y.length;)re%2==0?(S=y.charCodeAt(re/2)>>8,F=255&y.charCodeAt(re/2),P=re/2+1<y.length?y.charCodeAt(re/2+1)>>8:NaN):(S=255&y.charCodeAt((re-1)/2),(re+1)/2<y.length?(F=y.charCodeAt((re+1)/2)>>8,P=255&y.charCodeAt((re+1)/2)):F=P=NaN),re+=3,H=S>>2,J=(3&S)<<4|F>>4,Q=(15&F)<<2|P>>6,ee=63&P,isNaN(F)?Q=ee=64:isNaN(P)&&(ee=64),te=te+LZString$1._keyStr.charAt(H)+LZString$1._keyStr.charAt(J)+LZString$1._keyStr.charAt(Q)+LZString$1._keyStr.charAt(ee);return te},decompressFromBase64:function(y){if(null==y)return"";var S,F,P,H,J,Q,ee,te="",re=0,ie=0,ae=LZString$1._f;for(y=y.replace(/[^A-Za-z0-9\+\/\=]/g,"");ie<y.length;)F=LZString$1._keyStr.indexOf(y.charAt(ie++))<<2|(J=LZString$1._keyStr.indexOf(y.charAt(ie++)))>>4,P=(15&J)<<4|(Q=LZString$1._keyStr.indexOf(y.charAt(ie++)))>>2,H=(3&Q)<<6|(ee=LZString$1._keyStr.indexOf(y.charAt(ie++))),re%2==0?(S=F<<8,64!=Q&&(te+=ae(S|P)),64!=ee&&(S=H<<8)):(te+=ae(S|F),64!=Q&&(S=P<<8),64!=ee&&(te+=ae(S|H))),re+=3;return LZString$1.decompress(te)},compressToUTF16:function(y){if(null==y)return"";var S,F,P,H="",J=0,Q=LZString$1._f;for(y=LZString$1.compress(y),S=0;S<y.length;S++)switch(F=y.charCodeAt(S),J++){case 0:H+=Q(32+(F>>1)),P=(1&F)<<14;break;case 1:H+=Q(P+(F>>2)+32),P=(3&F)<<13;break;case 2:H+=Q(P+(F>>3)+32),P=(7&F)<<12;break;case 3:H+=Q(P+(F>>4)+32),P=(15&F)<<11;break;case 4:H+=Q(P+(F>>5)+32),P=(31&F)<<10;break;case 5:H+=Q(P+(F>>6)+32),P=(63&F)<<9;break;case 6:H+=Q(P+(F>>7)+32),P=(127&F)<<8;break;case 7:H+=Q(P+(F>>8)+32),P=(255&F)<<7;break;case 8:H+=Q(P+(F>>9)+32),P=(511&F)<<6;break;case 9:H+=Q(P+(F>>10)+32),P=(1023&F)<<5;break;case 10:H+=Q(P+(F>>11)+32),P=(2047&F)<<4;break;case 11:H+=Q(P+(F>>12)+32),P=(4095&F)<<3;break;case 12:H+=Q(P+(F>>13)+32),P=(8191&F)<<2;break;case 13:H+=Q(P+(F>>14)+32),P=(16383&F)<<1;break;case 14:H+=Q(P+(F>>15)+32,32+(32767&F)),J=0}return H+Q(P+32)},decompressFromUTF16:function(y){if(null==y)return"";for(var S,F,P="",H=0,J=0,Q=LZString$1._f;J<y.length;){switch(F=y.charCodeAt(J)-32,H++){case 0:S=F<<1;break;case 1:P+=Q(S|F>>14),S=(16383&F)<<2;break;case 2:P+=Q(S|F>>13),S=(8191&F)<<3;break;case 3:P+=Q(S|F>>12),S=(4095&F)<<4;break;case 4:P+=Q(S|F>>11),S=(2047&F)<<5;break;case 5:P+=Q(S|F>>10),S=(1023&F)<<6;break;case 6:P+=Q(S|F>>9),S=(511&F)<<7;break;case 7:P+=Q(S|F>>8),S=(255&F)<<8;break;case 8:P+=Q(S|F>>7),S=(127&F)<<9;break;case 9:P+=Q(S|F>>6),S=(63&F)<<10;break;case 10:P+=Q(S|F>>5),S=(31&F)<<11;break;case 11:P+=Q(S|F>>4),S=(15&F)<<12;break;case 12:P+=Q(S|F>>3),S=(7&F)<<13;break;case 13:P+=Q(S|F>>2),S=(3&F)<<14;break;case 14:P+=Q(S|F>>1),S=(1&F)<<15;break;case 15:P+=Q(S|F),H=0}J++}return LZString$1.decompress(P)},compress:function(y){if(null==y)return"";var S,F,P,H={},J={},Q="",ee="",te="",re=2,ie=3,ae=2,se="",ne=0,oe=0,ue=LZString$1._f;for(P=0;P<y.length;P+=1)if(Q=y.charAt(P),Object.prototype.hasOwnProperty.call(H,Q)||(H[Q]=ie++,J[Q]=!0),ee=te+Q,Object.prototype.hasOwnProperty.call(H,ee))te=ee;else{if(Object.prototype.hasOwnProperty.call(J,te)){if(te.charCodeAt(0)<256){for(S=0;S<ae;S++)ne<<=1,15==oe?(oe=0,se+=ue(ne),ne=0):oe++;for(F=te.charCodeAt(0),S=0;S<8;S++)ne=ne<<1|1&F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F>>=1}else{for(F=1,S=0;S<ae;S++)ne=ne<<1|F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F=0;for(F=te.charCodeAt(0),S=0;S<16;S++)ne=ne<<1|1&F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F>>=1}0==--re&&(re=Math.pow(2,ae),ae++),delete J[te]}else for(F=H[te],S=0;S<ae;S++)ne=ne<<1|1&F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F>>=1;0==--re&&(re=Math.pow(2,ae),ae++),H[ee]=ie++,te=String(Q)}if(""!==te){if(Object.prototype.hasOwnProperty.call(J,te)){if(te.charCodeAt(0)<256){for(S=0;S<ae;S++)ne<<=1,15==oe?(oe=0,se+=ue(ne),ne=0):oe++;for(F=te.charCodeAt(0),S=0;S<8;S++)ne=ne<<1|1&F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F>>=1}else{for(F=1,S=0;S<ae;S++)ne=ne<<1|F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F=0;for(F=te.charCodeAt(0),S=0;S<16;S++)ne=ne<<1|1&F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F>>=1}0==--re&&(re=Math.pow(2,ae),ae++),delete J[te]}else for(F=H[te],S=0;S<ae;S++)ne=ne<<1|1&F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F>>=1;0==--re&&(re=Math.pow(2,ae),ae++)}for(F=2,S=0;S<ae;S++)ne=ne<<1|1&F,15==oe?(oe=0,se+=ue(ne),ne=0):oe++,F>>=1;for(;;){if(ne<<=1,15==oe){se+=ue(ne);break}oe++}return se},decompress:function(y){if(null==y)return"";if(""==y)return null;var S,F,P,H,J,Q,ee,te=[],re=4,ie=4,ae=3,se="",ne="",oe=LZString$1._f,ue={string:y,val:y.charCodeAt(0),position:32768,index:1};for(S=0;S<3;S+=1)te[S]=S;for(P=0,J=Math.pow(2,2),Q=1;Q!=J;)H=ue.val&ue.position,ue.position>>=1,0==ue.position&&(ue.position=32768,ue.val=ue.string.charCodeAt(ue.index++)),P|=(0<H?1:0)*Q,Q<<=1;switch(P){case 0:for(P=0,J=Math.pow(2,8),Q=1;Q!=J;)H=ue.val&ue.position,ue.position>>=1,0==ue.position&&(ue.position=32768,ue.val=ue.string.charCodeAt(ue.index++)),P|=(0<H?1:0)*Q,Q<<=1;ee=oe(P);break;case 1:for(P=0,J=Math.pow(2,16),Q=1;Q!=J;)H=ue.val&ue.position,ue.position>>=1,0==ue.position&&(ue.position=32768,ue.val=ue.string.charCodeAt(ue.index++)),P|=(0<H?1:0)*Q,Q<<=1;ee=oe(P);break;case 2:return""}for(F=ne=te[3]=ee;;){if(ue.index>ue.string.length)return"";for(P=0,J=Math.pow(2,ae),Q=1;Q!=J;)H=ue.val&ue.position,ue.position>>=1,0==ue.position&&(ue.position=32768,ue.val=ue.string.charCodeAt(ue.index++)),P|=(0<H?1:0)*Q,Q<<=1;switch(ee=P){case 0:for(P=0,J=Math.pow(2,8),Q=1;Q!=J;)H=ue.val&ue.position,ue.position>>=1,0==ue.position&&(ue.position=32768,ue.val=ue.string.charCodeAt(ue.index++)),P|=(0<H?1:0)*Q,Q<<=1;te[ie++]=oe(P),ee=ie-1,re--;break;case 1:for(P=0,J=Math.pow(2,16),Q=1;Q!=J;)H=ue.val&ue.position,ue.position>>=1,0==ue.position&&(ue.position=32768,ue.val=ue.string.charCodeAt(ue.index++)),P|=(0<H?1:0)*Q,Q<<=1;te[ie++]=oe(P),ee=ie-1,re--;break;case 2:return ne}if(0==re&&(re=Math.pow(2,ae),ae++),te[ee])se=te[ee];else{if(ee!==ie)return null;se=F+F.charAt(0)}ne+=se,te[ie++]=F+se.charAt(0),F=se,0==--re&&(re=Math.pow(2,ae),ae++)}}};function setupFullscreen(y,S,F){var P,H=S.parentElement,J="fullscreenchange",Q="fullscreenElement",ee="fullscreenEnabled";function u(S){y.fullscreen=S,H.style.background=S?"black":"",F.header&&(F.header.style.display=S?"none":""),F.footer&&(F.footer.style.display=S?"none":""),F.fullscreenCheckbox&&(F.fullscreenCheckbox.checked=S),setTimeout(window.onresize,0)}if(H.requestFullscreen||[{req:H.webkitRequestFullscreen,exit:document.webkitExitFullscreen,evt:"webkitfullscreenchange",elem:"webkitFullscreenElement",enable:"webkitFullscreenEnabled"},{req:H.mozRequestFullScreen,exit:document.mozCancelFullScreen,evt:"mozfullscreenchange",elem:"mozFullScreenElement",enable:"mozFullScreenEnabled"},{req:H.msRequestFullscreen,exit:document.msExitFullscreen,evt:"MSFullscreenChange",elem:"msFullscreenElement",enable:"msFullscreenEnabled"}].forEach((function(y){y.req&&(H.requestFullscreen=y.req,document.exitFullscreen=y.exit,J=y.evt,Q=y.elem,ee=y.enable)})),H.requestFullscreen)document.addEventListener(J,(function(){u(H==document[Q])})),P=function(){document[ee]&&H==document[Q]!=y.fullscreen&&(y.fullscreen?H.requestFullscreen():document.exitFullscreen())};else{var te=!1;P=function(){(F.header||F.footer)&&te!=y.fullscreen&&u(te=y.fullscreen)}}return F.fullscreenCheckbox&&(F.fullscreenCheckbox.onclick=function(){y.fullscreen=F.fullscreenCheckbox.checked,P()}),P}function setupSwapButtons(y){if(y.swapCheckbox){var S=Squeak.Settings.squeakImageName||"default",F=JSON.parse(Squeak.Settings["squeakSettings:"+S]||"{}");"swapButtons"in F&&(y.swapButtons=F.swapButtons),y.swapCheckbox.checked=y.swapButtons,y.swapCheckbox.onclick=function(){y.swapButtons=y.swapCheckbox.checked,F.swapButtons=y.swapButtons,Squeak.Settings["squeakSettings:"+S]=JSON.stringify(F)}}}function recordModifiers(y,S){var F=y.shiftKey,P=y.ctrlKey&&!y.altKey,H=y.metaKey||y.altKey&&!y.ctrlKey,J=(F?Squeak.Keyboard_Shift:0)+(P?Squeak.Keyboard_Ctrl:0)+(H?Squeak.Keyboard_Cmd:0);return S.buttons=S.buttons&~Squeak.Keyboard_All|J,J}"undefined"!=typeof module&&null!=module&&(module.exports=LZString$1),function(y){"object"==typeof exports&&"undefined"!=typeof module?module.exports=y():"function"==typeof define&&define.amd?define([],y):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=y()}((function(){return function s(y,S,F){function l(H,J){if(!S[H]){if(!y[H]){var Q="function"==typeof require&&require;if(!J&&Q)return Q(H,!0);if(P)return P(H,!0);var ee=new Error("Cannot find module '"+H+"'");throw ee.code="MODULE_NOT_FOUND",ee}var te=S[H]={exports:{}};y[H][0].call(te.exports,(function(S){return l(y[H][1][S]||S)}),te,te.exports,s,y,S,F)}return S[H].exports}for(var P="function"==typeof require&&require,H=0;H<F.length;H++)l(F[H]);return l}({1:[function(y,S,F){var P=y("./utils"),H=y("./support"),J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";F.encode=function(y){for(var S,F,H,Q,ee,te,re,ie=[],ae=0,se=y.length,ne=se,oe="string"!==P.getTypeOf(y);ae<y.length;)ne=se-ae,H=oe?(S=y[ae++],F=ae<se?y[ae++]:0,ae<se?y[ae++]:0):(S=y.charCodeAt(ae++),F=ae<se?y.charCodeAt(ae++):0,ae<se?y.charCodeAt(ae++):0),Q=S>>2,ee=(3&S)<<4|F>>4,te=1<ne?(15&F)<<2|H>>6:64,re=2<ne?63&H:64,ie.push(J.charAt(Q)+J.charAt(ee)+J.charAt(te)+J.charAt(re));return ie.join("")},F.decode=function(y){var S,F,P,Q,ee,te,re,ie=0,ae=0,se=3*(y=y.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;for(y.charAt(y.length-1)===J.charAt(64)&&se--,y.charAt(y.length-2)===J.charAt(64)&&se--,re=new(H.uint8array?Uint8Array:Array)(se);ie<y.length;)S=J.indexOf(y.charAt(ie++))<<2|(Q=J.indexOf(y.charAt(ie++)))>>4,F=(15&Q)<<4|(ee=J.indexOf(y.charAt(ie++)))>>2,P=(3&ee)<<6|(te=J.indexOf(y.charAt(ie++))),re[ae++]=S,64!==ee&&(re[ae++]=F),64!==te&&(re[ae++]=P);return re}},{"./support":27,"./utils":29}],2:[function(y,S,F){var P=y("./external"),H=y("./stream/DataWorker"),J=y("./stream/DataLengthProbe"),Q=y("./stream/Crc32Probe");function o(y,S,F,P,H){this.compressedSize=y,this.uncompressedSize=S,this.crc32=F,this.compression=P,this.compressedContent=H}J=y("./stream/DataLengthProbe"),o.prototype={getContentWorker:function(){var y=new H(P.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new J("data_length")),S=this;return y.on("end",(function(){if(this.streamInfo.data_length!==S.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),y},getCompressedWorker:function(){return new H(P.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(y,S,F){return y.pipe(new Q).pipe(new J("uncompressedSize")).pipe(S.compressWorker(F)).pipe(new J("compressedSize")).withStreamInfo("compression",S)},S.exports=o},{"./external":6,"./stream/Crc32Probe":22,"./stream/DataLengthProbe":23,"./stream/DataWorker":24}],3:[function(y,S,F){var P=y("./stream/GenericWorker");F.STORE={magic:"\0\0",compressWorker:function(y){return new P("STORE compression")},uncompressWorker:function(){return new P("STORE decompression")}},F.DEFLATE=y("./flate")},{"./flate":7,"./stream/GenericWorker":25}],4:[function(y,S,F){var P=y("./utils"),H=function(){for(var y,S=[],F=0;F<256;F++){y=F;for(var P=0;P<8;P++)y=1&y?3988292384^y>>>1:y>>>1;S[F]=y}return S}();S.exports=function(y,S){return void 0!==y&&y.length?("string"!==P.getTypeOf(y)?function(y,S,F,P){var J=H,Q=P+F;y^=-1;for(var ee=P;ee<Q;ee++)y=y>>>8^J[255&(y^S[ee])];return-1^y}:function(y,S,F,P){var J=H,Q=P+F;y^=-1;for(var ee=P;ee<Q;ee++)y=y>>>8^J[255&(y^S.charCodeAt(ee))];return-1^y})(0|S,y,y.length,0):0}},{"./utils":29}],5:[function(y,S,F){F.base64=!1,F.binary=!1,F.dir=!1,F.createFolders=!0,F.date=null,F.compression=null,F.compressionOptions=null,F.comment=null,F.unixPermissions=null,F.dosPermissions=null},{}],6:[function(y,S,F){var P=y("es6-promise").Promise;S.exports={Promise:P}},{"es6-promise":37}],7:[function(y,S,F){var P="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,H=y("pako"),J=y("./utils"),Q=y("./stream/GenericWorker"),ee=P?"uint8array":"array";function u(y,S){Q.call(this,"FlateWorker/"+y),this._pako=new H[y]({raw:!0,level:S.level||-1}),this.meta={};var F=this;this._pako.onData=function(y){F.push({data:y,meta:F.meta})}}F.magic="\b\0",J.inherits(u,Q),u.prototype.processChunk=function(y){this.meta=y.meta,this._pako.push(J.transformTo(ee,y.data),!1)},u.prototype.flush=function(){Q.prototype.flush.call(this),this._pako.push([],!0)},u.prototype.cleanUp=function(){Q.prototype.cleanUp.call(this),this._pako=null},F.compressWorker=function(y){return new u("Deflate",y)},F.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":25,"./utils":29,pako:38}],8:[function(y,S,F){function j(y,S){var F,P="";for(F=0;F<S;F++)P+=String.fromCharCode(255&y),y>>>=8;return P}function i(y,S,F,H,te,re){var ie,ae,se=y.file,ne=y.compression,oe=re!==J.utf8encode,ue=P.transformTo("string",re(se.name)),le=P.transformTo("string",J.utf8encode(se.name)),ce=se.comment,fe=P.transformTo("string",re(ce)),he=P.transformTo("string",J.utf8encode(ce)),pe=le.length!==se.name.length,de=he.length!==ce.length,be="",me="",ve="",ke=se.dir,ge=se.date,ye={crc32:0,compressedSize:0,uncompressedSize:0};S&&!F||(ye.crc32=y.crc32,ye.compressedSize=y.compressedSize,ye.uncompressedSize=y.uncompressedSize);var Se=0;S&&(Se|=8),oe||!pe&&!de||(Se|=2048);var Fe,Pe=0,we=0;ke&&(Pe|=16),"UNIX"===te?(we=798,Pe|=((Fe=se.unixPermissions)||(Fe=ke?16893:33204),(65535&Fe)<<16)):(we=20,Pe|=63&(se.dosPermissions||0)),ie=ge.getUTCHours(),ie<<=6,ie|=ge.getUTCMinutes(),ie<<=5,ie|=ge.getUTCSeconds()/2,ae=ge.getUTCFullYear()-1980,ae<<=4,ae|=ge.getUTCMonth()+1,ae<<=5,ae|=ge.getUTCDate(),pe&&(me=j(1,1)+j(Q(ue),4)+le,be+="up"+j(me.length,2)+me),de&&(ve=j(1,1)+j(Q(fe),4)+he,be+="uc"+j(ve.length,2)+ve);var Ie="";return Ie+="\n\0",Ie+=j(Se,2),Ie+=ne.magic,Ie+=j(ie,2),Ie+=j(ae,2),Ie+=j(ye.crc32,4),Ie+=j(ye.compressedSize,4),Ie+=j(ye.uncompressedSize,4),Ie+=j(ue.length,2),Ie+=j(be.length,2),{fileRecord:ee.LOCAL_FILE_HEADER+Ie+ue+be,dirRecord:ee.CENTRAL_FILE_HEADER+j(we,2)+Ie+j(fe.length,2)+"\0\0\0\0"+j(Pe,4)+j(H,4)+ue+be+fe}}var P=y("../utils"),H=y("../stream/GenericWorker"),J=y("../utf8"),Q=y("../crc32"),ee=y("../signature");function s(y,S,F,P){H.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=S,this.zipPlatform=F,this.encodeFileName=P,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}P.inherits(s,H),s.prototype.push=function(y){var S=y.meta.percent||0,F=this.entriesCount,P=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,H.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:F?(S+100*(F-P-1))/F:100}}))},s.prototype.openedSource=function(y){if(this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name,this.streamFiles&&!y.file.dir){var S=i(y,this.streamFiles,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:S.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(y){this.accumulate=!1;var S,F=i(y,this.streamFiles,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(F.dirRecord),this.streamFiles&&!y.file.dir)this.push({data:(S=y,ee.DATA_DESCRIPTOR+j(S.crc32,4)+j(S.compressedSize,4)+j(S.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:F.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var y=this.bytesWritten,S=0;S<this.dirRecords.length;S++)this.push({data:this.dirRecords[S],meta:{percent:100}});var F,H,J,Q,te,re,ie=this.bytesWritten-y,ae=(F=this.dirRecords.length,H=ie,J=y,Q=this.zipComment,te=this.encodeFileName,re=P.transformTo("string",te(Q)),ee.CENTRAL_DIRECTORY_END+"\0\0\0\0"+j(F,2)+j(F,2)+j(H,4)+j(J,4)+j(re.length,2)+re);this.push({data:ae,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(y){this._sources.push(y);var S=this;return y.on("data",(function(y){S.processChunk(y)})),y.on("end",(function(){S.closedSource(S.previous.streamInfo),S._sources.length?S.prepareNextSource():S.end()})),y.on("error",(function(y){S.error(y)})),this},s.prototype.resume=function(){return!!H.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(y){var S=this._sources;if(!H.prototype.error.call(this,y))return!1;for(var F=0;F<S.length;F++)try{S[F].error(y)}catch(y){}return!0},s.prototype.lock=function(){H.prototype.lock.call(this);for(var y=this._sources,S=0;S<y.length;S++)y[S].lock()},S.exports=s},{"../crc32":4,"../signature":20,"../stream/GenericWorker":25,"../utf8":28,"../utils":29}],9:[function(y,S,F){var P=y("../compressions"),H=y("./ZipFileWorker");F.generateWorker=function(y,S,F){var J=new H(S.streamFiles,F,S.platform,S.encodeFileName),Q=0;try{y.forEach((function(y,F){Q++;var H=function(y,S){var F=y||S,H=P[F];if(!H)throw new Error(F+" is not a valid compression method !");return H}(F.options.compression,S.compression),ee=F.options.compressionOptions||S.compressionOptions||{},te=F.dir,re=F.date;F._compressWorker(H,ee).withStreamInfo("file",{name:y,dir:te,date:re,comment:F.comment||"",unixPermissions:F.unixPermissions,dosPermissions:F.dosPermissions}).pipe(J)})),J.entriesCount=Q}catch(y){J.error(y)}return J}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(y,S,F){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var y=new i;for(var S in this)"function"!=typeof this[S]&&(y[S]=this[S]);return y}}(i.prototype=y("./object")).loadAsync=y("./load"),i.support=y("./support"),i.defaults=y("./defaults"),i.loadAsync=function(y,S){return(new i).loadAsync(y,S)},i.external=y("./external"),S.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":13,"./support":27}],11:[function(y,S,F){var P=y("./utils"),H=y("./external"),J=y("./utf8"),Q=(P=y("./utils"),y("./zipEntries")),ee=y("./stream/Crc32Probe"),te=y("./nodejsUtils");function c(y){return new H.Promise((function(S,F){var P=y.decompressed.getContentWorker().pipe(new ee);P.on("error",(function(y){F(y)})).on("end",(function(){P.streamInfo.crc32!==y.decompressed.crc32?F(new Error("Corrupted zip : CRC32 mismatch")):S()})).resume()}))}S.exports=function(y,S){var F=this;return S=P.extend(S||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:J.utf8decode}),te.isNode&&te.isStream(y)?H.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):P.prepareContent("the loaded zip file",y,!0,S.optimizedBinaryString,S.base64).then((function(y){var F=new Q(S);return F.load(y),F})).then((function(y){var F=[H.Promise.resolve(y)],P=y.files;if(S.checkCRC32)for(var J=0;J<P.length;J++)F.push(c(P[J]));return H.Promise.all(F)})).then((function(y){for(var P=y.shift(),H=P.files,J=0;J<H.length;J++){var Q=H[J];F.file(Q.fileNameStr,Q.decompressed,{binary:!0,optimizedBinaryString:!0,date:Q.date,dir:Q.dir,comment:Q.fileCommentStr.length?Q.fileCommentStr:null,unixPermissions:Q.unixPermissions,dosPermissions:Q.dosPermissions,createFolders:S.createFolders})}return P.zipComment.length&&(F.comment=P.zipComment),F}))}},{"./external":6,"./nodejsUtils":12,"./stream/Crc32Probe":22,"./utf8":28,"./utils":29,"./zipEntries":30}],12:[function(y,S,F){(function(y){S.exports={isNode:void 0!==y,newBuffer:function(S,F){return new y(S,F)},isBuffer:function(S){return y.isBuffer(S)},isStream:function(y){return y&&"function"==typeof y.on&&"function"==typeof y.pause&&"function"==typeof y.resume}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],13:[function(y,S,F){function s(y,S,F){var P,Q=H.getTypeOf(S);(F=H.extend(F||{},ee)).date=F.date||new Date,null!==F.compression&&(F.compression=F.compression.toUpperCase()),"string"==typeof F.unixPermissions&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(y=m(y)),F.createFolders&&(P=b(y))&&v.call(this,P,!0);var ie="string"===Q&&!1===F.binary&&!1===F.base64;F.binary=!ie,(S instanceof te&&0===S.uncompressedSize||F.dir||!S||0===S.length)&&(F.base64=!1,F.binary=!0,S="",F.compression="STORE",Q="string");var ne;ne=S instanceof te||S instanceof J?S:ae.isNode&&ae.isStream(S)?new se(y,S):H.prepareContent(y,S,F.binary,F.optimizedBinaryString,F.base64);var oe=new re(y,ne,F);this.files[y]=oe}var P=y("./utf8"),H=y("./utils"),J=y("./stream/GenericWorker"),Q=y("./stream/StreamHelper"),ee=y("./defaults"),te=y("./compressedObject"),re=y("./zipObject"),ie=y("./generate"),ae=y("./nodejsUtils"),se=y("./nodejs/NodejsStreamInputAdapter"),b=function(y){"/"===y.slice(-1)&&(y=y.substring(0,y.length-1));var S=y.lastIndexOf("/");return 0<S?y.substring(0,S):""},m=function(y){return"/"!==y.slice(-1)&&(y+="/"),y},v=function(y,S){return S=void 0!==S?S:ee.createFolders,y=m(y),this.files[y]||s.call(this,y,null,{dir:!0,createFolders:S}),this.files[y]};function k(y){return"[object RegExp]"===Object.prototype.toString.call(y)}var ne={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var S,F,P;for(S in this.files)this.files.hasOwnProperty(S)&&(P=this.files[S],(F=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&y(F,P))},filter:function(y){var S=[];return this.forEach((function(F,P){y(F,P)&&S.push(P)})),S},file:function(y,S,F){if(1!==arguments.length)return y=this.root+y,s.call(this,y,S,F),this;if(k(y)){var P=y;return this.filter((function(y,S){return!S.dir&&P.test(y)}))}var H=this.files[this.root+y];return H&&!H.dir?H:null},folder:function(y){if(!y)return this;if(k(y))return this.filter((function(S,F){return F.dir&&y.test(S)}));var S=this.root+y,F=v.call(this,S),P=this.clone();return P.root=F.name,P},remove:function(y){y=this.root+y;var S=this.files[y];if(S||("/"!==y.slice(-1)&&(y+="/"),S=this.files[y]),S&&!S.dir)delete this.files[y];else for(var F=this.filter((function(S,F){return F.name.slice(0,y.length)===y})),P=0;P<F.length;P++)delete this.files[F[P].name];return this},generate:function(y){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var S,F={};try{if((F=H.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:P.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),"binarystring"===F.type&&(F.type="string"),!F.type)throw new Error("No output type specified.");H.checkSupport(F.type),"darwin"!==y.platform&&"freebsd"!==y.platform&&"linux"!==y.platform&&"sunos"!==y.platform||(y.platform="UNIX"),"win32"===y.platform&&(y.platform="DOS");var ee=F.comment||this.comment||"";S=ie.generateWorker(this,F,ee)}catch(y){(S=new J("error")).error(y)}return new Q(S,F.type||"string",F.mimeType)},generateAsync:function(y,S){return this.generateInternalStream(y).accumulate(S)},generateNodeStream:function(y,S){return(y=y||{}).type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(S)}};S.exports=ne},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":35,"./nodejsUtils":12,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28,"./utils":29,"./zipObject":32}],14:[function(y,S,F){var P=y("./DataReader");function a(y){P.call(this,y);for(var S=0;S<this.data.length;S++)y[S]=255&y[S]}y("../utils").inherits(a,P),a.prototype.byteAt=function(y){return this.data[this.zero+y]},a.prototype.lastIndexOfSignature=function(y){for(var S=y.charCodeAt(0),F=y.charCodeAt(1),P=y.charCodeAt(2),H=y.charCodeAt(3),J=this.length-4;0<=J;--J)if(this.data[J]===S&&this.data[J+1]===F&&this.data[J+2]===P&&this.data[J+3]===H)return J-this.zero;return-1},a.prototype.readAndCheckSignature=function(y){var S=y.charCodeAt(0),F=y.charCodeAt(1),P=y.charCodeAt(2),H=y.charCodeAt(3),J=this.readData(4);return S===J[0]&&F===J[1]&&P===J[2]&&H===J[3]},a.prototype.readData=function(y){if(this.checkOffset(y),0===y)return[];var S=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,S},S.exports=a},{"../utils":29,"./DataReader":15}],15:[function(y,S,F){var P=y("../utils");function a(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(y){},readInt:function(y){var S,F=0;for(this.checkOffset(y),S=this.index+y-1;S>=this.index;S--)F=(F<<8)+this.byteAt(S);return this.index+=y,F},readString:function(y){return P.transformTo("string",this.readData(y))},readData:function(y){},lastIndexOfSignature:function(y){},readAndCheckSignature:function(y){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},S.exports=a},{"../utils":29}],16:[function(y,S,F){var P=y("./Uint8ArrayReader");function a(y){P.call(this,y)}y("../utils").inherits(a,P),a.prototype.readData=function(y){this.checkOffset(y);var S=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,S},S.exports=a},{"../utils":29,"./Uint8ArrayReader":18}],17:[function(y,S,F){var P=y("./DataReader");function a(y){P.call(this,y)}y("../utils").inherits(a,P),a.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},a.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},a.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},a.prototype.readData=function(y){this.checkOffset(y);var S=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,S},S.exports=a},{"../utils":29,"./DataReader":15}],18:[function(y,S,F){var P=y("./ArrayReader");function a(y){P.call(this,y)}y("../utils").inherits(a,P),a.prototype.readData=function(y){if(this.checkOffset(y),0===y)return new Uint8Array(0);var S=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,S},S.exports=a},{"../utils":29,"./ArrayReader":14}],19:[function(y,S,F){var P=y("../utils"),H=y("../support"),J=y("./ArrayReader"),Q=y("./StringReader"),ee=y("./NodeBufferReader"),te=y("./Uint8ArrayReader");S.exports=function(y){var S=P.getTypeOf(y);return P.checkSupport(S),"string"!==S||H.uint8array?"nodebuffer"===S?new ee(y):H.uint8array?new te(P.transformTo("uint8array",y)):new J(P.transformTo("array",y)):new Q(y)}},{"../support":27,"../utils":29,"./ArrayReader":14,"./NodeBufferReader":16,"./StringReader":17,"./Uint8ArrayReader":18}],20:[function(y,S,F){F.LOCAL_FILE_HEADER="PK",F.CENTRAL_FILE_HEADER="PK",F.CENTRAL_DIRECTORY_END="PK",F.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",F.ZIP64_CENTRAL_DIRECTORY_END="PK",F.DATA_DESCRIPTOR="PK\b"},{}],21:[function(y,S,F){var P=y("./GenericWorker"),H=y("../utils");function s(y){P.call(this,"ConvertWorker to "+y),this.destType=y}H.inherits(s,P),s.prototype.processChunk=function(y){this.push({data:H.transformTo(this.destType,y.data),meta:y.meta})},S.exports=s},{"../utils":29,"./GenericWorker":25}],22:[function(y,S,F){var P=y("./GenericWorker"),H=y("../crc32");function s(){P.call(this,"Crc32Probe")}y("../utils").inherits(s,P),s.prototype.processChunk=function(y){this.streamInfo.crc32=H(y.data,this.streamInfo.crc32||0),this.push(y)},S.exports=s},{"../crc32":4,"../utils":29,"./GenericWorker":25}],23:[function(y,S,F){var P=y("../utils"),H=y("./GenericWorker");function s(y){H.call(this,"DataLengthProbe for "+y),this.propName=y,this.withStreamInfo(y,0)}P.inherits(s,H),s.prototype.processChunk=function(y){if(y){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+y.data.length}H.prototype.processChunk.call(this,y)},S.exports=s},{"../utils":29,"./GenericWorker":25}],24:[function(y,S,F){var P=y("../utils"),H=y("./GenericWorker");function s(y){H.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,y.then((function(y){S.dataIsReady=!0,S.data=y,S.max=y&&y.length||0,S.type=P.getTypeOf(y),S.isPaused||S._tickAndRepeat()}),(function(y){S.error(y)}))}P.inherits(s,H),s.prototype.cleanUp=function(){H.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!H.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,P.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(P.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var y=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":y=this.data.substring(this.index,S);break;case"uint8array":y=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":y=this.data.slice(this.index,S)}return this.index=S,this.push({data:y,meta:{percent:this.max?this.index/this.max*100:0}})},S.exports=s},{"../utils":29,"./GenericWorker":25}],25:[function(y,S,F){function i(y){this.name=y||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(y){this.emit("data",y)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(y){this.emit("error",y)}return!0},error:function(y){return!this.isFinished&&(this.isPaused?this.generatedError=y:(this.isFinished=!0,this.emit("error",y),this.previous&&this.previous.error(y),this.cleanUp()),!0)},on:function(y,S){return this._listeners[y].push(S),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(y,S){if(this._listeners[y])for(var F=0;F<this._listeners[y].length;F++)this._listeners[y][F].call(this,S)},pipe:function(y){return y.registerPrevious(this)},registerPrevious:function(y){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=y.streamInfo,this.mergeStreamInfo(),this.previous=y;var S=this;return y.on("data",(function(y){S.processChunk(y)})),y.on("end",(function(){S.end()})),y.on("error",(function(y){S.error(y)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var y=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),y=!0),this.previous&&this.previous.resume(),!y},flush:function(){},processChunk:function(y){this.push(y)},withStreamInfo:function(y,S){return this.extraStreamInfo[y]=S,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var y in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(y)&&(this.streamInfo[y]=this.extraStreamInfo[y])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var y="Worker "+this.name;return this.previous?this.previous+" -> "+y:y}},S.exports=i},{}],26:[function(y,S,F){(function(F){var P=y("../utils"),H=y("./ConvertWorker"),J=y("./GenericWorker"),Q=y("../base64"),ee=y("../nodejs/NodejsStreamOutputAdapter"),te=y("../external");function e(y,S,F){var Q=S;switch(S){case"blob":case"arraybuffer":Q="uint8array";break;case"base64":Q="string"}try{this._internalType=Q,this._outputType=S,this._mimeType=F,P.checkSupport(Q),this._worker=y.pipe(new H(Q)),y.lock()}catch(y){this._worker=new J("error"),this._worker.error(y)}}e.prototype={accumulate:function(y){return function i(y,S){return new te.Promise((function(H,J){var ee=[],te=y._internalType,re=y._outputType,ie=y._mimeType;y.on("data",(function(y,F){ee.push(y),S&&S(F)})).on("error",(function(y){ee=[],J(y)})).on("end",(function(){try{var y=function(y,S,F){switch(y){case"blob":return P.newBlob(P.transformTo("arraybuffer",S),F);case"base64":return Q.encode(S);default:return P.transformTo(y,S)}}(re,function(y,S){var P,H=0,J=null,Q=0;for(P=0;P<S.length;P++)Q+=S[P].length;switch(y){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(J=new Uint8Array(Q),P=0;P<S.length;P++)J.set(S[P],H),H+=S[P].length;return J;case"nodebuffer":return F.concat(S);default:throw new Error("concat : unsupported type '"+y+"'")}}(te,ee),ie);H(y)}catch(y){J(y)}ee=[]})).resume()}))}(this,y)},on:function(y,S){var F=this;return"data"===y?this._worker.on(y,(function(y){S.call(F,y.data,y.meta)})):this._worker.on(y,(function(){P.delay(S,arguments,F)})),this},resume:function(){return P.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(P.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new ee(this,{objectMode:"nodebuffer"!==this._outputType},y)}},S.exports=e}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":35,"../utils":29,"./ConvertWorker":21,"./GenericWorker":25}],27:[function(y,S,F){(function(S){if(F.base64=!0,F.array=!0,F.string=!0,F.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,F.nodebuffer=void 0!==S,F.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)F.blob=!1;else{var P=new ArrayBuffer(0);try{F.blob=0===new Blob([P],{type:"application/zip"}).size}catch(S){try{var H=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);H.append(P),F.blob=0===H.getBlob("application/zip").size}catch(S){F.blob=!1}}}F.nodestream=!!y("./nodejs/NodejsStreamOutputAdapter").prototype}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"./nodejs/NodejsStreamOutputAdapter":35}],28:[function(y,S,F){for(var P=y("./utils"),H=y("./support"),J=y("./nodejsUtils"),Q=y("./stream/GenericWorker"),ee=new Array(256),te=0;te<256;te++)ee[te]=252<=te?6:248<=te?5:240<=te?4:224<=te?3:192<=te?2:1;function n(){Q.call(this,"utf-8 decode"),this.leftOver=null}function c(){Q.call(this,"utf-8 encode")}ee[254]=ee[254]=1,F.utf8encode=function(y){return H.nodebuffer?J.newBuffer(y,"utf-8"):function(y){var S,F,P,J,Q,ee=y.length,te=0;for(J=0;J<ee;J++)55296==(64512&(F=y.charCodeAt(J)))&&J+1<ee&&56320==(64512&(P=y.charCodeAt(J+1)))&&(F=65536+(F-55296<<10)+(P-56320),J++),te+=F<128?1:F<2048?2:F<65536?3:4;for(S=new(H.uint8array?Uint8Array:Array)(te),J=Q=0;Q<te;J++)55296==(64512&(F=y.charCodeAt(J)))&&J+1<ee&&56320==(64512&(P=y.charCodeAt(J+1)))&&(F=65536+(F-55296<<10)+(P-56320),J++),F<128?S[Q++]=F:(F<2048?S[Q++]=192|F>>>6:(F<65536?S[Q++]=224|F>>>12:(S[Q++]=240|F>>>18,S[Q++]=128|F>>>12&63),S[Q++]=128|F>>>6&63),S[Q++]=128|63&F);return S}(y)},F.utf8decode=function(y){return H.nodebuffer?P.transformTo("nodebuffer",y).toString("utf-8"):function(y){var S,F,H,J,Q=y.length,te=new Array(2*Q);for(S=F=0;S<Q;)if((H=y[S++])<128)te[F++]=H;else if(4<(J=ee[H]))te[F++]=65533,S+=J-1;else{for(H&=2===J?31:3===J?15:7;1<J&&S<Q;)H=H<<6|63&y[S++],J--;1<J?te[F++]=65533:H<65536?te[F++]=H:(H-=65536,te[F++]=55296|H>>10&1023,te[F++]=56320|1023&H)}return te.length!==F&&(te.subarray?te=te.subarray(0,F):te.length=F),P.applyFromCharCode(te)}(y=P.transformTo(H.uint8array?"uint8array":"array",y))},P.inherits(n,Q),n.prototype.processChunk=function(y){var S=P.transformTo(H.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(H.uint8array){var J=S;(S=new Uint8Array(J.length+this.leftOver.length)).set(this.leftOver,0),S.set(J,this.leftOver.length)}else S=this.leftOver.concat(S);this.leftOver=null}var Q=function(y,S){var F;for((S=S||y.length)>y.length&&(S=y.length),F=S-1;0<=F&&128==(192&y[F]);)F--;return!(F<0)&&0!==F&&F+ee[y[F]]>S?F:S}(S),te=S;Q!==S.length&&(H.uint8array?(te=S.subarray(0,Q),this.leftOver=S.subarray(Q,S.length)):(te=S.slice(0,Q),this.leftOver=S.slice(Q,S.length))),this.push({data:F.utf8decode(te),meta:y.meta})},n.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:F.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},F.Utf8DecodeWorker=n,P.inherits(c,Q),c.prototype.processChunk=function(y){this.push({data:F.utf8encode(y.data),meta:y.meta})},F.Utf8EncodeWorker=c},{"./nodejsUtils":12,"./stream/GenericWorker":25,"./support":27,"./utils":29}],29:[function(y,S,F){var P=y("./support"),H=y("./base64"),J=y("./nodejsUtils"),Q=y("asap"),ee=y("./external");function a(y){return y}function h(y,S){for(var F=0;F<y.length;++F)S[F]=255&y.charCodeAt(F);return S}F.newBlob=function(y,S){F.checkSupport("blob");try{return new Blob([y],{type:S})}catch(F){try{var P=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return P.append(y),P.getBlob(S)}catch(y){throw new Error("Bug : can't construct the Blob.")}}};var te={stringifyByChunk:function(y,S,F){var P=[],H=0,J=y.length;if(J<=F)return String.fromCharCode.apply(null,y);for(;H<J;)"array"===S||"nodebuffer"===S?P.push(String.fromCharCode.apply(null,y.slice(H,Math.min(H+F,J)))):P.push(String.fromCharCode.apply(null,y.subarray(H,Math.min(H+F,J)))),H+=F;return P.join("")},stringifyByChar:function(y){for(var S="",F=0;F<y.length;F++)S+=String.fromCharCode(y[F]);return S},applyCanBeUsed:{uint8array:function(){try{return P.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(y){return!1}}(),nodebuffer:function(){try{return P.nodebuffer&&1===String.fromCharCode.apply(null,J.newBuffer(1)).length}catch(y){return!1}}()}};function n(y){var S=65536,P=F.getTypeOf(y),H=!0;if("uint8array"===P?H=te.applyCanBeUsed.uint8array:"nodebuffer"===P&&(H=te.applyCanBeUsed.nodebuffer),H)for(;1<S;)try{return te.stringifyByChunk(y,P,S)}catch(y){S=Math.floor(S/2)}return te.stringifyByChar(y)}function o(y,S){for(var F=0;F<y.length;F++)S[F]=y[F];return S}F.applyFromCharCode=n;var re={};re.string={string:a,array:function(y){return h(y,new Array(y.length))},arraybuffer:function(y){return re.string.uint8array(y).buffer},uint8array:function(y){return h(y,new Uint8Array(y.length))},nodebuffer:function(y){return h(y,J.newBuffer(y.length))}},re.array={string:n,array:a,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return J.newBuffer(y)}},re.arraybuffer={string:function(y){return n(new Uint8Array(y))},array:function(y){return o(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:a,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return J.newBuffer(new Uint8Array(y))}},re.uint8array={string:n,array:function(y){return o(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:a,nodebuffer:function(y){return J.newBuffer(y)}},re.nodebuffer={string:n,array:function(y){return o(y,new Array(y.length))},arraybuffer:function(y){return re.nodebuffer.uint8array(y).buffer},uint8array:function(y){return o(y,new Uint8Array(y.length))},nodebuffer:a},F.transformTo=function(y,S){if(S=S||"",!y)return S;F.checkSupport(y);var P=F.getTypeOf(S);return re[P][y](S)},F.getTypeOf=function(y){return"string"==typeof y?"string":"[object Array]"===Object.prototype.toString.call(y)?"array":P.nodebuffer&&J.isBuffer(y)?"nodebuffer":P.uint8array&&y instanceof Uint8Array?"uint8array":P.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},F.checkSupport=function(y){if(!P[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},F.MAX_VALUE_16BITS=65535,F.MAX_VALUE_32BITS=-1,F.pretty=function(y){var S,F,P="";for(F=0;F<(y||"").length;F++)P+="\\x"+((S=y.charCodeAt(F))<16?"0":"")+S.toString(16).toUpperCase();return P},F.delay=function(y,S,F){Q((function(){y.apply(F||null,S||[])}))},F.inherits=function(y,S){function r(){}r.prototype=S.prototype,y.prototype=new r},F.extend=function(){var y,S,F={};for(y=0;y<arguments.length;y++)for(S in arguments[y])arguments[y].hasOwnProperty(S)&&void 0===F[S]&&(F[S]=arguments[y][S]);return F},F.prepareContent=function(y,S,J,Q,te){return(P.blob&&S instanceof Blob&&"undefined"!=typeof FileReader?new ee.Promise((function(y,F){var P=new FileReader;P.onload=function(S){y(S.target.result)},P.onerror=function(y){F(y.target.error)},P.readAsArrayBuffer(S)})):ee.Promise.resolve(S)).then((function(S){var re,ie=F.getTypeOf(S);return ie?("arraybuffer"===ie?S=F.transformTo("uint8array",S):"string"===ie&&(te?S=H.decode(S):J&&!0!==Q&&(S=h(re=S,new(P.uint8array?Uint8Array:Array)(re.length)))),S):ee.Promise.reject(new Error("The data of '"+y+"' is in an unsupported format !"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":12,"./support":27,asap:33}],30:[function(y,S,F){var P=y("./reader/readerFor"),H=y("./utils"),J=y("./signature"),Q=y("./zipEntry"),ee=(y("./utf8"),y("./support"));function u(y){this.files=[],this.loadOptions=y}u.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var S=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+H.pretty(S)+", expected "+H.pretty(y)+")")}},isSignature:function(y,S){var F=this.reader.index;this.reader.setIndex(y);var P=this.reader.readString(4)===S;return this.reader.setIndex(F),P},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),S=ee.uint8array?"uint8array":"array",F=H.transformTo(S,y);this.zipComment=this.loadOptions.decodeFileName(F)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,S,F,P=this.zip64EndOfCentralSize-44;0<P;)y=this.reader.readInt(2),S=this.reader.readInt(4),F=this.reader.readData(S),this.zip64ExtensibleData[y]={id:y,length:S,value:F}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,S;for(y=0;y<this.files.length;y++)S=this.files[y],this.reader.setIndex(S.localHeaderOffset),this.checkSignature(J.LOCAL_FILE_HEADER),S.readLocalPart(this.reader),S.handleUTF8(),S.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(J.CENTRAL_FILE_HEADER);)(y=new Q({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(J.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,J.LOCAL_FILE_HEADER)?new Error("Corrupted zip : can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var S=y;if(this.checkSignature(J.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===H.MAX_VALUE_16BITS||this.diskWithCentralDirStart===H.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===H.MAX_VALUE_16BITS||this.centralDirRecords===H.MAX_VALUE_16BITS||this.centralDirSize===H.MAX_VALUE_32BITS||this.centralDirOffset===H.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(J.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(J.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,J.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(J.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(J.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var F=this.centralDirOffset+this.centralDirSize;this.zip64&&(F+=20,F+=12+this.zip64EndOfCentralSize);var P=S-F;if(0<P)this.isSignature(S,J.CENTRAL_FILE_HEADER)||(this.reader.zero=P);else if(P<0)throw new Error("Corrupted zip: missing "+Math.abs(P)+" bytes.")},prepareReader:function(y){this.reader=P(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},S.exports=u},{"./reader/readerFor":19,"./signature":20,"./support":27,"./utf8":28,"./utils":29,"./zipEntry":31}],31:[function(y,S,F){var P=y("./reader/readerFor"),H=y("./utils"),J=y("./compressedObject"),Q=y("./crc32"),ee=y("./utf8"),te=y("./compressions"),re=y("./support");function c(y,S){this.options=y,this.loadOptions=S}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(y){var S,F;if(y.skip(22),this.fileNameLength=y.readInt(2),F=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(F),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(S=function(y){for(var S in te)if(te.hasOwnProperty(S)&&te[S].magic===y)return te[S];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+H.pretty(this.compressionMethod)+" unknown (inner file : "+H.transformTo("string",this.fileName)+")");this.decompressed=new J(this.compressedSize,this.uncompressedSize,this.crc32,S,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var S=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(S),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==y&&(this.dosPermissions=63&this.externalFileAttributes),3==y&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(y){if(this.extraFields[1]){var S=P(this.extraFields[1].value);this.uncompressedSize===H.MAX_VALUE_32BITS&&(this.uncompressedSize=S.readInt(8)),this.compressedSize===H.MAX_VALUE_32BITS&&(this.compressedSize=S.readInt(8)),this.localHeaderOffset===H.MAX_VALUE_32BITS&&(this.localHeaderOffset=S.readInt(8)),this.diskNumberStart===H.MAX_VALUE_32BITS&&(this.diskNumberStart=S.readInt(4))}},readExtraFields:function(y){var S,F,P,H=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index<H;)S=y.readInt(2),F=y.readInt(2),P=y.readData(F),this.extraFields[S]={id:S,length:F,value:P}},handleUTF8:function(){var y=re.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=ee.utf8decode(this.fileName),this.fileCommentStr=ee.utf8decode(this.fileComment);else{var S=this.findExtraFieldUnicodePath();if(null!==S)this.fileNameStr=S;else{var F=H.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(F)}var P=this.findExtraFieldUnicodeComment();if(null!==P)this.fileCommentStr=P;else{var J=H.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(J)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var S=P(y.value);return 1!==S.readInt(1)||Q(this.fileName)!==S.readInt(4)?null:ee.utf8decode(S.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var S=P(y.value);return 1!==S.readInt(1)||Q(this.fileComment)!==S.readInt(4)?null:ee.utf8decode(S.readData(y.length-5))}return null}},S.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":19,"./support":27,"./utf8":28,"./utils":29}],32:[function(y,S,F){function i(y,S,F){this.name=y,this.dir=F.dir,this.date=F.date,this.comment=F.comment,this.unixPermissions=F.unixPermissions,this.dosPermissions=F.dosPermissions,this._data=S,this._dataBinary=F.binary,this.options={compression:F.compression,compressionOptions:F.compressionOptions}}var P=y("./stream/StreamHelper"),H=y("./stream/DataWorker"),J=y("./utf8"),Q=y("./compressedObject"),ee=y("./stream/GenericWorker");i.prototype={internalStream:function(y){var S=y.toLowerCase(),F="string"===S||"text"===S;"binarystring"!==S&&"text"!==S||(S="string");var H=this._decompressWorker(),Q=!this._dataBinary;return Q&&!F&&(H=H.pipe(new J.Utf8EncodeWorker)),!Q&&F&&(H=H.pipe(new J.Utf8DecodeWorker)),new P(H,S,"")},async:function(y,S){return this.internalStream(y).accumulate(S)},nodeStream:function(y,S){return this.internalStream(y||"nodebuffer").toNodejsStream(S)},_compressWorker:function(y,S){if(this._data instanceof Q&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var F=this._decompressWorker();return this._dataBinary||(F=F.pipe(new J.Utf8EncodeWorker)),Q.createWorkerFrom(F,y,S)},_decompressWorker:function(){return this._data instanceof Q?this._data.getContentWorker():this._data instanceof ee?this._data:new H(this._data)}};for(var te=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},re=0;re<te.length;re++)i.prototype[te[re]]=c;S.exports=i},{"./compressedObject":2,"./stream/DataWorker":24,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28}],33:[function(y,S,F){var P=y("./raw"),H=[],J=[],Q=P.makeRequestCallFromTimer((function(){if(J.length)throw J.shift()}));function o(y){var S;(S=H.length?H.pop():new u).task=y,P(S)}function u(){this.task=null}S.exports=o,u.prototype.call=function(){try{this.task.call()}catch(y){o.onerror?o.onerror(y):(J.push(y),Q())}finally{this.task=null,H[H.length]=this}}},{"./raw":34}],34:[function(y,S,F){(function(y){function t(y){P.length||F(),P[P.length]=y}S.exports=t;var F,P=[],H=0;function s(){for(;H<P.length;){var y=H;if(H+=1,P[y].call(),1024<H){for(var S=0,F=P.length-H;S<F;S++)P[S]=P[S+H];P.length-=H,H=0}}P.length=0,H=0}var J,Q,ee,te=y.MutationObserver||y.WebKitMutationObserver;function c(y){return function(){var S=setTimeout(r,0),F=setInterval(r,50);function r(){clearTimeout(S),clearInterval(F),y()}}}F="function"==typeof te?(J=1,Q=new te(s),ee=document.createTextNode(""),Q.observe(ee,{characterData:!0}),function(){J=-J,ee.data=J}):c(s),t.requestFlush=F,t.makeRequestCallFromTimer=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(y,S,F){},{}],36:[function(y,S,F){var P,H=S.exports={},J=[],Q=!1,ee=-1;function u(){Q=!1,P.length?J=P.concat(J):ee=-1,J.length&&l()}function l(){if(!Q){var y=setTimeout(u);Q=!0;for(var S=J.length;S;){for(P=J,J=[];++ee<S;)P&&P[ee].run();ee=-1,S=J.length}P=null,Q=!1,clearTimeout(y)}}function c(y,S){this.fun=y,this.array=S}function f(){}H.nextTick=function(y){var S=new Array(arguments.length-1);if(1<arguments.length)for(var F=1;F<arguments.length;F++)S[F-1]=arguments[F];J.push(new c(y,S)),1!==J.length||Q||setTimeout(l,0)},c.prototype.run=function(){this.fun.apply(null,this.array)},H.title="browser",H.browser=!0,H.env={},H.argv=[],H.version="",H.versions={},H.on=f,H.addListener=f,H.once=f,H.off=f,H.removeListener=f,H.removeAllListeners=f,H.emit=f,H.binding=function(y){throw new Error("process.binding is not supported")},H.cwd=function(){return"/"},H.chdir=function(y){throw new Error("process.chdir is not supported")},H.umask=function(){return 0}},{}],37:[function(y,S,F){(function(F,P){(function(){function l(y){return"function"==typeof y}var H,J,Q=Array.isArray?Array.isArray:function(y){return"[object Array]"===Object.prototype.toString.call(y)},ee=0,o=function(y,S){fe[ee]=y,fe[ee+1]=S,2===(ee+=2)&&(J?J(k):ne())},te="undefined"!=typeof window?window:void 0,re=te||{},ie=re.MutationObserver||re.WebKitMutationObserver,ae=void 0!==F&&"[object process]"==={}.toString.call(F),se="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){return function(){setTimeout(k,1)}}var ne,oe,ue,le,ce,fe=new Array(1e3);function k(){for(var y=0;y<ee;y+=2)(0,fe[y])(fe[y+1]),fe[y]=void 0,fe[y+1]=void 0;ee=0}function g(){}ne=ae?function(){F.nextTick(k)}:ie?(ue=0,le=new ie(k),ce=document.createTextNode(""),le.observe(ce,{characterData:!0}),function(){ce.data=ue=++ue%2}):se?((oe=new MessageChannel).port1.onmessage=k,function(){oe.port2.postMessage(0)}):(void 0===te&&"function"==typeof y?function(){try{var S=y("vertx");return H=S.runOnLoop||S.runOnContext,function(){H(k)}}catch(S){return f()}}:f)();var he=void 0,pe=1,de=2,be=new V;function I(y,S){if(S.constructor===y.constructor)P=y,(H=S)._state===pe?X(P,H._result):H._state===de?C(P,H._result):A(H,void 0,(function(y){O(P,y)}),(function(y){C(P,y)}));else{var F=function(y){try{return y.then}catch(y){return be.error=y,be}}(S);F===be?C(y,be.error):void 0!==F&&l(F)?function w(y,S,F){o((function(y){var P=!1,H=function(y,S,F,P){try{y.call(S,F,P)}catch(y){return y}}(F,S,(function(F){P||(P=!0,(S!==F?O:X)(y,F))}),(function(S){P||(P=!0,C(y,S))}),y._label);!P&&H&&(P=!0,C(y,H))}),y)}(y,S,F):X(y,S)}var P,H}function O(y,S){var F;y===S?C(y,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(F=S)||"object"==typeof F&&null!==F?I:X)(y,S)}function _(y){y._onerror&&y._onerror(y._result),j(y)}function X(y,S){y._state===he&&(y._result=S,y._state=pe,0!==y._subscribers.length&&o(j,y))}function C(y,S){y._state===he&&(y._state=de,y._result=S,o(_,y))}function A(y,S,F,P){var H=y._subscribers,J=H.length;y._onerror=null,H[J]=S,H[J+pe]=F,H[J+de]=P,0===J&&y._state&&o(j,y)}function j(y){var S=y._subscribers,F=y._state;if(0!==S.length){for(var P,H,J=y._result,Q=0;Q<S.length;Q+=3)P=S[Q],H=S[Q+F],P?Z(F,P,H,J):H(J);y._subscribers.length=0}}function V(){this.error=null}var me=new V;function Z(y,S,F,P){var H,J,Q,ee,te=l(F);if(te){if((H=function(y,S){try{return y(S)}catch(y){return me.error=y,me}}(F,P))===me?(ee=!0,J=H.error,H=null):Q=!0,S===H)return void C(S,new TypeError("A promises callback cannot return that same promise."))}else H=P,Q=!0;S._state!==he||(te&&Q?O(S,H):ee?C(S,J):y===pe?X(S,H):y===de&&C(S,H))}function Y(y,S){var F=this;F._instanceConstructor=y,F.promise=new y(g),F._validateInput(S)?(F._input=S,F.length=S.length,F._remaining=S.length,F._init(),0===F.length?X(F.promise,F._result):(F.length=F.length||0,F._enumerate(),0===F._remaining&&X(F.promise,F._result))):C(F.promise,F._validationError())}Y.prototype._validateInput=function(y){return Q(y)},Y.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},Y.prototype._init=function(){this._result=new Array(this.length)};var ve=Y;Y.prototype._enumerate=function(){for(var y=this.length,S=this.promise,F=this._input,P=0;S._state===he&&P<y;P++)this._eachEntry(F[P],P)},Y.prototype._eachEntry=function(y,S){var F,P=this._instanceConstructor;"object"==typeof(F=y)&&null!==F?y.constructor===P&&y._state!==he?(y._onerror=null,this._settledAt(y._state,S,y._result)):this._willSettleAt(P.resolve(y),S):(this._remaining--,this._result[S]=y)},Y.prototype._settledAt=function(y,S,F){var P=this.promise;P._state===he&&(this._remaining--,y===de?C(P,F):this._result[S]=F),0===this._remaining&&X(P,this._result)},Y.prototype._willSettleAt=function(y,S){var F=this;A(y,void 0,(function(y){F._settledAt(pe,S,y)}),(function(y){F._settledAt(de,S,y)}))};var ke=0,ge=W;function W(y){this._id=ke++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==y&&(l(y)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof W||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(y,S){try{S((function(S){O(y,S)}),(function(S){C(y,S)}))}catch(S){C(y,S)}}(this,y))}W.all=function(y){return new ve(this,y).promise},W.race=function L(y){var S=new this(g);if(!Q(y))return C(S,new TypeError("You must pass an array to race.")),S;var F=y.length;function i(y){O(S,y)}function a(y){C(S,y)}for(var P=0;S._state===he&&P<F;P++)A(this.resolve(y[P]),void 0,i,a);return S},W.resolve=function T(y){if(y&&"object"==typeof y&&y.constructor===this)return y;var S=new this(g);return O(S,y),S},W.reject=function B(y){var S=new this(g);return C(S,y),S},W._setScheduler=function(y){J=y},W._setAsap=function(y){o=y},W._asap=o,W.prototype={constructor:W,then:function(y,S){var F=this._state;if(F===pe&&!y||F===de&&!S)return this;var P=new this.constructor(g),H=this._result;if(F){var J=arguments[F-1];o((function(){Z(F,P,J,H)}))}else A(this,P,y,S);return P},catch:function(y){return this.then(null,y)}};var R=function(){var y;if(void 0!==P)y=P;else if("undefined"!=typeof self)y=self;else try{y=Function("return this")()}catch(y){throw new Error("polyfill failed because global object is unavailable in this environment")}var S=y.Promise;S&&"[object Promise]"===Object.prototype.toString.call(S.resolve())&&!S.cast||(y.Promise=ge)},ye={Promise:ge,polyfill:R};void 0!==S&&S.exports?S.exports=ye:void 0!==this&&(this.ES6Promise=ye),R()}).call(this)}).call(this,y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:36}],38:[function(y,S,F){var P={};(0,y("./lib/utils/common").assign)(P,y("./lib/deflate"),y("./lib/inflate"),y("./lib/zlib/constants")),S.exports=P},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(y,S,F){var P=y("./zlib/deflate"),H=y("./utils/common"),J=y("./utils/strings"),Q=y("./zlib/messages"),ee=y("./zlib/zstream"),te=Object.prototype.toString,re=0,ie=-1,ae=0,se=8;function d(y){if(!(this instanceof d))return new d(y);this.options=H.assign({level:ie,method:se,chunkSize:16384,windowBits:15,memLevel:8,strategy:ae,to:""},y||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ee,this.strm.avail_out=0;var F=P.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(F!==re)throw new Error(Q[F]);if(S.header&&P.deflateSetHeader(this.strm,S.header),S.dictionary){var ne;if(ne="string"==typeof S.dictionary?J.string2buf(S.dictionary):"[object ArrayBuffer]"===te.call(S.dictionary)?new Uint8Array(S.dictionary):S.dictionary,(F=P.deflateSetDictionary(this.strm,ne))!==re)throw new Error(Q[F]);this._dict_set=!0}}function i(y,S){var F=new d(S);if(F.push(y,!0),F.err)throw F.msg;return F.result}d.prototype.push=function(y,S){var F,Q,ee=this.strm,ie=this.options.chunkSize;if(this.ended)return!1;Q=S===~~S?S:!0===S?4:0,"string"==typeof y?ee.input=J.string2buf(y):"[object ArrayBuffer]"===te.call(y)?ee.input=new Uint8Array(y):ee.input=y,ee.next_in=0,ee.avail_in=ee.input.length;do{if(0===ee.avail_out&&(ee.output=new H.Buf8(ie),ee.next_out=0,ee.avail_out=ie),1!==(F=P.deflate(ee,Q))&&F!==re)return this.onEnd(F),!(this.ended=!0);0!==ee.avail_out&&(0!==ee.avail_in||4!==Q&&2!==Q)||("string"===this.options.to?this.onData(J.buf2binstring(H.shrinkBuf(ee.output,ee.next_out))):this.onData(H.shrinkBuf(ee.output,ee.next_out)))}while((0<ee.avail_in||0===ee.avail_out)&&1!==F);return 4===Q?(F=P.deflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===re):2!==Q||(this.onEnd(re),!(ee.avail_out=0))},d.prototype.onData=function(y){this.chunks.push(y)},d.prototype.onEnd=function(y){y===re&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=H.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},F.Deflate=d,F.deflate=i,F.deflateRaw=function(y,S){return(S=S||{}).raw=!0,i(y,S)},F.gzip=function(y,S){return(S=S||{}).gzip=!0,i(y,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(y,S,F){var P=y("./zlib/inflate"),H=y("./utils/common"),J=y("./utils/strings"),Q=y("./zlib/constants"),ee=y("./zlib/messages"),te=y("./zlib/zstream"),re=y("./zlib/gzheader"),ie=Object.prototype.toString;function n(y){if(!(this instanceof n))return new n(y);this.options=H.assign({chunkSize:16384,windowBits:0,to:""},y||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,0===S.windowBits&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||y&&y.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&0==(15&S.windowBits)&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new te,this.strm.avail_out=0;var F=P.inflateInit2(this.strm,S.windowBits);if(F!==Q.Z_OK)throw new Error(ee[F]);this.header=new re,P.inflateGetHeader(this.strm,this.header)}function o(y,S){var F=new n(S);if(F.push(y,!0),F.err)throw F.msg;return F.result}n.prototype.push=function(y,S){var F,ee,te,re,ae,se,ne=this.strm,oe=this.options.chunkSize,ue=this.options.dictionary,le=!1;if(this.ended)return!1;ee=S===~~S?S:!0===S?Q.Z_FINISH:Q.Z_NO_FLUSH,"string"==typeof y?ne.input=J.binstring2buf(y):"[object ArrayBuffer]"===ie.call(y)?ne.input=new Uint8Array(y):ne.input=y,ne.next_in=0,ne.avail_in=ne.input.length;do{if(0===ne.avail_out&&(ne.output=new H.Buf8(oe),ne.next_out=0,ne.avail_out=oe),(F=P.inflate(ne,Q.Z_NO_FLUSH))===Q.Z_NEED_DICT&&ue&&(se="string"==typeof ue?J.string2buf(ue):"[object ArrayBuffer]"===ie.call(ue)?new Uint8Array(ue):ue,F=P.inflateSetDictionary(this.strm,se)),F===Q.Z_BUF_ERROR&&!0===le&&(F=Q.Z_OK,le=!1),F!==Q.Z_STREAM_END&&F!==Q.Z_OK)return this.onEnd(F),!(this.ended=!0);ne.next_out&&(0!==ne.avail_out&&F!==Q.Z_STREAM_END&&(0!==ne.avail_in||ee!==Q.Z_FINISH&&ee!==Q.Z_SYNC_FLUSH)||("string"===this.options.to?(te=J.utf8border(ne.output,ne.next_out),re=ne.next_out-te,ae=J.buf2string(ne.output,te),ne.next_out=re,ne.avail_out=oe-re,re&&H.arraySet(ne.output,ne.output,te,re,0),this.onData(ae)):this.onData(H.shrinkBuf(ne.output,ne.next_out)))),0===ne.avail_in&&0===ne.avail_out&&(le=!0)}while((0<ne.avail_in||0===ne.avail_out)&&F!==Q.Z_STREAM_END);return F===Q.Z_STREAM_END&&(ee=Q.Z_FINISH),ee===Q.Z_FINISH?(F=P.inflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===Q.Z_OK):ee!==Q.Z_SYNC_FLUSH||(this.onEnd(Q.Z_OK),!(ne.avail_out=0))},n.prototype.onData=function(y){this.chunks.push(y)},n.prototype.onEnd=function(y){y===Q.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=H.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},F.Inflate=n,F.inflate=o,F.inflateRaw=function(y,S){return(S=S||{}).raw=!0,o(y,S)},F.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(y,S,F){var P="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;F.assign=function(y){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var F=S.shift();if(F){if("object"!=typeof F)throw new TypeError(F+"must be non-object");for(var P in F)F.hasOwnProperty(P)&&(y[P]=F[P])}}return y},F.shrinkBuf=function(y,S){return y.length===S?y:y.subarray?y.subarray(0,S):(y.length=S,y)};var H={arraySet:function(y,S,F,P,H){if(S.subarray&&y.subarray)y.set(S.subarray(F,F+P),H);else for(var J=0;J<P;J++)y[H+J]=S[F+J]},flattenChunks:function(y){var S,F,P,H,J,Q;for(S=P=0,F=y.length;S<F;S++)P+=y[S].length;for(Q=new Uint8Array(P),S=H=0,F=y.length;S<F;S++)J=y[S],Q.set(J,H),H+=J.length;return Q}},J={arraySet:function(y,S,F,P,H){for(var J=0;J<P;J++)y[H+J]=S[F+J]},flattenChunks:function(y){return[].concat.apply([],y)}};F.setTyped=function(y){y?(F.Buf8=Uint8Array,F.Buf16=Uint16Array,F.Buf32=Int32Array,F.assign(F,H)):(F.Buf8=Array,F.Buf16=Array,F.Buf32=Array,F.assign(F,J))},F.setTyped(P)},{}],42:[function(y,S,F){var P=y("./common"),H=!0,J=!0;try{String.fromCharCode.apply(null,[0])}catch(y){H=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(y){J=!1}for(var Q=new P.Buf8(256),ee=0;ee<256;ee++)Q[ee]=252<=ee?6:248<=ee?5:240<=ee?4:224<=ee?3:192<=ee?2:1;function c(y,S){if(S<65537&&(y.subarray&&J||!y.subarray&&H))return String.fromCharCode.apply(null,P.shrinkBuf(y,S));for(var F="",Q=0;Q<S;Q++)F+=String.fromCharCode(y[Q]);return F}Q[254]=Q[254]=1,F.string2buf=function(y){var S,F,H,J,Q,ee=y.length,te=0;for(J=0;J<ee;J++)55296==(64512&(F=y.charCodeAt(J)))&&J+1<ee&&56320==(64512&(H=y.charCodeAt(J+1)))&&(F=65536+(F-55296<<10)+(H-56320),J++),te+=F<128?1:F<2048?2:F<65536?3:4;for(S=new P.Buf8(te),J=Q=0;Q<te;J++)55296==(64512&(F=y.charCodeAt(J)))&&J+1<ee&&56320==(64512&(H=y.charCodeAt(J+1)))&&(F=65536+(F-55296<<10)+(H-56320),J++),F<128?S[Q++]=F:(F<2048?S[Q++]=192|F>>>6:(F<65536?S[Q++]=224|F>>>12:(S[Q++]=240|F>>>18,S[Q++]=128|F>>>12&63),S[Q++]=128|F>>>6&63),S[Q++]=128|63&F);return S},F.buf2binstring=function(y){return c(y,y.length)},F.binstring2buf=function(y){for(var S=new P.Buf8(y.length),F=0,H=S.length;F<H;F++)S[F]=y.charCodeAt(F);return S},F.buf2string=function(y,S){var F,P,H,J,ee=S||y.length,te=new Array(2*ee);for(F=P=0;F<ee;)if((H=y[F++])<128)te[P++]=H;else if(4<(J=Q[H]))te[P++]=65533,F+=J-1;else{for(H&=2===J?31:3===J?15:7;1<J&&F<ee;)H=H<<6|63&y[F++],J--;1<J?te[P++]=65533:H<65536?te[P++]=H:(H-=65536,te[P++]=55296|H>>10&1023,te[P++]=56320|1023&H)}return c(te,P)},F.utf8border=function(y,S){var F;for((S=S||y.length)>y.length&&(S=y.length),F=S-1;0<=F&&128==(192&y[F]);)F--;return!(F<0)&&0!==F&&F+Q[y[F]]>S?F:S}},{"./common":41}],43:[function(y,S,F){S.exports=function(y,S,F,P){for(var H=65535&y|0,J=y>>>16&65535|0,Q=0;0!==F;){for(F-=Q=2e3<F?2e3:F;J=J+(H=H+S[P++]|0)|0,--Q;);H%=65521,J%=65521}return H|J<<16|0}},{}],44:[function(y,S,F){S.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(y,S,F){var P=function(){for(var y,S=[],F=0;F<256;F++){y=F;for(var P=0;P<8;P++)y=1&y?3988292384^y>>>1:y>>>1;S[F]=y}return S}();S.exports=function(y,S,F,H){var J=P,Q=H+F;y^=-1;for(var ee=H;ee<Q;ee++)y=y>>>8^J[255&(y^S[ee])];return-1^y}},{}],46:[function(y,S,F){var P,H=y("../utils/common"),J=y("./trees"),Q=y("./adler32"),ee=y("./crc32"),te=y("./messages"),re=0,ie=4,ae=0,se=-2,ne=-1,oe=4,ue=2,le=8,ce=9,fe=286,he=30,pe=19,de=2*fe+1,be=15,me=3,ve=258,ke=ve+me+1,ge=42,ye=113,Se=1,Fe=2,Pe=3,we=4;function V(y,S){return y.msg=te[S],S}function x(y){return(y<<1)-(4<y?9:0)}function Z(y){for(var S=y.length;0<=--S;)y[S]=0}function Y(y){var S=y.state,F=S.pending;F>y.avail_out&&(F=y.avail_out),0!==F&&(H.arraySet(y.output,S.pending_buf,S.pending_out,F,y.next_out),y.next_out+=F,S.pending_out+=F,y.total_out+=F,y.avail_out-=F,S.pending-=F,0===S.pending&&(S.pending_out=0))}function M(y,S){J._tr_flush_block(y,0<=y.block_start?y.block_start:-1,y.strstart-y.block_start,S),y.block_start=y.strstart,Y(y.strm)}function L(y,S){y.pending_buf[y.pending++]=S}function T(y,S){y.pending_buf[y.pending++]=S>>>8&255,y.pending_buf[y.pending++]=255&S}function B(y,S){var F,P,H=y.max_chain_length,J=y.strstart,Q=y.prev_length,ee=y.nice_match,te=y.strstart>y.w_size-ke?y.strstart-(y.w_size-ke):0,re=y.window,ie=y.w_mask,ae=y.prev,se=y.strstart+ve,ne=re[J+Q-1],oe=re[J+Q];y.prev_length>=y.good_match&&(H>>=2),ee>y.lookahead&&(ee=y.lookahead);do{if(re[(F=S)+Q]===oe&&re[F+Q-1]===ne&&re[F]===re[J]&&re[++F]===re[J+1]){J+=2,F++;do{}while(re[++J]===re[++F]&&re[++J]===re[++F]&&re[++J]===re[++F]&&re[++J]===re[++F]&&re[++J]===re[++F]&&re[++J]===re[++F]&&re[++J]===re[++F]&&re[++J]===re[++F]&&J<se);if(P=ve-(se-J),J=se-ve,Q<P){if(y.match_start=S,ee<=(Q=P))break;ne=re[J+Q-1],oe=re[J+Q]}}}while((S=ae[S&ie])>te&&0!=--H);return Q<=y.lookahead?Q:y.lookahead}function N(y){var S,F,P,J,te,re,ie,ae,se,ne,oe=y.w_size;do{if(J=y.window_size-y.lookahead-y.strstart,y.strstart>=oe+(oe-ke)){for(H.arraySet(y.window,y.window,oe,oe,0),y.match_start-=oe,y.strstart-=oe,y.block_start-=oe,S=F=y.hash_size;P=y.head[--S],y.head[S]=oe<=P?P-oe:0,--F;);for(S=F=oe;P=y.prev[--S],y.prev[S]=oe<=P?P-oe:0,--F;);J+=oe}if(0===y.strm.avail_in)break;if(re=y.strm,ie=y.window,ae=y.strstart+y.lookahead,ne=void 0,(se=J)<(ne=re.avail_in)&&(ne=se),F=0===ne?0:(re.avail_in-=ne,H.arraySet(ie,re.input,re.next_in,ne,ae),1===re.state.wrap?re.adler=Q(re.adler,ie,ne,ae):2===re.state.wrap&&(re.adler=ee(re.adler,ie,ne,ae)),re.next_in+=ne,re.total_in+=ne,ne),y.lookahead+=F,y.lookahead+y.insert>=me)for(te=y.strstart-y.insert,y.ins_h=y.window[te],y.ins_h=(y.ins_h<<y.hash_shift^y.window[te+1])&y.hash_mask;y.insert&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[te+me-1])&y.hash_mask,y.prev[te&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=te,te++,y.insert--,!(y.lookahead+y.insert<me)););}while(y.lookahead<ke&&0!==y.strm.avail_in)}function q(y,S){for(var F,P;;){if(y.lookahead<ke){if(N(y),y.lookahead<ke&&S===re)return Se;if(0===y.lookahead)break}if(F=0,y.lookahead>=me&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+me-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),0!==F&&y.strstart-F<=y.w_size-ke&&(y.match_length=B(y,F)),y.match_length>=me)if(P=J._tr_tally(y,y.strstart-y.match_start,y.match_length-me),y.lookahead-=y.match_length,y.match_length<=y.max_lazy_match&&y.lookahead>=me){for(y.match_length--;y.strstart++,y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+me-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart,0!=--y.match_length;);y.strstart++}else y.strstart+=y.match_length,y.match_length=0,y.ins_h=y.window[y.strstart],y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+1])&y.hash_mask;else P=J._tr_tally(y,0,y.window[y.strstart]),y.lookahead--,y.strstart++;if(P&&(M(y,!1),0===y.strm.avail_out))return Se}return y.insert=y.strstart<me-1?y.strstart:me-1,S===ie?(M(y,!0),0===y.strm.avail_out?Pe:we):y.last_lit&&(M(y,!1),0===y.strm.avail_out)?Se:Fe}function W(y,S){for(var F,P,H;;){if(y.lookahead<ke){if(N(y),y.lookahead<ke&&S===re)return Se;if(0===y.lookahead)break}if(F=0,y.lookahead>=me&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+me-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),y.prev_length=y.match_length,y.prev_match=y.match_start,y.match_length=me-1,0!==F&&y.prev_length<y.max_lazy_match&&y.strstart-F<=y.w_size-ke&&(y.match_length=B(y,F),y.match_length<=5&&(1===y.strategy||y.match_length===me&&4096<y.strstart-y.match_start)&&(y.match_length=me-1)),y.prev_length>=me&&y.match_length<=y.prev_length){for(H=y.strstart+y.lookahead-me,P=J._tr_tally(y,y.strstart-1-y.prev_match,y.prev_length-me),y.lookahead-=y.prev_length-1,y.prev_length-=2;++y.strstart<=H&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+me-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),0!=--y.prev_length;);if(y.match_available=0,y.match_length=me-1,y.strstart++,P&&(M(y,!1),0===y.strm.avail_out))return Se}else if(y.match_available){if((P=J._tr_tally(y,0,y.window[y.strstart-1]))&&M(y,!1),y.strstart++,y.lookahead--,0===y.strm.avail_out)return Se}else y.match_available=1,y.strstart++,y.lookahead--}return y.match_available&&(P=J._tr_tally(y,0,y.window[y.strstart-1]),y.match_available=0),y.insert=y.strstart<me-1?y.strstart:me-1,S===ie?(M(y,!0),0===y.strm.avail_out?Pe:we):y.last_lit&&(M(y,!1),0===y.strm.avail_out)?Se:Fe}function R(y,S,F,P,H){this.good_length=y,this.max_lazy=S,this.nice_length=F,this.max_chain=P,this.func=H}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=le,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new H.Buf16(2*de),this.dyn_dtree=new H.Buf16(2*(2*he+1)),this.bl_tree=new H.Buf16(2*(2*pe+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new H.Buf16(be+1),this.heap=new H.Buf16(2*fe+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new H.Buf16(2*fe+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(y){var S;return y&&y.state?(y.total_in=y.total_out=0,y.data_type=ue,(S=y.state).pending=0,S.pending_out=0,S.wrap<0&&(S.wrap=-S.wrap),S.status=S.wrap?ge:ye,y.adler=2===S.wrap?0:1,S.last_flush=re,J._tr_init(S),ae):V(y,se)}function K(y){var S,F=U(y);return F===ae&&((S=y.state).window_size=2*S.w_size,Z(S.head),S.max_lazy_match=P[S.level].max_lazy,S.good_match=P[S.level].good_length,S.nice_match=P[S.level].nice_length,S.max_chain_length=P[S.level].max_chain,S.strstart=0,S.block_start=0,S.lookahead=0,S.insert=0,S.match_length=S.prev_length=me-1,S.match_available=0,S.ins_h=0),F}function E(y,S,F,P,J,Q){if(!y)return se;var ee=1;if(S===ne&&(S=6),P<0?(ee=0,P=-P):15<P&&(ee=2,P-=16),J<1||ce<J||F!==le||P<8||15<P||S<0||9<S||Q<0||oe<Q)return V(y,se);8===P&&(P=9);var te=new D;return(y.state=te).strm=y,te.wrap=ee,te.gzhead=null,te.w_bits=P,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=J+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+me-1)/me),te.window=new H.Buf8(2*te.w_size),te.head=new H.Buf16(te.hash_size),te.prev=new H.Buf16(te.w_size),te.lit_bufsize=1<<J+6,te.pending_buf_size=4*te.lit_bufsize,te.pending_buf=new H.Buf8(te.pending_buf_size),te.d_buf=te.lit_bufsize>>1,te.l_buf=3*te.lit_bufsize,te.level=S,te.strategy=Q,te.method=F,K(y)}P=[new R(0,0,0,0,(function(y,S){var F=65535;for(F>y.pending_buf_size-5&&(F=y.pending_buf_size-5);;){if(y.lookahead<=1){if(N(y),0===y.lookahead&&S===re)return Se;if(0===y.lookahead)break}y.strstart+=y.lookahead,y.lookahead=0;var P=y.block_start+F;if((0===y.strstart||y.strstart>=P)&&(y.lookahead=y.strstart-P,y.strstart=P,M(y,!1),0===y.strm.avail_out))return Se;if(y.strstart-y.block_start>=y.w_size-ke&&(M(y,!1),0===y.strm.avail_out))return Se}return y.insert=0,S===ie?(M(y,!0),0===y.strm.avail_out?Pe:we):(y.strstart>y.block_start&&(M(y,!1),y.strm.avail_out),Se)})),new R(4,4,8,4,q),new R(4,5,16,8,q),new R(4,6,32,32,q),new R(4,4,16,16,W),new R(8,16,32,32,W),new R(8,16,128,128,W),new R(8,32,128,256,W),new R(32,128,258,1024,W),new R(32,258,258,4096,W)],F.deflateInit=function(y,S){return E(y,S,le,15,8,0)},F.deflateInit2=E,F.deflateReset=K,F.deflateResetKeep=U,F.deflateSetHeader=function(y,S){return y&&y.state&&2===y.state.wrap?(y.state.gzhead=S,ae):se},F.deflate=function(y,S){var F,H,Q,te;if(!y||!y.state||5<S||S<0)return y?V(y,se):se;if(H=y.state,!y.output||!y.input&&0!==y.avail_in||666===H.status&&S!==ie)return V(y,0===y.avail_out?-5:se);if(H.strm=y,F=H.last_flush,H.last_flush=S,H.status===ge)if(2===H.wrap)y.adler=0,L(H,31),L(H,139),L(H,8),H.gzhead?(L(H,(H.gzhead.text?1:0)+(H.gzhead.hcrc?2:0)+(H.gzhead.extra?4:0)+(H.gzhead.name?8:0)+(H.gzhead.comment?16:0)),L(H,255&H.gzhead.time),L(H,H.gzhead.time>>8&255),L(H,H.gzhead.time>>16&255),L(H,H.gzhead.time>>24&255),L(H,9===H.level?2:2<=H.strategy||H.level<2?4:0),L(H,255&H.gzhead.os),H.gzhead.extra&&H.gzhead.extra.length&&(L(H,255&H.gzhead.extra.length),L(H,H.gzhead.extra.length>>8&255)),H.gzhead.hcrc&&(y.adler=ee(y.adler,H.pending_buf,H.pending,0)),H.gzindex=0,H.status=69):(L(H,0),L(H,0),L(H,0),L(H,0),L(H,0),L(H,9===H.level?2:2<=H.strategy||H.level<2?4:0),L(H,3),H.status=ye);else{var ne=le+(H.w_bits-8<<4)<<8;ne|=(2<=H.strategy||H.level<2?0:H.level<6?1:6===H.level?2:3)<<6,0!==H.strstart&&(ne|=32),ne+=31-ne%31,H.status=ye,T(H,ne),0!==H.strstart&&(T(H,y.adler>>>16),T(H,65535&y.adler)),y.adler=1}if(69===H.status)if(H.gzhead.extra){for(Q=H.pending;H.gzindex<(65535&H.gzhead.extra.length)&&(H.pending!==H.pending_buf_size||(H.gzhead.hcrc&&H.pending>Q&&(y.adler=ee(y.adler,H.pending_buf,H.pending-Q,Q)),Y(y),Q=H.pending,H.pending!==H.pending_buf_size));)L(H,255&H.gzhead.extra[H.gzindex]),H.gzindex++;H.gzhead.hcrc&&H.pending>Q&&(y.adler=ee(y.adler,H.pending_buf,H.pending-Q,Q)),H.gzindex===H.gzhead.extra.length&&(H.gzindex=0,H.status=73)}else H.status=73;if(73===H.status)if(H.gzhead.name){Q=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>Q&&(y.adler=ee(y.adler,H.pending_buf,H.pending-Q,Q)),Y(y),Q=H.pending,H.pending===H.pending_buf_size)){te=1;break}te=H.gzindex<H.gzhead.name.length?255&H.gzhead.name.charCodeAt(H.gzindex++):0,L(H,te)}while(0!==te);H.gzhead.hcrc&&H.pending>Q&&(y.adler=ee(y.adler,H.pending_buf,H.pending-Q,Q)),0===te&&(H.gzindex=0,H.status=91)}else H.status=91;if(91===H.status)if(H.gzhead.comment){Q=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>Q&&(y.adler=ee(y.adler,H.pending_buf,H.pending-Q,Q)),Y(y),Q=H.pending,H.pending===H.pending_buf_size)){te=1;break}te=H.gzindex<H.gzhead.comment.length?255&H.gzhead.comment.charCodeAt(H.gzindex++):0,L(H,te)}while(0!==te);H.gzhead.hcrc&&H.pending>Q&&(y.adler=ee(y.adler,H.pending_buf,H.pending-Q,Q)),0===te&&(H.status=103)}else H.status=103;if(103===H.status&&(H.gzhead.hcrc?(H.pending+2>H.pending_buf_size&&Y(y),H.pending+2<=H.pending_buf_size&&(L(H,255&y.adler),L(H,y.adler>>8&255),y.adler=0,H.status=ye)):H.status=ye),0!==H.pending){if(Y(y),0===y.avail_out)return H.last_flush=-1,ae}else if(0===y.avail_in&&x(S)<=x(F)&&S!==ie)return V(y,-5);if(666===H.status&&0!==y.avail_in)return V(y,-5);if(0!==y.avail_in||0!==H.lookahead||S!==re&&666!==H.status){var oe=2===H.strategy?function(y,S){for(var F;;){if(0===y.lookahead&&(N(y),0===y.lookahead)){if(S===re)return Se;break}if(y.match_length=0,F=J._tr_tally(y,0,y.window[y.strstart]),y.lookahead--,y.strstart++,F&&(M(y,!1),0===y.strm.avail_out))return Se}return y.insert=0,S===ie?(M(y,!0),0===y.strm.avail_out?Pe:we):y.last_lit&&(M(y,!1),0===y.strm.avail_out)?Se:Fe}(H,S):3===H.strategy?function(y,S){for(var F,P,H,Q,ee=y.window;;){if(y.lookahead<=ve){if(N(y),y.lookahead<=ve&&S===re)return Se;if(0===y.lookahead)break}if(y.match_length=0,y.lookahead>=me&&0<y.strstart&&(P=ee[H=y.strstart-1])===ee[++H]&&P===ee[++H]&&P===ee[++H]){Q=y.strstart+ve;do{}while(P===ee[++H]&&P===ee[++H]&&P===ee[++H]&&P===ee[++H]&&P===ee[++H]&&P===ee[++H]&&P===ee[++H]&&P===ee[++H]&&H<Q);y.match_length=ve-(Q-H),y.match_length>y.lookahead&&(y.match_length=y.lookahead)}if(y.match_length>=me?(F=J._tr_tally(y,1,y.match_length-me),y.lookahead-=y.match_length,y.strstart+=y.match_length,y.match_length=0):(F=J._tr_tally(y,0,y.window[y.strstart]),y.lookahead--,y.strstart++),F&&(M(y,!1),0===y.strm.avail_out))return Se}return y.insert=0,S===ie?(M(y,!0),0===y.strm.avail_out?Pe:we):y.last_lit&&(M(y,!1),0===y.strm.avail_out)?Se:Fe}(H,S):P[H.level].func(H,S);if(oe!==Pe&&oe!==we||(H.status=666),oe===Se||oe===Pe)return 0===y.avail_out&&(H.last_flush=-1),ae;if(oe===Fe&&(1===S?J._tr_align(H):5!==S&&(J._tr_stored_block(H,0,0,!1),3===S&&(Z(H.head),0===H.lookahead&&(H.strstart=0,H.block_start=0,H.insert=0))),Y(y),0===y.avail_out))return H.last_flush=-1,ae}return S!==ie?ae:H.wrap<=0?1:(2===H.wrap?(L(H,255&y.adler),L(H,y.adler>>8&255),L(H,y.adler>>16&255),L(H,y.adler>>24&255),L(H,255&y.total_in),L(H,y.total_in>>8&255),L(H,y.total_in>>16&255),L(H,y.total_in>>24&255)):(T(H,y.adler>>>16),T(H,65535&y.adler)),Y(y),0<H.wrap&&(H.wrap=-H.wrap),0!==H.pending?ae:1)},F.deflateEnd=function(y){var S;return y&&y.state?(S=y.state.status)!==ge&&69!==S&&73!==S&&91!==S&&103!==S&&S!==ye&&666!==S?V(y,se):(y.state=null,S===ye?V(y,-3):ae):se},F.deflateSetDictionary=function(y,S){var F,P,J,ee,te,re,ie,ne,oe=S.length;if(!y||!y.state)return se;if(2===(ee=(F=y.state).wrap)||1===ee&&F.status!==ge||F.lookahead)return se;for(1===ee&&(y.adler=Q(y.adler,S,oe,0)),F.wrap=0,oe>=F.w_size&&(0===ee&&(Z(F.head),F.strstart=0,F.block_start=0,F.insert=0),ne=new H.Buf8(F.w_size),H.arraySet(ne,S,oe-F.w_size,F.w_size,0),S=ne,oe=F.w_size),te=y.avail_in,re=y.next_in,ie=y.input,y.avail_in=oe,y.next_in=0,y.input=S,N(F);F.lookahead>=me;){for(P=F.strstart,J=F.lookahead-(me-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[P+me-1])&F.hash_mask,F.prev[P&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=P,P++,--J;);F.strstart=P,F.lookahead=me-1,N(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=me-1,F.match_available=0,y.next_in=re,y.input=ie,y.avail_in=te,F.wrap=ee,ae},F.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(y,S,F){S.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(y,S,F){S.exports=function(y,S){var F,P,H,J,Q,ee,te,re,ie,ae,se,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke,ge;F=y.state,P=y.next_in,ke=y.input,H=P+(y.avail_in-5),J=y.next_out,ge=y.output,Q=J-(S-y.avail_out),ee=J+(y.avail_out-257),te=F.dmax,re=F.wsize,ie=F.whave,ae=F.wnext,se=F.window,ne=F.hold,oe=F.bits,ue=F.lencode,le=F.distcode,ce=(1<<F.lenbits)-1,fe=(1<<F.distbits)-1;e:do{oe<15&&(ne+=ke[P++]<<oe,oe+=8,ne+=ke[P++]<<oe,oe+=8),he=ue[ne&ce];t:for(;;){if(ne>>>=pe=he>>>24,oe-=pe,0==(pe=he>>>16&255))ge[J++]=65535&he;else{if(!(16&pe)){if(0==(64&pe)){he=ue[(65535&he)+(ne&(1<<pe)-1)];continue t}if(32&pe){F.mode=12;break e}y.msg="invalid literal/length code",F.mode=30;break e}de=65535&he,(pe&=15)&&(oe<pe&&(ne+=ke[P++]<<oe,oe+=8),de+=ne&(1<<pe)-1,ne>>>=pe,oe-=pe),oe<15&&(ne+=ke[P++]<<oe,oe+=8,ne+=ke[P++]<<oe,oe+=8),he=le[ne&fe];r:for(;;){if(ne>>>=pe=he>>>24,oe-=pe,!(16&(pe=he>>>16&255))){if(0==(64&pe)){he=le[(65535&he)+(ne&(1<<pe)-1)];continue r}y.msg="invalid distance code",F.mode=30;break e}if(be=65535&he,oe<(pe&=15)&&(ne+=ke[P++]<<oe,(oe+=8)<pe&&(ne+=ke[P++]<<oe,oe+=8)),te<(be+=ne&(1<<pe)-1)){y.msg="invalid distance too far back",F.mode=30;break e}if(ne>>>=pe,oe-=pe,(pe=J-Q)<be){if(ie<(pe=be-pe)&&F.sane){y.msg="invalid distance too far back",F.mode=30;break e}if(ve=se,(me=0)===ae){if(me+=re-pe,pe<de){for(de-=pe;ge[J++]=se[me++],--pe;);me=J-be,ve=ge}}else if(ae<pe){if(me+=re+ae-pe,(pe-=ae)<de){for(de-=pe;ge[J++]=se[me++],--pe;);if(me=0,ae<de){for(de-=pe=ae;ge[J++]=se[me++],--pe;);me=J-be,ve=ge}}}else if(me+=ae-pe,pe<de){for(de-=pe;ge[J++]=se[me++],--pe;);me=J-be,ve=ge}for(;2<de;)ge[J++]=ve[me++],ge[J++]=ve[me++],ge[J++]=ve[me++],de-=3;de&&(ge[J++]=ve[me++],1<de&&(ge[J++]=ve[me++]))}else{for(me=J-be;ge[J++]=ge[me++],ge[J++]=ge[me++],ge[J++]=ge[me++],2<(de-=3););de&&(ge[J++]=ge[me++],1<de&&(ge[J++]=ge[me++]))}break}}break}}while(P<H&&J<ee);P-=de=oe>>3,ne&=(1<<(oe-=de<<3))-1,y.next_in=P,y.next_out=J,y.avail_in=P<H?H-P+5:5-(P-H),y.avail_out=J<ee?ee-J+257:257-(J-ee),F.hold=ne,F.bits=oe}},{}],49:[function(y,S,F){var P=y("../utils/common"),H=y("./adler32"),J=y("./crc32"),Q=y("./inffast"),ee=y("./inftrees"),te=1,re=2,ie=0,ae=-2,se=1,ne=852,oe=592;function B(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new P.Buf16(320),this.work=new P.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function n(y){var S;return y&&y.state?(S=y.state,y.total_in=y.total_out=S.total=0,y.msg="",S.wrap&&(y.adler=1&S.wrap),S.mode=se,S.last=0,S.havedict=0,S.dmax=32768,S.head=null,S.hold=0,S.bits=0,S.lencode=S.lendyn=new P.Buf32(ne),S.distcode=S.distdyn=new P.Buf32(oe),S.sane=1,S.back=-1,ie):ae}function o(y){var S;return y&&y.state?((S=y.state).wsize=0,S.whave=0,S.wnext=0,n(y)):ae}function u(y,S){var F,P;return y&&y.state?(P=y.state,S<0?(F=0,S=-S):(F=1+(S>>4),S<48&&(S&=15)),S&&(S<8||15<S)?ae:(null!==P.window&&P.wbits!==S&&(P.window=null),P.wrap=F,P.wbits=S,o(y))):ae}function l(y,S){var F,P;return y?(P=new s,(y.state=P).window=null,(F=u(y,S))!==ie&&(y.state=null),F):ae}var ue,le,ce=!0;function N(y){if(ce){var S;for(ue=new P.Buf32(512),le=new P.Buf32(32),S=0;S<144;)y.lens[S++]=8;for(;S<256;)y.lens[S++]=9;for(;S<280;)y.lens[S++]=7;for(;S<288;)y.lens[S++]=8;for(ee(te,y.lens,0,288,ue,0,y.work,{bits:9}),S=0;S<32;)y.lens[S++]=5;ee(re,y.lens,0,32,le,0,y.work,{bits:5}),ce=!1}y.lencode=ue,y.lenbits=9,y.distcode=le,y.distbits=5}function q(y,S,F,H){var J,Q=y.state;return null===Q.window&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new P.Buf8(Q.wsize)),H>=Q.wsize?(P.arraySet(Q.window,S,F-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(H<(J=Q.wsize-Q.wnext)&&(J=H),P.arraySet(Q.window,S,F-H,J,Q.wnext),(H-=J)?(P.arraySet(Q.window,S,F-H,H,0),Q.wnext=H,Q.whave=Q.wsize):(Q.wnext+=J,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=J))),0}F.inflateReset=o,F.inflateReset2=u,F.inflateResetKeep=n,F.inflateInit=function(y){return l(y,15)},F.inflateInit2=l,F.inflate=function(y,S){var F,ne,oe,ue,le,ce,fe,he,pe,de,be,me,ve,ke,ge,ye,Se,Fe,Pe,we,Ie,Oe,_e,Xe,Ce=0,Ae=new P.Buf8(4),je=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&0!==y.avail_in)return ae;12===(F=y.state).mode&&(F.mode=13),le=y.next_out,oe=y.output,fe=y.avail_out,ue=y.next_in,ne=y.input,ce=y.avail_in,he=F.hold,pe=F.bits,de=ce,be=fe,Oe=ie;e:for(;;)switch(F.mode){case se:if(0===F.wrap){F.mode=13;break}for(;pe<16;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(2&F.wrap&&35615===he){Ae[F.check=0]=255&he,Ae[1]=he>>>8&255,F.check=J(F.check,Ae,2,0),pe=he=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&he)<<8)+(he>>8))%31){y.msg="incorrect header check",F.mode=30;break}if(8!=(15&he)){y.msg="unknown compression method",F.mode=30;break}if(pe-=4,Ie=8+(15&(he>>>=4)),0===F.wbits)F.wbits=Ie;else if(Ie>F.wbits){y.msg="invalid window size",F.mode=30;break}F.dmax=1<<Ie,y.adler=F.check=1,F.mode=512&he?10:12,pe=he=0;break;case 2:for(;pe<16;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(F.flags=he,8!=(255&F.flags)){y.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){y.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=he>>8&1),512&F.flags&&(Ae[0]=255&he,Ae[1]=he>>>8&255,F.check=J(F.check,Ae,2,0)),pe=he=0,F.mode=3;case 3:for(;pe<32;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}F.head&&(F.head.time=he),512&F.flags&&(Ae[0]=255&he,Ae[1]=he>>>8&255,Ae[2]=he>>>16&255,Ae[3]=he>>>24&255,F.check=J(F.check,Ae,4,0)),pe=he=0,F.mode=4;case 4:for(;pe<16;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}F.head&&(F.head.xflags=255&he,F.head.os=he>>8),512&F.flags&&(Ae[0]=255&he,Ae[1]=he>>>8&255,F.check=J(F.check,Ae,2,0)),pe=he=0,F.mode=5;case 5:if(1024&F.flags){for(;pe<16;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}F.length=he,F.head&&(F.head.extra_len=he),512&F.flags&&(Ae[0]=255&he,Ae[1]=he>>>8&255,F.check=J(F.check,Ae,2,0)),pe=he=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(ce<(me=F.length)&&(me=ce),me&&(F.head&&(Ie=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),P.arraySet(F.head.extra,ne,ue,me,Ie)),512&F.flags&&(F.check=J(F.check,ne,me,ue)),ce-=me,ue+=me,F.length-=me),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(0===ce)break e;for(me=0;Ie=ne[ue+me++],F.head&&Ie&&F.length<65536&&(F.head.name+=String.fromCharCode(Ie)),Ie&&me<ce;);if(512&F.flags&&(F.check=J(F.check,ne,me,ue)),ce-=me,ue+=me,Ie)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(0===ce)break e;for(me=0;Ie=ne[ue+me++],F.head&&Ie&&F.length<65536&&(F.head.comment+=String.fromCharCode(Ie)),Ie&&me<ce;);if(512&F.flags&&(F.check=J(F.check,ne,me,ue)),ce-=me,ue+=me,Ie)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;pe<16;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(he!==(65535&F.check)){y.msg="header crc mismatch",F.mode=30;break}pe=he=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),y.adler=F.check=0,F.mode=12;break;case 10:for(;pe<32;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}y.adler=F.check=B(he),pe=he=0,F.mode=11;case 11:if(0===F.havedict)return y.next_out=le,y.avail_out=fe,y.next_in=ue,y.avail_in=ce,F.hold=he,F.bits=pe,2;y.adler=F.check=1,F.mode=12;case 12:if(5===S||6===S)break e;case 13:if(F.last){he>>>=7&pe,pe-=7&pe,F.mode=27;break}for(;pe<3;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}switch(F.last=1&he,--pe,3&(he>>>=1)){case 0:F.mode=14;break;case 1:if(N(F),F.mode=20,6!==S)break;he>>>=2,pe-=2;break e;case 2:F.mode=17;break;case 3:y.msg="invalid block type",F.mode=30}he>>>=2,pe-=2;break;case 14:for(he>>>=7&pe,pe-=7&pe;pe<32;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if((65535&he)!=(he>>>16^65535)){y.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&he,pe=he=0,F.mode=15,6===S)break e;case 15:F.mode=16;case 16:if(me=F.length){if(ce<me&&(me=ce),fe<me&&(me=fe),0===me)break e;P.arraySet(oe,ne,ue,me,le),ce-=me,ue+=me,fe-=me,le+=me,F.length-=me;break}F.mode=12;break;case 17:for(;pe<14;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(F.nlen=257+(31&he),he>>>=5,pe-=5,F.ndist=1+(31&he),he>>>=5,pe-=5,F.ncode=4+(15&he),he>>>=4,pe-=4,286<F.nlen||30<F.ndist){y.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;pe<3;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}F.lens[je[F.have++]]=7&he,he>>>=3,pe-=3}for(;F.have<19;)F.lens[je[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,_e={bits:F.lenbits},Oe=ee(0,F.lens,0,19,F.lencode,0,F.work,_e),F.lenbits=_e.bits,Oe){y.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;ye=(Ce=F.lencode[he&(1<<F.lenbits)-1])>>>16&255,Se=65535&Ce,!((ge=Ce>>>24)<=pe);){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(Se<16)he>>>=ge,pe-=ge,F.lens[F.have++]=Se;else{if(16===Se){for(Xe=ge+2;pe<Xe;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(he>>>=ge,pe-=ge,0===F.have){y.msg="invalid bit length repeat",F.mode=30;break}Ie=F.lens[F.have-1],me=3+(3&he),he>>>=2,pe-=2}else if(17===Se){for(Xe=ge+3;pe<Xe;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}pe-=ge,Ie=0,me=3+(7&(he>>>=ge)),he>>>=3,pe-=3}else{for(Xe=ge+7;pe<Xe;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}pe-=ge,Ie=0,me=11+(127&(he>>>=ge)),he>>>=7,pe-=7}if(F.have+me>F.nlen+F.ndist){y.msg="invalid bit length repeat",F.mode=30;break}for(;me--;)F.lens[F.have++]=Ie}}if(30===F.mode)break;if(0===F.lens[256]){y.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,_e={bits:F.lenbits},Oe=ee(te,F.lens,0,F.nlen,F.lencode,0,F.work,_e),F.lenbits=_e.bits,Oe){y.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,_e={bits:F.distbits},Oe=ee(re,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,_e),F.distbits=_e.bits,Oe){y.msg="invalid distances set",F.mode=30;break}if(F.mode=20,6===S)break e;case 20:F.mode=21;case 21:if(6<=ce&&258<=fe){y.next_out=le,y.avail_out=fe,y.next_in=ue,y.avail_in=ce,F.hold=he,F.bits=pe,Q(y,be),le=y.next_out,oe=y.output,fe=y.avail_out,ue=y.next_in,ne=y.input,ce=y.avail_in,he=F.hold,pe=F.bits,12===F.mode&&(F.back=-1);break}for(F.back=0;ye=(Ce=F.lencode[he&(1<<F.lenbits)-1])>>>16&255,Se=65535&Ce,!((ge=Ce>>>24)<=pe);){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(ye&&0==(240&ye)){for(Fe=ge,Pe=ye,we=Se;ye=(Ce=F.lencode[we+((he&(1<<Fe+Pe)-1)>>Fe)])>>>16&255,Se=65535&Ce,!(Fe+(ge=Ce>>>24)<=pe);){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}he>>>=Fe,pe-=Fe,F.back+=Fe}if(he>>>=ge,pe-=ge,F.back+=ge,F.length=Se,0===ye){F.mode=26;break}if(32&ye){F.back=-1,F.mode=12;break}if(64&ye){y.msg="invalid literal/length code",F.mode=30;break}F.extra=15&ye,F.mode=22;case 22:if(F.extra){for(Xe=F.extra;pe<Xe;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}F.length+=he&(1<<F.extra)-1,he>>>=F.extra,pe-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;ye=(Ce=F.distcode[he&(1<<F.distbits)-1])>>>16&255,Se=65535&Ce,!((ge=Ce>>>24)<=pe);){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(0==(240&ye)){for(Fe=ge,Pe=ye,we=Se;ye=(Ce=F.distcode[we+((he&(1<<Fe+Pe)-1)>>Fe)])>>>16&255,Se=65535&Ce,!(Fe+(ge=Ce>>>24)<=pe);){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}he>>>=Fe,pe-=Fe,F.back+=Fe}if(he>>>=ge,pe-=ge,F.back+=ge,64&ye){y.msg="invalid distance code",F.mode=30;break}F.offset=Se,F.extra=15&ye,F.mode=24;case 24:if(F.extra){for(Xe=F.extra;pe<Xe;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}F.offset+=he&(1<<F.extra)-1,he>>>=F.extra,pe-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){y.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(0===fe)break e;if(me=be-fe,F.offset>me){if((me=F.offset-me)>F.whave&&F.sane){y.msg="invalid distance too far back",F.mode=30;break}ve=me>F.wnext?(me-=F.wnext,F.wsize-me):F.wnext-me,me>F.length&&(me=F.length),ke=F.window}else ke=oe,ve=le-F.offset,me=F.length;for(fe<me&&(me=fe),fe-=me,F.length-=me;oe[le++]=ke[ve++],--me;);0===F.length&&(F.mode=21);break;case 26:if(0===fe)break e;oe[le++]=F.length,fe--,F.mode=21;break;case 27:if(F.wrap){for(;pe<32;){if(0===ce)break e;ce--,he|=ne[ue++]<<pe,pe+=8}if(be-=fe,y.total_out+=be,F.total+=be,be&&(y.adler=F.check=(F.flags?J:H)(F.check,oe,be,le-be)),be=fe,(F.flags?he:B(he))!==F.check){y.msg="incorrect data check",F.mode=30;break}pe=he=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;pe<32;){if(0===ce)break e;ce--,he+=ne[ue++]<<pe,pe+=8}if(he!==(4294967295&F.total)){y.msg="incorrect length check",F.mode=30;break}pe=he=0}F.mode=29;case 29:Oe=1;break e;case 30:Oe=-3;break e;case 31:return-4;default:return ae}return y.next_out=le,y.avail_out=fe,y.next_in=ue,y.avail_in=ce,F.hold=he,F.bits=pe,(F.wsize||be!==y.avail_out&&F.mode<30&&(F.mode<27||4!==S))&&q(y,y.output,y.next_out,be-y.avail_out),de-=y.avail_in,be-=y.avail_out,y.total_in+=de,y.total_out+=be,F.total+=be,F.wrap&&be&&(y.adler=F.check=(F.flags?J:H)(F.check,oe,be,y.next_out-be)),y.data_type=F.bits+(F.last?64:0)+(12===F.mode?128:0)+(20===F.mode||15===F.mode?256:0),(0==de&&0===be||4===S)&&Oe===ie&&(Oe=-5),Oe},F.inflateEnd=function(y){if(!y||!y.state)return ae;var S=y.state;return S.window&&(S.window=null),y.state=null,ie},F.inflateGetHeader=function(y,S){var F;return y&&y.state&&0!=(2&(F=y.state).wrap)?((F.head=S).done=!1,ie):ae},F.inflateSetDictionary=function(y,S){var F,P=S.length;return!y||!y.state||0!==(F=y.state).wrap&&11!==F.mode?ae:11===F.mode&&H(1,S,P,0)!==F.check?-3:q(y,S,P,P)?(F.mode=31,-4):(F.havedict=1,ie)},F.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(y,S,F){var P=y("../utils/common"),H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],J=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ee=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];S.exports=function(y,S,F,te,re,ie,ae,se){var ne,oe,ue,le,ce,fe,he,pe,de,be=se.bits,me=0,ve=0,ke=0,ge=0,ye=0,Se=0,Fe=0,Pe=0,we=0,Ie=0,Oe=null,_e=0,Xe=new P.Buf16(16),Ce=new P.Buf16(16),Ae=null,je=0;for(me=0;me<=15;me++)Xe[me]=0;for(ve=0;ve<te;ve++)Xe[S[F+ve]]++;for(ye=be,ge=15;1<=ge&&0===Xe[ge];ge--);if(ge<ye&&(ye=ge),0===ge)return re[ie++]=20971520,re[ie++]=20971520,se.bits=1,0;for(ke=1;ke<ge&&0===Xe[ke];ke++);for(ye<ke&&(ye=ke),me=Pe=1;me<=15;me++)if(Pe<<=1,(Pe-=Xe[me])<0)return-1;if(0<Pe&&(0===y||1!==ge))return-1;for(Ce[1]=0,me=1;me<15;me++)Ce[me+1]=Ce[me]+Xe[me];for(ve=0;ve<te;ve++)0!==S[F+ve]&&(ae[Ce[S[F+ve]]++]=ve);if(fe=0===y?(Oe=Ae=ae,19):1===y?(Oe=H,_e-=257,Ae=J,je-=257,256):(Oe=Q,Ae=ee,-1),me=ke,ce=ie,Fe=ve=Ie=0,ue=-1,le=(we=1<<(Se=ye))-1,1===y&&852<we||2===y&&592<we)return 1;for(;;){for(he=me-Fe,de=ae[ve]<fe?(pe=0,ae[ve]):ae[ve]>fe?(pe=Ae[je+ae[ve]],Oe[_e+ae[ve]]):(pe=96,0),ne=1<<me-Fe,ke=oe=1<<Se;re[ce+(Ie>>Fe)+(oe-=ne)]=he<<24|pe<<16|de|0,0!==oe;);for(ne=1<<me-1;Ie&ne;)ne>>=1;if(0!==ne?(Ie&=ne-1,Ie+=ne):Ie=0,ve++,0==--Xe[me]){if(me===ge)break;me=S[F+ae[ve]]}if(ye<me&&(Ie&le)!==ue){for(0===Fe&&(Fe=ye),ce+=ke,Pe=1<<(Se=me-Fe);Se+Fe<ge&&!((Pe-=Xe[Se+Fe])<=0);)Se++,Pe<<=1;if(we+=1<<Se,1===y&&852<we||2===y&&592<we)return 1;re[ue=Ie&le]=ye<<24|Se<<16|ce-ie|0}}return 0!==Ie&&(re[ce+Ie]=me-Fe<<24|64<<16|0),se.bits=ye,0}},{"../utils/common":41}],51:[function(y,S,F){S.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(y,S,F){var P=y("../utils/common");function i(y){for(var S=y.length;0<=--S;)y[S]=0}var H=0,J=256,Q=J+1+29,ee=30,te=19,re=2*Q+1,ie=15,ae=16,se=256,ne=16,oe=17,ue=18,le=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=new Array(2*(Q+2));i(pe);var de=new Array(2*ee);i(de);var be=new Array(512);i(be);var me=new Array(256);i(me);var ve=new Array(29);i(ve);var ke,ge,ye,Se=new Array(ee);function Y(y,S,F,P,H){this.static_tree=y,this.extra_bits=S,this.extra_base=F,this.elems=P,this.max_length=H,this.has_stree=y&&y.length}function s(y,S){this.dyn_tree=y,this.max_code=0,this.stat_desc=S}function M(y){return y<256?be[y]:be[256+(y>>>7)]}function L(y,S){y.pending_buf[y.pending++]=255&S,y.pending_buf[y.pending++]=S>>>8&255}function T(y,S,F){y.bi_valid>ae-F?(y.bi_buf|=S<<y.bi_valid&65535,L(y,y.bi_buf),y.bi_buf=S>>ae-y.bi_valid,y.bi_valid+=F-ae):(y.bi_buf|=S<<y.bi_valid&65535,y.bi_valid+=F)}function B(y,S,F){T(y,F[2*S],F[2*S+1])}function N(y,S){for(var F=0;F|=1&y,y>>>=1,F<<=1,0<--S;);return F>>>1}function q(y,S,F){var P,H,J=new Array(ie+1),Q=0;for(P=1;P<=ie;P++)J[P]=Q=Q+F[P-1]<<1;for(H=0;H<=S;H++){var ee=y[2*H+1];0!==ee&&(y[2*H]=N(J[ee]++,ee))}}function W(y){var S;for(S=0;S<Q;S++)y.dyn_ltree[2*S]=0;for(S=0;S<ee;S++)y.dyn_dtree[2*S]=0;for(S=0;S<te;S++)y.bl_tree[2*S]=0;y.dyn_ltree[2*se]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function R(y){8<y.bi_valid?L(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function D(y,S,F,P){var H=2*S,J=2*F;return y[H]<y[J]||y[H]===y[J]&&P[S]<=P[F]}function U(y,S,F){for(var P=y.heap[F],H=F<<1;H<=y.heap_len&&(H<y.heap_len&&D(S,y.heap[H+1],y.heap[H],y.depth)&&H++,!D(S,P,y.heap[H],y.depth));)y.heap[F]=y.heap[H],F=H,H<<=1;y.heap[F]=P}function K(y,S,F){var P,H,Q,ee,te=0;if(0!==y.last_lit)for(;P=y.pending_buf[y.d_buf+2*te]<<8|y.pending_buf[y.d_buf+2*te+1],H=y.pending_buf[y.l_buf+te],te++,0===P?B(y,H,S):(B(y,(Q=me[H])+J+1,S),0!==(ee=le[Q])&&T(y,H-=ve[Q],ee),B(y,Q=M(--P),F),0!==(ee=ce[Q])&&T(y,P-=Se[Q],ee)),te<y.last_lit;);B(y,se,S)}function E(y,S){var F,P,H,J=S.dyn_tree,Q=S.stat_desc.static_tree,ee=S.stat_desc.has_stree,te=S.stat_desc.elems,ae=-1;for(y.heap_len=0,y.heap_max=re,F=0;F<te;F++)0!==J[2*F]?(y.heap[++y.heap_len]=ae=F,y.depth[F]=0):J[2*F+1]=0;for(;y.heap_len<2;)J[2*(H=y.heap[++y.heap_len]=ae<2?++ae:0)]=1,y.depth[H]=0,y.opt_len--,ee&&(y.static_len-=Q[2*H+1]);for(S.max_code=ae,F=y.heap_len>>1;1<=F;F--)U(y,J,F);for(H=te;F=y.heap[1],y.heap[1]=y.heap[y.heap_len--],U(y,J,1),P=y.heap[1],y.heap[--y.heap_max]=F,y.heap[--y.heap_max]=P,J[2*H]=J[2*F]+J[2*P],y.depth[H]=(y.depth[F]>=y.depth[P]?y.depth[F]:y.depth[P])+1,J[2*F+1]=J[2*P+1]=H,y.heap[1]=H++,U(y,J,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],function(y,S){var F,P,H,J,Q,ee,te=S.dyn_tree,ae=S.max_code,se=S.stat_desc.static_tree,ne=S.stat_desc.has_stree,oe=S.stat_desc.extra_bits,ue=S.stat_desc.extra_base,le=S.stat_desc.max_length,ce=0;for(J=0;J<=ie;J++)y.bl_count[J]=0;for(te[2*y.heap[y.heap_max]+1]=0,F=y.heap_max+1;F<re;F++)le<(J=te[2*te[2*(P=y.heap[F])+1]+1]+1)&&(J=le,ce++),te[2*P+1]=J,ae<P||(y.bl_count[J]++,Q=0,ue<=P&&(Q=oe[P-ue]),ee=te[2*P],y.opt_len+=ee*(J+Q),ne&&(y.static_len+=ee*(se[2*P+1]+Q)));if(0!==ce){do{for(J=le-1;0===y.bl_count[J];)J--;y.bl_count[J]--,y.bl_count[J+1]+=2,y.bl_count[le]--,ce-=2}while(0<ce);for(J=le;0!==J;J--)for(P=y.bl_count[J];0!==P;)ae<(H=y.heap[--F])||(te[2*H+1]!==J&&(y.opt_len+=(J-te[2*H+1])*te[2*H],te[2*H+1]=J),P--)}}(y,S),q(J,ae,y.bl_count)}function z(y,S,F){var P,H,J=-1,Q=S[1],ee=0,te=7,re=4;for(0===Q&&(te=138,re=3),S[2*(F+1)+1]=65535,P=0;P<=F;P++)H=Q,Q=S[2*(P+1)+1],++ee<te&&H===Q||(ee<re?y.bl_tree[2*H]+=ee:0!==H?(H!==J&&y.bl_tree[2*H]++,y.bl_tree[2*ne]++):ee<=10?y.bl_tree[2*oe]++:y.bl_tree[2*ue]++,J=H,re=(ee=0)===Q?(te=138,3):H===Q?(te=6,3):(te=7,4))}function $(y,S,F){var P,H,J=-1,Q=S[1],ee=0,te=7,re=4;for(0===Q&&(te=138,re=3),P=0;P<=F;P++)if(H=Q,Q=S[2*(P+1)+1],!(++ee<te&&H===Q)){if(ee<re)for(;B(y,H,y.bl_tree),0!=--ee;);else 0!==H?(H!==J&&(B(y,H,y.bl_tree),ee--),B(y,ne,y.bl_tree),T(y,ee-3,2)):ee<=10?(B(y,oe,y.bl_tree),T(y,ee-3,3)):(B(y,ue,y.bl_tree),T(y,ee-11,7));J=H,re=(ee=0)===Q?(te=138,3):H===Q?(te=6,3):(te=7,4)}}i(Se);var Fe=!1;function G(y,S,F,J){var Q,ee,te;T(y,(H<<1)+(J?1:0),3),ee=S,te=F,R(Q=y),L(Q,te),L(Q,~te),P.arraySet(Q.pending_buf,Q.window,ee,te,Q.pending),Q.pending+=te}F._tr_init=function(y){Fe||(function(){var y,S,F,P,H,re=new Array(ie+1);for(P=F=0;P<28;P++)for(ve[P]=F,y=0;y<1<<le[P];y++)me[F++]=P;for(me[F-1]=P,P=H=0;P<16;P++)for(Se[P]=H,y=0;y<1<<ce[P];y++)be[H++]=P;for(H>>=7;P<ee;P++)for(Se[P]=H<<7,y=0;y<1<<ce[P]-7;y++)be[256+H++]=P;for(S=0;S<=ie;S++)re[S]=0;for(y=0;y<=143;)pe[2*y+1]=8,y++,re[8]++;for(;y<=255;)pe[2*y+1]=9,y++,re[9]++;for(;y<=279;)pe[2*y+1]=7,y++,re[7]++;for(;y<=287;)pe[2*y+1]=8,y++,re[8]++;for(q(pe,Q+1,re),y=0;y<ee;y++)de[2*y+1]=5,de[2*y]=N(y,5);ke=new Y(pe,le,J+1,Q,ie),ge=new Y(de,ce,0,ee,ie),ye=new Y(new Array(0),fe,0,te,7)}(),Fe=!0),y.l_desc=new s(y.dyn_ltree,ke),y.d_desc=new s(y.dyn_dtree,ge),y.bl_desc=new s(y.bl_tree,ye),y.bi_buf=0,y.bi_valid=0,W(y)},F._tr_stored_block=G,F._tr_flush_block=function(y,S,F,P){var H,Q,ee=0;0<y.level?(2===y.strm.data_type&&(y.strm.data_type=function(y){var S,F=4093624447;for(S=0;S<=31;S++,F>>>=1)if(1&F&&0!==y.dyn_ltree[2*S])return 0;if(0!==y.dyn_ltree[18]||0!==y.dyn_ltree[20]||0!==y.dyn_ltree[26])return 1;for(S=32;S<J;S++)if(0!==y.dyn_ltree[2*S])return 1;return 0}(y)),E(y,y.l_desc),E(y,y.d_desc),ee=function(y){var S;for(z(y,y.dyn_ltree,y.l_desc.max_code),z(y,y.dyn_dtree,y.d_desc.max_code),E(y,y.bl_desc),S=te-1;3<=S&&0===y.bl_tree[2*he[S]+1];S--);return y.opt_len+=3*(S+1)+5+5+4,S}(y),H=y.opt_len+3+7>>>3,(Q=y.static_len+3+7>>>3)<=H&&(H=Q)):H=Q=F+5,F+4<=H&&-1!==S?G(y,S,F,P):4===y.strategy||Q===H?(T(y,2+(P?1:0),3),K(y,pe,de)):(T(y,4+(P?1:0),3),function(y,S,F,P){var H;for(T(y,S-257,5),T(y,F-1,5),T(y,P-4,4),H=0;H<P;H++)T(y,y.bl_tree[2*he[H]+1],3);$(y,y.dyn_ltree,S-1),$(y,y.dyn_dtree,F-1)}(y,y.l_desc.max_code+1,y.d_desc.max_code+1,ee+1),K(y,y.dyn_ltree,y.dyn_dtree)),W(y),P&&R(y)},F._tr_tally=function(y,S,F){return y.pending_buf[y.d_buf+2*y.last_lit]=S>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&S,y.pending_buf[y.l_buf+y.last_lit]=255&F,y.last_lit++,0===S?y.dyn_ltree[2*F]++:(y.matches++,S--,y.dyn_ltree[2*(me[F]+J+1)]++,y.dyn_dtree[2*M(S)]++),y.last_lit===y.lit_bufsize-1},F._tr_align=function(y){var S;T(y,2,3),B(y,se,pe),16===(S=y).bi_valid?(L(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}},{"../utils/common":41}],53:[function(y,S,F){S.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[10])(10)})),function(y){if(!(void 0===y||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var S=y.document,u=function(){return y.URL||y.webkitURL||y},F=S.createElementNS("http://www.w3.org/1999/xhtml","a"),P="download"in F,H=/constructor/i.test(y.HTMLElement)||y.safari,J=/CriOS\/[\d]+/.test(navigator.userAgent),Q=y.setImmediate||y.setTimeout,d=function(y){Q((function(){throw y}),0)},b=function(y){setTimeout((function(){"string"==typeof y?u().revokeObjectURL(y):y.remove()}),4e4)},i=function(S,ee,te){function i(){!function(y,S,F){for(var P=(S=[].concat(S)).length;P--;){var H=y["on"+S[P]];if("function"==typeof H)try{H.call(y,y)}catch(y){d(y)}}}(ie,"writestart progress write writeend".split(" "))}te||(S=function(y){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob([String.fromCharCode(65279),y],{type:y.type}):y}(S));var re,ie=this,ae="application/octet-stream"===S.type;if(ie.readyState=ie.INIT,P)return re=u().createObjectURL(S),void Q((function(){var y,S;F.href=re,F.download=ee,y=F,S=new MouseEvent("click"),y.dispatchEvent(S),i(),b(re),ie.readyState=ie.DONE}),0);!function(){if((J||ae&&H)&&y.FileReader){var F=new FileReader;return F.onloadend=function(){var S=J?F.result:F.result.replace(/^data:[^;]*;/,"data:attachment/file;");y.open(S,"_blank")||(y.location.href=S),S=void 0,ie.readyState=ie.DONE,i()},F.readAsDataURL(S),ie.readyState=ie.INIT}re=re||u().createObjectURL(S),ae?y.location.href=re:y.open(re,"_blank")||(y.location.href=re),ie.readyState=ie.DONE,i(),b(re)}()},ee=i.prototype;if("undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob)return;ee.abort=function(){},ee.readyState=ee.INIT=0,ee.WRITING=1,ee.DONE=2,ee.error=ee.onwritestart=ee.onprogress=ee.onwrite=ee.onabort=ee.onerror=ee.onwriteend=null,y.FileSaver_saveAs=function(y,S,F){return new i(y,S||y.name||"download",F)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0),function(){var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(y){return function(S){return new Sha1(!0).update(S)[y]()}},createMethod=function(){var y=createOutputMethod("hex");NODE_JS&&(y=nodeWrap(y)),y.create=function(){return new Sha1},y.update=function(S){return y.create().update(S)};for(var S=0;S<OUTPUT_TYPES.length;++S){var F=OUTPUT_TYPES[S];y[F]=createOutputMethod(F)}return y},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(y){if("string"==typeof y)return crypto.createHash("sha1").update(y,"utf8").digest("hex");if(y.constructor===ArrayBuffer)y=new Uint8Array(y);else if(void 0===y.length)return method(y);return crypto.createHash("sha1").update(new Buffer(y)).digest("hex")};return nodeMethod};function Sha1(y){y?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(y){if(!this.finalized){var S="string"!=typeof y;S&&y.constructor===root.ArrayBuffer&&(y=new Uint8Array(y));for(var F,P,H=0,J=y.length||0,Q=this.blocks;H<J;){if(this.hashed&&(this.hashed=!1,Q[0]=this.block,Q[16]=Q[1]=Q[2]=Q[3]=Q[4]=Q[5]=Q[6]=Q[7]=Q[8]=Q[9]=Q[10]=Q[11]=Q[12]=Q[13]=Q[14]=Q[15]=0),S)for(P=this.start;H<J&&P<64;++H)Q[P>>2]|=y[H]<<SHIFT[3&P++];else for(P=this.start;H<J&&P<64;++H)(F=y.charCodeAt(H))<128?Q[P>>2]|=F<<SHIFT[3&P++]:(F<2048?Q[P>>2]|=(192|F>>6)<<SHIFT[3&P++]:(F<55296||57344<=F?Q[P>>2]|=(224|F>>12)<<SHIFT[3&P++]:(F=65536+((1023&F)<<10|1023&y.charCodeAt(++H)),Q[P>>2]|=(240|F>>18)<<SHIFT[3&P++],Q[P>>2]|=(128|F>>12&63)<<SHIFT[3&P++]),Q[P>>2]|=(128|F>>6&63)<<SHIFT[3&P++]),Q[P>>2]|=(128|63&F)<<SHIFT[3&P++]);this.lastByteIndex=P,this.bytes+=P-this.start,64<=P?(this.block=Q[16],this.start=P-64,this.hash(),this.hashed=!0):this.start=P}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var y=this.blocks,S=this.lastByteIndex;y[16]=this.block,y[S>>2]|=EXTRA[3&S],this.block=y[16],56<=S&&(this.hashed||this.hash(),y[0]=this.block,y[16]=y[1]=y[2]=y[3]=y[4]=y[5]=y[6]=y[7]=y[8]=y[9]=y[10]=y[11]=y[12]=y[13]=y[14]=y[15]=0),y[14]=this.hBytes<<3|this.bytes>>>29,y[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var y,S,F=this.h0,P=this.h1,H=this.h2,J=this.h3,Q=this.h4,ee=this.blocks;for(y=16;y<80;++y)S=ee[y-3]^ee[y-8]^ee[y-14]^ee[y-16],ee[y]=S<<1|S>>>31;for(y=0;y<20;y+=5)F=(S=(P=(S=(H=(S=(J=(S=(Q=(S=F<<5|F>>>27)+(P&H|~P&J)+Q+1518500249+ee[y]<<0)<<5|Q>>>27)+(F&(P=P<<30|P>>>2)|~F&H)+J+1518500249+ee[y+1]<<0)<<5|J>>>27)+(Q&(F=F<<30|F>>>2)|~Q&P)+H+1518500249+ee[y+2]<<0)<<5|H>>>27)+(J&(Q=Q<<30|Q>>>2)|~J&F)+P+1518500249+ee[y+3]<<0)<<5|P>>>27)+(H&(J=J<<30|J>>>2)|~H&Q)+F+1518500249+ee[y+4]<<0,H=H<<30|H>>>2;for(;y<40;y+=5)F=(S=(P=(S=(H=(S=(J=(S=(Q=(S=F<<5|F>>>27)+(P^H^J)+Q+1859775393+ee[y]<<0)<<5|Q>>>27)+(F^(P=P<<30|P>>>2)^H)+J+1859775393+ee[y+1]<<0)<<5|J>>>27)+(Q^(F=F<<30|F>>>2)^P)+H+1859775393+ee[y+2]<<0)<<5|H>>>27)+(J^(Q=Q<<30|Q>>>2)^F)+P+1859775393+ee[y+3]<<0)<<5|P>>>27)+(H^(J=J<<30|J>>>2)^Q)+F+1859775393+ee[y+4]<<0,H=H<<30|H>>>2;for(;y<60;y+=5)F=(S=(P=(S=(H=(S=(J=(S=(Q=(S=F<<5|F>>>27)+(P&H|P&J|H&J)+Q-1894007588+ee[y]<<0)<<5|Q>>>27)+(F&(P=P<<30|P>>>2)|F&H|P&H)+J-1894007588+ee[y+1]<<0)<<5|J>>>27)+(Q&(F=F<<30|F>>>2)|Q&P|F&P)+H-1894007588+ee[y+2]<<0)<<5|H>>>27)+(J&(Q=Q<<30|Q>>>2)|J&F|Q&F)+P-1894007588+ee[y+3]<<0)<<5|P>>>27)+(H&(J=J<<30|J>>>2)|H&Q|J&Q)+F-1894007588+ee[y+4]<<0,H=H<<30|H>>>2;for(;y<80;y+=5)F=(S=(P=(S=(H=(S=(J=(S=(Q=(S=F<<5|F>>>27)+(P^H^J)+Q-899497514+ee[y]<<0)<<5|Q>>>27)+(F^(P=P<<30|P>>>2)^H)+J-899497514+ee[y+1]<<0)<<5|J>>>27)+(Q^(F=F<<30|F>>>2)^P)+H-899497514+ee[y+2]<<0)<<5|H>>>27)+(J^(Q=Q<<30|Q>>>2)^F)+P-899497514+ee[y+3]<<0)<<5|P>>>27)+(H^(J=J<<30|J>>>2)^Q)+F-899497514+ee[y+4]<<0,H=H<<30|H>>>2;this.h0=this.h0+F<<0,this.h1=this.h1+P<<0,this.h2=this.h2+H<<0,this.h3=this.h3+J<<0,this.h4=this.h4+Q<<0},Sha1.prototype.hex=function(){this.finalize();var y=this.h0,S=this.h1,F=this.h2,P=this.h3,H=this.h4;return HEX_CHARS[y>>28&15]+HEX_CHARS[y>>24&15]+HEX_CHARS[y>>20&15]+HEX_CHARS[y>>16&15]+HEX_CHARS[y>>12&15]+HEX_CHARS[y>>8&15]+HEX_CHARS[y>>4&15]+HEX_CHARS[15&y]+HEX_CHARS[S>>28&15]+HEX_CHARS[S>>24&15]+HEX_CHARS[S>>20&15]+HEX_CHARS[S>>16&15]+HEX_CHARS[S>>12&15]+HEX_CHARS[S>>8&15]+HEX_CHARS[S>>4&15]+HEX_CHARS[15&S]+HEX_CHARS[F>>28&15]+HEX_CHARS[F>>24&15]+HEX_CHARS[F>>20&15]+HEX_CHARS[F>>16&15]+HEX_CHARS[F>>12&15]+HEX_CHARS[F>>8&15]+HEX_CHARS[F>>4&15]+HEX_CHARS[15&F]+HEX_CHARS[P>>28&15]+HEX_CHARS[P>>24&15]+HEX_CHARS[P>>20&15]+HEX_CHARS[P>>16&15]+HEX_CHARS[P>>12&15]+HEX_CHARS[P>>8&15]+HEX_CHARS[P>>4&15]+HEX_CHARS[15&P]+HEX_CHARS[H>>28&15]+HEX_CHARS[H>>24&15]+HEX_CHARS[H>>20&15]+HEX_CHARS[H>>16&15]+HEX_CHARS[H>>12&15]+HEX_CHARS[H>>8&15]+HEX_CHARS[H>>4&15]+HEX_CHARS[15&H]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var y=this.h0,S=this.h1,F=this.h2,P=this.h3,H=this.h4;return[y>>24&255,y>>16&255,y>>8&255,255&y,S>>24&255,S>>16&255,S>>8&255,255&S,F>>24&255,F>>16&255,F>>8&255,255&F,P>>24&255,P>>16&255,P>>8&255,255&P,H>>24&255,H>>16&255,H>>8&255,255&H]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var y=new ArrayBuffer(20),S=new DataView(y);return S.setUint32(0,this.h0),S.setUint32(4,this.h1),S.setUint32(8,this.h2),S.setUint32(12,this.h3),S.setUint32(16,this.h4),y};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&define((function(){return exports})))}(),Object.extend(Squeak,{vmPath:"/",platformSubtype:"Browser",osVersion:navigator.userAgent,windowSystem:"HTML"}),window.SqueakJS={};var canUseMouseOffset=navigator.userAgent.match("AppleWebKit/");function updateMousePos(y,S,F){var P=canUseMouseOffset?y.offsetX:y.layerX,H=canUseMouseOffset?y.offsetY:y.layerY;F.cursorCanvas&&(F.cursorCanvas.style.left=P+S.offsetLeft+F.cursorOffsetX+"px",F.cursorCanvas.style.top=H+S.offsetTop+F.cursorOffsetY+"px");var J=P*S.width/S.offsetWidth|0,Q=H*S.height/S.offsetHeight|0;F.mouseX=Math.max(0,Math.min(F.width,J)),F.mouseY=Math.max(0,Math.min(F.height,Q))}function recordMouseEvent(y,S,F,P,H,J){if(updateMousePos(S,F,P),P.vm){var Q=P.buttons&Squeak.Mouse_All;switch(y){case"mousedown":switch(S.button||0){case 0:Q=Squeak.Mouse_Red;break;case 1:Q=Squeak.Mouse_Yellow;break;case 2:Q=Squeak.Mouse_Blue}J.swapButtons&&(Q==Squeak.Mouse_Yellow?Q=Squeak.Mouse_Blue:Q==Squeak.Mouse_Blue&&(Q=Squeak.Mouse_Yellow));break;case"mousemove":break;case"mouseup":Q=0}P.buttons=Q|recordModifiers(S,P),H&&(H.push([Squeak.EventTypeMouse,S.timeStamp,P.mouseX,P.mouseY,P.buttons&Squeak.Mouse_All,P.buttons>>3]),P.signalInputEvent&&P.signalInputEvent()),P.idle=0,"mouseup"==y?P.runFor&&P.runFor(100):P.runNow&&P.runNow()}}function recordKeyboardEvent(y,S,F,P){if(F.vm){var H=F.buttons>>3<<8|y;H===F.vm.interruptKeycode?F.vm.interruptPending=!0:P?(P.push([Squeak.EventTypeKeyboard,S,y,Squeak.EventKeyChar,F.buttons>>3,y]),F.signalInputEvent&&F.signalInputEvent()):F.keys.push(H),F.idle=0,F.runNow&&F.runNow()}}function recordDragDropEvent(y,S,F,P,H){P.vm&&H&&(updateMousePos(S,F,P),H.push([Squeak.EventTypeDragDropFiles,S.timeStamp,y,P.mouseX,P.mouseY,P.buttons>>3,P.droppedFiles.length]),P.signalInputEvent&&P.signalInputEvent())}function fakeCmdOrCtrlKey(y,S,F,P){F.buttons&=~Squeak.Keyboard_All,F.buttons|=Squeak.Keyboard_Cmd|Squeak.Keyboard_Ctrl,F.keys=[],recordKeyboardEvent(y,S,F,P)}function makeSqueakEvent(y,S,F){S[0]=y[0],S[1]=y[1]-F&Squeak.MillisecondClockMask;for(var P=2;P<y.length;P++)S[P]=y[P]}function createSqueakDisplay(y,S){(S=S||{}).fullscreen&&(document.body.style.margin=0,document.body.style.backgroundColor="black",document.ontouchmove=function(y){y.preventDefault()},S.header&&(S.header.style.display="none"),S.footer&&(S.footer.style.display="none"));var F={context:y.getContext("2d"),fullscreen:!1,width:0,height:0,mouseX:0,mouseY:0,buttons:0,keys:[],clipboardString:"",clipboardStringChanged:!1,cursorCanvas:!1!==S.cursor&&document.createElement("canvas"),cursorOffsetX:0,cursorOffsetY:0,droppedFiles:[],signalInputEvent:null};setupSwapButtons(S),S.pixelated&&(y.classList.add("pixelated"),F.cursorCanvas&&F.cursorCanvas.classList.add("pixelated"));var P=null;F.reset=function(){P=null,F.signalInputEvent=null,F.lastTick=0,F.getNextEvent=function(y,S){(P=[]).push=function(y){P.offset=Date.now()-y[1],delete P.push,P.push(y)},F.getNextEvent=function(y,S){var F=P.shift();F?makeSqueakEvent(F,y,S-P.offset):y[0]=Squeak.EventTypeNone},F.getNextEvent(y,S)}},F.reset();var H=setupFullscreen(F,y,S);F.fullscreenRequest=function(y,S){F.fullscreen!=y?(F.fullscreen=y,F.resizeTodo=S,F.resizeTodoTimeout=setTimeout(F.resizeDone,1e3),H()):S()},F.resizeDone=function(){clearTimeout(F.resizeTodoTimeout);var y=F.resizeTodo;y&&(F.resizeTodo=null,y())},F.clear=function(){y.width=y.width},F.showBanner=function(S,P){P=P||{};var H=F.context;H.clearRect(0,0,y.width,y.height),H.fillStyle=P.color||"#F90",H.font=P.font||"bold 48px sans-serif",!P.font&&H.measureText(S).width>y.width&&(H.font="bold 24px sans-serif"),H.textAlign="center",H.textBaseline="middle",H.fillText(S,y.width/2,y.height/2)},F.showProgress=function(S,P){P=P||{};var H=F.context,J=y.width/3|0,Q=.5*y.width-J/2,ee=.5*y.height+48;H.fillStyle=P.background||"#000",H.fillRect(Q,ee,J,24),H.lineWidth=2,H.strokeStyle=P.color||"#F90",H.strokeRect(Q,ee,J,24),H.fillStyle=P.color||"#F90",H.fillRect(Q,ee,J*S,24)},F.executeClipboardPaste=function(y,S){if(!F.vm)return!0;try{F.clipboardString=y,fakeCmdOrCtrlKey("v".charCodeAt(0),S,F,P)}catch(y){console.error("paste error "+y)}},F.executeClipboardCopy=function(y,S){if(!F.vm)return!0;F.clipboardStringChanged=!1,fakeCmdOrCtrlKey((y||"c").charCodeAt(0),S,F,P);for(var H=Date.now();!F.clipboardStringChanged&&Date.now()-H<500;)F.vm.interpret(20);if(F.clipboardStringChanged)try{return F.clipboardString}catch(y){console.error("copy error "+y)}},y.onmousedown=function(J){return H(),recordMouseEvent("mousedown",J,y,F,P,S),J.preventDefault(),!1},y.onmouseup=function(J){recordMouseEvent("mouseup",J,y,F,P,S),H(),J.preventDefault()},y.onmousemove=function(H){recordMouseEvent("mousemove",H,y,F,P,S),H.preventDefault()},y.oncontextmenu=function(){return!1};var J={state:"idle",button:0,x:0,y:0,dist:0,down:{}};function l(S){if(S.touches.length){J.x=J.y=0;for(var F=0;F<S.touches.length;F++)J.x+=S.touches[F].pageX/S.touches.length,J.y+=S.touches[F].pageY/S.touches.length}return{timeStamp:S.timeStamp,button:J.button,offsetX:J.x-y.offsetLeft,offsetY:J.y-y.offsetTop}}function a(y,S,F,P){var H=y-F,J=S-P;return Math.sqrt(H*H+J*J)}function c(y,S){return a(y.pageX,y.pageY,S.pageX,S.pageY)}function f(P,H,J,Q){var ee=F.cursorCanvas,te=J/y.width;if(y.style.left=(0|P)+"px",y.style.top=(0|H)+"px",y.style.width=(0|J)+"px",y.style.height=(0|Q)+"px",ee&&(ee.style.left=(P+F.cursorOffsetX+F.mouseX*te|0)+"px",ee.style.top=(H+F.cursorOffsetY+F.mouseY*te|0)+"px",ee.style.width=(ee.width*te|0)+"px",ee.style.height=(ee.height*te|0)+"px"),!S.pixelated){var re=window.devicePixelRatio*te;re%1==0||5<re?(y.classList.add("pixelated"),ee&&ee.classList.add("pixelated")):(y.classList.remove("pixelated"),ee&&F.cursorCanvas.classList.remove("pixelated"))}return te}if(y.ontouchstart=function(H){H.preventDefault();for(var Q,ee=l(H),te=0;te<H.changedTouches.length;te++)switch(J.state){case"idle":J.state="got1stFinger",J.first=ee,setTimeout((function(){"got1stFinger"===J.state&&(J.state="mousing",J.button=ee.button=0,recordMouseEvent("mousemove",ee,y,F,P,S),recordMouseEvent("mousedown",ee,y,F,P,S))}),100);break;case"got1stFinger":J.state="got2ndFinger",Q=H,J.dist=c(Q.touches[0],Q.touches[1]),J.down.x=J.x,J.down.y=J.y,J.down.dist=J.dist,J.down.left=y.offsetLeft,J.down.top=y.offsetTop,J.down.width=y.offsetWidth,J.down.height=y.offsetHeight,J.orig||(J.orig={left:J.down.left,top:J.down.top,right:J.down.left+J.down.width,bottom:J.down.top+J.down.height,width:J.down.width,height:J.down.height}),setTimeout((function(){"got2ndFinger"===J.state&&(10<Math.abs(J.down.dist-J.dist)||10<a(J.down.x,J.down.y,J.x,J.y)?J.state="zooming":(J.state="mousing",J.button=ee.button=2,recordMouseEvent("mousemove",ee,y,F,P,S),recordMouseEvent("mousedown",ee,y,F,P,S)))}),200)}},y.ontouchmove=function(H){H.preventDefault();var Q=l(H);switch(J.state){case"got1stFinger":J.state="mousing",J.button=Q.button=0,recordMouseEvent("mousemove",Q,y,F,P,S),recordMouseEvent("mousedown",Q,y,F,P,S);break;case"mousing":return void recordMouseEvent("mousemove",Q,y,F,P,S);case"got2ndFinger":return void(1<H.touches.length&&(J.dist=c(H.touches[0],H.touches[1])));case"zooming":return void function(y){if(!(y.touches.length<2)){J.dist=c(y.touches[0],y.touches[1]);var S=J.orig.width/J.down.width,F=J.dist/J.down.dist,P=Math.min(Math.max(F,.95*S),5*S),H=J.down.width*P,Q=J.orig.height*H/J.orig.width,ee=J.down.left-(J.down.x-J.down.left)*(P-1)+(J.x-J.down.x),te=J.down.top-(J.down.y-J.down.top)*(P-1)+(J.y-J.down.y);f(ee=Math.max(Math.min(ee,J.orig.left+20),J.orig.right-H-20),te=Math.max(Math.min(te,J.orig.top+20),J.orig.bottom-Q-20),H,Q)}}(H)}},y.ontouchend=function(Q){Q.preventDefault(),H();for(var ee,te,re,ie,ae=l(Q),se=0;se<Q.changedTouches.length;se++)switch(J.state){case"mousing":if(0<Q.touches.length)break;return J.state="idle",void recordMouseEvent("mouseup",ae,y,F,P,S);case"got1stFinger":return J.state="idle",J.button=ae.button=0,recordMouseEvent("mousemove",ae,y,F,P,S),recordMouseEvent("mousedown",ae,y,F,P,S),void recordMouseEvent("mouseup",ae,y,F,P,S);case"got2ndFinger":J.state="mousing",J.button=ae.button=2,recordMouseEvent("mousemove",ae,y,F,P,S),recordMouseEvent("mousedown",ae,y,F,P,S);break;case"zooming":if(0<Q.touches.length)break;return J.state="idle",re=te=ee=void 0,ee=y.offsetLeft,te=y.offsetTop,re=y.offsetWidth,y.offsetHeight,re=Math.min(Math.max(re,J.orig.width),5*J.orig.width),ie=J.orig.height*re/J.orig.width,void(f(ee=Math.max(Math.min(ee,J.orig.left),J.orig.right-re),te=Math.max(Math.min(te,J.orig.top),J.orig.bottom-ie),re,ie)-F.initialScale<1e-4&&(J.orig=null,window.onresize()))}},y.ontouchcancel=function(S){y.ontouchend(S)},F.cursorCanvas){var Q="absolute"===window.getComputedStyle(y).position;F.cursorCanvas.style.display="block",F.cursorCanvas.style.position=Q?"absolute":"fixed",F.cursorCanvas.style.cursor="none",F.cursorCanvas.style.background="transparent",F.cursorCanvas.style.pointerEvents="none",y.parentElement.appendChild(F.cursorCanvas),y.style.cursor="none"}if(document.onkeypress=function(y){return!F.vm||!!/[CXVR]/.test(String.fromCharCode(y.charCode+64))||(recordModifiers(y,F),recordKeyboardEvent(y.charCode,y.timeStamp,F,P),void y.preventDefault())},document.onkeydown=function(y){if(H(),!F.vm)return!0;recordModifiers(y,F);var S={8:8,9:9,13:13,27:27,32:32,33:11,34:12,35:4,36:1,37:28,38:30,39:29,40:31,45:5,46:127}[y.keyCode];if(S)return recordKeyboardEvent(S,y.timeStamp,F,P),y.preventDefault();if(y.metaKey||y.altKey&&!y.ctrlKey){var J=y.key;if(!J&&y.keyIdentifier&&"U+"==y.keyIdentifier.slice(0,2)&&(J=String.fromCharCode(parseInt(y.keyIdentifier.slice(2),16))),J&&1==J.length){if(/[CXVR]/i.test(J))return!0;var Q=J.charCodeAt(0);return/[A-Z]/.test(J)&&!y.shiftKey&&(Q+=32),recordKeyboardEvent(Q,y.timeStamp,F,P),y.preventDefault()}}},document.onkeyup=function(y){if(!F.vm)return!0;recordModifiers(y,F)},document.oncopy=function(y,S){var P=F.executeClipboardCopy(S,y.timeStamp);"string"==typeof P&&y.clipboardData.setData("Text",P),y.preventDefault()},document.oncut=function(y){if(!F.vm)return!0;document.oncopy(y,"x")},document.onpaste=function(y){var S=y.clipboardData.getData("Text");F.executeClipboardPaste(S,y.timeStamp),y.preventDefault()},"ontouchstart"in document){var ee=document.createElement("div");ee.innerHTML='<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg width="50px" height="50px" viewBox="0 0 150 150" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="Page-1" stroke="none" fill="#000000"><rect x="33" y="105" width="10" height="10" rx="1"></rect><rect x="26" y="60" width="10" height="10" rx="1"></rect><rect x="41" y="60" width="10" height="10" rx="1"></rect><rect x="56" y="60" width="10" height="10" rx="1"></rect><rect x="71" y="60" width="10" height="10" rx="1"></rect><rect x="86" y="60" width="10" height="10" rx="1"></rect><rect x="101" y="60" width="10" height="10" rx="1"></rect><rect x="116" y="60" width="10" height="10" rx="1"></rect><rect x="108" y="105" width="10" height="10" rx="1"></rect><rect x="33" y="75" width="10" height="10" rx="1"></rect><rect x="48" y="75" width="10" height="10" rx="1"></rect><rect x="63" y="75" width="10" height="10" rx="1"></rect><rect x="78" y="75" width="10" height="10" rx="1"></rect><rect x="93" y="75" width="10" height="10" rx="1"></rect><rect x="108" y="75" width="10" height="10" rx="1"></rect><rect x="41" y="90" width="10" height="10" rx="1"></rect><rect x="26" y="90" width="10" height="10" rx="1"></rect><rect x="56" y="90" width="10" height="10" rx="1"></rect><rect x="71" y="90" width="10" height="10" rx="1"></rect><rect x="86" y="90" width="10" height="10" rx="1"></rect><rect x="101" y="90" width="10" height="10" rx="1"></rect><rect x="116" y="90" width="10" height="10" rx="1"></rect><rect x="48" y="105" width="55" height="10" rx="1"></rect><path d="M20.0056004,51 C18.3456532,51 17.0000001,52.3496496 17.0000001,54.0038284 L17.0000001,85.6824519 L17,120.003453 C17.0000001,121.6584 18.3455253,123 20.0056004,123 L131.9944,123 C133.654347,123 135,121.657592 135,119.997916 L135,54.0020839 C135,52.3440787 133.654475,51 131.9944,51 L20.0056004,51 Z" fill="none" stroke="#000000" stroke-width="2"></path><path d="M52.0410156,36.6054687 L75.5449219,21.6503905 L102.666016,36.6054687" id="Line" stroke="#000000" stroke-width="3" stroke-linecap="round" fill="none"></path></g></svg>',ee.setAttribute("style","position:fixed;right:0;bottom:0;background-color:rgba(128,128,128,0.5);border-radius:5px"),y.parentElement.appendChild(ee),ee.onmousedown=function(S){y.contentEditable=!0,y.setAttribute("autocomplete","off"),y.setAttribute("autocorrect","off"),y.setAttribute("autocapitalize","off"),y.setAttribute("spellcheck","off"),y.focus(),S.preventDefault()},ee.ontouchstart=ee.onmousedown}function p(y){for(var S=0;S<y.dataTransfer.types.length;S++)if("Files"==y.dataTransfer.types[S])return 1}return document.ondragover=function(S){S.preventDefault(),p(S)?(S.dataTransfer.dropEffect="copy",recordDragDropEvent(Squeak.EventDragMove,S,y,F,P)):S.dataTransfer.dropEffect="none"},document.ondragenter=function(S){p(S)&&recordDragDropEvent(Squeak.EventDragEnter,S,y,F,P)},document.ondragleave=function(S){p(S)&&recordDragDropEvent(Squeak.EventDragLeave,S,y,F,P)},document.ondrop=function(H){if(H.preventDefault(),!p(H))return!1;var J,Q=[].slice.call(H.dataTransfer.files),ee=[],te=null;return F.droppedFiles=[],Q.forEach((function(re){F.droppedFiles.push(re.name);var ie=new FileReader;ie.onload=function(){var ie=this.result;Squeak.filePut(re.name,ie),ee.push(re.name),J||!/.*image$/.test(re.name)||F.vm&&!confirm("Run "+re.name+" now?\n(cancel to use as file)")||(J=ie,te=re.name),ee.length==Q.length&&(J?(SqueakJS.appName=te.slice(0,-6),SqueakJS.runImage(J,te,F,S)):recordDragDropEvent(Squeak.EventDragDrop,H,y,F,P))},ie.readAsArrayBuffer(re)})),!1},window.onresize=function(){if(!J.orig){var P=window.innerWidth,H=window.innerHeight;if(setTimeout((function(){P==window.innerWidth&&H==window.innerHeight&&F.resizeDone()}),300),!(S.header&&S.footer||S.fullscreen))return F.width=y.width,void(F.height=y.height);var Q=S.fullscreen||F.fullscreen,ee=Q?0:S.header.offsetTop+S.header.offsetHeight,te=window.innerWidth,re=Q?window.innerHeight:Math.max(100,S.footer.offsetTop-ee),ie=0,ae=0;if(S.fixedWidth){F.width=S.fixedWidth,F.height=S.fixedHeight;var se=F.width/F.height;se<te/re?ie=te-Math.floor(re*se):ae=re-Math.floor(te/se),F.initialScale=(te-ie)/F.width}else{S.minWidth||(S.minWidth=700),S.minHeight||(S.minHeight=700);var ne=te<S.minWidth?S.minWidth/te:1,oe=re<S.minHeight?S.minHeight/re:1,ue=Math.max(ne,oe);S.highdpi&&(ue*=window.devicePixelRatio),F.width=Math.floor(te*ue),F.height=Math.floor(re*ue),F.initialScale=te/F.width}if(y.style.left=0+Math.floor(ie/2)+"px",y.style.top=ee+Math.floor(ae/2)+"px",y.style.width=te-ie+"px",y.style.height=re-ae+"px",y.width!=F.width||y.height!=F.height){var le=(S.fixedWidth||!F.resizeTodo)&&F.context.getImageData(0,0,y.width,y.height);y.width=F.width,y.height=F.height,le&&F.context.putImageData(le,0,0)}var ce=F.cursorCanvas;if(ue=y.offsetWidth/y.width,ce&&S.fixedWidth&&(ce.style.width=ce.width*ue+"px",ce.style.height=ce.height*ue+"px"),!S.pixelated){var fe=window.devicePixelRatio*ue;fe%1==0||5<fe?(y.classList.add("pixelated"),ce&&ce.classList.add("pixelated")):(y.classList.remove("pixelated"),ce&&F.cursorCanvas.classList.remove("pixelated"))}}},window.onresize(),F}function setupSpinner(y,S){var F=S.spinner;return F?(F.onmousedown=function(S){confirm(SqueakJS.appName+" is busy. Interrupt?")&&(y.interruptPending=!0)},F.style):null}var spinnerAngle=0,becameBusy=0,loop;function updateSpinner(y,S,F,P){var H=0===S,J=F.lastTick-P.lastTick<500;!H||J?(y.display="none",becameBusy=0):0===becameBusy?becameBusy=F.lastTick:1e3<F.lastTick-becameBusy&&(y.display="block",spinnerAngle=(spinnerAngle+30)%360,y.webkitTransform=y.transform="rotate("+spinnerAngle+"deg)")}function processOptions(y){var S=(location.hash||location.search).slice(1),F=S&&S.split("&");if(F)for(var P=0;P<F.length;P++){var H=F[P].split("="),J=H[0],Q=!0;if(1<H.length&&(Q=decodeURIComponent(H.slice(1).join("="))).match(/^(true|false|null|[0-9"[{].*)$/))try{Q=JSON.parse(Q)}catch(y){"["===Q[0]&&(Q=Q.slice(1,-1).split(","))}y[J]=Q}var ee=Squeak.splitFilePath(y.root||"/").fullname;Squeak.dirCreate(ee,!0),/\/$/.test(ee)||(ee+="/"),y.root=ee,SqueakJS.options=y}function fetchTemplates(y){if(y.templates){if(y.templates.constructor===Array){var S={};y.templates.forEach((function(y){S[y]=y})),y.templates=S}for(var F in y.templates){var P="/"==F[0]?F:y.root+F,H=Squeak.splitUrl(y.templates[F],y.url).full;Squeak.fetchTemplateDir(P,H)}}}function processFile(y,S,F,P){Squeak.filePut(F.root+y.name,y.data,(function(){console.log("Stored "+F.root+y.name),y.zip?processZip(y,S,F,P):P()}))}function processZip(y,S,F,P){JSZip().loadAsync(y.data).then((function(H){var J=[];if(H.forEach((function(H){if(!F.image.name&&H.match(/\.image$/)&&(F.image.name=H),F.forceDownload||!Squeak.fileExists(F.root+H))J.push(H);else if(F.image.name===H){var Q=P;P=function(){Squeak.fileGet(F.root+H,(function(y){return F.image.data=y,Q()}),(function(){return Squeak.fileDelete(F.root+y.name),processZip(y,S,F,Q)}))}}})),0===J.length)return P();var Q=0;S.showBanner("Unzipping "+y.name),S.showProgress(0),J.forEach((function(ee){console.log("Inflating "+y.name+": "+ee),H.file(ee).async("arraybuffer",(function(y){S.showProgress((y.percent/100+Q)/J.length)})).then((function(y){console.log("Expanded size of "+ee+": "+y.byteLength);var H={};F.image.name===ee&&(H=F.image),H.name=ee,H.data=y,processFile(H,S,F,(function(){++Q===J.length&&P()}))}))}))}))}function checkExisting(y,S,F,P,H){if(!Squeak.fileExists(F.root+y.name))return H();y.image||y.zip?Squeak.fileGet(F.root+y.name,(function(H){y.data=H,y.zip?processZip(y,S,F,P):P()}),(function(){return Squeak.fileDelete(F.root+y.name),H()})):P()}function downloadFile(y,S,F,P){S.showBanner("Downloading "+y.name);var H=new XMLHttpRequest,J=F.proxy||"";H.open("GET",J+y.url),F.ajax&&H.setRequestHeader("X-Requested-With","XMLHttpRequest"),H.responseType="arraybuffer",H.onprogress=function(y){y.lengthComputable&&S.showProgress(y.loaded/y.total)},H.onload=function(H){200==this.status?(y.data=this.response,processFile(y,S,F,P)):this.onerror(this.statusText)},H.onerror=function(S){if(F.proxy)return console.error(Squeak.bytesAsString(new Uint8Array(this.response))),alert("Failed to download:\n"+y.url);console.warn("Retrying with CORS proxy: "+y.url);var P=new XMLHttpRequest;P.open("GET","https://corsproxy.io/?"+y.url),F.ajax&&P.setRequestHeader("X-Requested-With","XMLHttpRequest"),P.responseType=H.responseType,P.onprogress=H.onprogress,P.onload=H.onload,P.onerror=function(){console.error(Squeak.bytesAsString(new Uint8Array(this.response))),alert("Failed to download:\n"+y.url)},P.send()},H.send()}function fetchFiles(y,S,F,P){!function e(){if(0===y.length)return P();var H=y.shift();F.forceDownload||H.forceDownload?downloadFile(H,S,F,e):checkExisting(H,S,F,(function(){e()}),(function(){downloadFile(H,S,F,e)}))}()}SqueakJS.runImage=function(y,S,F,P){window.onbeforeunload=function(y){var S=SqueakJS.appName+" is still running";return y.returnValue=S},window.clearTimeout(loop),F.reset(),F.clear(),F.showBanner("Loading "+SqueakJS.appName),F.showProgress(0);var H=this;window.setTimeout((function(){var J=new Squeak.Image(S);J.readFromBuffer(y,(function(){F.quitFlag=!1;var y=new Squeak.Interpreter(J,F);SqueakJS.vm=y,Squeak.Settings.squeakImageName=S,setupSwapButtons(P),F.clear(),F.showBanner("Starting "+SqueakJS.appName);var Q=setupSpinner(y,P);function i(){try{F.quitFlag?H.onQuit(y,F,P):y.interpret(50,(function(S){"sleep"==S&&(S=200),Q&&updateSpinner(Q,S,y,F),loop=window.setTimeout(i,S)}))}catch(y){console.error(y),alert(y)}}F.runNow=function(){window.clearTimeout(loop),i()},F.runFor=function(y){var S=Date.now()+y;do{if(F.quitFlag)return;F.runNow()}while(Date.now()<S)},i()}),(function(y){F.showProgress(y)}))}),0)},SqueakJS.runSqueak=function(y,S,F){processOptions(F),!y&&F.image&&(y=F.image);var P=F.url||y&&y.replace(/[^\/]*$/,"")||"";"/"===(F.url=P)[0]&&"/"!==P[1]&&1<P.length&&"/"===F.root&&(F.root=P),fetchTemplates(F);var H=createSqueakDisplay(S,F),J={url:null,name:null,image:!0,data:null},Q=[];if(H.argv=F.argv,y){var ee=Squeak.splitUrl(y,P);J.url=ee.full,J.name=ee.filename}return F.files&&F.files.forEach((function(y){var S=Squeak.splitUrl(y,P);J.name===S.filename||(!J.url&&y.match(/\.image$/)?(J.name=S.filename,J.url=S.full):Q.push({url:S.full,name:S.filename}))})),F.zip&&("string"==typeof F.zip?[F.zip]:F.zip).forEach((function(y){var S=Squeak.splitUrl(y,P);Q.push({url:S.full,name:S.filename,zip:!0})})),J.url&&Q.push(J),F.document&&(ee=Squeak.splitUrl(F.document,P),Q.push({url:ee.full,name:ee.filename,forceDownload:!1!==F.forceDownload}),H.documentName=F.root+ee.filename),F.image=J,fetchFiles(Q,H,F,(function(){Squeak.fsck();var y=F.image;return y.name?y.data?(SqueakJS.appName=F.appName||y.name.replace(/\.image$/,""),void SqueakJS.runImage(y.data,F.root+y.name,H,F)):alert("could not find image "+y.name):alert("could not find an image")})),H},SqueakJS.quitSqueak=function(){SqueakJS.vm.quitFlag=!0},SqueakJS.onQuit=function(y,S,F){window.onbeforeunload=null,S.vm=null,F.spinner&&(F.spinner.style.display="none"),F.onQuit?F.onQuit(y,S,F):S.showBanner(SqueakJS.appName+" stopped.")},window.applicationCache&&applicationCache.addEventListener("updateready",(function(){var y=window.SqueakJS&&SqueakJS.options&&SqueakJS.options.appName||"SqueakJS";confirm(y+" has been updated. Restart now?")&&(window.onbeforeunload=null,window.location.reload())}))}();