define(["sugar-web/env","sugar-web/activity/activity"],(function(e,t){requirejs(["domReady!"],(function(e){compiler=RapydScript.create_embedded_compiler(),event_bus=riot.observable(),riot.parsers.js.Rapyd=function(e,t){return compiler.compile(e)},riot.compile((function(){riot.mount("*");try{t.setup(),setTimeout((function(){event_bus.trigger("activity-ready",t)}),100)}catch(e){event_bus.trigger("activity-not-ready",e)}}))}))}));