function getWindowHeight(){var e=0;return"number"==typeof window.innerHeight?e=window.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(e=document.body.clientHeight),e}function getWindowWidth(){var e=0;return"number"==typeof window.innerWidth?e=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(e=document.body.clientWidth),e}function doGetCaretPosition(e){var t=0;if(document.selection){e.focus();var a=document.selection.createRange();a.moveStart("character",-e.value.length),t=a.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}function removeCharacter(){if(CalculateApp.data.isMobile)CalculateApp.elements.calcInput.value=CalculateApp.elements.calcInput.value.substring(0,CalculateApp.elements.calcInput.value.length-1);else{var e=doGetCaretPosition(CalculateApp.elements.calcInput);e===CalculateApp.elements.calcInput.value.length&&(e-=1),e<0&&(e=0);var t=CalculateApp.elements.calcInput.value;CalculateApp.elements.calcInput.value=t.slice(0,e)+t.slice(e+1),CalculateApp.elements.calcInput.setSelectionRange(e,e)}CalculateApp.focus()}function addTextInsideInput(e){if(CalculateApp.data.isMobile)CalculateApp.elements.calcInput.value=CalculateApp.elements.calcInput.value+e;else{var t=doGetCaretPosition(CalculateApp.elements.calcInput),a=CalculateApp.elements.calcInput.value;CalculateApp.elements.calcInput.value=a.slice(0,t)+e+a.slice(t),CalculateApp.elements.calcInput.setSelectionRange(t+e.length,t+e.length)}CalculateApp.focus()}function calcButtonClick(e){CalculateApp.data.calculationDone&&!isNaN(e.target.value)&&(CalculateApp.elements.calcInput.value=""),CalculateApp.data.calculationDone=!1,addTextInsideInput(e.target.value)}function calcInputKeyUp(e){13==e.which&&calcEqualClick()}function getErrorTemplate(){return"<div class='result' style='overflow:hidden; margin-top:3px;padding:5px; font-size: 140%; color:#fff; border:5px solid "+CalculateApp.data.buddyColor.stroke+"; background-color:"+CalculateApp.data.buddyColor.fill+"; '>   {{#label}}<span>{{ label }}</span> <br/> {{/label}}  <span>{{ calculation }}</span> <br/>   <b style='float:right;'>{{error}}</b>   <div style='clear:both;'></div>   </div>"}function getResultTemplate(){return"<div class='result' style='overflow:hidden; margin-top:3px;padding:5px; font-size: 140%; color:#fff; border:5px solid "+CalculateApp.data.buddyColor.stroke+"; background-color:"+CalculateApp.data.buddyColor.fill+"; '>   {{#label}}<span>{{ label }}</span> <br/> {{/label}}  <span>{{ calculation }}</span> <br/>   <b style='float:right;'>{{result}}</b>   <div style='clear:both;'></div>   </div>"}function getGraphTemplate(){return"<div class='result' style='overflow:hidden; margin-top:3px;padding:5px; font-size: 140%; color:#fff; border:5px solid "+CalculateApp.data.buddyColor.stroke+"; background-color:"+CalculateApp.data.buddyColor.fill+"; '>   {{#label}}<span>{{ label }}</span> <br/> {{/label}}  <span>{{ calculation }}</span> <br/>   <button value='{{calculation}}' style='background:none; border-radius:0px; float:right; border:0px; margin:3px; width:55px; height:55px; background-image: url(icons/plot.svg)'></button>  <div style='clear:both;'></div>   </div>"}function launchGraph(e,t){var a={calculation:e,graph:!0};t&&(a.label=t),e=CalculateApp.tryPatchGraphEquation(e);try{var l=CalculateApp.evalFunctionAtZero(e);l.value&&(l=l.value),a.result=l}catch(e){a.error=e.message}if(CalculateApp.storeCalculation(a),CalculateApp.persistCalculations(),CalculateApp.displayCalculation(a),!a.error)try{CalculateApp.graph(a.calculation)}catch(e){a.error=e.message,CalculateApp.displayCalculation(a)}}function launchCalculation(e,t){var a={calculation:e,graph:!1};t&&(a.label=t),e=CalculateApp.tryPatchEquation(e);try{var l=CalculateApp.eval(e);a.result=l.result,CalculateApp.elements.calcInput.value=l.resultBase10}catch(e){a.error=e.message}CalculateApp.storeCalculation(a),CalculateApp.persistCalculations(),CalculateApp.displayCalculation(a)}function calcEqualClick(){if(void 0!==CalculateApp.elements.calcInput.value&&0!==CalculateApp.elements.calcInput.value.length){var e=CalculateApp.elements.labelInput.value,t=CalculateApp.elements.calcInput.value;t=t.replace(/ /g,""),CalculateApp.elements.labelInput.value="",CalculateApp.elements.calcInput.value="",CalculateApp.isGraph(t,e)?launchGraph(t,e):launchCalculation(t,e),CalculateApp.data.calculationDone=!0,CalculateApp.focus()}}function calcDelClick(){removeCharacter(),CalculateApp.focus()}function calcClearClick(){CalculateApp.elements.calcInput.value="",CalculateApp.focus()}function onbaseClick(){switch(CalculateApp.data.outputBase){case 10:CalculateApp.data.outputBase=2,CalculateApp.elements.basePaletteDiv.style.backgroundImage="url(icons/base-2.svg)";break;case 2:CalculateApp.data.outputBase=8,CalculateApp.elements.basePaletteDiv.style.backgroundImage="url(icons/base-8.svg)";break;case 8:CalculateApp.data.outputBase=16,CalculateApp.elements.basePaletteDiv.style.backgroundImage="url(icons/base-16.svg)";break;case 16:CalculateApp.data.outputBase=10,CalculateApp.elements.basePaletteDiv.style.backgroundImage="url(icons/base-10.svg)"}}function onOutputDigitsClick(){switch(CalculateApp.data.outputDigits){case 6:CalculateApp.data.outputDigits=9,CalculateApp.elements.outputDigitsPalette.style.backgroundImage="url(icons/digits-9.svg)";break;case 9:CalculateApp.data.outputDigits=12,CalculateApp.elements.outputDigitsPalette.style.backgroundImage="url(icons/digits-12.svg)";break;case 12:CalculateApp.data.outputDigits=15,CalculateApp.elements.outputDigitsPalette.style.backgroundImage="url(icons/digits-15.svg)";break;case 15:CalculateApp.data.outputDigits=6,CalculateApp.elements.outputDigitsPalette.style.backgroundImage="url(icons/digits-6.svg)"}}function onradianDegreeClick(e){CalculateApp.data.isRadian?(CalculateApp.data.isRadian=!1,CalculateApp.elements.radianDegreePalette.style.backgroundImage="url(icons/format-deg.svg)"):(CalculateApp.data.isRadian=!0,CalculateApp.elements.radianDegreePalette.style.backgroundImage="url(icons/format-rad.svg)")}function ontrigoClick(e){CalculateApp.data.calculationDone&&isNaN(e.detail.value)&&(CalculateApp.elements.calcInput.value=""),CalculateApp.data.calculationDone=!1,addTextInsideInput(e.detail.value)}function onalgebraClick(e){CalculateApp.data.calculationDone&&isNaN(e.detail.value)&&(CalculateApp.elements.calcInput.value=""),CalculateApp.data.calculationDone=!1,addTextInsideInput(e.detail.value)}function initGui(){CalculateApp.elements.modalDiv=document.getElementById("modal"),CalculateApp.elements.resultsZoneDiv=document.getElementById("results-zone"),CalculateApp.elements.calcInputDiv=document.getElementById("calc-input-div"),CalculateApp.elements.calcInput=document.getElementById("calc-input"),CalculateApp.elements.labelInput=document.getElementById("label-input"),CalculateApp.elements.trigoPaletteDiv=document.getElementById("trigo-palette"),CalculateApp.elements.algebraPaletteDiv=document.getElementById("algebra-palette"),CalculateApp.elements.basePaletteDiv=document.getElementById("base-palette"),CalculateApp.elements.radianDegreePalette=document.getElementById("radian-degree-palette"),CalculateApp.elements.outputDigitsPalette=document.getElementById("output-digits-palette"),CalculateApp.elements.calcInput.addEventListener("keyup",calcInputKeyUp,!1);for(var e=document.getElementsByClassName("calcbuttoninput"),t=0;t<e.length;t++)e[t].addEventListener("click",calcButtonClick,!1);var a=document.getElementsByClassName("calcbuttonclear");for(t=0;t<a.length;t++)CalculateApp.elements.calcButtonClear=a[t],a[t].addEventListener("click",calcClearClick,!1);var l=document.getElementsByClassName("calcbuttondel");for(t=0;t<l.length;t++)l[t].addEventListener("click",calcDelClick,!1);var c=document.getElementsByClassName("calcbuttoncalc");for(t=0;t<c.length;t++)c[t].addEventListener("click",calcEqualClick,!1);window.onresize=CalculateApp.onResize,CalculateApp.elements.trigoPalette=new CalculateApp.libs.trigopalette.trigoPalette(CalculateApp.elements.trigoPaletteDiv,void 0),CalculateApp.elements.trigoPalette.addEventListener("trigoClick",ontrigoClick),CalculateApp.elements.algebraPalette=new CalculateApp.libs.algebrapalette.algebraPalette(CalculateApp.elements.algebraPaletteDiv,void 0),CalculateApp.elements.algebraPalette.addEventListener("algebraClick",onalgebraClick),!!navigator.userAgent.match(/iPad|iPhone|iPod/g)?(CalculateApp.elements.basePaletteDiv.addEventListener("touchstart",onbaseClick),CalculateApp.elements.radianDegreePalette.addEventListener("touchstart",onradianDegreeClick),CalculateApp.elements.outputDigitsPalette.addEventListener("touchstart",onOutputDigitsClick)):(CalculateApp.elements.basePaletteDiv.addEventListener("click",onbaseClick),CalculateApp.elements.radianDegreePalette.addEventListener("click",onradianDegreeClick),CalculateApp.elements.outputDigitsPalette.addEventListener("click",onOutputDigitsClick))}