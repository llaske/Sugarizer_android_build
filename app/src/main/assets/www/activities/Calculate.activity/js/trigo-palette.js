define(["sugar-web/graphics/palette","mustache"],(function(t,e){var n={},o=!!navigator.userAgent.match(/iPad|iPhone|iPod/g);n.trigoPalette=function(n,i){t.Palette.call(this,n,i),this.trigoChangeEvent=document.createEvent("CustomEvent"),this.trigoChangeEvent.initCustomEvent("trigoClick",!0,!0,{}),this.template='<tbody>{{#rows}}<tr>{{#.}}<td><button style="background:none; border-radius:0px; border:0px; margin:3px; width:55px; height:55px; background-image: url({{backgroundSvg}})" value="{{value}}"></button></td>{{/.}}</tr>{{/rows}}</tbody>';var a=document.createElement("table");a.className="trigos";a.innerHTML=e.render(this.template,{rows:[[{title:"COS",value:"cos(",backgroundSvg:"icons/trigonometry-cos.svg"},{title:"SIN",value:"sin(",backgroundSvg:"icons/trigonometry-sin.svg"},{title:"TAN",value:"tan(",backgroundSvg:"icons/trigonometry-tan.svg"}],[{title:"ACOS",value:"acos(",backgroundSvg:"icons/trigonometry-acos.svg"},{title:"ASIN",value:"asin(",backgroundSvg:"icons/trigonometry-asin.svg"},{title:"ATAN",value:"atan(",backgroundSvg:"icons/trigonometry-atan.svg"}],[{title:"COSH",value:"cosh(",backgroundSvg:"icons/trigonometry-cosh.svg"},{title:"SINH",value:"sinh(",backgroundSvg:"icons/trigonometry-sinh.svg"},{title:"TANH",value:"tanh(",backgroundSvg:"icons/trigonometry-tanh.svg"}]]}),this.setContent([a]),this.buttons=a.querySelectorAll("button");var r=this;function popDownOnButtonClick(t){r.trigoChangeEvent.detail.value=t.target.value,r.getPalette().dispatchEvent(r.trigoChangeEvent),r.popDown()}for(var s=0;s<this.buttons.length;s++)o?this.buttons[s].addEventListener("touchstart",popDownOnButtonClick):this.buttons[s].addEventListener("click",popDownOnButtonClick)};return n.trigoPalette.prototype=Object.create(t.Palette.prototype,{setColor:{value:function(t){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),this.buttons[t].dispatchEvent(e)},enumerable:!0,configurable:!0,writable:!0},addEventListener:{value:function(t,e,n){return this.getPalette().addEventListener(t,e,n)},enumerable:!0,configurable:!0,writable:!0}}),n}));