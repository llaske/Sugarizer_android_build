define(["sugar-web/activity/activity","activity/SpeakActivity","facepalette","speechpalette","languagepalette","tutorial","activity/sax","activity/dom-js","activity/AIMLInterpreter","activity/Speech"],(function(t,e,a,n,o,i){requirejs(["domReady!"],(function(e){t.setup();var c=t.getDatastoreObject(),r=document.getElementById("face-button"),l=(new a.ActivityPalette(r,c),document.getElementById("speech-button")),s=(new n.ActivityPalette(l,c),document.getElementById("language-button"));new o.ActivityPalette(s,c);document.getElementById("help-button").addEventListener("click",(function(t){i.start()})),t.getDatastoreObject().loadAsText((function(t,e,a){null==t&&null!=a&&(speakArray=JSON.parse(a),function removeExtra(t){t.sort();for(var e=t.length-1;e--;)t[e]===t[e+1]&&t.splice(e,1)}(speakArray),function speakComboBox(){for(var t=0;t<speakArray.length;t++){var e=document.createElement("OPTION");e.setAttribute("value",speakArray[t]),e.text=speakArray[t],document.getElementById("combo-box").appendChild(e)}}())})),document.getElementById("stop-button").addEventListener("click",(function(e){console.log("writing...");var a=JSON.stringify(speakArray);console.log(a),t.getDatastoreObject().setDataAsText(a),t.getDatastoreObject().save((function(t){null===t?console.log("write done."):console.log("write failed.")}))}))}))}));