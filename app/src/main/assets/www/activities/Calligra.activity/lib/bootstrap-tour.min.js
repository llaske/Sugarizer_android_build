!function(t,e){var n,r;r=e.document,n=function(){function o(n){var r;try{r=e.localStorage}catch(t){r=!1}this._options=t.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:r,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){},onRedirectError:function(){}},n),this._force=!1,this._inited=!1,this._current=null,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return o.prototype.addSteps=function(t){var e,n,r;for(n=0,r=t.length;r>n;n++)e=t[n],this.addStep(e);return this},o.prototype.addStep=function(t){return this._options.steps.push(t),this},o.prototype.getStep=function(e){return null!=this._options.steps[e]?t.extend({id:"step-"+e,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:e===this._options.steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[e].element,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError},this._options.steps[e]):void 0},o.prototype.init=function(t){return this._force=t,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(t){return function(){return t.showStep(t._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},o.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},o.prototype.next=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showNextStep)},o.prototype.prev=function(){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this._showPrevStep)},o.prototype.goTo=function(t){var e;return e=this.hideStep(this._current),this._callOnPromiseDone(e,this.showStep,t)},o.prototype.end=function(){var n,i;return n=function(n){return function(){return t(r).off("click.tour-"+n._options.name),t(r).off("keyup.tour-"+n._options.name),t(e).off("resize.tour-"+n._options.name),n._setState("end","yes"),n._inited=!1,n._force=!1,n._clearTimer(),null!=n._options.onEnd?n._options.onEnd(n):void 0}}(this),i=this.hideStep(this._current),this._callOnPromiseDone(i,n)},o.prototype.ended=function(){return!this._force&&!!this._getState("end")},o.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},o.prototype.pause=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,e.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},o.prototype.resume=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=e.setTimeout(function(t){return function(){return t._isLast()?t.next():t.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},o.prototype.hideStep=function(e){var n,r,i;return(i=this.getStep(e))?(this._clearTimer(),r=this._makePromise(null!=i.onHide?i.onHide(this,e):void 0),n=function(n){return function(){var r;return(r=t(i.element)).data("bs.popover")||r.data("popover")||(r=t("body")),r.popover("destroy").removeClass("tour-"+n._options.name+"-element tour-"+n._options.name+"-"+e+"-element"),r.removeData("bs.popover"),i.reflex&&t(i.reflexElement).removeClass("tour-step-element-reflex").off(n._reflexEvent(i.reflex)+".tour-"+n._options.name),i.backdrop&&n._hideBackdrop(),null!=i.onHidden?i.onHidden(n):void 0}}(this),this._callOnPromiseDone(r,n),r):void 0},o.prototype.showStep=function(t){var n,i,s,a;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(a=this.getStep(t))?(s=t<this._current,n=this._makePromise(null!=a.onShow?a.onShow(this,t):void 0),i=function(e){return function(){var n,i;if(e.setCurrentStep(t),n=function(){switch({}.toString.call(a.path)){case"[object Function]":return a.path();case"[object String]":return this._options.basePath+a.path;default:return a.path}}.call(e),!e._isRedirect(a.host,n,r.location)||(e._redirect(a,t,n),e._isJustPathHashDifferent(a.host,n,r.location))){if(e._isOrphan(a)){if(!1===a.orphan)return e._debug("Skip the orphan step "+(e._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(s?e._showPrevStep():e._showNextStep());e._debug("Show the orphan step "+(e._current+1)+". Orphans option is true.")}return a.backdrop&&e._showBackdrop(a),i=function(){return e.getCurrentStep()!==t||e.ended()?void 0:(null!=a.element&&a.backdrop&&e._showOverlayElement(a),e._showPopover(a,t),null!=a.onShown&&a.onShown(e),e._debug("Step "+(e._current+1)+" of "+e._options.steps.length))},a.autoscroll?e._scrollIntoView(a.element,i):i(),a.duration?e.resume():void 0}}}(this),a.delay?(this._debug("Wait "+a.delay+" milliseconds to show the step "+(this._current+1)),e.setTimeout(function(t){return function(){return t._callOnPromiseDone(n,i)}}(this),a.delay)):this._callOnPromiseDone(n,i),n):void 0},o.prototype.getCurrentStep=function(){return this._current},o.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},o.prototype.redraw=function(){return this._showOverlayElement(this.getStep(this.getCurrentStep()).element,!0)},o.prototype._setState=function(t,e){var n;if(this._options.storage){n=this._options.name+"_"+t;try{this._options.storage.setItem(n,e)}catch(t){t.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(n,e)}return null==this._state&&(this._state={}),this._state[t]=e},o.prototype._removeState=function(t){var e;return this._options.storage?(e=this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},o.prototype._getState=function(t){var e,n;return this._options.storage?(e=this._options.name+"_"+t,n=this._options.storage.getItem(e)):null!=this._state&&(n=this._state[t]),(void 0===n||"null"===n)&&(n=null),this._options.afterGetState(t,n),n},o.prototype._showNextStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(){return t.showStep(n.next)}}(this),t=this._makePromise(null!=n.onNext?n.onNext(this):void 0),this._callOnPromiseDone(t,e)},o.prototype._showPrevStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(){return t.showStep(n.prev)}}(this),t=this._makePromise(null!=n.onPrev?n.onPrev(this):void 0),this._callOnPromiseDone(t,e)},o.prototype._debug=function(t){return this._options.debug?e.console.log("Bootstrap Tour '"+this._options.name+"' | "+t):void 0},o.prototype._isRedirect=function(t,e,n){var r;return!(""===t||!this._isHostDifferent(t,n.href))||(r=[n.pathname,n.search,n.hash].join(""),null!=e&&""!==e&&("[object RegExp]"==={}.toString.call(e)&&!e.test(r)||"[object String]"==={}.toString.call(e)&&this._isPathDifferent(e,r)))},o.prototype._isHostDifferent=function(t,e){return this._getProtocol(t)!==this._getProtocol(e)||this._getHost(t)!==this._getHost(e)},o.prototype._isPathDifferent=function(t,e){return this._getPath(t)!==this._getPath(e)||!this._equal(this._getQuery(t),this._getQuery(e))||!this._equal(this._getHash(t),this._getHash(e))},o.prototype._isJustPathHashDifferent=function(t,e,n){var r;return(""===t||!this._isHostDifferent(t,n.href))&&(r=[n.pathname,n.search,n.hash].join(""),"[object String]"==={}.toString.call(e)&&(this._getPath(e)===this._getPath(r)&&this._equal(this._getQuery(e),this._getQuery(r))&&!this._equal(this._getHash(e),this._getHash(r))))},o.prototype._redirect=function(e,n,i){if(t.isFunction(e.redirect))return e.redirect.call(this,i);if(!0===e.redirect){if(this._debug("Redirect to "+e.host+i),this._getState("redirect_to")!==""+n)return this._setState("redirect_to",""+n),r.location.href=""+e.host+i;if(this._debug("Error redirection loop to "+i),this._removeState("redirect_to"),null!=e.onRedirectError)return e.onRedirectError(this)}},o.prototype._isOrphan=function(e){return null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},o.prototype._isLast=function(){return this._current<this._options.steps.length-1},o.prototype._showPopover=function(e,n){var r,i,s,a,p;return t(".tour-"+this._options.name).remove(),a=t.extend({},this._options),s=this._isOrphan(e),e.template=this._template(e,n),s&&(e.element="body",e.placement="top"),(r=t(e.element)).addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+n+"-element"),e.options&&t.extend(a,e.options),e.reflex&&!s&&t(e.reflexElement).addClass("tour-step-element-reflex").off(this._reflexEvent(e.reflex)+".tour-"+this._options.name).on(this._reflexEvent(e.reflex)+".tour-"+this._options.name,function(t){return function(){return t._isLast()?t.next():t.end()}}(this)),p=!0===e.smartPlacement&&-1===e.placement.search(/auto/i),r.popover({placement:p?"auto "+e.placement:e.placement,trigger:"manual",title:e.title,content:e.content,html:!0,animation:e.animation,container:e.container,template:e.template,selector:e.element}).popover("show"),(i=r.data("bs.popover")?r.data("bs.popover").tip():r.data("popover").tip()).attr("id",e.id),this._reposition(i,e),s?this._center(i):void 0},o.prototype._template=function(e,n){var r,i,s,a,p,u;return u=e.template,this._isOrphan(e)&&"[object Boolean]"!=={}.toString.call(e.orphan)&&(u=e.orphan),s=(r=(p=t.isFunction(u)?t(u(n,e)):t(u)).find(".popover-navigation")).find('[data-role="prev"]'),i=r.find('[data-role="next"]'),a=r.find('[data-role="pause-resume"]'),this._isOrphan(e)&&p.addClass("orphan"),p.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+n),e.reflex&&p.addClass("tour-"+this._options.name+"-reflex"),e.prev<0&&(s.addClass("disabled"),s.prop("disabled",!0)),e.next<0&&(i.addClass("disabled"),i.prop("disabled",!0)),e.duration||a.remove(),p.clone().wrap("<div>").parent().html()},o.prototype._reflexEvent=function(t){return"[object Boolean]"==={}.toString.call(t)?"click":t},o.prototype._reposition=function(e,n){var i,s,a,p,u,h,l;if(p=e[0].offsetWidth,s=e[0].offsetHeight,u=(l=e.offset()).left,h=l.top,0>(i=t(r).outerHeight()-l.top-e.outerHeight())&&(l.top=l.top+i),0>(a=t("html").outerWidth()-l.left-e.outerWidth())&&(l.left=l.left+a),l.top<0&&(l.top=0),l.left<0&&(l.left=0),e.offset(l),"bottom"===n.placement||"top"===n.placement){if(u!==l.left)return this._replaceArrow(e,2*(l.left-u),p,"left")}else if(h!==l.top)return this._replaceArrow(e,2*(l.top-h),s,"top")},o.prototype._center=function(n){return n.css("top",t(e).outerHeight()/2-n.outerHeight()/2)},o.prototype._replaceArrow=function(t,e,n,r){return t.find(".arrow").css(r,e?50*(1-e/n)+"%":"")},o.prototype._scrollIntoView=function(e,n){return t(e),n()},o.prototype._onResize=function(n,r){return t(e).on("resize.tour-"+this._options.name,(function(){return clearTimeout(r),r=setTimeout(n,100)}))},o.prototype._initMouseNavigation=function(){var e;return e=this,t(r).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(t){return function(e){return e.preventDefault(),t.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(t){return function(e){return e.preventDefault(),t.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(t){return function(e){return e.preventDefault(),t.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",(function(n){var r;return n.preventDefault(),(r=t(this)).text(e._paused?r.data("pause-text"):r.data("resume-text")),e._paused?e.resume():e.pause()}))},o.prototype._initKeyboardNavigation=function(){return this._options.keyboard?t(r).on("keyup.tour-"+this._options.name,function(t){return function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),t._isLast()?t.next():t.end();case 37:if(e.preventDefault(),t._current>0)return t.prev();break;case 27:return e.preventDefault(),t.end()}}}(this)):void 0},o.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},o.prototype._callOnPromiseDone=function(t,e,n){return t?t.then(function(t){return function(){return e.call(t,n)}}(this)):e.call(this,n)},o.prototype._showBackdrop=function(e){return this.backdrop.backgroundShown?void 0:(this.backdrop=t("<div>",{class:"tour-backdrop"}),this.backdrop.backgroundShown=!0,t(e.backdropContainer).append(this.backdrop))},o.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},o.prototype._hideBackground=function(){return this.backdrop?(this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1):void 0},o.prototype._showOverlayElement=function(e,n){var r,i;return!(r=t(e.element))||0===r.length||this.backdrop.overlayElementShown&&!n?void 0:(this.backdrop.overlayElementShown||(this.backdrop.$element=r.addClass("tour-step-backdrop"),this.backdrop.$background=t("<div>",{class:"tour-step-background"}),this.backdrop.$background.appendTo(e.backdropContainer),this.backdrop.overlayElementShown=!0),i={width:r.innerWidth(),height:r.innerHeight(),offset:r.offset()},e.backdropPadding&&(i=this._applyBackdropPadding(e.backdropPadding,i)),this.backdrop.$background.width(i.width).height(i.height).offset(i.offset))},o.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},o.prototype._applyBackdropPadding=function(t,e){return"object"==typeof t?(null==t.top&&(t.top=0),null==t.right&&(t.right=0),null==t.bottom&&(t.bottom=0),null==t.left&&(t.left=0),e.offset.top=e.offset.top-t.top,e.offset.left=e.offset.left-t.left,e.width=e.width+t.left+t.right,e.height=e.height+t.top+t.bottom):(e.offset.top=e.offset.top-t,e.offset.left=e.offset.left-t,e.width=e.width+2*t,e.height=e.height+2*t),e},o.prototype._clearTimer=function(){return e.clearTimeout(this._timer),this._timer=null,this._duration=null},o.prototype._getProtocol=function(t){return(t=t.split("://")).length>1?t[0]:"http"},o.prototype._getHost=function(t){return(t=(t=t.split("//")).length>1?t[1]:t[0]).split("/")[0]},o.prototype._getPath=function(t){return t.replace(/\/?$/,"").split("?")[0].split("#")[0]},o.prototype._getQuery=function(t){return this._getParams(t,"?")},o.prototype._getHash=function(t){return this._getParams(t,"#")},o.prototype._getParams=function(t,e){var n,r,i,s,a;if(1===(r=t.split(e)).length)return{};for(i={},s=0,a=(r=r[1].split("&")).length;a>s;s++)i[(n=(n=r[s]).split("="))[0]]=n[1]||"";return i},o.prototype._equal=function(t,e){var n,r;if("[object Object]"==={}.toString.call(t)&&"[object Object]"==={}.toString.call(e)){for(n in t)if(r=t[n],e[n]!==r)return!1;for(n in e)if(r=e[n],t[n]!==r)return!1;return!0}return t===e},o}(),e.Tour=n}(jQuery,window);