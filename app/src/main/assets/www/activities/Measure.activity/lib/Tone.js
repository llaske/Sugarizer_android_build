!function(U,Y){"object"==typeof exports&&"object"==typeof module?module.exports=Y():"function"==typeof define&&define.amd?define([],Y):"object"==typeof exports?exports.Tone=Y():U.Tone=Y()}("undefined"!=typeof self?self:this,(function(){return function(U){var Y={};function n(nt){if(Y[nt])return Y[nt].exports;var st=Y[nt]={i:nt,l:!1,exports:{}};return U[nt].call(st.exports,st,st.exports,n),st.l=!0,st.exports}return n.m=U,n.c=Y,n.d=function(U,Y,nt){n.o(U,Y)||Object.defineProperty(U,Y,{enumerable:!0,get:nt})},n.r=function(U){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})},n.t=function(U,Y){if(1&Y&&(U=n(U)),8&Y)return U;if(4&Y&&"object"==typeof U&&U&&U.__esModule)return U;var nt=Object.create(null);if(n.r(nt),Object.defineProperty(nt,"default",{enumerable:!0,value:U}),2&Y&&"string"!=typeof U)for(var st in U)n.d(nt,st,function(Y){return U[Y]}.bind(null,st));return nt},n.n=function(U){var Y=U&&U.__esModule?function(){return U.default}:function(){return U};return n.d(Y,"a",Y),Y},n.o=function(U,Y){return Object.prototype.hasOwnProperty.call(U,Y)},n.p="",n(n.s=684)}([function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return st})),nt.d(Y,"b",(function(){return ht})),nt.d(Y,"c",(function(){return vt})),nt.d(Y,"d",(function(){return yt})),nt.d(Y,"e",(function(){return ee})),nt.d(Y,"f",(function(){return oe})),nt.d(Y,"g",(function(){return re})),nt.d(Y,"i",(function(){return be})),nt.d(Y,"h",(function(){return ze})),nt.d(Y,"j",(function(){return tn})),nt.d(Y,"k",(function(){return on}));const st=new WeakSet,ht=new WeakMap,vt=new WeakMap,yt=new WeakMap,ee=new WeakMap,oe=new WeakMap,re=new WeakMap,be=new WeakMap,ze=new WeakMap,tn=new WeakMap,on=new WeakMap},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(4);const i=(U,Y)=>{Object(st.a)(U,Y,"channelCount"),Object(st.a)(U,Y,"channelCountMode"),Object(st.a)(U,Y,"channelInterpretation")}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return st})),nt.d(Y,"b",(function(){return ht}));const st=-34028234663852886e22,ht=-st},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>U.context===Y},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt)=>{const st=Y[nt];void 0!==st&&st!==U[nt]&&(U[nt]=st)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt)=>{const st=Y[nt];void 0!==st&&st!==U[nt].value&&(U[nt].value=st)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(0),ht=nt(9);const o=U=>Object(ht.a)(st.c,U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","InvalidStateError")}catch(U){return U.code=11,U.name="InvalidStateError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(0),ht=nt(9);const o=U=>Object(ht.a)(st.b,U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>{const nt=U.get(Y);if(void 0===nt)throw new Error("A value with the given key could not be found.");return nt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","NotSupportedError")}catch(U){return U.code=9,U.name="NotSupportedError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>(U.connect=Y.connect.bind(Y),U.disconnect=Y.disconnect.bind(Y),U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>"inputs"in U},function(U,Y,nt){"use strict";nt.d(Y,"AudioContext",(function(){return Qc})),nt.d(Y,"AudioWorkletNode",(function(){return su})),nt.d(Y,"OfflineAudioContext",(function(){return ru})),nt.d(Y,"isAnyAudioContext",(function(){return au})),nt.d(Y,"isAnyAudioNode",(function(){return cu})),nt.d(Y,"isAnyAudioParam",(function(){return uu})),nt.d(Y,"isAnyOfflineAudioContext",(function(){return hu})),nt.d(Y,"isSupported",(function(){return Bi}));var st=nt(18),ht=nt(516),vt=nt(517),yt=nt(518),ee=nt(667),oe=nt(519),re=nt(520),be=nt(521),ze=nt(522),tn=nt(523),on=nt(524),$n=nt(525),Hn=nt(526),Kn=nt(527),ts=nt(528),es=nt(529),Fs=nt(665),Ns=nt(530),Ps=nt(531),zs=nt(532),Ws=nt(670),Gs=nt(533),$s=nt(534),Qs=nt(535),Xs=nt(536),Zs=nt(537),Hs=nt(538),Js=nt(539),Ks=nt(540),ti=nt(541),ei=nt(542),ni=nt(543),si=nt(544),ii=nt(545),oi=nt(546),ri=nt(547),ai=nt(548),ci=nt(549),ui=nt(550),hi=nt(671),li=nt(551),di=nt(552),pi=nt(553),fi=nt(554),_i=nt(672),mi=nt(555),gi=nt(556),vi=nt(557),yi=nt(558),bi=nt(559),xi=nt(560),wi=nt(561),Ti=nt(562),Oi=nt(563),Si=nt(564),Ci=nt(565),ki=nt(566),Ai=nt(567),Di=nt(568),Mi=nt(569),qi=nt(673),ji=nt(570),Ri=nt(571),Ei=nt(15),Ii=nt(37),Fi=nt(7),Vi=nt(572),Ni=nt(573),Pi=nt(574),Li=nt(575),zi=nt(576),Wi=nt(577),Ui=nt(578),Gi=nt(579),$i=nt(580),Qi=nt(581),Xi=nt(582),Zi=nt(583),Yi=nt(584),Hi=nt(585),Ji=nt(586),Ki=nt(587),to=nt(588),eo=nt(589),no=nt(590),so=nt(668),io=nt(591),oo=nt(669),ro=nt(592),ao=nt(593),co=nt(594),uo=nt(595),ho=nt(674),lo=nt(666),po=nt(596),fo=nt(597),_o=nt(675),mo=nt(598),go=nt(599),vo=nt(600),yo=nt(601),bo=nt(602),xo=nt(603),wo=nt(604),To=nt(605),Oo=nt(606),So=nt(607),Co=nt(608),ko=nt(609),Ao=nt(610),Do=nt(611),Mo=nt(612),qo=nt(613),jo=nt(614),Ro=nt(615),Eo=nt(616),Io=nt(617),Fo=nt(618),Vo=nt(619),No=nt(620),Po=nt(10),Lo=nt(621),zo=nt(622),Bo=nt(623),Wo=nt(624),Uo=nt(625),Go=nt(626),$o=nt(627),Qo=nt(628),Xo=nt(629),Zo=nt(630),Yo=nt(631),Ho=nt(632),Jo=nt(633),Ko=nt(634),tr=nt(635),er=nt(636),nr=nt(637),sr=nt(638),ir=nt(639),or=nt(640),rr=nt(641),ar=nt(642),cr=nt(643),ur=nt(644),hr=nt(645),lr=nt(646),dr=nt(647),pr=nt(648),fr=nt(649),_r=nt(650),mr=nt(651),gr=nt(652),vr=nt(653),yr=nt(654),br=nt(44),xr=nt(655),wr=nt(656),Tr=nt(657),Or=nt(658),Sr=nt(659),Cr=nt(660),kr=nt(661),Ar=nt(662),Dr=nt(0),Mr=nt(33),qr=nt(34),jr=nt(8),Rr=nt(26),Er=nt(6),Ir=nt(27),Fr=nt(9),Vr=nt(16),Nr=nt(23),Pr=nt(45),Lr=nt(19),zr=nt(38),Br=nt(32),Wr=nt(14),Ur=nt(663),Gr=nt(664),$r=nt(28);nt(46),nt(130);const Qr=Object(Xs.a)(new Map,new WeakMap),Xr=Object(Tr.a)(),Zr=Object(Do.a)(Xr),Yr=Object($i.a)(Zr),Hr=Object(ro.a)(Xr),Jr=Object(Ai.a)(Yr,Hr,Zr),Kr=Object(co.a)(Jr),ta=Object(so.a)(Qr,Ei.a,Kr),ea=Object(Ci.a)(jr.a),na=Object(Qo.a)(jr.a,ea,Lr.a),sa=Object(ze.a)(ta,Er.a,na),ia=new WeakMap,oa=Object(Di.a)(Dr.g),ra=new WeakMap,aa=Object(xi.a)($r.a),ca=Object(zi.a)(Hr),ua=Object(Wi.a)(Xr),ha=Object(Ui.a)(Xr),la=Object(Fs.a)(Object(vt.a)(Dr.b),ia,Qr,Object(Ri.a)(Dr.h,qr.a,jr.a,Er.a,Ir.a,Nr.a),Ei.a,Ii.a,Po.a,Object(li.a)(Mr.a,Dr.h,jr.a,Er.a,Ir.a,oa,Nr.a,Yr),Object(_i.a)(ra,jr.a,Fr.a),aa,oa,ca,ua,ha,Yr),da=Object(be.a)(la,sa,Ei.a,ta,oa,Yr),pa=new WeakSet,fa=Object(io.a)(Xr),_a=Object(oi.a)(new Uint32Array(1)),ma=Object(Or.a)(_a,Ei.a),ga=Object(Sr.a)(_a),va=Object(tn.a)(pa,Qr,Po.a,fa,Zr,Object(Ko.a)(fa),ma,ga),ya=Object(wo.a)(Kr),ba=Object(oe.a)(ya),xa=Object(ur.a)(Kr),wa=Object(hr.a)(Kr),Ta=Object(lr.a)(Kr),Oa=Object(kr.a)(Kr),Sa=Object(Xo.a)(ea,Rr.a,Lr.a),Ca=Object(ti.a)(Sa),ka=Object(oo.a)(ba,Qr,Kr,Object(er.a)(Kr),Object(nr.a)(Zr),Object(sr.a)(Kr),Object(ir.a)(Kr),xa,wa,Ta,Gr.a,Object(Cr.a)(zr.a),Oa),Aa=Object($o.a)(Object(ki.a)(Rr.a),Sa),Da=Object($n.a)(Ca,ka,Er.a,Aa,na),Ma=Object(Ns.a)(Object(yt.a)(Dr.d),ra,Dr.e,Ps.a,st.createCancelAndHoldAutomationEvent,st.createCancelScheduledValuesAutomationEvent,st.createExponentialRampToValueAutomationEvent,st.createLinearRampToValueAutomationEvent,st.createSetTargetAutomationEvent,st.createSetValueAutomationEvent,st.createSetValueCurveAutomationEvent,Hr),qa=Object(on.a)(la,Da,Ma,Fi.a,ka,oa,Yr,$r.a),ja=Object(Kn.a)(la,ts.a,Ei.a,Fi.a,Object(ao.a)(ya,zr.a),oa,Yr,na),Ra=Object(po.a)(Kr),Ea=Object(Qs.a)(Ca,Ra,Er.a,Aa,na),Ia=Object($s.a)(la,Ma,Ea,Ii.a,Ra,oa,Yr),Fa=Object(no.a)(Vr.a,ua),Va=Object(Ar.a)(Fi.a,Kr,Fa),Na=Object(fo.a)(Kr,Va),Pa=Object(Hs.a)(Na,Er.a,na),La=Object(Zs.a)(la,Pa,Na,oa,Yr),za=Object(_o.a)(Kr),Ba=Object(Ks.a)(za,Er.a,na),Wa=Object(Js.a)(la,Ba,za,oa,Yr),Ua=Object(go.a)(ba,ka,ya,Fa),Ga=Object(mo.a)(ba,Qr,Kr,Ua,xa,Ta),$a=Object(ii.a)(Ca,Ga,Er.a,Aa,na),Qa=Object(si.a)(la,Ma,$a,Ga,oa,Yr,$r.a),Xa=Object(yo.a)(Kr,ya,Fa),Za=Object(vo.a)(Kr,Xa,Po.a,zr.a),Ya=Object(ai.a)(Za,Er.a,na),Ha=Object(ri.a)(la,Ya,Za,oa,Yr),Ja=Object(bo.a)(Kr),Ka=Object(pi.a)(Ca,Ja,Er.a,Aa,na),tc=Object(di.a)(la,Ma,Ka,Ja,oa,Yr),ec=Object(xo.a)(Kr,Po.a),nc=Object(vi.a)(Ca,ec,Er.a,Aa,na),sc=Object(gi.a)(la,Ma,nc,ec,Po.a,oa,Yr),ic=Object(Si.a)(Ca,ya,Er.a,Aa,na),oc=Object(Oi.a)(la,Ma,ic,ya,oa,Yr),rc=Object(Eo.a)(Kr),ac=Object(Oo.a)(Ii.a,Fi.a,rc,Po.a),cc=Object(Zo.a)(Qr,ya,rc,Object(vr.a)(ya,Zr)),uc=Object(ji.a)(ka,Kr,Er.a,Zr,na,cc),hc=Object(To.a)(Kr,ac),lc=Object(qi.a)(la,hc,uc,oa,Yr),dc=Object(es.a)(Ma,Na,Ga,rc,Yr),pc=new WeakMap,fc=Object(to.a)(ja,dc,aa,Yr,pc,$r.a),_c=Object(Mo.a)(ba,Qr,Kr,xa,wa,Ta,Oa),mc=Object(Bo.a)(Ca,_c,Er.a,Aa,na),gc=Object(zo.a)(la,Ma,Fi.a,_c,mc,oa,Yr,$r.a),vc=Object(ni.a)(ka),yc=Object(No.a)(vc,Fi.a,Kr,ya,Pr.a,Fa),bc=Object(Vo.a)(vc,Fi.a,Kr,yc,Pr.a,Fa,zr.a),xc=Object(jo.a)(Mr.a,Fi.a,Kr,Na,ya,rc,bc,Po.a,qr.a,Fa),wc=Object(qo.a)(Kr,xc),Tc=Object(Uo.a)(Ca,Na,Ga,ya,wc,Er.a,Zr,Aa,na,cc),Oc=Object(Wo.a)(la,Ma,wc,Tc,oa,Yr),Sc=Object(Ro.a)(Jr),Cc=Object(Go.a)(Sc,oa,new WeakSet),kc=Object(Fo.a)(Na,za,ya,bc,Po.a,Fa),Ac=Object(Io.a)(Kr,kc,Po.a),Dc=Object(Jo.a)(Ca,Ac,Er.a,Aa,na),Mc=Object(Ho.a)(la,Ma,Ac,Dc,oa,Yr),qc=Object(wr.a)(bc,Er.a,na),jc=Object(xr.a)(la,Fi.a,bc,qc,oa,Yr),Rc=Object(Qi.a)(Xr),Ec=Object(wi.a)(Xr),Ic=Rc?Object(ee.a)(Po.a,Object(bi.a)(Xr),Ec,Object(Ti.a)(ht.a),Jr,oa,new WeakMap,new WeakMap,Xr):void 0,Fc=Object(Gi.a)(ca,Yr),Vc=Object(hi.a)(pa,Qr,ui.a,yi.a,new WeakSet,oa,Fc,Yr,Zr,Br.a,Wr.a,ma,ga),Nc=Object(Gs.a)(Ic,da,va,qa,Ia,La,Wa,Qa,Ha,Vc,tc,sc,oc,lc,fc,gc,Oc,Cc,Mc,jc),Pc=Object(So.a)(Kr),Lc=Object(Zi.a)(la,Pc,oa,Yr),zc=Object(Co.a)(Kr,Po.a),Bc=Object(Yi.a)(la,zc,oa,Yr),Wc=Object(ko.a)(Kr),Uc=Object(Hi.a)(la,Wc,oa,Yr),Gc=Object(Ao.a)(Fi.a,Kr,Yr),$c=Object(Ji.a)(la,Gc,oa),Qc=Object(Hn.a)(Nc,Fi.a,Po.a,br.a,Lc,Bc,Uc,$c,Hr),Xc=Object(Mi.a)(pc),Zc=Object(re.a)(Xc),Yc=Object(ei.a)(Ei.a),Hc=Object(fi.a)(Xc),Jc=Object(mi.a)(Ei.a),Kc=Object(lo.a)(ia,Yc,Ei.a,Fi.a,Na,za,Ga,ya,rc,Po.a,Jc,Ec,Fa),tu=Object(ho.a)(Fi.a,Kr,Kc,ya,Po.a,Fa),eu=Object(uo.a)(Xr),nu=Object(Ws.a)(Ca,Yc,ka,Na,za,Ga,ya,Hc,Jc,Ec,Er.a,eu,Zr,Aa,na,cc),su=Rc?Object(zs.a)(Zc,la,Ma,nu,tu,oa,Yr,eu,$r.a):void 0,iu=(Object(Ki.a)(Fi.a,Po.a,br.a,fc,Hr),Object(ci.a)(Po.a,Zr)),ou=Object(Yo.a)(pa,Qr,ea,Xc,cc,Br.a,ma,ga),ru=(Object(eo.a)(Qr,Fi.a,iu,fc,ou),Object(Lo.a)(Nc,Qr,Fi.a,iu,ou)),au=Object(Vi.a)(Dr.g,ca),cu=Object(Ni.a)(Dr.c,ua),uu=Object(Pi.a)(Dr.e,ha),hu=Object(Li.a)(Dr.g,Yr),Bi=()=>Object(Xi.a)(Qr,Object(tr.a)(Zr),Object(or.a)(Hr),Object(rr.a)(Zr),Object(ar.a)(Hr),Object(cr.a)(Zr),Object(dr.a)(eu,Zr),Object(pr.a)(Kr,Zr),Object(fr.a)(Kr,Zr),Object(_r.a)(Zr),Object(mr.a)(Xr),Object(gr.a)(Hr),Object(yr.a)(Zr),Ur.a)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>{const Y=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const nt=U.decodeAudioData(Y.buffer,(()=>{}));return void 0!==nt&&(nt.catch((()=>{})),!0)}catch{}return!1}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","IndexSizeError")}catch(U){return U.code=1,U.name="IndexSizeError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st)=>{for(const Y of U)if(nt(Y)){if(st)return!1;throw Error("The set contains at least one similar element.")}return U.add(Y),!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(0),ht=nt(20);const o=U=>{if(st.a.has(U))throw new Error("The AudioNode is already stored.");st.a.add(U),Object(ht.a)(U).forEach((U=>U(!0)))}},function(U,Y,nt){!function(U,Y,nt,st){"use strict";Y=Y&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y,nt=nt&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt,st=st&&Object.prototype.hasOwnProperty.call(st,"default")?st.default:st;var i=function(U,Y,nt){return{endTime:Y,insertTime:nt,type:"exponentialRampToValue",value:U}},o=function(U,Y,nt){return{endTime:Y,insertTime:nt,type:"linearRampToValue",value:U}},r=function(U,Y){return{startTime:Y,type:"setValue",value:U}},a=function(U,Y,nt){return{duration:nt,startTime:Y,type:"setValueCurve",values:U}},c=function(U,Y,nt){var st=nt.startTime,ht=nt.target,vt=nt.timeConstant;return ht+(Y-ht)*Math.exp((st-U)/vt)},u=function(U){return"exponentialRampToValue"===U.type},h=function(U){return"linearRampToValue"===U.type},l=function(U){return u(U)||h(U)},d=function(U){return"setValue"===U.type},p=function(U){return"setValueCurve"===U.type},ht=function t(U,Y,nt,st){var ht=U[Y];return void 0===ht?st:l(ht)||d(ht)?ht.value:p(ht)?ht.values[ht.values.length-1]:c(nt,t(U,Y-1,ht.startTime,st),ht)},_=function(U,Y,nt,st,vt){return void 0===nt?[st.insertTime,vt]:l(nt)?[nt.endTime,nt.value]:d(nt)?[nt.startTime,nt.value]:p(nt)?[nt.startTime+nt.duration,nt.values[nt.values.length-1]]:[nt.startTime,ht(U,Y-1,nt.startTime,vt)]},m=function(U){return"cancelAndHold"===U.type},g=function(U){return"cancelScheduledValues"===U.type},v=function(U){return m(U)||g(U)?U.cancelTime:u(U)||h(U)?U.endTime:U.startTime},y=function(U,Y,nt,st){var ht=st.endTime,vt=st.value;return nt===vt?vt:0<nt&&0<vt||nt<0&&vt<0?nt*Math.pow(vt/nt,(U-Y)/(ht-Y)):0},b=function(U,Y,nt,st){return nt+(U-Y)/(st.endTime-Y)*(st.value-nt)},w=function(U){return"setTarget"===U.type},vt=function(){function t(U){nt(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=U}return st(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(U){var Y=v(U);if(m(U)||g(U)){var nt=this._automationEvents.findIndex((function(U){return v(U)>=Y})),st=this._automationEvents[nt];if(-1!==nt&&(this._automationEvents=this._automationEvents.slice(0,nt)),m(U)){var ht=this._automationEvents[this._automationEvents.length-1];if(void 0!==st&&l(st)){if(w(ht))throw new Error("The internal list is malformed.");var vt=p(ht)?ht.startTime+ht.duration:v(ht),yt=p(ht)?ht.values[ht.values.length-1]:ht.value,ee=u(st)?y(Y,vt,yt,st):b(Y,vt,yt,st),oe=u(st)?i(ee,Y,this._currenTime):o(ee,Y,this._currenTime);this._automationEvents.push(oe)}void 0!==ht&&w(ht)&&this._automationEvents.push(r(this.getValue(Y),Y)),void 0!==ht&&p(ht)&&ht.startTime+ht.duration>Y&&(this._automationEvents[this._automationEvents.length-1]=a(new Float32Array([6,7]),ht.startTime,Y-ht.startTime))}}else{var re=this._automationEvents.findIndex((function(U){return v(U)>Y})),be=-1===re?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[re-1];if(void 0!==be&&p(be)&&v(be)+be.duration>Y)return!1;var ze=u(U)?i(U.value,U.endTime,this._currenTime):h(U)?o(U.value,Y,this._currenTime):U;if(-1===re)this._automationEvents.push(ze);else{if(p(U)&&Y+U.duration>v(this._automationEvents[re]))return!1;this._automationEvents.splice(re,0,ze)}}return!0}},{key:"flush",value:function(U){var Y=this._automationEvents.findIndex((function(Y){return v(Y)>U}));if(Y>1){var nt=this._automationEvents.slice(Y-1),st=nt[0];w(st)&&nt.unshift(r(ht(this._automationEvents,Y-2,st.startTime,this._defaultValue),st.startTime)),this._automationEvents=nt}}},{key:"getValue",value:function(U){if(0===this._automationEvents.length)return this._defaultValue;var nt=this._automationEvents[this._automationEvents.length-1],st=this._automationEvents.findIndex((function(Y){return v(Y)>U})),vt=this._automationEvents[st],yt=v(nt)<=U?nt:this._automationEvents[st-1];if(void 0!==yt&&w(yt)&&(void 0===vt||!l(vt)||vt.insertTime>U))return c(U,ht(this._automationEvents,st-2,yt.startTime,this._defaultValue),yt);if(void 0!==yt&&d(yt)&&(void 0===vt||!l(vt)))return yt.value;if(void 0!==yt&&p(yt)&&(void 0===vt||!l(vt)||yt.startTime+yt.duration>U))return U<yt.startTime+yt.duration?function(U,Y){var nt=Y.duration,st=Y.startTime,ht=Y.values;return function(U,Y){var nt=Math.floor(Y),st=Math.ceil(Y);return nt===st?U[nt]:(1-(Y-nt))*U[nt]+(1-(st-Y))*U[st]}(ht,(U-st)/nt*(ht.length-1))}(U,yt):yt.values[yt.values.length-1];if(void 0!==yt&&l(yt)&&(void 0===vt||!l(vt)))return yt.value;if(void 0!==vt&&u(vt)){var ee=_(this._automationEvents,st-1,yt,vt,this._defaultValue),oe=Y(ee,2),re=oe[0],be=oe[1];return y(U,re,be,vt)}if(void 0!==vt&&h(vt)){var ze=_(this._automationEvents,st-1,yt,vt,this._defaultValue),tn=Y(ze,2),on=tn[0],$n=tn[1];return b(U,on,$n,vt)}return this._defaultValue}}]),t}();U.AutomationEventList=vt,U.createCancelAndHoldAutomationEvent=function(U){return{cancelTime:U,type:"cancelAndHold"}},U.createCancelScheduledValuesAutomationEvent=function(U){return{cancelTime:U,type:"cancelScheduledValues"}},U.createExponentialRampToValueAutomationEvent=function(U,Y){return{endTime:Y,type:"exponentialRampToValue",value:U}},U.createLinearRampToValueAutomationEvent=function(U,Y){return{endTime:Y,type:"linearRampToValue",value:U}},U.createSetTargetAutomationEvent=function(U,Y,nt){return{startTime:Y,target:U,timeConstant:nt,type:"setTarget"}},U.createSetValueAutomationEvent=r,U.createSetValueCurveAutomationEvent=a,Object.defineProperty(U,"__esModule",{value:!0})}(Y,nt(676),nt(682),nt(683))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(0);const i=U=>st.h.has(U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(0),ht=nt(9);const o=U=>Object(ht.a)(st.i,U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(0),ht=nt(20);const o=U=>{if(!st.a.has(U))throw new Error("The AudioNode is not stored.");st.a.delete(U),Object(ht.a)(U).forEach((U=>U(!1)))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(24);const i=U=>Object(st.a)(U[0])},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(0);const i=U=>st.a.has(U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>"context"in U},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>"context"in U},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(0),ht=nt(9);const o=U=>Object(ht.a)(st.d,U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(0),ht=nt(9);const o=U=>Object(ht.a)(st.e,U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>nt=>{const st={value:U};return Object.defineProperties(nt,{currentTarget:st,target:st}),"function"==typeof Y?Y.call(U,nt):Y.handleEvent.call(U,nt)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(15);const i=U=>{var Y;U.getChannelData=(Y=U.getChannelData,nt=>{try{return Y.call(U,nt)}catch(U){if(12===U.code)throw Object(st.a)();throw U}})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>{var Y;U.start=(Y=U.start,(nt=0,st=0,ht)=>{if("number"==typeof ht&&ht<0||st<0||nt<0)throw new RangeError("The parameters can't be negative.");Y.call(U,nt,st,ht)})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>{var Y;U.stop=(Y=U.stop,(nt=0)=>{if(nt<0)throw new RangeError("The parameter can't be negative.");Y.call(U,nt)})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>{try{U.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(12);const i=(U,Y,nt,ht)=>{if(Object(st.a)(Y)){const st=Y.inputs[ht];return U.connect(st,nt,0),[st,nt,0]}return U.connect(Y,nt,ht),[Y,nt,ht]}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(12);const i=(U,Y,nt,ht)=>{Object(st.a)(Y)?U.disconnect(Y.inputs[ht],nt,0):U.disconnect(Y,nt,ht)}},function(U,Y,nt){"use strict";function s(U,Y,nt,st,ht){if("function"==typeof U.copyFromChannel)0===Y[nt].byteLength&&(Y[nt]=new Float32Array(128)),U.copyFromChannel(Y[nt],st,ht);else{const vt=U.getChannelData(st);if(0===Y[nt].byteLength)Y[nt]=vt.slice(ht,ht+128);else{const U=new Float32Array(vt.buffer,ht*Float32Array.BYTES_PER_ELEMENT,128);Y[nt].set(U)}}}nt.d(Y,"a",(function(){return s}))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>{const nt=[];for(let st=0;st<U;st+=1){const U=[],ht="number"==typeof Y?Y:Y[st];for(let Y=0;Y<ht;Y+=1)U.push(new Float32Array(128));nt.push(U)}return nt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","InvalidAccessError")}catch(U){return U.code=15,U.name="InvalidAccessError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st)=>{let ht=Object.getPrototypeOf(U);for(;!ht.hasOwnProperty(Y);)ht=Object.getPrototypeOf(ht);const{get:vt,set:yt}=Object.getOwnPropertyDescriptor(ht,Y);Object.defineProperty(U,Y,{get:nt(vt),set:st(yt)})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>void 0===U||"number"==typeof U||"string"==typeof U&&("balanced"===U||"interactive"===U||"playback"===U)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));class s{constructor(U){this._map=new Map(U)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(U,Y=null){return this._map.forEach(((nt,st)=>U.call(Y,nt,st,this)))}get(U){return this._map.get(U)}has(U){return this._map.has(U)}keys(){return this._map.keys()}values(){return this._map.values()}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st,ht)=>{"function"==typeof U.copyToChannel?0!==Y[nt].byteLength&&U.copyToChannel(Y[nt],st,ht):0!==Y[nt].byteLength&&U.getChannelData(st).set(Y[nt],ht)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st,ht,vt,yt,ee,oe,re,be)=>{const ze=re.length;let tn=ee;for(let ee=0;ee<ze;ee+=1){let ze=nt[0]*re[ee];for(let Y=1;Y<ht;Y+=1){const st=tn-Y&oe-1;ze+=nt[Y]*vt[st],ze-=U[Y]*yt[st]}for(let U=ht;U<st;U+=1)ze+=nt[U]*vt[tn-U&oe-1];for(let nt=ht;nt<Y;nt+=1)ze-=U[nt]*yt[tn-nt&oe-1];vt[tn]=re[ee],yt[tn]=ze,tn=tn+1&oe-1,be[ee]=ze}return tn}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>null===U?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(U*Y)))))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","UnknownError")}catch(U){return U.name="UnknownError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>{if(null===U)return!1;const Y=U.length;return Y%2!=0?0!==U[Math.floor(Y/2)]:U[Y/2-1]+U[Y/2]!==0}},function(U,Y,nt){"use strict";nt(47),nt(48),nt(49),nt(50),nt(51),nt(52),nt(53),nt(54),nt(55),nt(56),nt(57),nt(58),nt(59),nt(60),nt(61),nt(62),nt(63),nt(64),nt(65),nt(66),nt(67),nt(68),nt(69),nt(70),nt(71),nt(72),nt(73),nt(74),nt(75),nt(76),nt(77),nt(78),nt(79),nt(80),nt(81),nt(82),nt(83),nt(84),nt(85),nt(86),nt(87),nt(88),nt(89),nt(90),nt(91),nt(92),nt(93),nt(94),nt(95),nt(96),nt(97),nt(98),nt(99),nt(100),nt(101),nt(102),nt(103),nt(104),nt(105),nt(106),nt(107),nt(108),nt(109),nt(110),nt(111),nt(112),nt(113),nt(114),nt(115),nt(116),nt(117),nt(118),nt(119),nt(120),nt(121),nt(122),nt(123),nt(124),nt(125),nt(126),nt(127),nt(128),nt(129)},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y,nt){"use strict";nt(131),nt(132),nt(133),nt(134),nt(135),nt(136),nt(137),nt(138),nt(139),nt(140),nt(141),nt(142),nt(143),nt(144),nt(145),nt(146),nt(147),nt(148),nt(149),nt(150),nt(151),nt(152),nt(153),nt(154),nt(155),nt(156),nt(157),nt(158),nt(159),nt(160),nt(161),nt(162),nt(163),nt(164),nt(165),nt(166),nt(167),nt(168),nt(169),nt(170),nt(171),nt(172),nt(173),nt(174),nt(175),nt(176),nt(177),nt(178),nt(179),nt(180),nt(181),nt(182),nt(183),nt(184),nt(185),nt(186),nt(187),nt(188),nt(189),nt(190),nt(191),nt(192),nt(193),nt(194),nt(195),nt(196),nt(197),nt(198),nt(199),nt(200),nt(201),nt(202),nt(203),nt(204),nt(205),nt(206),nt(207),nt(208),nt(209),nt(210),nt(211),nt(212),nt(213),nt(214),nt(215),nt(216),nt(217),nt(218),nt(219),nt(220),nt(221),nt(222),nt(223),nt(224),nt(225),nt(226),nt(227),nt(228),nt(229),nt(230),nt(231),nt(232),nt(233),nt(234),nt(235),nt(236),nt(237),nt(238),nt(239),nt(240),nt(241),nt(242),nt(243),nt(244),nt(245),nt(246),nt(247),nt(248),nt(249),nt(250),nt(251),nt(252),nt(253),nt(254),nt(255),nt(256),nt(257),nt(258),nt(259),nt(260),nt(261),nt(262),nt(263),nt(264),nt(265),nt(266),nt(267),nt(268),nt(269),nt(270),nt(271),nt(272),nt(273),nt(274),nt(275),nt(276),nt(277),nt(278),nt(279),nt(280),nt(281),nt(282),nt(283),nt(284),nt(285),nt(286),nt(287),nt(288),nt(289),nt(290),nt(291),nt(292),nt(293),nt(294),nt(295),nt(296),nt(297),nt(298),nt(299),nt(300),nt(301),nt(302),nt(303),nt(304),nt(305),nt(306),nt(307),nt(308),nt(309),nt(310),nt(311),nt(312),nt(313),nt(314),nt(315),nt(316),nt(317),nt(318),nt(319),nt(320),nt(321),nt(322),nt(323),nt(324),nt(325),nt(326),nt(327),nt(328),nt(329),nt(330),nt(331),nt(332),nt(333),nt(334),nt(335),nt(336),nt(337),nt(338),nt(339),nt(340),nt(341),nt(342),nt(343),nt(344),nt(345),nt(346),nt(347),nt(348),nt(349),nt(350),nt(351),nt(352),nt(353),nt(354),nt(355),nt(356),nt(357),nt(358),nt(359),nt(360),nt(361),nt(362),nt(363),nt(364),nt(365),nt(366),nt(367),nt(368),nt(369),nt(370),nt(371),nt(372),nt(373),nt(374),nt(375),nt(376),nt(377),nt(378),nt(379),nt(380),nt(381),nt(382),nt(383),nt(384),nt(385),nt(386),nt(387),nt(388),nt(389),nt(390),nt(391),nt(392),nt(393),nt(394),nt(395),nt(396),nt(397),nt(398),nt(399),nt(400),nt(401),nt(402),nt(403),nt(404),nt(405),nt(406),nt(407),nt(408),nt(409),nt(410),nt(411),nt(412),nt(413),nt(414),nt(415),nt(416),nt(417),nt(418),nt(419),nt(420),nt(421),nt(422),nt(423),nt(424),nt(425),nt(426),nt(427),nt(428),nt(429),nt(430),nt(431),nt(432),nt(433),nt(434),nt(435),nt(436),nt(437),nt(438),nt(439),nt(440),nt(441),nt(442),nt(443),nt(444),nt(445),nt(446),nt(447),nt(448),nt(449),nt(450),nt(451),nt(452),nt(453),nt(454),nt(455),nt(456),nt(457),nt(458),nt(459),nt(460),nt(461),nt(462),nt(463),nt(464),nt(465),nt(466),nt(467),nt(468),nt(469),nt(470),nt(471),nt(472),nt(473),nt(474),nt(475),nt(476),nt(477),nt(478),nt(479),nt(480),nt(481),nt(482),nt(483),nt(484),nt(485),nt(486),nt(487),nt(488),nt(489),nt(490),nt(491),nt(492),nt(493),nt(494),nt(495),nt(496),nt(497),nt(498),nt(499),nt(500),nt(501),nt(502),nt(503),nt(504),nt(505),nt(506),nt(507),nt(508),nt(509),nt(510),nt(511),nt(512),nt(513),nt(514)},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y){},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","AbortError")}catch(U){return U.code=20,U.name="AbortError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt,st)=>{const ht=[];for(let U=0;U<st.numberOfInputs;U+=1)ht.push(new Set);U.set(Y,{activeInputs:ht,outputs:new Set,passiveInputs:new WeakMap,renderer:nt})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>{U.set(Y,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:nt})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>{const st=U(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});nt.connect(st).connect(st.context.destination);const i=()=>{nt.removeEventListener("ended",i),nt.disconnect(st),st.disconnect()};nt.addEventListener("ended",i)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>{U(Y).add(nt)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},i=(U,Y,nt,ht,vt,yt)=>class extends U{constructor(U,nt=st){const ee=vt(U),oe={...st,...nt},re=ht(ee,oe);super(U,!1,re,yt(ee)?Y():null),this._nativeAnalyserNode=re}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(U){this._nativeAnalyserNode.fftSize=U}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(U){const Y=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=U,!(U>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=Y,nt()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(U){const Y=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=U,!(this._nativeAnalyserNode.maxDecibels>U))throw this._nativeAnalyserNode.minDecibels=Y,nt()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(U){this._nativeAnalyserNode.smoothingTimeConstant=U}getByteFrequencyData(U){this._nativeAnalyserNode.getByteFrequencyData(U)}getByteTimeDomainData(U){this._nativeAnalyserNode.getByteTimeDomainData(U)}getFloatFrequencyData(U){this._nativeAnalyserNode.getFloatFrequencyData(U)}getFloatTimeDomainData(U){this._nativeAnalyserNode.getFloatTimeDomainData(U)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt)=>()=>{const ht=new WeakMap;return{render(vt,yt,ee){const oe=ht.get(yt);return void 0!==oe?Promise.resolve(oe):(async(vt,yt,ee)=>{let oe=Y(vt);if(!Object(st.a)(oe,yt)){const Y={channelCount:oe.channelCount,channelCountMode:oe.channelCountMode,channelInterpretation:oe.channelInterpretation,fftSize:oe.fftSize,maxDecibels:oe.maxDecibels,minDecibels:oe.minDecibels,smoothingTimeConstant:oe.smoothingTimeConstant};oe=U(yt,Y)}return ht.set(yt,oe),await nt(vt,yt,oe,ee),oe})(vt,yt,ee)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return r}));var st=nt(32),ht=nt(29);const vt={numberOfChannels:1},r=(U,Y,nt,yt,ee,oe,re,be)=>{let ze=null;return class d{constructor(tn){if(null===ee)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:on,numberOfChannels:$n,sampleRate:Hn}={...vt,...tn};null===ze&&(ze=new ee(1,1,44100));const Kn=null!==yt&&Y(oe,oe)?new yt({length:on,numberOfChannels:$n,sampleRate:Hn}):ze.createBuffer($n,on,Hn);if(0===Kn.numberOfChannels)throw nt();return"function"!=typeof Kn.copyFromChannel?(re(Kn),Object(ht.a)(Kn)):Y(st.a,(()=>Object(st.a)(Kn)))||be(Kn),U.add(Kn),Kn}static[Symbol.hasInstance](Y){return null!==Y&&"object"==typeof Y&&Object.getPrototypeOf(Y)===d.prototype||U.has(Y)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return a}));var st=nt(2),ht=nt(17),vt=nt(21);const yt={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},a=(U,Y,nt,ee,oe,re,be,ze)=>class extends U{constructor(U,ht=yt){const vt=re(U),ee={...yt,...ht},ze=oe(vt,ee),tn=be(vt),on=tn?Y():null;super(U,!1,ze,on),this._audioBufferSourceNodeRenderer=on,this._isBufferNullified=!1,this._isBufferSet=null!==ht.buffer&&void 0!==ht.buffer,this._nativeAudioBufferSourceNode=ze,this._onended=null,this._playbackRate=nt(this,tn,ze.playbackRate,st.b,st.a)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(U){try{this._nativeAudioBufferSourceNode.buffer=U}catch(Y){if(null!==U||17!==Y.code)throw Y;if(null!==this._nativeAudioBufferSourceNode.buffer){const U=this._nativeAudioBufferSourceNode.buffer,Y=U.numberOfChannels;for(let nt=0;nt<Y;nt+=1)U.getChannelData(nt).fill(0);this._isBufferNullified=!0}}if(null!==U){if(this._isBufferSet)throw ee();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(U){this._nativeAudioBufferSourceNode.loop=U}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(U){this._nativeAudioBufferSourceNode.loopEnd=U}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(U){this._nativeAudioBufferSourceNode.loopStart=U}get onended(){return this._onended}set onended(U){const Y="function"==typeof U?ze(this,U):null;this._nativeAudioBufferSourceNode.onended=Y;const nt=this._nativeAudioBufferSourceNode.onended;this._onended=null!==nt&&nt===Y?U:nt}get playbackRate(){return this._playbackRate}start(U=0,Y=0,nt){if(this._nativeAudioBufferSourceNode.start(U,Y,nt),null!==this._audioBufferSourceNodeRenderer)this._audioBufferSourceNodeRenderer.start=void 0===nt?[U,Y]:[U,Y,nt];else{Object(ht.a)(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),setTimeout((()=>Object(vt.a)(this)),1e3)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(U=0){this._nativeAudioBufferSourceNode.stop(U),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=U)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt,ht,vt)=>()=>{const yt=new WeakMap;let ee=null,oe=null;return{set start(U){ee=U},set stop(U){oe=U},render(re,be,ze){const tn=yt.get(be);return void 0!==tn?Promise.resolve(tn):(async(re,be,ze)=>{let tn=nt(re);const on=Object(st.a)(tn,be);if(!on){const U={buffer:tn.buffer,channelCount:tn.channelCount,channelCountMode:tn.channelCountMode,channelInterpretation:tn.channelInterpretation,loop:tn.loop,loopEnd:tn.loopEnd,loopStart:tn.loopStart,playbackRate:tn.playbackRate.value};tn=Y(be,U),null!==ee&&tn.start(...ee),null!==oe&&tn.stop(oe)}return yt.set(be,tn),on?await U(be,re.playbackRate,tn.playbackRate,ze):await ht(be,re.playbackRate,tn.playbackRate,ze),await vt(re,be,tn,ze),tn})(re,be,ze)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(39);const i=(U,Y,nt,ht,vt,yt,ee,oe,re)=>class extends U{constructor(U={}){if(null===re)throw new Error("Missing the native AudioContext constructor.");const Y=new re(U);if(null===Y)throw ht();if(!Object(st.a)(U.latencyHint))throw new TypeError(`The provided value '${U.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==U.sampleRate&&Y.sampleRate!==U.sampleRate)throw nt();super(Y,2);const{latencyHint:vt}=U,{sampleRate:yt}=Y;if(this._baseLatency="number"==typeof Y.baseLatency?Y.baseLatency:"balanced"===vt?512/yt:"interactive"===vt||void 0===vt?256/yt:"playback"===vt?1024/yt:128*Math.max(2,Math.min(128,Math.round(vt*yt/128)))/yt,this._nativeAudioContext=Y,this._state=null,"running"===Y.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),Y.removeEventListener("statechange",t)};Y.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw Y()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}createMediaElementSource(U){return new vt(this,{mediaElement:U})}createMediaStreamDestination(){return new yt(this)}createMediaStreamSource(U){return new ee(this,{mediaStream:U})}createMediaStreamTrackSource(U){return new oe(this,{mediaStreamTrack:U})}resume(){return"suspended"===this._state?new Promise(((U,Y)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?U():this.resume().then(U,Y)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((U=>{if(void 0===U||15===U.code)throw Y();throw U}))}suspend(){return this._nativeAudioContext.suspend().catch((U=>{if(void 0===U)throw Y();throw U}))}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st,ht,vt,yt,ee)=>class extends U{constructor(U,nt){const st=vt(U),oe=yt(st),re=ht(st,nt,oe);super(U,!1,re,oe?Y(ee):null),this._isNodeOfNativeOfflineAudioContext=oe,this._nativeAudioDestinationNode=re}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(U){if(this._isNodeOfNativeOfflineAudioContext)throw st();if(U>this._nativeAudioDestinationNode.maxChannelCount)throw nt();this._nativeAudioDestinationNode.channelCount=U}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(U){if(this._isNodeOfNativeOfflineAudioContext)throw st();this._nativeAudioDestinationNode.channelCountMode=U}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>{let Y=null;return{render:(nt,st,ht)=>(null===Y&&(Y=(async(Y,nt,st)=>{const ht=nt.destination;return await U(Y,nt,ht,st),ht})(nt,st,ht)),Y)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(2);const i=(U,Y,nt,ht,vt)=>(yt,ee)=>{const oe=ee.listener,{forwardX:re,forwardY:be,forwardZ:ze,positionX:tn,positionY:on,positionZ:$n,upX:Hn,upY:Kn,upZ:ts}=void 0===oe.forwardX?(()=>{const re=Y(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),be=vt(ee),ze=ht(ee,256,9,0),d=(Y,ht)=>{const vt=nt(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ht});return vt.connect(re,0,Y),vt.start(),Object.defineProperty(vt.offset,"defaultValue",{get:()=>ht}),U({context:yt},be,vt.offset,st.b,st.a)};let tn=[0,0,-1,0,1,0],on=[0,0,0];return ze.onaudioprocess=({inputBuffer:U})=>{const Y=[U.getChannelData(0)[0],U.getChannelData(1)[0],U.getChannelData(2)[0],U.getChannelData(3)[0],U.getChannelData(4)[0],U.getChannelData(5)[0]];Y.some(((U,Y)=>U!==tn[Y]))&&(oe.setOrientation(...Y),tn=Y);const nt=[U.getChannelData(6)[0],U.getChannelData(7)[0],U.getChannelData(8)[0]];nt.some(((U,Y)=>U!==on[Y]))&&(oe.setPosition(...nt),on=nt)},re.connect(ze),{forwardX:d(0,0),forwardY:d(1,0),forwardZ:d(2,-1),positionX:d(6,0),positionY:d(7,0),positionZ:d(8,0),upX:d(3,0),upY:d(4,1),upZ:d(5,0)}})():oe;return{get forwardX(){return re},get forwardY(){return be},get forwardZ(){return ze},get positionX(){return tn},get positionY(){return on},get positionZ(){return $n},get upX(){return Hn},get upY(){return Kn},get upZ(){return ts}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(18);const i=(U,Y,nt,ht,vt,yt,ee,oe,re,be,ze,tn)=>(on,$n,Hn,Kn=null,ts=null)=>{const es=new st.AutomationEventList(Hn.defaultValue),Fs=$n?ht(es):null,Ns={get defaultValue(){return Hn.defaultValue},get maxValue(){return null===Kn?Hn.maxValue:Kn},get minValue(){return null===ts?Hn.minValue:ts},get value(){return Hn.value},set value(U){Hn.value=U,Ns.setValueAtTime(U,on.context.currentTime)},cancelAndHoldAtTime(U){if("function"==typeof Hn.cancelAndHoldAtTime)null===Fs&&es.flush(on.context.currentTime),es.add(vt(U)),Hn.cancelAndHoldAtTime(U);else{const Y=Array.from(es).pop();null===Fs&&es.flush(on.context.currentTime),es.add(vt(U));const nt=Array.from(es).pop();Hn.cancelScheduledValues(U),Y!==nt&&void 0!==nt&&("exponentialRampToValue"===nt.type?Hn.exponentialRampToValueAtTime(nt.value,nt.endTime):"linearRampToValue"===nt.type?Hn.linearRampToValueAtTime(nt.value,nt.endTime):"setValue"===nt.type?Hn.setValueAtTime(nt.value,nt.startTime):"setValueCurve"===nt.type&&Hn.setValueCurveAtTime(nt.values,nt.startTime,nt.duration))}return Ns},cancelScheduledValues:U=>(null===Fs&&es.flush(on.context.currentTime),es.add(yt(U)),Hn.cancelScheduledValues(U),Ns),exponentialRampToValueAtTime:(U,Y)=>(null===Fs&&es.flush(on.context.currentTime),es.add(ee(U,Y)),Hn.exponentialRampToValueAtTime(U,Y),Ns),linearRampToValueAtTime:(U,Y)=>(null===Fs&&es.flush(on.context.currentTime),es.add(oe(U,Y)),Hn.linearRampToValueAtTime(U,Y),Ns),setTargetAtTime:(U,Y,nt)=>(null===Fs&&es.flush(on.context.currentTime),es.add(re(U,Y,nt)),Hn.setTargetAtTime(U,Y,nt),Ns),setValueAtTime:(U,Y)=>(null===Fs&&es.flush(on.context.currentTime),es.add(be(U,Y)),Hn.setValueAtTime(U,Y),Ns),setValueCurveAtTime(U,Y,nt){if(null!==tn&&"webkitAudioContext"===tn.name){const st=Y+nt,ht=on.context.sampleRate,vt=Math.ceil(Y*ht),yt=Math.floor(st*ht),ee=yt-vt,oe=new Float32Array(ee);for(let st=0;st<ee;st+=1){const yt=(U.length-1)/nt*((vt+st)/ht-Y),ee=Math.floor(yt),re=Math.ceil(yt);oe[st]=ee===re?U[ee]:(1-(yt-ee))*U[ee]+(1-(re-yt))*U[re]}null===Fs&&es.flush(on.context.currentTime),es.add(ze(oe,Y,nt)),Hn.setValueCurveAtTime(oe,Y,nt);const re=yt/ht;re<st&&Ns.setValueAtTime(oe[oe.length-1],re),Ns.setValueAtTime(U[U.length-1],st)}else null===Fs&&es.flush(on.context.currentTime),es.add(ze(U,Y,nt)),Hn.setValueCurveAtTime(U,Y,nt);return Ns}};return nt.set(Ns,Hn),Y.set(Ns,on),U(Ns,Fs),Ns}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>({replay(Y){for(const nt of U)if("exponentialRampToValue"===nt.type){const{endTime:U,value:st}=nt;Y.exponentialRampToValueAtTime(st,U)}else if("linearRampToValue"===nt.type){const{endTime:U,value:st}=nt;Y.linearRampToValueAtTime(st,U)}else if("setTarget"===nt.type){const{startTime:U,target:st,timeConstant:ht}=nt;Y.setTargetAtTime(st,U,ht)}else if("setValue"===nt.type){const{startTime:U,value:st}=nt;Y.setValueAtTime(st,U)}else{if("setValueCurve"!==nt.type)throw new Error("Can't apply an unknown automation.");{const{duration:U,startTime:st,values:ht}=nt;Y.setValueCurveAtTime(ht,st,U)}}}})},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return a}));var st=nt(0),ht=nt(40);const vt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:void 0,parameterData:{},processorOptions:{}},r=U=>{const Y=[];for(let nt=0;nt<U;nt+=1)Y.push(1);return Y},a=(U,Y,nt,yt,ee,oe,re,be,ze)=>class extends Y{constructor(Y,ze,tn=vt){const on=oe(Y),$n=re(on),Hn=(U=>({...U,outputChannelCount:void 0!==U.outputChannelCount?U.outputChannelCount:1===U.numberOfInputs&&1===U.numberOfOutputs?[U.channelCount]:r(U.numberOfOutputs)}))({...vt,...tn}),Kn=st.j.get(on),ts=void 0===Kn?void 0:Kn.get(ze),es=ee(on,$n?null:Y.baseLatency,be,ze,ts,Hn);super(Y,!0,es,$n?yt(ze,Hn,ts):null);const Fs=[];es.parameters.forEach(((U,Y)=>{const st=nt(this,$n,U);Fs.push([Y,st])})),this._nativeAudioWorkletNode=es,this._onprocessorerror=null,this._parameters=new ht.a(Fs),$n&&U(on,this)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(U){const Y="function"==typeof U?ze(this,U):null;this._nativeAudioWorkletNode.onprocessorerror=Y;const nt=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==nt&&nt===Y?U:nt}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st,ht,vt,yt,ee,oe,re,be,ze,tn,on,$n,Hn,Kn,ts,es,Fs)=>class extends $n{constructor(Y,nt){super(Y,nt),this._nativeContext=Y,this._audioWorklet=void 0===U?void 0:{addModule:(Y,nt)=>U(this,Y,nt)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new Y(this)}createBiquadFilter(){return new ht(this)}createBuffer(U,Y,st){return new nt({length:Y,numberOfChannels:U,sampleRate:st})}createBufferSource(){return new st(this)}createChannelMerger(U=6){return new vt(this,{numberOfInputs:U})}createChannelSplitter(U=6){return new yt(this,{numberOfOutputs:U})}createConstantSource(){return new ee(this)}createConvolver(){return new oe(this)}createDelay(U=1){return new be(this,{maxDelayTime:U})}createDynamicsCompressor(){return new ze(this)}createGain(){return new tn(this)}createIIRFilter(U,Y){return new on(this,{feedback:Y,feedforward:U})}createOscillator(){return new Hn(this)}createPanner(){return new Kn(this)}createPeriodicWave(U,Y,nt={disableNormalization:!1}){return new ts(this,{...nt,imag:Y,real:U})}createStereoPanner(){return new es(this)}createWaveShaper(){return new Fs(this)}decodeAudioData(U,Y,nt){return re(this._nativeContext,U).then((U=>("function"==typeof Y&&Y(U),U))).catch((U=>{throw"function"==typeof nt&&nt(U),U}))}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(2);const ht={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},o=(U,Y,nt,vt,yt,ee,oe)=>class extends U{constructor(U,vt=ht){const re=ee(U),be={...ht,...vt},ze=yt(re,be),tn=oe(re);super(U,!1,ze,tn?nt():null),this._Q=Y(this,tn,ze.Q,st.b,st.a),this._detune=Y(this,tn,ze.detune,1200*Math.log2(st.b),-1200*Math.log2(st.b)),this._frequency=Y(this,tn,ze.frequency,U.sampleRate/2,0),this._gain=Y(this,tn,ze.gain,40*Math.log10(st.b),st.a),this._nativeBiquadFilterNode=ze}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(U){this._nativeBiquadFilterNode.type=U}getFrequencyResponse(U,Y,nt){if(this._nativeBiquadFilterNode.getFrequencyResponse(U,Y,nt),U.length!==Y.length||Y.length!==nt.length)throw vt()}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt,ht,vt)=>()=>{const yt=new WeakMap;return{render(ee,oe,re){const be=yt.get(oe);return void 0!==be?Promise.resolve(be):(async(ee,oe,re)=>{let be=nt(ee);const ze=Object(st.a)(be,oe);if(!ze){const U={Q:be.Q.value,channelCount:be.channelCount,channelCountMode:be.channelCountMode,channelInterpretation:be.channelInterpretation,detune:be.detune.value,frequency:be.frequency.value,gain:be.gain.value,type:be.type};be=Y(oe,U)}return yt.set(oe,be),ze?(await U(oe,ee.Q,be.Q,re),await U(oe,ee.detune,be.detune,re),await U(oe,ee.frequency,be.frequency,re),await U(oe,ee.gain,be.gain,re)):(await ht(oe,ee.Q,be.Q,re),await ht(oe,ee.detune,be.detune,re),await ht(oe,ee.frequency,be.frequency,re),await ht(oe,ee.gain,be.gain,re)),await vt(ee,oe,be,re),be})(ee,oe,re)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>(nt,st)=>{const ht=Y.get(nt);if(void 0!==ht)return ht;const vt=U.get(nt);if(void 0!==vt)return vt;try{const ht=st();return ht instanceof Promise?(U.set(nt,ht),ht.catch((()=>!1)).then((st=>(U.delete(nt),Y.set(nt,st),st)))):(Y.set(nt,ht),ht)}catch{return Y.set(nt,!1),!1}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},i=(U,Y,nt,ht,vt)=>class extends U{constructor(U,yt=st){const ee=ht(U),oe={...st,...yt};super(U,!1,nt(ee,oe),vt(ee)?Y():null)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt)=>()=>{const ht=new WeakMap;return{render(vt,yt,ee){const oe=ht.get(yt);return void 0!==oe?Promise.resolve(oe):(async(vt,yt,ee)=>{let oe=Y(vt);if(!Object(st.a)(oe,yt)){const Y={channelCount:oe.channelCount,channelCountMode:oe.channelCountMode,channelInterpretation:oe.channelInterpretation,numberOfInputs:oe.numberOfInputs};oe=U(yt,Y)}return ht.set(yt,oe),await nt(vt,yt,oe,ee),oe})(vt,yt,ee)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},i=(U,Y,nt,ht,vt)=>class extends U{constructor(U,yt=st){const ee=ht(U),oe=(U=>({...U,channelCount:U.numberOfOutputs}))({...st,...yt});super(U,!1,nt(ee,oe),vt(ee)?Y():null)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt)=>()=>{const ht=new WeakMap;return{render(vt,yt,ee){const oe=ht.get(yt);return void 0!==oe?Promise.resolve(oe):(async(vt,yt,ee)=>{let oe=Y(vt);if(!Object(st.a)(oe,yt)){const Y={channelCount:oe.channelCount,channelCountMode:oe.channelCountMode,channelInterpretation:oe.channelInterpretation,numberOfOutputs:oe.numberOfOutputs};oe=U(yt,Y)}return ht.set(yt,oe),await nt(vt,yt,oe,ee),oe})(vt,yt,ee)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt,st,ht)=>U(nt,Y,st,ht)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(25);const i=U=>(Y,nt,ht=0,vt=0)=>{const yt=Y[ht];if(void 0===yt)throw U();return Object(st.a)(nt)?yt.connect(nt,0,vt):yt.connect(nt,0)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>{const st=U(Y),ht=Y.createBuffer(1,2,Y.sampleRate);return st.buffer=ht,st.loop=!0,st.connect(nt),st.start(),()=>{st.stop(),st.disconnect(nt)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return a}));var st=nt(2),ht=nt(17),vt=nt(21);const yt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},a=(U,Y,nt,ee,oe,re,be)=>class extends U{constructor(U,ht=yt){const vt=oe(U),be={...yt,...ht},ze=ee(vt,be),tn=re(vt),on=tn?nt():null;super(U,!1,ze,on),this._constantSourceNodeRenderer=on,this._nativeConstantSourceNode=ze,this._offset=Y(this,tn,ze.offset,st.b,st.a),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(U){const Y="function"==typeof U?be(this,U):null;this._nativeConstantSourceNode.onended=Y;const nt=this._nativeConstantSourceNode.onended;this._onended=null!==nt&&nt===Y?U:nt}start(U=0){if(this._nativeConstantSourceNode.start(U),null!==this._constantSourceNodeRenderer)this._constantSourceNodeRenderer.start=U;else{Object(ht.a)(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),setTimeout((()=>Object(vt.a)(this)),1e3)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(U=0){this._nativeConstantSourceNode.stop(U),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=U)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt,ht,vt)=>()=>{const yt=new WeakMap;let ee=null,oe=null;return{set start(U){ee=U},set stop(U){oe=U},render(re,be,ze){const tn=yt.get(be);return void 0!==tn?Promise.resolve(tn):(async(re,be,ze)=>{let tn=nt(re);const on=Object(st.a)(tn,be);if(!on){const U={channelCount:tn.channelCount,channelCountMode:tn.channelCountMode,channelInterpretation:tn.channelInterpretation,offset:tn.offset.value};tn=Y(be,U),null!==ee&&tn.start(ee),null!==oe&&tn.stop(oe)}return yt.set(be,tn),on?await U(be,re.offset,tn.offset,ze):await ht(be,re.offset,tn.offset,ze),await vt(re,be,tn,ze),tn})(re,be,ze)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>(U[0]=Y,U[0])},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},i=(U,Y,nt,ht,vt)=>class extends U{constructor(U,yt=st){const ee=ht(U),oe={...st,...yt},re=nt(ee,oe);super(U,!1,re,vt(ee)?Y():null),this._isBufferNullified=!1,this._nativeConvolverNode=re}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(U){if(this._nativeConvolverNode.buffer=U,null===U&&null!==this._nativeConvolverNode.buffer){const U=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=U.createBuffer(1,1,U.sampleRate),this._isBufferNullified=!0}else this._isBufferNullified=!1}get normalize(){return this._nativeConvolverNode.normalize}set normalize(U){this._nativeConvolverNode.normalize=U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(12),ht=nt(3);const o=(U,Y,nt)=>()=>{const vt=new WeakMap;return{render(yt,ee,oe){const re=vt.get(ee);return void 0!==re?Promise.resolve(re):(async(yt,ee,oe)=>{let re=Y(yt);if(!Object(ht.a)(re,ee)){const Y={buffer:re.buffer,channelCount:re.channelCount,channelCountMode:re.channelCountMode,channelInterpretation:re.channelInterpretation,disableNormalization:!re.normalize};re=U(ee,Y)}return vt.set(ee,re),Object(st.a)(re)?await nt(yt,ee,re.inputs[0],oe):await nt(yt,ee,re,oe),re})(yt,ee,oe)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>(nt,st,ht)=>{if(null===Y)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new Y(nt,st,ht)}catch(Y){if("IndexSizeError"===Y.name||"SyntaxError"===Y.name)throw U();throw Y}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","DataCloneError")}catch(U){return U.code=25,U.name="DataCloneError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(22);const i=(U,Y,nt,ht,vt,yt,ee,oe)=>(re,be)=>{const ze=Y.get(re);if(void 0===ze)throw new Error("Missing the expected cycle count.");const tn=yt(re.context),on=oe(tn);if(ze===be){if(Y.delete(re),!on&&ee(re)){const Y=ht(re),{outputs:yt}=nt(re);for(const nt of yt)if(Object(st.a)(nt)){const st=ht(nt[0]);U(Y,st,nt[1],nt[2])}else{const U=vt(nt[0]);Y.connect(U,nt[1])}}}else Y.set(re,ze-be)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},i=(U,Y,nt,ht,vt,yt)=>class extends U{constructor(U,ee=st){const oe=vt(U),re={...st,...ee},be=ht(oe,re),ze=yt(oe);super(U,!1,be,ze?nt(re.maxDelayTime):null),this._delayTime=Y(this,ze,be.delayTime,re.maxDelayTime,0)}get delayTime(){return this._delayTime}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt,ht,vt)=>yt=>{const ee=new WeakMap;return{render(oe,re,be){const ze=ee.get(re);return void 0!==ze?Promise.resolve(ze):(async(oe,re,be)=>{let ze=nt(oe);const tn=Object(st.a)(ze,re);if(!tn){const U={channelCount:ze.channelCount,channelCountMode:ze.channelCountMode,channelInterpretation:ze.channelInterpretation,delayTime:ze.delayTime.value,maxDelayTime:yt};ze=Y(re,U)}return ee.set(re,ze),tn?await U(re,oe.delayTime,ze.delayTime,be):await ht(re,oe.delayTime,ze.delayTime,be),await vt(oe,re,ze,be),ze})(oe,re,be)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>{U(Y).delete(nt)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(25);const i=(U,Y,nt)=>{const st=Y[nt];if(void 0===st)throw U();return st},o=U=>(Y,nt,ht,vt=0)=>void 0===nt?Y.forEach((U=>U.disconnect())):"number"==typeof nt?i(U,Y,nt).disconnect():Object(st.a)(nt)?void 0===ht?Y.forEach((U=>U.disconnect(nt))):void 0===vt?i(U,Y,ht).disconnect(nt,0):i(U,Y,ht).disconnect(nt,0,vt):void 0===ht?Y.forEach((U=>U.disconnect(nt))):i(U,Y,ht).disconnect(nt,0)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},i=(U,Y,nt,ht,vt,yt,ee)=>class extends U{constructor(U,vt=st){const oe=yt(U),re={...st,...vt},be=ht(oe,re),ze=ee(oe);super(U,!1,be,ze?nt():null),this._attack=Y(this,ze,be.attack,1,0),this._knee=Y(this,ze,be.knee,40,0),this._nativeDynamicsCompressorNode=be,this._ratio=Y(this,ze,be.ratio,20,1),this._release=Y(this,ze,be.release,1,0),this._threshold=Y(this,ze,be.threshold,0,-100)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(U){const Y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=U,U>2)throw this._nativeDynamicsCompressorNode.channelCount=Y,vt()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(U){const Y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=U,"max"===U)throw this._nativeDynamicsCompressorNode.channelCountMode=Y,vt()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt,ht,vt)=>()=>{const yt=new WeakMap;return{render(ee,oe,re){const be=yt.get(oe);return void 0!==be?Promise.resolve(be):(async(ee,oe,re)=>{let be=nt(ee);const ze=Object(st.a)(be,oe);if(!ze){const U={attack:be.attack.value,channelCount:be.channelCount,channelCountMode:be.channelCountMode,channelInterpretation:be.channelInterpretation,knee:be.knee.value,ratio:be.ratio.value,release:be.release.value,threshold:be.threshold.value};be=Y(oe,U)}return yt.set(oe,be),ze?(await U(oe,ee.attack,be.attack,re),await U(oe,ee.knee,be.knee,re),await U(oe,ee.ratio,be.ratio,re),await U(oe,ee.release,be.release,re),await U(oe,ee.threshold,be.threshold,re)):(await ht(oe,ee.attack,be.attack,re),await ht(oe,ee.knee,be.knee,re),await ht(oe,ee.ratio,be.ratio,re),await ht(oe,ee.release,be.release,re),await ht(oe,ee.threshold,be.threshold,re)),await vt(ee,oe,be,re),be})(ee,oe,re)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>{try{return new DOMException("","EncodingError")}catch(U){return U.code=0,U.name="EncodingError",U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>new Promise(((nt,st)=>{if(null===U)return void st(new SyntaxError);const ht=U.document.head;if(null===ht)st(new SyntaxError);else{const vt=U.document.createElement("script"),yt=new Blob([Y],{type:"application/javascript"}),ee=URL.createObjectURL(yt),oe=U.onerror,u=()=>{U.onerror=oe,URL.revokeObjectURL(ee)};U.onerror=(Y,nt,ht,vt,yt)=>nt===ee||nt===U.location.href&&1===ht&&1===vt?(u(),st(yt),!1):null!==oe?oe(Y,nt,ht,vt,yt):void 0,vt.onerror=()=>{u(),st(new SyntaxError)},vt.onload=()=>{u(),nt()},vt.src=ee,vt.type="module",ht.appendChild(vt)}}))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>class{constructor(U){this._nativeEventTarget=U,this._listeners=new WeakMap}addEventListener(Y,nt,st){if(null!==nt){let ht=this._listeners.get(nt);void 0===ht&&(ht=U(this,nt),"function"==typeof nt&&this._listeners.set(nt,ht)),this._nativeEventTarget.addEventListener(Y,ht,st)}}dispatchEvent(U){return this._nativeEventTarget.dispatchEvent(U)}removeEventListener(U,Y,nt){const st=null===Y?void 0:this._listeners.get(Y);this._nativeEventTarget.removeEventListener(U,void 0===st?null:st,nt)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt,st)=>{Object.defineProperties(U,{currentFrame:{configurable:!0,get:()=>Math.round(Y*nt)},currentTime:{configurable:!0,get:()=>Y}});try{return st()}finally{null!==U&&(delete U.currentFrame,delete U.currentTime)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>async Y=>{try{const U=await fetch(Y);if(U.ok)return U.text()}catch{}throw U()}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(2);const ht={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},o=(U,Y,nt,vt,yt,ee)=>class extends U{constructor(U,oe=ht){const re=yt(U),be={...ht,...oe},ze=vt(re,be),tn=ee(re);super(U,!1,ze,tn?nt():null),this._gain=Y(this,tn,ze.gain,st.b,st.a)}get gain(){return this._gain}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt,ht,vt)=>()=>{const yt=new WeakMap;return{render(ee,oe,re){const be=yt.get(oe);return void 0!==be?Promise.resolve(be):(async(ee,oe,re)=>{let be=nt(ee);const ze=Object(st.a)(be,oe);if(!ze){const U={channelCount:be.channelCount,channelCountMode:be.channelCountMode,channelInterpretation:be.channelInterpretation,gain:be.gain.value};be=Y(oe,U)}return yt.set(oe,be),ze?await U(oe,ee.gain,be.gain,re):await ht(oe,ee.gain,be.gain,re),await vt(ee,oe,be,re),be})(ee,oe,re)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U(Y);if(null===nt.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return nt.renderer}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U(Y);if(null===nt.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return nt.renderer}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(0);const i=(U,Y,nt)=>ht=>{if("closed"===ht.state&&null!==Y&&"webkitAudioContext"!==Y.name){if(!U(ht)){const U=st.f.get(ht);if(void 0!==U)return U;const nt=new Y;return st.f.set(ht,nt),nt}{const U=st.f.get(ht);if(void 0!==U)return U;if(null!==nt){const U=new nt(1,1,44100);return st.f.set(ht,U),U}}}return null}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(7);const i=U=>Y=>{const nt=U.get(Y);if(void 0===nt)throw Object(st.a)();return nt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U.get(Y);if(void 0===nt)throw new Error("The context has no set of AudioWorkletNodes.");return nt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(42),ht=nt(3);const o=(U,Y,nt,vt,yt,ee)=>(oe,re)=>{const be=new WeakMap;let ze=null;const d=async(tn,on,$n)=>{let Hn=null,Kn=nt(tn);const ts=Object(ht.a)(Kn,on);if(void 0===on.createIIRFilter?Hn=U(on):ts||(Kn=Y(on,(U=>U.createIIRFilter(re,oe)))),be.set(on,null===Hn?Kn:Hn),null!==Hn){if(null===ze){if(null===vt)throw new Error("Missing the native OfflineAudioContext constructor.");const U=new vt(tn.context.destination.channelCount,tn.context.length,on.sampleRate);ze=(async()=>(await yt(tn,U,U.destination,$n),((U,Y,nt,ht)=>{const vt=nt.length,yt=ht.length,ee=Math.min(vt,yt);if(1!==nt[0]){for(let U=0;U<vt;U+=1)ht[U]/=nt[0];for(let U=1;U<yt;U+=1)nt[U]/=nt[0]}const oe=new Float32Array(32),re=new Float32Array(32),be=Y.createBuffer(U.numberOfChannels,U.length,U.sampleRate),ze=U.numberOfChannels;for(let Y=0;Y<ze;Y+=1){const ze=U.getChannelData(Y),tn=be.getChannelData(Y);oe.fill(0),re.fill(0),Object(st.a)(nt,vt,ht,yt,ee,oe,re,0,32,ze,tn)}return be})(await ee(U),on,oe,re)))()}const U=await ze;return Hn.buffer=U,Hn.start(0),Hn}return await yt(tn,on,Kn,$n),Kn};return{render(U,Y,nt){const st=be.get(Y);return void 0!==st?Promise.resolve(st):d(U,Y,nt)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(22);const i=(U,Y,nt,ht,vt,yt)=>ee=>(oe,re)=>{const be=U.get(oe);if(void 0===be){if(!ee&&yt(oe)){const U=ht(oe),{outputs:yt}=nt(oe);for(const nt of yt)if(Object(st.a)(nt)){const st=ht(nt[0]);Y(U,st,nt[1],nt[2])}else{const Y=vt(nt[0]);U.disconnect(Y,nt[1])}}U.set(oe,re)}else U.set(oe,be+re)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>nt=>{const st=U.get(nt);return Y(st)||Y(nt)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>nt=>U.has(nt)||Y(nt)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>nt=>U.has(nt)||Y(nt)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>nt=>{const st=U.get(nt);return Y(st)||Y(nt)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>null!==U&&Y instanceof U},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>null!==U&&"function"==typeof U.AudioNode&&Y instanceof U.AudioNode},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>null!==U&&"function"==typeof U.AudioParam&&Y instanceof U.AudioParam},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>nt=>U(nt)||Y(nt)},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>null!==U&&Y instanceof U},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>null!==U&&U.isSecureContext},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=async(U,Y,nt,st,ht,vt,yt,ee,oe,re,be,ze,tn,on)=>!!(U(Y,Y)&&U(nt,nt)&&U(ht,ht)&&U(vt,vt)&&U(ee,ee)&&U(oe,oe)&&U(re,re)&&U(be,be)&&U(ze,ze))&&(await Promise.all([U(st,st),U(yt,yt),U(tn,tn),U(on,on)])).every((U=>U))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st)=>class extends U{constructor(U,ht){const vt=nt(U),yt=Y(vt,ht);if(st(vt))throw TypeError();super(U,!0,yt,null),this._mediaElement=ht.mediaElement,this._nativeMediaElementAudioSourceNode=yt}get mediaElement(){return void 0===this._nativeMediaElementAudioSourceNode.mediaElement?this._mediaElement:this._nativeMediaElementAudioSourceNode.mediaElement}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},i=(U,Y,nt,ht)=>class extends U{constructor(U,vt=st){const yt=nt(U);if(ht(yt))throw new TypeError;const ee={...st,...vt},oe=Y(yt,ee);super(U,!1,oe,null),this._nativeMediaStreamAudioDestinationNode=oe}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st)=>class extends U{constructor(U,ht){const vt=nt(U),yt=Y(vt,ht);if(st(vt))throw new TypeError;super(U,!0,yt,null),this._nativeMediaStreamAudioSourceNode=yt}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt)=>class extends U{constructor(U,st){const ht=nt(U);super(U,!0,Y(ht,st),null)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(39);const i=(U,Y,nt,ht,vt)=>class extends ht{constructor(U={}){if(null===vt)throw new Error("Missing the native AudioContext constructor.");const ht=new vt(U);if(null===ht)throw nt();if(!Object(st.a)(U.latencyHint))throw new TypeError(`The provided value '${U.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==U.sampleRate&&ht.sampleRate!==U.sampleRate)throw Y();super(ht,2);const{latencyHint:yt}=U,{sampleRate:ee}=ht;if(this._baseLatency="number"==typeof ht.baseLatency?ht.baseLatency:"balanced"===yt?512/ee:"interactive"===yt||void 0===yt?256/ee:"playback"===yt?1024/ee:128*Math.max(2,Math.min(128,Math.round(yt*ee/128)))/ee,this._nativeAudioContext=ht,this._state=null,"running"===ht.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),ht.removeEventListener("statechange",t)};ht.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw U()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}resume(){return"suspended"===this._state?new Promise(((U,Y)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?U():this.resume().then(U,Y)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((Y=>{if(void 0===Y||15===Y.code)throw U();throw Y}))}suspend(){return this._nativeAudioContext.suspend().catch((Y=>{if(void 0===Y)throw U();throw Y}))}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(0);const i=(U,Y,nt,ht,vt,yt)=>class extends nt{constructor(nt,yt){super(nt),this._nativeContext=nt,st.g.set(this,nt);const ee=nt.sampleRate;Object.defineProperty(nt,"sampleRate",{get:()=>ee}),ht(nt)&&vt.set(nt,new Set),this._destination=new U(this,yt),this._listener=Y(this,nt),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(U){const Y="function"==typeof U?yt(this,U):null;this._nativeContext.onstatechange=Y;const nt=this._nativeContext.onstatechange;this._onstatechange=null!==nt&&nt===Y?U:nt}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(14);const ht={numberOfChannels:1},o=(U,Y,nt,vt,yt)=>class extends vt{constructor(Y){const{length:vt,numberOfChannels:yt,sampleRate:ee}={...ht,...Y},oe=nt(yt,vt,ee);U(st.a,(()=>Object(st.a)(oe)))||oe.addEventListener("statechange",(()=>{let U=0;const e=Y=>{"running"===this._state&&(U>0?(oe.removeEventListener("statechange",e),Y.stopImmediatePropagation(),this._waitForThePromiseToSettle(Y)):U+=1)};return e})()),super(oe,yt),this._length=vt,this._nativeOfflineAudioContext=oe,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(Y()):(this._state="running",yt(this.destination,this._nativeOfflineAudioContext).then((U=>(this._state=null,U))).catch((U=>{throw this._state=null,U})))}_waitForThePromiseToSettle(U){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(U):setTimeout((()=>this._waitForThePromiseToSettle(U)))}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>(nt,st,ht)=>{const vt=new Set;var yt,ee;return nt.connect=(yt=nt.connect,(ht,ee=0,oe=0)=>{const re=0===vt.size;if(Y(ht))return yt.call(nt,ht,ee,oe),U(vt,[ht,ee,oe],(U=>U[0]===ht&&U[1]===ee&&U[2]===oe),!0),re&&st(),ht;yt.call(nt,ht,ee),U(vt,[ht,ee],(U=>U[0]===ht&&U[1]===ee),!0),re&&st()}),nt.disconnect=(ee=nt.disconnect,(U,st,yt)=>{const oe=vt.size>0;if(void 0===U)ee.apply(nt),vt.clear();else if("number"==typeof U){ee.call(nt,U);for(const Y of vt)Y[1]===U&&vt.delete(Y)}else{Y(U)?ee.call(nt,U,st,yt):ee.call(nt,U,st);for(const Y of vt)Y[0]!==U||void 0!==st&&Y[1]!==st||void 0!==yt&&Y[2]!==yt||vt.delete(Y)}const re=0===vt.size;oe&&re&&ht()}),nt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>null===U?null:U.hasOwnProperty("AudioBuffer")?U.AudioBuffer:null},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>null===U?null:U.hasOwnProperty("AudioContext")?U.AudioContext:U.hasOwnProperty("webkitAudioContext")?U.webkitAudioContext:null},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>(nt,st,ht)=>{const vt=nt.destination;if(vt.channelCount!==st)try{vt.channelCount=st}catch{}ht&&"explicit"!==vt.channelCountMode&&(vt.channelCountMode="explicit"),0===vt.maxChannelCount&&Object.defineProperty(vt,"maxChannelCount",{value:st});const yt=U(nt,{channelCount:st,channelCountMode:vt.channelCountMode,channelInterpretation:vt.channelInterpretation,gain:1});return Y(yt,"channelCount",(U=>()=>U.call(yt)),(U=>Y=>{U.call(yt,Y);try{vt.channelCount=Y}catch(U){if(Y>vt.maxChannelCount)throw U}})),Y(yt,"channelCountMode",(U=>()=>U.call(yt)),(U=>Y=>{U.call(yt,Y),vt.channelCountMode=Y})),Y(yt,"channelInterpretation",(U=>()=>U.call(yt)),(U=>Y=>{U.call(yt,Y),vt.channelInterpretation=Y})),Object.defineProperty(yt,"maxChannelCount",{get:()=>vt.maxChannelCount}),yt.connect(vt),yt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>{const st=U(Y);return nt(null!==st?st:Y)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>null===U?null:U.hasOwnProperty("AudioWorkletNode")?U.AudioWorkletNode:null},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return r}));var st=nt(5),ht=nt(4),vt=nt(1);const r=U=>(Y,nt)=>{const yt=U(Y,(U=>U.createBiquadFilter()));return Object(vt.a)(yt,nt),Object(st.a)(yt,nt,"Q"),Object(st.a)(yt,nt,"detune"),Object(st.a)(yt,nt,"frequency"),Object(st.a)(yt,nt,"gain"),Object(ht.a)(yt,nt,"type"),yt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(1);const i=(U,Y)=>(nt,ht)=>{const vt=U(nt,(U=>U.createChannelMerger(ht.numberOfInputs)));return 1!==vt.channelCount&&"explicit"!==vt.channelCountMode&&Y(nt,vt),Object(st.a)(vt,ht),vt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return a}));var st=nt(5),ht=nt(1),vt=nt(30),yt=nt(31);const a=(U,Y,nt,ee,oe,re)=>(be,ze)=>{if(void 0===be.createConstantSource)return ee(be,ze);const tn=nt(be,(U=>U.createConstantSource()));return Object(ht.a)(tn,ze),Object(st.a)(tn,ze,"offset"),Y(oe,(()=>oe(be)))||Object(vt.a)(tn),Y(re,(()=>re(be)))||Object(yt.a)(tn),U(be,tn),tn}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(11);const i=(U,Y,nt,ht)=>(vt,{offset:yt,...ee})=>{const oe=vt.createBuffer(1,2,vt.sampleRate),re=Y(vt),be=nt(vt,{...ee,gain:yt}),ze=oe.getChannelData(0);ze[0]=1,ze[1]=1,re.buffer=oe,re.loop=!0;const tn={get bufferSize(){},get channelCount(){return be.channelCount},set channelCount(U){be.channelCount=U},get channelCountMode(){return be.channelCountMode},set channelCountMode(U){be.channelCountMode=U},get channelInterpretation(){return be.channelInterpretation},set channelInterpretation(U){be.channelInterpretation=U},get context(){return be.context},get inputs(){return[]},get numberOfInputs(){return re.numberOfInputs},get numberOfOutputs(){return be.numberOfOutputs},get offset(){return be.gain},get onended(){return re.onended},set onended(U){re.onended=U},addEventListener:(...U)=>re.addEventListener(U[0],U[1],U[2]),dispatchEvent:(...U)=>re.dispatchEvent(U[0]),removeEventListener:(...U)=>re.removeEventListener(U[0],U[1],U[2]),start(U=0){re.start.call(re,U)},stop(U=0){re.stop.call(re,U)}};return U(vt,re),ht(Object(st.a)(tn,be),(()=>re.connect(be)),(()=>re.disconnect(be)))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(4),ht=nt(1);const o=(U,Y,nt,vt)=>(yt,ee)=>{const oe=U(yt,(U=>U.createConvolver()));try{oe.channelCount=1}catch(U){return Y(yt,ee)}if(Object(ht.a)(oe,ee),ee.disableNormalization===oe.normalize&&(oe.normalize=!ee.disableNormalization),Object(st.a)(oe,ee,"buffer"),ee.channelCount>2)throw nt();if(vt(oe,"channelCount",(U=>()=>U.call(oe)),(U=>Y=>{if(Y>2)throw nt();return U.call(oe,Y)})),"max"===ee.channelCountMode)throw nt();return vt(oe,"channelCountMode",(U=>()=>U.call(oe)),(U=>Y=>{if("max"===Y)throw nt();return U.call(oe,Y)})),oe}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(1),ht=nt(11);const o=(U,Y,nt)=>(vt,{buffer:yt,channelCount:ee,channelCountMode:oe,channelInterpretation:re,disableNormalization:be})=>{const ze=U(vt,(U=>U.createConvolver()));Object(st.a)(ze,{channelCount:Math.max(ee,2),channelCountMode:"max"===oe?oe:"clamped-max",channelInterpretation:re});const tn=Y(vt,{channelCount:ee,channelCountMode:oe,channelInterpretation:re,gain:1}),on={get buffer(){return ze.buffer},set buffer(U){ze.buffer=U},get bufferSize(){},get channelCount(){return tn.channelCount},set channelCount(U){U>2&&(ze.channelCount=U),tn.channelCount=U},get channelCountMode(){return tn.channelCountMode},set channelCountMode(U){"max"===U&&(ze.channelCountMode=U),tn.channelCountMode=U},get channelInterpretation(){return ze.channelInterpretation},set channelInterpretation(U){ze.channelInterpretation=U,tn.channelInterpretation=U},get context(){return ze.context},get inputs(){return[ze]},get numberOfInputs(){return ze.numberOfInputs},get numberOfOutputs(){return ze.numberOfOutputs},get normalize(){return ze.normalize},set normalize(U){ze.normalize=U},addEventListener:(...U)=>ze.addEventListener(U[0],U[1],U[2]),dispatchEvent:(...U)=>ze.dispatchEvent(U[0]),removeEventListener:(...U)=>ze.removeEventListener(U[0],U[1],U[2])};return be===on.normalize&&(on.normalize=!be),yt!==on.buffer&&(on.buffer=yt),nt(Object(ht.a)(on,tn),(()=>ze.connect(tn)),(()=>ze.disconnect(tn)))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(5),ht=nt(1);const o=U=>(Y,nt)=>{const vt=U(Y,(U=>U.createDelay(nt.maxDelayTime)));return Object(ht.a)(vt,nt),Object(st.a)(vt,nt,"delayTime"),vt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(5),ht=nt(1);const o=(U,Y)=>(nt,vt)=>{const yt=U(nt,(U=>U.createDynamicsCompressor()));if(Object(ht.a)(yt,vt),vt.channelCount>2)throw Y();if("max"===vt.channelCountMode)throw Y();return Object(st.a)(yt,vt,"attack"),Object(st.a)(yt,vt,"knee"),Object(st.a)(yt,vt,"ratio"),Object(st.a)(yt,vt,"release"),Object(st.a)(yt,vt,"threshold"),yt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(5),ht=nt(1);const o=U=>(Y,nt)=>{const vt=U(Y,(U=>U.createGain()));return Object(ht.a)(vt,nt),Object(st.a)(vt,nt,"gain"),vt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(1);const i=(U,Y)=>(nt,ht,vt)=>{if(void 0===nt.createIIRFilter)return Y(nt,ht,vt);const yt=U(nt,(U=>U.createIIRFilter(vt.feedforward,vt.feedback)));return Object(st.a)(yt,vt),yt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return c}));var st=nt(43),ht=nt(42),vt=nt(11);function r(U,Y){const nt=Y[0]*Y[0]+Y[1]*Y[1];return[(U[0]*Y[0]+U[1]*Y[1])/nt,(U[1]*Y[0]-U[0]*Y[1])/nt]}function a(U,Y){let nt=[0,0];for(let vt=U.length-1;vt>=0;vt-=1)ht=Y,nt=[(st=nt)[0]*ht[0]-st[1]*ht[1],st[0]*ht[1]+st[1]*ht[0]],nt[0]+=U[vt];var st,ht;return nt}const c=(U,Y,nt,yt)=>(ee,oe,{channelCount:re,channelCountMode:be,channelInterpretation:ze,feedback:tn,feedforward:on})=>{const $n=Object(st.a)(oe,ee.sampleRate),Hn=tn.length,Kn=on.length,ts=Math.min(Hn,Kn);if(0===tn.length||tn.length>20)throw yt();if(0===tn[0])throw Y();if(0===on.length||on.length>20)throw yt();if(0===on[0])throw Y();if(1!==tn[0]){for(let U=0;U<Kn;U+=1)on[U]/=tn[0];for(let U=1;U<Hn;U+=1)tn[U]/=tn[0]}const es=nt(ee,$n,re,re);es.channelCount=re,es.channelCountMode=be,es.channelInterpretation=ze;const Fs=[],Ns=[],Ps=[];for(let U=0;U<re;U+=1){Fs.push(0);const U=new Float32Array(32),Y=new Float32Array(32);U.fill(0),Y.fill(0),Ns.push(U),Ps.push(Y)}es.onaudioprocess=U=>{const Y=U.inputBuffer,nt=U.outputBuffer,st=Y.numberOfChannels;for(let U=0;U<st;U+=1){const st=Y.getChannelData(U),vt=nt.getChannelData(U);Fs[U]=Object(ht.a)(tn,Hn,on,Kn,ts,Ns[U],Ps[U],Fs[U],32,st,vt)}};const zs=ee.sampleRate/2,Ws={get bufferSize(){return $n},get channelCount(){return es.channelCount},set channelCount(U){es.channelCount=U},get channelCountMode(){return es.channelCountMode},set channelCountMode(U){es.channelCountMode=U},get channelInterpretation(){return es.channelInterpretation},set channelInterpretation(U){es.channelInterpretation=U},get context(){return es.context},get inputs(){return[es]},get numberOfInputs(){return es.numberOfInputs},get numberOfOutputs(){return es.numberOfOutputs},addEventListener:(...U)=>es.addEventListener(U[0],U[1],U[2]),dispatchEvent:(...U)=>es.dispatchEvent(U[0]),getFrequencyResponse(Y,nt,st){if(Y.length!==nt.length||nt.length!==st.length)throw U();const ht=Y.length;for(let U=0;U<ht;U+=1){const ht=-Math.PI*(Y[U]/zs),vt=[Math.cos(ht),Math.sin(ht)],yt=r(a(on,vt),a(tn,vt));nt[U]=Math.sqrt(yt[0]*yt[0]+yt[1]*yt[1]),st[U]=Math.atan2(yt[1],yt[0])}},removeEventListener:(...U)=>es.removeEventListener(U[0],U[1],U[2])};return Object(vt.a)(Ws,es)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>U(Y,(U=>U.createMediaElementSource(nt.mediaElement)))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(1);const i=(U,Y)=>(nt,ht)=>{if(void 0===nt.createMediaStreamDestination)throw Y();const vt=U(nt,(U=>U.createMediaStreamDestination()));return Object(st.a)(vt,ht),1===vt.numberOfOutputs&&Object.defineProperty(vt,"numberOfOutputs",{get:()=>0}),vt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,{mediaStream:nt})=>{const st=nt.getAudioTracks(),ht=U(Y,(U=>{const Y=st.sort(((U,Y)=>U.id<Y.id?-1:U.id>Y.id?1:0)).slice(0,1);return U.createMediaStreamSource(new MediaStream(Y))}));return Object.defineProperty(ht,"mediaStream",{value:nt}),ht}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt)=>(st,{mediaStreamTrack:ht})=>"function"==typeof st.createMediaStreamTrackSource?Y(st,(U=>U.createMediaStreamTrackSource(ht))):Y(st,(Y=>{const st=new MediaStream([ht]),vt=Y.createMediaStreamSource(st);if("audio"!==ht.kind)throw U();if(nt(Y))throw new TypeError;return vt}))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>null===U?null:U.hasOwnProperty("OfflineAudioContext")?U.OfflineAudioContext:U.hasOwnProperty("webkitOfflineAudioContext")?U.webkitOfflineAudioContext:null},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return c}));var st=nt(5),ht=nt(4),vt=nt(1),yt=nt(30),ee=nt(31);const c=(U,Y,nt,oe,re,be,ze)=>(tn,on)=>{const $n=nt(tn,(U=>U.createOscillator()));return Object(vt.a)($n,on),Object(st.a)($n,on,"detune"),Object(st.a)($n,on,"frequency"),void 0!==on.periodicWave?$n.setPeriodicWave(on.periodicWave):Object(ht.a)($n,on,"type"),Y(oe,(()=>oe(tn)))||Object(yt.a)($n),Y(re,(()=>re(tn)))||ze($n,tn),Y(be,(()=>be(tn)))||Object(ee.a)($n),U(tn,$n),$n}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return r}));var st=nt(5),ht=nt(4),vt=nt(1);const r=(U,Y)=>(nt,yt)=>{const ee=U(nt,(U=>U.createPanner()));return void 0===ee.orientationX?Y(nt,yt):(Object(vt.a)(ee,yt),Object(st.a)(ee,yt,"orientationX"),Object(st.a)(ee,yt,"orientationY"),Object(st.a)(ee,yt,"orientationZ"),Object(st.a)(ee,yt,"positionX"),Object(st.a)(ee,yt,"positionY"),Object(st.a)(ee,yt,"positionZ"),Object(ht.a)(ee,yt,"coneInnerAngle"),Object(ht.a)(ee,yt,"coneOuterAngle"),Object(ht.a)(ee,yt,"coneOuterGain"),Object(ht.a)(ee,yt,"distanceModel"),Object(ht.a)(ee,yt,"maxDistance"),Object(ht.a)(ee,yt,"panningModel"),Object(ht.a)(ee,yt,"refDistance"),Object(ht.a)(ee,yt,"rolloffFactor"),ee)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(1),ht=nt(11);const o=(U,Y,nt,vt,yt,ee,oe,re,be,ze)=>(tn,{coneInnerAngle:on,coneOuterAngle:$n,coneOuterGain:Hn,distanceModel:Kn,maxDistance:ts,orientationX:es,orientationY:Fs,orientationZ:Ns,panningModel:Ps,positionX:zs,positionY:Ws,positionZ:Gs,refDistance:$s,rolloffFactor:Qs,...Xs})=>{const Zs=nt(tn,(U=>U.createPanner()));if(Xs.channelCount>2)throw re();if("max"===Xs.channelCountMode)throw re();Object(st.a)(Zs,Xs);const Hs={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},Js=vt(tn,{...Hs,channelInterpretation:"speakers",numberOfInputs:6}),Ks=yt(tn,{...Xs,gain:1}),ti=yt(tn,{...Hs,gain:1}),ei=yt(tn,{...Hs,gain:0}),ni=yt(tn,{...Hs,gain:0}),si=yt(tn,{...Hs,gain:0}),ii=yt(tn,{...Hs,gain:0}),oi=yt(tn,{...Hs,gain:0}),ri=ee(tn,256,6,1),ai=oe(tn,{...Hs,curve:new Float32Array([1,1]),oversample:"none"});let ci=[es,Fs,Ns],ui=[zs,Ws,Gs];ri.onaudioprocess=({inputBuffer:U})=>{const Y=[U.getChannelData(0)[0],U.getChannelData(1)[0],U.getChannelData(2)[0]];Y.some(((U,Y)=>U!==ci[Y]))&&(Zs.setOrientation(...Y),ci=Y);const nt=[U.getChannelData(3)[0],U.getChannelData(4)[0],U.getChannelData(5)[0]];nt.some(((U,Y)=>U!==ui[Y]))&&(Zs.setPosition(...nt),ui=nt)},Object.defineProperty(ei.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ni.gain,"defaultValue",{get:()=>0}),Object.defineProperty(si.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ii.gain,"defaultValue",{get:()=>0}),Object.defineProperty(oi.gain,"defaultValue",{get:()=>0});const hi={get bufferSize(){},get channelCount(){return Zs.channelCount},set channelCount(U){if(U>2)throw re();Ks.channelCount=U,Zs.channelCount=U},get channelCountMode(){return Zs.channelCountMode},set channelCountMode(U){if("max"===U)throw re();Ks.channelCountMode=U,Zs.channelCountMode=U},get channelInterpretation(){return Zs.channelInterpretation},set channelInterpretation(U){Ks.channelInterpretation=U,Zs.channelInterpretation=U},get coneInnerAngle(){return Zs.coneInnerAngle},set coneInnerAngle(U){Zs.coneInnerAngle=U},get coneOuterAngle(){return Zs.coneOuterAngle},set coneOuterAngle(U){Zs.coneOuterAngle=U},get coneOuterGain(){return Zs.coneOuterGain},set coneOuterGain(U){if(U<0||U>1)throw Y();Zs.coneOuterGain=U},get context(){return Zs.context},get distanceModel(){return Zs.distanceModel},set distanceModel(U){Zs.distanceModel=U},get inputs(){return[Ks]},get maxDistance(){return Zs.maxDistance},set maxDistance(U){if(U<0)throw new RangeError;Zs.maxDistance=U},get numberOfInputs(){return Zs.numberOfInputs},get numberOfOutputs(){return Zs.numberOfOutputs},get orientationX(){return ti.gain},get orientationY(){return ei.gain},get orientationZ(){return ni.gain},get panningModel(){return Zs.panningModel},set panningModel(U){if(Zs.panningModel=U,Zs.panningModel!==U&&"HRTF"===U)throw re()},get positionX(){return si.gain},get positionY(){return ii.gain},get positionZ(){return oi.gain},get refDistance(){return Zs.refDistance},set refDistance(U){if(U<0)throw new RangeError;Zs.refDistance=U},get rolloffFactor(){return Zs.rolloffFactor},set rolloffFactor(U){if(U<0)throw new RangeError;Zs.rolloffFactor=U},addEventListener:(...U)=>Ks.addEventListener(U[0],U[1],U[2]),dispatchEvent:(...U)=>Ks.dispatchEvent(U[0]),removeEventListener:(...U)=>Ks.removeEventListener(U[0],U[1],U[2])};return on!==hi.coneInnerAngle&&(hi.coneInnerAngle=on),$n!==hi.coneOuterAngle&&(hi.coneOuterAngle=$n),Hn!==hi.coneOuterGain&&(hi.coneOuterGain=Hn),Kn!==hi.distanceModel&&(hi.distanceModel=Kn),ts!==hi.maxDistance&&(hi.maxDistance=ts),es!==hi.orientationX.value&&(hi.orientationX.value=es),Fs!==hi.orientationY.value&&(hi.orientationY.value=Fs),Ns!==hi.orientationZ.value&&(hi.orientationZ.value=Ns),Ps!==hi.panningModel&&(hi.panningModel=Ps),zs!==hi.positionX.value&&(hi.positionX.value=zs),Ws!==hi.positionY.value&&(hi.positionY.value=Ws),Gs!==hi.positionZ.value&&(hi.positionZ.value=Gs),$s!==hi.refDistance&&(hi.refDistance=$s),Qs!==hi.rolloffFactor&&(hi.rolloffFactor=Qs),1===ci[0]&&0===ci[1]&&0===ci[2]||Zs.setOrientation(...ci),0===ui[0]&&0===ui[1]&&0===ui[2]||Zs.setPosition(...ui),ze(Object(ht.a)(hi,Zs),(()=>{Ks.connect(Zs),U(Ks,ai,0,0),ai.connect(ti).connect(Js,0,0),ai.connect(ei).connect(Js,0,1),ai.connect(ni).connect(Js,0,2),ai.connect(si).connect(Js,0,3),ai.connect(ii).connect(Js,0,4),ai.connect(oi).connect(Js,0,5),Js.connect(ri).connect(tn.destination)}),(()=>{Ks.disconnect(Zs),be(Ks,ai,0,0),ai.disconnect(ti),ti.disconnect(Js),ai.disconnect(ei),ei.disconnect(Js),ai.disconnect(ni),ni.disconnect(Js),ai.disconnect(si),si.disconnect(Js),ai.disconnect(ii),ii.disconnect(Js),ai.disconnect(oi),oi.disconnect(Js),Js.disconnect(ri),ri.disconnect(tn.destination)}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,{disableNormalization:nt,imag:st,real:ht})=>{const vt=U(Y),yt=new Float32Array(st),ee=new Float32Array(ht);return null!==vt?vt.createPeriodicWave(ee,yt,{disableNormalization:nt}):Y.createPeriodicWave(ee,yt,{disableNormalization:nt})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt,st,ht)=>U(Y,(U=>U.createScriptProcessor(nt,st,ht)))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(5),ht=nt(1);const o=(U,Y,nt)=>(vt,yt)=>U(vt,(U=>{const ee=yt.channelCountMode;if("clamped-max"===ee)throw nt();if(void 0===vt.createStereoPanner)return Y(vt,yt);const oe=U.createStereoPanner();return Object(ht.a)(oe,yt),Object(st.a)(oe,yt,"pan"),Object.defineProperty(oe,"channelCountMode",{get:()=>ee,set:U=>{if(U!==ee)throw nt()}}),oe}))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(11);const i=(U,Y,nt,ht,vt,yt)=>{const ee=new Float32Array([1,1]),oe=Math.PI/2,re={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},be={...re,oversample:"none"},l=(U,st,yt,ze,tn)=>{if(1===st)return((U,Y,st,vt)=>{const yt=new Float32Array(16385),ze=new Float32Array(16385);for(let U=0;U<16385;U+=1){const Y=U/16384*oe;yt[U]=Math.cos(Y),ze[U]=Math.sin(Y)}const tn=nt(U,{...re,gain:0}),on=ht(U,{...be,curve:yt}),$n=ht(U,{...be,curve:ee}),Hn=nt(U,{...re,gain:0}),Kn=ht(U,{...be,curve:ze});return{connectGraph(){Y.connect(tn),Y.connect($n.inputs[0]),Y.connect(Hn),$n.connect(st),st.connect(on.inputs[0]),st.connect(Kn.inputs[0]),on.connect(tn.gain),Kn.connect(Hn.gain),tn.connect(vt,0,0),Hn.connect(vt,0,1)},disconnectGraph(){Y.disconnect(tn),Y.disconnect($n.inputs[0]),Y.disconnect(Hn),$n.disconnect(st),st.disconnect(on.inputs[0]),st.disconnect(Kn.inputs[0]),on.disconnect(tn.gain),Kn.disconnect(Hn.gain),tn.disconnect(vt,0,0),Hn.disconnect(vt,0,1)}}})(U,yt,ze,tn);if(2===st)return((U,st,vt,yt)=>{const ze=new Float32Array(16385),tn=new Float32Array(16385),on=new Float32Array(16385),$n=new Float32Array(16385),Hn=Math.floor(8192.5);for(let U=0;U<16385;U+=1)if(U>Hn){const Y=(U-Hn)/(16384-Hn)*oe;ze[U]=Math.cos(Y),tn[U]=Math.sin(Y),on[U]=0,$n[U]=1}else{const Y=U/(16384-Hn)*oe;ze[U]=1,tn[U]=0,on[U]=Math.cos(Y),$n[U]=Math.sin(Y)}const Kn=Y(U,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),ts=nt(U,{...re,gain:0}),es=ht(U,{...be,curve:ze}),Fs=nt(U,{...re,gain:0}),Ns=ht(U,{...be,curve:tn}),Ps=ht(U,{...be,curve:ee}),zs=nt(U,{...re,gain:0}),Ws=ht(U,{...be,curve:on}),Gs=nt(U,{...re,gain:0}),$s=ht(U,{...be,curve:$n});return{connectGraph(){st.connect(Kn),st.connect(Ps.inputs[0]),Kn.connect(ts,1),Kn.connect(Fs,1),Kn.connect(zs,1),Kn.connect(Gs,1),Ps.connect(vt),vt.connect(es.inputs[0]),vt.connect(Ns.inputs[0]),vt.connect(Ws.inputs[0]),vt.connect($s.inputs[0]),es.connect(ts.gain),Ns.connect(Fs.gain),Ws.connect(zs.gain),$s.connect(Gs.gain),ts.connect(yt,0,0),zs.connect(yt,0,0),Fs.connect(yt,0,1),Gs.connect(yt,0,1)},disconnectGraph(){st.disconnect(Kn),st.disconnect(Ps.inputs[0]),Kn.disconnect(ts,1),Kn.disconnect(Fs,1),Kn.disconnect(zs,1),Kn.disconnect(Gs,1),Ps.disconnect(vt),vt.disconnect(es.inputs[0]),vt.disconnect(Ns.inputs[0]),vt.disconnect(Ws.inputs[0]),vt.disconnect($s.inputs[0]),es.disconnect(ts.gain),Ns.disconnect(Fs.gain),Ws.disconnect(zs.gain),$s.disconnect(Gs.gain),ts.disconnect(yt,0,0),zs.disconnect(yt,0,0),Fs.disconnect(yt,0,1),Gs.disconnect(yt,0,1)}}})(U,yt,ze,tn);throw vt()};return(Y,{channelCount:ht,channelCountMode:ee,pan:oe,...re})=>{if("max"===ee)throw vt();const be=U(Y,{...re,channelCount:1,channelCountMode:ee,numberOfInputs:2}),ze=nt(Y,{...re,channelCount:ht,channelCountMode:ee,gain:1}),tn=nt(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:oe});let{connectGraph:on,disconnectGraph:$n}=l(Y,ht,ze,tn,be);Object.defineProperty(tn.gain,"defaultValue",{get:()=>0});const Hn={get bufferSize(){},get channelCount(){return ze.channelCount},set channelCount(U){ze.channelCount!==U&&(Kn&&$n(),({connectGraph:on,disconnectGraph:$n}=l(Y,U,ze,tn,be)),Kn&&on()),ze.channelCount=U},get channelCountMode(){return ze.channelCountMode},set channelCountMode(U){if("clamped-max"===U||"max"===U)throw vt();ze.channelCountMode=U},get channelInterpretation(){return ze.channelInterpretation},set channelInterpretation(U){ze.channelInterpretation=U},get context(){return ze.context},get inputs(){return[ze]},get numberOfInputs(){return ze.numberOfInputs},get numberOfOutputs(){return ze.numberOfOutputs},get pan(){return tn.gain},addEventListener:(...U)=>ze.addEventListener(U[0],U[1],U[2]),dispatchEvent:(...U)=>ze.dispatchEvent(U[0]),removeEventListener:(...U)=>ze.removeEventListener(U[0],U[1],U[2])};let Kn=!1;return yt(Object(st.a)(Hn,be),(()=>{on(),Kn=!0}),(()=>{$n(),Kn=!1}))}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(4),ht=nt(1);const o=(U,Y,nt,vt,yt,ee,oe)=>(re,be)=>{const ze=nt(re,(U=>U.createWaveShaper()));try{return ze.curve=new Float32Array([1]),vt(re,be)}catch{}Object(ht.a)(ze,be);const tn=be.curve;if(null!==tn&&tn.length<2)throw Y();Object(st.a)(ze,be,"curve"),Object(st.a)(ze,be,"oversample");let on=null,$n=!1;return oe(ze,"curve",(U=>()=>U.call(ze)),(Y=>nt=>(Y.call(ze,nt),$n&&(yt(nt)&&null===on?on=U(re,ze):yt(nt)||null===on||(on(),on=null)),nt))),ee(ze,(()=>{$n=!0,yt(ze.curve)&&(on=U(re,ze))}),(()=>{$n=!1,null!==on&&(on(),on=null)}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(1),ht=nt(11);const o=(U,Y,nt,vt,yt,ee)=>(oe,{curve:re,oversample:be,...ze})=>{const tn=nt(oe,(U=>U.createWaveShaper())),on=nt(oe,(U=>U.createWaveShaper()));Object(st.a)(tn,ze),Object(st.a)(on,ze);const $n=vt(oe,{...ze,gain:1}),Hn=vt(oe,{...ze,gain:-1}),Kn=vt(oe,{...ze,gain:1}),ts=vt(oe,{...ze,gain:-1});let es=null,Fs=!1,Ns=null;const Ps={get bufferSize(){},get channelCount(){return tn.channelCount},set channelCount(U){$n.channelCount=U,Hn.channelCount=U,tn.channelCount=U,Kn.channelCount=U,on.channelCount=U,ts.channelCount=U},get channelCountMode(){return tn.channelCountMode},set channelCountMode(U){$n.channelCountMode=U,Hn.channelCountMode=U,tn.channelCountMode=U,Kn.channelCountMode=U,on.channelCountMode=U,ts.channelCountMode=U},get channelInterpretation(){return tn.channelInterpretation},set channelInterpretation(U){$n.channelInterpretation=U,Hn.channelInterpretation=U,tn.channelInterpretation=U,Kn.channelInterpretation=U,on.channelInterpretation=U,ts.channelInterpretation=U},get context(){return tn.context},get curve(){return Ns},set curve(nt){if(null!==re&&re.length<2)throw Y();if(null===nt)tn.curve=nt,on.curve=nt;else{const U=nt.length,Y=new Float32Array(U+2-U%2),st=new Float32Array(U+2-U%2);Y[0]=nt[0],st[0]=-nt[U-1];const ht=Math.ceil((U+1)/2),vt=(U+1)/2-1;for(let yt=1;yt<ht;yt+=1){const ee=yt/ht*vt,oe=Math.floor(ee),re=Math.ceil(ee);Y[yt]=oe===re?nt[oe]:(1-(ee-oe))*nt[oe]+(1-(re-ee))*nt[re],st[yt]=oe===re?-nt[U-1-oe]:-(1-(ee-oe))*nt[U-1-oe]-(1-(re-ee))*nt[U-1-re]}Y[ht]=U%2==1?nt[ht-1]:(nt[ht-2]+nt[ht-1])/2,tn.curve=Y,on.curve=st}Ns=nt,Fs&&(yt(Ns)&&null===es?es=U(oe,$n):null!==es&&(es(),es=null))},get inputs(){return[$n]},get numberOfInputs(){return tn.numberOfInputs},get numberOfOutputs(){return tn.numberOfOutputs},get oversample(){return tn.oversample},set oversample(U){tn.oversample=U,on.oversample=U},addEventListener:(...U)=>$n.addEventListener(U[0],U[1],U[2]),dispatchEvent:(...U)=>$n.dispatchEvent(U[0]),removeEventListener:(...U)=>$n.removeEventListener(U[0],U[1],U[2])};return re!==Ps.curve&&(Ps.curve=re),be!==Ps.oversample&&(Ps.oversample=be),ee(Object(ht.a)(Ps,Kn),(()=>{$n.connect(tn).connect(Kn),$n.connect(Hn).connect(on).connect(ts).connect(Kn),Fs=!0,yt(Ns)&&(es=U(oe,$n))}),(()=>{$n.disconnect(tn),tn.disconnect(Kn),$n.disconnect(Hn),Hn.disconnect(on),on.disconnect(ts),ts.disconnect(Kn),Fs=!1,null!==es&&(es(),es=null)}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(14);const ht={numberOfChannels:1},o=(U,Y,nt,vt,yt)=>class extends U{constructor(U,nt,yt){let ee;if("number"==typeof U&&void 0!==nt&&void 0!==yt)ee={length:nt,numberOfChannels:U,sampleRate:yt};else{if("object"!=typeof U)throw new Error("The given parameters are not valid.");ee=U}const{length:oe,numberOfChannels:re,sampleRate:be}={...ht,...ee},ze=vt(re,oe,be);Y(st.a,(()=>Object(st.a)(ze)))||ze.addEventListener("statechange",(()=>{let U=0;const e=Y=>{"running"===this._state&&(U>0?(ze.removeEventListener("statechange",e),Y.stopImmediatePropagation(),this._waitForThePromiseToSettle(Y)):U+=1)};return e})()),super(ze,re),this._length=oe,this._nativeOfflineAudioContext=ze,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(nt()):(this._state="running",yt(this.destination,this._nativeOfflineAudioContext).then((U=>(this._state=null,U))).catch((U=>{throw this._state=null,U})))}_waitForThePromiseToSettle(U){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(U):setTimeout((()=>this._waitForThePromiseToSettle(U)))}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return r}));var st=nt(17),ht=nt(21);const vt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,type:"sine"},r=(U,Y,nt,yt,ee,oe,re,be)=>class extends U{constructor(U,nt=vt){const st=oe(U),ht={...vt,...nt},be=yt(st,ht),ze=re(st),tn=ze?ee():null,on=U.sampleRate/2;super(U,!1,be,tn),this._detune=Y(this,ze,be.detune,153600,-153600),this._frequency=Y(this,ze,be.frequency,on,-on),this._nativeOscillatorNode=be,this._onended=null,this._oscillatorNodeRenderer=tn,null!==this._oscillatorNodeRenderer&&void 0!==ht.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=ht.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(U){const Y="function"==typeof U?be(this,U):null;this._nativeOscillatorNode.onended=Y;const nt=this._nativeOscillatorNode.onended;this._onended=null!==nt&&nt===Y?U:nt}get type(){return this._nativeOscillatorNode.type}set type(U){if(this._nativeOscillatorNode.type=U,"custom"===U)throw nt();null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(U){this._nativeOscillatorNode.setPeriodicWave(U),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=U)}start(U=0){if(this._nativeOscillatorNode.start(U),null!==this._oscillatorNodeRenderer)this._oscillatorNodeRenderer.start=U;else{Object(st.a)(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),setTimeout((()=>Object(ht.a)(this)),1e3)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(U=0){this._nativeOscillatorNode.stop(U),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=U)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(3);const i=(U,Y,nt,ht,vt)=>()=>{const yt=new WeakMap;let ee=null,oe=null,re=null;return{set periodicWave(U){ee=U},set start(U){oe=U},set stop(U){re=U},render(be,ze,tn){const on=yt.get(ze);return void 0!==on?Promise.resolve(on):(async(be,ze,tn)=>{let on=nt(be);const $n=Object(st.a)(on,ze);if(!$n){const U={channelCount:on.channelCount,channelCountMode:on.channelCountMode,channelInterpretation:on.channelInterpretation,detune:on.detune.value,frequency:on.frequency.value,periodicWave:null===ee?void 0:ee,type:on.type};on=Y(ze,U),null!==oe&&on.start(oe),null!==re&&on.stop(re)}return yt.set(ze,on),$n?(await U(ze,be.detune,on.detune,tn),await U(ze,be.frequency,on.frequency,tn)):(await ht(ze,be.detune,on.detune,tn),await ht(ze,be.frequency,on.frequency,tn)),await vt(be,ze,on,tn),on})(be,ze,tn)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(2);const ht={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},o=(U,Y,nt,vt,yt,ee)=>class extends U{constructor(U,oe=ht){const re=yt(U),be={...ht,...oe},ze=nt(re,be),tn=ee(re);super(U,!1,ze,tn?vt():null),this._nativePannerNode=ze,this._orientationX=Y(this,tn,ze.orientationX,st.b,st.a),this._orientationY=Y(this,tn,ze.orientationY,st.b,st.a),this._orientationZ=Y(this,tn,ze.orientationZ,st.b,st.a),this._positionX=Y(this,tn,ze.positionX,st.b,st.a),this._positionY=Y(this,tn,ze.positionY,st.b,st.a),this._positionZ=Y(this,tn,ze.positionZ,st.b,st.a)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(U){this._nativePannerNode.coneInnerAngle=U}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(U){this._nativePannerNode.coneOuterAngle=U}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(U){this._nativePannerNode.coneOuterGain=U}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(U){this._nativePannerNode.distanceModel=U}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(U){this._nativePannerNode.maxDistance=U}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(U){this._nativePannerNode.panningModel=U}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(U){this._nativePannerNode.refDistance=U}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(U){this._nativePannerNode.rolloffFactor=U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(12),ht=nt(3);const o=(U,Y,nt,vt,yt,ee,oe,re,be,ze)=>()=>{const tn=new WeakMap;let on=null;return{render($n,Hn,Kn){const ts=tn.get(Hn);return void 0!==ts?Promise.resolve(ts):(async($n,Hn,Kn)=>{let ts=null,es=ee($n);const Fs={channelCount:es.channelCount,channelCountMode:es.channelCountMode,channelInterpretation:es.channelInterpretation},Ns={...Fs,coneInnerAngle:es.coneInnerAngle,coneOuterAngle:es.coneOuterAngle,coneOuterGain:es.coneOuterGain,distanceModel:es.distanceModel,maxDistance:es.maxDistance,panningModel:es.panningModel,refDistance:es.refDistance,rolloffFactor:es.rolloffFactor},Ps=Object(ht.a)(es,Hn);if("bufferSize"in es)ts=vt(Hn,{...Fs,gain:1});else if(!Ps){const U={...Ns,orientationX:es.orientationX.value,orientationY:es.orientationY.value,orientationZ:es.orientationZ.value,positionX:es.positionX.value,positionY:es.positionY.value,positionZ:es.positionZ.value};es=yt(Hn,U)}if(tn.set(Hn,null===ts?es:ts),null!==ts){if(null===on){if(null===oe)throw new Error("Missing the native OfflineAudioContext constructor.");const U=new oe(6,$n.context.length,Hn.sampleRate),st=Y(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});st.connect(U.destination),on=(async()=>{const Y=await Promise.all([$n.orientationX,$n.orientationY,$n.orientationZ,$n.positionX,$n.positionY,$n.positionZ].map((async(Y,st)=>{const ht=nt(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===st?1:0});return await re(U,Y,ht.offset,Kn),ht})));for(let U=0;U<6;U+=1)Y[U].connect(st,0,U),Y[U].start(0);return ze(U)})()}const U=await on,st=vt(Hn,{...Fs,gain:1});await be($n,Hn,st,Kn);const ht=[];for(let Y=0;Y<U.numberOfChannels;Y+=1)ht.push(U.getChannelData(Y));let ee=[ht[0][0],ht[1][0],ht[2][0]],tn=[ht[3][0],ht[4][0],ht[5][0]],es=vt(Hn,{...Fs,gain:1}),Ps=yt(Hn,{...Ns,orientationX:ee[0],orientationY:ee[1],orientationZ:ee[2],positionX:tn[0],positionY:tn[1],positionZ:tn[2]});st.connect(es).connect(Ps.inputs[0]),Ps.connect(ts);for(let Y=128;Y<U.length;Y+=128){const U=[ht[0][Y],ht[1][Y],ht[2][Y]],nt=[ht[3][Y],ht[4][Y],ht[5][Y]];if(U.some(((U,Y)=>U!==ee[Y]))||nt.some(((U,Y)=>U!==tn[Y]))){ee=U,tn=nt;const ht=Y/Hn.sampleRate;es.gain.setValueAtTime(0,ht),es=vt(Hn,{...Fs,gain:0}),Ps=yt(Hn,{...Ns,orientationX:ee[0],orientationY:ee[1],orientationZ:ee[2],positionX:tn[0],positionY:tn[1],positionZ:tn[2]}),es.gain.setValueAtTime(1,ht),st.connect(es).connect(Ps.inputs[0]),Ps.connect(ts)}}return ts}return Ps?(await U(Hn,$n.orientationX,es.orientationX,Kn),await U(Hn,$n.orientationY,es.orientationY,Kn),await U(Hn,$n.orientationZ,es.orientationZ,Kn),await U(Hn,$n.positionX,es.positionX,Kn),await U(Hn,$n.positionY,es.positionY,Kn),await U(Hn,$n.positionZ,es.positionZ,Kn)):(await re(Hn,$n.orientationX,es.orientationX,Kn),await re(Hn,$n.orientationY,es.orientationY,Kn),await re(Hn,$n.orientationZ,es.orientationZ,Kn),await re(Hn,$n.positionX,es.positionX,Kn),await re(Hn,$n.positionY,es.positionY,Kn),await re(Hn,$n.positionZ,es.positionZ,Kn)),Object(st.a)(es)?await be($n,Hn,es.inputs[0],Kn):await be($n,Hn,es,Kn),es})($n,Hn,Kn)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={disableNormalization:!1},i=(U,Y,nt)=>class i{constructor(ht,vt){const yt=Y(ht),ee={...st,...vt},oe=U(yt,ee);return nt.add(oe),oe}static[Symbol.hasInstance](U){return null!==U&&"object"==typeof U&&Object.getPrototypeOf(U)===i.prototype||nt.has(U)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>(nt,st,ht,vt)=>(U(st).replay(ht),Y(st,nt,ht,vt))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt)=>async(st,ht,vt,yt)=>{const ee=U(st),oe=[...yt,st];await Promise.all(ee.activeInputs.map(((U,yt)=>Array.from(U).filter((([U])=>!oe.includes(U))).map((async([U,ee])=>{const re=Y(U),be=await re.render(U,ht,oe),ze=st.context.destination;nt(U)||st===ze&&nt(st)||be.connect(vt,ee,yt)})))).reduce(((U,Y)=>[...U,...Y]),[]))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt)=>async(st,ht,vt,yt)=>{const ee=Y(st);await Promise.all(Array.from(ee.activeInputs).map((async([Y,st])=>{const ee=U(Y),oe=await ee.render(Y,ht,yt);nt(Y)||oe.connect(vt,st)})))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(14);const i=(U,Y,nt,ht)=>vt=>U(st.a,(()=>Object(st.a)(vt)))?Promise.resolve(U(ht,ht)).then((U=>{if(!U){const U=nt(vt,512,0,1);vt.oncomplete=()=>{U.onaudioprocess=null,U.disconnect()},U.onaudioprocess=()=>vt.currentTime,U.connect(vt.destination)}return vt.startRendering()})):new Promise((U=>{const nt=Y(vt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});vt.oncomplete=Y=>{nt.disconnect(),U(Y.renderedBuffer)},nt.connect(vt.destination),vt.startRendering()}))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(29);const i=(U,Y,nt,ht,vt,yt,ee,oe)=>{const re=[];return(be,ze)=>nt(be).render(be,ze,re).then((()=>Promise.all(Array.from(ht(ze)).map((U=>nt(U).render(U,ze,re)))))).then((()=>vt(ze))).then((nt=>("function"!=typeof nt.copyFromChannel?(ee(nt),Object(st.a)(nt)):Y(yt,(()=>yt(nt)))||oe(nt),U.add(nt),nt)))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},i=(U,Y,nt,ht,vt,yt)=>class extends U{constructor(U,ee=st){const oe=vt(U),re={...st,...ee},be=nt(oe,re),ze=yt(oe);super(U,!1,be,ze?ht():null),this._pan=Y(this,ze,be.pan,1,-1)}get pan(){return this._pan}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(12),ht=nt(3);const o=(U,Y,nt,vt,yt)=>()=>{const ee=new WeakMap;return{render(oe,re,be){const ze=ee.get(re);return void 0!==ze?Promise.resolve(ze):(async(oe,re,be)=>{let ze=nt(oe);const tn=Object(ht.a)(ze,re);if(!tn){const U={channelCount:ze.channelCount,channelCountMode:ze.channelCountMode,channelInterpretation:ze.channelInterpretation,pan:ze.pan.value};ze=Y(re,U)}return ee.set(re,ze),tn?await U(re,oe.pan,ze.pan,be):await vt(re,oe.pan,ze.pan,be),Object(st.a)(ze)?await yt(oe,re,ze.inputs[0],be):await yt(oe,re,ze,be),ze})(oe,re,be)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return!1;try{new U({length:1,sampleRate:44100})}catch{return!1}return!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return!1;const Y=new U(1,1,44100).createBuffer(1,1,44100);if(void 0===Y.copyToChannel)return!0;const nt=new Float32Array(2);try{Y.copyFromChannel(nt,0,0)}catch{return!1}return!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U(Y,(U=>U.createBufferSource()));nt.start();try{nt.start()}catch{return!0}return!1}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return Promise.resolve(!1);const Y=new U(1,1,44100),nt=Y.createBuffer(1,1,Y.sampleRate),st=Y.createBufferSource();return nt.getChannelData(0)[0]=1,st.buffer=nt,st.start(0,0,0),st.connect(Y.destination),new Promise((U=>{Y.oncomplete=({renderedBuffer:Y})=>{U(0===Y.getChannelData(0)[0])},Y.startRendering()}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U(Y,(U=>U.createBufferSource())),st=Y.createBuffer(1,1,44100);nt.buffer=st;try{nt.start(0,1)}catch{return!1}return!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U(Y,(U=>U.createBufferSource()));nt.start();try{nt.stop()}catch{return!1}return!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return!1;if(void 0!==U.prototype&&void 0!==U.prototype.close)return!0;const Y=new U,nt=void 0!==Y.close;try{Y.close()}catch{}return nt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return Promise.resolve(!1);const Y=new U(1,1,44100);return new Promise((U=>{let nt=!0;const s=st=>{nt&&(nt=!1,Y.startRendering(),U(st instanceof TypeError))};let st;try{st=Y.decodeAudioData(null,(()=>{}),s)}catch(U){s(U)}void 0!==st&&st.catch(s)}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return!1;let Y;try{Y=new U({latencyHint:"balanced"})}catch{return!1}return Y.close(),!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return!1;const Y=new U(1,1,44100).createGain(),nt=Y.connect(Y)===Y;return Y.disconnect(Y),nt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U(Y,(U=>U.createOscillator()));try{nt.start(-1)}catch(U){return U instanceof RangeError}return!1}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=Y.createBuffer(1,1,44100),st=U(Y,(U=>U.createBufferSource()));st.buffer=nt,st.start(),st.stop();try{return st.stop(),!0}catch{return!1}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{const nt=U(Y,(U=>U.createOscillator()));try{nt.stop(-1)}catch(U){return U instanceof RangeError}return!1}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>async()=>{if(null===U)return!0;if(null===Y)return!1;const nt=new Blob(['class A extends AudioWorkletProcessor{process(){this.port.postMessage(0)}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),st=new Y(1,128,3200),ht=URL.createObjectURL(nt);let vt=!1;try{await st.audioWorklet.addModule(ht);const Y=st.createGain(),nt=new U(st,"a",{numberOfOutputs:0});nt.port.onmessage=()=>vt=!0,Y.connect(nt),await st.startRendering()}catch{}finally{URL.revokeObjectURL(ht)}return vt}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>()=>{if(null===Y)return!1;const nt=new Y(1,1,44100),st=U(nt,(U=>U.createChannelMerger()));try{st.channelCount=2}catch{return!0}return!1}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>()=>{if(null===Y)return!1;const nt=new Y(1,1,44100);return void 0===nt.createConstantSource||U(nt,(U=>U.createConstantSource())).offset.maxValue!==Number.POSITIVE_INFINITY}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return!1;const Y=new U(1,1,44100),nt=Y.createConvolver();nt.buffer=Y.createBuffer(1,1,Y.sampleRate);try{nt.buffer=Y.createBuffer(1,1,Y.sampleRate)}catch{return!1}return!0}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>null!==U&&U.hasOwnProperty("isSecureContext")},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return!1;const Y=new U;try{return Y.createMediaStreamSource(new MediaStream),!1}catch(U){return!0}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>()=>{if(null===Y)return Promise.resolve(!1);const nt=new Y(1,1,44100),st=U(nt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((U=>{nt.oncomplete=()=>{st.disconnect(),U(0!==nt.currentTime)},nt.startRendering()}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>()=>{if(null===U)return Promise.resolve(!1);const Y=new U(1,1,44100);if(void 0===Y.createStereoPanner)return Promise.resolve(!0);if(void 0===Y.createConstantSource)return Promise.resolve(!0);const nt=Y.createConstantSource(),st=Y.createStereoPanner();return nt.channelCount=1,nt.offset.value=1,st.channelCount=1,nt.start(),nt.connect(st).connect(Y.destination),Y.startRendering().then((U=>1!==U.getChannelData(0)[0]))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));const st={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},i=(U,Y,nt,ht,vt,yt)=>class extends U{constructor(U,Y=st){const ee=vt(U),oe={...st,...Y},re=nt(ee,oe);super(U,!0,re,yt(ee)?ht():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=re}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(U){if(null===U)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(U.length<2)throw Y();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=U}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(U){this._nativeWaveShaperNode.oversample=U}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(12),ht=nt(3);const o=(U,Y,nt)=>()=>{const vt=new WeakMap;return{render(yt,ee,oe){const re=vt.get(ee);return void 0!==re?Promise.resolve(re):(async(yt,ee,oe)=>{let re=Y(yt);if(!Object(ht.a)(re,ee)){const Y={channelCount:re.channelCount,channelCountMode:re.channelCountMode,channelInterpretation:re.channelInterpretation,curve:re.curve,oversample:re.oversample};re=U(ee,Y)}return vt.set(ee,re),Object(st.a)(re)?await nt(yt,ee,re.inputs[0],oe):await nt(yt,ee,re,oe),re})(yt,ee,oe)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>"undefined"==typeof window?null:window},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y)=>nt=>{nt.copyFromChannel=(st,ht,vt=0)=>{const yt=U(vt),ee=U(ht);if(ee>=nt.numberOfChannels)throw Y();const oe=nt.length,re=nt.getChannelData(ee),be=st.length;for(let U=yt<0?-yt:0;U+yt<oe&&U<be;U+=1)st[U]=re[U+yt]},nt.copyToChannel=(st,ht,vt=0)=>{const yt=U(vt),ee=U(ht);if(ee>=nt.numberOfChannels)throw Y();const oe=nt.length,re=nt.getChannelData(ee),be=st.length;for(let U=yt<0?-yt:0;U+yt<oe&&U<be;U+=1)re[U+yt]=st[U]}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>Y=>{var nt,st;Y.copyFromChannel=(nt=Y.copyFromChannel,(st,ht,vt=0)=>{const yt=U(vt),ee=U(ht);if(yt<Y.length)return nt.call(Y,st,ee,yt)}),Y.copyToChannel=(st=Y.copyToChannel,(nt,ht,vt=0)=>{const yt=U(vt),ee=U(ht);if(yt<Y.length)return st.call(Y,nt,ee,yt)})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>(Y,nt)=>{const st=nt.createBuffer(1,1,nt.sampleRate);null===Y.buffer&&(Y.buffer=st),U(Y,"buffer",(U=>()=>{const nt=U.call(Y);return nt===st?null:nt}),(U=>nt=>U.call(Y,null===nt?st:nt)))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(11);const i=U=>(Y,nt)=>{const ht=U(nt,(U=>U.createGain()));Y.connect(ht);const vt=(yt=Y.disconnect,()=>{yt.call(Y,ht),Y.removeEventListener("ended",vt)});var yt;Y.addEventListener("ended",vt),Object(st.a)(Y,ht),Y.stop=(U=>{let nt=!1;return(st=0)=>{if(nt)try{U.call(Y,st)}catch{ht.gain.setValueAtTime(0,st)}else U.call(Y,st),nt=!0}})(Y.stop)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt)=>(st,ht)=>{ht.channelCount=1,ht.channelCountMode="explicit",Object.defineProperty(ht,"channelCount",{get:()=>1,set:()=>{throw U()}}),Object.defineProperty(ht,"channelCountMode",{get:()=>"explicit",set:()=>{throw U()}});const vt=Y(st,(U=>U.createBufferSource()));nt(ht,(()=>{const U=ht.numberOfInputs;for(let Y=0;Y<U;Y+=1)vt.connect(ht,0,Y)}),(()=>vt.disconnect(ht)))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=()=>new Promise((U=>{const Y=new ArrayBuffer(0),{port1:nt,port2:st}=new MessageChannel;nt.onmessage=({data:Y})=>U(null!==Y),st.postMessage(Y,[Y])}))},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=U=>{var Y;U.start=(Y=U.start,(nt=0,st=0,ht)=>{const vt=U.buffer,yt=null===vt?st:Math.min(vt.duration,st);null!==vt&&yt>vt.duration-.5/U.context.sampleRate?Y.call(U,nt,0,0):Y.call(U,nt,yt,ht)})}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return N}));var st=nt(0),ht=nt(24),vt=nt(22);const r=U=>"port"in U;var yt=nt(33),ee=nt(20);const u=(U,Y)=>{if(!Object(ee.a)(U).delete(Y))throw new Error("Missing the expected event listener.")};var oe=nt(34),re=nt(8),be=nt(26),ze=nt(6),tn=nt(27),on=nt(9),$n=nt(16),Hn=nt(23),Kn=nt(19);const y=U=>!st.a.has(U),b=(U,Y)=>{const nt=Array.from(U).filter(Y);if(nt.length>1)throw Error("More than one element was found.");if(0===nt.length)throw Error("No element was found.");const[st]=nt;return U.delete(st),st};var ts=nt(17),es=nt(21);const T=(U,Y)=>{!r(U)&&Y.every((U=>0===U.size))&&Object(es.a)(U)},O=U=>new Promise((Y=>{const nt=U.createScriptProcessor(256,1,1),st=U.createGain(),ht=U.createBuffer(1,2,44100),vt=ht.getChannelData(0);vt[0]=1,vt[1]=1;const yt=U.createBufferSource();yt.buffer=ht,yt.loop=!0,yt.connect(nt).connect(U.destination),yt.connect(st),yt.disconnect(st),nt.onaudioprocess=st=>{const ht=st.inputBuffer.getChannelData(0);Array.prototype.some.call(ht,(U=>1===U))?Y(!0):Y(!1),yt.stop(),nt.onaudioprocess=null,yt.disconnect(nt),nt.disconnect(U.destination)},yt.start()})),S=(U,Y)=>{const nt=new Map;for(const Y of U)for(const U of Y){const Y=nt.get(U);nt.set(U,void 0===Y?1:Y+1)}nt.forEach(((U,nt)=>Y(nt,U)))};var Fs=nt(25);const k=(U,Y,[nt,st,ht],vt)=>{Object($n.a)(U[st],[Y,nt,ht],(U=>U[0]===Y&&U[1]===nt),vt)},A=(U,Y,[nt,st],ht)=>{Object($n.a)(U,[Y,nt,st],(U=>U[0]===Y&&U[1]===nt),ht)},D=(U,Y,[nt,st,ht],vt)=>{const yt=U.get(nt);void 0===yt?U.set(nt,new Set([[st,Y,ht]])):Object($n.a)(yt,[st,Y,ht],(U=>U[0]===st&&U[1]===Y),vt)},M=(U,[Y,nt,st],ht)=>{const vt=U.get(Y);void 0===vt?U.set(Y,new Set([[nt,st]])):Object($n.a)(vt,[nt,st],(U=>U[0]===nt),ht)},j=(U,Y,nt,st)=>{const ht=Object(on.a)(U,Y),vt=b(ht,(U=>U[0]===nt&&U[1]===st));return 0===ht.size&&U.delete(Y),vt},E=(U,Y,nt)=>{const st=Object(on.a)(U,Y),ht=b(st,(U=>U[0]===nt));return 0===st.size&&U.delete(Y),ht},R=(U,Y,nt,st)=>{const{activeInputs:ht,passiveInputs:vt}=Object(re.a)(Y),{outputs:be}=Object(re.a)(U),tn=Object(ee.a)(U),d=ee=>{const re=Object(ze.a)(Y),be=Object(ze.a)(U);if(ee){const ee=j(vt,U,nt,st);k(ht,U,ee,!1),Object(Kn.a)(U)||Object(yt.a)(be,re,nt,st),y(Y)&&Object(ts.a)(Y)}else{const yt=((U,Y,nt,st)=>b(U[st],(U=>U[0]===Y&&U[1]===nt)))(ht,U,nt,st);D(vt,st,yt,!1),Object(Kn.a)(U)||Object(oe.a)(be,re,nt,st),Object(Hn.a)(Y)&&T(Y,ht)}};return!!Object($n.a)(be,[Y,nt,st],(U=>U[0]===Y&&U[1]===nt&&U[2]===st),!0)&&(tn.add(d),Object(Hn.a)(U)?k(ht,U,[nt,st,d],!0):D(vt,st,[U,nt,d],!0),!0)},q=(U,Y,nt)=>{const{activeInputs:st,passiveInputs:ht}=Object(be.a)(Y),{outputs:vt}=Object(re.a)(U),yt=Object(ee.a)(U),a=vt=>{const yt=Object(ze.a)(U),ee=Object(tn.a)(Y);if(vt){const Y=E(ht,U,nt);A(st,U,Y,!1),Object(Kn.a)(U)||yt.connect(ee,nt)}else{const Y=((U,Y,nt)=>b(U,(U=>U[0]===Y&&U[1]===nt)))(st,U,nt);M(ht,Y,!1),Object(Kn.a)(U)||yt.disconnect(ee,nt)}};return!!Object($n.a)(vt,[Y,nt],(U=>U[0]===Y&&U[1]===nt),!0)&&(yt.add(a),Object(Hn.a)(U)?A(st,U,[nt,a],!0):M(ht,[U,nt,a],!0),!0)},I=(U,Y,nt)=>{for(const st of U)if(st[0]===Y&&st[1]===nt)return U.delete(st),st;return null},F=(U,Y,nt,st)=>{const[ht,vt]=((U,Y,nt,st)=>{const{activeInputs:ht,passiveInputs:vt}=Object(re.a)(Y),yt=I(ht[st],U,nt);return null===yt?[j(vt,U,nt,st)[2],!1]:[yt[2],!0]})(U,Y,nt,st);if(null!==ht&&(u(U,ht),vt&&!Object(Kn.a)(U)&&Object(oe.a)(Object(ze.a)(U),Object(ze.a)(Y),nt,st)),Object(Hn.a)(Y)){const{activeInputs:U}=Object(re.a)(Y);T(Y,U)}},V=(U,Y,nt)=>{const[st,ht]=((U,Y,nt)=>{const{activeInputs:st,passiveInputs:ht}=Object(be.a)(Y),vt=I(st,U,nt);return null===vt?[E(ht,U,nt)[1],!1]:[vt[2],!0]})(U,Y,nt);null!==st&&(u(U,st),ht&&!Object(Kn.a)(U)&&Object(ze.a)(U).disconnect(Object(tn.a)(Y),nt))},N=(U,Y,nt,ee,oe,on,Hn,Kn,es,Ns,Ps,zs,Ws,Gs,$s)=>class extends Ns{constructor(Y,ht,vt,yt){super(vt),this._context=Y,this._nativeAudioNode=vt;const ee=Ps(Y);zs(ee)&&!0!==nt(O,(()=>O(ee)))&&(U=>{const Y=new Map;var nt,st;U.connect=(nt=U.connect.bind(U),(U,st=0,ht=0)=>{const vt=Object(Fs.a)(U)?nt(U,st,ht):nt(U,st),yt=Y.get(U);return void 0===yt?Y.set(U,[{input:ht,output:st}]):yt.every((U=>U.input!==ht||U.output!==st))&&yt.push({input:ht,output:st}),vt}),U.disconnect=(st=U.disconnect,(nt,ht,vt)=>{if(st.apply(U),void 0===nt)Y.clear();else if("number"==typeof nt)for(const[U,st]of Y){const ht=st.filter((U=>U.output!==nt));0===ht.length?Y.delete(U):Y.set(U,ht)}else if(Y.has(nt))if(void 0===ht)Y.delete(nt);else{const U=Y.get(nt);if(void 0!==U){const st=U.filter((U=>U.output!==ht&&(U.input!==vt||void 0===vt)));0===st.length?Y.delete(nt):Y.set(nt,st)}}for(const[nt,st]of Y)st.forEach((Y=>{Object(Fs.a)(nt)?U.connect(nt,Y.output,Y.input):U.connect(nt,Y.output)}))})})(vt),st.c.set(this,vt),st.i.set(this,new Set),ht&&Object(ts.a)(this),U(this,yt,vt)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(U){this._nativeAudioNode.channelCount=U}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(U){this._nativeAudioNode.channelCountMode=U}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(U){this._nativeAudioNode.channelInterpretation=U}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(U,nt=0,st=0){if(nt<0||nt>=this._nativeAudioNode.numberOfOutputs)throw oe();const vt=Ps(this._context),Kn=$s(vt);if(Ws(U)||Gs(U))throw on();if(Object(ht.a)(U)){const ht=Object(ze.a)(U);try{const ee=Object(yt.a)(this._nativeAudioNode,ht,nt,st);if(Kn||y(this)?this._nativeAudioNode.disconnect(...ee):y(U)&&Object(ts.a)(U),r(U)){const U=Y.get(ht);if(void 0===U){const U=vt.createGain();U.connect(ee[0],0,ee[2]),Y.set(ht,new Map([[st,U]]))}else if(void 0===U.get(st)){const Y=vt.createGain();Y.connect(ee[0],0,ee[2]),U.set(st,Y)}}}catch(U){if(12===U.code)throw on();throw U}if(Kn?((U,Y,nt,st)=>{const{outputs:ht}=Object(re.a)(U);if(Object($n.a)(ht,[Y,nt,st],(U=>U[0]===Y&&U[1]===nt&&U[2]===st),!0)){const{activeInputs:ht}=Object(re.a)(Y);return k(ht,U,[nt,st,null],!0),!0}return!1})(this,U,nt,st):R(this,U,nt,st)){const Y=es([this],U);S(Y,ee(Kn))}return U}const Fs=Object(tn.a)(U);if("playbackRate"===Fs.name)throw Hn();try{this._nativeAudioNode.connect(Fs,nt),(Kn||y(this))&&this._nativeAudioNode.disconnect(Fs,nt)}catch(U){if(12===U.code)throw on();throw U}if(Kn?((U,Y,nt)=>{const{outputs:st}=Object(re.a)(U);if(Object($n.a)(st,[Y,nt],(U=>U[0]===Y&&U[1]===nt),!0)){const{activeInputs:st}=Object(be.a)(Y);return A(st,U,[nt,null],!0),!0}return!1})(this,U,nt):q(this,U,nt)){const Y=es([this],U);S(Y,ee(Kn))}}disconnect(U,Y,nt){let st;if(void 0===U)st=(U=>{const Y=Object(re.a)(U),nt=[];for(const st of Y.outputs)Object(vt.a)(st)?F(U,...st):V(U,...st),nt.push(st[0]);return Y.outputs.clear(),nt})(this);else if("number"==typeof U){if(U<0||U>=this.numberOfOutputs)throw oe();st=((U,Y)=>{const nt=Object(re.a)(U),st=[];for(const ht of nt.outputs)ht[1]===Y&&(Object(vt.a)(ht)?F(U,...ht):V(U,...ht),st.push(ht[0]),nt.outputs.delete(ht));return st})(this,U)}else{if(void 0!==Y&&(Y<0||Y>=this.numberOfOutputs))throw oe();if(Object(ht.a)(U)&&void 0!==nt&&(nt<0||nt>=U.numberOfInputs))throw oe();if(st=((U,Y,nt,st)=>{const ht=Object(re.a)(U);return Array.from(ht.outputs).filter((U=>!(U[0]!==Y||void 0!==nt&&U[1]!==nt||void 0!==st&&U[2]!==st))).map((Y=>(Object(vt.a)(Y)?F(U,...Y):V(U,...Y),ht.outputs.delete(Y),Y[0])))})(this,U,Y,nt),0===st.length)throw on()}for(const U of st){const Y=es([this],U);S(Y,Kn)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return l}));var st=nt(2),ht=nt(43),vt=nt(35),yt=nt(41),ee=nt(0);var oe=nt(36),re=nt(40);const l=(U,Y,nt,be,ze,tn,on,$n,Hn,Kn,ts,es,Fs)=>(Ns,Ps,zs,Ws)=>{if(0===Ws.numberOfInputs&&0===Ws.numberOfOutputs)throw Kn();if(void 0!==Ws.outputChannelCount){if(Ws.outputChannelCount.some((U=>U<1)))throw Kn();if(Ws.outputChannelCount.length!==Ws.numberOfOutputs)throw nt()}if("explicit"!==Ws.channelCountMode)throw Kn();const Gs=Ws.channelCount*Ws.numberOfInputs,$s=Ws.outputChannelCount.reduce(((U,Y)=>U+Y),0),Qs=void 0===zs.parameterDescriptors?0:zs.parameterDescriptors.length;if(Gs+Qs>6||$s>6)throw Kn();const Xs=new MessageChannel,Zs=[],Hs=[];for(let U=0;U<Ws.numberOfInputs;U+=1)Zs.push($n(Ns,{channelCount:Ws.channelCount,channelCountMode:Ws.channelCountMode,channelInterpretation:Ws.channelInterpretation,gain:1})),Hs.push(tn(Ns,{channelCount:Ws.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Ws.channelCount}));const Js=[];if(void 0!==zs.parameterDescriptors)for(const{defaultValue:U,maxValue:Y,minValue:nt,name:ht}of zs.parameterDescriptors){const vt=on(Ns,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==Ws.parameterData[ht]?Ws.parameterData[ht]:void 0===U?0:U});Object.defineProperties(vt.offset,{defaultValue:{get:()=>void 0===U?0:U},maxValue:{get:()=>void 0===Y?st.b:Y},minValue:{get:()=>void 0===nt?st.a:nt}}),Js.push(vt)}const Ks=ze(Ns,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Gs+Qs)}),ti=Object(ht.a)(Ps,Ns.sampleRate),ei=Hn(Ns,ti,Gs+Qs,Math.max(1,$s)),ni=tn(Ns,{channelCount:Math.max(1,$s),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,$s)}),si=[];for(let U=0;U<Ws.numberOfOutputs;U+=1)si.push(ze(Ns,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Ws.outputChannelCount[U]}));for(let U=0;U<Ws.numberOfInputs;U+=1){Zs[U].connect(Hs[U]);for(let Y=0;Y<Ws.channelCount;Y+=1)Hs[U].connect(Ks,Y,U*Ws.channelCount+Y)}const ii=new re.a(void 0===zs.parameterDescriptors?[]:zs.parameterDescriptors.map((({name:U},Y)=>{const nt=Js[Y];return nt.connect(Ks,0,Gs+Y),nt.start(0),[U,nt.offset]})));Ks.connect(ei);let oi=Ws.channelInterpretation,ri=null;const ai=0===Ws.numberOfOutputs?[ei]:si,ci={get bufferSize(){return ti},get channelCount(){return Ws.channelCount},set channelCount(U){throw be()},get channelCountMode(){return Ws.channelCountMode},set channelCountMode(U){throw be()},get channelInterpretation(){return oi},set channelInterpretation(U){for(const Y of Zs)Y.channelInterpretation=U;oi=U},get context(){return ei.context},get inputs(){return Zs},get numberOfInputs(){return Ws.numberOfInputs},get numberOfOutputs(){return Ws.numberOfOutputs},get onprocessorerror(){return ri},set onprocessorerror(U){"function"==typeof ri&&ci.removeEventListener("processorerror",ri),ri="function"==typeof U?U:null,"function"==typeof ri&&ci.addEventListener("processorerror",ri)},get parameters(){return ii},get port(){return Xs.port2},addEventListener:(...U)=>ei.addEventListener(U[0],U[1],U[2]),connect:Y.bind(null,ai),disconnect:ts.bind(null,ai),dispatchEvent:(...U)=>ei.dispatchEvent(U[0]),removeEventListener:(...U)=>ei.removeEventListener(U[0],U[1],U[2])},ui=new Map;var hi,li;Xs.port1.addEventListener=(hi=Xs.port1.addEventListener,(...U)=>{if("message"===U[0]){const Y="function"==typeof U[1]?U[1]:"object"==typeof U[1]&&null!==U[1]&&"function"==typeof U[1].handleEvent?U[1].handleEvent:null;if(null!==Y){const nt=ui.get(U[1]);void 0!==nt?U[1]=nt:(U[1]=U=>{es(Ns.currentTime,Ns.sampleRate,(()=>Y(U)))},ui.set(Y,U[1]))}}return hi.call(Xs.port1,U[0],U[1],U[2])}),Xs.port1.removeEventListener=(li=Xs.port1.removeEventListener,(...U)=>{if("message"===U[0]){const Y=ui.get(U[1]);void 0!==Y&&(ui.delete(U[1]),U[1]=Y)}return li.call(Xs.port1,U[0],U[1],U[2])});let di=null;Object.defineProperty(Xs.port1,"onmessage",{get:()=>di,set:U=>{"function"==typeof di&&Xs.port1.removeEventListener("message",di),di="function"==typeof U?U:null,"function"==typeof di&&(Xs.port1.addEventListener("message",di),Xs.port1.start())}}),zs.prototype.port=Xs.port1;let pi=null;((U,Y,nt,st)=>{let ht=ee.k.get(U);void 0===ht&&(ht=new WeakMap,ee.k.set(U,ht));const vt=(async(U,Y)=>new U(await(U=>new Promise(((Y,nt)=>{const{port1:st,port2:ht}=new MessageChannel;st.onmessage=({data:U})=>{st.close(),ht.close(),Y(U)},st.onmessageerror=({data:U})=>{st.close(),ht.close(),nt(U)},ht.postMessage(U)})))(Y)))(nt,st);return ht.set(Y,vt),vt})(Ns,ci,zs,Ws).then((U=>pi=U));const fi=Object(oe.a)(Ws.numberOfInputs,Ws.channelCount),_i=Object(oe.a)(Ws.numberOfOutputs,Ws.outputChannelCount),mi=void 0===zs.parameterDescriptors?[]:zs.parameterDescriptors.reduce(((U,{name:Y})=>({...U,[Y]:new Float32Array(128)})),{});let gi=!0;const $=()=>{Ws.numberOfOutputs>0&&ei.disconnect(ni);for(let U=0,Y=0;U<Ws.numberOfOutputs;U+=1){const nt=si[U];for(let st=0;st<Ws.outputChannelCount[U];st+=1)ni.disconnect(nt,Y+st,st);Y+=Ws.outputChannelCount[U]}};ei.onaudioprocess=({inputBuffer:Y,outputBuffer:nt})=>{if(null!==pi)for(let st=0;st<ti;st+=128){for(let U=0;U<Ws.numberOfInputs;U+=1)for(let nt=0;nt<Ws.channelCount;nt+=1)Object(vt.a)(Y,fi[U],nt,nt,st);void 0!==zs.parameterDescriptors&&zs.parameterDescriptors.forEach((({name:U},nt)=>{Object(vt.a)(Y,mi,U,Gs+nt,st)}));for(let U=0;U<Ws.numberOfInputs;U+=1)for(let Y=0;Y<Ws.outputChannelCount[U];Y+=1)0===_i[U][Y].byteLength&&(_i[U][Y]=new Float32Array(128));try{const Y=fi.map(((Y,nt)=>{const st=U.get(ci);return void 0===st||void 0===st.get(nt)?[]:Y})),ht=es(Ns.currentTime+st/Ns.sampleRate,Ns.sampleRate,(()=>pi.process(Y,_i,mi)));gi=ht;for(let U=0,Y=0;U<Ws.numberOfOutputs;U+=1){for(let ht=0;ht<Ws.outputChannelCount[U];ht+=1)Object(yt.a)(nt,_i[U],ht,Y+ht,st);Y+=Ws.outputChannelCount[U]}}catch(U){gi=!1,ci.dispatchEvent(new ErrorEvent("processorerror",{error:U}))}if(!gi){for(let U=0;U<Ws.numberOfInputs;U+=1){Zs[U].disconnect(Hs[U]);for(let Y=0;Y<Ws.channelCount;Y+=1)Hs[st].disconnect(Ks,Y,U*Ws.channelCount+Y)}if(void 0!==zs.parameterDescriptors){const U=zs.parameterDescriptors.length;for(let Y=0;Y<U;Y+=1){const U=Js[Y];U.disconnect(Ks,0,Gs+Y),U.stop()}}Ks.disconnect(ei),ei.onaudioprocess=null,vi?$():et();break}}};let vi=!1;const yi=$n(Ns,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),tt=()=>ei.connect(yi).connect(yi.context.destination),et=()=>{ei.disconnect(yi),yi.disconnect()};return tt(),Fs(ci,(()=>{if(gi){et(),Ws.numberOfOutputs>0&&ei.connect(ni);for(let U=0,Y=0;U<Ws.numberOfOutputs;U+=1){const nt=si[U];for(let st=0;st<Ws.outputChannelCount[U];st+=1)ni.connect(nt,Y+st,st);Y+=Ws.outputChannelCount[U]}}vi=!0}),(()=>{gi&&(tt(),$()),vi=!1}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return u}));var st=nt(0);const ht={construct:()=>ht},vt=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,r=(U,Y)=>{const nt=[];let st=U.replace(/^[\s]+/,""),ht=st.match(vt);for(;null!==ht;){const U=ht[1].slice(1,-1),yt=ht[0].replace(/([\s]+)?;?$/,"").replace(U,new URL(U,Y).toString());nt.push(yt),st=st.slice(ht[0].length).replace(/^[\s]+/,""),ht=st.match(vt)}return[nt.join(";"),st]},a=U=>{if(void 0!==U&&!Array.isArray(U))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},c=U=>{if(!(U=>{try{new new Proxy(U,ht)}catch{return!1}return!0})(U))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===U.prototype||"object"!=typeof U.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},u=(U,Y,nt,ht,vt,yt,ee,oe,re)=>(be,ze,tn={credentials:"omit"})=>{const on=yt(be),$n=new URL(ze,re.location.href).toString();if(void 0!==on.audioWorklet)return ht(ze).then((U=>{const[Y,nt]=r(U,$n),st=new Blob([`${Y};(registerProcessor=>{${nt}\n})((n,p)=>registerProcessor(n,class extends p{process(i,o,p){return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}))`],{type:"application/javascript; charset=utf-8"}),ht=URL.createObjectURL(st),yt=vt(on);return(null!==yt?yt:on).audioWorklet.addModule(ht,tn).then((()=>URL.revokeObjectURL(ht))).catch((U=>{throw URL.revokeObjectURL(ht),void 0!==U.code&&"SyntaxError"!==U.name||(U.code=12),U}))}));const Hn=oe.get(be);if(void 0!==Hn&&Hn.has(ze))return Promise.resolve();const Kn=ee.get(be);if(void 0!==Kn){const U=Kn.get(ze);if(void 0!==U)return U}const ts=ht(ze).then((U=>{const[nt,st]=r(U,$n);return Y(`${nt};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${st}\n})})(window,'_AWGS')`)})).then((()=>{const Y=re._AWGS.pop();if(void 0===Y)throw new SyntaxError;nt(on.currentTime,on.sampleRate,(()=>Y(class{},void 0,((Y,nt)=>{if(""===Y.trim())throw U();const ht=st.j.get(on);if(void 0!==ht){if(ht.has(Y))throw U();c(nt),a(nt.parameterDescriptors),ht.set(Y,nt)}else c(nt),a(nt.parameterDescriptors),st.j.set(on,new Map([[Y,nt]]))}),on.sampleRate,void 0,void 0)))})).catch((U=>{throw void 0!==U.code&&"SyntaxError"!==U.name||(U.code=12),U}));return void 0===Kn?ee.set(be,new Map([[ze,ts]])):Kn.set(ze,ts),ts.then((()=>{const U=oe.get(be);void 0===U?oe.set(be,new Set([ze])):U.add(ze)})).catch((()=>{})).then((()=>{const U=ee.get(be);void 0!==U&&U.delete(ze)})),ts}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return r}));var st=nt(4),ht=nt(1);const o=U=>"function"==typeof U.getFloatTimeDomainData,r=(U,Y,nt)=>(vt,yt)=>{const ee=nt(vt,(U=>U.createAnalyser()));if(Object(ht.a)(ee,yt),!(yt.maxDecibels>yt.minDecibels))throw Y();return Object(st.a)(ee,yt,"fftSize"),Object(st.a)(ee,yt,"maxDecibels"),Object(st.a)(ee,yt,"minDecibels"),Object(st.a)(ee,yt,"smoothingTimeConstant"),U(o,(()=>o(ee)))||(U=>{U.getFloatTimeDomainData=Y=>{const nt=new Uint8Array(Y.length);U.getByteTimeDomainData(nt);const st=Math.max(nt.length,U.fftSize);for(let U=0;U<st;U+=1)Y[U]=.0078125*(nt[U]-128);return Y}})(ee),ee}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return u}));var st=nt(5),ht=nt(4),vt=nt(1),yt=nt(7),ee=nt(30),oe=nt(31);const u=(U,Y,nt,re,be,ze,tn,on,$n,Hn,Kn,ts,es)=>(Fs,Ns={})=>{const Ps=nt(Fs,(U=>U.createBufferSource()));return Object(vt.a)(Ps,Ns),Object(st.a)(Ps,Ns,"playbackRate"),Object(ht.a)(Ps,Ns,"buffer"),Object(ht.a)(Ps,Ns,"loop"),Object(ht.a)(Ps,Ns,"loopEnd"),Object(ht.a)(Ps,Ns,"loopStart"),Y(re,(()=>re(Fs)))||(U=>{U.start=(Y=>{let nt=!1;return(st=0,ht=0,vt)=>{if(nt)throw Object(yt.a)();Y.call(U,st,ht,vt),nt=!0}})(U.start)})(Ps),Y(be,be)||((U,Y)=>{let nt=Number.POSITIVE_INFINITY,st=Number.POSITIVE_INFINITY;var ht,vt;U.start=(ht=U.start,vt=U.stop,(yt=0,ee=0,oe=Number.POSITIVE_INFINITY)=>{if(ht.call(U,yt,ee),oe>=0&&oe<Number.POSITIVE_INFINITY){const ht=Math.max(yt,Y.currentTime),ee=oe/U.playbackRate.value;nt=ht+ee,vt.call(U,Math.min(nt,st))}}),U.stop=(ht=>(vt=0)=>{st=Math.max(vt,Y.currentTime),ht.call(U,Math.min(nt,st))})(U.stop)})(Ps,Fs),Y(ze,(()=>ze(Fs)))||Kn(Ps),Y(tn,(()=>tn(Fs)))||ts(Ps,Fs),Y(on,(()=>on(Fs)))||Object(ee.a)(Ps),Y($n,(()=>$n(Fs)))||es(Ps,Fs),Y(Hn,(()=>Hn(Fs)))||Object(oe.a)(Ps),U(Fs,Ps),Ps}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return d}));var st=nt(35),ht=nt(41),vt=nt(36),yt=nt(8),ee=nt(0),oe=nt(6),re=nt(9),be=nt(3);const l=async(U,Y,nt,be,ze,tn)=>{const on=null===Y?128*Math.ceil(U.context.length/128):Y.length,$n=be.channelCount*be.numberOfInputs,Hn=be.outputChannelCount.reduce(((U,Y)=>U+Y),0),Kn=0===Hn?null:nt.createBuffer(Hn,on,nt.sampleRate);if(void 0===ze)throw new Error("Missing the processor constructor.");const ts=Object(yt.a)(U),es=await((U,Y)=>{const nt=Object(re.a)(ee.k,U),st=Object(oe.a)(Y);return Object(re.a)(nt,st)})(nt,U),Fs=Object(vt.a)(be.numberOfInputs,be.channelCount),Ns=Object(vt.a)(be.numberOfOutputs,be.outputChannelCount),Ps=Array.from(U.parameters.keys()).reduce(((U,Y)=>({...U,[Y]:new Float32Array(128)})),{});for(let vt=0;vt<on;vt+=128){if(be.numberOfInputs>0&&null!==Y)for(let U=0;U<be.numberOfInputs;U+=1)for(let nt=0;nt<be.channelCount;nt+=1)Object(st.a)(Y,Fs[U],nt,nt,vt);void 0!==ze.parameterDescriptors&&null!==Y&&ze.parameterDescriptors.forEach((({name:U},nt)=>{Object(st.a)(Y,Ps,U,$n+nt,vt)}));for(let U=0;U<be.numberOfInputs;U+=1)for(let Y=0;Y<be.outputChannelCount[U];Y+=1)0===Ns[U][Y].byteLength&&(Ns[U][Y]=new Float32Array(128));try{const U=Fs.map(((U,Y)=>0===ts.activeInputs[Y].size?[]:U)),Y=tn(vt/nt.sampleRate,nt.sampleRate,(()=>es.process(U,Ns,Ps)));if(null!==Kn)for(let U=0,Y=0;U<be.numberOfOutputs;U+=1){for(let nt=0;nt<be.outputChannelCount[U];nt+=1)Object(ht.a)(Kn,Ns[U],nt,Y+nt,vt);Y+=be.outputChannelCount[U]}if(!Y)break}catch(Y){U.dispatchEvent(new ErrorEvent("processorerror",{error:Y}));break}}return Kn},d=(U,Y,nt,st,ht,vt,yt,ee,oe,re,ze,tn,on,$n,Hn,Kn)=>(ts,es,Fs)=>{const Ns=new WeakMap;let Ps=null;return{render(zs,Ws,Gs){ee(Ws,zs);const $s=Ns.get(Ws);return void 0!==$s?Promise.resolve($s):(async(ee,zs,Ws)=>{let Gs=ze(ee),$s=null;const Qs=Object(be.a)(Gs,zs);if(null===tn){const U=es.outputChannelCount.reduce(((U,Y)=>U+Y),0),nt=ht(zs,{channelCount:Math.max(1,U),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,U)}),vt=[];for(let U=0;U<ee.numberOfOutputs;U+=1)vt.push(st(zs,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:es.outputChannelCount[U]}));const re=yt(zs,{channelCount:es.channelCount,channelCountMode:es.channelCountMode,channelInterpretation:es.channelInterpretation,gain:1});re.connect=Y.bind(null,vt),re.disconnect=oe.bind(null,vt),$s=[nt,vt,re]}else Qs||(Gs=new tn(zs,ts));if(Ns.set(zs,null===$s?Gs:$s[2]),null!==$s){if(null===Ps){if(void 0===Fs)throw new Error("Missing the processor constructor.");if(null===on)throw new Error("Missing the native OfflineAudioContext constructor.");const U=ee.channelCount*ee.numberOfInputs,Y=void 0===Fs.parameterDescriptors?0:Fs.parameterDescriptors.length,nt=U+Y,c=async()=>{const oe=new on(nt,128*Math.ceil(ee.context.length/128),zs.sampleRate),re=[],be=[];for(let U=0;U<es.numberOfInputs;U+=1)re.push(yt(oe,{channelCount:es.channelCount,channelCountMode:es.channelCountMode,channelInterpretation:es.channelInterpretation,gain:1})),be.push(ht(oe,{channelCount:es.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:es.channelCount}));const ze=await Promise.all(Array.from(ee.parameters.values()).map((async U=>{const Y=vt(oe,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U.value});return await $n(oe,U,Y.offset,Ws),Y}))),tn=st(oe,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+Y)});for(let U=0;U<es.numberOfInputs;U+=1){re[U].connect(be[U]);for(let Y=0;Y<es.channelCount;Y+=1)be[U].connect(tn,Y,U*es.channelCount+Y)}for(const[Y,nt]of ze.entries())nt.connect(tn,0,U+Y),nt.start(0);return tn.connect(oe.destination),await Promise.all(re.map((U=>Hn(ee,oe,U,Ws)))),Kn(oe)};Ps=l(ee,0===nt?null:await c(),zs,es,Fs,re)}const U=await Ps,Y=nt(zs),[oe,be,ze]=$s;null!==U&&(Y.buffer=U,Y.start(0)),Y.connect(oe);for(let U=0,Y=0;U<ee.numberOfOutputs;U+=1){const nt=be[U];for(let st=0;st<es.outputChannelCount[U];st+=1)oe.connect(nt,Y+st,st);Y+=es.outputChannelCount[U]}return ze}if(Qs)for(const[Y,nt]of ee.parameters.entries())await U(zs,nt,Gs.parameters.get(Y),Ws);else for(const[U,Y]of ee.parameters.entries())await $n(zs,Y,Gs.parameters.get(U),Ws);return await Hn(ee,zs,Gs,Ws),Gs})(zs,Ws,Gs)}}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(29);const i=(U,Y,nt,ht,vt,yt,ee,oe,re,be,ze,tn,on)=>($n,Hn)=>{const Kn=ee($n)?$n:yt($n);if(vt.has(Hn)){const U=nt();return Promise.reject(U)}try{vt.add(Hn)}catch{}return Y(ze,(()=>ze(Kn)))?("closed"===Kn.state&&null!==re&&oe(Kn)?new re(1,1,Kn.sampleRate):Kn).decodeAudioData(Hn).catch((U=>{if(U instanceof DOMException&&"NotSupportedError"===U.name)throw new TypeError;throw U})).then((nt=>(Y(be,(()=>be(nt)))||on(nt),U.add(nt),nt))):new Promise(((Y,nt)=>{const o=()=>{try{(U=>{const{port1:Y}=new MessageChannel;Y.postMessage(U,[U])})(Hn)}catch{}},r=U=>{nt(U),o()};try{Kn.decodeAudioData(Hn,(nt=>{"function"!=typeof nt.copyFromChannel&&(tn(nt),Object(st.a)(nt)),U.add(nt),o(),Y(nt)}),(U=>{r(null===U?ht():U)}))}catch(U){r(U)}}))}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return i}));var st=nt(24);const i=(U,Y,nt)=>function i(ht,vt){const yt=Object(st.a)(vt)?vt:nt(U,vt);if((U=>"delayTime"in U)(yt))return[];if(ht[0]===yt)return[ht];if(ht.includes(yt))return[];const{outputs:ee}=Y(yt);return Array.from(ee).map((U=>i([...ht,yt],U[0]))).reduce(((U,Y)=>U.concat(Y)),[])}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(37);const ht={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},o=(U,Y,nt,vt,yt)=>class extends U{constructor(U,ee){const oe=vt(U),re=yt(oe),be={...ht,...ee},ze=Y(oe,re?null:U.baseLatency,be);super(U,!1,ze,re?nt(be.feedback,be.feedforward):null),(U=>{var Y;U.getFrequencyResponse=(Y=U.getFrequencyResponse,(nt,ht,vt)=>{if(nt.length!==ht.length||ht.length!==vt.length)throw Object(st.a)();return Y.call(U,nt,ht,vt)})})(ze),this._nativeIIRFilterNode=ze}getFrequencyResponse(U,Y,nt){return this._nativeIIRFilterNode.getFrequencyResponse(U,Y,nt)}}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return s}));const s=(U,Y,nt,st,ht,vt)=>(yt,ee,oe,re,be,ze)=>{if(null!==oe)try{const nt=Y(yt,(U=>new oe(U,re,ze))),ht=new Map;let ee=null;if(Object.defineProperties(nt,{channelCount:{get:()=>ze.channelCount,set:()=>{throw U()}},channelCountMode:{get:()=>"explicit",set:()=>{throw U()}},onprocessorerror:{get:()=>ee,set:U=>{"function"==typeof ee&&nt.removeEventListener("processorerror",ee),ee="function"==typeof U?U:null,"function"==typeof ee&&nt.addEventListener("processorerror",ee)}}}),nt.addEventListener=(on=nt.addEventListener,(...U)=>{if("processorerror"===U[0]){const Y="function"==typeof U[1]?U[1]:"object"==typeof U[1]&&null!==U[1]&&"function"==typeof U[1].handleEvent?U[1].handleEvent:null;if(null!==Y){const nt=ht.get(U[1]);void 0!==nt?U[1]=nt:(U[1]=nt=>{Y(new ErrorEvent(U[0],{...nt,error:new Error}))},ht.set(Y,U[1]))}}return on.call(nt,U[0],U[1],U[2])}),nt.removeEventListener=(tn=nt.removeEventListener,(...U)=>{if("processorerror"===U[0]){const Y=ht.get(U[1]);void 0!==Y&&(ht.delete(U[1]),U[1]=Y)}return tn.call(nt,U[0],U[1],U[2])}),0!==ze.numberOfOutputs){const U=st(yt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return nt.connect(U).connect(U.context.destination),vt(nt,(()=>U.disconnect()),(()=>U.connect(U.context.destination)))}return nt}catch(U){if(11===U.code)throw ht();throw U}var tn,on;if(void 0===be)throw ht();return(U=>{const{port1:Y}=new MessageChannel;try{Y.postMessage(U)}finally{Y.close()}})(ze),nt(yt,ee,be,ze)}},function(U,Y,nt){"use strict";nt.d(Y,"a",(function(){return o}));var st=nt(1),ht=nt(7);const o=U=>(Y,nt)=>{const vt=U(Y,(U=>U.createChannelSplitter(nt.numberOfOutputs)));return Object(st.a)(vt,nt),(U=>{const Y=U.numberOfOutputs;Object.defineProperty(U,"channelCount",{get:()=>Y,set:U=>{if(U!==Y)throw Object(ht.a)()}}),Object.defineProperty(U,"channelCountMode",{get:()=>"explicit",set:U=>{if("explicit"!==U)throw Object(ht.a)()}}),Object.defineProperty(U,"channelInterpretation",{get:()=>"discrete",set:U=>{if("discrete"!==U)throw Object(ht.a)()}})})(vt),vt}},function(U,Y,nt){var st=nt(677),ht=nt(678),vt=nt(679),yt=nt(681);U.exports=function(U,Y){return st(U)||ht(U,Y)||vt(U,Y)||yt()}},function(U,Y){U.exports=function(U){if(Array.isArray(U))return U}},function(U,Y){U.exports=function(U,Y){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(U)){var nt=[],st=!0,ht=!1,vt=void 0;try{for(var yt,ee=U[Symbol.iterator]();!(st=(yt=ee.next()).done)&&(nt.push(yt.value),!Y||nt.length!==Y);st=!0);}catch(U){ht=!0,vt=U}finally{try{st||null==ee.return||ee.return()}finally{if(ht)throw vt}}return nt}}},function(U,Y,nt){var st=nt(680);U.exports=function(U,Y){if(U){if("string"==typeof U)return st(U,Y);var nt=Object.prototype.toString.call(U).slice(8,-1);return"Object"===nt&&U.constructor&&(nt=U.constructor.name),"Map"===nt||"Set"===nt?Array.from(nt):"Arguments"===nt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt)?st(U,Y):void 0}}},function(U,Y){U.exports=function(U,Y){(null==Y||Y>U.length)&&(Y=U.length);for(var nt=0,st=new Array(Y);nt<Y;nt++)st[nt]=U[nt];return st}},function(U,Y){U.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(U,Y){U.exports=function(U,Y){if(!(U instanceof Y))throw new TypeError("Cannot call a class as a function")}},function(U,Y){function n(U,Y){for(var nt=0;nt<Y.length;nt++){var st=Y[nt];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(U,st.key,st)}}U.exports=function(U,Y,nt){return Y&&n(U.prototype,Y),nt&&n(U,nt),U}},function(U,Y,nt){"use strict";nt.r(Y),nt.d(Y,"getContext",(function(){return it})),nt.d(Y,"setContext",(function(){return ot})),nt.d(Y,"Clock",(function(){return Nt})),nt.d(Y,"Context",(function(){return H})),nt.d(Y,"BaseContext",(function(){return X})),nt.d(Y,"Delay",(function(){return Qt})),nt.d(Y,"Gain",(function(){return Mt})),nt.d(Y,"Offline",(function(){return Ht})),nt.d(Y,"OfflineContext",(function(){return et})),nt.d(Y,"Param",(function(){return St})),nt.d(Y,"ToneAudioBuffer",(function(){return tt})),nt.d(Y,"ToneAudioBuffers",(function(){return $t})),nt.d(Y,"ToneAudioNode",(function(){return Ct})),nt.d(Y,"connectSeries",(function(){return kt})),nt.d(Y,"connect",(function(){return At})),nt.d(Y,"disconnect",(function(){return Dt})),nt.d(Y,"FrequencyClass",(function(){return gt})),nt.d(Y,"Frequency",(function(){return bt})),nt.d(Y,"MidiClass",(function(){return Jt})),nt.d(Y,"Midi",(function(){return Kt})),nt.d(Y,"TimeClass",(function(){return _t})),nt.d(Y,"Time",(function(){return mt})),nt.d(Y,"TicksClass",(function(){return Lt})),nt.d(Y,"Ticks",(function(){return zt})),nt.d(Y,"TransportTimeClass",(function(){return xt})),nt.d(Y,"TransportTime",(function(){return wt})),nt.d(Y,"Emitter",(function(){return Z})),nt.d(Y,"IntervalTimeline",(function(){return Bt})),nt.d(Y,"StateTimeline",(function(){return Ot})),nt.d(Y,"Timeline",(function(){return W})),nt.d(Y,"isUndef",(function(){return p})),nt.d(Y,"isDefined",(function(){return f})),nt.d(Y,"isFunction",(function(){return _})),nt.d(Y,"isNumber",(function(){return m})),nt.d(Y,"isObject",(function(){return g})),nt.d(Y,"isBoolean",(function(){return v})),nt.d(Y,"isArray",(function(){return y})),nt.d(Y,"isString",(function(){return b})),nt.d(Y,"isNote",(function(){return x})),nt.d(Y,"dbToGain",(function(){return at})),nt.d(Y,"gainToDb",(function(){return ct})),nt.d(Y,"intervalToFrequencyRatio",(function(){return ut})),nt.d(Y,"ftom",(function(){return lt})),nt.d(Y,"mtof",(function(){return pt})),nt.d(Y,"optionsFromArguments",(function(){return q})),nt.d(Y,"defaultArg",(function(){return I})),nt.d(Y,"Unit",(function(){return Kn})),nt.d(Y,"debug",(function(){return st})),nt.d(Y,"Noise",(function(){return ie})),nt.d(Y,"UserMedia",(function(){return ae})),nt.d(Y,"Oscillator",(function(){return he})),nt.d(Y,"AMOscillator",(function(){return _e})),nt.d(Y,"FMOscillator",(function(){return me})),nt.d(Y,"PulseOscillator",(function(){return ge})),nt.d(Y,"FatOscillator",(function(){return ve})),nt.d(Y,"PWMOscillator",(function(){return ye})),nt.d(Y,"OmniOscillator",(function(){return xe})),nt.d(Y,"ToneOscillatorNode",(function(){return ue})),nt.d(Y,"LFO",(function(){return Se})),nt.d(Y,"ToneBufferSource",(function(){return se})),nt.d(Y,"Player",(function(){return Ae})),nt.d(Y,"Players",(function(){return De})),nt.d(Y,"GrainPlayer",(function(){return Me})),nt.d(Y,"Add",(function(){return we})),nt.d(Y,"Abs",(function(){return je})),nt.d(Y,"AudioToGain",(function(){return pe})),nt.d(Y,"GainToAudio",(function(){return Ee})),nt.d(Y,"GreaterThan",(function(){return Fe})),nt.d(Y,"GreaterThanZero",(function(){return Ie})),nt.d(Y,"Multiply",(function(){return fe})),nt.d(Y,"Negate",(function(){return Re})),nt.d(Y,"Pow",(function(){return Ve})),nt.d(Y,"Signal",(function(){return Rt})),nt.d(Y,"connectSignal",(function(){return qt})),nt.d(Y,"Scale",(function(){return Te})),nt.d(Y,"ScaleExp",(function(){return Ne})),nt.d(Y,"Subtract",(function(){return qe})),nt.d(Y,"SyncedSignal",(function(){return Pe})),nt.d(Y,"WaveShaper",(function(){return de})),nt.d(Y,"Zero",(function(){return Oe})),nt.d(Y,"AMSynth",(function(){return Qe})),nt.d(Y,"DuoSynth",(function(){return Je})),nt.d(Y,"FMSynth",(function(){return Ke})),nt.d(Y,"MetalSynth",(function(){return en})),nt.d(Y,"MembraneSynth",(function(){return nn})),nt.d(Y,"MonoSynth",(function(){return $e})),nt.d(Y,"NoiseSynth",(function(){return sn})),nt.d(Y,"PluckSynth",(function(){return dn})),nt.d(Y,"PolySynth",(function(){return pn})),nt.d(Y,"Sampler",(function(){return fn})),nt.d(Y,"Synth",(function(){return Ge})),nt.d(Y,"Loop",(function(){return mn})),nt.d(Y,"Part",(function(){return gn})),nt.d(Y,"Pattern",(function(){return kn})),nt.d(Y,"Sequence",(function(){return An})),nt.d(Y,"ToneEvent",(function(){return _n})),nt.d(Y,"AutoFilter",(function(){return En})),nt.d(Y,"AutoPanner",(function(){return qn})),nt.d(Y,"AutoWah",(function(){return Fn})),nt.d(Y,"BitCrusher",(function(){return Vn})),nt.d(Y,"Chebyshev",(function(){return Pn})),nt.d(Y,"Chorus",(function(){return Un})),nt.d(Y,"Distortion",(function(){return Gn})),nt.d(Y,"FeedbackDelay",(function(){return Qn})),nt.d(Y,"FrequencyShifter",(function(){return Xn})),nt.d(Y,"Freeverb",(function(){return Jn})),nt.d(Y,"JCReverb",(function(){return ns})),nt.d(Y,"PingPongDelay",(function(){return is})),nt.d(Y,"PitchShift",(function(){return os})),nt.d(Y,"Phaser",(function(){return rs})),nt.d(Y,"Reverb",(function(){return as})),nt.d(Y,"StereoWidener",(function(){return ls})),nt.d(Y,"Tremolo",(function(){return ds})),nt.d(Y,"Vibrato",(function(){return ps})),nt.d(Y,"Analyser",(function(){return fs})),nt.d(Y,"Meter",(function(){return ms})),nt.d(Y,"FFT",(function(){return gs})),nt.d(Y,"DCMeter",(function(){return vs})),nt.d(Y,"Waveform",(function(){return ys})),nt.d(Y,"Follower",(function(){return In})),nt.d(Y,"Channel",(function(){return ws})),nt.d(Y,"CrossFade",(function(){return Dn})),nt.d(Y,"Merge",(function(){return zn})),nt.d(Y,"MidSideMerge",(function(){return us})),nt.d(Y,"MidSideSplit",(function(){return cs})),nt.d(Y,"MultibandSplit",(function(){return Ts})),nt.d(Y,"Panner",(function(){return Rn})),nt.d(Y,"Panner3D",(function(){return Ss})),nt.d(Y,"PanVol",(function(){return xs})),nt.d(Y,"Recorder",(function(){return Cs})),nt.d(Y,"Solo",(function(){return bs})),nt.d(Y,"Split",(function(){return Ln})),nt.d(Y,"Volume",(function(){return Zt})),nt.d(Y,"Compressor",(function(){return ks})),nt.d(Y,"Gate",(function(){return As})),nt.d(Y,"Limiter",(function(){return Ds})),nt.d(Y,"MidSideCompressor",(function(){return Ms})),nt.d(Y,"MultibandCompressor",(function(){return js})),nt.d(Y,"AmplitudeEnvelope",(function(){return Ue})),nt.d(Y,"Envelope",(function(){return Le})),nt.d(Y,"FrequencyEnvelope",(function(){return He})),nt.d(Y,"EQ3",(function(){return Es})),nt.d(Y,"Filter",(function(){return Xe})),nt.d(Y,"OnePoleFilter",(function(){return hn})),nt.d(Y,"FeedbackCombFilter",(function(){return un})),nt.d(Y,"LowpassCombFilter",(function(){return ln})),nt.d(Y,"Convolver",(function(){return Rs})),nt.d(Y,"BiquadFilter",(function(){return Ze})),nt.d(Y,"version",(function(){return ht})),nt.d(Y,"start",(function(){return rt})),nt.d(Y,"supported",(function(){return vt.isSupported})),nt.d(Y,"now",(function(){return qs})),nt.d(Y,"immediate",(function(){return Is})),nt.d(Y,"Transport",(function(){return Zs})),nt.d(Y,"getTransport",(function(){return Vs})),nt.d(Y,"Destination",(function(){return Hs})),nt.d(Y,"Master",(function(){return Js})),nt.d(Y,"getDestination",(function(){return Ls})),nt.d(Y,"Listener",(function(){return Ks})),nt.d(Y,"getListener",(function(){return Bs})),nt.d(Y,"Draw",(function(){return ti})),nt.d(Y,"getDraw",(function(){return Us})),nt.d(Y,"context",(function(){return ei})),nt.d(Y,"loaded",(function(){return Ys})),nt.d(Y,"Buffer",(function(){return ni})),nt.d(Y,"Buffers",(function(){return si})),nt.d(Y,"BufferSource",(function(){return ii}));var st={};nt.r(st),nt.d(st,"assert",(function(){return r})),nt.d(st,"assertRange",(function(){return a})),nt.d(st,"assertContextRunning",(function(){return c})),nt.d(st,"setLogger",(function(){return h})),nt.d(st,"log",(function(){return l})),nt.d(st,"warn",(function(){return d}));const ht="14.7.40";var vt=nt(13);function r(U,Y){if(!U)throw new Error(Y)}function a(U,Y,nt=1/0){if(!(Y<=U&&U<=nt))throw new RangeError(`Value must be within [${Y}, ${nt}], got: ${U}`)}function c(U){U.isOffline||"running"===U.state||d('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let yt=console;function h(U){yt=U}function l(...U){yt.log(...U)}function d(...U){yt.warn(...U)}function p(U){return void 0===U}function f(U){return!p(U)}function _(U){return"function"==typeof U}function m(U){return"number"==typeof U}function g(U){return"[object Object]"===Object.prototype.toString.call(U)&&U.constructor===Object}function v(U){return"boolean"==typeof U}function y(U){return Array.isArray(U)}function b(U){return"string"==typeof U}function x(U){return b(U)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(U)}const ee="object"==typeof self?self:null,oe=ee&&(ee.hasOwnProperty("AudioContext")||ee.hasOwnProperty("webkitAudioContext"));function O(U,Y,nt,st){var ht,vt=arguments.length,yt=vt<3?Y:null===st?st=Object.getOwnPropertyDescriptor(Y,nt):st;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)yt=Reflect.decorate(U,Y,nt,st);else for(var ee=U.length-1;ee>=0;ee--)(ht=U[ee])&&(yt=(vt<3?ht(yt):vt>3?ht(Y,nt,yt):ht(Y,nt))||yt);return vt>3&&yt&&Object.defineProperty(Y,nt,yt),yt}function S(U,Y,nt,st){return new(nt||(nt=Promise))((function(ht,vt){function r(U){try{c(st.next(U))}catch(U){vt(U)}}function a(U){try{c(st.throw(U))}catch(U){vt(U)}}function c(U){U.done?ht(U.value):new nt((function(Y){Y(U.value)})).then(r,a)}c((st=st.apply(U,Y||[])).next())}))}class C{constructor(U,Y,nt){this._callback=U,this._type=Y,this._updateInterval=nt,this._createClock()}_createWorker(){const U=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),Y=URL.createObjectURL(U),nt=new Worker(Y);nt.onmessage=this._callback.bind(this),this._worker=nt}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(U){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(U){this._updateInterval=Math.max(U,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*U,1))}get type(){return this._type}set type(U){this._disposeClock(),this._type=U,this._createClock()}dispose(){this._disposeClock()}}function k(U){return Object(vt.isAnyAudioParam)(U)}function A(U){return Object(vt.isAnyAudioNode)(U)}function D(U){return Object(vt.isAnyOfflineAudioContext)(U)}function M(U){return Object(vt.isAnyAudioContext)(U)}function j(U){return U instanceof AudioBuffer}function E(U,Y){return"value"===U||k(Y)||A(Y)||j(Y)}function R(U,...Y){if(!Y.length)return U;const nt=Y.shift();if(g(U)&&g(nt))for(const Y in nt)E(Y,nt[Y])?U[Y]=nt[Y]:g(nt[Y])?(U[Y]||Object.assign(U,{[Y]:{}}),R(U[Y],nt[Y])):Object.assign(U,{[Y]:nt[Y]});return R(U,...Y)}function q(U,Y,nt=[],st){const ht={},vt=Array.from(Y);if(g(vt[0])&&st&&!Reflect.has(vt[0],st)&&(Object.keys(vt[0]).some((Y=>Reflect.has(U,Y)))||(R(ht,{[st]:vt[0]}),nt.splice(nt.indexOf(st),1),vt.shift())),1===vt.length&&g(vt[0]))R(ht,vt[0]);else for(let U=0;U<nt.length;U++)f(vt[U])&&(ht[nt[U]]=vt[U]);return R(U,ht)}function I(U,Y){return p(U)?Y:U}function F(U,Y){return Y.forEach((Y=>{Reflect.has(U,Y)&&delete U[Y]})),U}
/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class V{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...U){(this.debug||ee&&this.toString()===ee.TONE_DEBUG_CLASS)&&l(this,...U)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}function N(U,Y){return U>Y+1e-6}function P(U,Y){return N(U,Y)||z(U,Y)}function L(U,Y){return U+1e-6<Y}function z(U,Y){return Math.abs(U-Y)<1e-6}function B(U,Y,nt){return Math.max(Math.min(U,nt),Y)}V.version=ht;class W extends V{constructor(){super(),this.name="Timeline",this._timeline=[];const U=q(W.getDefaults(),arguments,["memory"]);this.memory=U.memory,this.increasing=U.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(U){if(r(Reflect.has(U,"time"),"Timeline: events must have a time attribute"),U.time=U.time.valueOf(),this.increasing&&this.length){const Y=this._timeline[this.length-1];r(P(U.time,Y.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(U)}else{const Y=this._search(U.time);this._timeline.splice(Y+1,0,U)}if(this.length>this.memory){const U=this.length-this.memory;this._timeline.splice(0,U)}return this}remove(U){const Y=this._timeline.indexOf(U);return-1!==Y&&this._timeline.splice(Y,1),this}get(U,Y="time"){const nt=this._search(U,Y);return-1!==nt?this._timeline[nt]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(U,Y="time"){const nt=this._search(U,Y);return nt+1<this._timeline.length?this._timeline[nt+1]:null}getBefore(U){const Y=this._timeline.length;if(Y>0&&this._timeline[Y-1].time<U)return this._timeline[Y-1];const nt=this._search(U);return nt-1>=0?this._timeline[nt-1]:null}cancel(U){if(this._timeline.length>1){let Y=this._search(U);if(Y>=0)if(z(this._timeline[Y].time,U)){for(let nt=Y;nt>=0&&z(this._timeline[nt].time,U);nt--)Y=nt;this._timeline=this._timeline.slice(0,Y)}else this._timeline=this._timeline.slice(0,Y+1);else this._timeline=[]}else 1===this._timeline.length&&P(this._timeline[0].time,U)&&(this._timeline=[]);return this}cancelBefore(U){const Y=this._search(U);return Y>=0&&(this._timeline=this._timeline.slice(Y+1)),this}previousEvent(U){const Y=this._timeline.indexOf(U);return Y>0?this._timeline[Y-1]:null}_search(U,Y="time"){if(0===this._timeline.length)return-1;let nt=0;const st=this._timeline.length;let ht=st;if(st>0&&this._timeline[st-1][Y]<=U)return st-1;for(;nt<ht;){let st=Math.floor(nt+(ht-nt)/2);const vt=this._timeline[st],yt=this._timeline[st+1];if(z(vt[Y],U)){for(let nt=st;nt<this._timeline.length&&z(this._timeline[nt][Y],U);nt++)st=nt;return st}if(L(vt[Y],U)&&N(yt[Y],U))return st;N(vt[Y],U)?ht=st:nt=st+1}return-1}_iterate(U,Y=0,nt=this._timeline.length-1){this._timeline.slice(Y,nt+1).forEach(U)}forEach(U){return this._iterate(U),this}forEachBefore(U,Y){const nt=this._search(U);return-1!==nt&&this._iterate(Y,0,nt),this}forEachAfter(U,Y){const nt=this._search(U);return this._iterate(Y,nt+1),this}forEachBetween(U,Y,nt){let st=this._search(U),ht=this._search(Y);return-1!==st&&-1!==ht?(this._timeline[st].time!==U&&(st+=1),this._timeline[ht].time===Y&&(ht-=1),this._iterate(nt,st,ht)):-1===st&&this._iterate(nt,0,ht),this}forEachFrom(U,Y){let nt=this._search(U);for(;nt>=0&&this._timeline[nt].time>=U;)nt--;return this._iterate(Y,nt+1),this}forEachAtTime(U,Y){const nt=this._search(U);if(-1!==nt&&z(this._timeline[nt].time,U)){let st=nt;for(let Y=nt;Y>=0&&z(this._timeline[Y].time,U);Y--)st=Y;this._iterate((U=>{Y(U)}),st,nt)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const re=[];function G(U){re.push(U)}const be=[];function Q(U){be.push(U)}class Z extends V{constructor(){super(...arguments),this.name="Emitter"}on(U,Y){return U.split(/\W+/).forEach((U=>{p(this._events)&&(this._events={}),this._events.hasOwnProperty(U)||(this._events[U]=[]),this._events[U].push(Y)})),this}once(U,Y){const n=(...nt)=>{Y(...nt),this.off(U,n)};return this.on(U,n),this}off(U,Y){return U.split(/\W+/).forEach((nt=>{if(p(this._events)&&(this._events={}),this._events.hasOwnProperty(U))if(p(Y))this._events[U]=[];else{const nt=this._events[U];for(let U=0;U<nt.length;U++)nt[U]===Y&&nt.splice(U,1)}})),this}emit(U,...Y){if(this._events&&this._events.hasOwnProperty(U)){const nt=this._events[U].slice(0);for(let U=0,st=nt.length;U<st;U++)nt[U].apply(this,Y)}return this}static mixin(U){["on","once","off","emit"].forEach((Y=>{const nt=Object.getOwnPropertyDescriptor(Z.prototype,Y);Object.defineProperty(U.prototype,Y,nt)}))}dispose(){return super.dispose(),this._events=void 0,this}}class X extends Z{constructor(){super(...arguments),this.isOffline=!1}}class H extends X{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new W,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const U=q(H.getDefaults(),arguments,["context"]);U.context?this._context=U.context:this._context=function(U){return new vt.AudioContext(U)}({latencyHint:U.latencyHint}),this._ticker=new C(this.emit.bind(this,"tick"),U.clockSource,U.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(U.latencyHint),this.lookAhead=U.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var U;return this._initialized||(U=this,re.forEach((Y=>Y(U))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(U,Y,nt){return this._context.createBuffer(U,Y,nt)}createChannelMerger(U){return this._context.createChannelMerger(U)}createChannelSplitter(U){return this._context.createChannelSplitter(U)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(U){return this._context.createDelay(U)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(U,Y){return this._context.createIIRFilter(U,Y)}createPanner(){return this._context.createPanner()}createPeriodicWave(U,Y,nt){return this._context.createPeriodicWave(U,Y,nt)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(U){return r(M(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(U)}createMediaStreamDestination(){return r(M(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(U){return this._context.decodeAudioData(U)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(U){r(!this._initialized,"The listener cannot be set after initialization."),this._listener=U}get transport(){return this.initialize(),this._transport}set transport(U){r(!this._initialized,"The transport cannot be set after initialization."),this._transport=U}get draw(){return this.initialize(),this._draw}set draw(U){r(!this._initialized,"Draw cannot be set after initialization."),this._draw=U}get destination(){return this.initialize(),this._destination}set destination(U){r(!this._initialized,"The destination cannot be set after initialization."),this._destination=U}createAudioWorkletNode(U,Y){return function(U,Y,nt){return r(f(vt.AudioWorkletNode),"This node only works in a secure context (https or localhost)"),new vt.AudioWorkletNode(U,Y,nt)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */(this.rawContext,U,Y)}addAudioWorkletModule(U,Y){return S(this,void 0,void 0,(function*(){r(f(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(Y)||this._workletModules.set(Y,this.rawContext.audioWorklet.addModule(U)),yield this._workletModules.get(Y)}))}workletsAreReady(){return S(this,void 0,void 0,(function*(){const U=[];this._workletModules.forEach((Y=>U.push(Y))),yield Promise.all(U)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(U){this._ticker.updateInterval=U}get clockSource(){return this._ticker.type}set clockSource(U){this._ticker.type=U}get latencyHint(){return this._latencyHint}_setLatencyHint(U){let Y=0;if(this._latencyHint=U,b(U))switch(U){case"interactive":Y=.1;break;case"playback":Y=.5;break;case"balanced":Y=.25}this.lookAhead=Y,this.updateInterval=Y/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return"suspended"===this._context.state&&M(this._context)?this._context.resume():Promise.resolve()}close(){return S(this,void 0,void 0,(function*(){var U;M(this._context)&&(yield this._context.close()),this._initialized&&(U=this,be.forEach((Y=>Y(U))))}))}getConstant(U){if(this._constants.has(U))return this._constants.get(U);{const Y=this._context.createBuffer(1,128,this._context.sampleRate),nt=Y.getChannelData(0);for(let Y=0;Y<nt.length;Y++)nt[Y]=U;const st=this._context.createBufferSource();return st.channelCount=1,st.channelCountMode="explicit",st.buffer=Y,st.loop=!0,st.start(0),this._constants.set(U,st),st}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((U=>this._constants[U].disconnect())),this}_timeoutLoop(){const U=this.now();let Y=this._timeouts.peek();for(;this._timeouts.length&&Y&&Y.time<=U;)Y.callback(),this._timeouts.shift(),Y=this._timeouts.peek()}setTimeout(U,Y){this._timeoutIds++;const nt=this.now();return this._timeouts.add({callback:U,id:this._timeoutIds,time:nt+Y}),this._timeoutIds}clearTimeout(U){return this._timeouts.forEach((Y=>{Y.id===U&&this._timeouts.remove(Y)})),this}clearInterval(U){return this.clearTimeout(U)}setInterval(U,Y){const nt=++this._timeoutIds,s=()=>{const st=this.now();this._timeouts.add({callback:()=>{U(),s()},id:nt,time:st+Y})};return s(),nt}}function $(U,Y){y(Y)?Y.forEach((Y=>$(U,Y))):Object.defineProperty(U,Y,{enumerable:!0,writable:!1})}function J(U,Y){y(Y)?Y.forEach((Y=>J(U,Y))):Object.defineProperty(U,Y,{writable:!0})}const K=()=>{};class tt extends V{constructor(){super(),this.name="ToneAudioBuffer",this.onload=K;const U=q(tt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=U.reverse,this.onload=U.onload,U.url&&j(U.url)||U.url instanceof tt?this.set(U.url):b(U.url)&&this.load(U.url).catch(U.onerror)}static getDefaults(){return{onerror:K,onload:K,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:it().sampleRate}set(U){return U instanceof tt?U.loaded?this._buffer=U.get():U.onload=()=>{this.set(U),this.onload(this)}:this._buffer=U,this._reversed&&this._reverse(),this}get(){return this._buffer}load(U){return S(this,void 0,void 0,(function*(){const Y=tt.load(U).then((U=>{this.set(U),this.onload(this)}));tt.downloads.push(Y);try{yield Y}finally{const U=tt.downloads.indexOf(Y);tt.downloads.splice(U,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(U){const Y=y(U)&&U[0].length>0,nt=Y?U.length:1,st=Y?U[0].length:U.length,ht=it(),vt=ht.createBuffer(nt,st,ht.sampleRate),yt=Y||1!==nt?U:[U];for(let U=0;U<nt;U++)vt.copyToChannel(yt[U],U);return this._buffer=vt,this}toMono(U){if(m(U))this.fromArray(this.toArray(U));else{let U=new Float32Array(this.length);const Y=this.numberOfChannels;for(let nt=0;nt<Y;nt++){const Y=this.toArray(nt);for(let nt=0;nt<Y.length;nt++)U[nt]+=Y[nt]}U=U.map((U=>U/Y)),this.fromArray(U)}return this}toArray(U){if(m(U))return this.getChannelData(U);if(1===this.numberOfChannels)return this.toArray(0);{const U=[];for(let Y=0;Y<this.numberOfChannels;Y++)U[Y]=this.getChannelData(Y);return U}}getChannelData(U){return this._buffer?this._buffer.getChannelData(U):new Float32Array(0)}slice(U,Y=this.duration){const nt=Math.floor(U*this.sampleRate),st=Math.floor(Y*this.sampleRate);r(nt<st,"The start time must be less than the end time");const ht=st-nt,vt=it().createBuffer(this.numberOfChannels,ht,this.sampleRate);for(let U=0;U<this.numberOfChannels;U++)vt.copyToChannel(this.getChannelData(U).subarray(nt,st),U);return new tt(vt)}_reverse(){if(this.loaded)for(let U=0;U<this.numberOfChannels;U++)this.getChannelData(U).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(U){this._reversed!==U&&(this._reversed=U,this._reverse())}static fromArray(U){return(new tt).fromArray(U)}static fromUrl(U){return S(this,void 0,void 0,(function*(){const Y=new tt;return yield Y.load(U)}))}static load(U){return S(this,void 0,void 0,(function*(){const Y=U.match(/\[(.+\|?)+\]$/);if(Y){const nt=Y[1].split("|");let st=nt[0];for(const U of nt)if(tt.supportsType(U)){st=U;break}U=U.replace(Y[0],st)}const nt=""===tt.baseUrl||tt.baseUrl.endsWith("/")?tt.baseUrl:tt.baseUrl+"/",st=yield fetch(nt+U);if(!st.ok)throw new Error("could not load url: "+U);const ht=yield st.arrayBuffer();return yield it().decodeAudioData(ht)}))}static supportsType(U){const Y=U.split("."),nt=Y[Y.length-1];return""!==document.createElement("audio").canPlayType("audio/"+nt)}static loaded(){return S(this,void 0,void 0,(function*(){for(yield Promise.resolve();tt.downloads.length;)yield tt.downloads[0]}))}}tt.baseUrl="",tt.downloads=[];class et extends H{constructor(){var U,Y,nt;super({clockSource:"offline",context:D(arguments[0])?arguments[0]:(U=arguments[0],Y=arguments[1]*arguments[2],nt=arguments[2],new vt.OfflineAudioContext(U,Y,nt)),lookAhead:0,updateInterval:D(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=D(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(U){return S(this,void 0,void 0,(function*(){let Y=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,Y++;const nt=Math.floor(this.sampleRate/128);U&&Y%nt==0&&(yield new Promise((U=>setTimeout(U,1))))}}))}render(U=!0){return S(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(U);const Y=yield this._context.startRendering();return new tt(Y)}))}close(){return Promise.resolve()}}const ze=new class extends X{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(U,Y,nt){return{}}createChannelMerger(U){return{}}createChannelSplitter(U){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(U){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(U,Y){return{}}createPanner(){return{}}createPeriodicWave(U,Y,nt){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(U){return{}}createMediaStreamDestination(){return{}}decodeAudioData(U){return Promise.resolve({})}createAudioWorkletNode(U,Y){return{}}get rawContext(){return{}}addAudioWorkletModule(U,Y){return S(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(U,Y){return 0}clearTimeout(U){return this}setInterval(U,Y){return 0}clearInterval(U){return this}getConstant(U){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(U){}get destination(){return{}}set destination(U){}now(){return 0}immediate(){return 0}};let tn=ze;function it(){return tn===ze&&oe&&ot(new H),tn}function ot(U){tn=M(U)?new H(U):D(U)?new et(U):U}function rt(){return tn.resume()}if(ee&&!ee.TONE_SILENCE_LOGGING){let U="v";"dev"===ht&&(U="");const Y=` * Tone.js ${U}${ht} * `;console.log("%c"+Y,"background: #000; color: #fff")}function at(U){return Math.pow(10,U/20)}function ct(U){return Math.log(U)/Math.LN10*20}function ut(U){return Math.pow(2,U/12)}let on=440;function lt(U){return Math.round(dt(U))}function dt(U){return 69+12*Math.log2(U/on)}function pt(U){return on*Math.pow(2,(U-69)/12)}class ft extends V{constructor(U,Y,nt){super(),this.defaultUnits="s",this._val=Y,this._units=nt,this.context=U,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:U=>this._frequencyToUnits(parseFloat(U)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:U=>this._ticksToUnits(parseInt(U,10)),regexp:/^(\d+)i$/i},m:{method:U=>this._beatsToUnits(parseInt(U,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(U,Y)=>{const nt=parseInt(U,10),st="."===Y?1.5:1;return 1===nt?this._beatsToUnits(this._getTimeSignature())*st:this._beatsToUnits(4/nt)*st},regexp:/^(\d+)n(\.?)$/i},number:{method:U=>this._expressions[this.defaultUnits].method.call(this,U),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:U=>this._secondsToUnits(parseFloat(U)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:U=>parseInt(U,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:U=>{const Y=parseInt(U,10);return this._beatsToUnits(8/(3*Math.floor(Y)))},regexp:/^(\d+)t$/i},tr:{method:(U,Y,nt)=>{let st=0;return U&&"0"!==U&&(st+=this._beatsToUnits(this._getTimeSignature()*parseFloat(U))),Y&&"0"!==Y&&(st+=this._beatsToUnits(parseFloat(Y))),nt&&"0"!==nt&&(st+=this._beatsToUnits(parseFloat(nt)/4)),st},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ft&&this.fromType(this._val),p(this._val))return this._noArg();if(b(this._val)&&p(this._units)){for(const U in this._expressions)if(this._expressions[U].regexp.test(this._val.trim())){this._units=U;break}}else if(g(this._val)){let U=0;for(const Y in this._val)if(f(this._val[Y])){const nt=this._val[Y];U+=new this.constructor(this.context,Y).valueOf()*nt}return U}if(f(this._units)){const U=this._expressions[this._units],Y=this._val.toString().trim().match(U.regexp);return Y?U.method.apply(this,Y.slice(1)):U.method.call(this,this._val)}return b(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(U){return 1/U}_beatsToUnits(U){return 60/this._getBpm()*U}_secondsToUnits(U){return U}_ticksToUnits(U){return U*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(U){switch(this._units=void 0,this.defaultUnits){case"s":this._val=U.toSeconds();break;case"i":this._val=U.toTicks();break;case"hz":this._val=U.toFrequency();break;case"midi":this._val=U.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class _t extends ft{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:U=>this._now()+new this.constructor(this.context,U).valueOf(),regexp:/^\+(.+)/},quantize:{method:U=>{const Y=new _t(this.context,U).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(Y))},regexp:/^@(.+)/}})}quantize(U,Y=1){const nt=new this.constructor(this.context,U).valueOf(),st=this.valueOf();return st+(Math.round(st/nt)*nt-st)*Y}toNotation(){const U=this.toSeconds(),Y=["1m"];for(let U=1;U<9;U++){const nt=Math.pow(2,U);Y.push(nt+"n."),Y.push(nt+"n"),Y.push(nt+"t")}Y.push("0");let nt=Y[0],st=new _t(this.context,Y[0]).toSeconds();return Y.forEach((Y=>{const ht=new _t(this.context,Y).toSeconds();Math.abs(ht-U)<Math.abs(st-U)&&(nt=Y,st=ht)})),nt}toBarsBeatsSixteenths(){const U=this._beatsToUnits(1);let Y=this.valueOf()/U;Y=parseFloat(Y.toFixed(4));const nt=Math.floor(Y/this._getTimeSignature());let st=Y%1*4;Y=Math.floor(Y)%this._getTimeSignature();const ht=st.toString();return ht.length>3&&(st=parseFloat(parseFloat(ht).toFixed(3))),[nt,Y,st].join(":")}toTicks(){const U=this._beatsToUnits(1),Y=this.valueOf()/U;return Math.round(Y*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return lt(this.toFrequency())}_now(){return this.context.now()}}function mt(U,Y){return new _t(it(),U,Y)}class gt extends _t{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return on}static set A4(U){!function(U){on=U}(U)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(U){return"midi"===this.defaultUnits?U:gt.mtof(U)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(U,Y){const nt=$n[U.toLowerCase()]+12*(parseInt(Y,10)+1);return"midi"===this.defaultUnits?nt:gt.mtof(nt)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(U,Y,nt){let st=1;return U&&"0"!==U&&(st*=this._beatsToUnits(this._getTimeSignature()*parseFloat(U))),Y&&"0"!==Y&&(st*=this._beatsToUnits(parseFloat(Y))),nt&&"0"!==nt&&(st*=this._beatsToUnits(parseFloat(nt)/4)),st}}})}transpose(U){return new gt(this.context,this.valueOf()*ut(U))}harmonize(U){return U.map((U=>this.transpose(U)))}toMidi(){return lt(this.valueOf())}toNote(){const U=this.toFrequency(),Y=Math.log2(U/gt.A4);let nt=Math.round(12*Y)+57;const st=Math.floor(nt/12);return st<0&&(nt+=-12*st),Hn[nt%12]+st.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const U=this._beatsToUnits(1),Y=this.valueOf()/U;return Math.floor(Y*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(U){return U}_ticksToUnits(U){return 1/(60*U/(this._getBpm()*this._getPPQ()))}_beatsToUnits(U){return 1/super._beatsToUnits(U)}_secondsToUnits(U){return 1/U}static mtof(U){return pt(U)}static ftom(U){return lt(U)}}const $n={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Hn=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function bt(U,Y){return new gt(it(),U,Y)}class xt extends _t{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function wt(U,Y){return new xt(it(),U,Y)}class Tt extends V{constructor(){super();const U=q(Tt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=U.context}static getDefaults(){return{context:it()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(U){return new _t(this.context,U).toSeconds()}toFrequency(U){return new gt(this.context,U).toFrequency()}toTicks(U){return new xt(this.context,U).toTicks()}_getPartialProperties(U){const Y=this.get();return Object.keys(Y).forEach((nt=>{p(U[nt])&&delete Y[nt]})),Y}get(){const U=this.constructor.getDefaults();return Object.keys(U).forEach((Y=>{if(Reflect.has(this,Y)){const nt=this[Y];f(nt)&&f(nt.value)&&f(nt.setValueAtTime)?U[Y]=nt.value:nt instanceof Tt?U[Y]=nt._getPartialProperties(U[Y]):y(nt)||m(nt)||b(nt)||v(nt)?U[Y]=nt:delete U[Y]}})),U}set(U){return Object.keys(U).forEach((Y=>{Reflect.has(this,Y)&&f(this[Y])&&(this[Y]&&f(this[Y].value)&&f(this[Y].setValueAtTime)?this[Y].value!==U[Y]&&(this[Y].value=U[Y]):this[Y]instanceof Tt?this[Y].set(U[Y]):this[Y]=U[Y])})),this}}class Ot extends W{constructor(U="stopped"){super(),this.name="StateTimeline",this._initial=U,this.setStateAtTime(this._initial,0)}getValueAtTime(U){const Y=this.get(U);return null!==Y?Y.state:this._initial}setStateAtTime(U,Y,nt){return a(Y,0),this.add(Object.assign({},nt,{state:U,time:Y})),this}getLastState(U,Y){for(let nt=this._search(Y);nt>=0;nt--){const Y=this._timeline[nt];if(Y.state===U)return Y}}getNextState(U,Y){const nt=this._search(Y);if(-1!==nt)for(let Y=nt;Y<this._timeline.length;Y++){const nt=this._timeline[Y];if(nt.state===U)return nt}}}class St extends Tt{constructor(){super(q(St.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const U=q(St.getDefaults(),arguments,["param","units","convert"]);for(r(f(U.param)&&(k(U.param)||U.param instanceof St),"param must be an AudioParam");!k(U.param);)U.param=U.param._param;this._swappable=!!f(U.swappable)&&U.swappable,this._swappable?(this.input=this.context.createGain(),this._param=U.param,this.input.connect(this._param)):this._param=this.input=U.param,this._events=new W(1e3),this._initialValue=this._param.defaultValue,this.units=U.units,this.convert=U.convert,this._minValue=U.minValue,this._maxValue=U.maxValue,f(U.value)&&U.value!==this._toType(this._initialValue)&&this.setValueAtTime(U.value,0)}static getDefaults(){return Object.assign(Tt.getDefaults(),{convert:!0,units:"number"})}get value(){const U=this.now();return this.getValueAtTime(U)}set value(U){this.cancelScheduledValues(this.now()),this.setValueAtTime(U,this.now())}get minValue(){return f(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return f(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(U,Y){return this.units===Y}_assertRange(U){return f(this.maxValue)&&f(this.minValue)&&a(U,this._fromType(this.minValue),this._fromType(this.maxValue)),U}_fromType(U){return this.convert&&!this.overridden?this._is(U,"time")?this.toSeconds(U):this._is(U,"decibels")?at(U):this._is(U,"frequency")?this.toFrequency(U):U:this.overridden?0:U}_toType(U){return this.convert&&"decibels"===this.units?ct(U):U}setValueAtTime(U,Y){const nt=this.toSeconds(Y),st=this._fromType(U);return r(isFinite(st)&&isFinite(nt),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(U)}, ${JSON.stringify(Y)}`),this._assertRange(st),this.log(this.units,"setValueAtTime",U,nt),this._events.add({time:nt,type:"setValueAtTime",value:st}),this._param.setValueAtTime(st,nt),this}getValueAtTime(U){const Y=Math.max(this.toSeconds(U),0),nt=this._events.getAfter(Y),st=this._events.get(Y);let ht=this._initialValue;if(null===st)ht=this._initialValue;else if("setTargetAtTime"!==st.type||null!==nt&&"setValueAtTime"!==nt.type)if(null===nt)ht=st.value;else if("linearRampToValueAtTime"===nt.type||"exponentialRampToValueAtTime"===nt.type){let U=st.value;if("setTargetAtTime"===st.type){const Y=this._events.getBefore(st.time);U=null===Y?this._initialValue:Y.value}ht="linearRampToValueAtTime"===nt.type?this._linearInterpolate(st.time,U,nt.time,nt.value,Y):this._exponentialInterpolate(st.time,U,nt.time,nt.value,Y)}else ht=st.value;else{const U=this._events.getBefore(st.time);let nt;nt=null===U?this._initialValue:U.value,"setTargetAtTime"===st.type&&(ht=this._exponentialApproach(st.time,nt,st.value,st.constant,Y))}return this._toType(ht)}setRampPoint(U){U=this.toSeconds(U);let Y=this.getValueAtTime(U);return this.cancelAndHoldAtTime(U),0===this._fromType(Y)&&(Y=this._toType(this._minOutput)),this.setValueAtTime(Y,U),this}linearRampToValueAtTime(U,Y){const nt=this._fromType(U),st=this.toSeconds(Y);return r(isFinite(nt)&&isFinite(st),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(U)}, ${JSON.stringify(Y)}`),this._assertRange(nt),this._events.add({time:st,type:"linearRampToValueAtTime",value:nt}),this.log(this.units,"linearRampToValueAtTime",U,st),this._param.linearRampToValueAtTime(nt,st),this}exponentialRampToValueAtTime(U,Y){let nt=this._fromType(U);nt=Math.max(this._minOutput,nt),this._assertRange(nt);const st=this.toSeconds(Y);return r(isFinite(nt)&&isFinite(st),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(U)}, ${JSON.stringify(Y)}`),this._events.add({time:st,type:"exponentialRampToValueAtTime",value:nt}),this.log(this.units,"exponentialRampToValueAtTime",U,st),this._param.exponentialRampToValueAtTime(nt,st),this}exponentialRampTo(U,Y,nt){return nt=this.toSeconds(nt),this.setRampPoint(nt),this.exponentialRampToValueAtTime(U,nt+this.toSeconds(Y)),this}linearRampTo(U,Y,nt){return nt=this.toSeconds(nt),this.setRampPoint(nt),this.linearRampToValueAtTime(U,nt+this.toSeconds(Y)),this}targetRampTo(U,Y,nt){return nt=this.toSeconds(nt),this.setRampPoint(nt),this.exponentialApproachValueAtTime(U,nt,Y),this}exponentialApproachValueAtTime(U,Y,nt){Y=this.toSeconds(Y),nt=this.toSeconds(nt);const st=Math.log(nt+1)/Math.log(200);return this.setTargetAtTime(U,Y,st),this.cancelAndHoldAtTime(Y+.9*nt),this.linearRampToValueAtTime(U,Y+nt),this}setTargetAtTime(U,Y,nt){const st=this._fromType(U);r(isFinite(nt)&&nt>0,"timeConstant must be a number greater than 0");const ht=this.toSeconds(Y);return this._assertRange(st),r(isFinite(st)&&isFinite(ht),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(U)}, ${JSON.stringify(Y)}`),this._events.add({constant:nt,time:ht,type:"setTargetAtTime",value:st}),this.log(this.units,"setTargetAtTime",U,ht,nt),this._param.setTargetAtTime(st,ht,nt),this}setValueCurveAtTime(U,Y,nt,st=1){nt=this.toSeconds(nt),Y=this.toSeconds(Y);const ht=this._fromType(U[0])*st;this.setValueAtTime(this._toType(ht),Y);const vt=nt/(U.length-1);for(let nt=1;nt<U.length;nt++){const ht=this._fromType(U[nt])*st;this.linearRampToValueAtTime(this._toType(ht),Y+nt*vt)}return this}cancelScheduledValues(U){const Y=this.toSeconds(U);return r(isFinite(Y),"Invalid argument to cancelScheduledValues: "+JSON.stringify(U)),this._events.cancel(Y),this._param.cancelScheduledValues(Y),this.log(this.units,"cancelScheduledValues",Y),this}cancelAndHoldAtTime(U){const Y=this.toSeconds(U),nt=this._fromType(this.getValueAtTime(Y));r(isFinite(Y),"Invalid argument to cancelAndHoldAtTime: "+JSON.stringify(U)),this.log(this.units,"cancelAndHoldAtTime",Y,"value="+nt);const st=this._events.get(Y),ht=this._events.getAfter(Y);return st&&z(st.time,Y)?ht?(this._param.cancelScheduledValues(ht.time),this._events.cancel(ht.time)):(this._param.cancelAndHoldAtTime(Y),this._events.cancel(Y+this.sampleTime)):ht&&(this._param.cancelScheduledValues(ht.time),this._events.cancel(ht.time),"linearRampToValueAtTime"===ht.type?this.linearRampToValueAtTime(this._toType(nt),Y):"exponentialRampToValueAtTime"===ht.type&&this.exponentialRampToValueAtTime(this._toType(nt),Y)),this._events.add({time:Y,type:"setValueAtTime",value:nt}),this._param.setValueAtTime(nt,Y),this}rampTo(U,Y=.1,nt){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(U,Y,nt):this.linearRampTo(U,Y,nt),this}apply(U){const Y=this.context.currentTime;U.setValueAtTime(this.getValueAtTime(Y),Y);const nt=this._events.get(Y);if(nt&&"setTargetAtTime"===nt.type){const st=this._events.getAfter(nt.time),ht=st?st.time:Y+2,vt=(ht-Y)/10;for(let nt=Y;nt<ht;nt+=vt)U.linearRampToValueAtTime(this.getValueAtTime(nt),nt)}return this._events.forEachAfter(this.context.currentTime,(Y=>{"cancelScheduledValues"===Y.type?U.cancelScheduledValues(Y.time):"setTargetAtTime"===Y.type?U.setTargetAtTime(Y.value,Y.time,Y.constant):U[Y.type](Y.value,Y.time)})),this}setParam(U){r(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const Y=this.input;return Y.disconnect(this._param),this.apply(U),this._param=U,Y.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(U,Y,nt,st,ht){return nt+(Y-nt)*Math.exp(-(ht-U)/st)}_linearInterpolate(U,Y,nt,st,ht){return Y+(ht-U)/(nt-U)*(st-Y)}_exponentialInterpolate(U,Y,nt,st,ht){return Y*Math.pow(st/Y,(ht-U)/(nt-U))}}class Ct extends Tt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return f(this.input)?k(this.input)||this.input instanceof St?1:this.input.numberOfInputs:0}get numberOfOutputs(){return f(this.output)?this.output.numberOfOutputs:0}_isAudioNode(U){return f(U)&&(U instanceof Ct||A(U))}_getInternalNodes(){const U=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&U.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&U.push(this.output),U}_setChannelProperties(U){this._getInternalNodes().forEach((Y=>{Y.channelCount=U.channelCount,Y.channelCountMode=U.channelCountMode,Y.channelInterpretation=U.channelInterpretation}))}_getChannelProperties(){const U=this._getInternalNodes();r(U.length>0,"ToneAudioNode does not have any internal nodes");const Y=U[0];return{channelCount:Y.channelCount,channelCountMode:Y.channelCountMode,channelInterpretation:Y.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(U){const Y=this._getChannelProperties();this._setChannelProperties(Object.assign(Y,{channelCount:U}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(U){const Y=this._getChannelProperties();this._setChannelProperties(Object.assign(Y,{channelCountMode:U}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(U){const Y=this._getChannelProperties();this._setChannelProperties(Object.assign(Y,{channelInterpretation:U}))}connect(U,Y=0,nt=0){return At(this,U,Y,nt),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return d("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(U,Y=0,nt=0){return Dt(this,U,Y,nt),this}chain(...U){return kt(this,...U),this}fan(...U){return U.forEach((U=>this.connect(U))),this}dispose(){return super.dispose(),f(this.input)&&(this.input instanceof Ct?this.input.dispose():A(this.input)&&this.input.disconnect()),f(this.output)&&(this.output instanceof Ct?this.output.dispose():A(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function kt(...U){const Y=U.shift();U.reduce(((U,Y)=>(U instanceof Ct?U.connect(Y):A(U)&&At(U,Y),Y)),Y)}function At(U,Y,nt=0,st=0){for(r(f(U),"Cannot connect from undefined node"),r(f(Y),"Cannot connect to undefined node"),(Y instanceof Ct||A(Y))&&r(Y.numberOfInputs>0,"Cannot connect to node with no inputs"),r(U.numberOfOutputs>0,"Cannot connect from node with no outputs");Y instanceof Ct||Y instanceof St;)f(Y.input)&&(Y=Y.input);for(;U instanceof Ct;)f(U.output)&&(U=U.output);k(Y)?U.connect(Y,nt):U.connect(Y,nt,st)}function Dt(U,Y,nt=0,st=0){if(f(Y))for(;Y instanceof Ct;)Y=Y.input;for(;!A(U);)f(U.output)&&(U=U.output);k(Y)?U.disconnect(Y,nt):A(Y)?U.disconnect(Y,nt,st):U.disconnect()}class Mt extends Ct{constructor(){super(q(Mt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const U=q(Mt.getDefaults(),arguments,["gain","units"]);this.gain=new St({context:this.context,convert:U.convert,param:this._gainNode.gain,units:U.units,value:U.gain,minValue:U.minValue,maxValue:U.maxValue}),$(this,"gain")}static getDefaults(){return Object.assign(Ct.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class jt extends Ct{constructor(U){super(U),this.onended=K,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Mt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(U){const Y=this.toSeconds(U);return-1!==this._startTime&&Y>=this._startTime&&(-1===this._stopTime||Y<=this._stopTime)?"started":"stopped"},this._fadeIn=U.fadeIn,this._fadeOut=U.fadeOut,this._curve=U.curve,this.onended=U.onended}static getDefaults(){return Object.assign(Ct.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:K})}_startGain(U,Y=1){r(-1===this._startTime,"Source cannot be started more than once");const nt=this.toSeconds(this._fadeIn);return this._startTime=U+nt,this._startTime=Math.max(this._startTime,this.context.currentTime),nt>0?(this._gainNode.gain.setValueAtTime(0,U),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(Y,U+nt):this._gainNode.gain.exponentialApproachValueAtTime(Y,U,nt)):this._gainNode.gain.setValueAtTime(Y,U),this}stop(U){return this.log("stop",U),this._stopGain(this.toSeconds(U)),this}_stopGain(U){r(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const Y=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(U)+Y,this._stopTime=Math.max(this._stopTime,this.context.currentTime),Y>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,Y,U):this._gainNode.gain.targetRampTo(0,Y,U):(this._gainNode.gain.cancelAndHoldAtTime(U),this._gainNode.gain.setValueAtTime(0,U)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const U="exponential"===this._curve?2*Y:0;this._stopSource(this.now()+U),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==K&&(this.onended(this),this.onended=K,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),r(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Et extends jt{constructor(){super(q(Et.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const U=q(Et.getDefaults(),arguments,["offset"]);At(this._source,this._gainNode),this.offset=new St({context:this.context,convert:U.convert,param:this._source.offset,units:U.units,value:U.offset,minValue:U.minValue,maxValue:U.maxValue})}static getDefaults(){return Object.assign(jt.getDefaults(),{convert:!0,offset:1,units:"number"})}start(U){const Y=this.toSeconds(U);return this.log("start",Y),this._startGain(Y),this._source.start(Y),this}_stopSource(U){this._source.stop(U)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Rt extends Ct{constructor(){super(q(Rt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const U=q(Rt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Et({context:this.context,convert:U.convert,offset:U.value,units:U.units,minValue:U.minValue,maxValue:U.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ct.getDefaults(),{convert:!0,units:"number",value:0})}connect(U,Y=0,nt=0){return qt(this,U,Y,nt),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(U,Y){return this._param.setValueAtTime(U,Y),this}getValueAtTime(U){return this._param.getValueAtTime(U)}setRampPoint(U){return this._param.setRampPoint(U),this}linearRampToValueAtTime(U,Y){return this._param.linearRampToValueAtTime(U,Y),this}exponentialRampToValueAtTime(U,Y){return this._param.exponentialRampToValueAtTime(U,Y),this}exponentialRampTo(U,Y,nt){return this._param.exponentialRampTo(U,Y,nt),this}linearRampTo(U,Y,nt){return this._param.linearRampTo(U,Y,nt),this}targetRampTo(U,Y,nt){return this._param.targetRampTo(U,Y,nt),this}exponentialApproachValueAtTime(U,Y,nt){return this._param.exponentialApproachValueAtTime(U,Y,nt),this}setTargetAtTime(U,Y,nt){return this._param.setTargetAtTime(U,Y,nt),this}setValueCurveAtTime(U,Y,nt,st){return this._param.setValueCurveAtTime(U,Y,nt,st),this}cancelScheduledValues(U){return this._param.cancelScheduledValues(U),this}cancelAndHoldAtTime(U){return this._param.cancelAndHoldAtTime(U),this}rampTo(U,Y,nt){return this._param.rampTo(U,Y,nt),this}get value(){return this._param.value}set value(U){this._param.value=U}get convert(){return this._param.convert}set convert(U){this._param.convert=U}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(U){this._param.overridden=U}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(U){return this._param.apply(U),this}}function qt(U,Y,nt,st){(Y instanceof St||k(Y)||Y instanceof Rt&&Y.override)&&(Y.cancelScheduledValues(0),Y.setValueAtTime(0,0),Y instanceof Rt&&(Y.overridden=!0)),At(U,Y,nt,st)}class It extends St{constructor(){super(q(It.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new W(1/0),this._multiplier=1;const U=q(It.getDefaults(),arguments,["value"]);this._multiplier=U.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(U.value)}),this.setValueAtTime(U.value,0)}static getDefaults(){return Object.assign(St.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(U,Y,nt){Y=this.toSeconds(Y),this.setRampPoint(Y);const st=this._fromType(U),ht=this._events.get(Y),vt=Math.round(Math.max(1/nt,1));for(let U=0;U<=vt;U++){const vt=nt*U+Y,yt=this._exponentialApproach(ht.time,ht.value,st,nt,vt);this.linearRampToValueAtTime(this._toType(yt),vt)}return this}setValueAtTime(U,Y){const nt=this.toSeconds(Y);super.setValueAtTime(U,Y);const st=this._events.get(nt),ht=this._events.previousEvent(st),vt=this._getTicksUntilEvent(ht,nt);return st.ticks=Math.max(vt,0),this}linearRampToValueAtTime(U,Y){const nt=this.toSeconds(Y);super.linearRampToValueAtTime(U,Y);const st=this._events.get(nt),ht=this._events.previousEvent(st),vt=this._getTicksUntilEvent(ht,nt);return st.ticks=Math.max(vt,0),this}exponentialRampToValueAtTime(U,Y){Y=this.toSeconds(Y);const nt=this._fromType(U),st=this._events.get(Y),ht=Math.round(Math.max(10*(Y-st.time),1)),vt=(Y-st.time)/ht;for(let U=0;U<=ht;U++){const ht=vt*U+st.time,yt=this._exponentialInterpolate(st.time,st.value,Y,nt,ht);this.linearRampToValueAtTime(this._toType(yt),ht)}return this}_getTicksUntilEvent(U,Y){if(null===U)U={ticks:0,time:0,type:"setValueAtTime",value:0};else if(p(U.ticks)){const Y=this._events.previousEvent(U);U.ticks=this._getTicksUntilEvent(Y,U.time)}const nt=this._fromType(this.getValueAtTime(U.time));let st=this._fromType(this.getValueAtTime(Y));const ht=this._events.get(Y);return ht&&ht.time===Y&&"setValueAtTime"===ht.type&&(st=this._fromType(this.getValueAtTime(Y-this.sampleTime))),.5*(Y-U.time)*(nt+st)+U.ticks}getTicksAtTime(U){const Y=this.toSeconds(U),nt=this._events.get(Y);return Math.max(this._getTicksUntilEvent(nt,Y),0)}getDurationOfTicks(U,Y){const nt=this.toSeconds(Y),st=this.getTicksAtTime(Y);return this.getTimeOfTick(st+U)-nt}getTimeOfTick(U){const Y=this._events.get(U,"ticks"),nt=this._events.getAfter(U,"ticks");if(Y&&Y.ticks===U)return Y.time;if(Y&&nt&&"linearRampToValueAtTime"===nt.type&&Y.value!==nt.value){const st=this._fromType(this.getValueAtTime(Y.time)),ht=(this._fromType(this.getValueAtTime(nt.time))-st)/(nt.time-Y.time),vt=Math.sqrt(Math.pow(st,2)-2*ht*(Y.ticks-U)),yt=(-st+vt)/ht;return(yt>0?yt:(-st-vt)/ht)+Y.time}return Y?0===Y.value?1/0:Y.time+(U-Y.ticks)/Y.value:U/this._initialValue}ticksToTime(U,Y){return this.getDurationOfTicks(U,Y)}timeToTicks(U,Y){const nt=this.toSeconds(Y),st=this.toSeconds(U),ht=this.getTicksAtTime(nt);return this.getTicksAtTime(nt+st)-ht}_fromType(U){return"bpm"===this.units&&this.multiplier?1/(60/U/this.multiplier):super._fromType(U)}_toType(U){return"bpm"===this.units&&this.multiplier?U/this.multiplier*60:super._toType(U)}get multiplier(){return this._multiplier}set multiplier(U){const Y=this.value;this._multiplier=U,this.cancelScheduledValues(0),this.setValueAtTime(Y,0)}}class Ft extends Rt{constructor(){super(q(Ft.getDefaults(),arguments,["value"])),this.name="TickSignal";const U=q(Ft.getDefaults(),arguments,["value"]);this.input=this._param=new It({context:this.context,convert:U.convert,multiplier:U.multiplier,param:this._constantSource.offset,units:U.units,value:U.value})}static getDefaults(){return Object.assign(Rt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(U,Y){return this._param.ticksToTime(U,Y)}timeToTicks(U,Y){return this._param.timeToTicks(U,Y)}getTimeOfTick(U){return this._param.getTimeOfTick(U)}getDurationOfTicks(U,Y){return this._param.getDurationOfTicks(U,Y)}getTicksAtTime(U){return this._param.getTicksAtTime(U)}get multiplier(){return this._param.multiplier}set multiplier(U){this._param.multiplier=U}dispose(){return super.dispose(),this._param.dispose(),this}}class Vt extends Tt{constructor(){super(q(Vt.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Ot,this._tickOffset=new W;const U=q(Vt.getDefaults(),arguments,["frequency"]);this.frequency=new Ft({context:this.context,units:U.units,value:U.frequency}),$(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Tt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(U,Y){const nt=this.toSeconds(U);return"started"!==this._state.getValueAtTime(nt)&&(this._state.setStateAtTime("started",nt),f(Y)&&this.setTicksAtTime(Y,nt)),this}stop(U){const Y=this.toSeconds(U);if("stopped"===this._state.getValueAtTime(Y)){const U=this._state.get(Y);U&&U.time>0&&(this._tickOffset.cancel(U.time),this._state.cancel(U.time))}return this._state.cancel(Y),this._state.setStateAtTime("stopped",Y),this.setTicksAtTime(0,Y),this}pause(U){const Y=this.toSeconds(U);return"started"===this._state.getValueAtTime(Y)&&this._state.setStateAtTime("paused",Y),this}cancel(U){return U=this.toSeconds(U),this._state.cancel(U),this._tickOffset.cancel(U),this}getTicksAtTime(U){const Y=this.toSeconds(U),nt=this._state.getLastState("stopped",Y),st={state:"paused",time:Y};this._state.add(st);let ht=nt,vt=0;return this._state.forEachBetween(nt.time,Y+this.sampleTime,(U=>{let Y=ht.time;const nt=this._tickOffset.get(U.time);nt&&nt.time>=ht.time&&(vt=nt.ticks,Y=nt.time),"started"===ht.state&&"started"!==U.state&&(vt+=this.frequency.getTicksAtTime(U.time)-this.frequency.getTicksAtTime(Y)),ht=U})),this._state.remove(st),vt}get ticks(){return this.getTicksAtTime(this.now())}set ticks(U){this.setTicksAtTime(U,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(U){const Y=this.now(),nt=this.frequency.timeToTicks(U,Y);this.setTicksAtTime(nt,Y)}getSecondsAtTime(U){U=this.toSeconds(U);const Y=this._state.getLastState("stopped",U),nt={state:"paused",time:U};this._state.add(nt);let st=Y,ht=0;return this._state.forEachBetween(Y.time,U+this.sampleTime,(U=>{let Y=st.time;const nt=this._tickOffset.get(U.time);nt&&nt.time>=st.time&&(ht=nt.seconds,Y=nt.time),"started"===st.state&&"started"!==U.state&&(ht+=U.time-Y),st=U})),this._state.remove(nt),ht}setTicksAtTime(U,Y){return Y=this.toSeconds(Y),this._tickOffset.cancel(Y),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(U,Y),ticks:U,time:Y}),this}getStateAtTime(U){return U=this.toSeconds(U),this._state.getValueAtTime(U)}getTimeOfTick(U,Y=this.now()){const nt=this._tickOffset.get(Y),st=this._state.get(Y),ht=Math.max(nt.time,st.time),vt=this.frequency.getTicksAtTime(ht)+U-nt.ticks;return this.frequency.getTimeOfTick(vt)}forEachTickBetween(U,Y,nt){let st=this._state.get(U);this._state.forEachBetween(U,Y,(Y=>{st&&"started"===st.state&&"started"!==Y.state&&this.forEachTickBetween(Math.max(st.time,U),Y.time-this.sampleTime,nt),st=Y}));let ht=null;if(st&&"started"===st.state){const vt=Math.max(st.time,U),yt=this.frequency.getTicksAtTime(vt),ee=yt-this.frequency.getTicksAtTime(st.time);let oe=Math.ceil(ee)-ee;oe=z(oe,1)?0:oe;let re=this.frequency.getTimeOfTick(yt+oe);for(;re<Y;){try{nt(re,Math.round(this.getTicksAtTime(re)))}catch(U){ht=U;break}re+=this.frequency.getDurationOfTicks(1,re)}}if(ht)throw ht;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Nt extends Tt{constructor(){super(q(Nt.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=K,this._lastUpdate=0,this._state=new Ot("stopped"),this._boundLoop=this._loop.bind(this);const U=q(Nt.getDefaults(),arguments,["callback","frequency"]);this.callback=U.callback,this._tickSource=new Vt({context:this.context,frequency:U.frequency,units:U.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,$(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Tt.getDefaults(),{callback:K,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(U,Y){c(this.context);const nt=this.toSeconds(U);return this.log("start",nt),"started"!==this._state.getValueAtTime(nt)&&(this._state.setStateAtTime("started",nt),this._tickSource.start(nt,Y),nt<this._lastUpdate&&this.emit("start",nt,Y)),this}stop(U){const Y=this.toSeconds(U);return this.log("stop",Y),this._state.cancel(Y),this._state.setStateAtTime("stopped",Y),this._tickSource.stop(Y),Y<this._lastUpdate&&this.emit("stop",Y),this}pause(U){const Y=this.toSeconds(U);return"started"===this._state.getValueAtTime(Y)&&(this._state.setStateAtTime("paused",Y),this._tickSource.pause(Y),Y<this._lastUpdate&&this.emit("pause",Y)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(U){this._tickSource.ticks=U}get seconds(){return this._tickSource.seconds}set seconds(U){this._tickSource.seconds=U}getSecondsAtTime(U){return this._tickSource.getSecondsAtTime(U)}setTicksAtTime(U,Y){return this._tickSource.setTicksAtTime(U,Y),this}getTimeOfTick(U,Y=this.now()){return this._tickSource.getTimeOfTick(U,Y)}getTicksAtTime(U){return this._tickSource.getTicksAtTime(U)}nextTickTime(U,Y){const nt=this.toSeconds(Y),st=this.getTicksAtTime(nt);return this._tickSource.getTimeOfTick(st+U,nt)}_loop(){const U=this._lastUpdate,Y=this.now();this._lastUpdate=Y,this.log("loop",U,Y),U!==Y&&(this._state.forEachBetween(U,Y,(U=>{switch(U.state){case"started":const Y=this._tickSource.getTicksAtTime(U.time);this.emit("start",U.time,Y);break;case"stopped":0!==U.time&&this.emit("stop",U.time);break;case"paused":this.emit("pause",U.time)}})),this._tickSource.forEachTickBetween(U,Y,((U,Y)=>{this.callback(U,Y)})))}getStateAtTime(U){const Y=this.toSeconds(U);return this._state.getValueAtTime(Y)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Z.mixin(Nt);class Pt extends V{constructor(U){super(),this.name="TimelineValue",this._timeline=new W({memory:10}),this._initialValue=U}set(U,Y){return this._timeline.add({value:U,time:Y}),this}get(U){const Y=this._timeline.get(U);return Y?Y.value:this._initialValue}}class Lt extends xt{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(U){return this._getPPQ()*U}_secondsToUnits(U){return Math.floor(U/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(U){return U}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function zt(U,Y){return new Lt(it(),U,Y)}class Bt extends V{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(U){r(f(U.time),"Events must have a time property"),r(f(U.duration),"Events must have a duration parameter"),U.time=U.time.valueOf();let Y=new Wt(U.time,U.time+U.duration,U);for(null===this._root?this._root=Y:this._root.insert(Y),this._length++;null!==Y;)Y.updateHeight(),Y.updateMax(),this._rebalance(Y),Y=Y.parent;return this}remove(U){if(null!==this._root){const Y=[];this._root.search(U.time,Y);for(const nt of Y)if(nt.event===U){this._removeNode(nt),this._length--;break}}return this}get length(){return this._length}cancel(U){return this.forEachFrom(U,(U=>this.remove(U))),this}_setRoot(U){this._root=U,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(U,Y){null!==U.parent?(U.isLeftChild()?U.parent.left=Y:U.parent.right=Y,this._rebalance(U.parent)):this._setRoot(Y)}_removeNode(U){if(null===U.left&&null===U.right)this._replaceNodeInParent(U,null);else if(null===U.right)this._replaceNodeInParent(U,U.left);else if(null===U.left)this._replaceNodeInParent(U,U.right);else{let Y,nt=null;if(U.getBalance()>0)if(null===U.left.right)Y=U.left,Y.right=U.right,nt=Y;else{for(Y=U.left.right;null!==Y.right;)Y=Y.right;Y.parent&&(Y.parent.right=Y.left,nt=Y.parent,Y.left=U.left,Y.right=U.right)}else if(null===U.right.left)Y=U.right,Y.left=U.left,nt=Y;else{for(Y=U.right.left;null!==Y.left;)Y=Y.left;Y.parent&&(Y.parent.left=Y.right,nt=Y.parent,Y.left=U.left,Y.right=U.right)}null!==U.parent?U.isLeftChild()?U.parent.left=Y:U.parent.right=Y:this._setRoot(Y),nt&&this._rebalance(nt)}U.dispose()}_rotateLeft(U){const Y=U.parent,nt=U.isLeftChild(),st=U.right;st&&(U.right=st.left,st.left=U),null!==Y?nt?Y.left=st:Y.right=st:this._setRoot(st)}_rotateRight(U){const Y=U.parent,nt=U.isLeftChild(),st=U.left;st&&(U.left=st.right,st.right=U),null!==Y?nt?Y.left=st:Y.right=st:this._setRoot(st)}_rebalance(U){const Y=U.getBalance();Y>1&&U.left?U.left.getBalance()<0?this._rotateLeft(U.left):this._rotateRight(U):Y<-1&&U.right&&(U.right.getBalance()>0?this._rotateRight(U.right):this._rotateLeft(U))}get(U){if(null!==this._root){const Y=[];if(this._root.search(U,Y),Y.length>0){let U=Y[0];for(let nt=1;nt<Y.length;nt++)Y[nt].low>U.low&&(U=Y[nt]);return U.event}}return null}forEach(U){if(null!==this._root){const Y=[];this._root.traverse((U=>Y.push(U))),Y.forEach((Y=>{Y.event&&U(Y.event)}))}return this}forEachAtTime(U,Y){if(null!==this._root){const nt=[];this._root.search(U,nt),nt.forEach((U=>{U.event&&Y(U.event)}))}return this}forEachFrom(U,Y){if(null!==this._root){const nt=[];this._root.searchAfter(U,nt),nt.forEach((U=>{U.event&&Y(U.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((U=>U.dispose())),this._root=null,this}}class Wt{constructor(U,Y,nt){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=nt,this.low=U,this.high=Y,this.max=this.high}insert(U){U.low<=this.low?null===this.left?this.left=U:this.left.insert(U):null===this.right?this.right=U:this.right.insert(U)}search(U,Y){U>this.max||(null!==this.left&&this.left.search(U,Y),this.low<=U&&this.high>U&&Y.push(this),this.low>U||null!==this.right&&this.right.search(U,Y))}searchAfter(U,Y){this.low>=U&&(Y.push(this),null!==this.left&&this.left.searchAfter(U,Y)),null!==this.right&&this.right.searchAfter(U,Y)}traverse(U){U(this),null!==this.left&&this.left.traverse(U),null!==this.right&&this.right.traverse(U)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let U=0;return null!==this.left&&null!==this.right?U=this.left.height-this.right.height:null!==this.left?U=this.left.height+1:null!==this.right&&(U=-(this.right.height+1)),U}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(U){this._left=U,null!==U&&(U.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(U){this._right=U,null!==U&&(U.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ut{constructor(U,Y){this.id=Ut._eventId++;const nt=Object.assign(Ut.getDefaults(),Y);this.transport=U,this.callback=nt.callback,this._once=nt.once,this.time=nt.time}static getDefaults(){return{callback:K,once:!1,time:0}}invoke(U){this.callback&&(this.callback(U),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Ut._eventId=0;class Gt extends Ut{constructor(U,Y){super(U,Y),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const nt=Object.assign(Gt.getDefaults(),Y);this.duration=new Lt(U.context,nt.duration).valueOf(),this._interval=new Lt(U.context,nt.interval).valueOf(),this._nextTick=nt.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ut.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(U){this._createEvents(U),super.invoke(U)}_createEvents(U){const Y=this.transport.getTicksAtTime(U);Y>=this.time&&Y>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Lt(this.context,this._nextTick).toSeconds()))}_restart(U){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const Y=this.transport.getTicksAtTime(U);Y>this.time&&(this._nextTick=this.time+Math.ceil((Y-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Lt(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Lt(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Yt extends Tt{constructor(){super(q(Yt.getDefaults(),arguments)),this.name="Transport",this._loop=new Pt(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new W,this._repeatedEvents=new Bt,this._syncedSignals=[],this._swingAmount=0;const U=q(Yt.getDefaults(),arguments);this._ppq=U.ppq,this._clock=new Nt({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=U.ppq,this.bpm.setValueAtTime(U.bpm,0),$(this,"bpm"),this._timeSignature=U.timeSignature,this._swingTicks=U.ppq/2}static getDefaults(){return Object.assign(Tt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(U,Y){if(this._swingAmount>0&&Y%this._ppq!=0&&Y%(2*this._swingTicks)!=0){const nt=Y%(2*this._swingTicks)/(2*this._swingTicks),st=Math.sin(nt*Math.PI)*this._swingAmount;U+=new Lt(this.context,2*this._swingTicks/3).toSeconds()*st}this._loop.get(U)&&Y>=this._loopEnd&&(this.emit("loopEnd",U),this._clock.setTicksAtTime(this._loopStart,U),Y=this._loopStart,this.emit("loopStart",U,this._clock.getSecondsAtTime(U)),this.emit("loop",U)),this._timeline.forEachAtTime(Y,(Y=>Y.invoke(U)))}schedule(U,Y){const nt=new Ut(this,{callback:U,time:new xt(this.context,Y).toTicks()});return this._addEvent(nt,this._timeline)}scheduleRepeat(U,Y,nt,st=1/0){const ht=new Gt(this,{callback:U,duration:new _t(this.context,st).toTicks(),interval:new _t(this.context,Y).toTicks(),time:new xt(this.context,nt).toTicks()});return this._addEvent(ht,this._repeatedEvents)}scheduleOnce(U,Y){const nt=new Ut(this,{callback:U,once:!0,time:new xt(this.context,Y).toTicks()});return this._addEvent(nt,this._timeline)}clear(U){if(this._scheduledEvents.hasOwnProperty(U)){const Y=this._scheduledEvents[U.toString()];Y.timeline.remove(Y.event),Y.event.dispose(),delete this._scheduledEvents[U.toString()]}return this}_addEvent(U,Y){return this._scheduledEvents[U.id.toString()]={event:U,timeline:Y},Y.add(U),U.id}cancel(U=0){const Y=this.toTicks(U);return this._timeline.forEachFrom(Y,(U=>this.clear(U.id))),this._repeatedEvents.forEachFrom(Y,(U=>this.clear(U.id))),this}_bindClockEvents(){this._clock.on("start",((U,Y)=>{Y=new Lt(this.context,Y).toSeconds(),this.emit("start",U,Y)})),this._clock.on("stop",(U=>{this.emit("stop",U)})),this._clock.on("pause",(U=>{this.emit("pause",U)}))}get state(){return this._clock.getStateAtTime(this.now())}start(U,Y){let nt;return f(Y)&&(nt=this.toTicks(Y)),this._clock.start(U,nt),this}stop(U){return this._clock.stop(U),this}pause(U){return this._clock.pause(U),this}toggle(U){return U=this.toSeconds(U),"started"!==this._clock.getStateAtTime(U)?this.start(U):this.stop(U),this}get timeSignature(){return this._timeSignature}set timeSignature(U){y(U)&&(U=U[0]/U[1]*4),this._timeSignature=U}get loopStart(){return new _t(this.context,this._loopStart,"i").toSeconds()}set loopStart(U){this._loopStart=this.toTicks(U)}get loopEnd(){return new _t(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(U){this._loopEnd=this.toTicks(U)}get loop(){return this._loop.get(this.now())}set loop(U){this._loop.set(U,this.now())}setLoopPoints(U,Y){return this.loopStart=U,this.loopEnd=Y,this}get swing(){return this._swingAmount}set swing(U){this._swingAmount=U}get swingSubdivision(){return new Lt(this.context,this._swingTicks).toNotation()}set swingSubdivision(U){this._swingTicks=this.toTicks(U)}get position(){const U=this.now(),Y=this._clock.getTicksAtTime(U);return new Lt(this.context,Y).toBarsBeatsSixteenths()}set position(U){const Y=this.toTicks(U);this.ticks=Y}get seconds(){return this._clock.seconds}set seconds(U){const Y=this.now(),nt=this._clock.frequency.timeToTicks(U,Y);this.ticks=nt}get progress(){if(this.loop){const U=this.now();return(this._clock.getTicksAtTime(U)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(U){if(this._clock.ticks!==U){const Y=this.now();if("started"===this.state){const nt=this._clock.getTicksAtTime(Y),st=this._clock.getTimeOfTick(Math.ceil(nt));this.emit("stop",st),this._clock.setTicksAtTime(U,st),this.emit("start",st,this._clock.getSecondsAtTime(st))}else this._clock.setTicksAtTime(U,Y)}}getTicksAtTime(U){return Math.round(this._clock.getTicksAtTime(U))}getSecondsAtTime(U){return this._clock.getSecondsAtTime(U)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(U){this._clock.frequency.multiplier=U}nextSubdivision(U){if(U=this.toTicks(U),"started"!==this.state)return 0;{const Y=this.now(),nt=U-this.getTicksAtTime(Y)%U;return this._clock.nextTickTime(nt,Y)}}syncSignal(U,Y){if(!Y){const nt=this.now();if(0!==U.getValueAtTime(nt)){const st=1/(60/this.bpm.getValueAtTime(nt)/this.PPQ);Y=U.getValueAtTime(nt)/st}else Y=0}const nt=new Mt(Y);return this.bpm.connect(nt),nt.connect(U._param),this._syncedSignals.push({initial:U.value,ratio:nt,signal:U}),U.value=0,this}unsyncSignal(U){for(let Y=this._syncedSignals.length-1;Y>=0;Y--){const nt=this._syncedSignals[Y];nt.signal===U&&(nt.ratio.dispose(),nt.signal.value=nt.initial,this._syncedSignals.splice(Y,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),J(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Z.mixin(Yt),G((U=>{U.transport=new Yt({context:U})})),Q((U=>{U.transport.dispose()}));class Qt extends Ct{constructor(){super(q(Qt.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const U=q(Qt.getDefaults(),arguments,["delayTime","maxDelay"]),Y=this.toSeconds(U.maxDelay);this._maxDelay=Math.max(Y,this.toSeconds(U.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(Y),this.delayTime=new St({context:this.context,param:this._delayNode.delayTime,units:"time",value:U.delayTime,minValue:0,maxValue:this.maxDelay}),$(this,"delayTime")}static getDefaults(){return Object.assign(Ct.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Zt extends Ct{constructor(){super(q(Zt.getDefaults(),arguments,["volume"])),this.name="Volume";const U=q(Zt.getDefaults(),arguments,["volume"]);this.input=this.output=new Mt({context:this.context,gain:U.volume,units:"decibels"}),this.volume=this.output.gain,$(this,"volume"),this._unmutedVolume=U.volume,this.mute=U.mute}static getDefaults(){return Object.assign(Ct.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(U){!this.mute&&U?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!U&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Xt extends Ct{constructor(){super(q(Xt.getDefaults(),arguments)),this.name="Destination",this.input=new Zt({context:this.context}),this.output=new Mt({context:this.context}),this.volume=this.input.volume;const U=q(Xt.getDefaults(),arguments);kt(this.input,this.output,this.context.rawContext.destination),this.mute=U.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ct.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(U){this.input.mute=U}chain(...U){return this.input.disconnect(),U.unshift(this.input),U.push(this.output),kt(...U),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}function Ht(U,Y,nt=2,st=it().sampleRate){return S(this,void 0,void 0,(function*(){const ht=it(),vt=new et(nt,Y,st);ot(vt),yield U(vt);const yt=vt.render();ot(ht);const ee=yield yt;return new tt(ee)}))}G((U=>{U.destination=new Xt({context:U})})),Q((U=>{U.destination.dispose()}));class $t extends V{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const U=q($t.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=U.baseUrl,Object.keys(U.urls).forEach((Y=>{this._loadingCount++;const nt=U.urls[Y];this.add(Y,nt,this._bufferLoaded.bind(this,U.onload),U.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:K,onload:K,urls:{}}}has(U){return this._buffers.has(U.toString())}get(U){return r(this.has(U),"ToneAudioBuffers has no buffer named: "+U),this._buffers.get(U.toString())}_bufferLoaded(U){this._loadingCount--,0===this._loadingCount&&U&&U()}get loaded(){return Array.from(this._buffers).every((([U,Y])=>Y.loaded))}add(U,Y,nt=K,st=K){return b(Y)?this._buffers.set(U.toString(),new tt(this.baseUrl+Y,nt,st)):this._buffers.set(U.toString(),new tt(Y,nt,st)),this}dispose(){return super.dispose(),this._buffers.forEach((U=>U.dispose())),this._buffers.clear(),this}}class Jt extends gt{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(U){return lt(super._frequencyToUnits(U))}_ticksToUnits(U){return lt(super._ticksToUnits(U))}_beatsToUnits(U){return lt(super._beatsToUnits(U))}_secondsToUnits(U){return lt(super._secondsToUnits(U))}toMidi(){return this.valueOf()}toFrequency(){return pt(this.toMidi())}transpose(U){return new Jt(this.context,this.toMidi()+U)}}function Kt(U,Y){return new Jt(it(),U,Y)}class te extends Tt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new W,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(U,Y){return this._events.add({callback:U,time:this.toSeconds(Y)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(U){return this._events.cancel(this.toSeconds(U)),this}_drawLoop(){const U=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=U;){const Y=this._events.shift();Y&&U-Y.time<=this.expiration&&Y.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}G((U=>{U.draw=new te({context:U})})),Q((U=>{U.draw.dispose()}));var Kn=nt(515);class ne extends Ct{constructor(U){super(U),this.input=void 0,this._state=new Ot("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=K,this._syncedStop=K,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Zt({context:this.context,mute:U.mute,volume:U.volume}),this.volume=this._volume.volume,$(this,"volume"),this.onstop=U.onstop}static getDefaults(){return Object.assign(Ct.getDefaults(),{mute:!1,onstop:K,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(U){this._volume.mute=U}_clampToCurrentTime(U){return this._synced?U:Math.max(U,this.context.currentTime)}start(U,Y,nt){let st=p(U)&&this._synced?this.context.transport.seconds:this.toSeconds(U);if(st=this._clampToCurrentTime(st),this._synced||"started"!==this._state.getValueAtTime(st))if(this.log("start",st),this._state.setStateAtTime("started",st),this._synced){const U=this._state.get(st);U&&(U.offset=this.toSeconds(I(Y,0)),U.duration=nt?this.toSeconds(nt):void 0);const ht=this.context.transport.schedule((U=>{this._start(U,Y,nt)}),st);this._scheduled.push(ht),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>st&&this._syncedStart(this.now(),this.context.transport.seconds)}else c(this.context),this._start(st,Y,nt);else r(N(st,this._state.get(st).time),"Start time must be strictly greater than previous start time"),this._state.cancel(st),this._state.setStateAtTime("started",st),this.log("restart",st),this.restart(st,Y,nt);return this}stop(U){let Y=p(U)&&this._synced?this.context.transport.seconds:this.toSeconds(U);if(Y=this._clampToCurrentTime(Y),"started"===this._state.getValueAtTime(Y)||f(this._state.getNextState("started",Y))){if(this.log("stop",Y),this._synced){const U=this.context.transport.schedule(this._stop.bind(this),Y);this._scheduled.push(U)}else this._stop(Y);this._state.cancel(Y),this._state.setStateAtTime("stopped",Y)}return this}restart(U,Y,nt){return U=this.toSeconds(U),"started"===this._state.getValueAtTime(U)&&(this._state.cancel(U),this._restart(U,Y,nt)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(U,Y)=>{if(Y>0){const nt=this._state.get(Y);if(nt&&"started"===nt.state&&nt.time!==Y){const st=Y-this.toSeconds(nt.time);let ht;nt.duration&&(ht=this.toSeconds(nt.duration)-st),this._start(U,this.toSeconds(nt.offset)+st,ht)}}},this._syncedStop=U=>{const Y=this.context.transport.getSecondsAtTime(Math.max(U-this.sampleTime,0));"started"===this._state.getValueAtTime(Y)&&this._stop(U)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((U=>this.context.transport.clear(U))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=K,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class se extends jt{constructor(){super(q(se.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const U=q(se.getDefaults(),arguments,["url","onload"]);At(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new St({context:this.context,param:this._source.playbackRate,units:"positive",value:U.playbackRate}),this.loop=U.loop,this.loopStart=U.loopStart,this.loopEnd=U.loopEnd,this._buffer=new tt(U.url,U.onload,U.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(jt.getDefaults(),{url:new tt,loop:!1,loopEnd:0,loopStart:0,onload:K,onerror:K,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(U){this._fadeIn=U}get fadeOut(){return this._fadeOut}set fadeOut(U){this._fadeOut=U}get curve(){return this._curve}set curve(U){this._curve=U}start(U,Y,nt,st=1){r(this.buffer.loaded,"buffer is either not set or not loaded");const ht=this.toSeconds(U);this._startGain(ht,st),Y=this.loop?I(Y,this.loopStart):I(Y,0);let vt=Math.max(this.toSeconds(Y),0);if(this.loop){const U=this.toSeconds(this.loopEnd)||this.buffer.duration,Y=this.toSeconds(this.loopStart),nt=U-Y;P(vt,U)&&(vt=(vt-Y)%nt+Y),z(vt,this.buffer.duration)&&(vt=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,L(vt,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(ht,vt)),f(nt)){let U=this.toSeconds(nt);U=Math.max(U,0),this.stop(ht+U)}return this}_stopSource(U){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(U)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(U){this._source.loopStart=this.toSeconds(U)}get loopEnd(){return this._source.loopEnd}set loopEnd(U){this._source.loopEnd=this.toSeconds(U)}get buffer(){return this._buffer}set buffer(U){this._buffer.set(U)}get loop(){return this._source.loop}set loop(U){this._source.loop=U,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ie extends ne{constructor(){super(q(ie.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const U=q(ie.getDefaults(),arguments,["type"]);this._playbackRate=U.playbackRate,this.type=U.type,this._fadeIn=U.fadeIn,this._fadeOut=U.fadeOut}static getDefaults(){return Object.assign(ne.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(U){if(r(U in es,"Noise: invalid type: "+U),this._type!==U&&(this._type=U,"started"===this.state)){const U=this.now();this._stop(U),this._start(U)}}get playbackRate(){return this._playbackRate}set playbackRate(U){this._playbackRate=U,this._source&&(this._source.playbackRate.value=U)}_start(U){const Y=es[this._type];this._source=new se({url:Y,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(U),Math.random()*(Y.duration-.001))}_stop(U){this._source&&(this._source.stop(this.toSeconds(U)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(U){this._fadeIn=U,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(U){this._fadeOut=U,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(U){this._stop(U),this._start(U)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ts={brown:null,pink:null,white:null},es={get brown(){if(!ts.brown){const U=[];for(let Y=0;Y<2;Y++){const nt=new Float32Array(220500);U[Y]=nt;let st=0;for(let U=0;U<220500;U++){const Y=2*Math.random()-1;nt[U]=(st+.02*Y)/1.02,st=nt[U],nt[U]*=3.5}}ts.brown=(new tt).fromArray(U)}return ts.brown},get pink(){if(!ts.pink){const U=[];for(let Y=0;Y<2;Y++){const nt=new Float32Array(220500);let st,ht,vt,yt,ee,oe,re;U[Y]=nt,st=ht=vt=yt=ee=oe=re=0;for(let U=0;U<220500;U++){const Y=2*Math.random()-1;st=.99886*st+.0555179*Y,ht=.99332*ht+.0750759*Y,vt=.969*vt+.153852*Y,yt=.8665*yt+.3104856*Y,ee=.55*ee+.5329522*Y,oe=-.7616*oe-.016898*Y,nt[U]=st+ht+vt+yt+ee+oe+re+.5362*Y,nt[U]*=.11,re=.115926*Y}}ts.pink=(new tt).fromArray(U)}return ts.pink},get white(){if(!ts.white){const U=[];for(let Y=0;Y<2;Y++){const nt=new Float32Array(220500);U[Y]=nt;for(let U=0;U<220500;U++)nt[U]=2*Math.random()-1}ts.white=(new tt).fromArray(U)}return ts.white}};class ae extends Ct{constructor(){super(q(ae.getDefaults(),arguments,["volume"])),this.name="UserMedia";const U=q(ae.getDefaults(),arguments,["volume"]);this._volume=this.output=new Zt({context:this.context,volume:U.volume}),this.volume=this._volume.volume,$(this,"volume"),this.mute=U.mute}static getDefaults(){return Object.assign(Ct.getDefaults(),{mute:!1,volume:0})}open(U){return S(this,void 0,void 0,(function*(){r(ae.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const Y=yield ae.enumerateDevices();m(U)?this._device=Y[U]:(this._device=Y.find((Y=>Y.label===U||Y.deviceId===U)),!this._device&&Y.length>0&&(this._device=Y[0]),r(f(this._device),"No matching device "+U));const nt={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(nt.audio.deviceId=this._device.deviceId);const st=yield navigator.mediaDevices.getUserMedia(nt);if(!this._stream){this._stream=st;const U=this.context.createMediaStreamSource(st);At(U,this.output),this._mediaStream=U}return this}))}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((U=>{U.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return S(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((U=>"audioinput"===U.kind))}))}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(U){this._volume.mute=U}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return f(navigator.mediaDevices)&&f(navigator.mediaDevices.getUserMedia)}}function ce(U,Y){return S(this,void 0,void 0,(function*(){const nt=Y/U.context.sampleRate,st=new et(1,nt,U.context.sampleRate);return new U.constructor(Object.assign(U.get(),{frequency:2/nt,detune:0,context:st})).toDestination().start(0),(yield st.render()).getChannelData(0)}))}class ue extends jt{constructor(){super(q(ue.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const U=q(ue.getDefaults(),arguments,["frequency","type"]);At(this._oscillator,this._gainNode),this.type=U.type,this.frequency=new St({context:this.context,param:this._oscillator.frequency,units:"frequency",value:U.frequency}),this.detune=new St({context:this.context,param:this._oscillator.detune,units:"cents",value:U.detune}),$(this,["frequency","detune"])}static getDefaults(){return Object.assign(jt.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(U){const Y=this.toSeconds(U);return this.log("start",Y),this._startGain(Y),this._oscillator.start(Y),this}_stopSource(U){this._oscillator.stop(U)}setPeriodicWave(U){return this._oscillator.setPeriodicWave(U),this}get type(){return this._oscillator.type}set type(U){this._oscillator.type=U}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class he extends ne{constructor(){super(q(he.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const U=q(he.getDefaults(),arguments,["frequency","type"]);this.frequency=new Rt({context:this.context,units:"frequency",value:U.frequency}),$(this,"frequency"),this.detune=new Rt({context:this.context,units:"cents",value:U.detune}),$(this,"detune"),this._partials=U.partials,this._partialCount=U.partialCount,this._type=U.type,U.partialCount&&"custom"!==U.type&&(this._type=this.baseType+U.partialCount.toString()),this.phase=U.phase}static getDefaults(){return Object.assign(ne.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(U){const Y=this.toSeconds(U),nt=new ue({context:this.context,onended:()=>this.onstop(this)});this._oscillator=nt,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(Y)}_stop(U){const Y=this.toSeconds(U);this._oscillator&&this._oscillator.stop(Y)}_restart(U){const Y=this.toSeconds(U);return this.log("restart",Y),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(Y),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return he._periodicWaveCache.find((U=>{return U.phase===this._phase&&(Y=U.partials,nt=this._partials,Y.length===nt.length&&Y.every(((U,Y)=>nt[Y]===U)));var Y,nt}));{const U=he._periodicWaveCache.find((U=>U.type===this._type&&U.phase===this._phase));return this._partialCount=U?U.partialCount:this._partialCount,U}}get type(){return this._type}set type(U){this._type=U;const Y=-1!==["sine","square","sawtooth","triangle"].indexOf(U);if(0===this._phase&&Y)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=U);else{const Y=this._getCachedPeriodicWave();if(f(Y)){const{partials:U,wave:nt}=Y;this._wave=nt,this._partials=U,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[Y,nt]=this._getRealImaginary(U,this._phase),st=this.context.createPeriodicWave(Y,nt);this._wave=st,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),he._periodicWaveCache.push({imag:nt,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:Y,type:this._type,wave:this._wave}),he._periodicWaveCache.length>100&&he._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(U){this.partialCount&&"custom"!==this._type&&"custom"!==U?this.type=U+this.partialCount:this.type=U}get partialCount(){return this._partialCount}set partialCount(U){a(U,0);let Y=this._type;const nt=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(nt&&(Y=nt[1]),"custom"!==this._type)this.type=0===U?Y:Y+U.toString();else{const Y=new Float32Array(U);this._partials.forEach(((U,nt)=>Y[nt]=U)),this._partials=Array.from(Y),this.type=this._type}}_getRealImaginary(U,Y){let nt=2048;const st=new Float32Array(nt),ht=new Float32Array(nt);let vt=1;if("custom"===U){if(vt=this._partials.length+1,this._partialCount=this._partials.length,nt=vt,0===this._partials.length)return[st,ht]}else{const Y=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(U);Y?(vt=parseInt(Y[2],10)+1,this._partialCount=parseInt(Y[2],10),U=Y[1],vt=Math.max(vt,2),nt=vt):this._partialCount=0,this._partials=[]}for(let yt=1;yt<nt;++yt){const nt=2/(yt*Math.PI);let ee;switch(U){case"sine":ee=yt<=vt?1:0,this._partials[yt-1]=ee;break;case"square":ee=1&yt?2*nt:0,this._partials[yt-1]=ee;break;case"sawtooth":ee=nt*(1&yt?1:-1),this._partials[yt-1]=ee;break;case"triangle":ee=1&yt?nt*nt*2*(yt-1>>1&1?-1:1):0,this._partials[yt-1]=ee;break;case"custom":ee=this._partials[yt-1];break;default:throw new TypeError("Oscillator: invalid type: "+U)}0!==ee?(st[yt]=-ee*Math.sin(Y*yt),ht[yt]=ee*Math.cos(Y*yt)):(st[yt]=0,ht[yt]=0)}return[st,ht]}_inverseFFT(U,Y,nt){let st=0;const ht=U.length;for(let vt=0;vt<ht;vt++)st+=U[vt]*Math.cos(vt*nt)+Y[vt]*Math.sin(vt*nt);return st}getInitialValue(){const[U,Y]=this._getRealImaginary(this._type,0);let nt=0;const st=2*Math.PI;for(let ht=0;ht<32;ht++)nt=Math.max(this._inverseFFT(U,Y,ht/32*st),nt);return B(-this._inverseFFT(U,Y,this._phase)/nt,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(U){this._partials=U,this._partialCount=this._partials.length,U.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(U){this._phase=U*Math.PI/180,this.type=this._type}asArray(U=1024){return S(this,void 0,void 0,(function*(){return ce(this,U)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}he._periodicWaveCache=[];class le extends Ct{constructor(){super(Object.assign(q(le.getDefaults(),arguments,["context"])))}connect(U,Y=0,nt=0){return qt(this,U,Y,nt),this}}class de extends le{constructor(){super(Object.assign(q(de.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const U=q(de.getDefaults(),arguments,["mapping","length"]);y(U.mapping)||U.mapping instanceof Float32Array?this.curve=Float32Array.from(U.mapping):_(U.mapping)&&this.setMap(U.mapping,U.length)}static getDefaults(){return Object.assign(Rt.getDefaults(),{length:1024})}setMap(U,Y=1024){const nt=new Float32Array(Y);for(let st=0,ht=Y;st<ht;st++){const Y=st/(ht-1)*2-1;nt[st]=U(Y,st)}return this.curve=nt,this}get curve(){return this._shaper.curve}set curve(U){this._shaper.curve=U}get oversample(){return this._shaper.oversample}set oversample(U){r(["none","2x","4x"].some((Y=>Y.includes(U))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=U}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class pe extends le{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new de({context:this.context,mapping:U=>(U+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class fe extends Rt{constructor(){super(Object.assign(q(fe.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const U=q(fe.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Mt({context:this.context,minValue:U.minValue,maxValue:U.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(U.value,0)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class _e extends ne{constructor(){super(q(_e.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new pe({context:this.context}),this._modulationNode=new Mt({context:this.context});const U=q(_e.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new he({context:this.context,detune:U.detune,frequency:U.frequency,onstop:()=>this.onstop(this),phase:U.phase,type:U.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new he({context:this.context,phase:U.phase,type:U.modulationType}),this.harmonicity=new fe({context:this.context,units:"positive",value:U.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),$(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(he.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(U){this._modulator.start(U),this._carrier.start(U)}_stop(U){this._modulator.stop(U),this._carrier.stop(U)}_restart(U){this._modulator.restart(U),this._carrier.restart(U)}get type(){return this._carrier.type}set type(U){this._carrier.type=U}get baseType(){return this._carrier.baseType}set baseType(U){this._carrier.baseType=U}get partialCount(){return this._carrier.partialCount}set partialCount(U){this._carrier.partialCount=U}get modulationType(){return this._modulator.type}set modulationType(U){this._modulator.type=U}get phase(){return this._carrier.phase}set phase(U){this._carrier.phase=U,this._modulator.phase=U}get partials(){return this._carrier.partials}set partials(U){this._carrier.partials=U}asArray(U=1024){return S(this,void 0,void 0,(function*(){return ce(this,U)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class me extends ne{constructor(){super(q(me.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Mt({context:this.context,gain:0});const U=q(me.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new he({context:this.context,detune:U.detune,frequency:0,onstop:()=>this.onstop(this),phase:U.phase,type:U.type}),this.detune=this._carrier.detune,this.frequency=new Rt({context:this.context,units:"frequency",value:U.frequency}),this._modulator=new he({context:this.context,phase:U.phase,type:U.modulationType}),this.harmonicity=new fe({context:this.context,units:"positive",value:U.harmonicity}),this.modulationIndex=new fe({context:this.context,units:"positive",value:U.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),$(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(he.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(U){this._modulator.start(U),this._carrier.start(U)}_stop(U){this._modulator.stop(U),this._carrier.stop(U)}_restart(U){return this._modulator.restart(U),this._carrier.restart(U),this}get type(){return this._carrier.type}set type(U){this._carrier.type=U}get baseType(){return this._carrier.baseType}set baseType(U){this._carrier.baseType=U}get partialCount(){return this._carrier.partialCount}set partialCount(U){this._carrier.partialCount=U}get modulationType(){return this._modulator.type}set modulationType(U){this._modulator.type=U}get phase(){return this._carrier.phase}set phase(U){this._carrier.phase=U,this._modulator.phase=U}get partials(){return this._carrier.partials}set partials(U){this._carrier.partials=U}asArray(U=1024){return S(this,void 0,void 0,(function*(){return ce(this,U)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class ge extends ne{constructor(){super(q(ge.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Mt({context:this.context,gain:0}),this._thresh=new de({context:this.context,mapping:U=>U<=0?-1:1});const U=q(ge.getDefaults(),arguments,["frequency","width"]);this.width=new Rt({context:this.context,units:"audioRange",value:U.width}),this._triangle=new he({context:this.context,detune:U.detune,frequency:U.frequency,onstop:()=>this.onstop(this),phase:U.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),$(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ne.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(U){U=this.toSeconds(U),this._triangle.start(U),this._widthGate.gain.setValueAtTime(1,U)}_stop(U){U=this.toSeconds(U),this._triangle.stop(U),this._widthGate.gain.cancelScheduledValues(U),this._widthGate.gain.setValueAtTime(0,U)}_restart(U){this._triangle.restart(U),this._widthGate.gain.cancelScheduledValues(U),this._widthGate.gain.setValueAtTime(1,U)}get phase(){return this._triangle.phase}set phase(U){this._triangle.phase=U}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(U){this._triangle.type=U}asArray(U=1024){return S(this,void 0,void 0,(function*(){return ce(this,U)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class ve extends ne{constructor(){super(q(ve.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const U=q(ve.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Rt({context:this.context,units:"frequency",value:U.frequency}),this.detune=new Rt({context:this.context,units:"cents",value:U.detune}),this._spread=U.spread,this._type=U.type,this._phase=U.phase,this._partials=U.partials,this._partialCount=U.partialCount,this.count=U.count,$(this,["frequency","detune"])}static getDefaults(){return Object.assign(he.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(U){U=this.toSeconds(U),this._forEach((Y=>Y.start(U)))}_stop(U){U=this.toSeconds(U),this._forEach((Y=>Y.stop(U)))}_restart(U){this._forEach((Y=>Y.restart(U)))}_forEach(U){for(let Y=0;Y<this._oscillators.length;Y++)U(this._oscillators[Y],Y)}get type(){return this._type}set type(U){this._type=U,this._forEach((Y=>Y.type=U))}get spread(){return this._spread}set spread(U){if(this._spread=U,this._oscillators.length>1){const Y=-U/2,nt=U/(this._oscillators.length-1);this._forEach(((U,st)=>U.detune.value=Y+nt*st))}}get count(){return this._oscillators.length}set count(U){if(a(U,1),this._oscillators.length!==U){this._forEach((U=>U.dispose())),this._oscillators=[];for(let Y=0;Y<U;Y++){const nt=new he({context:this.context,volume:-6-1.1*U,type:this._type,phase:this._phase+Y/U*360,partialCount:this._partialCount,onstop:0===Y?()=>this.onstop(this):K});"custom"===this.type&&(nt.partials=this._partials),this.frequency.connect(nt.frequency),this.detune.connect(nt.detune),nt.detune.overridden=!1,nt.connect(this.output),this._oscillators[Y]=nt}this.spread=this._spread,"started"===this.state&&this._forEach((U=>U.start()))}}get phase(){return this._phase}set phase(U){this._phase=U,this._forEach((Y=>Y.phase=U))}get baseType(){return this._oscillators[0].baseType}set baseType(U){this._forEach((Y=>Y.baseType=U)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(U){this._partials=U,this._partialCount=this._partials.length,U.length&&(this._type="custom",this._forEach((Y=>Y.partials=U)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(U){this._partialCount=U,this._forEach((Y=>Y.partialCount=U)),this._type=this._oscillators[0].type}asArray(U=1024){return S(this,void 0,void 0,(function*(){return ce(this,U)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((U=>U.dispose())),this}}class ye extends ne{constructor(){super(q(ye.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new fe({context:this.context,value:2});const U=q(ye.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new ge({context:this.context,frequency:U.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new he({context:this.context,detune:U.detune,frequency:U.frequency,onstop:()=>this.onstop(this),phase:U.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),$(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ne.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(U){U=this.toSeconds(U),this._modulator.start(U),this._pulse.start(U)}_stop(U){U=this.toSeconds(U),this._modulator.stop(U),this._pulse.stop(U)}_restart(U){this._modulator.restart(U),this._pulse.restart(U)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(U){this._modulator.phase=U}asArray(U=1024){return S(this,void 0,void 0,(function*(){return ce(this,U)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Fs={am:_e,fat:ve,fm:me,oscillator:he,pulse:ge,pwm:ye};class xe extends ne{constructor(){super(q(xe.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const U=q(xe.getDefaults(),arguments,["frequency","type"]);this.frequency=new Rt({context:this.context,units:"frequency",value:U.frequency}),this.detune=new Rt({context:this.context,units:"cents",value:U.detune}),$(this,["frequency","detune"]),this.set(U)}static getDefaults(){return Object.assign(he.getDefaults(),me.getDefaults(),_e.getDefaults(),ve.getDefaults(),ge.getDefaults(),ye.getDefaults())}_start(U){this._oscillator.start(U)}_stop(U){this._oscillator.stop(U)}_restart(U){return this._oscillator.restart(U),this}get type(){let U="";return["am","fm","fat"].some((U=>this._sourceType===U))&&(U=this._sourceType),U+this._oscillator.type}set type(U){"fm"===U.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=U.substr(2)):"am"===U.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=U.substr(2)):"fat"===U.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=U.substr(3)):"pwm"===U?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===U?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=U)}get partials(){return this._oscillator.partials}set partials(U){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=U)}get partialCount(){return this._oscillator.partialCount}set partialCount(U){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=U)}set(U){return Reflect.has(U,"type")&&U.type&&(this.type=U.type),super.set(U),this}_createNewOscillator(U){if(U!==this._sourceType){this._sourceType=U;const Y=Fs[U],nt=this.now();if(this._oscillator){const U=this._oscillator;U.stop(nt),this.context.setTimeout((()=>U.dispose()),this.blockTime)}this._oscillator=new Y({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(nt)}}get phase(){return this._oscillator.phase}set phase(U){this._oscillator.phase=U}get sourceType(){return this._sourceType}set sourceType(U){let Y="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(Y=this._oscillator.type),"fm"===U?this.type="fm"+Y:"am"===U?this.type="am"+Y:"fat"===U?this.type="fat"+Y:"oscillator"===U?this.type=Y:"pulse"===U?this.type="pulse":"pwm"===U&&(this.type="pwm")}_getOscType(U,Y){return U instanceof Fs[Y]}get baseType(){return this._oscillator.baseType}set baseType(U){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===U||"pwm"===U||(this._oscillator.baseType=U)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(U){this._getOscType(this._oscillator,"fat")&&m(U)&&(this._oscillator.count=U)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(U){this._getOscType(this._oscillator,"fat")&&m(U)&&(this._oscillator.spread=U)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(U){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&b(U)&&(this._oscillator.modulationType=U)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(U=1024){return S(this,void 0,void 0,(function*(){return ce(this,U)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class we extends Rt{constructor(){super(Object.assign(q(we.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Mt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,kt(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Te extends le{constructor(){super(Object.assign(q(Te.getDefaults(),arguments,["min","max"]))),this.name="Scale";const U=q(Te.getDefaults(),arguments,["min","max"]);this._mult=this.input=new fe({context:this.context,value:U.max-U.min}),this._add=this.output=new we({context:this.context,value:U.min}),this._min=U.min,this._max=U.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(le.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(U){this._min=U,this._setRange()}get max(){return this._max}set max(U){this._max=U,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Oe extends le{constructor(){super(Object.assign(q(Oe.getDefaults(),arguments))),this.name="Zero",this._gain=new Mt({context:this.context}),this.output=this._gain,this.input=void 0,At(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Dt(this.context.getConstant(0),this._gain),this}}class Se extends Ct{constructor(){super(q(Se.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=St.prototype._fromType,this._toType=St.prototype._toType,this._is=St.prototype._is,this._clampValue=St.prototype._clampValue;const U=q(Se.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new he({context:this.context,frequency:U.frequency,type:U.type}),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Mt({context:this.context,gain:U.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Rt({context:this.context,units:"audioRange",value:0}),this._zeros=new Oe({context:this.context}),this._a2g=new pe({context:this.context}),this._scaler=this.output=new Te({context:this.context,max:U.max,min:U.min}),this.units=U.units,this.min=U.min,this.max=U.max,this._oscillator.chain(this._a2g,this._amplitudeGain,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),$(this,["amplitude","frequency"]),this.phase=U.phase}static getDefaults(){return Object.assign(Ct.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,phase:0,type:"sine",units:"number"})}start(U){return U=this.toSeconds(U),this._stoppedSignal.setValueAtTime(0,U),this._oscillator.start(U),this}stop(U){return U=this.toSeconds(U),this._stoppedSignal.setValueAtTime(this._stoppedValue,U),this._oscillator.stop(U),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}get min(){return this._toType(this._scaler.min)}set min(U){U=this._fromType(U),this._scaler.min=U}get max(){return this._toType(this._scaler.max)}set max(U){U=this._fromType(U),this._scaler.max=U}get type(){return this._oscillator.type}set type(U){this._oscillator.type=U,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get phase(){return this._oscillator.phase}set phase(U){this._oscillator.phase=U,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get units(){return this._units}set units(U){const Y=this.min,nt=this.max;this._units=U,this.min=Y,this.max=nt}get state(){return this._oscillator.state}connect(U,Y,nt){return(U instanceof St||U instanceof Rt)&&(this.convert=U.convert,this.units=U.units),qt(this,U,Y,nt),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Ce(U,Y=1/0){const nt=new WeakMap;return function(st,ht){Reflect.defineProperty(st,ht,{configurable:!0,enumerable:!0,get:function(){return nt.get(this)},set:function(st){a(st,U,Y),nt.set(this,st)}})}}function ke(U,Y=1/0){const nt=new WeakMap;return function(st,ht){Reflect.defineProperty(st,ht,{configurable:!0,enumerable:!0,get:function(){return nt.get(this)},set:function(st){a(this.toSeconds(st),U,Y),nt.set(this,st)}})}}class Ae extends ne{constructor(){super(q(Ae.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const U=q(Ae.getDefaults(),arguments,["url","onload"]);this._buffer=new tt({onload:this._onload.bind(this,U.onload),onerror:U.onerror,reverse:U.reverse,url:U.url}),this.autostart=U.autostart,this._loop=U.loop,this._loopStart=U.loopStart,this._loopEnd=U.loopEnd,this._playbackRate=U.playbackRate,this.fadeIn=U.fadeIn,this.fadeOut=U.fadeOut}static getDefaults(){return Object.assign(ne.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:K,onerror:K,playbackRate:1,reverse:!1})}load(U){return S(this,void 0,void 0,(function*(){return yield this._buffer.load(U),this._onload(),this}))}_onload(U=K){U(),this.autostart&&this.start()}_onSourceEnd(U){this.onstop(this),this._activeSources.delete(U),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||this._state.setStateAtTime("stopped",this.now())}start(U,Y,nt){return super.start(U,Y,nt),this}_start(U,Y,nt){Y=this._loop?I(Y,this._loopStart):I(Y,0);let st=this.toSeconds(Y);this._synced&&(st*=this._playbackRate);const ht=nt;nt=I(nt,Math.max(this._buffer.duration-st,0));let vt=this.toSeconds(nt);vt/=this._playbackRate,U=this.toSeconds(U);const yt=new se({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(U+vt),this._state.setStateAtTime("stopped",U+vt,{implicitEnd:!0})),this._activeSources.add(yt),this._loop&&p(ht)?yt.start(U,st):yt.start(U,st,vt-this.toSeconds(this.fadeOut))}_stop(U){const Y=this.toSeconds(U);this._activeSources.forEach((U=>U.stop(Y)))}restart(U,Y,nt){return super.restart(U,Y,nt),this}_restart(U,Y,nt){this._stop(U),this._start(U,Y,nt)}seek(U,Y){const nt=this.toSeconds(Y);if("started"===this._state.getValueAtTime(nt)){const Y=this.toSeconds(U);this._stop(nt),this._start(nt,Y)}return this}setLoopPoints(U,Y){return this.loopStart=U,this.loopEnd=Y,this}get loopStart(){return this._loopStart}set loopStart(U){this._loopStart=U,this.buffer.loaded&&a(this.toSeconds(U),0,this.buffer.duration),this._activeSources.forEach((Y=>{Y.loopStart=U}))}get loopEnd(){return this._loopEnd}set loopEnd(U){this._loopEnd=U,this.buffer.loaded&&a(this.toSeconds(U),0,this.buffer.duration),this._activeSources.forEach((Y=>{Y.loopEnd=U}))}get buffer(){return this._buffer}set buffer(U){this._buffer.set(U)}get loop(){return this._loop}set loop(U){if(this._loop!==U&&(this._loop=U,this._activeSources.forEach((Y=>{Y.loop=U})),U)){const U=this._state.getNextState("stopped",this.now());U&&this._state.cancel(U.time)}}get playbackRate(){return this._playbackRate}set playbackRate(U){this._playbackRate=U;const Y=this.now(),nt=this._state.getNextState("stopped",Y);nt&&nt.implicitEnd&&(this._state.cancel(nt.time),this._activeSources.forEach((U=>U.cancelStop()))),this._activeSources.forEach((nt=>{nt.playbackRate.setValueAtTime(U,Y)}))}get reverse(){return this._buffer.reverse}set reverse(U){this._buffer.reverse=U}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((U=>U.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}O([ke(0)],Ae.prototype,"fadeIn",void 0),O([ke(0)],Ae.prototype,"fadeOut",void 0);class De extends Ct{constructor(){super(q(De.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const U=q(De.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Zt({context:this.context,volume:U.volume}),this.volume=this._volume.volume,$(this,"volume"),this._buffers=new $t({urls:U.urls,onload:U.onload,baseUrl:U.baseUrl,onerror:U.onerror}),this.mute=U.mute,this._fadeIn=U.fadeIn,this._fadeOut=U.fadeOut}static getDefaults(){return Object.assign(ne.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:K,onerror:K,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(U){this._volume.mute=U}get fadeIn(){return this._fadeIn}set fadeIn(U){this._fadeIn=U,this._players.forEach((Y=>{Y.fadeIn=U}))}get fadeOut(){return this._fadeOut}set fadeOut(U){this._fadeOut=U,this._players.forEach((Y=>{Y.fadeOut=U}))}get state(){return Array.from(this._players).some((([U,Y])=>"started"===Y.state))?"started":"stopped"}has(U){return this._buffers.has(U)}player(U){if(r(this.has(U),`No Player with the name ${U} exists on this object`),!this._players.has(U)){const Y=new Ae({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(U)}).connect(this.output);this._players.set(U,Y)}return this._players.get(U)}get loaded(){return this._buffers.loaded}add(U,Y,nt){return r(!this._buffers.has(U),"A buffer with that name already exists on this object"),this._buffers.add(U,Y,nt),this}stopAll(U){return this._players.forEach((Y=>Y.stop(U))),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach((U=>U.dispose())),this._buffers.dispose(),this}}class Me extends ne{constructor(){super(q(Me.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const U=q(Me.getDefaults(),arguments,["url","onload"]);this.buffer=new tt({onload:U.onload,onerror:U.onerror,reverse:U.reverse,url:U.url}),this._clock=new Nt({context:this.context,callback:this._tick.bind(this),frequency:1/U.grainSize}),this._playbackRate=U.playbackRate,this._grainSize=U.grainSize,this._overlap=U.overlap,this.detune=U.detune,this.overlap=U.overlap,this.loop=U.loop,this.playbackRate=U.playbackRate,this.grainSize=U.grainSize,this.loopStart=U.loopStart,this.loopEnd=U.loopEnd,this.reverse=U.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(ne.getDefaults(),{onload:K,onerror:K,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(U,Y,nt){Y=I(Y,0),Y=this.toSeconds(Y),U=this.toSeconds(U);const st=1/this._clock.frequency.getValueAtTime(U);this._clock.start(U,Y/st),nt&&this.stop(U+this.toSeconds(nt))}restart(U,Y,nt){return super.restart(U,Y,nt),this}_restart(U,Y,nt){this._stop(U),this._start(U,Y,nt)}_stop(U){this._clock.stop(U)}_onstop(U){this._activeSources.forEach((Y=>{Y.fadeOut=0,Y.stop(U)})),this.onstop(this)}_tick(U){const Y=this._clock.getTicksAtTime(U),nt=Y*this._grainSize;if(this.log("offset",nt),!this.loop&&nt>this.buffer.duration)return void this.stop(U);const st=nt<this._overlap?0:this._overlap,ht=new se({context:this.context,url:this.buffer,fadeIn:st,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:ut(this.detune/100)}).connect(this.output);ht.start(U,this._grainSize*Y),ht.stop(U+this._grainSize/this.playbackRate),this._activeSources.push(ht),ht.onended=()=>{const U=this._activeSources.indexOf(ht);-1!==U&&this._activeSources.splice(U,1)}}get playbackRate(){return this._playbackRate}set playbackRate(U){a(U,.001),this._playbackRate=U,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(U){this.buffer.loaded&&a(this.toSeconds(U),0,this.buffer.duration),this._loopStart=this.toSeconds(U)}get loopEnd(){return this._loopEnd}set loopEnd(U){this.buffer.loaded&&a(this.toSeconds(U),0,this.buffer.duration),this._loopEnd=this.toSeconds(U)}get reverse(){return this.buffer.reverse}set reverse(U){this.buffer.reverse=U}get grainSize(){return this._grainSize}set grainSize(U){this._grainSize=this.toSeconds(U),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(U){const Y=this.toSeconds(U);a(Y,0),this._overlap=Y}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((U=>U.dispose())),this}}class je extends le{constructor(){super(...arguments),this.name="Abs",this._abs=new de({context:this.context,mapping:U=>Math.abs(U)<.001?0:Math.abs(U)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class Ee extends le{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new de({context:this.context,mapping:U=>2*Math.abs(U)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Re extends le{constructor(){super(...arguments),this.name="Negate",this._multiply=new fe({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class qe extends Rt{constructor(){super(Object.assign(q(qe.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new Mt({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Re({context:this.context}),this.subtrahend=this._param,kt(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class Ie extends le{constructor(){super(Object.assign(q(Ie.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new de({context:this.context,length:127,mapping:U=>U<=0?0:1}),this._scale=this.input=new fe({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class Fe extends Rt{constructor(){super(Object.assign(q(Fe.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const U=q(Fe.getDefaults(),arguments,["value"]);this._subtract=this.input=new qe({context:this.context,value:U.value}),this._gtz=this.output=new Ie({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,$(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Ve extends le{constructor(){super(Object.assign(q(Ve.getDefaults(),arguments,["value"]))),this.name="Pow";const U=q(Ve.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new de({context:this.context,mapping:this._expFunc(U.value),length:8192}),this._exponent=U.value}static getDefaults(){return Object.assign(le.getDefaults(),{value:1})}_expFunc(U){return Y=>Math.pow(Math.abs(Y),U)}get value(){return this._exponent}set value(U){this._exponent=U,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ne extends Te{constructor(){super(Object.assign(q(Ne.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const U=q(Ne.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new Ve({context:this.context,value:U.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Te.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(U){this._exp.value=U}dispose(){return super.dispose(),this._exp.dispose(),this}}class Pe extends Rt{constructor(){super(q(Rt.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const U=q(Rt.getDefaults(),arguments,["value","units"]);this._lastVal=U.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new Et({context:this.context,offset:U.value,units:U.units}).start(0),this.setValueAtTime(U.value,0)}_onTick(U){const Y=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==Y&&(this._lastVal=Y,this._constantSource.offset.setValueAtTime(Y,U))}_anchorValue(U){const Y=super.getValueAtTime(this.context.transport.seconds);this._lastVal=Y,this._constantSource.offset.cancelAndHoldAtTime(U),this._constantSource.offset.setValueAtTime(Y,U)}getValueAtTime(U){const Y=new xt(this.context,U).toSeconds();return super.getValueAtTime(Y)}setValueAtTime(U,Y){const nt=new xt(this.context,Y).toSeconds();return super.setValueAtTime(U,nt),this}linearRampToValueAtTime(U,Y){const nt=new xt(this.context,Y).toSeconds();return super.linearRampToValueAtTime(U,nt),this}exponentialRampToValueAtTime(U,Y){const nt=new xt(this.context,Y).toSeconds();return super.exponentialRampToValueAtTime(U,nt),this}setTargetAtTime(U,Y,nt){const st=new xt(this.context,Y).toSeconds();return super.setTargetAtTime(U,st,nt),this}cancelScheduledValues(U){const Y=new xt(this.context,U).toSeconds();return super.cancelScheduledValues(Y),this}setValueCurveAtTime(U,Y,nt,st){const ht=new xt(this.context,Y).toSeconds();return nt=this.toSeconds(nt),super.setValueCurveAtTime(U,ht,nt,st),this}cancelAndHoldAtTime(U){const Y=new xt(this.context,U).toSeconds();return super.cancelAndHoldAtTime(Y),this}setRampPoint(U){const Y=new xt(this.context,U).toSeconds();return super.setRampPoint(Y),this}exponentialRampTo(U,Y,nt){const st=new xt(this.context,nt).toSeconds();return super.exponentialRampTo(U,Y,st),this}linearRampTo(U,Y,nt){const st=new xt(this.context,nt).toSeconds();return super.linearRampTo(U,Y,st),this}targetRampTo(U,Y,nt){const st=new xt(this.context,nt).toSeconds();return super.targetRampTo(U,Y,st),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Le extends Ct{constructor(){super(q(Le.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Rt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const U=q(Le.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=U.attack,this.decay=U.decay,this.sustain=U.sustain,this.release=U.release,this.attackCurve=U.attackCurve,this.releaseCurve=U.releaseCurve,this.decayCurve=U.decayCurve}static getDefaults(){return Object.assign(Ct.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(U,Y){if(b(U))return U;{let nt;for(nt in Ns)if(Ns[nt][Y]===U)return nt;return U}}_setCurve(U,Y,nt){if(b(nt)&&Reflect.has(Ns,nt)){const st=Ns[nt];g(st)?"_decayCurve"!==U&&(this[U]=st[Y]):this[U]=st}else{if(!y(nt)||"_decayCurve"===U)throw new Error("Envelope: invalid curve: "+nt);this[U]=nt}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(U){this._setCurve("_attackCurve","In",U)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(U){this._setCurve("_releaseCurve","Out",U)}get decayCurve(){return this._decayCurve}set decayCurve(U){r(["linear","exponential"].some((Y=>Y===U)),"Invalid envelope curve: "+U),this._decayCurve=U}triggerAttack(U,Y=1){this.log("triggerAttack",U,Y),U=this.toSeconds(U);let nt=this.toSeconds(this.attack);const st=this.toSeconds(this.decay),ht=this.getValueAtTime(U);if(ht>0&&(nt=(1-ht)/(1/nt)),nt<this.sampleTime)this._sig.cancelScheduledValues(U),this._sig.setValueAtTime(Y,U);else if("linear"===this._attackCurve)this._sig.linearRampTo(Y,nt,U);else if("exponential"===this._attackCurve)this._sig.targetRampTo(Y,nt,U);else{this._sig.cancelAndHoldAtTime(U);let st=this._attackCurve;for(let U=1;U<st.length;U++)if(st[U-1]<=ht&&ht<=st[U]){st=this._attackCurve.slice(U),st[0]=ht;break}this._sig.setValueCurveAtTime(st,U,nt,Y)}if(st&&this.sustain<1){const ht=Y*this.sustain,vt=U+nt;this.log("decay",vt),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(ht,st+vt):this._sig.exponentialApproachValueAtTime(ht,vt,st)}return this}triggerRelease(U){this.log("triggerRelease",U),U=this.toSeconds(U);const Y=this.getValueAtTime(U);if(Y>0){const nt=this.toSeconds(this.release);nt<this.sampleTime?this._sig.setValueAtTime(0,U):"linear"===this._releaseCurve?this._sig.linearRampTo(0,nt,U):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,nt,U):(r(y(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(U),this._sig.setValueCurveAtTime(this._releaseCurve,U,nt,Y))}return this}getValueAtTime(U){return this._sig.getValueAtTime(U)}triggerAttackRelease(U,Y,nt=1){return Y=this.toSeconds(Y),this.triggerAttack(Y,nt),this.triggerRelease(Y+this.toSeconds(U)),this}cancel(U){return this._sig.cancelScheduledValues(this.toSeconds(U)),this}connect(U,Y=0,nt=0){return qt(this,U,Y,nt),this}asArray(U=1024){return S(this,void 0,void 0,(function*(){const Y=U/this.context.sampleRate,nt=new et(1,Y,this.context.sampleRate),st=this.toSeconds(this.attack)+this.toSeconds(this.decay),ht=st+this.toSeconds(this.release),vt=.1*ht,yt=ht+vt,ee=new this.constructor(Object.assign(this.get(),{attack:Y*this.toSeconds(this.attack)/yt,decay:Y*this.toSeconds(this.decay)/yt,release:Y*this.toSeconds(this.release)/yt,context:nt}));return ee._sig.toDestination(),ee.triggerAttackRelease(Y*(st+vt)/yt,0),(yield nt.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}O([ke(0)],Le.prototype,"attack",void 0),O([ke(0)],Le.prototype,"decay",void 0),O([Ce(0,1)],Le.prototype,"sustain",void 0),O([ke(0)],Le.prototype,"release",void 0);const Ns=(()=>{let U,Y;const nt=[];for(U=0;U<128;U++)nt[U]=Math.sin(U/127*(Math.PI/2));const st=[];for(U=0;U<127;U++){Y=U/127;const nt=Math.sin(Y*(2*Math.PI)*6.4-Math.PI/2)+1;st[U]=nt/10+.83*Y}st[127]=1;const ht=[];for(U=0;U<128;U++)ht[U]=Math.ceil(U/127*5)/5;const vt=[];for(U=0;U<128;U++)Y=U/127,vt[U]=.5*(1-Math.cos(Math.PI*Y));const yt=[];for(U=0;U<128;U++){Y=U/127;const nt=4*Math.pow(Y,3)+.2,st=Math.cos(nt*Math.PI*2*Y);yt[U]=Math.abs(st*(1-Y))}function a(U){const Y=new Array(U.length);for(let nt=0;nt<U.length;nt++)Y[nt]=1-U[nt];return Y}return{bounce:{In:a(yt),Out:yt},cosine:{In:nt,Out:(ee=nt,ee.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:st,Out:a(st)},sine:{In:vt,Out:a(vt)},step:{In:ht,Out:a(ht)}};var ee})();class Be extends Ct{constructor(){super(q(Be.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const U=q(Be.getDefaults(),arguments);this._volume=this.output=new Zt({context:this.context,volume:U.volume}),this.volume=this._volume.volume,$(this,"volume")}static getDefaults(){return Object.assign(Ct.getDefaults(),{volume:0})}sync(){return this._synced||(this._synced=!0,this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncMethod(U,Y){const nt=this["_original_"+U]=this[U];this[U]=(...U)=>{const st=U[Y],ht=this.context.transport.schedule((st=>{U[Y]=st,nt.apply(this,U)}),st);this._scheduledEvents.push(ht)}}unsync(){return this._scheduledEvents.forEach((U=>this.context.transport.clear(U))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(U,Y,nt,st){const ht=this.toSeconds(nt),vt=this.toSeconds(Y);return this.triggerAttack(U,ht,st),this.triggerRelease(ht+vt),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class We extends Be{constructor(){super(q(We.getDefaults(),arguments));const U=q(We.getDefaults(),arguments);this.portamento=U.portamento,this.onsilence=U.onsilence}static getDefaults(){return Object.assign(Be.getDefaults(),{detune:0,onsilence:K,portamento:0})}triggerAttack(U,Y,nt=1){this.log("triggerAttack",U,Y,nt);const st=this.toSeconds(Y);return this._triggerEnvelopeAttack(st,nt),this.setNote(U,st),this}triggerRelease(U){this.log("triggerRelease",U);const Y=this.toSeconds(U);return this._triggerEnvelopeRelease(Y),this}setNote(U,Y){const nt=this.toSeconds(Y),st=U instanceof gt?U.toFrequency():U;if(this.portamento>0&&this.getLevelAtTime(nt)>.05){const U=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(st,U,nt)}else this.frequency.setValueAtTime(st,nt);return this}}O([ke(0)],We.prototype,"portamento",void 0);class Ue extends Le{constructor(){super(q(Ue.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Mt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ge extends We{constructor(){super(q(Ge.getDefaults(),arguments)),this.name="Synth";const U=q(Ge.getDefaults(),arguments);this.oscillator=new xe(Object.assign({context:this.context,detune:U.detune,onstop:()=>this.onsilence(this)},U.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Ue(Object.assign({context:this.context},U.envelope)),this.oscillator.chain(this.envelope,this.output),$(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(We.getDefaults(),{envelope:Object.assign(F(Le.getDefaults(),Object.keys(Ct.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(F(xe.getDefaults(),[...Object.keys(ne.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(U,Y){if(this.envelope.triggerAttack(U,Y),this.oscillator.start(U),0===this.envelope.sustain){const Y=this.toSeconds(this.envelope.attack),nt=this.toSeconds(this.envelope.decay);this.oscillator.stop(U+Y+nt)}}_triggerEnvelopeRelease(U){this.envelope.triggerRelease(U),this.oscillator.stop(U+this.toSeconds(this.envelope.release))}getLevelAtTime(U){return U=this.toSeconds(U),this.envelope.getValueAtTime(U)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ye extends We{constructor(){super(q(Ye.getDefaults(),arguments)),this.name="ModulationSynth";const U=q(Ye.getDefaults(),arguments);this._carrier=new Ge({context:this.context,oscillator:U.oscillator,envelope:U.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Ge({context:this.context,oscillator:U.modulation,envelope:U.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Rt({context:this.context,units:"frequency"}),this.detune=new Rt({context:this.context,value:U.detune,units:"cents"}),this.harmonicity=new fe({context:this.context,value:U.harmonicity,minValue:0}),this._modulationNode=new Mt({context:this.context,gain:0}),$(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(We.getDefaults(),{harmonicity:3,oscillator:Object.assign(F(xe.getDefaults(),[...Object.keys(ne.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(F(Le.getDefaults(),Object.keys(Ct.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(F(xe.getDefaults(),[...Object.keys(ne.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(F(Le.getDefaults(),Object.keys(Ct.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(U,Y){this._carrier._triggerEnvelopeAttack(U,Y),this._modulator._triggerEnvelopeAttack(U,Y)}_triggerEnvelopeRelease(U){return this._carrier._triggerEnvelopeRelease(U),this._modulator._triggerEnvelopeRelease(U),this}getLevelAtTime(U){return U=this.toSeconds(U),this.envelope.getValueAtTime(U)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Qe extends Ye{constructor(){super(q(Qe.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new pe({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Ze extends Ct{constructor(){super(q(Ze.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const U=q(Ze.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new St({context:this.context,units:"number",value:U.Q,param:this._filter.Q}),this.frequency=new St({context:this.context,units:"frequency",value:U.frequency,param:this._filter.frequency}),this.detune=new St({context:this.context,units:"cents",value:U.detune,param:this._filter.detune}),this.gain=new St({context:this.context,units:"gain",value:U.gain,param:this._filter.gain}),this.type=U.type}static getDefaults(){return Object.assign(Ct.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(U){r(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(U),"Invalid filter type: "+U),this._filter.type=U}getFrequencyResponse(U=128){const Y=new Float32Array(U);for(let nt=0;nt<U;nt++){const st=19980*Math.pow(nt/U,2)+20;Y[nt]=st}const nt=new Float32Array(U),st=new Float32Array(U),ht=this.context.createBiquadFilter();return ht.type=this.type,ht.Q.value=this.Q.value,ht.frequency.value=this.frequency.value,ht.gain.value=this.gain.value,ht.getFrequencyResponse(Y,nt,st),nt}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Xe extends Ct{constructor(){super(q(Xe.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Mt({context:this.context}),this.output=new Mt({context:this.context}),this._filters=[];const U=q(Xe.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Rt({context:this.context,units:"positive",value:U.Q}),this.frequency=new Rt({context:this.context,units:"frequency",value:U.frequency}),this.detune=new Rt({context:this.context,units:"cents",value:U.detune}),this.gain=new Rt({context:this.context,units:"decibels",value:U.gain}),this._type=U.type,this.rolloff=U.rolloff,$(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(U){r(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(U),"Invalid filter type: "+U),this._type=U,this._filters.forEach((Y=>Y.type=U))}get rolloff(){return this._rolloff}set rolloff(U){const Y=m(U)?U:parseInt(U,10),nt=[-12,-24,-48,-96];let st=nt.indexOf(Y);r(-1!==st,"rolloff can only be "+nt.join(", ")),st+=1,this._rolloff=Y,this.input.disconnect(),this._filters.forEach((U=>U.disconnect())),this._filters=new Array(st);for(let U=0;U<st;U++){const Y=new Ze({context:this.context});Y.type=this._type,this.frequency.connect(Y.frequency),this.detune.connect(Y.detune),this.Q.connect(Y.Q),this.gain.connect(Y.gain),this._filters[U]=Y}this._internalChannels=this._filters,kt(this.input,...this._internalChannels,this.output)}getFrequencyResponse(U=128){const Y=new Ze({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),nt=new Float32Array(U).map((()=>1));return this._filters.forEach((()=>{Y.getFrequencyResponse(U).forEach(((U,Y)=>nt[Y]*=U))})),Y.dispose(),nt}dispose(){return super.dispose(),this._filters.forEach((U=>{U.dispose()})),J(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class He extends Le{constructor(){super(q(He.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const U=q(He.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=U.octaves,this._baseFrequency=this.toFrequency(U.baseFrequency),this._exponent=this.input=new Ve({context:this.context,value:U.exponent}),this._scale=this.output=new Te({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Le.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(U){const Y=this.toFrequency(U);a(Y,0),this._baseFrequency=Y,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(U){a(U,0),this._octaves=U,this._scale.max=this._baseFrequency*Math.pow(2,U)}get exponent(){return this._exponent.value}set exponent(U){this._exponent.value=U}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class $e extends We{constructor(){super(q($e.getDefaults(),arguments)),this.name="MonoSynth";const U=q($e.getDefaults(),arguments);this.oscillator=new xe(Object.assign(U.oscillator,{context:this.context,detune:U.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Xe(Object.assign(U.filter,{context:this.context})),this.filterEnvelope=new He(Object.assign(U.filterEnvelope,{context:this.context})),this.envelope=new Ue(Object.assign(U.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),$(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(We.getDefaults(),{envelope:Object.assign(F(Le.getDefaults(),Object.keys(Ct.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(F(Xe.getDefaults(),Object.keys(Ct.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(F(He.getDefaults(),Object.keys(Ct.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(F(xe.getDefaults(),Object.keys(ne.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(U,Y=1){if(this.envelope.triggerAttack(U,Y),this.filterEnvelope.triggerAttack(U),this.oscillator.start(U),0===this.envelope.sustain){const Y=this.toSeconds(this.envelope.attack),nt=this.toSeconds(this.envelope.decay);this.oscillator.stop(U+Y+nt)}}_triggerEnvelopeRelease(U){this.envelope.triggerRelease(U),this.filterEnvelope.triggerRelease(U),this.oscillator.stop(U+this.toSeconds(this.envelope.release))}getLevelAtTime(U){return U=this.toSeconds(U),this.envelope.getValueAtTime(U)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Je extends We{constructor(){super(q(Je.getDefaults(),arguments)),this.name="DuoSynth";const U=q(Je.getDefaults(),arguments);this.voice0=new $e(Object.assign(U.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new $e(Object.assign(U.voice1,{context:this.context})),this.harmonicity=new fe({context:this.context,units:"positive",value:U.harmonicity}),this._vibrato=new Se({frequency:U.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Mt({context:this.context,units:"normalRange",gain:U.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Rt({context:this.context,units:"frequency",value:440}),this.detune=new Rt({context:this.context,units:"cents",value:U.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),$(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(U){return U=this.toSeconds(U),this.voice0.envelope.getValueAtTime(U)+this.voice1.envelope.getValueAtTime(U)}static getDefaults(){return R(We.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:R(F($e.getDefaults(),Object.keys(We.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:R(F($e.getDefaults(),Object.keys(We.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(U,Y){this.voice0._triggerEnvelopeAttack(U,Y),this.voice1._triggerEnvelopeAttack(U,Y)}_triggerEnvelopeRelease(U){return this.voice0._triggerEnvelopeRelease(U),this.voice1._triggerEnvelopeRelease(U),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Ke extends Ye{constructor(){super(q(Ke.getDefaults(),arguments)),this.name="FMSynth";const U=q(Ke.getDefaults(),arguments);this.modulationIndex=new fe({context:this.context,value:U.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Ye.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const Ps=[1,1.483,1.932,2.546,2.63,3.897];class en extends We{constructor(){super(q(en.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const U=q(en.getDefaults(),arguments);this.detune=new Rt({context:this.context,units:"cents",value:U.detune}),this.frequency=new Rt({context:this.context,units:"frequency"}),this._amplitude=new Mt({context:this.context,gain:0}).connect(this.output),this._highpass=new Xe({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let Y=0;Y<Ps.length;Y++){const nt=new me({context:this.context,harmonicity:U.harmonicity,modulationIndex:U.modulationIndex,modulationType:"square",onstop:0===Y?()=>this.onsilence(this):K,type:"square"});nt.connect(this._highpass),this._oscillators[Y]=nt;const st=new fe({context:this.context,value:Ps[Y]});this._freqMultipliers[Y]=st,this.frequency.chain(st,nt.frequency),this.detune.connect(nt.detune)}this._filterFreqScaler=new Te({context:this.context,max:7e3,min:this.toFrequency(U.resonance)}),this.envelope=new Le({attack:U.envelope.attack,attackCurve:"linear",context:this.context,decay:U.envelope.decay,release:U.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=U.octaves,this.octaves=U.octaves}static getDefaults(){return R(We.getDefaults(),{envelope:Object.assign(F(Le.getDefaults(),Object.keys(Ct.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(U,Y=1){return this.envelope.triggerAttack(U,Y),this._oscillators.forEach((Y=>Y.start(U))),0===this.envelope.sustain&&this._oscillators.forEach((Y=>{Y.stop(U+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))})),this}_triggerEnvelopeRelease(U){return this.envelope.triggerRelease(U),this._oscillators.forEach((Y=>Y.stop(U+this.toSeconds(this.envelope.release)))),this}getLevelAtTime(U){return U=this.toSeconds(U),this.envelope.getValueAtTime(U)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(U){this._oscillators.forEach((Y=>Y.modulationIndex.value=U))}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(U){this._oscillators.forEach((Y=>Y.harmonicity.value=U))}get resonance(){return this._filterFreqScaler.min}set resonance(U){this._filterFreqScaler.min=this.toFrequency(U),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(U){this._octaves=U,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,U)}dispose(){return super.dispose(),this._oscillators.forEach((U=>U.dispose())),this._freqMultipliers.forEach((U=>U.dispose())),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class nn extends Ge{constructor(){super(q(nn.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const U=q(nn.getDefaults(),arguments);this.pitchDecay=U.pitchDecay,this.octaves=U.octaves,$(this,["oscillator","envelope"])}static getDefaults(){return R(We.getDefaults(),Ge.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(U,Y){const nt=this.toSeconds(Y),st=this.toFrequency(U instanceof gt?U.toFrequency():U),ht=st*this.octaves;return this.oscillator.frequency.setValueAtTime(ht,nt),this.oscillator.frequency.exponentialRampToValueAtTime(st,nt+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}O([Ce(0)],nn.prototype,"octaves",void 0),O([ke(0)],nn.prototype,"pitchDecay",void 0);class sn extends Be{constructor(){super(q(sn.getDefaults(),arguments)),this.name="NoiseSynth";const U=q(sn.getDefaults(),arguments);this.noise=new ie(Object.assign({context:this.context},U.noise)),this.envelope=new Ue(Object.assign({context:this.context},U.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Be.getDefaults(),{envelope:Object.assign(F(Le.getDefaults(),Object.keys(Ct.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(F(ie.getDefaults(),Object.keys(ne.getDefaults())),{type:"white"})})}triggerAttack(U,Y=1){return U=this.toSeconds(U),this.envelope.triggerAttack(U,Y),this.noise.start(U),0===this.envelope.sustain&&this.noise.stop(U+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(U){return U=this.toSeconds(U),this.envelope.triggerRelease(U),this.noise.stop(U+this.toSeconds(this.envelope.release)),this}sync(){return this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0),this}triggerAttackRelease(U,Y,nt=1){return Y=this.toSeconds(Y),U=this.toSeconds(U),this.triggerAttack(Y,nt),this.triggerRelease(Y+U),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const zs=new Set;function rn(U){zs.add(U)}function an(U,Y){const nt=`registerProcessor("${U}", ${Y})`;zs.add(nt)}class cn extends Ct{constructor(U){super(U),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=K;const Y=URL.createObjectURL(new Blob([Array.from(zs).join("\n")],{type:"text/javascript"})),nt=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(Y,nt).then((()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(nt,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))}))}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}rn('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),rn("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),rn("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),an("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class un extends cn{constructor(){super(q(un.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const U=q(un.getDefaults(),arguments,["delayTime","resonance"]);this.input=new Mt({context:this.context}),this.output=new Mt({context:this.context}),this.delayTime=new St({context:this.context,value:U.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new St({context:this.context,value:U.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),$(this,["resonance","delayTime"])}_audioWorkletName(){return"feedback-comb-filter"}static getDefaults(){return Object.assign(Ct.getDefaults(),{delayTime:.1,resonance:.5})}onReady(U){kt(this.input,U,this.output);const Y=U.parameters.get("delayTime");this.delayTime.setParam(Y);const nt=U.parameters.get("feedback");this.resonance.setParam(nt)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class hn extends Ct{constructor(){super(q(hn.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const U=q(hn.getDefaults(),arguments,["frequency","type"]);this._frequency=U.frequency,this._type=U.type,this.input=new Mt({context:this.context}),this.output=new Mt({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Ct.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const U=this._filter,Y=this.toFrequency(this._frequency),nt=1/(2*Math.PI*Y);if("lowpass"===this._type){const U=1/(nt*this.context.sampleRate),Y=U-1;this._filter=this.context.createIIRFilter([U,0],[1,Y])}else{const U=1/(nt*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,U])}this.input.chain(this._filter,this.output),U&&this.context.setTimeout((()=>{this.disposed||(this.input.disconnect(U),U.disconnect())}),this.blockTime)}get frequency(){return this._frequency}set frequency(U){this._frequency=U,this._createFilter()}get type(){return this._type}set type(U){this._type=U,this._createFilter()}getFrequencyResponse(U=128){const Y=new Float32Array(U);for(let nt=0;nt<U;nt++){const st=19980*Math.pow(nt/U,2)+20;Y[nt]=st}const nt=new Float32Array(U),st=new Float32Array(U);return this._filter.getFrequencyResponse(Y,nt,st),nt}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class ln extends Ct{constructor(){super(q(ln.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const U=q(ln.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new un({context:this.context,delayTime:U.delayTime,resonance:U.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new hn({context:this.context,frequency:U.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Ct.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(U){this._lowpass.frequency=U}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class dn extends Be{constructor(){super(q(dn.getDefaults(),arguments)),this.name="PluckSynth";const U=q(dn.getDefaults(),arguments);this._noise=new ie({context:this.context,type:"pink"}),this.attackNoise=U.attackNoise,this._lfcf=new ln({context:this.context,dampening:U.dampening,resonance:U.resonance}),this.resonance=U.resonance,this.release=U.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return R(Be.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(U){this._lfcf.dampening=U}triggerAttack(U,Y){const nt=this.toFrequency(U);Y=this.toSeconds(Y);const st=1/nt;return this._lfcf.delayTime.setValueAtTime(st,Y),this._noise.start(Y),this._noise.stop(Y+st*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(Y),this._lfcf.resonance.setValueAtTime(this.resonance,Y),this}triggerRelease(U){return this._lfcf.resonance.linearRampTo(0,this.release,U),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class pn extends Be{constructor(){super(q(pn.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const U=q(pn.getDefaults(),arguments,["voice","options"]);r(!m(U.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const Y=U.voice.getDefaults();this.options=Object.assign(Y,U.options),this.voice=U.voice,this.maxPolyphony=U.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const nt=this._voices.indexOf(this._dummyVoice);this._voices.splice(nt,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Be.getDefaults(),{maxPolyphony:32,options:{},voice:Ge})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(U){this._availableVoices.push(U);const Y=this._activeVoices.findIndex((Y=>Y.voice===U));this._activeVoices.splice(Y,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const U=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return U.connect(this.output),this._voices.push(U),U}d("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const U=this._availableVoices.shift(),Y=this._voices.indexOf(U);this._voices.splice(Y,1),this.context.isOffline||U.dispose()}}_triggerAttack(U,Y,nt){U.forEach((U=>{const st=new Jt(this.context,U).toMidi(),ht=this._getNextAvailableVoice();ht&&(ht.triggerAttack(U,Y,nt),this._activeVoices.push({midi:st,voice:ht,released:!1}),this.log("triggerAttack",U,Y))}))}_triggerRelease(U,Y){U.forEach((U=>{const nt=new Jt(this.context,U).toMidi(),st=this._activeVoices.find((({midi:U,released:Y})=>U===nt&&!Y));st&&(st.voice.triggerRelease(Y),st.released=!0,this.log("triggerRelease",U,Y))}))}_scheduleEvent(U,Y,nt,st){r(!this.disposed,"Synth was already disposed"),nt<=this.now()?"attack"===U?this._triggerAttack(Y,nt,st):this._triggerRelease(Y,nt):this.context.setTimeout((()=>{this._scheduleEvent(U,Y,nt,st)}),nt-this.now())}triggerAttack(U,Y,nt){Array.isArray(U)||(U=[U]);const st=this.toSeconds(Y);return this._scheduleEvent("attack",U,st,nt),this}triggerRelease(U,Y){Array.isArray(U)||(U=[U]);const nt=this.toSeconds(Y);return this._scheduleEvent("release",U,nt),this}triggerAttackRelease(U,Y,nt,st){const ht=this.toSeconds(nt);if(this.triggerAttack(U,ht,st),y(Y)){r(y(U),"If the duration is an array, the notes must also be an array");for(let nt=0;nt<U.length;nt++){const st=Y[Math.min(nt,Y.length-1)],vt=this.toSeconds(st);r(vt>0,"The duration must be greater than 0"),this.triggerRelease(U[nt],ht+vt)}}else{const nt=this.toSeconds(Y);r(nt>0,"The duration must be greater than 0"),this.triggerRelease(U,ht+nt)}return this}sync(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this}set(U){const Y=F(U,["onsilence","context"]);return this.options=R(this.options,Y),this._voices.forEach((U=>U.set(Y))),this._dummyVoice.set(Y),this}get(){return this._dummyVoice.get()}releaseAll(U){const Y=this.toSeconds(U);return this._activeVoices.forEach((({voice:U})=>{U.triggerRelease(Y)})),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach((U=>U.dispose())),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class fn extends Be{constructor(){super(q(fn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const U=q(fn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),Y={};Object.keys(U.urls).forEach((nt=>{const st=parseInt(nt,10);if(r(x(nt)||m(st)&&isFinite(st),"url key is neither a note or midi pitch: "+nt),x(nt)){const st=new gt(this.context,nt).toMidi();Y[st]=U.urls[nt]}else m(st)&&isFinite(st)&&(Y[st]=U.urls[st])})),this._buffers=new $t({urls:Y,onload:U.onload,baseUrl:U.baseUrl,onerror:U.onerror}),this.attack=U.attack,this.release=U.release,this.curve=U.curve,this._buffers.loaded&&Promise.resolve().then(U.onload)}static getDefaults(){return Object.assign(Be.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:K,onerror:K,release:.1,urls:{}})}_findClosest(U){let Y=0;for(;Y<96;){if(this._buffers.has(U+Y))return-Y;if(this._buffers.has(U-Y))return Y;Y++}throw new Error("No available buffers for note: "+U)}triggerAttack(U,Y,nt=1){return this.log("triggerAttack",U,Y,nt),Array.isArray(U)||(U=[U]),U.forEach((U=>{const st=dt(new gt(this.context,U).toFrequency()),ht=Math.round(st),vt=st-ht,yt=this._findClosest(ht),ee=ht-yt,oe=this._buffers.get(ee),re=ut(yt+vt),be=new se({url:oe,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:re}).connect(this.output);be.start(Y,0,oe.duration/re,nt),y(this._activeSources.get(ht))||this._activeSources.set(ht,[]),this._activeSources.get(ht).push(be),be.onended=()=>{if(this._activeSources&&this._activeSources.has(ht)){const U=this._activeSources.get(ht),Y=U.indexOf(be);-1!==Y&&U.splice(Y,1)}}})),this}triggerRelease(U,Y){return this.log("triggerRelease",U,Y),Array.isArray(U)||(U=[U]),U.forEach((U=>{const nt=new gt(this.context,U).toMidi();if(this._activeSources.has(nt)&&this._activeSources.get(nt).length){const U=this._activeSources.get(nt);Y=this.toSeconds(Y),U.forEach((U=>{U.stop(Y)})),this._activeSources.set(nt,[])}})),this}releaseAll(U){const Y=this.toSeconds(U);return this._activeSources.forEach((U=>{for(;U.length;)U.shift().stop(Y)})),this}sync(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this}triggerAttackRelease(U,Y,nt,st=1){const ht=this.toSeconds(nt);return this.triggerAttack(U,ht,st),y(Y)?(r(y(U),"notes must be an array when duration is array"),U.forEach(((U,nt)=>{const st=Y[Math.min(nt,Y.length-1)];this.triggerRelease(U,ht+this.toSeconds(st))}))):this.triggerRelease(U,ht+this.toSeconds(Y)),this}add(U,Y,nt){if(r(x(U)||isFinite(U),"note must be a pitch or midi: "+U),x(U)){const st=new gt(this.context,U).toMidi();this._buffers.add(st,Y,nt)}else this._buffers.add(U,Y,nt);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((U=>{U.forEach((U=>U.dispose()))})),this._activeSources.clear(),this}}O([ke(0)],fn.prototype,"attack",void 0),O([ke(0)],fn.prototype,"release",void 0);class _n extends Tt{constructor(){super(q(_n.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new Ot("stopped"),this._startOffset=0;const U=q(_n.getDefaults(),arguments,["callback","value"]);this._loop=U.loop,this.callback=U.callback,this.value=U.value,this._loopStart=this.toTicks(U.loopStart),this._loopEnd=this.toTicks(U.loopEnd),this._playbackRate=U.playbackRate,this._probability=U.probability,this._humanize=U.humanize,this.mute=U.mute,this._playbackRate=U.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Tt.getDefaults(),{callback:K,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(U=-1){this._state.forEachFrom(U,(U=>{let Y;if("started"===U.state){-1!==U.id&&this.context.transport.clear(U.id);const nt=U.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||m(this._loop)&&this._loop>1){Y=1/0,m(this._loop)&&(Y=this._loop*this._getLoopDuration());const st=this._state.getAfter(nt);null!==st&&(Y=Math.min(Y,st.time-nt)),Y!==1/0&&(this._state.setStateAtTime("stopped",nt+Y+1,{id:-1}),Y=new Lt(this.context,Y));const ht=new Lt(this.context,this._getLoopDuration());U.id=this.context.transport.scheduleRepeat(this._tick.bind(this),ht,new Lt(this.context,nt),Y)}else U.id=this.context.transport.schedule(this._tick.bind(this),new Lt(this.context,nt))}}))}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(U){this._startOffset=U}get probability(){return this._probability}set probability(U){this._probability=U}get humanize(){return this._humanize}set humanize(U){this._humanize=U}start(U){const Y=this.toTicks(U);return"stopped"===this._state.getValueAtTime(Y)&&(this._state.add({id:-1,state:"started",time:Y}),this._rescheduleEvents(Y)),this}stop(U){this.cancel(U);const Y=this.toTicks(U);if("started"===this._state.getValueAtTime(Y)){this._state.setStateAtTime("stopped",Y,{id:-1});const U=this._state.getBefore(Y);let nt=Y;null!==U&&(nt=U.time),this._rescheduleEvents(nt)}return this}cancel(U){U=I(U,-1/0);const Y=this.toTicks(U);return this._state.forEachFrom(Y,(U=>{this.context.transport.clear(U.id)})),this._state.cancel(Y),this}_tick(U){const Y=this.context.transport.getTicksAtTime(U);if(!this.mute&&"started"===this._state.getValueAtTime(Y)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let Y=.02;v(this.humanize)||(Y=this.toSeconds(this.humanize)),U+=(2*Math.random()-1)*Y}this.callback(U,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(U){this._loop=U,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(U){this._playbackRate=U,this._rescheduleEvents()}get loopEnd(){return new Lt(this.context,this._loopEnd).toSeconds()}set loopEnd(U){this._loopEnd=this.toTicks(U),this._loop&&this._rescheduleEvents()}get loopStart(){return new Lt(this.context,this._loopStart).toSeconds()}set loopStart(U){this._loopStart=this.toTicks(U),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const U=this.context.transport.ticks,Y=this._state.get(U);if(null!==Y&&"started"===Y.state){const nt=this._getLoopDuration();return(U-Y.time)%nt/nt}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class mn extends Tt{constructor(){super(q(mn.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const U=q(mn.getDefaults(),arguments,["callback","interval"]);this._event=new _n({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:U.interval,playbackRate:U.playbackRate,probability:U.probability}),this.callback=U.callback,this.iterations=U.iterations}static getDefaults(){return Object.assign(Tt.getDefaults(),{interval:"4n",callback:K,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(U){return this._event.start(U),this}stop(U){return this._event.stop(U),this}cancel(U){return this._event.cancel(U),this}_tick(U){this.callback(U)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(U){this._event.loopEnd=U}get playbackRate(){return this._event.playbackRate}set playbackRate(U){this._event.playbackRate=U}get humanize(){return this._event.humanize}set humanize(U){this._event.humanize=U}get probability(){return this._event.probability}set probability(U){this._event.probability=U}get mute(){return this._event.mute}set mute(U){this._event.mute=U}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(U){this._event.loop=U===1/0||U}dispose(){return super.dispose(),this._event.dispose(),this}}class gn extends _n{constructor(){super(q(gn.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new Ot("stopped"),this._events=new Set;const U=q(gn.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,U.events.forEach((U=>{y(U)?this.add(U[0],U[1]):this.add(U)}))}static getDefaults(){return Object.assign(_n.getDefaults(),{events:[]})}start(U,Y){const nt=this.toTicks(U);if("started"!==this._state.getValueAtTime(nt)){Y=I(Y,this._loop?this._loopStart:0),Y=this._loop?I(Y,this._loopStart):I(Y,0);const U=this.toTicks(Y);this._state.add({id:-1,offset:U,state:"started",time:nt}),this._forEach((Y=>{this._startNote(Y,nt,U)}))}return this}_startNote(U,Y,nt){Y-=nt,this._loop?U.startOffset>=this._loopStart&&U.startOffset<this._loopEnd?(U.startOffset<nt&&(Y+=this._getLoopDuration()),U.start(new Lt(this.context,Y))):U.startOffset<this._loopStart&&U.startOffset>=nt&&(U.loop=!1,U.start(new Lt(this.context,Y))):U.startOffset>=nt&&U.start(new Lt(this.context,Y))}get startOffset(){return this._startOffset}set startOffset(U){this._startOffset=U,this._forEach((U=>{U.startOffset+=this._startOffset}))}stop(U){const Y=this.toTicks(U);return this._state.cancel(Y),this._state.setStateAtTime("stopped",Y),this._forEach((Y=>{Y.stop(U)})),this}at(U,Y){const nt=new xt(this.context,U).toTicks(),st=new Lt(this.context,1).toSeconds(),ht=this._events.values();let vt=ht.next();for(;!vt.done;){const U=vt.value;if(Math.abs(nt-U.startOffset)<st)return f(Y)&&(U.value=Y),U;vt=ht.next()}return f(Y)?(this.add(U,Y),this.at(U)):null}add(U,Y){U instanceof Object&&Reflect.has(U,"time")&&(U=(Y=U).time);const nt=this.toTicks(U);let st;return Y instanceof _n?(st=Y,st.callback=this._tick.bind(this)):st=new _n({callback:this._tick.bind(this),context:this.context,value:Y}),st.startOffset=nt,st.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(st),this._restartEvent(st),this}_restartEvent(U){this._state.forEach((Y=>{"started"===Y.state?this._startNote(U,Y.time,Y.offset):U.stop(new Lt(this.context,Y.time))}))}remove(U,Y){return g(U)&&U.hasOwnProperty("time")&&(U=(Y=U).time),U=this.toTicks(U),this._events.forEach((nt=>{nt.startOffset===U&&(p(Y)||f(Y)&&nt.value===Y)&&(this._events.delete(nt),nt.dispose())})),this}clear(){return this._forEach((U=>U.dispose())),this._events.clear(),this}cancel(U){return this._forEach((Y=>Y.cancel(U))),this._state.cancel(this.toTicks(U)),this}_forEach(U){return this._events&&this._events.forEach((Y=>{Y instanceof gn?Y._forEach(U):U(Y)})),this}_setAll(U,Y){this._forEach((nt=>{nt[U]=Y}))}_tick(U,Y){this.mute||this.callback(U,Y)}_testLoopBoundries(U){this._loop&&(U.startOffset<this._loopStart||U.startOffset>=this._loopEnd)?U.cancel(0):"stopped"===U.state&&this._restartEvent(U)}get probability(){return this._probability}set probability(U){this._probability=U,this._setAll("probability",U)}get humanize(){return this._humanize}set humanize(U){this._humanize=U,this._setAll("humanize",U)}get loop(){return this._loop}set loop(U){this._loop=U,this._forEach((Y=>{Y.loopStart=this.loopStart,Y.loopEnd=this.loopEnd,Y.loop=U,this._testLoopBoundries(Y)}))}get loopEnd(){return new Lt(this.context,this._loopEnd).toSeconds()}set loopEnd(U){this._loopEnd=this.toTicks(U),this._loop&&this._forEach((Y=>{Y.loopEnd=U,this._testLoopBoundries(Y)}))}get loopStart(){return new Lt(this.context,this._loopStart).toSeconds()}set loopStart(U){this._loopStart=this.toTicks(U),this._loop&&this._forEach((U=>{U.loopStart=this.loopStart,this._testLoopBoundries(U)}))}get playbackRate(){return this._playbackRate}set playbackRate(U){this._playbackRate=U,this._setAll("playbackRate",U)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*vn(U){let Y=0;for(;Y<U.length;)Y=xn(Y,U),yield U[Y],Y++}function*yn(U){let Y=U.length-1;for(;Y>=0;)Y=xn(Y,U),yield U[Y],Y--}function*bn(U,Y){for(;;)yield*Y(U)}function xn(U,Y){return B(U,0,Y.length-1)}function*wn(U,Y){let nt=Y?0:U.length-1;for(;;)nt=xn(nt,U),yield U[nt],Y?(nt++,nt>=U.length-1&&(Y=!1)):(nt--,nt<=0&&(Y=!0))}function*Tn(U){let Y=0,nt=0;for(;Y<U.length;)Y=xn(Y,U),yield U[Y],nt++,Y+=nt%2?2:-1}function*On(U){let Y=U.length-1,nt=0;for(;Y>=0;)Y=xn(Y,U),yield U[Y],nt++,Y+=nt%2?-2:1}function*Sn(U){const Y=[];for(let nt=0;nt<U.length;nt++)Y.push(nt);for(;Y.length>0;){const nt=xn(Y.splice(Math.floor(Y.length*Math.random()),1)[0],U);yield U[nt]}}function*Cn(U,Y="up",nt=0){switch(r(U.length>0,"The array must have more than one value in it"),Y){case"up":yield*bn(U,vn);case"down":yield*bn(U,yn);case"upDown":yield*wn(U,!0);case"downUp":yield*wn(U,!1);case"alternateUp":yield*bn(U,Tn);case"alternateDown":yield*bn(U,On);case"random":yield*function*(U){for(;;){const Y=Math.floor(Math.random()*U.length);yield U[Y]}}(U);case"randomOnce":yield*bn(U,Sn);case"randomWalk":yield*function*(U){let Y=Math.floor(Math.random()*U.length);for(;;)0===Y?Y++:Y===U.length-1||Math.random()<.5?Y--:Y++,yield U[Y]}(U)}}class kn extends mn{constructor(){super(q(kn.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const U=q(kn.getDefaults(),arguments,["callback","values","pattern"]);this.callback=U.callback,this._values=U.values,this._pattern=Cn(U.values,U.pattern),this._type=U.pattern}static getDefaults(){return Object.assign(mn.getDefaults(),{pattern:"up",values:[],callback:K})}_tick(U){const Y=this._pattern.next();this._value=Y.value,this.callback(U,this._value)}get values(){return this._values}set values(U){this._values=U,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(U){this._type=U,this._pattern=Cn(this._values,this._type)}}class An extends _n{constructor(){super(q(An.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new gn({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const U=q(An.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(U.subdivision),this.events=U.events,this.loop=U.loop,this.loopStart=U.loopStart,this.loopEnd=U.loopEnd,this.playbackRate=U.playbackRate,this.probability=U.probability,this.humanize=U.humanize,this.mute=U.mute,this.playbackRate=U.playbackRate}static getDefaults(){return Object.assign(F(_n.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(U,Y){null!==Y&&this.callback(U,Y)}get events(){return this._events}set events(U){this.clear(),this._eventsArray=U,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(U,Y){return this._part.start(U,Y?this._indexTime(Y):Y),this}stop(U){return this._part.stop(U),this}get subdivision(){return new Lt(this.context,this._subdivision).toSeconds()}_createSequence(U){return new Proxy(U,{get:(U,Y)=>U[Y],set:(U,Y,nt)=>(b(Y)&&isFinite(parseInt(Y,10))&&y(nt)?U[Y]=this._createSequence(nt):U[Y]=nt,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(U,Y,nt){U.forEach(((U,st)=>{const ht=st*Y+nt;if(y(U))this._rescheduleSequence(U,Y/U.length,ht);else{const Y=new Lt(this.context,ht,"i").toSeconds();this._part.add(Y,U)}}))}_indexTime(U){return new Lt(this.context,U*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(U){this._part.loop=U}get loopStart(){return this._loopStart}set loopStart(U){this._loopStart=U,this._part.loopStart=this._indexTime(U)}get loopEnd(){return this._loopEnd}set loopEnd(U){this._loopEnd=U,this._part.loopEnd=0===U?this._indexTime(this._eventsArray.length):this._indexTime(U)}get startOffset(){return this._part.startOffset}set startOffset(U){this._part.startOffset=U}get playbackRate(){return this._part.playbackRate}set playbackRate(U){this._part.playbackRate=U}get probability(){return this._part.probability}set probability(U){this._part.probability=U}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(U){this._part.humanize=U}get length(){return this._part.length}}class Dn extends Ct{constructor(){super(Object.assign(q(Dn.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new Ee({context:this.context}),this.a=new Mt({context:this.context,gain:0}),this.b=new Mt({context:this.context,gain:0}),this.output=new Mt({context:this.context}),this._internalChannels=[this.a,this.b];const U=q(Dn.getDefaults(),arguments,["fade"]);this.fade=new Rt({context:this.context,units:"normalRange",value:U.fade}),$(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",At(this._split,this.a.gain,0),At(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Ct.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Mn extends Ct{constructor(U){super(U),this.name="Effect",this._dryWet=new Dn({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Mt({context:this.context}),this.effectReturn=new Mt({context:this.context}),this.input=new Mt({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(U.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],$(this,"wet")}static getDefaults(){return Object.assign(Ct.getDefaults(),{wet:1})}connectEffect(U){return this._internalChannels.push(U),this.effectSend.chain(U,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class jn extends Mn{constructor(U){super(U),this.name="LFOEffect",this._lfo=new Se({context:this.context,frequency:U.frequency,amplitude:U.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=U.type,$(this,["frequency","depth"])}static getDefaults(){return Object.assign(Mn.getDefaults(),{frequency:1,type:"sine",depth:1})}start(U){return this._lfo.start(U),this}stop(U){return this._lfo.stop(U),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(U){this._lfo.type=U}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class En extends jn{constructor(){super(q(En.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const U=q(En.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Xe(Object.assign(U.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=U.octaves,this.baseFrequency=U.baseFrequency}static getDefaults(){return Object.assign(jn.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(U){this._lfo.min=this.toFrequency(U),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(U){this._octaves=U,this._lfo.max=this._lfo.min*Math.pow(2,U)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Rn extends Ct{constructor(){super(Object.assign(q(Rn.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const U=q(Rn.getDefaults(),arguments,["pan"]);this.pan=new St({context:this.context,param:this._panner.pan,value:U.pan,minValue:-1,maxValue:1}),this._panner.channelCount=U.channelCount,this._panner.channelCountMode="explicit",$(this,"pan")}static getDefaults(){return Object.assign(Ct.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class qn extends jn{constructor(){super(q(qn.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const U=q(qn.getDefaults(),arguments,["frequency"]);this._panner=new Rn({context:this.context,channelCount:U.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(jn.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class In extends Ct{constructor(){super(q(In.getDefaults(),arguments,["smoothing"])),this.name="Follower";const U=q(In.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new je({context:this.context}),this._lowpass=this.output=new hn({context:this.context,frequency:1/this.toSeconds(U.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=U.smoothing}static getDefaults(){return Object.assign(Ct.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(U){this._smoothing=U,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class Fn extends Mn{constructor(){super(q(Fn.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const U=q(Fn.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new In({context:this.context,smoothing:U.follower}),this._sweepRange=new Ne({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(U.baseFrequency),this._octaves=U.octaves,this._inputBoost=new Mt({context:this.context}),this._bandpass=new Xe({context:this.context,rolloff:-48,frequency:0,Q:U.Q}),this._peaking=new Xe({context:this.context,type:"peaking"}),this._peaking.gain.value=U.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=U.sensitivity,$(this,["gain","Q"])}static getDefaults(){return Object.assign(Mn.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(U){this._octaves=U,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(U){this._follower.smoothing=U}get baseFrequency(){return this._baseFrequency}set baseFrequency(U){this._baseFrequency=this.toFrequency(U),this._setSweepRange()}get sensitivity(){return ct(1/this._inputBoost.gain.value)}set sensitivity(U){this._inputBoost.gain.value=1/at(U)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}an("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Vn extends Mn{constructor(){super(q(Vn.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const U=q(Vn.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new Nn({context:this.context,bits:U.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Mn.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class Nn extends cn{constructor(){super(q(Nn.getDefaults(),arguments)),this.name="BitCrusherWorklet";const U=q(Nn.getDefaults(),arguments);this.input=new Mt({context:this.context}),this.output=new Mt({context:this.context}),this.bits=new St({context:this.context,value:U.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(cn.getDefaults(),{bits:12})}_audioWorkletName(){return"bit-crusher"}onReady(U){kt(this.input,U,this.output);const Y=U.parameters.get("bits");this.bits.setParam(Y)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Pn extends Mn{constructor(){super(q(Pn.getDefaults(),arguments,["order"])),this.name="Chebyshev";const U=q(Pn.getDefaults(),arguments,["order"]);this._shaper=new de({context:this.context,length:4096}),this._order=U.order,this.connectEffect(this._shaper),this.order=U.order,this.oversample=U.oversample}static getDefaults(){return Object.assign(Mn.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(U,Y,nt){return nt.has(Y)||(0===Y?nt.set(Y,0):1===Y?nt.set(Y,U):nt.set(Y,2*U*this._getCoefficient(U,Y-1,nt)-this._getCoefficient(U,Y-2,nt))),nt.get(Y)}get order(){return this._order}set order(U){this._order=U,this._shaper.setMap((Y=>this._getCoefficient(Y,U,new Map)))}get oversample(){return this._shaper.oversample}set oversample(U){this._shaper.oversample=U}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ln extends Ct{constructor(){super(q(Ln.getDefaults(),arguments,["channels"])),this.name="Split";const U=q(Ln.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(U.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Ct.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class zn extends Ct{constructor(){super(q(zn.getDefaults(),arguments,["channels"])),this.name="Merge";const U=q(zn.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(U.channels)}static getDefaults(){return Object.assign(Ct.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Bn extends Ct{constructor(U){super(U),this.name="StereoEffect",this.input=new Mt({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Dn({context:this.context,fade:U.wet}),this.wet=this._dryWet.fade,this._split=new Ln({context:this.context,channels:2}),this._merge=new zn({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),$(this,["wet"])}connectEffectLeft(...U){this._split.connect(U[0],0,0),kt(...U),At(U[U.length-1],this._merge,0,0)}connectEffectRight(...U){this._split.connect(U[0],1,0),kt(...U),At(U[U.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Ct.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Wn extends Bn{constructor(U){super(U),this.feedback=new Rt({context:this.context,value:U.feedback,units:"normalRange"}),this._feedbackL=new Mt({context:this.context}),this._feedbackR=new Mt({context:this.context}),this._feedbackSplit=new Ln({context:this.context,channels:2}),this._feedbackMerge=new zn({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),$(this,["feedback"])}static getDefaults(){return Object.assign(Bn.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Un extends Wn{constructor(){super(q(Un.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const U=q(Un.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=U.depth,this._delayTime=U.delayTime/1e3,this._lfoL=new Se({context:this.context,frequency:U.frequency,min:0,max:1}),this._lfoR=new Se({context:this.context,frequency:U.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Qt({context:this.context}),this._delayNodeR=new Qt({context:this.context}),this.frequency=this._lfoL.frequency,$(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=U.type,this.spread=U.spread}static getDefaults(){return Object.assign(Wn.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(U){this._depth=U;const Y=this._delayTime*U;this._lfoL.min=Math.max(this._delayTime-Y,0),this._lfoL.max=this._delayTime+Y,this._lfoR.min=Math.max(this._delayTime-Y,0),this._lfoR.max=this._delayTime+Y}get delayTime(){return 1e3*this._delayTime}set delayTime(U){this._delayTime=U/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(U){this._lfoL.type=U,this._lfoR.type=U}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(U){this._lfoL.phase=90-U/2,this._lfoR.phase=U/2+90}start(U){return this._lfoL.start(U),this._lfoR.start(U),this}stop(U){return this._lfoL.stop(U),this._lfoR.stop(U),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Gn extends Mn{constructor(){super(q(Gn.getDefaults(),arguments,["distortion"])),this.name="Distortion";const U=q(Gn.getDefaults(),arguments,["distortion"]);this._shaper=new de({context:this.context,length:4096}),this._distortion=U.distortion,this.connectEffect(this._shaper),this.distortion=U.distortion,this.oversample=U.oversample}static getDefaults(){return Object.assign(Mn.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(U){this._distortion=U;const Y=100*U,nt=Math.PI/180;this._shaper.setMap((U=>Math.abs(U)<.001?0:(3+Y)*U*20*nt/(Math.PI+Y*Math.abs(U))))}get oversample(){return this._shaper.oversample}set oversample(U){this._shaper.oversample=U}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Yn extends Mn{constructor(U){super(U),this.name="FeedbackEffect",this._feedbackGain=new Mt({context:this.context,gain:U.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,$(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Mn.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Qn extends Yn{constructor(){super(q(Qn.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const U=q(Qn.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new Qt({context:this.context,delayTime:U.delayTime,maxDelay:U.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),$(this,"delayTime")}static getDefaults(){return Object.assign(Yn.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Zn extends Ct{constructor(U){super(U),this.name="PhaseShiftAllpass",this.input=new Mt({context:this.context}),this.output=new Mt({context:this.context}),this.offset90=new Mt({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),kt(this.input,...this._bank0,this._oneSampleDelay,this.output),kt(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(U){return U.map((U=>{const Y=[[U*U,0,-1],[1,0,-U*U]];return this.context.createIIRFilter(Y[0],Y[1])}))}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((U=>U.disconnect())),this._bank1.forEach((U=>U.disconnect())),this._oneSampleDelay.disconnect(),this}}class Xn extends Mn{constructor(){super(q(Xn.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const U=q(Xn.getDefaults(),arguments,["frequency"]);this.frequency=new Rt({context:this.context,units:"frequency",value:U.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new ue({context:this.context,type:"sine"}),this._cosine=new he({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new fe({context:this.context}),this._cosineMultiply=new fe({context:this.context}),this._negate=new Re({context:this.context}),this._add=new we({context:this.context}),this._phaseShifter=new Zn({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const Y=this.immediate();this._sine.start(Y),this._cosine.start(Y)}static getDefaults(){return Object.assign(Mn.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const Ws=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],Gs=[225,556,441,341];class Jn extends Bn{constructor(){super(q(Jn.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const U=q(Jn.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new Rt({context:this.context,value:U.roomSize,units:"normalRange"}),this._allpassFiltersL=Gs.map((U=>{const Y=this.context.createBiquadFilter();return Y.type="allpass",Y.frequency.value=U,Y})),this._allpassFiltersR=Gs.map((U=>{const Y=this.context.createBiquadFilter();return Y.type="allpass",Y.frequency.value=U,Y})),this._combFilters=Ws.map(((Y,nt)=>{const st=new ln({context:this.context,dampening:U.dampening,delayTime:Y});return nt<Ws.length/2?this.connectEffectLeft(st,...this._allpassFiltersL):this.connectEffectRight(st,...this._allpassFiltersR),this.roomSize.connect(st.resonance),st})),$(this,["roomSize"])}static getDefaults(){return Object.assign(Bn.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(U){this._combFilters.forEach((Y=>Y.dampening=U))}dispose(){return super.dispose(),this._allpassFiltersL.forEach((U=>U.disconnect())),this._allpassFiltersR.forEach((U=>U.disconnect())),this._combFilters.forEach((U=>U.dispose())),this.roomSize.dispose(),this}}const $s=[.06748,.06404,.08212,.09004],Qs=[.773,.802,.753,.733],Xs=[347,113,37];class ns extends Bn{constructor(){super(q(ns.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const U=q(ns.getDefaults(),arguments,["roomSize"]);this.roomSize=new Rt({context:this.context,value:U.roomSize,units:"normalRange"}),this._scaleRoomSize=new Te({context:this.context,min:-.733,max:.197}),this._allpassFilters=Xs.map((U=>{const Y=this.context.createBiquadFilter();return Y.type="allpass",Y.frequency.value=U,Y})),this._feedbackCombFilters=$s.map(((U,Y)=>{const nt=new un({context:this.context,delayTime:U});return this._scaleRoomSize.connect(nt.resonance),nt.resonance.value=Qs[Y],Y<$s.length/2?this.connectEffectLeft(...this._allpassFilters,nt):this.connectEffectRight(...this._allpassFilters,nt),nt})),this.roomSize.connect(this._scaleRoomSize),$(this,["roomSize"])}static getDefaults(){return Object.assign(Bn.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach((U=>U.disconnect())),this._feedbackCombFilters.forEach((U=>U.dispose())),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class ss extends Wn{constructor(U){super(U),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),$(this,["feedback"])}}class is extends ss{constructor(){super(q(is.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const U=q(is.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new Qt({context:this.context,maxDelay:U.maxDelay}),this._rightDelay=new Qt({context:this.context,maxDelay:U.maxDelay}),this._rightPreDelay=new Qt({context:this.context,maxDelay:U.maxDelay}),this.delayTime=new Rt({context:this.context,units:"time",value:U.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),$(this,["delayTime"])}static getDefaults(){return Object.assign(ss.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class os extends Yn{constructor(){super(q(os.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const U=q(os.getDefaults(),arguments,["pitch"]);this._frequency=new Rt({context:this.context}),this._delayA=new Qt({maxDelay:1,context:this.context}),this._lfoA=new Se({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Qt({maxDelay:1,context:this.context}),this._lfoB=new Se({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Dn({context:this.context}),this._crossFadeLFO=new Se({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Qt({delayTime:U.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,$(this,"delayTime"),this._pitch=U.pitch,this._windowSize=U.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const Y=this.now();this._lfoA.start(Y),this._lfoB.start(Y),this._crossFadeLFO.start(Y),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Yn.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(U){this._pitch=U;let Y=0;U<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,Y=ut(U-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,Y=ut(U)-1),this._frequency.value=Y*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(U){this._windowSize=this.toSeconds(U),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class rs extends Bn{constructor(){super(q(rs.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const U=q(rs.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new Se({context:this.context,frequency:U.frequency,min:0,max:1}),this._lfoR=new Se({context:this.context,frequency:U.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(U.baseFrequency),this._octaves=U.octaves,this.Q=new Rt({context:this.context,value:U.Q,units:"positive"}),this._filtersL=this._makeFilters(U.stages,this._lfoL),this._filtersR=this._makeFilters(U.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=U.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=U.baseFrequency,this.octaves=U.octaves,this._lfoL.start(),this._lfoR.start(),$(this,["frequency","Q"])}static getDefaults(){return Object.assign(Bn.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(U,Y){const nt=[];for(let st=0;st<U;st++){const U=this.context.createBiquadFilter();U.type="allpass",this.Q.connect(U.Q),Y.connect(U.frequency),nt.push(U)}return nt}get octaves(){return this._octaves}set octaves(U){this._octaves=U;const Y=this._baseFrequency*Math.pow(2,U);this._lfoL.max=Y,this._lfoR.max=Y}get baseFrequency(){return this._baseFrequency}set baseFrequency(U){this._baseFrequency=this.toFrequency(U),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((U=>U.disconnect())),this._filtersR.forEach((U=>U.disconnect())),this.frequency.dispose(),this}}class as extends Mn{constructor(){super(q(as.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const U=q(as.getDefaults(),arguments,["decay"]);this._decay=U.decay,this._preDelay=U.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Mn.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(U){a(U=this.toSeconds(U),.001),this._decay=U,this.generate()}get preDelay(){return this._preDelay}set preDelay(U){a(U=this.toSeconds(U),0),this._preDelay=U,this.generate()}generate(){return S(this,void 0,void 0,(function*(){const U=this.ready,Y=new et(2,this._decay+this._preDelay,this.context.sampleRate),nt=new ie({context:Y}),st=new ie({context:Y}),ht=new zn({context:Y});nt.connect(ht,0,0),st.connect(ht,0,1);const vt=new Mt({context:Y}).toDestination();ht.connect(vt),nt.start(0),st.start(0),vt.gain.setValueAtTime(0,0),vt.gain.setValueAtTime(1,this._preDelay),vt.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const yt=Y.render();return this.ready=yt.then(K),yield U,this._convolver.buffer=(yield yt).get(),this}))}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class cs extends Ct{constructor(){super(q(cs.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Ln({channels:2,context:this.context}),this._midAdd=new we({context:this.context}),this.mid=new fe({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new qe({context:this.context}),this.side=new fe({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class us extends Ct{constructor(){super(q(us.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Mt({context:this.context}),this.side=new Mt({context:this.context}),this._left=new we({context:this.context}),this._leftMult=new fe({context:this.context,value:Math.SQRT1_2}),this._right=new qe({context:this.context}),this._rightMult=new fe({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new zn({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class hs extends Mn{constructor(U){super(U),this.name="MidSideEffect",this._midSideMerge=new us({context:this.context}),this._midSideSplit=new cs({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...U){this._midSend.chain(...U,this._midReturn)}connectEffectSide(...U){this._sideSend.chain(...U,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class ls extends hs{constructor(){super(q(ls.getDefaults(),arguments,["width"])),this.name="StereoWidener";const U=q(ls.getDefaults(),arguments,["width"]);this.width=new Rt({context:this.context,value:U.width,units:"normalRange"}),$(this,["width"]),this._twoTimesWidthMid=new fe({context:this.context,value:2}),this._twoTimesWidthSide=new fe({context:this.context,value:2}),this._midMult=new fe({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new qe({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),At(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new fe({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(hs.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class ds extends Bn{constructor(){super(q(ds.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const U=q(ds.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new Se({context:this.context,type:U.type,min:1,max:0}),this._lfoR=new Se({context:this.context,type:U.type,min:1,max:0}),this._amplitudeL=new Mt({context:this.context}),this._amplitudeR=new Mt({context:this.context}),this.frequency=new Rt({context:this.context,value:U.frequency,units:"frequency"}),this.depth=new Rt({context:this.context,value:U.depth,units:"normalRange"}),$(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=U.spread}static getDefaults(){return Object.assign(Bn.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(U){return this._lfoL.start(U),this._lfoR.start(U),this}stop(U){return this._lfoL.stop(U),this._lfoR.stop(U),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(U){this._lfoL.type=U,this._lfoR.type=U}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(U){this._lfoL.phase=90-U/2,this._lfoR.phase=U/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class ps extends Mn{constructor(){super(q(ps.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const U=q(ps.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new Qt({context:this.context,delayTime:0,maxDelay:U.maxDelay}),this._lfo=new Se({context:this.context,type:U.type,min:0,max:U.maxDelay,frequency:U.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=U.depth,$(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Mn.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(U){this._lfo.type=U}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class fs extends Ct{constructor(){super(q(fs.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const U=q(fs.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new Mt({context:this.context}),this._split=new Ln({context:this.context,channels:U.channels}),this.input.connect(this._split),a(U.channels,1);for(let Y=0;Y<U.channels;Y++)this._analysers[Y]=this.context.createAnalyser(),this._split.connect(this._analysers[Y],Y,0);this.size=U.size,this.type=U.type}static getDefaults(){return Object.assign(Ct.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach(((U,Y)=>{const nt=this._buffers[Y];"fft"===this._type?U.getFloatFrequencyData(nt):"waveform"===this._type&&U.getFloatTimeDomainData(nt)})),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(U){this._analysers.forEach(((Y,nt)=>{Y.fftSize=2*U,this._buffers[nt]=new Float32Array(U)}))}get channels(){return this._analysers.length}get type(){return this._type}set type(U){r("waveform"===U||"fft"===U,"Analyser: invalid type: "+U),this._type=U}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(U){this._analysers.forEach((Y=>Y.smoothingTimeConstant=U))}dispose(){return super.dispose(),this._analysers.forEach((U=>U.disconnect())),this._split.dispose(),this._gain.dispose(),this}}class _s extends Ct{constructor(){super(q(_s.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new fs({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class ms extends _s{constructor(){super(q(ms.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const U=q(ms.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new fs({context:this.context,size:256,type:"waveform",channels:U.channels}),this.smoothing=U.smoothing,this.normalRange=U.normalRange}static getDefaults(){return Object.assign(_s.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return d("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const U=this._analyser.getValue(),Y=(1===this.channels?[U]:U).map((U=>{const Y=U.reduce(((U,Y)=>U+Y*Y),0),nt=Math.sqrt(Y/U.length);return this._rms=Math.max(nt,this._rms*this.smoothing),this.normalRange?this._rms:ct(this._rms)}));return 1===this.channels?Y[0]:Y}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class gs extends _s{constructor(){super(q(gs.getDefaults(),arguments,["size"])),this.name="FFT";const U=q(gs.getDefaults(),arguments,["size"]);this.normalRange=U.normalRange,this._analyser.type="fft",this.size=U.size}static getDefaults(){return Object.assign(Ct.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map((U=>this.normalRange?at(U):U))}get size(){return this._analyser.size}set size(U){this._analyser.size=U}get smoothing(){return this._analyser.smoothing}set smoothing(U){this._analyser.smoothing=U}getFrequencyOfIndex(U){return r(0<=U&&U<this.size,"index must be greater than or equal to 0 and less than "+this.size),U*this.context.sampleRate/(2*this.size)}}class vs extends _s{constructor(){super(q(vs.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class ys extends _s{constructor(){super(q(ys.getDefaults(),arguments,["size"])),this.name="Waveform";const U=q(ys.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=U.size}static getDefaults(){return Object.assign(_s.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(U){this._analyser.size=U}}class bs extends Ct{constructor(){super(q(bs.getDefaults(),arguments,["solo"])),this.name="Solo";const U=q(bs.getDefaults(),arguments,["solo"]);this.input=this.output=new Mt({context:this.context}),bs._allSolos.has(this.context)||bs._allSolos.set(this.context,new Set),bs._allSolos.get(this.context).add(this),this.solo=U.solo}static getDefaults(){return Object.assign(Ct.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(U){U?this._addSolo():this._removeSolo(),bs._allSolos.get(this.context).forEach((U=>U._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){bs._soloed.has(this.context)||bs._soloed.set(this.context,new Set),bs._soloed.get(this.context).add(this)}_removeSolo(){bs._soloed.has(this.context)&&bs._soloed.get(this.context).delete(this)}_isSoloed(){return bs._soloed.has(this.context)&&bs._soloed.get(this.context).has(this)}_noSolos(){return!bs._soloed.has(this.context)||bs._soloed.has(this.context)&&0===bs._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),bs._allSolos.get(this.context).delete(this),this._removeSolo(),this}}bs._allSolos=new Map,bs._soloed=new Map;class xs extends Ct{constructor(){super(q(xs.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const U=q(xs.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Rn({context:this.context,pan:U.pan,channelCount:U.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Zt({context:this.context,volume:U.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=U.mute,$(this,["pan","volume"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(U){this._volume.mute=U}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ws extends Ct{constructor(){super(q(ws.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const U=q(ws.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new bs({solo:U.solo,context:this.context}),this._panVol=this.output=new xs({context:this.context,pan:U.pan,volume:U.volume,mute:U.mute,channelCount:U.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),$(this,["pan","volume"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(U){this._solo.solo=U}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(U){this._panVol.mute=U}_getBus(U){return ws.buses.has(U)||ws.buses.set(U,new Mt({context:this.context})),ws.buses.get(U)}send(U,Y=0){const nt=this._getBus(U),st=new Mt({context:this.context,units:"decibels",gain:Y});return this.connect(st),st.connect(nt),st}receive(U){return this._getBus(U).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ws.buses=new Map;class Ts extends Ct{constructor(){super(q(Ts.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new Mt({context:this.context}),this.output=void 0,this.low=new Xe({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Xe({context:this.context,frequency:0,type:"highpass"}),this.mid=new Xe({context:this.context,frequency:0,type:"lowpass"}),this.high=new Xe({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const U=q(Ts.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new Rt({context:this.context,units:"frequency",value:U.lowFrequency}),this.highFrequency=new Rt({context:this.context,units:"frequency",value:U.highFrequency}),this.Q=new Rt({context:this.context,units:"positive",value:U.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),$(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),J(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Os extends Ct{constructor(){super(...arguments),this.name="Listener",this.positionX=new St({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new St({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new St({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new St({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new St({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new St({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new St({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new St({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new St({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ct.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}G((U=>{U.listener=new Os({context:U})})),Q((U=>{U.listener.dispose()}));class Ss extends Ct{constructor(){super(q(Ss.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const U=q(Ss.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=U.panningModel,this.maxDistance=U.maxDistance,this.distanceModel=U.distanceModel,this.coneOuterGain=U.coneOuterGain,this.coneOuterAngle=U.coneOuterAngle,this.coneInnerAngle=U.coneInnerAngle,this.refDistance=U.refDistance,this.rolloffFactor=U.rolloffFactor,this.positionX=new St({context:this.context,param:this._panner.positionX,value:U.positionX}),this.positionY=new St({context:this.context,param:this._panner.positionY,value:U.positionY}),this.positionZ=new St({context:this.context,param:this._panner.positionZ,value:U.positionZ}),this.orientationX=new St({context:this.context,param:this._panner.orientationX,value:U.orientationX}),this.orientationY=new St({context:this.context,param:this._panner.orientationY,value:U.orientationY}),this.orientationZ=new St({context:this.context,param:this._panner.orientationZ,value:U.orientationZ})}static getDefaults(){return Object.assign(Ct.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(U,Y,nt){return this.positionX.value=U,this.positionY.value=Y,this.positionZ.value=nt,this}setOrientation(U,Y,nt){return this.orientationX.value=U,this.orientationY.value=Y,this.orientationZ.value=nt,this}get panningModel(){return this._panner.panningModel}set panningModel(U){this._panner.panningModel=U}get refDistance(){return this._panner.refDistance}set refDistance(U){this._panner.refDistance=U}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(U){this._panner.rolloffFactor=U}get distanceModel(){return this._panner.distanceModel}set distanceModel(U){this._panner.distanceModel=U}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(U){this._panner.coneInnerAngle=U}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(U){this._panner.coneOuterAngle=U}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(U){this._panner.coneOuterGain=U}get maxDistance(){return this._panner.maxDistance}set maxDistance(U){this._panner.maxDistance=U}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Cs extends Ct{constructor(){super(q(Cs.getDefaults(),arguments)),this.name="Recorder";const U=q(Cs.getDefaults(),arguments);this.input=new Mt({context:this.context}),r(Cs.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:U.mimeType})}static getDefaults(){return Ct.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==ee&&Reflect.has(ee,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return S(this,void 0,void 0,(function*(){r("started"!==this.state,"Recorder is already started");const U=new Promise((U=>{const e=()=>{this._recorder.removeEventListener("start",e,!1),U()};this._recorder.addEventListener("start",e,!1)}));return this._recorder.start(),yield U}))}stop(){return S(this,void 0,void 0,(function*(){r("stopped"!==this.state,"Recorder is not started");const U=new Promise((U=>{const e=Y=>{this._recorder.removeEventListener("dataavailable",e,!1),U(Y.data)};this._recorder.addEventListener("dataavailable",e,!1)}));return this._recorder.stop(),yield U}))}pause(){return r("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class ks extends Ct{constructor(){super(q(ks.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const U=q(ks.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new St({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:U.threshold}),this.attack=new St({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:U.attack}),this.release=new St({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:U.release}),this.knee=new St({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:U.knee}),this.ratio=new St({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:U.ratio}),$(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class As extends Ct{constructor(){super(Object.assign(q(As.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const U=q(As.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new In({context:this.context,smoothing:U.smoothing}),this._gt=new Fe({context:this.context,value:at(U.threshold)}),this.input=new Mt({context:this.context}),this._gate=this.output=new Mt({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(Ct.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return ct(this._gt.value)}set threshold(U){this._gt.value=at(U)}get smoothing(){return this._follower.smoothing}set smoothing(U){this._follower.smoothing=U}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Ds extends Ct{constructor(){super(Object.assign(q(Ds.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const U=q(Ds.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new ks({context:this.context,ratio:20,attack:0,release:0,threshold:U.threshold}),this.threshold=this._compressor.threshold,$(this,"threshold")}static getDefaults(){return Object.assign(Ct.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class Ms extends Ct{constructor(){super(Object.assign(q(Ms.getDefaults(),arguments))),this.name="MidSideCompressor";const U=q(Ms.getDefaults(),arguments);this._midSideSplit=this.input=new cs({context:this.context}),this._midSideMerge=this.output=new us({context:this.context}),this.mid=new ks(Object.assign(U.mid,{context:this.context})),this.side=new ks(Object.assign(U.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),$(this,["mid","side"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class js extends Ct{constructor(){super(Object.assign(q(js.getDefaults(),arguments))),this.name="MultibandCompressor";const U=q(js.getDefaults(),arguments);this._splitter=this.input=new Ts({context:this.context,lowFrequency:U.lowFrequency,highFrequency:U.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Mt({context:this.context}),this.low=new ks(Object.assign(U.low,{context:this.context})),this.mid=new ks(Object.assign(U.mid,{context:this.context})),this.high=new ks(Object.assign(U.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),$(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class Es extends Ct{constructor(){super(q(Es.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new Mt({context:this.context}),this._internalChannels=[];const U=q(Es.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new Ts({context:this.context,highFrequency:U.highFrequency,lowFrequency:U.lowFrequency}),this._lowGain=new Mt({context:this.context,gain:U.low,units:"decibels"}),this._midGain=new Mt({context:this.context,gain:U.mid,units:"decibels"}),this._highGain=new Mt({context:this.context,gain:U.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),$(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(Ct.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),J(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Rs extends Ct{constructor(){super(q(Rs.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const U=q(Rs.getDefaults(),arguments,["url","onload"]);this._buffer=new tt(U.url,(Y=>{this.buffer=Y,U.onload()})),this.input=new Mt({context:this.context}),this.output=new Mt({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=U.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(Ct.getDefaults(),{normalize:!0,onload:K})}load(U){return S(this,void 0,void 0,(function*(){this.buffer=yield this._buffer.load(U)}))}get buffer(){return this._buffer.length?this._buffer:null}set buffer(U){U&&this._buffer.set(U),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const Y=this._buffer.get();this._convolver.buffer=Y||null}get normalize(){return this._convolver.normalize}set normalize(U){this._convolver.normalize=U}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function qs(){return it().now()}function Is(){return it().immediate()}const Zs=it().transport;function Vs(){return it().transport}const Hs=it().destination,Js=it().destination;function Ls(){return it().destination}const Ks=it().listener;function Bs(){return it().listener}const ti=it().draw;function Us(){return it().draw}const ei=it();function Ys(){return tt.loaded()}const ni=tt,si=$t,ii=se}])}));