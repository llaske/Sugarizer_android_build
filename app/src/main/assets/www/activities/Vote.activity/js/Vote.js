var Vote={template:'\n\t\t<div class="vote" :class="{ fullscreen: $root.$refs.SugarToolbar ? $root.$refs.SugarToolbar.isHidden() : false }" :style="{ backgroundColor: currentUser.colorvalue.fill }">\n\t\t\t<div class="vote-card">\n\t\t\t\t<div class="loading" v-if="!activePoll">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<img src="icons/hourglass.svg" alt="hourglass">\n\t\t\t\t\t\t<h2 v-if="activePollStatus == \'no-host\'">{{ $root.$refs.SugarL10n.get(\'WaitingHost\') }}</h2>\n\t\t\t\t\t\t<h2 v-else>{{ $root.$refs.SugarL10n.get(\'WaitingPoll\') }}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="vote-card-content" v-else-if="activePollStatus == \'running\' && (!realTimeResults || (realTimeResults && currentUser.answer == null))">\n\t\t\t\t\t<h1 class="vote-question" v-if="currentUser.answer == null">{{ activePoll.question }}</h1>\n\t\t\t\t\t\n\t\t\t\t\t<div class="vote-waiting" v-if="currentUser.answer != null">\n\t\t\t\t\t\t<img src="icons/hourglass.svg" alt="hourglass">\n\t\t\t\t\t\t<h2>{{ $root.$refs.SugarL10n.get(\'WaitingResults\') }}</h2>\n\t\t\t\t\t\t<h3>{{ counts.answersCount }}/{{ counts.usersCount }}</h3>\n\t\t\t\t\t\t<h3>{{ $root.$refs.SugarL10n.get(\'Voted\') }}</h3>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- Text --\x3e\n\t\t\t\t\t<div class="vote-text" v-else-if="activePoll.typeVariable == \'Text\'">\n\t\t\t\t\t\t<input type="text" v-model="text">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- Yes/No --\x3e\n\t\t\t\t\t<div class="vote-yesno" v-else-if="activePoll.typeVariable == \'YesNo\'">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass="option option-yes" \n\t\t\t\t\t\t\t:class="{ selected: boolChoice == true }" \n\t\t\t\t\t\t\t:style="{ backgroundImage: \'url(\' + yesnoIcons.yes\t + \')\' }"\n\t\t\t\t\t\t\t@click="boolChoice = true"\n\t\t\t\t\t\t></button>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass="option option-no" \n\t\t\t\t\t\t\t:class="{ selected: boolChoice == false }" \n\t\t\t\t\t\t\t:style="{ backgroundImage: \'url(\' + yesnoIcons.no\t + \')\' }"\n\t\t\t\t\t\t\t@click="boolChoice = false"\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- MCQ --\x3e\n\t\t\t\t\t<div class="vote-mcq" v-else-if="activePoll.typeVariable == \'MCQ\'">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclass="option" \n\t\t\t\t\t\t\t:class="{ selected: optionSelected == i }" \n\t\t\t\t\t\t\tv-for="(option, i) in activePoll.options" \n\t\t\t\t\t\t\t:key="i"\n\t\t\t\t\t\t\t@click="optionSelected = i"\n\t\t\t\t\t\t>{{ option }}</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- Image MCQ --\x3e\n\t\t\t\t\t<div class="vote-image-mcq" v-else-if="activePoll.typeVariable == \'ImageMCQ\'">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass="option-image"\n\t\t\t\t\t\t\t:class="{ selected: optionSelected == i }" \n\t\t\t\t\t\t\tv-for="(option, i) in activePoll.options" \n\t\t\t\t\t\t\t:key="i"\n\t\t\t\t\t\t\t@click="optionSelected = i"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img :src="option">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- Rating --\x3e\n\t\t\t\t\t<div class="vote-rating" v-else-if="activePoll.typeVariable == \'Rating\'">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass="rating-star" \n\t\t\t\t\t\t\t:style="{ backgroundImage: getRatingStar(n) }" \n\t\t\t\t\t\t\tv-for="n in 5" \n\t\t\t\t\t\t\t:key="n"\n\t\t\t\t\t\t\t@click="rating = n"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button class="submit" :disabled="!submitable" @click="submit" v-if="currentUser.answer == null"></button>\n\t\t\t\t</div>\n\n\t\t\t\t<div v-else-if="(activePollStatus == \'finished\' || (currentUser.answer != null && realTimeResults)) && activePoll.results != null">\n\t\t\t\t\t<poll-stats :activePoll="activePoll" :currentUser="currentUser" isResult></poll-states>\n\t\t\t\t</div>\n\n\t\t\t\t<button \n\t\t\t\t\tref="raiseHandButton" \n\t\t\t\t\tv-if="activePoll"\n\t\t\t\t\tclass="raise-hand" \n\t\t\t\t\t:class="{ active: currentUser.handRaised }" \n\t\t\t\t\t@click="switchHandRaise"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t',components:{"poll-stats":PollStats},props:["activePoll","activePollStatus","realTimeResults","connectedUsers","currentUser","counts"],data:()=>({text:"",optionSelected:null,boolChoice:null,rating:0,ratingIcons:{unselected:"../icons/star.svg",selected:"../icons/star.svg"},yesnoIcons:{yes:"../icons/dialog-ok.svg",no:"../icons/dialog-cancel.svg"}}),computed:{submitable(){switch(this.activePoll.typeVariable){case"Text":return""!=this.text;case"YesNo":return null!=this.boolChoice;case"MCQ":case"ImageMCQ":return null!=this.optionSelected}return!0}},watch:{activePoll:function(t,e){null==t&&(this.text="",this.optionSelected=null,this.boolChoice=null,this.rating=0)},"currentUser.handRaised":function(t,e){let s=this;this.$nextTick(()=>{t?s.$root.$refs.SugarIcon.colorizeIcon(s.$refs.raiseHandButton,s.currentUser.colorvalue):s.$root.$refs.SugarIcon.colorizeIcon(s.$refs.raiseHandButton,{fill:"#ffffff",stroke:"#d3d3d3"})})}},mounted(){let t=this;this.$root.$refs.SugarIcon.generateIconWithColors(this.ratingIcons.unselected,{fill:"#ffffff",stroke:this.currentUser.colorvalue.stroke}).then(e=>{t.ratingIcons.unselected=e}),this.$root.$refs.SugarIcon.generateIconWithColors(this.ratingIcons.selected,this.currentUser.colorvalue).then(e=>{t.ratingIcons.selected=e}),this.$root.$refs.SugarIcon.generateIconWithColors(this.yesnoIcons.yes,this.currentUser.colorvalue).then(e=>{t.yesnoIcons.yes=e}),this.$root.$refs.SugarIcon.generateIconWithColors(this.yesnoIcons.no,this.currentUser.colorvalue).then(e=>{t.yesnoIcons.no=e}),document.addEventListener("keydown",this.onKeyDown)},methods:{onKeyDown(t){if(t.keyCode>=49&&t.keyCode<=57)"MCQ"==this.activePoll.typeVariable||"ImageMCQ"==this.activePoll.typeVariable?t.keyCode-49<this.activePoll.options.length&&(this.optionSelected=t.keyCode-49):"Rating"==this.activePoll.typeVariable&&t.keyCode-48<=5&&(this.rating=t.keyCode-48);else switch(t.keyCode){case 13:this.submit();break;case 32:t.ctrlKey&&this.switchHandRaise();break;case 78:"YesNo"==this.activePoll.typeVariable&&(this.boolChoice=!1);break;case 89:"YesNo"==this.activePoll.typeVariable&&(this.boolChoice=!0)}},switchHandRaise(){this.$emit("hand-raise-switched",!this.currentUser.handRaised)},getRatingStar(t){return`url(${t<=this.rating?this.ratingIcons.selected:this.ratingIcons.unselected})`},submit(){switch(this.activePoll.typeVariable){case"Text":this.$emit("vote-submitted",this.text);break;case"YesNo":this.$emit("vote-submitted",this.boolChoice);break;case"MCQ":case"ImageMCQ":this.$emit("vote-submitted",this.optionSelected);break;case"Rating":this.$emit("vote-submitted",this.rating)}}}};