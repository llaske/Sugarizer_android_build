enyo.kind({name:"onyx.Menu",kind:"onyx.Popup",modal:!0,defaultKind:"onyx.MenuItem",classes:"onyx-menu",showOnTop:!1,handlers:{onActivate:"itemActivated",onRequestShowMenu:"requestMenuShow",onRequestHideMenu:"requestHide"},itemActivated:function(t,i){return i.originator.setActive(!1),!0},showingChanged:function(){this.inherited(arguments),this.adjustPosition(!0)},requestMenuShow:function(t,i){if(this.floating){var o=i.activator.hasNode();if(o){var e=this.activatorOffset=this.getPageOffset(o);this.applyPosition({top:e.top+(this.showOnTop?0:e.height),left:e.left,width:e.width})}}return this.show(),!0},applyPosition:function(t){var i="";for(n in t)i+=n+":"+t[n]+(isNaN(t[n])?"; ":"px; ");this.addStyles(i)},getPageOffset:function(t){var i=t.getBoundingClientRect(),o=void 0===window.pageYOffset?document.documentElement.scrollTop:window.pageYOffset,e=void 0===window.pageXOffset?document.documentElement.scrollLeft:window.pageXOffset,n=void 0===i.height?i.bottom-i.top:i.height,s=void 0===i.width?i.right-i.left:i.width;return{top:i.top+o,left:i.left+e,height:n,width:s}},adjustPosition:function(t){if(this.showing&&this.hasNode()){this.removeClass("onyx-menu-up"),this.floating?enyo.noop:this.applyPosition({left:"auto"});var i=this.node.getBoundingClientRect(),o=void 0===i.height?i.bottom-i.top:i.height,e=void 0===window.innerHeight?document.documentElement.clientHeight:window.innerHeight,n=void 0===window.innerWidth?document.documentElement.clientWidth:window.innerWidth;if(this.menuUp=i.top+o>e&&e-i.bottom<i.top-o,this.addRemoveClass("onyx-menu-up",this.menuUp),this.floating){var s=this.activatorOffset;this.menuUp?this.applyPosition({top:s.top-o+(this.showOnTop?s.height:0),bottom:"auto"}):i.top<s.top&&s.top+(t?s.height:0)+o<e&&this.applyPosition({top:s.top+(this.showOnTop?0:s.height),bottom:"auto"})}i.right>n&&(this.floating?this.applyPosition({left:s.left-(i.left+i.width-n)}):this.applyPosition({left:-(i.right-n)}))}},resizeHandler:function(){this.inherited(arguments),this.adjustPosition(!0)},requestHide:function(){this.setShowing(!1)}});