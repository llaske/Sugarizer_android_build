!function(t,r){"use strict";"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():t.picoModal=r()}(this,(function(){"use strict";function a(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType}function c(){var t=[];return{watch:t.push.bind(t),trigger:function(r,s){for(var u=!0,m={detail:s,preventDefault:function(){u=!1}},y=0;y<t.length;y++)t[y](r,m);return u}}}function d(t){return"none"===window.getComputedStyle(t).display}function e(t){this.elem=t}function f(t,r){return e.make(t("parent")).clazz("pico-overlay").clazz(t("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(t("overlayStyles",{opacity:.5,background:"#000"})).onClick((function(){t("overlayClose",!0)&&r()}))}function g(r,s){var u=r("width","auto");"number"==typeof u&&(u+="px");var m=r("modalId","pico-"+t++);return e.make(r("parent")).clazz("pico-content").clazz(r("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:u,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(r("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(r("content")).attr("id",m).attr("role","dialog").attr("aria-labelledby",r("ariaLabelledBy")).attr("aria-describedby",r("ariaDescribedBy",m)).onClick((function(t){new e(t.target).anyAncestor((function(t){return/\bpico-close\b/.test(t.elem.className)}))&&s()}))}function h(t,r){return r("closeButton",!0)?t.child("button").html(r("closeHtml","&#xD7;")).clazz("pico-close").clazz(r("closeClass","")).stylize(r("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",r("close-label","Close")):void 0}function i(t){return function(){return t().elem}}function j(t,r){function c(t,r){return(t.msMatchesSelector||t.webkitMatchesSelector||t.matches).call(t,r)}function e(t){return!(d(t)||c(t,":disabled")||t.hasAttribute("contenteditable"))&&(t.hasAttribute("tabindex")||c(t,"input,select,textarea,button,a[href],area[href],iframe"))}function f(t){for(var r=t.getElementsByTagName("*"),s=0;s<r.length;s++)if(e(r[s]))return r[s]}function g(t){for(var r=t.getElementsByTagName("*"),s=r.length;s--;)if(e(r[s]))return r[s]}var u;t.beforeShow((function(){u=document.activeElement})),t.afterShow((function(){if(r()){var s=f(t.modalElem());s&&s.focus()}})),t.afterClose((function(){r()&&u&&u.focus(),u=null})),s.watch((function(s){if(r()&&t.isVisible()){var u=f(t.modalElem()),m=g(t.modalElem());(s.shiftKey?u:m)===document.activeElement&&((s.shiftKey?m:u).focus(),s.preventDefault())}}))}function k(t,r){var s,u=new e(document.body);t.beforeShow((function(){s=u.elem.style.overflow,r()&&u.stylize({overflow:"hidden"})})),t.afterClose((function(){u.stylize({overflow:s})}))}e.make=function(t,r){"string"==typeof t&&(t=document.querySelector(t));var s=document.createElement(r||"div");return(t||document.body).appendChild(s),new e(s)},e.prototype={child:function(t){return e.make(this.elem,t)},stylize:function(t){for(var r in void 0!==(t=t||{}).opacity&&(t.filter="alpha(opacity="+100*t.opacity+")"),t)t.hasOwnProperty(r)&&(this.elem.style[r]=t[r]);return this},clazz:function(t){return this.elem.className+=" "+t,this},html:function(t){return a(t)?this.elem.appendChild(t):this.elem.innerHTML=t,this},onClick:function(t){return this.elem.addEventListener("click",t),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(t,r){return void 0!==r&&this.elem.setAttribute(t,r),this},anyAncestor:function(t){for(var r=this.elem;r;){if(t(new e(r)))return!0;r=r.parentNode}return!1},isVisible:function(){return!d(this.elem)}};var t=1,r=c(),s=c();return document.documentElement.addEventListener("keydown",(function(t){var u=t.which||t.keyCode;27===u?r.trigger():9===u&&s.trigger(t)})),function(t){function e(r,s){var u=t[r];return"function"==typeof u&&(u=u(s)),void 0===u?s:u}function l(t){C().hide(),x().hide(),z.trigger(s,t)}function n(t){v.trigger(s,t)&&l(t)}function o(t){return function(){return t.apply(this,arguments),s}}function p(t,r){if(!u){var y=g(e,n);u={modal:y,overlay:f(e,n),close:h(y,e)},m.trigger(s,r)}return u[t]}(function b(t){return"string"==typeof t}(t)||a(t))&&(t={content:t});var s,u,m=c(),y=c(),w=c(),v=c(),z=c(),x=p.bind(window,"modal"),C=p.bind(window,"overlay"),E=p.bind(window,"close");return s={modalElem:i(x),closeElem:i(E),overlayElem:i(C),buildDom:o(p.bind(null,null)),isVisible:function(){return!!(u&&x&&x().isVisible())},show:function(t){return y.trigger(s,t)&&(C().show(),E(),x().show(),w.trigger(s,t)),this},close:o(n),forceClose:o(l),destroy:function(){x().destroy(),C().destroy(),C=x=E=void 0},options:function(r){Object.keys(r).map((function(s){t[s]=r[s]}))},afterCreate:o(m.watch),beforeShow:o(y.watch),afterShow:o(w.watch),beforeClose:o(v.watch),afterClose:o(z.watch)},j(s,e.bind(null,"focus",!0)),k(s,e.bind(null,"bodyOverflow",!0)),r.watch((function(){e("escCloses",!0)&&s.isVisible()&&s.close()})),s}}));