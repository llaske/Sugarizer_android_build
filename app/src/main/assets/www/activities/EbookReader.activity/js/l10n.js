var Localization={template:"<div/>",data:function(){return{l10n:null,code:null,dictionary:null,eventReceived:!1,activityInitialized:!1,units:[{name:"Years",factor:30758400},{name:"Months",factor:2592e3},{name:"Weeks",factor:604800},{name:"Days",factor:86400},{name:"Hours",factor:3600},{name:"Minutes",factor:60}]}},computed:{readyToEmit:function(){return null!=this.dictionary&&this.activityInitialized}},watch:{readyToEmit:function(e,t){e&&(this.$emit("localized"),this.eventReceived=!0)}},mounted:function(){const e=this;null==e.l10n&&requirejs(["sugar-web/env"],(function(t){t.getEnvironment(((t,n)=>{const i="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,a=n.user?n.user.language:i;null==e.l10n&&e.loadLanguageFile(a)}))})),e.$root.$children.find((function(t){"SugarActivity"===t.$options.name&&t.$on("initialized",(function(){e.activityInitialized=!0}))}))},methods:{loadLanguageFile:function(e){const t=this;requirejs(["lib/i18next.min.js","lib/axios.min.js"],(function(n,i){i.get(`./locales/${e}.json`).then((i=>{n.init({lng:e,fallbackLng:"en",debug:!1,resources:{[e]:{translation:i.data}}},(()=>{t.l10n=n,t.code=n.language,t.dictionary=n.getResourceBundle(n.language,"translation"),t.subscribeLanguageChange(),t.activityInitialized=!0}))})).catch((e=>{t.loadLanguageFile("en"),console.log(e)}))}))},subscribeLanguageChange:function(){const e=this;requirejs(["lib/i18next.min.js"],(function(t){t.on("languageChanged",(n=>{e.code=n,e.dictionary=t.getResourceBundle(n,"translation"),e.$emit("localized"),e.eventReceived=!0}))}))},get:function(e,t){let n="";if(n=this.dictionary&&this.dictionary[e]||e,t){let e=n.match(/{{\s*[\w\.]+\s*}}/g);for(let i in e){let a=e[i].match(/[\w\.]+/)[0];t[a]&&(n=n.replace(e[i],t[a]))}}return n},localize:function(e){const t=this;Object.keys(e).forEach(((n,i)=>{e[n]=t.get(n.substr(6))}))},localizeTimestamp:function(e){const t=0;let n="",i=(Date.now()-e)/1e3;for(let e=0;e<this.units.length;e++){let a=this.units[e].factor,o=Math.floor(i/a);if(o>0&&(t>0&&(n+=","),n+=" "+o+" "+(1==o?this.get(this.units[e].name+"_one"):this.get(this.units[e].name+"_other")),i-=o*a),""!=n&&(t+=1),2==t)break}return 0==t?this.get("SecondsAgo"):this.get("Ago",{time:n})}}};