!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";
/**
   * [chartjs-plugin-labels]{@link https://github.com/DavideViolante/chartjs-plugin-labels}
   *
   * @version 3.1.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com], Davide Violante, Yousef Altaher
   * @copyright Chen, Yi-Cyuan 2017-2018
   * @license MIT
   */!function(){if("undefined"==typeof Chart)return void console.error("Cannot find Chart object.");const t=Chart.helpers;"function"!=typeof Object.assign&&(Object.assign=function(t){if(!t)throw new TypeError("Cannot convert undefined or null to object");const e=Object(t);for(let t=1;t<arguments.length;t++){const i=arguments[t];if(i)for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e});const e={};function o(){this.renderToDataset=this.renderToDataset.bind(this)}function n(t){const e=t._context.chart.config._config;return!(!e.options||!e.options.plugins||!e.options.plugins.labels)}["pie","doughnut","polarArea","bar"].forEach((function(t){e[t]=!0})),o.prototype.setup=function(t,e){this.chart=t,this.ctx=t.ctx,this.args={},this.barTotal={};const i=t.config.options;this.options=Object.assign({position:"default",precision:0,fontSize:i.font?i.font.size:12,fontColor:i.color||"#333333",fontStyle:i.font?i.font.style:"normal",fontFamily:i.font?i.font.family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",shadowOffsetX:3,shadowOffsetY:3,shadowColor:"rgba(0,0,0,0.3)",shadowBlur:6,images:[],outsidePadding:2,textMargin:2,overlap:!0},e),"bar"===t.config.type&&(this.options.position="default",this.options.arc=!1,this.options.overlap=!0)},o.prototype.render=function(){this.labelBounds=[],this.chart.data.datasets.forEach(this.renderToDataset)},o.prototype.renderToDataset=function(t,e){this.totalPercentage=0,this.total=null;const i=this.args[e];i.meta.data.forEach(function(e,s){this.renderToElement(t,i,e,s)}.bind(this))},o.prototype.renderToElement=function(e,i,s,r){if(!this.shouldRenderToElement(i.meta,s))return;this.percentage=null;const a=this.getLabel(e,s,r);if(!a)return;const h=this.ctx;h.save(),h.font=t.fontString(this.options.fontSize,this.options.fontStyle,this.options.fontFamily);const l=this.getRenderInfo(s,a);this.drawable(s,a,l)?(h.beginPath(),h.fillStyle=this.getFontColor(e,s,r),this.renderLabel(a,l),h.restore()):h.restore()},o.prototype.renderLabel=function(t,e){return this.options.arc?this.renderArcLabel(t,e):this.renderBaseLabel(t,e)},o.prototype.renderBaseLabel=function(t,e){const i=this.ctx;if("object"==typeof t)i.drawImage(t,e.x-t.width/2,e.y-t.height/2,t.width,t.height);else{i.save(),i.textBaseline="top",i.textAlign="center",this.options.textShadow&&(i.shadowOffsetX=this.options.shadowOffsetX,i.shadowOffsetY=this.options.shadowOffsetY,i.shadowColor=this.options.shadowColor,i.shadowBlur=this.options.shadowBlur);const s=t.split("\n");for(let t=0;t<s.length;t++){const r=e.y-this.options.fontSize/2*s.length+this.options.fontSize*t;i.fillText(s[t],e.x,r)}i.restore()}},o.prototype.renderArcLabel=function(t,e){const i=this.ctx,s=e.radius,r=e.view;if(i.save(),i.translate(r.x,r.y),"string"==typeof t){i.rotate(e.startAngle),i.textBaseline="middle",i.textAlign="left";const r=t.split("\n");let a=0;const h=[];let l,c=0;"border"===this.options.position&&(c=(r.length-1)*this.options.fontSize/2);for(let t=0;t<r.length;++t)l=i.measureText(r[t]),l.width>a&&(a=l.width),h.push(l.width);for(let t=0;t<r.length;++t){const e=r[t],f=(r.length-1-t)*-this.options.fontSize+c;i.save();const p=(a-h[t])/2;i.rotate(p/s);for(let t=0;t<e.length;t++){const r=e.charAt(t);l=i.measureText(r),i.save(),i.translate(0,-1*s),i.fillText(r,0,f),i.restore(),i.rotate(l.width/s)}i.restore()}}else i.rotate((r.startAngle+Math.PI/2+e.endAngle)/2),i.translate(0,-1*s),this.renderLabel(t,{x:0,y:0});i.restore()},o.prototype.shouldRenderToElement=function(t,e){return!t.hidden&&(this.options.showZero||"polarArea"===this.chart.config.type?0!==e.outerRadius:0!==e.circumference)},o.prototype.getLabel=function(t,e,i){let s;if("function"==typeof this.options.render)s=this.options.render({label:this.chart.config.data.labels[i],value:t.data[i],percentage:this.getPercentage(t,e,i),dataset:t,index:i});else switch(this.options.render){case"value":s=t.data[i];break;case"label":s=this.chart.config.data.labels[i];break;case"image":s=this.options.images[i]?this.loadImage(this.options.images[i]):"";break;default:s=this.getPercentage(t,e,i)+"%"}return"object"==typeof s?s=this.loadImage(s):s&&(s=s.toString()),s},o.prototype.getFontColor=function(t,e,i){let s=this.options.fontColor;return"function"==typeof s?s=s({label:this.chart.config.data.labels[i],value:t.data[i],percentage:this.getPercentage(t,e,i),backgroundColor:t.backgroundColor[i],dataset:t,index:i}):"string"!=typeof s&&(s=s[i]||this.chart.config.options.color),s},o.prototype.getPercentage=function(t,e,i){if(this.percentage)return this.percentage;let s;if("polarArea"===this.chart.config.type||"doughnut"===this.chart.config.type||"pie"===this.chart.config.type){if(!this.total){this.total=0;for(let e=0;e<t.data.length;++e)this.total+=t.data[e]}s=t.data[i]/this.total*100}else if("bar"===this.chart.config.type){if(!this.barTotal[i]){this.barTotal[i]=0;for(let t=0;t<this.chart.data.datasets.length;++t)this.barTotal[i]+=this.chart.data.datasets[t].data[i]}s=t.data[i]/this.barTotal[i]*100}else s=e.circumference/this.chart.config.options.circumference*100;return s=parseFloat(s.toFixed(this.options.precision)),this.options.showActualPercentages||("bar"===this.chart.config.type&&(this.totalPercentage=this.barTotalPercentage[i]||0),this.totalPercentage+=s,this.totalPercentage>100&&(s-=this.totalPercentage-100,s=parseFloat(s.toFixed(this.options.precision))),"bar"===this.chart.config.type&&(this.barTotalPercentage[i]=this.totalPercentage)),this.percentage=s,s},o.prototype.getRenderInfo=function(t,e){return"bar"===this.chart.config.type?this.getBarRenderInfo(t,e):this.options.arc?this.getArcRenderInfo(t,e):this.getBaseRenderInfo(t,e)},o.prototype.getBaseRenderInfo=function(t,e){if("outside"===this.options.position||"border"===this.options.position){let i,s={};const r=t,a=r.startAngle+(r.endAngle-r.startAngle)/2,h=r.outerRadius/2;if("border"===this.options.position?i=(r.outerRadius-h)/2+h:"outside"===this.options.position&&(i=r.outerRadius-h+h+this.options.textMargin),s={x:r.x+Math.cos(a)*i,y:r.y+Math.sin(a)*i},"outside"===this.options.position){const t=this.options.textMargin+this.measureLabel(e).width/2;s.x+=s.x<r.x?-t:t}return s}return t.tooltipPosition()},o.prototype.getArcRenderInfo=function(t,e){let i;const s=t;i="outside"===this.options.position?s.outerRadius+this.options.fontSize+this.options.textMargin:"border"===this.options.position?(s.outerRadius/2+s.outerRadius)/2:(s.innerRadius+s.outerRadius)/2;let r=s.startAngle,a=s.endAngle;const h=a-r;return r+=Math.PI/2,a+=Math.PI/2,r+=(a-(this.measureLabel(e).width/i+r))/2,{radius:i,startAngle:r,endAngle:a,totalAngle:h,view:s}},o.prototype.getBarRenderInfo=function(t,e){const i=t.tooltipPosition();return i.y-=this.measureLabel(e).height/2+this.options.textMargin,i},o.prototype.drawable=function(t,e,i){if(this.options.overlap)return!0;if(this.options.arc)return i.endAngle-i.startAngle<=i.totalAngle;{const s=this.measureLabel(e),r=i.x-s.width/2,a=i.x+s.width/2,h=i.y-s.height/2,l=i.y+s.height/2;return"outside"===this.options.position?this.outsideInRange(r,a,h,l):t.inRange(r,h)&&t.inRange(r,l)&&t.inRange(a,h)&&t.inRange(a,l)}},o.prototype.outsideInRange=function(t,e,i,s){const r=this.labelBounds;for(let a=0;a<r.length;++a){const h=r[a];let l=[[t,i],[t,s],[e,i],[e,s]];for(let t=0;t<l.length;++t){const e=l[t][0],i=l[t][1];if(e>=h.left&&e<=h.right&&i>=h.top&&i<=h.bottom)return!1}l=[[h.left,h.top],[h.left,h.bottom],[h.right,h.top],[h.right,h.bottom]];for(let r=0;r<l.length;++r){const a=l[r][0],h=l[r][1];if(a>=t&&a<=e&&h>=i&&h<=s)return!1}}return r.push({left:t,right:e,top:i,bottom:s}),!0},o.prototype.measureLabel=function(t){if("object"==typeof t)return{width:t.width,height:t.height};{let e=0;const i=t.split("\n");for(let t=0;t<i.length;++t){const s=this.ctx.measureText(i[t]);s.width>e&&(e=s.width)}return{width:e,height:this.options.fontSize*i.length}}},o.prototype.loadImage=function(t){const e=new Image;return e.src=t.src,e.width=t.width,e.height=t.height,e},Chart.register({id:"labels",beforeDatasetsUpdate:function(t,i,s){if(!e[t.config.type]||!n(s))return;s.length||(s=[s]);const r=s.length;t._labels&&r===t._labels.length||(t._labels=s.map((function(){return new o})));let a=!1,h=0;for(let e=0;e<r;++e){const i=t._labels[e];if(i.setup(t,s[e]),"outside"===i.options.position){a=!0;const t=1.5*i.options.fontSize+i.options.outsidePadding;t>h&&(h=t)}}a&&(t.chartArea.top+=h,t.chartArea.bottom-=h)},afterDatasetUpdate:function(t,i,s){e[t.config.type]&&n(s)&&t._labels?.forEach((function(t){t.args[i.index]=i}))},beforeDraw:function(t,i,s){e[t.config.type]&&n(s)&&t._labels?.forEach((function(t){t.barTotalPercentage={}}))},afterDatasetsDraw:function(t,i,s){e[t.config.type]&&n(s)&&t._labels?.forEach((function(t){t.render()}))}})}()}));