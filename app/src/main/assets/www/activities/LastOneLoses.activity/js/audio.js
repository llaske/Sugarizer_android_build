enyo.kind({name:"HTML5.Audio",kind:enyo.Control,tag:"audio",published:{src:"",crossorigin:"",preload:"auto",mediagroup:"",loop:!1,muted:"",controlsbar:!1},events:{onSoundEnded:"",onSoundTimeupdate:""},create:function(){this.inherited(arguments),this.isCordova=(enyo.platform.android||enyo.platform.androidChrome||enyo.platform.ios)&&"http"!=document.location.protocol.substr(0,4),this.startPlay=!1,this.srcChanged(),this.crossoriginChanged(),this.preloadChanged(),this.loopChanged(),this.mutedChanged(),this.controlsbarChanged()},rendered:function(){if(this.inherited(arguments),this.hasNode()){var t=this;enyo.dispatcher.listen(t.hasNode(),"ended",(function(){t.doSoundEnded()})),enyo.dispatcher.listen(t.hasNode(),"timeupdate",(function(e){t.doSoundTimeupdate({timeStamp:e.timeStamp})}))}},srcChanged:function(){this.setAttribute("src",this.src)},crossoriginChanged:function(){this.setAttribute("crossorigin",this.crossorigin)},preloadChanged:function(){this.setAttribute("preload",this.preload)},loopChanged:function(){this.setAttribute("loop",this.loop)},mutedChanged:function(){0!=this.muted.length&&this.setAttribute("muted",this.muted)},controlsbarChanged:function(){this.setAttribute("controls",this.controlsbar)},canPlayType:function(t){var e=this.hasNode();return!!e&&e.canPlayType(t)},play:function(){if(this.isCordova){var t=location.pathname.substring(0,1+location.pathname.lastIndexOf("/"))+this.src,e=this;new Media(t,(function(){var t=window.setInterval((function(){window.clearInterval(t),e.doSoundEnded()}),1e3*this.getDuration())}),(function(){})).play()}else{var n=this.hasNode();if(n){this.started=!1;var i=n.play();if(i){e=this;i.then((function(){e.started=!0})).catch((function(){}))}else this.started=!0}}},pause:function(){var t=this.hasNode();t&&this.started&&t.pause()},paused:function(){var t=this.hasNode();return!!t&&t.paused},ended:function(){var t=this.hasNode();return!!t&&t.ended}});