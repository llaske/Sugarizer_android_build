define(["sugar-web/activity/activity","sugar-web/env"],(function(t,a){"use strict";var e={init:function(e){if(a.isStandalone())e();else{localStorage.clear();t.getDatastoreObject().loadAsText((function(t,a,i){var n=JSON.parse(i);for(var o in n)localStorage[o]=n[o];e()}))}},save:function(e){if(void 0===e&&(e=function(){}),a.isStandalone())e();else{var i=t.getDatastoreObject(),n=JSON.stringify(localStorage);i.setDataAsText(n),i.save((function(t){e(t)}))}}};return e}));