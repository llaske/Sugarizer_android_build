var TemplateSelection={template:'\n\t\t<div class="template-selection" :style="{backgroundColor: userColors.fill}">\n\t\t\t<div class="template" v-for="(template, i) in defaultTemplates" :key="template.title" :id="i" @click="$emit(\'template-selected\', template)">\n\t\t\t\t<div class="template-image">\n\t\t\t\t\t<img :src="template.templateImage">\n\t\t\t\t</div>\n\t\t\t\t<div class="template-content">\n\t\t\t\t\t<span>{{ template.templateTitle }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button class="add-template" id="add-button" @click="showAddPopup = true"></button>\n\n\t\t\t<form @submit.prevent="addTemplate" class="template-popup" v-if="showAddPopup">\n\t\t\t\t<div class="popup-header">\n\t\t\t\t\t<h2 style="margin: 0">Add Template</h2>\n\t\t\t\t\t<div class="popup-buttons">\n\t\t\t\t\t\t<button type="button" id="cancel-button" @click="showAddPopup = false"></button>\n\t\t\t\t\t\t<button type="submit" id="confirm-button" :disabled="templateURL == \'\'"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="popup-body">\n\t\t\t\t\t<label for="template-url">Template URL</label>\n\t\t\t\t\t<input type="url" id="template-url" v-model="templateURL">\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t',props:["userColors"],data:function(){return{showAddPopup:!1,editIndex:null,templateURL:"",defaultTemplates:[]}},mounted:function(){var t=this;this.loadList().then(async e=>{e=JSON.parse(e);for(let a of e){let e=await this.loadTemplate(a);if(e=JSON.parse(e),null!=e.metadata){let a=JSON.parse(t.$root.$refs.SugarJournal.LZString.decompressFromUTF16(e.text));e={templateTitle:e.metadata.title,templateImage:a.templateImage,notationLevel:a.notationLevel,categories:a.categories}}else e.templateTitle=t.$root.$refs.SugarL10n.get(e.templateTitle);t.defaultTemplates.push(e)}})},methods:{loadList:()=>new Promise((t,e)=>{requirejs(["text!../defaultTemplates/templates.json"],(function(e){t(e)}))}),loadTemplate:t=>new Promise((e,a)=>{requirejs(["text!../defaultTemplates/"+t],(function(t){e(t)}))}),addTemplate:function(){var t=this;requirejs(["text!"+t.templateURL],(function(e){e=JSON.parse(e);var a=JSON.parse(t.$root.$refs.SugarJournal.LZString.decompressFromUTF16(e.text));t.$emit("template-selected",{fromURL:!0,templateTitle:e.metadata.title,templateImage:a.templateImage,categories:a.categories,notationLevel:a.notationLevel}),showPopup=!1}))}}};