define(["sugar-web/activity/activity","sugar-web/env","filterpalette","tutorial","l10n"],(function(e,t,n,i,o){var r=!1;requirejs(["domReady!"],(function(l){e.setup(),t.getEnvironment((function(e,t){currentenv=t;var n="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,i=t.user?t.user.language:n;o.init(i)}));var a=document.getElementById("filter-button");(n=new n.FilterPalette(a,void 0)).addEventListener("filter",(function(){app.setFilter({category:n.getFilter()}),Util.saveContext(),n.popDown()})),document.getElementById("favorite-button").onclick=function(e,t){var n=e.toElement||e.explicitOriginalTarget||e.currentTarget;r=!r,n.style.backgroundImage=r?"url(icons/favorite.svg)":"url(icons/notfavorite.svg)",app.setFilter({favorite:r})},document.getElementById("library-button").onclick=function(e,t){app.showLibraries()},document.getElementById("help-button").onclick=function(e){i.start()},document.getElementById("fullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.display="none",document.getElementById("unfullscreen-button").style.visibility="visible",app.resize()})),document.getElementById("unfullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.display="block",document.getElementById("unfullscreen-button").style.visibility="hidden",app.resize()})),app=new VideoViewer.App({activity:e,filter:n}),app.renderInto(document.getElementById("viewer")),(new Sugar.SearchField).renderInto(document.getElementById("search")),Util.loadContext((function(){app.draw()}))}))}));