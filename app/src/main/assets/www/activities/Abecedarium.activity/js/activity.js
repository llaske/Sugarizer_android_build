define(["sugar-web/activity/activity","sugar-web/datastore","tutorial","sugar-web/env","l10n"],(function(e,t,n,d,c){Abcd||(Abcd={}),Abcd.activity=e,Abcd.datastore=t,app=null,requirejs(["domReady!","humane"],(function(e,t){Abcd.activity.setup(),Abcd.humane=t,d.getEnvironment((function(e,t){currentenv=t;var n="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,d=t.user?t.user.language:n;c.init(d),"fr"!=d&&"en"!=d&&"es"!=d||(Abcd.context.lang=d)})),Abcd.sound=new Abcd.Audio,Abcd.sound.renderInto(document.getElementById("header")),Abcd.loadDatabase((function(e){Abcd.initL10n(),app=(new Abcd.App).renderInto(document.getElementById("body")),Abcd.loadContext((function(){app.restartLastGame()}))})),document.getElementById("stop-button").addEventListener("click",(function(e){Abcd.sound.pause()})),document.getElementById("help-button").addEventListener("click",(function(e){n.start()})),document.getElementById("fullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.visibility="hidden",document.getElementById("canvas").style.top="0px",document.getElementById("unfullscreen-button").style.visibility="visible",Abcd.hideLang(),Abcd.hideCase()})),document.getElementById("unfullscreen-button").addEventListener("click",(function(){document.getElementById("main-toolbar").style.visibility="visible",document.getElementById("canvas").style.top="55px",document.getElementById("unfullscreen-button").style.visibility="hidden",Abcd.showLang(),Abcd.showCase()}))}))}));