const imageSize=[80,180,360,640];var StreetPlace={template:'\n\t\t<div class="place-padding">\n\t\t\t<div v-bind:class="containerClass" @click="onPlaceClicked">\n\t\t\t\t<img v-bind:src="image" @load="loaded" @error="error" class="place-image" v-bind:style="{visibility:visible?\'visible\':\'hidden\'}"/>\n\t\t\t\t<img v-bind:src="rightNotLoadedImage" class="place-image place-image2" v-bind:style="{visibility:!visible||hasError?\'visible\':\'hidden\'}"/>\n\t\t\t\t<div v-if="size>0" v-bind:class="descriptionClass">\n\t\t\t\t\t<span>{{"&nbsp;"+formattedIncome}}</span>\n\t\t\t\t\t<br>\n\t\t\t\t\t<span v-if="!topicMode" class="place-country">&nbsp;{{flag}}&nbsp;{{place.country.name}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="size>0" v-html="thingIcon" class="place-icon"></div>\n\t\t\t\t<img src="images/spinner-light.gif" v-bind:style="{visibility:(visible&&!isLoad&&!hasError)?\'visible\':\'hidden\'}" class="place-spinner"/>\n\t\t\t</div>\n\t\t</div>\n\t',props:{place:{type:Object},size:{type:Number,default:2},topicMode:{type:Boolean,default:!1}},data:function(){return{image:null,isLoad:!1,hasError:!1,visible:!1}},computed:{formattedIncome:function(){if(this.topicMode){let i=app.$refs.api.getThingByTopic(this.place.topics[0].id);return i&&i.thingName?i.thingName:""}return new Intl.NumberFormat(app.$refs.api.language,{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0}).format(Math.floor(this.place.place.income)).replace("$US","$")},flag:function(){return this.place.country.id.toUpperCase().replace(/./g,(function(i){return String.fromCodePoint(i.charCodeAt(0)+127397)}))},thingIcon:function(){let i=app.$refs.api.getThingByTopic(this.place.topics[0].id);return i?i.svg:""},containerClass:function(){return{place:!0,place0:0==this.size,place1:1==this.size,place2:2==this.size,place3:3==this.size}},descriptionClass:function(){return{placelabel:!0,placelabel0:0==this.size,placelabel1:1==this.size,placelabel2:2==this.size,placelabel3:3==this.size}},rightNotLoadedImage:function(){return"images/notloaded"+this.size+".png"}},methods:{loaded:function(){this.isLoad=!0,this.hasError=!1,this.visible=!0},error:function(){this.isLoad=!1,this.hasError=!0,this.visible=!1},isVisible:function(){let i=this.$el.getBoundingClientRect();return i.top<window.innerHeight&&i.bottom>=0},onPlaceClicked:function(){this.$emit("place-clicked",this.place)}},watch:{visible:function(i){this.visible=i,this.visible&&(this.image=this.place.images["cropped"+imageSize[this.size]])},size:function(i){this.size=i,this.visible&&(this.image=this.place.images["cropped"+imageSize[this.size]])}}};