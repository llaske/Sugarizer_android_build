define(["mustache","l10n","sugar-web/graphics/journalchooser"],(function(t,e,o){function backgroundColorFill(){n.database=[{code:"#ffffff",text:e.get("white"),i:0},{code:"#919496",text:e.get("silver"),i:1},{code:"#000000",text:e.get("black"),i:2},{code:"#5E008C",text:e.get("purple"),i:3},{code:"#A700FF",text:e.get("violet"),i:4},{code:"#FFFA00",text:e.get("yellow"),i:5},{code:"#00A0FF",text:e.get("lightBlue"),i:6},{code:"#008009",text:e.get("darkGreen"),i:7},{code:"#FF8F00",text:e.get("orange"),i:8},{code:"#005FE4",text:e.get("darkBlue"),i:9},{code:"#00EA11",text:e.get("lightGreen"),i:10},{code:"#FF2B34",text:e.get("red"),i:11}];var t=n.database,o=document.getElementById("search-text").value.toLowerCase();if(o.length){t=[];for(var i=0;i<n.database.length;i++)-1!=n.database[i].text.toLowerCase().indexOf(o)&&t.push(n.database[i])}n.results=t,n.resultCount=30,BackgroundColorDisplay(t,n.resultCount)}function BackgroundColorDisplay(e,n){var i={items:e.slice(0,n)},l=t.render("\t\t\t{{#items}}\t\t\t<div id='color_{{code}}' style='height:60px'>\t\t\t\t<div id='colorIcon_{{code}}' class='toolbutton' style='border-style:solid;border-width:thin;background-color:{{code}};background-size:40px 40px;width:40px;height:40px;display:inline-block;margin-left:20px;margin-top:5px;'></div>\t\t\t\t<div id='colorText_{{code}}' style='color:black;display:inline-block;vertical-align:middle;margin-left:30px;height:60px;margin-top:10px;font-weight:bold;font-size:14px;'>{{text}}</div>\t\t\t</div>\t\t\t{{/items}}\t\t",i);document.getElementById("journal-empty").style.visibility=0!=e.length?"hidden":"visible",document.getElementById("journal-container").innerHTML=l;let r=new Event("updateBackgroundListener",{bubbles:!0});for(var c=Math.min(n,e.length),d=0;d<c;d++){var a=document.getElementById("color_"+e[d].code);a.addEventListener("click",(function(t){var e=t.target.id;e=e.substr(e.indexOf("_")+1);var n=document.getElementById("color_"+e);document.getElementById("cy").style.backgroundImage="",document.getElementById("cy").style.backgroundColor=e,n.style.backgroundColor="#808080",a.dispatchEvent(r),o.close()}))}}var n={id:"background-color-button",title:"titleBackgroundColor",placeholder:"holderSearchBackgroundColor",icon:"lib/sugar-web/graphics/icons/actions/tool-bucket.svg",beforeActivate:function(){document.getElementById("favorite-button").style.visibility="hidden",backgroundColorFill()},beforeUnactivate:function(){document.getElementById("favorite-button").style.visibility="visible"},onFavorite:function(){},onScroll:function(){var t=document.getElementById("journal-container");t.scrollTop/(t.scrollHeight-t.clientHeight)>.9&&(n.resultCount+=30,BackgroundColorDisplay(n.results,n.resultCount))},onSearch:function(){backgroundColorFill()},onCancelSearch:function(){backgroundColorFill()}};return n}));