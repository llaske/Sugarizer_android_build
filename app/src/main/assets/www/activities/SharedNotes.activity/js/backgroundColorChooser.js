define(["mustache","webL10n","sugar-web/graphics/journalchooser"],(function(e,t,o){function backgroundColorFill(){n.database=[{code:"#ffffff",text:t.get("white"),i:0},{code:"#919496",text:t.get("silver"),i:1},{code:"#000000",text:t.get("black"),i:2},{code:"#5E008C",text:t.get("purple"),i:3},{code:"#A700FF",text:t.get("violet"),i:4},{code:"#FFFA00",text:t.get("yellow"),i:5},{code:"#00A0FF",text:t.get("lightBlue"),i:6},{code:"#008009",text:t.get("darkGreen"),i:7},{code:"#FF8F00",text:t.get("orange"),i:8},{code:"#005FE4",text:t.get("darkBlue"),i:9},{code:"#00EA11",text:t.get("lightGreen"),i:10},{code:"#FF2B34",text:t.get("red"),i:11}];var e=n.database,o=document.getElementById("search-text").value.toLowerCase();if(o.length){e=[];for(var i=0;i<n.database.length;i++)-1!=n.database[i].text.toLowerCase().indexOf(o)&&e.push(n.database[i])}n.results=e,n.resultCount=30,BackgroundColorDisplay(e,n.resultCount)}function BackgroundColorDisplay(t,n){var i={items:t.slice(0,n)},l=e.render("\t\t\t{{#items}}\t\t\t<div id='color_{{code}}' style='height:60px'>\t\t\t\t<div id='colorIcon_{{code}}' class='toolbutton' style='border-style:solid;border-width:thin;background-color:{{code}};background-size:40px 40px;width:40px;height:40px;display:inline-block;margin-left:20px;margin-top:5px;'></div>\t\t\t\t<div id='colorText_{{code}}' style='color:black;display:inline-block;vertical-align:middle;margin-left:30px;height:60px;margin-top:10px;font-weight:bold;font-size:14px;'>{{text}}</div>\t\t\t</div>\t\t\t{{/items}}\t\t",i);document.getElementById("journal-empty").style.visibility=0!=t.length?"hidden":"visible",document.getElementById("journal-container").innerHTML=l;let r=new Event("updateBackgroundListener",{bubbles:!0});for(var c=Math.min(n,t.length),d=0;d<c;d++){var a=document.getElementById("color_"+t[d].code);a.addEventListener("click",(function(e){var t=e.target.id;t=t.substr(t.indexOf("_")+1);var n=document.getElementById("color_"+t);document.getElementById("cy").style.backgroundImage="",document.getElementById("cy").style.backgroundColor=t,n.style.backgroundColor="#808080",a.dispatchEvent(r),o.close()}))}}var n={id:"background-color-button",title:"titleBackgroundColor",placeholder:"holderSearchBackgroundColor",icon:"lib/sugar-web/graphics/icons/actions/tool-bucket.svg",beforeActivate:function(){document.getElementById("favorite-button").style.visibility="hidden",backgroundColorFill()},beforeUnactivate:function(){document.getElementById("favorite-button").style.visibility="visible"},onFavorite:function(){},onScroll:function(){var e=document.getElementById("journal-container");e.scrollTop/(e.scrollHeight-e.clientHeight)>.9&&(n.resultCount+=30,BackgroundColorDisplay(n.results,n.resultCount))},onSearch:function(){backgroundColorFill()},onCancelSearch:function(){backgroundColorFill()}};return n}));