const TACAT={clear:"forward",forward:"forward",back:"forward",left:"forward",right:"forward",arc:"arc",x:"coord",y:"coord",heading:"coord",settranslucency:"pen",sethue:"pen",setxy:"setxy",seth:"setxy",penup:"pen",setpensize:"pen",setcolor:"pen",pensize:"pen",color:"pen",setshade:"pen",setgray:"pen",gray:"pen",fillscreen:"pen",beginfill:"fill",fill:"fill",setfont:"fill",hollowline:"fill",endfill:"fill",plus:"number",minus:"number",multiply:"number",power:"number",divide:"number",oneOf:"number",pendown:"pen",shade:"pen",mod:"number",int:"number",sqrt:"number",identity:"number",and:"boolean",or:"boolean",not:"boolean",greater:"boolean",less:"boolean",equal:"boolean",random:"random",repeat:"repeat",forever:"repeat",if:"ifthen",ifthenelse:"ifthen",while:"ifthen",until:"ifthen",action:"action",do:"action",nameddo:"action",listen:"action",broadcast:"action",calc:"action",doArg:"action",calcArg:"action",dispatch:"action",namedcalc:"action",nameddoArg:"action",namedcalcArg:"action",storein:"box",namedbox:"box",incrementOne:"box",luminance:"sensor",mousex:"sensor",mousey:"sensor",drum:"action",start:"action",mousebutton:"sensor",keyboard:"sensor",readpixel:"sensor",see:"sensor",time:"sensor",sound:"sensor",volume:"sensor",resistance:"sensor",voltage:"sensor",video:"media",wait:"media",camera:"media",journal:"media",audio:"media",show:"media",setscale:"media",savepix:"media",savesvg:"media",mediawait:"media",mediapause:"media",mediastop:"media",mediaplay:"media",speak:"media",sinewave:"media",description:"media",push:"extras",pop:"extras",printheap:"extras",clearheap:"extras",isheapempty:"extras",chr:"extras",int:"number",myfunction:"python",userdefined:"python",box:"box",kbinput:"sensor",showHeap:"extras",emptyHeap:"extras",loadblock:"python",loadpalette:"python",matrix:"ignore",hidden:"ignore",rest2:"ignore",rhythm:"ignore",text:"ignore",number:"ignore",vspace:"ignore"},TAPAL={forward:"turtlep",arc:"turtlep",coord:"turtlep",setxy:"turtlep",pen:"penp",fill:"penp",random:"numberp",boolean:"numberp",repeat:"flowp",ifthen:"flowp",action:"boxp",box:"boxp",sensor:"sensorp",media:"mediap",extras:"extrasp",number:"numberp",python:"extrasp",ignore:"numberp"},TASCORE={forward:3,arc:3,setxy:2.5,coord:4,turtlep:5,pen:2.5,fill:2.5,penp:5,number:2.5,boolean:2.5,random:2.5,numberp:0,repeat:2.5,ifthen:7.5,flowp:10,box:7.5,action:7.5,boxp:0,media:5,mediap:0,python:5,extras:5,extrasp:0,ignore:0,sensor:5,sensorp:0},PALS=["turtlep","penp","numberp","flowp","boxp","sensorp","mediap","extrasp"],PALLABELS=[_("turtle"),_("pen"),_("number"),_("flow"),_("action"),_("sensors"),_("media"),_("extras")];function analyzeProject(e){for(var n=[],o=0;o<e.blockList.length;o++)if(!e.blockList[o].trash){switch(e.blockList[o].name){case"start":case"fill":case"hollowline":if(null==e.blockList[o].connections[1])continue;break;case"action":if(null==e.blockList[o].connections[2])continue;break;default:if(null==e.blockList[o].connections[0]&&null==last(e.blockList[o].connections))continue}n.push(e.blockList[o].name)}scores=[];for(var a=0;a<PALS.length;a++)scores.push(0);cats=[],pals=[];for(var t=0;t<n.length;t++)n[t]in TACAT?TACAT[n[t]]in cats||cats.push(TACAT[n[t]]):console.log(n[t]+" not in catalog");for(var r=0;r<cats.length;r++)cats[r]in TAPAL&&(TAPAL[cats[r]]in pals||pals.push(TAPAL[cats[r]]));for(r=0;r<cats.length;r++)cats[r]in TASCORE&&(scores[PALS.indexOf(TAPAL[cats[r]])]+=TASCORE[cats[r]]);for(var s=0;s<pals.length;s++)pals[s]in TASCORE&&(scores[PALS.indexOf(pals[s])]+=TASCORE[pals[s]]);return scores}function scoreToChartData(e){for(var n,o=[],a=0,t=0;t<e.length;t++)e[t]>a&&(a=e[t]);(n=a>0?100/a:1)>1&&(n=1);for(t=0;t<e.length;t++)o.push(e[t]*n);return{labels:PALLABELS,datasets:[{label:"",fillColor:"rgba(220,220,220,0.4)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:o}]}}function getChartOptions(e){return{onAnimationComplete:e,scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.2)",angleLineWidth:10,pointLabelFontFamily:"Arial",pointLabelFontStyle:"normal",pointLabelFontSize:30,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:18,pointDotStrokeWidth:6,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:12,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'}}