/*!
 *  howler.js v1.1.25
 *  howlerjs.com
 *
 *  (c) 2013-2014, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){var e={},o=null,t=!0,i=!1;try{"undefined"!=typeof AudioContext?o=new AudioContext:"undefined"!=typeof webkitAudioContext?o=new webkitAudioContext:t=!1}catch(e){t=!1}if(!t)if("undefined"!=typeof Audio)try{new Audio}catch(e){i=!0}else i=!0;if(t){var n=void 0===o.createGain?o.createGainNode():o.createGain();n.gain.value=1,n.connect(o.destination)}var HowlerGlobal=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=t,this.ctx=o,this.noAudio=i,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};HowlerGlobal.prototype={volume:function(e){if((e=parseFloat(e))>=0&&e<=1){for(var o in this._volume=e,t&&(n.gain.value=e),this._howls)if(this._howls.hasOwnProperty(o)&&!1===this._howls[o]._webAudio)for(var i=0;i<this._howls[o]._audioNode.length;i++)this._howls[o]._audioNode[i].volume=this._howls[o]._volume*this._volume;return this}return t?n.gain.value:this._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){for(var o in this._muted=e,t&&(n.gain.value=e?0:this._volume),this._howls)if(this._howls.hasOwnProperty(o)&&!1===this._howls[o]._webAudio)for(var i=0;i<this._howls[o]._audioNode.length;i++)this._howls[o]._audioNode[i].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!o||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var unlock=function(){var t=o.createBuffer(1,1,22050),i=o.createBufferSource();i.buffer=t,i.connect(o.destination),void 0===i.start?i.noteOn(0):i.start(0),setTimeout((function(){i.playbackState!==i.PLAYING_STATE&&i.playbackState!==i.FINISHED_STATE||(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",unlock,!1))}),0)};return window.addEventListener("touchstart",unlock,!1),e}}};var r=null,a={};i||(r=new Audio,a={mp3:!!r.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!r.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var u=new HowlerGlobal(a),Howl=function(e){this._autoplay=e.autoplay||!1,this._buffer=e.buffer||!1,this._duration=e.duration||0,this._format=e.format||null,this._loop=e.loop||!1,this._loaded=!1,this._sprite=e.sprite||{},this._src=e.src||"",this._pos3d=e.pos3d||[0,0,-.5],this._volume=void 0!==e.volume?e.volume:1,this._urls=e.urls||[],this._rate=e.rate||1,this._model=e.model||null,this._onload=[e.onload||function(){}],this._onloaderror=[e.onloaderror||function(){}],this._onend=[e.onend||function(){}],this._onpause=[e.onpause||function(){}],this._onplay=[e.onplay||function(){}],this._onendTimer=[],this._webAudio=t&&!this._buffer,this._audioNode=[],this._webAudio&&this._setupAudioNode(),void 0!==o&&o&&u.iOSAutoEnable&&u._enableiOSAudio(),u._howls.push(this),this.load()};if(Howl.prototype={load:function(){var e=this,o=null;if(i)e.on("loaderror");else{for(var t=0;t<e._urls.length;t++){var n,r;if(e._format)n=e._format;else{if(r=e._urls[t],(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),!n)return void e.on("loaderror");n=n[1].toLowerCase()}if(a[n]){o=e._urls[t];break}}if(o){if(e._src=o,e._webAudio)loadBuffer(e,o);else{var d=new Audio;d.addEventListener("error",(function(){d.error&&4===d.error.code&&(HowlerGlobal.noAudio=!0),e.on("loaderror",{type:d.error?d.error.code:0})}),!1),e._audioNode.push(d),d.src=o,d._pos=0,d.preload="auto",d.volume=u._muted?0:e._volume*u.volume();var listener=function(){e._duration=Math.ceil(10*d.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),d.removeEventListener("canplaythrough",listener,!1)};d.addEventListener("canplaythrough",listener,!1),d.load()}return e}e.on("loaderror")}},urls:function(e){return e?(this.stop(),this._urls="string"==typeof e?[e]:e,this._loaded=!1,this.load(),this):this._urls},play:function(e,t){var i=this;return"function"==typeof e&&(t=e),e&&"function"!=typeof e||(e="_default"),i._loaded?i._sprite[e]?(i._inactiveNode((function(n){n._sprite=e;var r=n._pos>0?n._pos:i._sprite[e][0]/1e3,a=0;i._webAudio?(a=i._sprite[e][1]/1e3-n._pos,n._pos>0&&(r=i._sprite[e][0]/1e3+r)):a=i._sprite[e][1]/1e3-(r-i._sprite[e][0]/1e3);var d,s,l,_,f,c,p,h=!(!i._loop&&!i._sprite[e][2]),v="string"==typeof t?t:Math.round(Date.now()*Math.random())+"";if(s={id:v,sprite:e,loop:h},d=setTimeout((function(){!i._webAudio&&h&&i.stop(s.id).play(e,s.id),i._webAudio&&!h&&(i._nodeById(s.id).paused=!0,i._nodeById(s.id)._pos=0,i._clearEndTimer(s.id)),i._webAudio||h||i.stop(s.id),i.on("end",v)}),1e3*a),i._onendTimer.push({timer:d,id:s.id}),i._webAudio){var y=i._sprite[e][0]/1e3,m=i._sprite[e][1]/1e3;n.id=v,n.paused=!1,refreshBuffer(i,[h,y,m],v),i._playStart=o.currentTime,n.gain.value=i._volume,void 0===n.bufferSource.start?n.bufferSource.noteGrainOn(0,r,a):n.bufferSource.start(0,r,a)}else{if(4!==n.readyState&&(n.readyState||!navigator.isCocoonJS))return i._clearEndTimer(v),l=i,_=e,f=t,p=function(){l.play(_,f),c.removeEventListener("canplaythrough",p,!1)},(c=n).addEventListener("canplaythrough",p,!1),i;n.readyState=4,n.id=v,n.currentTime=r,n.muted=u._muted||n.muted,n.volume=i._volume*u.volume(),setTimeout((function(){n.play()}),0)}return i.on("play"),"function"==typeof t&&t(v),i})),i):("function"==typeof t&&t(),i):(i.on("load",(function(){i.play(e,t)})),i)},pause:function(e){var o=this;if(!o._loaded)return o.on("play",(function(){o.pause(e)})),o;o._clearEndTimer(e);var t=e?o._nodeById(e):o._activeNode();if(t)if(t._pos=o.pos(null,e),o._webAudio){if(!t.bufferSource||t.paused)return o;t.paused=!0,void 0===t.bufferSource.stop?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else t.pause();return o.on("pause"),o},stop:function(e){var o=this;if(!o._loaded)return o.on("play",(function(){o.stop(e)})),o;o._clearEndTimer(e);var t=e?o._nodeById(e):o._activeNode();if(t)if(t._pos=0,o._webAudio){if(!t.bufferSource||t.paused)return o;t.paused=!0,void 0===t.bufferSource.stop?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else isNaN(t.duration)||(t.pause(),t.currentTime=0);return o},mute:function(e){var o=this;if(!o._loaded)return o.on("play",(function(){o.mute(e)})),o;var t=e?o._nodeById(e):o._activeNode();return t&&(o._webAudio?t.gain.value=0:t.muted=!0),o},unmute:function(e){var o=this;if(!o._loaded)return o.on("play",(function(){o.unmute(e)})),o;var t=e?o._nodeById(e):o._activeNode();return t&&(o._webAudio?t.gain.value=o._volume:t.muted=!1),o},volume:function(e,o){var t=this;if((e=parseFloat(e))>=0&&e<=1){if(t._volume=e,!t._loaded)return t.on("play",(function(){t.volume(e,o)})),t;var i=o?t._nodeById(o):t._activeNode();return i&&(t._webAudio?i.gain.value=e:i.volume=e*u.volume()),t}return t._volume},loop:function(e){return"boolean"==typeof e?(this._loop=e,this):this._loop},sprite:function(e){return"object"==typeof e?(this._sprite=e,this):this._sprite},pos:function(e,t){var i=this;if(!i._loaded)return i.on("load",(function(){i.pos(e)})),"number"==typeof e?i:i._pos||0;e=parseFloat(e);var n=t?i._nodeById(t):i._activeNode();if(n)return e>=0?(i.pause(t),n._pos=e,i.play(n._sprite,t),i):i._webAudio?n._pos+(o.currentTime-i._playStart):n.currentTime;if(e>=0)return i;for(var r=0;r<i._audioNode.length;r++)if(i._audioNode[r].paused&&4===i._audioNode[r].readyState)return i._webAudio?i._audioNode[r]._pos:i._audioNode[r].currentTime},pos3d:function(e,o,t,i){var n=this;if(o=void 0!==o&&o?o:0,t=void 0!==t&&t?t:-.5,!n._loaded)return n.on("play",(function(){n.pos3d(e,o,t,i)})),n;if(!(e>=0||e<0))return n._pos3d;if(n._webAudio){var r=i?n._nodeById(i):n._activeNode();r&&(n._pos3d=[e,o,t],r.panner.setPosition(e,o,t),r.panner.panningModel=n._model||"HRTF")}return n},fade:function(e,o,t,i,n){var r=this,a=Math.abs(e-o),u=e>o?"down":"up",d=a/.01,s=t/d;if(!r._loaded)return r.on("load",(function(){r.fade(e,o,t,i,n)})),r;r.volume(e,n);for(var l=1;l<=d;l++)!function(){var e=r._volume+("up"===u?.01:-.01)*l,t=Math.round(1e3*e)/1e3,a=o;setTimeout((function(){r.volume(t,n),t===a&&i&&i()}),s*l)}()},fadeIn:function(e,o,t){return this.volume(0).play().fade(0,e,o,t)},fadeOut:function(e,o,t,i){var n=this;return n.fade(n._volume,e,o,(function(){t&&t(),n.pause(i),n.on("end")}),i)},_nodeById:function(e){for(var o=this._audioNode[0],t=0;t<this._audioNode.length;t++)if(this._audioNode[t].id===e){o=this._audioNode[t];break}return o},_activeNode:function(){for(var e=null,o=0;o<this._audioNode.length;o++)if(!this._audioNode[o].paused){e=this._audioNode[o];break}return this._drainPool(),e},_inactiveNode:function(e){for(var o,t=null,i=0;i<this._audioNode.length;i++)if(this._audioNode[i].paused&&4===this._audioNode[i].readyState){e(this._audioNode[i]),t=!0;break}if(this._drainPool(),!t)if(this._webAudio)o=this._setupAudioNode(),e(o);else{this.load(),o=this._audioNode[this._audioNode.length-1];var n=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",listener=function(){o.removeEventListener(n,listener,!1),e(o)};o.addEventListener(n,listener,!1)}},_drainPool:function(){var e,o=0;for(e=0;e<this._audioNode.length;e++)this._audioNode[e].paused&&o++;for(e=this._audioNode.length-1;e>=0&&!(o<=5);e--)this._audioNode[e].paused&&(this._webAudio&&this._audioNode[e].disconnect(0),o--,this._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var o=0,t=0;t<this._onendTimer.length;t++)if(this._onendTimer[t].id===e){o=t;break}var i=this._onendTimer[o];i&&(clearTimeout(i.timer),this._onendTimer.splice(o,1))},_setupAudioNode:function(){var e=this._audioNode,t=this._audioNode.length;return e[t]=void 0===o.createGain?o.createGainNode():o.createGain(),e[t].gain.value=this._volume,e[t].paused=!0,e[t]._pos=0,e[t].readyState=4,e[t].connect(n),e[t].panner=o.createPanner(),e[t].panner.panningModel=this._model||"equalpower",e[t].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]),e[t].panner.connect(e[t]),e[t]},on:function(e,o){var t=this["_on"+e];if("function"==typeof o)t.push(o);else for(var i=0;i<t.length;i++)o?t[i].call(this,o):t[i].call(this);return this},off:function(e,o){var t=this["_on"+e],i=o?o.toString():null;if(i){for(var n=0;n<t.length;n++)if(i===t[n].toString()){t.splice(n,1);break}}else this["_on"+e]=[];return this},unload:function(){for(var o=this,t=o._audioNode,i=0;i<o._audioNode.length;i++)t[i].paused||(o.stop(t[i].id),o.on("end",t[i].id)),o._webAudio?t[i].disconnect(0):t[i].src="";for(i=0;i<o._onendTimer.length;i++)clearTimeout(o._onendTimer[i].timer);var n=u._howls.indexOf(o);null!==n&&n>=0&&u._howls.splice(n,1),delete e[o._src],o=null}},t)var loadBuffer=function(o,t){if(t in e)return o._duration=e[t].duration,void loadSound(o);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);decodeAudioData(n.buffer,o,t)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){decodeAudioData(a.response,o,t)},a.onerror=function(){o._webAudio&&(o._buffer=!0,o._webAudio=!1,o._audioNode=[],delete o._gainNode,delete e[t],o.load())};try{a.send()}catch(e){a.onerror()}}},decodeAudioData=function(t,i,n){o.decodeAudioData(t,(function(o){o&&(e[n]=o,loadSound(i,o))}),(function(e){i.on("loaderror")}))},loadSound=function(e,o){e._duration=o?o.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},refreshBuffer=function(t,i,n){var r=t._nodeById(n);r.bufferSource=o.createBufferSource(),r.bufferSource.buffer=e[t._src],r.bufferSource.connect(r.panner),r.bufferSource.loop=i[0],i[0]&&(r.bufferSource.loopStart=i[1],r.bufferSource.loopEnd=i[1]+i[2]),r.bufferSource.playbackRate.value=t._rate};"function"==typeof define&&define.amd&&define((function(){return{Howler:u,Howl:Howl}})),"undefined"!=typeof exports&&(exports.Howler=u,exports.Howl=Howl),"undefined"!=typeof window&&(window.Howler=u,window.Howl=Howl)}();