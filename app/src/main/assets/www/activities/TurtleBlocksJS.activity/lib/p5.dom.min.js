/*! p5.js v0.5.8 March 25, 2017 */!function(t,n){"function"==typeof define&&define.amd?define("p5.dom",["p5"],(function(t){n(t)})):n("object"==typeof exports?require("../p5"):t.p5)}(this,(function(t){function b(n){var o=document;return"string"==typeof n&&"#"===n[0]?(n=n.slice(1),o=document.getElementById(n)||document):n instanceof t.Element?o=n.elt:n instanceof HTMLElement&&(o=n),o}function c(n){if("INPUT"===n.tagName&&"checkbox"===n.type){var o=new t.Element(n);return o.checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!!arguments[0],this)},o}return"VIDEO"===n.tagName||"AUDIO"===n.tagName?new t.MediaElement(n):new t.Element(n)}function d(n,o,s){(o._userNode?o._userNode:document.body).appendChild(n);var r=s?new t.MediaElement(n):new t.Element(n);return o._elements.push(r),r}function e(t,n,o,s){var r=document.createElement(n);"string"==typeof(o=o||"")&&(o=[o]);for(var l=0;l<o.length;l++){var a=document.createElement("source");a.src=o[l],r.appendChild(a)}if(void 0!==s){var i=function(){s(),r.removeEventListener("canplaythrough",i)};r.addEventListener("canplaythrough",i)}var h=d(r,t,!0);return h.loadedmetadata=!1,r.addEventListener("loadedmetadata",(function(){h.width=r.videoWidth,h.height=r.videoHeight,0===h.elt.width&&(h.elt.width=r.videoWidth),0===h.elt.height&&(h.elt.height=r.videoHeight),h.loadedmetadata=!0})),h}t.prototype.select=function(t,n){var o=null,s=b(n);return"."===t[0]?(t=t.slice(1),o=(o=s.getElementsByClassName(t)).length?o[0]:null):"#"===t[0]?(t=t.slice(1),o=s.getElementById(t)):o=(o=s.getElementsByTagName(t)).length?o[0]:null,o?c(o):null},t.prototype.selectAll=function(t,n){var o,s=[],r=b(n);if("."===t[0]?(t=t.slice(1),o=r.getElementsByClassName(t)):o=r.getElementsByTagName(t),o)for(var l=0;l<o.length;l++){var a=c(o[l]);s.push(a)}return s},t.prototype.removeElements=function(t){for(var n=0;n<this._elements.length;n++)this._elements[n].elt instanceof HTMLCanvasElement||this._elements[n].remove()},["div","p","span"].forEach((function(n){var o="create"+n.charAt(0).toUpperCase()+n.slice(1);t.prototype[o]=function(t){var o=document.createElement(n);return o.innerHTML=void 0===typeof t?"":t,d(o,this)}})),t.prototype.createImg=function(){var t,n=document.createElement("img"),o=arguments,e=function(){t.width=n.offsetWidth||n.width,t.height=n.offsetHeight||n.height,o.length>1&&"function"==typeof o[1]?(t.fn=o[1],t.fn()):o.length>1&&"function"==typeof o[2]&&(t.fn=o[2],t.fn())};return n.src=o[0],o.length>1&&"string"==typeof o[1]&&(n.alt=o[1]),n.onload=function(){e()},t=d(n,this)},t.prototype.createA=function(t,n,o){var s=document.createElement("a");return s.href=t,s.innerHTML=n,o&&(s.target=o),d(s,this)},t.prototype.createSlider=function(t,n,o,s){var r=document.createElement("input");return r.type="range",r.min=t,r.max=n,0===s?r.step=1e-18:s&&(r.step=s),"number"==typeof o&&(r.value=o),d(r,this)},t.prototype.createButton=function(t,n){var o=document.createElement("button");return o.innerHTML=t,o.value=n,n&&(o.value=n),d(o,this)},t.prototype.createCheckbox=function(){var t=document.createElement("div"),n=document.createElement("input");n.type="checkbox",t.appendChild(n);var o=d(t,this);if(o.checked=function(){var t=o.elt.getElementsByTagName("input")[0];if(t){if(0===arguments.length)return t.checked;t.checked=!!arguments[0]}return o},this.value=function(t){return o.value=t,this},arguments[0]){var s=Math.random().toString(36).slice(2),r=document.createElement("label");n.setAttribute("id",s),r.htmlFor=s,o.value(arguments[0]),r.appendChild(document.createTextNode(arguments[0])),t.appendChild(r)}return arguments[1]&&(n.checked=!0),o},t.prototype.createSelect=function(t){var n=document.createElement("select");t&&n.setAttribute("multiple","true");var o=d(n,this);return o.option=function(t,o){var s=document.createElement("option");s.innerHTML=t,s.value=arguments.length>1?o:t,n.appendChild(s)},o.selected=function(n){var o=[];if(arguments.length>0){for(var s=0;s<this.elt.length;s++)n.toString()===this.elt[s].value&&(this.elt.selectedIndex=s);return this}if(t){for(s=0;s<this.elt.selectedOptions.length;s++)o.push(this.elt.selectedOptions[s].value);return o}return this.elt.value},o},t.prototype.createRadio=function(){var t=document.querySelectorAll("input[type=radio]"),n=0;if(t.length>1){var o=t.length,s=t[0].name,r=t[1].name;n=1;for(var l=1;l<o;l++)s!=(r=t[l].name)&&n++,s=r}else 1==t.length&&(n=1);var a=document.createElement("div"),h=d(a,this),p=-1;return h.option=function(t,o){var s=document.createElement("input");if(s.type="radio",s.innerHTML=t,s.value=arguments.length>1?o:t,s.setAttribute("name","defaultradio"+n),a.appendChild(s),t){p++;var r=(Math.random().toString(36).slice(2),document.createElement("label"));s.setAttribute("id","defaultradio"+n+"-"+p),r.htmlFor="defaultradio"+n+"-"+p,r.appendChild(document.createTextNode(t)),a.appendChild(r)}return s},h.selected=function(){var t=this.elt.childNodes.length;if(1==arguments.length){for(var n=0;n<t;n+=2)this.elt.childNodes[n].value==arguments[0]&&(this.elt.childNodes[n].checked=!0);return this}for(n=0;n<t;n+=2)if(1==this.elt.childNodes[n].checked)return this.elt.childNodes[n].value},h.value=function(){var t=this.elt.childNodes.length;if(1==arguments.length){for(var n=0;n<t;n+=2)this.elt.childNodes[n].value==arguments[0]&&(this.elt.childNodes[n].checked=!0);return this}for(n=0;n<t;n+=2)if(1==this.elt.childNodes[n].checked)return this.elt.childNodes[n].value;return""},h},t.prototype.createInput=function(t,n){var o=document.createElement("input");return o.type=n||"text",t&&(o.value=t),d(o,this)},t.prototype.createFileInput=function(n,o){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var s=document.createElement("input");return s.type="file",o&&(s.multiple="multiple"),s.addEventListener("change",(function e(o){function d(o){var s=new t.File(o);return function(t){s.data=t.target.result,n(s)}}for(var s=o.target.files,r=0;r<s.length;r++){var l=s[r],a=new FileReader;a.onload=d(l),l.type.indexOf("text")>-1?a.readAsText(l):a.readAsDataURL(l)}}),!1),d(s,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},t.prototype.createVideo=function(t,n){return e(this,"video",t,n)},t.prototype.createAudio=function(t,n){return e(this,"audio",t,n)},t.prototype.VIDEO="video",t.prototype.AUDIO="audio",navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.prototype.createCapture=function(){for(var n,o,s=!0,r=!0,l=0;l<arguments.length;l++)arguments[l]===t.prototype.VIDEO?r=!1:arguments[l]===t.prototype.AUDIO?s=!1:"object"==typeof arguments[l]?n=arguments[l]:"function"==typeof arguments[l]&&(o=arguments[l]);if(!navigator.getUserMedia)throw"getUserMedia not supported in this browser";var a=document.createElement("video");n||(n={video:s,audio:r}),navigator.getUserMedia(n,(function(t){a.src=window.URL.createObjectURL(t),o&&o(t)}),(function(t){console.log(t)}));var h=d(a,this,!0);return h.loadedmetadata=!1,a.addEventListener("loadedmetadata",(function(){a.play(),a.width?(h.width=a.videoWidth=a.width,h.height=a.videoHeight=a.height):(h.width=h.elt.width=a.videoWidth,h.height=h.elt.height=a.videoHeight),h.loadedmetadata=!0})),h},t.prototype.createElement=function(t,n){var o=document.createElement(t);return void 0!==n&&(o.innerHTML=n),d(o,this)},t.Element.prototype.addClass=function(t){return this.elt.className?this.elt.className=this.elt.className+" "+t:this.elt.className=t,this},t.Element.prototype.removeClass=function(t){var n=new RegExp("(?:^|\\s)"+t+"(?!\\S)");return this.elt.className=this.elt.className.replace(n,""),this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,""),this},t.Element.prototype.child=function(n){return void 0===n?this.elt.childNodes:("string"==typeof n?("#"===n[0]&&(n=n.substring(1)),n=document.getElementById(n)):n instanceof t.Element&&(n=n.elt),this.elt.appendChild(n),this)},t.Element.prototype.center=function(t){var n=this.elt.style.display,o="none"===this.elt.style.display,s="none"===this.parent().style.display,r={x:this.elt.offsetLeft,y:this.elt.offsetTop};o&&this.show(),this.elt.style.display="block",this.position(0,0),s&&(this.parent().style.display="block");var l=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),a=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight),h=r.y,p=r.x;return"both"===t||void 0===t?this.position(l/2,a/2):"horizontal"===t?this.position(l/2,h):"vertical"===t&&this.position(p,a/2),this.style("display",n),o&&this.hide(),s&&(this.parent().style.display="none"),this},t.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:arguments[1]?(this.elt.innerHTML+=arguments[0],this):(this.elt.innerHTML=arguments[0],this)},t.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="absolute",this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},t.Element.prototype._translate=function(){this.elt.style.position="absolute";var t="";return this.elt.style.transform&&(t=(t=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":arguments.length>2&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":arguments[3]+"px"),this.elt.style.transform+=t,this},t.Element.prototype._rotate=function(){var t="";this.elt.style.transform&&(t=(t=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,""));return 1===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg)":2===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=t,this},t.Element.prototype.style=function(n,o){var s=this;if(o instanceof t.Color&&(o="rgba("+o.levels[0]+","+o.levels[1]+","+o.levels[2]+","+o.levels[3]/255+")"),void 0===o){if(-1===n.indexOf(":"))return window.getComputedStyle(s.elt).getPropertyValue(n);for(var r=n.split(";"),l=0;l<r.length;l++){var a=r[l].split(":");a[0]&&a[1]&&(this.elt.style[a[0].trim()]=a[1].trim())}}else if("rotate"===n||"translate"===n||"position"===n){var h=Array.prototype.shift.apply(arguments),p=this[h]||this["_"+h];p.apply(this,arguments)}else if(this.elt.style[n]=o,"width"===n||"height"===n||"left"===n||"top"===n){var u=o.replace(/\D+/g,"");this[n]=parseInt(u,10)}return this},t.Element.prototype.attribute=function(t,n){return void 0===n?this.elt.getAttribute(t):(this.elt.setAttribute(t,n),this)},t.Element.prototype.removeAttribute=function(t){return this.elt.removeAttribute(t),this},t.Element.prototype.value=function(){return arguments.length>0?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},t.Element.prototype.show=function(){return this.elt.style.display="block",this},t.Element.prototype.hide=function(){return this.elt.style.display="none",this},t.Element.prototype.size=function(n,o){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var s=n,r=o,l=t.prototype.AUTO;if(s!==l||r!==l){if(s===l?s=o*this.width/this.height:r===l&&(r=n*this.height/this.width),this.elt instanceof HTMLCanvasElement){var a={},h=this.elt.getContext("2d");for(var p in h)a[p]=h[p];for(var p in this.elt.setAttribute("width",s*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.setAttribute("style","width:"+s+"px; height:"+r+"px"),this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),a)this.elt.getContext("2d")[p]=a[p]}else this.elt.style.width=s+"px",this.elt.style.height=r+"px",this.elt.width=s,this.elt.height=r,this.width=s,this.height=r;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},t.Element.prototype.remove=function(){for(var t in this._events)this.elt.removeEventListener(t,this._events[t]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},t.MediaElement=function(n,o){t.Element.call(this,n,o);var s=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],this._pixelDensity=1,Object.defineProperty(s,"src",{get:function(){var t=s.elt.children[0].src,n=s.elt.src===window.location.href?"":s.elt.src;return t===window.location.href?n:t},set:function(t){for(var o=0;o<s.elt.children.length;o++)s.elt.removeChild(s.elt.children[o]);var r=document.createElement("source");r.src=t,n.appendChild(r),s.elt.src=t}}),s._onended=function(){},s.elt.onended=function(){s._onended(s)}},t.MediaElement.prototype=Object.create(t.Element.prototype),t.MediaElement.prototype.play=function(){return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),this.elt.readyState>1||this.elt.load(),this.elt.play(),this},t.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},t.MediaElement.prototype.pause=function(){return this.elt.pause(),this},t.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},t.MediaElement.prototype.noLoop=function(){return this.elt.setAttribute("loop",!1),this},t.MediaElement.prototype.autoplay=function(t){return this.elt.setAttribute("autoplay",t),this},t.MediaElement.prototype.volume=function(t){if(void 0===t)return this.elt.volume;this.elt.volume=t},t.MediaElement.prototype.speed=function(t){if(void 0===t)return this.elt.playbackRate;this.elt.playbackRate=t},t.MediaElement.prototype.time=function(t){if(void 0===t)return this.elt.currentTime;this.elt.currentTime=t},t.MediaElement.prototype.duration=function(){return this.elt.duration},t.MediaElement.prototype.pixels=[],t.MediaElement.prototype.loadPixels=function(){return this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d")),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),t.Renderer2D.prototype.loadPixels.call(this)),this},t.MediaElement.prototype.updatePixels=function(n,o,s,r){return this.loadedmetadata&&t.Renderer2D.prototype.updatePixels.call(this,n,o,s,r),this},t.MediaElement.prototype.get=function(n,o,s,r){return this.loadedmetadata?t.Renderer2D.prototype.get.call(this,n,o,s,r):void 0===n?new t.Image(1,1):s>1?new t.Image(n,o,s,r):[0,0,0,255]},t.MediaElement.prototype.set=function(n,o,s){this.loadedmetadata&&t.Renderer2D.prototype.set.call(this,n,o,s)},t.MediaElement.prototype.copy=function(){t.Renderer2D.prototype.copy.apply(this,arguments)},t.MediaElement.prototype.mask=function(){this.loadPixels(),t.Image.prototype.mask.apply(this,arguments)},t.MediaElement.prototype.onended=function(t){return this._onended=t,this},t.MediaElement.prototype.connect=function(n){var o,s;if("function"==typeof t.prototype.getAudioContext)o=t.prototype.getAudioContext(),s=t.soundOut.input;else try{s=(o=n.context).destination}catch(t){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=o.createMediaElementSource(this.elt),this.audioSourceNode.connect(s)),n?n.input?this.audioSourceNode.connect(n.input):this.audioSourceNode.connect(n):this.audioSourceNode.connect(s)},t.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},t.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},t.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},t.MediaElement.prototype.addCue=function(t,n,o){var s=this._cueIDCounter++,r=new f(n,t,s,o);return this._cues.push(r),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),s},t.MediaElement.prototype.removeCue=function(t){for(var n=0;n<this._cues.length;n++)this._cues[n]===t&&(console.log(t),this._cues.splice(n,1));0===this._cues.length&&(this.elt.ontimeupdate=null)},t.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},t.MediaElement.prototype._onTimeUpdate=function(){for(var t=this.time(),n=0;n<this._cues.length;n++){var o=this._cues[n].time,s=this._cues[n].val;this._prevTime<o&&o<=t&&this._cues[n].callback(s)}this._prevTime=t};var f=function(t,n,o,s){this.callback=t,this.time=n,this.id=o,this.val=s};t.File=function(t,n){this.file=t,this._pInst=n;var o=t.type.split("/");this.type=o[0],this.subtype=o[1],this.name=t.name,this.size=t.size,this.data=void 0}}));