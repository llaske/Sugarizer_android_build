/*! chessboard.js v1.0.0 | (c) 2019 Chris Oakman | MIT License chessboardjs.com/license */
!function(){"use strict";var e=window.jQuery,r="abcdefgh".split(""),n=20,o="1.8.3",a=pe("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),f=200,d=200,h=60,l=30,v=100,g={};function V(e,r,n){function t(){o=0,a&&(a=!1,s())}var o=0,a=!1,f=[],s=function(){o=window.setTimeout(t,r),e.apply(n,f)};return function(e){f=arguments,o?a=!0:s()}}function Z(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))}function _(e){return JSON.parse(JSON.stringify(e))}function s(e){var r=e.split(".");return{major:parseInt(r[0],10),minor:parseInt(r[1],10),patch:parseInt(r[2],10)}}function ee(e,r){for(var n in r)if(r.hasOwnProperty(n))for(var o="{"+n+"}",a=r[n];-1!==e.indexOf(o);)e=e.replace(o,a);return e}function re(e){return"string"==typeof e}function ne(e){return"function"==typeof e}function p(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function c(e){return"fast"===e||"slow"===e||!!p(e)&&0<=e}function te(e){if(!re(e))return!1;var r=e.split("-");return 2===r.length&&oe(r[0])&&oe(r[1])}function oe(e){return re(e)&&-1!==e.search(/^[a-h][1-8]$/)}function u(e){return re(e)&&-1!==e.search(/^[bw][KQRNBP]$/)}function ae(e){if(!re(e))return!1;var r=(e=function(e){return e.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}(e=e.replace(/ .+$/,""))).split("/");if(8!==r.length)return!1;for(var n=0;n<8;n++)if(8!==r[n].length||-1!==r[n].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}function ie(r){if(!e.isPlainObject(r))return!1;for(var n in r)if(r.hasOwnProperty(n)&&(!oe(n)||!u(r[n])))return!1;return!0}function se(){return typeof window.$&&e.fn&&e.fn.jquery&&function(e,r){e=s(e),r=s(r);var n=1e5*e.major*1e5+1e5*e.minor+e.patch;return 1e5*r.major*1e5+1e5*r.minor+r.patch<=n}(e.fn.jquery,o)}function pe(e){if(!ae(e))return!1;for(var n,o=(e=e.replace(/ .+$/,"")).split("/"),a={},f=8,d=0;d<8;d++){for(var h=o[d].split(""),l=0,v=0;v<h.length;v++)-1!==h[v].search(/[1-8]/)?l+=parseInt(h[v],10):(a[r[l]+f]=(n=h[v]).toLowerCase()===n?"b"+n.toUpperCase():"w"+n.toUpperCase(),l+=1);f-=1}return a}function ce(e){if(!ie(e))return!1;for(var n,o="",a=8,f=0;f<8;f++){for(var d=0;d<8;d++){var h=r[d]+a;e.hasOwnProperty(h)?o+=(n=void 0,"w"===(n=e[h].split(""))[0]?n[1].toUpperCase():n[1].toLowerCase()):o+="1"}7!==f&&(o+="/"),a-=1}return function(e){return e.replace(/11111111/g,"8").replace(/1111111/g,"7").replace(/111111/g,"6").replace(/11111/g,"5").replace(/1111/g,"4").replace(/111/g,"3").replace(/11/g,"2")}(o)}function ue(e,n,o){for(var a=function(e){for(var n=[],o=0;o<8;o++)for(var a=0;a<8;a++){var f=r[o]+(a+1);e!==f&&n.push({square:f,distance:(d=e,h=f,l=d.split(""),v=r.indexOf(l[0])+1,g=parseInt(l[1],10),w=h.split(""),b=r.indexOf(w[0])+1,Y=parseInt(w[1],10),K=Math.abs(v-b),z=Math.abs(g-Y),z<=K?K:z)})}var d,h,l,v,g,w,b,Y,K,z;n.sort((function(e,r){return e.distance-r.distance}));var F=[];for(o=0;o<n.length;o++)F.push(n[o].square);return F}(o),f=0;f<a.length;f++){var d=a[f];if(e.hasOwnProperty(d)&&e[d]===n)return d}return!1}function fe(e){return"black"!==e.orientation&&(e.orientation="white"),!1!==e.showNotation&&(e.showNotation=!0),!0!==e.draggable&&(e.draggable=!1),"trash"!==e.dropOffBoard&&(e.dropOffBoard="snapback"),!0!==e.sparePieces&&(e.sparePieces=!1),e.sparePieces&&(e.draggable=!0),e.hasOwnProperty("pieceTheme")&&(re(e.pieceTheme)||ne(e.pieceTheme))||(e.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),c(e.appearSpeed)||(e.appearSpeed=f),c(e.moveSpeed)||(e.moveSpeed=d),c(e.snapbackSpeed)||(e.snapbackSpeed=h),c(e.snapSpeed)||(e.snapSpeed=l),c(e.trashSpeed)||(e.trashSpeed=v),function(e){return p(e)&&1<=e}(e.dragThrottleRate)||(e.dragThrottleRate=n),e}g.alpha="alpha-d2270",g.black="black-3c85d",g.board="board-b72b1",g.chessboard="chessboard-63f37",g.clearfix="clearfix-7da63",g.highlight1="highlight1-32417",g.highlight2="highlight2-9c5d2",g.notation="notation-322f9",g.numeric="numeric-fc462",g.piece="piece-417db",g.row="row-5277c",g.sparePieces="spare-pieces-7492f",g.sparePiecesBottom="spare-pieces-bottom-ae20f",g.sparePiecesTop="spare-pieces-top-4028b",g.square="square-55d63",g.white="white-1e1d7",window.Chessboard=function(n,f){if(!function(){if(se())return!0;var e="Chessboard Error 1005: Unable to find a valid version of jQuery. Please include jQuery "+o+" or higher on the page\n\nExiting…";return window.alert(e),!1}())return null;var d=function(r){if(""===r){return window.alert("Chessboard Error 1001: The first argument to Chessboard() cannot be an empty string.\n\nExiting…"),!1}re(r)&&"#"!==r.charAt(0)&&(r="#"+r);var n=e(r);if(1===n.length)return n;return window.alert("Chessboard Error 1003: The first argument to Chessboard() must be the ID of a DOM node, an ID query selector, or a single DOM node.\n\nExiting…"),!1}(n);if(!d)return null;f=fe(f=function(r){return"start"===r?r={position:_(a)}:ae(r)?r={position:pe(r)}:ie(r)&&(r={position:_(r)}),e.isPlainObject(r)||(r={}),r}(f));var h=null,l=null,v=null,w=null,b={},Y=2,K="white",z={},F=null,A=null,W=null,G=!1,H={},de={},he={},le=16;function m(e,r,n){if(!0===f.hasOwnProperty("showErrors")&&!1!==f.showErrors){var o="Chessboard Error "+e+": "+r;return"console"===f.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(o),void(2<=arguments.length&&console.log(n))):"alert"===f.showErrors?(n&&(o+="\n\n"+JSON.stringify(n)),void window.alert(o)):void(ne(f.showErrors)&&f.showErrors(e,r,n))}}function P(e){return ne(f.pieceTheme)?f.pieceTheme(e):re(f.pieceTheme)?ee(f.pieceTheme,{piece:e}):(m(8272,"Unable to build image source for config.pieceTheme."),"")}function y(e,r,n){var o='<img src="'+P(e)+'" ';return re(n)&&""!==n&&(o+='id="'+n+'" '),o+='alt="" class="{piece}" data-piece="'+e+'" style="width:'+le+"px;height:"+le+"px;",r&&(o+="display:none;"),ee(o+='" />',g)}function x(e){var r=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(r=["bK","bQ","bR","bB","bN","bP"]);for(var n="",o=0;o<r.length;o++)n+=y(r[o],!1,H[r[o]]);return n}function O(r,n,o,a){var d=e("#"+de[r]),h=d.offset(),l=e("#"+de[n]),v=l.offset(),w=Z();e("body").append(y(o,!0,w));var b=e("#"+w);b.css({display:"",position:"absolute",top:h.top,left:h.left}),d.find("."+g.piece).remove();var Y={duration:f.moveSpeed,complete:function(){l.append(y(o)),b.remove(),ne(a)&&a()}};b.animate(v,Y)}function S(r,n,o){var a=e("#"+H[r]).offset(),d=e("#"+de[n]),h=d.offset(),l=Z();e("body").append(y(r,!0,l));var v=e("#"+l);v.css({display:"",position:"absolute",left:a.left,top:a.top});var w={duration:f.moveSpeed,complete:function(){d.find("."+g.piece).remove(),d.append(y(r)),v.remove(),ne(o)&&o()}};v.animate(h,w)}function T(){for(var r in h.find("."+g.piece).remove(),z)z.hasOwnProperty(r)&&e("#"+de[r]).append(y(z[r]))}function q(){h.html(function(e){"black"!==e&&(e="white");var n="",o=_(r),a=8;"black"===e&&(o.reverse(),a=1);for(var d="white",h=0;h<8;h++){n+='<div class="{row}">';for(var l=0;l<8;l++){var v=o[l]+a;n+='<div class="{square} '+g[d]+" square-"+v+'" style="width:'+le+"px;height:"+le+'px;" id="'+de[v]+'" data-square="'+v+'">',f.showNotation&&(("white"===e&&1===a||"black"===e&&8===a)&&(n+='<div class="{notation} {alpha}">'+o[l]+"</div>"),0===l&&(n+='<div class="{notation} {numeric}">'+a+"</div>")),n+="</div>",d="white"===d?"black":"white"}n+='<div class="{clearfix}"></div></div>',d="white"===d?"black":"white","white"===e?a-=1:a+=1}return ee(n,g)}(K,f.showNotation)),T(),f.sparePieces&&("white"===K?(v.html(x("black")),w.html(x("white"))):(v.html(x("white")),w.html(x("black"))))}function k(e){var r=_(z),n=_(e);ce(r)!==ce(n)&&(ne(f.onChange)&&f.onChange(r,n),z=e)}function E(e,r){for(var n in he)if(he.hasOwnProperty(n)){var o=he[n];if(e>=o.left&&e<o.left+le&&r>=o.top&&r<o.top+le)return n}return"offboard"}function C(){h.find("."+g.square).removeClass(g.highlight1+" "+g.highlight2)}function B(){C();var e=_(z);delete e[W],k(e),T(),l.fadeOut(f.trashSpeed),G=!1}function I(r,n,o,a){ne(f.onDragStart)&&!1===f.onDragStart(r,n,_(z),K)||(G=!0,F=n,A="spare"===(W=r)?"offboard":r,function(){for(var r in he={},de)de.hasOwnProperty(r)&&(he[r]=e("#"+de[r]).offset())}(),l.attr("src",P(n)).css({display:"",position:"absolute",left:o-le/2,top:a-le/2}),"spare"!==r&&e("#"+de[r]).addClass(g.highlight1).find("."+g.piece).css("display","none"))}function M(r,n){l.css({left:r-le/2,top:n-le/2});var o=E(r,n);o!==A&&(oe(A)&&e("#"+de[A]).removeClass(g.highlight2),oe(o)&&e("#"+de[o]).addClass(g.highlight2),ne(f.onDragMove)&&f.onDragMove(o,A,W,F,_(z),K),A=o)}function N(r){var n="drop";if("offboard"===r&&"snapback"===f.dropOffBoard&&(n="snapback"),"offboard"===r&&"trash"===f.dropOffBoard&&(n="trash"),ne(f.onDrop)){var o=_(z);"spare"===W&&oe(r)&&(o[r]=F),oe(W)&&"offboard"===r&&delete o[W],oe(W)&&oe(r)&&(delete o[W],o[r]=F);var a=_(z),d=f.onDrop(W,r,F,o,a,K);"snapback"!==d&&"trash"!==d||(n=d)}"snapback"===n?function(){if("spare"!==W){C();var r=e("#"+de[W]).offset(),n={duration:f.snapbackSpeed,complete:function(){T(),l.css("display","none"),ne(f.onSnapbackEnd)&&f.onSnapbackEnd(F,W,_(z),K)}};l.animate(r,n),G=!1}else B()}():"trash"===n?B():"drop"===n&&function(r){C();var n=_(z);delete n[W],n[r]=F,k(n);var o=e("#"+de[r]).offset(),a={duration:f.snapSpeed,complete:function(){T(),l.css("display","none"),ne(f.onSnapEnd)&&f.onSnapEnd(W,r,F)}};l.animate(o,a),G=!1}(r)}function j(e){e.preventDefault()}function D(r){if(f.draggable){var n=e(this).attr("data-square");oe(n)&&z.hasOwnProperty(n)&&I(n,z[n],r.pageX,r.pageY)}}function R(r){if(f.draggable){var n=e(this).attr("data-square");oe(n)&&z.hasOwnProperty(n)&&(r=r.originalEvent,I(n,z[n],r.changedTouches[0].pageX,r.changedTouches[0].pageY))}}function Q(r){f.sparePieces&&I("spare",e(this).attr("data-piece"),r.pageX,r.pageY)}function X(r){f.sparePieces&&I("spare",e(this).attr("data-piece"),(r=r.originalEvent).changedTouches[0].pageX,r.changedTouches[0].pageY)}b.clear=function(e){b.position({},e)},b.destroy=function(){d.html(""),l.remove(),d.unbind()},b.fen=function(){return b.position("fen")},b.flip=function(){return b.orientation("flip")},b.move=function(){if(0!==arguments.length){for(var e=!0,r={},n=0;n<arguments.length;n++)if(!1!==arguments[n])if(te(arguments[n])){var o=arguments[n].split("-");r[o[0]]=o[1]}else m(2826,"Invalid move passed to the move method.",arguments[n]);else e=!1;var a=function(e,r){var n=_(e);for(var o in r)if(r.hasOwnProperty(o)&&n.hasOwnProperty(o)){var a=n[o];delete n[o],n[r[o]]=a}return n}(z,r);return b.position(a,e),a}},b.orientation=function(e){return 0===arguments.length?K:"white"===e||"black"===e?(K=e,q(),K):"flip"===e?(K="white"===K?"black":"white",q(),K):void m(5482,"Invalid value passed to the orientation method.",e)},b.position=function(r,n){return 0===arguments.length?_(z):re(r)&&"fen"===r.toLowerCase()?ce(z):(re(r)&&"start"===r.toLowerCase()&&(r=_(a)),ae(r)&&(r=pe(r)),void(ie(r)?(!1!==n&&(n=!0),n?(function(r,n,o){if(0!==r.length)for(var a=0,d=0;d<r.length;d++){var h=r[d];"clear"===h.type?e("#"+de[h.square]+" ."+g.piece).fadeOut(f.trashSpeed,i):"add"!==h.type||f.sparePieces?"add"===h.type&&f.sparePieces?S(h.piece,h.square,i):"move"===h.type&&O(h.source,h.destination,h.piece,i):e("#"+de[h.square]).append(y(h.piece,!0)).find("."+g.piece).fadeIn(f.appearSpeed,i)}function i(){(a+=1)===r.length&&(T(),ne(f.onMoveEnd)&&f.onMoveEnd(_(n),_(o)))}}(function(e,r){e=_(e),r=_(r);var n=[],o={};for(var a in r)r.hasOwnProperty(a)&&e.hasOwnProperty(a)&&e[a]===r[a]&&(delete e[a],delete r[a]);for(a in r)if(r.hasOwnProperty(a)){var f=ue(e,r[a],a);f&&(n.push({type:"move",source:f,destination:a,piece:r[a]}),delete e[f],delete r[a],o[a]=!0)}for(a in r)r.hasOwnProperty(a)&&(n.push({type:"add",square:a,piece:r[a]}),delete r[a]);for(a in e)e.hasOwnProperty(a)&&(o.hasOwnProperty(a)||(n.push({type:"clear",square:a,piece:e[a]}),delete e[a]));return n}(z,r),z,r),k(r)):(k(r),T())):m(6482,"Invalid value passed to the position method.",r)))},b.resize=function(){le=function(){var e=parseInt(d.width(),10);if(!e||e<=0)return 0;for(var r=e-1;r%8!=0&&0<r;)r-=1;return r/8}(),h.css("width",8*le+"px"),l.css({height:le,width:le}),f.sparePieces&&d.find("."+g.sparePieces).css("paddingLeft",le+Y+"px"),q()},b.start=function(e){b.position("start",e)};var ve=V((function(e){G&&M(e.pageX,e.pageY)}),f.dragThrottleRate),ge=V((function(e){G&&(e.preventDefault(),M(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}),f.dragThrottleRate);function L(e){G&&N(E(e.pageX,e.pageY))}function U(e){G&&N(E(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function $(r){if(!G&&ne(f.onMouseoverSquare)){var n=e(r.currentTarget).attr("data-square");if(oe(n)){var o=!1;z.hasOwnProperty(n)&&(o=z[n]),f.onMouseoverSquare(n,o,_(z),K)}}}function J(r){if(!G&&ne(f.onMouseoutSquare)){var n=e(r.currentTarget).attr("data-square");if(oe(n)){var o=!1;z.hasOwnProperty(n)&&(o=z[n]),f.onMouseoutSquare(n,o,_(z),K)}}}return K=f.orientation,f.hasOwnProperty("position")&&("start"===f.position?z=_(a):ae(f.position)?z=pe(f.position):ie(f.position)?z=_(f.position):m(7263,"Invalid value passed to config.position.",f.position)),function(){!function(){for(var e=0;e<r.length;e++)for(var n=1;n<=8;n++){var o=r[e]+n;de[o]=o+"-"+Z()}var a="KQRNBP".split("");for(e=0;e<a.length;e++){var f="w"+a[e],d="b"+a[e];H[f]=f+"-"+Z(),H[d]=d+"-"+Z()}}(),d.html(function(e){var r='<div class="{chessboard}">';return e&&(r+='<div class="{sparePieces} {sparePiecesTop}"></div>'),r+='<div class="{board}"></div>',e&&(r+='<div class="{sparePieces} {sparePiecesBottom}"></div>'),ee(r+="</div>",g)}(f.sparePieces)),h=d.find("."+g.board),f.sparePieces&&(v=d.find("."+g.sparePiecesTop),w=d.find("."+g.sparePiecesBottom));var n=Z();e("body").append(y("wP",!0,n)),l=e("#"+n),Y=parseInt(h.css("borderLeftWidth"),10),b.resize()}(),function(){e("body").on("mousedown mousemove","."+g.piece,j),h.on("mousedown","."+g.square,D),d.on("mousedown","."+g.sparePieces+" ."+g.piece,Q),h.on("mouseenter","."+g.square,$).on("mouseleave","."+g.square,J);var r=e(window);r.on("mousemove",ve).on("mouseup",L),"ontouchstart"in document.documentElement&&(h.on("touchstart","."+g.square,R),d.on("touchstart","."+g.sparePieces+" ."+g.piece,X),r.on("touchmove",ge).on("touchend",U))}(),b},window.ChessBoard=window.Chessboard,window.Chessboard.fenToObj=pe,window.Chessboard.objToFen=ce}();