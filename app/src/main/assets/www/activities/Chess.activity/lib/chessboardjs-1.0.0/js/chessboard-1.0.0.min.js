/*! chessboard.js v1.0.0 | (c) 2019 Chris Oakman | MIT License chessboardjs.com/license */
!function(){"use strict";var e=window.jQuery,r="abcdefgh".split(""),n="1.8.3",o=pe("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),a={};function V(e,r,n){function t(){o=0,a&&(a=!1,s())}var o=0,a=!1,f=[],s=function(){o=window.setTimeout(t,r),e.apply(n,f)};return function(e){f=arguments,o?a=!0:s()}}function Z(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))}function _(e){return JSON.parse(JSON.stringify(e))}function s(e){var r=e.split(".");return{major:parseInt(r[0],10),minor:parseInt(r[1],10),patch:parseInt(r[2],10)}}function ee(e,r){for(var n in r)if(r.hasOwnProperty(n))for(var o="{"+n+"}",a=r[n];-1!==e.indexOf(o);)e=e.replace(o,a);return e}function re(e){return"string"==typeof e}function ne(e){return"function"==typeof e}function p(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function c(e){return"fast"===e||"slow"===e||!!p(e)&&0<=e}function te(e){if(!re(e))return!1;var r=e.split("-");return 2===r.length&&oe(r[0])&&oe(r[1])}function oe(e){return re(e)&&-1!==e.search(/^[a-h][1-8]$/)}function u(e){return re(e)&&-1!==e.search(/^[bw][KQRNBP]$/)}function ae(e){if(!re(e))return!1;var r=(e=function(e){return e.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}(e=e.replace(/ .+$/,""))).split("/");if(8!==r.length)return!1;for(var n=0;n<8;n++)if(8!==r[n].length||-1!==r[n].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}function ie(r){if(!e.isPlainObject(r))return!1;for(var n in r)if(r.hasOwnProperty(n)&&(!oe(n)||!u(r[n])))return!1;return!0}function se(){return typeof window.$&&e.fn&&e.fn.jquery&&function(e,r){e=s(e),r=s(r);var n=1e5*e.major*1e5+1e5*e.minor+e.patch;return 1e5*r.major*1e5+1e5*r.minor+r.patch<=n}(e.fn.jquery,n)}function pe(e){if(!ae(e))return!1;for(var n,o=(e=e.replace(/ .+$/,"")).split("/"),a={},f=8,d=0;d<8;d++){for(var h=o[d].split(""),l=0,v=0;v<h.length;v++)-1!==h[v].search(/[1-8]/)?l+=parseInt(h[v],10):(a[r[l]+f]=(n=h[v]).toLowerCase()===n?"b"+n.toUpperCase():"w"+n.toUpperCase(),l+=1);f-=1}return a}function ce(e){if(!ie(e))return!1;for(var n,o="",a=8,f=0;f<8;f++){for(var d=0;d<8;d++){var h=r[d]+a;e.hasOwnProperty(h)?o+=(n=void 0,"w"===(n=e[h].split(""))[0]?n[1].toUpperCase():n[1].toLowerCase()):o+="1"}7!==f&&(o+="/"),a-=1}return function(e){return e.replace(/11111111/g,"8").replace(/1111111/g,"7").replace(/111111/g,"6").replace(/11111/g,"5").replace(/1111/g,"4").replace(/111/g,"3").replace(/11/g,"2")}(o)}function ue(e,n,o){for(var a=function(e){for(var n=[],o=0;o<8;o++)for(var a=0;a<8;a++){var f=r[o]+(a+1);e!==f&&n.push({square:f,distance:(d=e,h=f,l=d.split(""),v=r.indexOf(l[0])+1,g=parseInt(l[1],10),w=h.split(""),b=r.indexOf(w[0])+1,Y=parseInt(w[1],10),K=Math.abs(v-b),z=Math.abs(g-Y),z<=K?K:z)})}var d,h,l,v,g,w,b,Y,K,z;n.sort((function(e,r){return e.distance-r.distance}));var F=[];for(o=0;o<n.length;o++)F.push(n[o].square);return F}(o),f=0;f<a.length;f++){var d=a[f];if(e.hasOwnProperty(d)&&e[d]===n)return d}return!1}function fe(e){return"black"!==e.orientation&&(e.orientation="white"),!1!==e.showNotation&&(e.showNotation=!0),!0!==e.draggable&&(e.draggable=!1),"trash"!==e.dropOffBoard&&(e.dropOffBoard="snapback"),!0!==e.sparePieces&&(e.sparePieces=!1),e.sparePieces&&(e.draggable=!0),e.hasOwnProperty("pieceTheme")&&(re(e.pieceTheme)||ne(e.pieceTheme))||(e.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),c(e.appearSpeed)||(e.appearSpeed=200),c(e.moveSpeed)||(e.moveSpeed=200),c(e.snapbackSpeed)||(e.snapbackSpeed=60),c(e.snapSpeed)||(e.snapSpeed=30),c(e.trashSpeed)||(e.trashSpeed=100),function(e){return p(e)&&1<=e}(e.dragThrottleRate)||(e.dragThrottleRate=20),e}a.alpha="alpha-d2270",a.black="black-3c85d",a.board="board-b72b1",a.chessboard="chessboard-63f37",a.clearfix="clearfix-7da63",a.highlight1="highlight1-32417",a.highlight2="highlight2-9c5d2",a.notation="notation-322f9",a.numeric="numeric-fc462",a.piece="piece-417db",a.row="row-5277c",a.sparePieces="spare-pieces-7492f",a.sparePiecesBottom="spare-pieces-bottom-ae20f",a.sparePiecesTop="spare-pieces-top-4028b",a.square="square-55d63",a.white="white-1e1d7",window.Chessboard=function(n,f){if(!function(){if(se())return!0;return window.alert("Chessboard Error 1005: Unable to find a valid version of jQuery. Please include jQuery 1.8.3 or higher on the page\n\nExiting…"),!1}())return null;var d=function(r){if(""===r){return window.alert("Chessboard Error 1001: The first argument to Chessboard() cannot be an empty string.\n\nExiting…"),!1}re(r)&&"#"!==r.charAt(0)&&(r="#"+r);var n=e(r);if(1===n.length)return n;return window.alert("Chessboard Error 1003: The first argument to Chessboard() must be the ID of a DOM node, an ID query selector, or a single DOM node.\n\nExiting…"),!1}(n);if(!d)return null;f=fe(f=function(r){return"start"===r?r={position:_(o)}:ae(r)?r={position:pe(r)}:ie(r)&&(r={position:_(r)}),e.isPlainObject(r)||(r={}),r}(f));var h=null,l=null,v=null,g=null,w={},b=2,Y="white",K={},z=null,F=null,A=null,W=!1,G={},H={},de={},he=16;function m(e,r,n){if(!0===f.hasOwnProperty("showErrors")&&!1!==f.showErrors){var o="Chessboard Error "+e+": "+r;return"console"===f.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(o),void(2<=arguments.length&&console.log(n))):"alert"===f.showErrors?(n&&(o+="\n\n"+JSON.stringify(n)),void window.alert(o)):void(ne(f.showErrors)&&f.showErrors(e,r,n))}}function P(e){return ne(f.pieceTheme)?f.pieceTheme(e):re(f.pieceTheme)?ee(f.pieceTheme,{piece:e}):(m(8272,"Unable to build image source for config.pieceTheme."),"")}function y(e,r,n){var o='<img src="'+P(e)+'" ';return re(n)&&""!==n&&(o+='id="'+n+'" '),o+='alt="" class="{piece}" data-piece="'+e+'" style="width:'+he+"px;height:"+he+"px;",r&&(o+="display:none;"),ee(o+='" />',a)}function x(e){var r=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(r=["bK","bQ","bR","bB","bN","bP"]);for(var n="",o=0;o<r.length;o++)n+=y(r[o],!1,G[r[o]]);return n}function O(r,n,o,d){var h=e("#"+H[r]),l=h.offset(),v=e("#"+H[n]),g=v.offset(),w=Z();e("body").append(y(o,!0,w));var b=e("#"+w);b.css({display:"",position:"absolute",top:l.top,left:l.left}),h.find("."+a.piece).remove();var Y={duration:f.moveSpeed,complete:function(){v.append(y(o)),b.remove(),ne(d)&&d()}};b.animate(g,Y)}function S(r,n,o){var d=e("#"+G[r]).offset(),h=e("#"+H[n]),l=h.offset(),v=Z();e("body").append(y(r,!0,v));var g=e("#"+v);g.css({display:"",position:"absolute",left:d.left,top:d.top});var w={duration:f.moveSpeed,complete:function(){h.find("."+a.piece).remove(),h.append(y(r)),g.remove(),ne(o)&&o()}};g.animate(l,w)}function T(){for(var r in h.find("."+a.piece).remove(),K)K.hasOwnProperty(r)&&e("#"+H[r]).append(y(K[r]))}function q(){h.html(function(e){"black"!==e&&(e="white");var n="",o=_(r),d=8;"black"===e&&(o.reverse(),d=1);for(var h="white",l=0;l<8;l++){n+='<div class="{row}">';for(var v=0;v<8;v++){var g=o[v]+d;n+='<div class="{square} '+a[h]+" square-"+g+'" style="width:'+he+"px;height:"+he+'px;" id="'+H[g]+'" data-square="'+g+'">',f.showNotation&&(("white"===e&&1===d||"black"===e&&8===d)&&(n+='<div class="{notation} {alpha}">'+o[v]+"</div>"),0===v&&(n+='<div class="{notation} {numeric}">'+d+"</div>")),n+="</div>",h="white"===h?"black":"white"}n+='<div class="{clearfix}"></div></div>',h="white"===h?"black":"white","white"===e?d-=1:d+=1}return ee(n,a)}(Y,f.showNotation)),T(),f.sparePieces&&("white"===Y?(v.html(x("black")),g.html(x("white"))):(v.html(x("white")),g.html(x("black"))))}function k(e){var r=_(K),n=_(e);ce(r)!==ce(n)&&(ne(f.onChange)&&f.onChange(r,n),K=e)}function E(e,r){for(var n in de)if(de.hasOwnProperty(n)){var o=de[n];if(e>=o.left&&e<o.left+he&&r>=o.top&&r<o.top+he)return n}return"offboard"}function C(){h.find("."+a.square).removeClass(a.highlight1+" "+a.highlight2)}function B(){C();var e=_(K);delete e[A],k(e),T(),l.fadeOut(f.trashSpeed),W=!1}function I(r,n,o,d){ne(f.onDragStart)&&!1===f.onDragStart(r,n,_(K),Y)||(W=!0,z=n,F="spare"===(A=r)?"offboard":r,function(){for(var r in de={},H)H.hasOwnProperty(r)&&(de[r]=e("#"+H[r]).offset())}(),l.attr("src",P(n)).css({display:"",position:"absolute",left:o-he/2,top:d-he/2}),"spare"!==r&&e("#"+H[r]).addClass(a.highlight1).find("."+a.piece).css("display","none"))}function M(r,n){l.css({left:r-he/2,top:n-he/2});var o=E(r,n);o!==F&&(oe(F)&&e("#"+H[F]).removeClass(a.highlight2),oe(o)&&e("#"+H[o]).addClass(a.highlight2),ne(f.onDragMove)&&f.onDragMove(o,F,A,z,_(K),Y),F=o)}function N(r){var n="drop";if("offboard"===r&&"snapback"===f.dropOffBoard&&(n="snapback"),"offboard"===r&&"trash"===f.dropOffBoard&&(n="trash"),ne(f.onDrop)){var o=_(K);"spare"===A&&oe(r)&&(o[r]=z),oe(A)&&"offboard"===r&&delete o[A],oe(A)&&oe(r)&&(delete o[A],o[r]=z);var a=_(K),d=f.onDrop(A,r,z,o,a,Y);"snapback"!==d&&"trash"!==d||(n=d)}"snapback"===n?function(){if("spare"!==A){C();var r=e("#"+H[A]).offset(),n={duration:f.snapbackSpeed,complete:function(){T(),l.css("display","none"),ne(f.onSnapbackEnd)&&f.onSnapbackEnd(z,A,_(K),Y)}};l.animate(r,n),W=!1}else B()}():"trash"===n?B():"drop"===n&&function(r){C();var n=_(K);delete n[A],n[r]=z,k(n);var o=e("#"+H[r]).offset(),a={duration:f.snapSpeed,complete:function(){T(),l.css("display","none"),ne(f.onSnapEnd)&&f.onSnapEnd(A,r,z)}};l.animate(o,a),W=!1}(r)}function j(e){e.preventDefault()}function D(r){if(f.draggable){var n=e(this).attr("data-square");oe(n)&&K.hasOwnProperty(n)&&I(n,K[n],r.pageX,r.pageY)}}function R(r){if(f.draggable){var n=e(this).attr("data-square");oe(n)&&K.hasOwnProperty(n)&&(r=r.originalEvent,I(n,K[n],r.changedTouches[0].pageX,r.changedTouches[0].pageY))}}function Q(r){f.sparePieces&&I("spare",e(this).attr("data-piece"),r.pageX,r.pageY)}function X(r){f.sparePieces&&I("spare",e(this).attr("data-piece"),(r=r.originalEvent).changedTouches[0].pageX,r.changedTouches[0].pageY)}w.clear=function(e){w.position({},e)},w.destroy=function(){d.html(""),l.remove(),d.unbind()},w.fen=function(){return w.position("fen")},w.flip=function(){return w.orientation("flip")},w.move=function(){if(0!==arguments.length){for(var e=!0,r={},n=0;n<arguments.length;n++)if(!1!==arguments[n])if(te(arguments[n])){var o=arguments[n].split("-");r[o[0]]=o[1]}else m(2826,"Invalid move passed to the move method.",arguments[n]);else e=!1;var a=function(e,r){var n=_(e);for(var o in r)if(r.hasOwnProperty(o)&&n.hasOwnProperty(o)){var a=n[o];delete n[o],n[r[o]]=a}return n}(K,r);return w.position(a,e),a}},w.orientation=function(e){return 0===arguments.length?Y:"white"===e||"black"===e?(Y=e,q(),Y):"flip"===e?(Y="white"===Y?"black":"white",q(),Y):void m(5482,"Invalid value passed to the orientation method.",e)},w.position=function(r,n){return 0===arguments.length?_(K):re(r)&&"fen"===r.toLowerCase()?ce(K):(re(r)&&"start"===r.toLowerCase()&&(r=_(o)),ae(r)&&(r=pe(r)),void(ie(r)?(!1!==n&&(n=!0),n?(function(r,n,o){if(0!==r.length)for(var d=0,h=0;h<r.length;h++){var l=r[h];"clear"===l.type?e("#"+H[l.square]+" ."+a.piece).fadeOut(f.trashSpeed,i):"add"!==l.type||f.sparePieces?"add"===l.type&&f.sparePieces?S(l.piece,l.square,i):"move"===l.type&&O(l.source,l.destination,l.piece,i):e("#"+H[l.square]).append(y(l.piece,!0)).find("."+a.piece).fadeIn(f.appearSpeed,i)}function i(){(d+=1)===r.length&&(T(),ne(f.onMoveEnd)&&f.onMoveEnd(_(n),_(o)))}}(function(e,r){e=_(e),r=_(r);var n=[],o={};for(var a in r)r.hasOwnProperty(a)&&e.hasOwnProperty(a)&&e[a]===r[a]&&(delete e[a],delete r[a]);for(a in r)if(r.hasOwnProperty(a)){var f=ue(e,r[a],a);f&&(n.push({type:"move",source:f,destination:a,piece:r[a]}),delete e[f],delete r[a],o[a]=!0)}for(a in r)r.hasOwnProperty(a)&&(n.push({type:"add",square:a,piece:r[a]}),delete r[a]);for(a in e)e.hasOwnProperty(a)&&(o.hasOwnProperty(a)||(n.push({type:"clear",square:a,piece:e[a]}),delete e[a]));return n}(K,r),K,r),k(r)):(k(r),T())):m(6482,"Invalid value passed to the position method.",r)))},w.resize=function(){he=function(){var e=parseInt(d.width(),10);if(!e||e<=0)return 0;for(var r=e-1;r%8!=0&&0<r;)r-=1;return r/8}(),h.css("width",8*he+"px"),l.css({height:he,width:he}),f.sparePieces&&d.find("."+a.sparePieces).css("paddingLeft",he+b+"px"),q()},w.start=function(e){w.position("start",e)};var le=V((function(e){W&&M(e.pageX,e.pageY)}),f.dragThrottleRate),ve=V((function(e){W&&(e.preventDefault(),M(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}),f.dragThrottleRate);function L(e){W&&N(E(e.pageX,e.pageY))}function U(e){W&&N(E(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function $(r){if(!W&&ne(f.onMouseoverSquare)){var n=e(r.currentTarget).attr("data-square");if(oe(n)){var o=!1;K.hasOwnProperty(n)&&(o=K[n]),f.onMouseoverSquare(n,o,_(K),Y)}}}function J(r){if(!W&&ne(f.onMouseoutSquare)){var n=e(r.currentTarget).attr("data-square");if(oe(n)){var o=!1;K.hasOwnProperty(n)&&(o=K[n]),f.onMouseoutSquare(n,o,_(K),Y)}}}return Y=f.orientation,f.hasOwnProperty("position")&&("start"===f.position?K=_(o):ae(f.position)?K=pe(f.position):ie(f.position)?K=_(f.position):m(7263,"Invalid value passed to config.position.",f.position)),function(){!function(){for(var e=0;e<r.length;e++)for(var n=1;n<=8;n++){var o=r[e]+n;H[o]=o+"-"+Z()}var a="KQRNBP".split("");for(e=0;e<a.length;e++){var f="w"+a[e],d="b"+a[e];G[f]=f+"-"+Z(),G[d]=d+"-"+Z()}}(),d.html(function(e){var r='<div class="{chessboard}">';return e&&(r+='<div class="{sparePieces} {sparePiecesTop}"></div>'),r+='<div class="{board}"></div>',e&&(r+='<div class="{sparePieces} {sparePiecesBottom}"></div>'),ee(r+="</div>",a)}(f.sparePieces)),h=d.find("."+a.board),f.sparePieces&&(v=d.find("."+a.sparePiecesTop),g=d.find("."+a.sparePiecesBottom));var n=Z();e("body").append(y("wP",!0,n)),l=e("#"+n),b=parseInt(h.css("borderLeftWidth"),10),w.resize()}(),function(){e("body").on("mousedown mousemove","."+a.piece,j),h.on("mousedown","."+a.square,D),d.on("mousedown","."+a.sparePieces+" ."+a.piece,Q),h.on("mouseenter","."+a.square,$).on("mouseleave","."+a.square,J);var r=e(window);r.on("mousemove",le).on("mouseup",L),"ontouchstart"in document.documentElement&&(h.on("touchstart","."+a.square,R),d.on("touchstart","."+a.sparePieces+" ."+a.piece,X),r.on("touchmove",ve).on("touchend",U))}(),w},window.ChessBoard=window.Chessboard,window.Chessboard.fenToObj=pe,window.Chessboard.objToFen=ce}();