var Localization={template:"<div/>",data:function(){return{l10n:null,code:null,dictionary:null,units:[{name:"Years",factor:30758400},{name:"Months",factor:2592e3},{name:"Weeks",factor:604800},{name:"Days",factor:86400},{name:"Hours",factor:3600},{name:"Minutes",factor:60}]}},mounted:function(){const e=this;requirejs(["sugar-web/env"],(function(n){n.getEnvironment(((n,t)=>{const a="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,i=t.user?t.user.language:a;e.loadLanguageFile(i)}))}))},methods:{loadLanguageFile:function(e){const n=this;requirejs(["lib/i18next.min.js","lib/axios.min.js"],(function(t,a){a.get(`./locales/${e}.json`).then((a=>{t.init({lng:e,fallbackLng:"en",debug:!1,resources:{[e]:{translation:a.data}}},(()=>{n.l10n=t,n.code=t.language,n.dictionary=t.getResourceBundle(t.language,"translation"),n.$emit("localized"),n.subscribeLanguageChange()}))})).catch((e=>{n.loadLanguageFile("en"),console.log(e)}))}))},subscribeLanguageChange:function(){const e=this;requirejs(["lib/i18next.min.js"],(function(n){n.on("languageChanged",(t=>{e.code=t,e.dictionary=n.getResourceBundle(t,"translation"),e.$emit("localized")}))}))},get:function(e,n){let t="";if(t=this.dictionary&&this.dictionary[e]||e,n){let e=t.match(/{{\s*[\w\.]+\s*}}/g);for(let a in e){let i=e[a].match(/[\w\.]+/)[0];n[i]&&(t=t.replace(e[a],n[i]))}}return t},localize:function(e){const n=this;Object.keys(e).forEach(((t,a)=>{e[t]=n.get(t.substr(6))}))},localizeTimestamp:function(e){const n=0;let t="",a=(Date.now()-e)/1e3;for(let e=0;e<this.units.length;e++){let i=this.units[e].factor,o=Math.floor(a/i);if(o>0&&(n>0&&(t+=","),t+=" "+o+" "+(1==o?this.get(this.units[e].name+"_one"):this.get(this.units[e].name+"_other")),a-=o*i),""!=t&&(n+=1),2==n)break}return 0==n?this.get("SecondsAgo"):this.get("Ago",{time:t})}}};