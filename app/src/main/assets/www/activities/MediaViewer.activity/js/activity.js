function displayAudio(e){var t=document.createElement("audio");t.src=e,t.setAttribute("controls",""),t.style.maxWidth=document.body.clientWidth-55+"px",t.style.width=document.body.clientWidth-60+"px",t.style.marginTop=(document.body.clientHeight-55-t.getBoundingClientRect().height)/2+"px",document.getElementById("media").appendChild(t)}function displayVideo(e){var t=document.createElement("video");t.src=e,t.setAttribute("controls",""),document.body.clientWidth>document.body.clientHeight?(t.style.marginTop="3px",t.style.width="auto",t.style.maxHeight=document.body.clientHeight-55+"px",t.style.height=document.body.clientHeight-60+"px"):(t.style.height="auto",t.style.maxWidth=document.body.clientWidth-55+"px",t.style.width=document.body.clientWidth-60+"px",t.style.marginTop=(document.body.clientHeight-55-t.getBoundingClientRect().height)/4+"px"),document.getElementById("media").appendChild(t)}function displayImage(e){var t=document.createElement("img");t.src=e,document.body.clientWidth>document.body.clientHeight?(t.style.marginTop="3px",t.style.width="auto",t.style.maxHeight=document.body.clientHeight-55+"px",t.style.height=document.body.clientHeight-60+"px"):(t.style.height="auto",t.style.maxWidth=document.body.clientWidth-55+"px",t.style.width=document.body.clientWidth-60+"px",t.style.marginTop=(document.body.clientHeight-55-t.getBoundingClientRect().height)/4+"px"),document.getElementById("media").appendChild(t)}define(["sugar-web/activity/activity","sugar-web/env","l10n"],(function(e,t,i){requirejs(["domReady!","sugar-web/datastore"],(function(n,d){if(e.setup(),t.getEnvironment((function(e,t){var n="undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.i18n.getUILanguage():navigator.language,d=t.user?t.user.language:n;i.init(d)})),window.addEventListener("localized",(function(){document.getElementById("emptytext").innerHTML="<p>"+i.get("EmptyText")+"<p>"})),window.top&&window.top.sugar&&window.top.sugar.environment&&window.top.sugar.environment.objectId){var o=document.getElementById("loading-svg");o.style.width=document.body.clientWidth+"px",o.style.height=document.body.clientHeight+"px",o.style.display="block";"undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime?chrome.storage.local.get("sugar_settings",(function(e){500})):200,setTimeout((function(){e.getDatastoreObject().loadAsText((function(e,t,i){if(o.style.display="none",null!=i&&t&&t.mimetype){document.getElementById("EmptyMessage").style.display="none";var n=t.mimetype.split("/")[0];0==n.indexOf("audio")&&displayAudio(i),0==n.indexOf("image")&&displayImage(i),0==n.indexOf("video")&&displayVideo(i)}}))}),1e3)}}))}));