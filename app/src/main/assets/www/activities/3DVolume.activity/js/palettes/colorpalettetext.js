define(["sugar-web/graphics/palette","text!activity/palettes/colorpalettetext.html","sugar-web/env"],(function(e,t,o){var n={ColorPalette:function(n,l){e.Palette.call(this,n,l),this.getPalette().id="color-palette";var r=document.createElement("div");r.innerHTML=t,this.setContent([r]);let c=this;o.getEnvironment((function(e,t){currentenv=t,c.getPalette().childNodes[0].style.backgroundColor=currentenv.user.colorvalue.stroke}));document.querySelectorAll(".color-text").forEach((e=>{e.addEventListener("click",(function(){const e=this.style.backgroundColor;c.getPalette().childNodes[0].style.backgroundColor=this.style.backgroundColor;const t=new CustomEvent("color-selected-text",{detail:{color:e}});document.dispatchEvent(t),c.popDown()}))}))}};return n.ColorPalette.prototype=Object.create(e.Palette.prototype,{addEventListener:{value:function(e,t,o){return console.log("adding event listener"),this.getPalette().addEventListener(e,t,o)},enumerable:!0,configurable:!0,writable:!0}}),n}));