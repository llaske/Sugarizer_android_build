define(["sugar-web/graphics/palette","text!activity/palettes/colorpalettefill.html","sugar-web/env"],(function(e,t,l){var o={};o.ColorPalette=function(o,n){e.Palette.call(this,o,n),this.getPalette().id="color-palette";var r=document.createElement("div");r.innerHTML=t,this.setContent([r]);let c=this;l.getEnvironment((function(e,t){currentenv=t,c.getPalette().childNodes[0].style.backgroundColor=currentenv.user.colorvalue.fill}));document.querySelectorAll(".color-fill").forEach((e=>{e.addEventListener("click",(function(){const e=this.style.backgroundColor;c.getPalette().childNodes[0].style.backgroundColor=this.style.backgroundColor;const t=new CustomEvent("color-selected-fill",{detail:{color:e}});document.dispatchEvent(t),c.popDown()}))}))};return o.ColorPalette.prototype=Object.create(e.Palette.prototype,{addEventListener:{value:function(e,t,l){return console.log("adding event listener"),this.getPalette().addEventListener(e,t,l)},enumerable:!0,configurable:!0,writable:!0}}),o}));