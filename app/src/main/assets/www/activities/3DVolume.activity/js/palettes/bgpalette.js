define(["sugar-web/graphics/palette","text!activity/palettes/bgpalette.html","sugar-web/graphics/presencepalette"],(function(e,t,n){var c={BgPalette:function(n,c){e.Palette.call(this,n,c),this.getPalette().id="bg-palette";var a=document.createElement("div");a.innerHTML=t,this.setContent([a]),this.bgSelectedEvent=document.createEvent("CustomEvent"),this.bgSelectedEvent.initCustomEvent("bg-selected",!0,!0,{bg:""});let l=this,i=null;function onClick(e){l.bgSelectedEvent.bg=e.currentTarget.id,document.querySelector("#green-board").classList.contains("active")&&document.querySelector("#green-board").classList.remove("active"),document.querySelector("#wood").classList.contains("active")&&document.querySelector("#wood").classList.remove("active"),document.querySelector("#default").classList.contains("active")&&document.querySelector("#default").classList.remove("active"),e.currentTarget.classList.add("active"),i&&i(l.bgSelectedEvent.bg),l.popDown()}this.setBackgroundChangeCallback=function(e){i=e},document.getElementById("green-board").addEventListener("click",onClick),document.getElementById("default").addEventListener("click",onClick),document.getElementById("wood").addEventListener("click",onClick)}};return c.BgPalette.prototype=Object.create(e.Palette.prototype,{addEventListener:{value:function(e,t,n){return console.log("adding event listener"),this.getPalette().addEventListener(e,t,n)},enumerable:!0,configurable:!0,writable:!0}}),c}));