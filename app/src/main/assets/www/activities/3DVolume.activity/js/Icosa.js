function createIcosahedron(e,t,n,l,a,o,r,c,s,i,N,u,w,E,p,h,d,C,m){let y,T=null==t?N.showNumbers:t,A=null==n?N.toggleTransparent:n,f=null!=e?e:N.presentColor,R=null!=i?i:N.textColor;if(T){let e=new THREE.Vector2(4,5),t=512,n=new THREE.IcosahedronGeometry(1.5),l=document.createElement("canvas");l.width=t*e.x,l.height=t*e.y;let a=l.getContext("2d");a.fillStyle=f,a.fillRect(0,0,l.width,l.height);let o=[],r=[[.067,.25],[.933,.25],[.5,1]].map((e=>new THREE.Vector2(...e)));for(let n=0;n<20;n++){let c=n%e.x,s=Math.floor(n/e.x);o.push((r[0].x+c)/e.x,(r[0].y+s)/e.y,(r[1].x+c)/e.x,(r[1].y+s)/e.y,(r[2].x+c)/e.x,(r[2].y+s)/e.y),a.textAlign="center",a.textBaseline="middle",a.font="bold 175px Arial",a.fillStyle=R;a.fillText(n+1,(c+.5)*t,l.height-(s+.5)*t)}n.setAttribute("uv",new THREE.Float32BufferAttribute(o,2));let c=new THREE.CanvasTexture(l);c.colorSpace=THREE.SRGBColorSpace;let s=new THREE.MeshPhongMaterial({map:c});y=new THREE.Mesh(n,s)}else if(A){const t=new THREE.IcosahedronGeometry(1.5),n=new THREE.WireframeGeometry(t),l=new THREE.LineBasicMaterial({color:null!=e?e:N.presentColor,depthTest:!0,opacity:1,transparent:!1});y=new THREE.LineSegments(n,l)}else{const t=new THREE.IcosahedronGeometry(1.5),n=new THREE.MeshStandardMaterial({color:null!=e?e:N.presentColor,wireframe:!1});y=new THREE.Mesh(t,n)}y.rotation.set(Math.PI/4,Math.PI/4,0),y.castShadow=!0,y.userData=m,E.add(y);const x=(1+Math.sqrt(5))/2,M=.8,V=[new CANNON.Vec3(-1,x,0).scale(M),new CANNON.Vec3(1,x,0).scale(M),new CANNON.Vec3(-1,-x,0).scale(M),new CANNON.Vec3(1,-x,0).scale(M),new CANNON.Vec3(0,-1,x).scale(M),new CANNON.Vec3(0,1,x).scale(M),new CANNON.Vec3(0,-1,-x).scale(M),new CANNON.Vec3(0,1,-x).scale(M),new CANNON.Vec3(x,0,-1).scale(M),new CANNON.Vec3(x,0,1).scale(M),new CANNON.Vec3(-x,0,-1).scale(M),new CANNON.Vec3(-x,0,1).scale(M)],g=new CANNON.ConvexPolyhedron({vertices:V,faces:[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]]});let H=null==l?xCoordinate:l,O=null==a?zCoordinate:a,S=null==c?4:1;const I=new CANNON.Body({mass:2,shape:g,position:new CANNON.Vec3(H,S,O),material:new CANNON.Material,restitution:.3});I.sleepSpeedLimit=.5,I.sleepTimeLimit=3,null!=l&&I.sleep();const q=new CANNON.ContactMaterial(p,I.material,{friction:N.friction});w.addContactMaterial(q),w.addBody(I);let B=null==h?.9*Math.random()+.1:h,b=null==d?.9*Math.random()+.1:d,v=null==C?.9*Math.random()+.1:C;I.angularVelocity.set(B,b,v),I.angularDamping=.1,I.applyImpulse(N.offset,N.rollingForce),y.position.copy(I.position),y.quaternion.copy(I.quaternion),null!=s&&null!=s&&(y.quaternion.copy(s),I.quaternion.copy(s)),u.push([y,I,"icosa",T,A,f,R,B,b,v,q])}function getIcosaScore(e,t,n){let l,a=new THREE.Vector3(0,1),o=2*Math.PI,r=t.geometry.getAttribute("normal").array;for(let e=0;e<20;++e){let n=e+1,c=9*e,s=new THREE.Vector3(r[c],r[c+1],r[c+2]).clone().applyQuaternion(t.quaternion).angleTo(a);s<o&&(o=s,l=n)}return n||(e.lastRoll+=l+" + ",e.presentScore+=l),l}