enyo.kind({name:"Sugar.Journal",published:{journal:null},kind:"FittableRows",components:[{name:"warningbox",kind:"Sugar.GenericDialogBox",showing:!1,classes:"journal-dialogbox",onCancel:"dialogSelectedCancel",onOk:"dialogSelectedOk"},{name:"content",kind:"Scroller",fit:!0,classes:"journal-content",onresize:"draw",onScroll:"onscroll",components:[{name:"empty",classes:"journal-empty",showing:!0},{name:"message",classes:"journal-message",showing:!0},{name:"nofilter",kind:"Sugar.IconButton",icon:{directory:"icons",icon:"dialog-cancel.svg"},classes:"listview-button",ontap:"nofilter",showing:!1},{name:"journalList",classes:"journal-list",kind:"Repeater",onSetupItem:"setupItem",components:[{name:"item",classes:"journal-list-item",components:[{name:"check",kind:"Input",type:"checkbox",classes:"toggle journal-check",onchange:"switchCheck"},{name:"favorite",kind:"Sugar.Icon",x:40,y:4,size:constant.iconSizeLargeFavorite,ontap:"switchFavorite"},{name:"activity",kind:"Sugar.Icon",x:100,y:5,size:constant.iconSizeList,colorized:!0,ontap:"runActivity"},{name:"title",showing:!0,classes:"journal-title",ontap:"titleEditStart"},{name:"titleEdit",showing:!1,kind:"enyo.Input",classes:"journal-title-edit",onblur:"titleEditEnd"},{name:"assignmentButton",kind:"Sugar.Icon",showing:!1,classes:"journal-assignment",colorized:!0,x:0,y:4,icon:{directory:"icons",icon:"assignment.svg"},size:constant.iconSizeList},{name:"assignmentInstructions",kind:"Sugar.Icon",showing:!1,classes:"assignment-instructions",x:0,y:4,icon:{directory:"icons",icon:"instructions-icon.svg"},size:constant.iconSizeList},{name:"submitAssignment",kind:"Sugar.Icon",showing:!1,classes:"assignment-submit",x:0,y:4,icon:{directory:"icons",icon:"submit-assignment.svg"},size:constant.iconSizeList},{name:"assignmentDueDate",classes:"assignment-dueDate"},{name:"time",classes:"journal-time"},{name:"goright",kind:"Sugar.Icon",classes:"journal-goright",size:constant.iconSizeFavorite,ontap:"runActivity"}]}]},{name:"activityPopup",kind:"Sugar.Popup",showing:!1},{name:"instructionsPopup",kind:"Sugar.Popup",showing:!1}]},{name:"footer",classes:"journal-footer toolbar",showing:!1,components:[{name:"journalbutton",kind:"Button",classes:"toolbutton view-localjournal-button active",ontap:"showLocalJournal"},{name:"cloudonebutton",kind:"Button",classes:"toolbutton view-cloudone-button",ontap:"showPrivateCloud"},{name:"cloudallbutton",kind:"Button",classes:"toolbutton view-cloudall-button",ontap:"showSharedCloud"},{name:"syncgear",classes:"sync-button sync-gear sync-gear-journal",showing:!1},{name:"syncbutton",kind:"Button",classes:"toolbutton sync-button sync-journal",title:"Sync",ontap:"syncJournal"},{name:"pageup",kind:"Button",classes:"toolbutton page-up",showing:!1,title:"Previous",ontap:"pagePrevious"},{name:"pagecount",content:"99/99",classes:"page-count",showing:!1},{name:"pagedown",kind:"Button",classes:"toolbutton page-down",showing:!1,title:"Next",ontap:"pageNext"}]}],create:function(){this.inherited(arguments),this.toolbar=null,this.empty=0==this.journal.length,this.realLength=0,this.loadResult={},this.loadingError=!1,this.journalType=constant.journalLocal,this.smallTime=!1,this.dialogAction=-1,this.journalChanged(),this.$.footer.setShowing(null!=preferences.getNetworkId()&&null!=preferences.getPrivateJournal()&&null!=preferences.getSharedJournal()),"rtl"==l10n.language.direction&&this.$.message.addClass("rtl-10"),this.draw()},rendered:function(){this.inherited(arguments),iconLib.colorize(this.$.journalbutton.hasNode(),preferences.getColor(),(function(){})),iconLib.colorize(this.$.cloudonebutton.hasNode(),preferences.getColor(),(function(){})),iconLib.colorize(this.$.cloudallbutton.hasNode(),preferences.getColor(),(function(){})),this.$.cloudallbutton.setNodeProperty("title",l10n.get("Shared")),this.$.cloudonebutton.setNodeProperty("title",l10n.get("Private")),this.$.journalbutton.setNodeProperty("title",l10n.get("Journal")),this.$.syncbutton.setNodeProperty("title",l10n.get("Synchronize")),this.$.pageup.setNodeProperty("title",l10n.get("Back")),this.$.pagedown.setNodeProperty("title",l10n.get("Next")),"assignment_view"===constant.viewNames[app.getView()]&&this.getToolbar().filterAssignment(),this.journalChanged()},onscroll:function(t,e){var n=e.scrollBounds,i=n.maxTop-n.top<constant.journalScrollLimit,o=this.$.journalList.get("count");if(this.journalType==constant.journalLocal&&!this.getToolbar().hasFilter()&&i&&this.realLength>o){var a=this.getSelection(),s=Math.min(o+constant.journalStepCount,this.journal.length);humane.log(l10n.get("Loading")),this.$.journalList.set("count",s,!0),this.setSelection(a),this.updateSelectionCount()}},pageNext:function(){var t=this.loadResult;if(t.offset+t.limit<t.total){this.getToolbar().setMultiselectToolbarVisibility(!1),this.$.warningbox.setShowing(!1);var e=this.journalType==constant.journalRemotePrivate?preferences.getPrivateJournal():preferences.getSharedJournal(),n=t.offset+t.limit;t.total-n<t.limit&&(n=t.total-t.limit),humane.log(l10n.get("Loading")),this.getToolbar().hasFilter()?this.filterEntries(this.request.name,this.request.favorite,this.request.assignment,this.request.typeactivity,this.request.stime,n):this.loadRemoteJournal(e,n)}},pagePrevious:function(){var t=this.loadResult;if(t.offset>0){this.getToolbar().setMultiselectToolbarVisibility(!1),this.$.warningbox.setShowing(!1);var e=this.journalType==constant.journalRemotePrivate?preferences.getPrivateJournal():preferences.getSharedJournal(),n=t.offset-t.limit;n<t.limit&&(n=0),humane.log(l10n.get("Loading")),this.getToolbar().hasFilter()?this.filterEntries(this.request.name,this.request.favorite,this.request.assignment,this.request.typeactivity,this.request.stime,n):this.loadRemoteJournal(e,n)}},showPageButton:function(){var t=this.loadResult;if(this.journalType==constant.journalLocal||!t)return this.$.pagedown.setShowing(!1),this.$.pageup.setShowing(!1),void this.$.pagecount.setShowing(!1);var e=t.offset>0;this.$.pageup.setShowing(e);var n=t.offset+t.limit<t.total;this.$.pagedown.setShowing(n);var i=(t.total?1:0)+Math.ceil(t.offset/t.limit),o=Math.ceil(t.total/t.limit);this.$.pagecount.setContent(i+"/"+o),this.$.pagecount.setShowing(n||e)},getToolbar:function(){return null==this.toolbar&&(this.toolbar=new Sugar.JournalToolbar),this.toolbar},draw:function(){var t=util.getCanvasCenter(),e=this.$.footer.getShowing()?55:0;this.smallTime=t.dx<660;var n=util.platform.android?3:0;this.$.content.applyStyle("height",t.dy-e-n+"px"),this.$.empty.applyStyle("margin-left",t.x-constant.sizeEmpty/4+"px");var i=t.y-constant.sizeEmpty/4-80;this.$.empty.applyStyle("margin-top",i+"px"),this.$.message.setContent(l10n.get("JournalEmpty")),null!=preferences.getNetworkId()&&null!=preferences.getPrivateJournal()&&null!=preferences.getSharedJournal()&&(tutorial.setElement("journalbutton",this.$.journalbutton.getAttribute("id")),tutorial.setElement("cloudonebutton",this.$.cloudonebutton.getAttribute("id")),tutorial.setElement("cloudallbutton",this.$.cloudallbutton.getAttribute("id")))},updateNetworkBar:function(){this.$.footer.setShowing(null!=preferences.getNetworkId()&&null!=preferences.getPrivateJournal()&&null!=preferences.getSharedJournal()),this.draw()},journalChanged:function(){if(this.$.empty){this.$.empty.show(),this.$.message.show(),this.$.nofilter.show();var t=!this.getToolbar().hasFilter(),e=this.journalType==constant.journalLocal;if(this.empty=t&&!this.loadingError&&0==this.journal.length,null!=this.journal&&this.journal.length>0){var n=e&&t&&this.journal.length>constant.journalInitCount?constant.journalInitCount:this.journal.length;this.realLength=this.journal.length,this.$.journalList.set("count",n,!0),this.$.empty.hide(),this.$.message.hide(),this.$.nofilter.hide()}else this.$.journalList.set("count",0,!0),this.empty?(this.$.message.setContent(l10n.get("JournalEmpty")),this.$.nofilter.hide()):this.loadingError?(this.$.message.setContent(l10n.get("ErrorLoadingRemote")),this.$.nofilter.setText(l10n.get("Retry")),this.$.nofilter.setIcon({directory:"icons",icon:"system-restart.svg"})):(this.$.message.setContent(l10n.get("NoMatchingEntries")),this.$.nofilter.setText(l10n.get("ClearSearch")),this.$.nofilter.setIcon({directory:"icons",icon:"dialog-cancel.svg"}));this.showPageButton()}},setupItem:function(t,e){var n=this.journal[e.index];n.metadata.buddy_color&&e.item.$.activity.setColorizedColor(n.metadata.buddy_color);var i=activities.getById(n.metadata.activity);activities.isGeneric(i)?"text/plain"==n.metadata.mimetype?i={directory:"icons",icon:"application-x-txt.svg"}:"application/pdf"==n.metadata.mimetype?i={directory:"icons",icon:"application-x-pdf.svg"}:"application/msword"==n.metadata.mimetype?i={directory:"icons",icon:"application-x-doc.svg"}:"application/vnd.oasis.opendocument.text"==n.metadata.mimetype&&(i={directory:"icons",icon:"application-x-odt.svg"}):"text/csv"==n.metadata.mimetype&&(i={directory:"icons",icon:"application-x-csv.svg"}),e.item.$.activity.setIcon(i),e.item.$.favorite.setIcon({directory:"icons",icon:"emblem-favorite-large.svg"});var o=n.metadata.keep;if(n.metadata.assignmentId){e.item.$.assignmentButton.setShowing(!0),""!==n.metadata.instructions&&e.item.$.assignmentInstructions.setShowing(!0),e.item.$.submitAssignment.ontap="submitAssignment",(!0===n.metadata.lateTurnIn&&n.metadata.dueDate<(new Date).getTime()||!0===n.metadata.isSubmitted&&n.metadata.dueDate<(new Date).getTime()&&!1===n.metadata.lateTurnIn)&&(e.item.$.submitAssignment.ontap="submitAssignment"),e.item.$.submitAssignment.setShowing(!0);var a=new Date,s=new Date(n.metadata.dueDate).getTime()-a.getTime();s>0?e.item.$.assignmentDueDate.setContent(util.timestampToElapsedString(a.getTime()-s,2,!1,"Expected")):(e.item.$.assignmentDueDate.setContent(l10n.get("DueDatePassed")),e.item.$.submitAssignment.setShowing(n.metadata.lateTurnIn)),!0===n.metadata.isSubmitted&&(e.item.$.assignmentDueDate.setContent(util.timestampToElapsedString(n.metadata.submissionDate,2,!1,"Submitted")),e.item.$.submitAssignment.setShowing(!1))}else e.item.$.assignmentButton.setShowing(!1),e.item.$.assignmentInstructions.setShowing(!1),e.item.$.submitAssignment.setShowing(!1);e.item.$.favorite.setColorized(void 0!==o&&1==o),e.item.$.title.setContent(n.metadata.title);var l=this.getToolbar().getSortType();1==l?e.item.$.time.setContent(util.timestampToElapsedString(n.metadata.creation_time,2,this.smallTime)):2==l?e.item.$.time.setContent(util.formatSize(n.metadata.textsize||0)):e.item.$.time.setContent(util.timestampToElapsedString(n.metadata.timestamp,2,this.smallTime)),e.item.$.goright.setIcon({directory:"icons",icon:"go-right.svg"}),e.item.$.activity.setPopupShow(enyo.bind(this,"showActivityPopup")),e.item.$.activity.setPopupHide(enyo.bind(this,"hideActivityPopup")),e.item.$.assignmentInstructions.setPopupShow(enyo.bind(this,"showInstructionsPopup",e)),e.item.$.assignmentInstructions.setPopupHide(enyo.bind(this,"hideInstructionsPopup")),e.item.$.activity.setData(n),"rtl"==l10n.language.direction&&(e.item.$.title.addClass("rtl-14"),e.item.$.titleEdit.addClass("rtl-14"),e.item.$.time.addClass("rtl-14")),0==e.index&&(tutorial.setElement("checkitem",e.item.$.check.getAttribute("id")),tutorial.setElement("activityitem",e.item.$.activity.getAttribute("id")),tutorial.setElement("titleitem",e.item.$.title.getAttribute("id")),tutorial.setElement("timeitem",e.item.$.time.getAttribute("id")),tutorial.setElement("favoriteitem",e.item.$.favorite.getAttribute("id")),tutorial.setElement("assignment",e.item.$.assignmentButton.getAttribute("id")),tutorial.setElement("instructions",e.item.$.assignmentInstructions.getAttribute("id")),tutorial.setElement("submit",e.item.$.submitAssignment.getAttribute("id")),tutorial.setElement("dueDate",e.item.$.assignmentDueDate.getAttribute("id")))},switchFavorite:function(t,e){var n=this.journal[e.index].objectId,i=this.journal[e.index].metadata.keep;this.journal[e.index].metadata.keep=void 0===i?1:(i+1)%2,stats.trace(constant.viewNames[app.getView()],"switch_favorite",n,null);var o=new datastore.DatastoreObject(n);o.setMetadata(this.journal[e.index].metadata),o.save(),preferences.isConnected()&&preferences.getOptions("sync")&&app.otherview.syncJournal(),e.dispatchTarget.container.setColorized(1==this.journal[e.index].metadata.keep),e.dispatchTarget.container.render()},switchCheck:function(t,e){this.$.warningbox.setShowing(!1),this.getToolbar().setMultiselectToolbarVisibility(this.updateSelectionCount()>0)},updateSelectionCount:function(){var t=this.getSelection();return this.getToolbar().setSelectedCount(t.length,this.$.journalList.get("count")),t.length},getSelection:function(){for(var t=[],e=this.$.journalList.get("count"),n=0;n<e;n++)this.$.journalList.children[n].$.check.getNodeProperty("checked")&&t.push(n);return t},setSelection:function(t){for(var e=t.length,n=0;n<e;n++){var i=t[n];this.$.journalList.children[i].$.check.setNodeProperty("checked",!0)}},selectAll:function(){for(var t=this.$.journalList.get("count"),e=0;e<t;e++)this.$.journalList.children[e].$.check.setNodeProperty("checked",!0);this.getToolbar().setSelectedCount(t,t)},unselectAll:function(){for(var t=this.$.journalList.get("count"),e=0;e<t;e++)this.$.journalList.children[e].$.check.setNodeProperty("checked",!1);this.getToolbar().setMultiselectToolbarVisibility(!1)},removeSelected:function(){this.dialogAction=constant.journalRemove,this.$.warningbox.setTitle(l10n.get("Erase"));var t=this.getSelection().length;this.$.warningbox.setMessage(1==t?l10n.get("Erase_one",{count:t}):l10n.get("Erase_other",{count:t})),this.$.warningbox.setOkText(l10n.get("Ok")),this.$.warningbox.setCancelText(l10n.get("Cancel")),this.$.warningbox.setShowing(!0)},duplicateSelected:function(){this.dialogAction=constant.journalDuplicate,this.$.warningbox.setTitle(l10n.get("Duplicate"));var t=this.getSelection().length;this.$.warningbox.setMessage(1==t?l10n.get("Duplicate_one",{count:t}):l10n.get("Duplicate_other",{count:t})),this.$.warningbox.setOkText(l10n.get("Ok")),this.$.warningbox.setCancelText(l10n.get("Cancel")),this.$.warningbox.setShowing(!0)},copySelected:function(t){this.dialogAction=t;var e=["CopyToLocal","CopyToPrivate","CopyToShared","","CopyToDevice"];this.$.warningbox.setTitle(l10n.get(e[t]));var n=this.getSelection().length;this.$.warningbox.setMessage(1==n?l10n.get(e[t]+"_one",{count:n}):l10n.get(e[t]+"_other",{count:n})),this.$.warningbox.setOkText(l10n.get("Ok")),this.$.warningbox.setCancelText(l10n.get("Cancel")),this.$.warningbox.setShowing(!0)},dialogSelectedOk:function(){this.$.warningbox.setShowing(!1),this.getToolbar().setMultiselectToolbarVisibility(!1);for(var t=this.getSelection(),e=[],n=0;n<t.length;n++)e.push(this.journal[t[n]]);var i=this,o=this.dialogAction==constant.journalDevice&&util.getClientType()==constant.appType&&util.platform.electron;o||humane.log(l10n.get(this.dialogAction==constant.journalRemove?"Erasing":"Copying")),window.setTimeout((function(){if(o)i.copyMultipleToDevice(e);else for(var t=0;t<e.length;t++)i.dialogAction==constant.journalDevice?i.copyToDevice(e[t]):i.dialogAction==constant.journalRemove?i.removeEntry(e[t],{isLast:t==e.length-1}):i.dialogAction==constant.journalDuplicate?i.duplicateEntry(e[t],{isLast:t==e.length-1}):i.dialogAction==constant.journalLocal?i.copyToLocal(e[t]):i.copyToRemote(e[t],i.dialogAction==constant.journalRemotePrivate?preferences.getPrivateJournal():preferences.getSharedJournal());i.unselectAll()}),100)},dialogSelectedCancel:function(){this.$.warningbox.setShowing(!1),this.getToolbar().setMultiselectToolbarVisibility(!0)},runActivity:function(t,e){this.runCurrentActivity(this.journal[e.index])},runCurrentActivity:function(t){var e=activities.getById(t.metadata.activity);if(activities.isGeneric(e)){if("application/pdf"==t.metadata.mimetype){var n=this;this.loadEntry(t,(function(t,e,i){n.$.activityPopup.hidePopup(),util.openAsDocument(e,i)}))}}else{n=this;this.loadEntry(t,(function(i,o,a){if(n.journalType!=constant.journalLocal){var s=new datastore.DatastoreObject(t.objectId);return s.setMetadata(o),s.setDataAsText(a),void s.save((function(){preferences.runActivity(e,t.objectId,o.title)}))}preferences.runActivity(e,t.objectId,o.title)}))}},filterEntries:function(t,e,n,i,o,a){var s=this.getToolbar().getSortType();if(this.journalType==constant.journalLocal){this.journal=datastore.find(i),this.loadingError=!1,this.journal=this.journal.filter((function(i){return(void 0===e||i.metadata.keep)&&(0==t.length||-1!=i.metadata.title.toLowerCase().indexOf(t.toLowerCase()))&&(void 0===o||i.metadata.timestamp>=o)&&(void 0===n||i.metadata.assignmentId)}));r=this;this.journal=this.journal.sort((function(t,e){return 1==s?parseInt(e.metadata.creation_time)-parseInt(t.metadata.creation_time):2==s?parseInt(e.metadata.textsize||0)-parseInt(t.metadata.textsize||0):3==s?parseInt(e.metadata.dueDate)-parseInt(t.metadata.dueDate):parseInt(e.metadata.timestamp)-parseInt(t.metadata.timestamp)})),this.journalChanged()}else{var l=this.journalType==constant.journalRemotePrivate?preferences.getPrivateJournal():preferences.getSharedJournal(),r=this,c="-timestamp";1==s?c="-creation_time":2==s?c="-textsize":3==s&&(c="-dueDate");var u={typeactivity:i,title:void 0!==t?t:void 0,stime:void 0!==o?o:void 0,favorite:e,assignment:n,field:constant.fieldMetadata,limit:constant.pageJournalSize,sort:c,offset:void 0!==a?a:0};myserver.getJournal(l,u,(function(t,e){r.loadResult={offset:e.offset,total:e.total,limit:e.limit},r.request=u,r.journal=e.entries,r.empty=!r.getToolbar().hasFilter()&&!this.loadingError&&0==r.journal.length,r.loadingError=!1,r.journalChanged()}),(function(){console.log("WARNING: Error filtering journal "+l),r.loadResult={},r.request={},r.journal=[],r.loadingError=!0,r.journalChanged()}))}},nofilter:function(){this.toolbar.removeFilter(),this.filterEntries("",void 0,void 0,void 0,void 0,void 0)},submitAssignment:function(t,e){var n=this.journal[e.index];if(1!=n.metadata.isSubmitted)if(0==n.metadata.isSubmitted&&n.metadata.dueDate<Date.now()&&0==n.metadata.lateTurnIn)humane.log(l10n.get("AssignmentDueDatePassed"));else{n.metadata.isSubmitted=!0,n.metadata.submissionDate=(new Date).getTime();var i=this;myserver.postAssignment(n.metadata.assignmentId,n.objectId,(function(t,e){humane.log(l10n.get("AssignmentSubmitted"))}),(function(t,e){humane.log(l10n.get("AssignmentError"))}));var o=new datastore.DatastoreObject(n.objectId);o.setMetadata(n.metadata),o.save((function(){console.log("Assignment submitted"),i.journalChanged()}))}else humane.log(l10n.get("AssignmentAlreadySubmitted"))},showActivityPopup:function(t){if(t.owner){t.icon;var e=t.getData(),n=null;this.journalType!=constant.sharedJournal?e.metadata.textsize&&e.metadata.textsize>constant.minimumSizeDisplay&&(n=util.formatSize(e.metadata.textsize)):e.metadata.buddy_name&&(n=l10n.get("ByUser",{user:e.metadata.buddy_name})),this.$.activityPopup.setHeader({icon:t.icon,colorized:!0,colorizedColor:e.metadata.buddy_color?e.metadata.buddy_color:null,name:e.metadata.title,title:n,action:enyo.bind(this,"runCurrentActivity"),data:[e,null]}),this.$.activityPopup.setItems(null);var i=[];i.push({icon:{directory:"icons",icon:"activity-start.svg"},colorized:!1,name:l10n.get("RestartActivity"),action:enyo.bind(this,"runCurrentActivity"),disable:activities.isGeneric(activities.getById(e.metadata.activity))&&"application/pdf"!=e.metadata.mimetype,data:[e,null]}),i.push({icon:{directory:"icons",icon:"copy-journal.svg"},colorized:!1,name:l10n.get("CopyToLocal"),action:enyo.bind(this,"copyToLocal"),data:[e,null],disable:this.journalType==constant.journalLocal}),i.push({icon:{directory:"icons",icon:"copy-cloud-one.svg"},colorized:!1,name:l10n.get("CopyToPrivate"),action:enyo.bind(this,"copyToRemote"),data:[e,preferences.getPrivateJournal()],disable:!preferences.isConnected()||this.journalType==constant.journalRemotePrivate}),i.push({icon:{directory:"icons",icon:"copy-cloud-all.svg"},colorized:!1,name:l10n.get("CopyToShared"),action:enyo.bind(this,"copyToRemote"),data:[e,preferences.getSharedJournal()],disable:!preferences.isConnected()||this.journalType==constant.journalRemoteShared||e.metadata.assignmentId}),i.push({icon:{directory:"icons",icon:"copy-to-device.svg"},colorized:!1,name:l10n.get("CopyToDevice"),action:enyo.bind(this,"copyToDevice"),data:[e,null]}),i.push({icon:{directory:"icons",icon:"duplicate.svg"},colorized:!1,name:l10n.get("Duplicate"),action:enyo.bind(this,"duplicateEntry"),data:[e,null],disable:this.journalType!=constant.journalLocal||e.metadata.assignmentId}),i.push({icon:{directory:"icons",icon:"list-remove.svg"},colorized:!1,name:l10n.get("Erase"),action:enyo.bind(this,"removeEntry"),data:[e,null]}),this.$.activityPopup.setFooter(i),this.$.activityPopup.setMargin({left:0,top:60*t.owner.index+20-mouse.position.y}),this.$.activityPopup.showPopup()}},showInstructionsPopup:function(t){var e=this.journal[t.index];this.$.instructionsPopup.setHeader({icon:{directory:"icons",icon:"instructions-icon.svg"},colorized:!1,name:l10n.get("Instructions"),title:null,action:enyo.bind(this,"hideInstructionsPopup")});var n=[];n.push({name:e.metadata.instructions.replace("\n","<br/>\n"),action:enyo.bind(this,"hideInstructionsPopup")}),this.$.instructionsPopup.setFooter(n),this.$.instructionsPopup.showPopup()},hideInstructionsPopup:function(){return!this.$.instructionsPopup||!this.$.instructionsPopup.cursorIsInside()&&(this.$.instructionsPopup.hidePopup(),!0)},hideActivityPopup:function(t){return!this.$.activityPopup||!this.$.activityPopup.cursorIsInside()&&!t.cursorIsInside()&&(this.$.activityPopup.hidePopup(),!0)},copyToLocal:function(t){var e=this;stats.trace(constant.viewNames[app.getView()],"copy_to_local",t.objectId,null),this.loadEntry(t,(function(n,i,o){var a=new datastore.DatastoreObject(t.objectId);a.setMetadata(i),a.setDataAsText(o),a.save(),e.$.activityPopup.hidePopup()}))},copyToDevice:function(t,e){this.$.activityPopup.hidePopup(),this.loadEntry(t,(function(t,n,i){util.writeFile(e,n,i,(function(t,e){t?humane.log(l10n.get("ErrorWritingFile")):humane.log(l10n.get("FileWroteTo",{file:e}))}))}))},copyMultipleToDevice:function(t){var e=this;util.askDirectory((function(n){for(var i=0;i<t.length;i++)e.copyToDevice(t[i],n)}))},copyToRemote:function(t,e){stats.trace(constant.viewNames[app.getView()],"copy_to_remote",t.objectId,e),this.loadEntry(t,(function(n,i,o){var a={metadata:i,text:o,objectId:t.objectId};myserver.putJournalEntry(e,t.objectId,a,(function(){}),(function(){console.log("WARNING: Error writing journal "+e)}))})),this.$.activityPopup.hidePopup()},duplicateEntry:function(t,e){var n=this;t.metadata.assignmentId?humane.log(l10n.get("CannotDuplicateAssignment")):(stats.trace(constant.viewNames[app.getView()],"duplicate",t.objectId,null),this.loadEntry(t,(function(t,i,o){var a=new datastore.DatastoreObject;a.setMetadata(i),a.setDataAsText(o),a.save(),n.$.activityPopup.hidePopup(),(!e||e.isLast)&&(n.toolbar.removeFilter(),n.loadLocalJournal())})))},loadLocalJournal:function(){this.journal=datastore.find(),this.journal=this.journal.sort((function(t,e){return parseInt(e.metadata.timestamp)-parseInt(t.metadata.timestamp)})),this.journalChanged()},loadRemoteJournal:function(t,e){var n=this,i={field:constant.fieldMetadata,limit:constant.pageJournalSize,offset:void 0!==e?e:0,sort:"-timestamp"},o=this.getToolbar().getSortType();1==o?i.sort="-creation_time":2==o&&(i.sort="-textsize"),myserver.getJournal(t,i,(function(t,e){n.loadResult={offset:e.offset,total:e.total,limit:e.limit},n.journal=e.entries,n.empty=!n.getToolbar().hasFilter()&&!this.loadingError&&0==n.journal.length,n.loadingError=!1,n.journalChanged()}),(function(){console.log("WARNING: Error reading journal "+t),n.loadResult={},n.journal=[],n.loadingError=!0,n.journalChanged()}))},loadEntry:function(t,e){var n;this.journalType==constant.journalLocal?new datastore.DatastoreObject(t.objectId).loadAsText((function(t,n,i){e(t,n,i)})):(this.journalType==constant.journalRemotePrivate?n=preferences.getPrivateJournal():this.journalType==constant.journalRemoteShared&&(n=preferences.getSharedJournal()),myserver.getJournalEntry(n,t.objectId,(function(t,n){e(null,n.entries[0].metadata,n.entries[0].text)}),(function(){console.log("WARNING: Error loading entry "+objectId+" in journal "+n)})))},removeEntry:function(t,e){if(t.metadata.assignmentId)humane.log(l10n.get("CannotDeleteAssignment"));else{if(this.journalType!=constant.journalLocal){i=this.journalType==constant.journalRemotePrivate?preferences.getPrivateJournal():preferences.getSharedJournal(),o=t.objectId;var n=this;return this.toolbar.removeFilter(),stats.trace(constant.viewNames[app.getView()],"remove_entry",o,i),void myserver.deleteJournalEntry(i,o,(function(t,e){n.loadRemoteJournal(i),n.$.activityPopup.hidePopup()}),(function(){console.log("WARNING: Error removing entry "+o+" in journal "+i),n.loadRemoteJournal(i),n.$.activityPopup.hidePopup()}))}if(stats.trace(constant.viewNames[app.getView()],"remove_entry",t.objectId,null),datastore.remove(t.objectId),preferences.isConnected()&&preferences.getOptions("sync")){var i=preferences.getPrivateJournal(),o=t.objectId;myserver.deleteJournalEntry(i,o,(function(t,e){}),(function(){console.log("WARNING: Error removing entry "+o+" in journal "+i)}))}(!e||e.isLast)&&(this.toolbar.removeFilter(),this.loadLocalJournal(),activities.loadEntries(),app.journal=this.journal,app.redraw()),this.$.activityPopup.hidePopup()}},titleEditStart:function(t,e){var n=e.dispatchTarget.owner.$;n.title.setShowing(!1),n.titleEdit.setValue(n.title.getContent()),n.titleEdit.setShowing(!0),n.titleEdit.focus()},titleEditEnd:function(t,e){var n=e.dispatchTarget.owner.$;n.title.setShowing(!0),n.titleEdit.setShowing(!1);var i=n.titleEdit.getValue();if(i!=n.title.getContent()){var o=this.journal[e.index].objectId,a=this;this.loadEntry(this.journal[e.index],(function(t,e,n){if(a.journalType==constant.journalLocal){e.title=i,stats.trace(constant.viewNames[app.getView()],"rename_entry",o,"local");var s=new datastore.DatastoreObject(o);s.setMetadata(e),s.setDataAsText(n),s.save(),a.loadLocalJournal(),activities.loadEntries(),app.journal=a.journal,app.redraw(),preferences.isConnected()&&preferences.getOptions("sync")&&app.otherview.syncJournal()}else{e.title=i,e.timestamp=(new Date).getTime();var l=a.journalType==constant.journalRemotePrivate?preferences.getPrivateJournal():preferences.getSharedJournal(),r={metadata:e,text:n,objectId:o};stats.trace(constant.viewNames[app.getView()],"rename_entry",o,l),myserver.putJournalEntry(l,o,r,(function(){a.loadRemoteJournal(l),preferences.isConnected()&&preferences.getOptions("sync")&&app.otherview.syncJournal()}),(function(){console.log("WARNING: Error updating journal "+l),a.loadRemoteJournal(l)}))}}))}},showLocalJournal:function(){this.changeJournalType(constant.journalLocal),stats.trace(constant.viewNames[app.getView()],"show_journal","local",null),this.loadLocalJournal()},showPrivateCloud:function(){stats.trace(constant.viewNames[app.getView()],"show_journal","private",null),this.changeJournalType(constant.journalRemotePrivate),this.loadRemoteJournal(preferences.getPrivateJournal())},showSharedCloud:function(){stats.trace(constant.viewNames[app.getView()],"show_journal","shared",null),this.changeJournalType(constant.journalRemoteShared),this.loadRemoteJournal(preferences.getSharedJournal())},syncJournal:function(){var t=this;autosync.synchronizeJournal((function(e){e&&(humane.log(l10n.get("RetrievingJournal")),t.$.syncbutton.setShowing(!1),t.$.syncgear.setShowing(!0))}),(function(e,n,i){t.$.syncbutton&&(t.$.syncbutton.setShowing(!0),t.$.syncgear.setShowing(!1),e&&t.journalType==constant.journalLocal&&(t.loadLocalJournal(),app.journal=t.journal,activities.loadEntries(),app.draw()),n&&t.journalType==constant.journalRemotePrivate&&t.loadRemoteJournal(preferences.getPrivateJournal()))}))},changeJournalType:function(t){this.journalType=t,this.$.journalbutton.addRemoveClass("active",t==constant.journalLocal),this.$.cloudonebutton.addRemoveClass("active",t==constant.journalRemotePrivate),this.$.cloudallbutton.addRemoveClass("active",t==constant.journalRemoteShared),this.getToolbar().removeFilter(),this.getToolbar().setMultiselectToolbarVisibility(!1),this.$.warningbox.setShowing(!1)},getJournalType:function(){return this.journalType}}),enyo.kind({name:"Sugar.JournalToolbar",kind:enyo.Control,components:[{name:"unselallbutton",showing:!1,kind:"Sugar.Icon",classes:"journal-unselectall",x:0,y:0,icon:{directory:"icons",icon:"select-none.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"unselectAll"},{name:"selallbutton",showing:!1,kind:"Sugar.Icon",classes:"journal-selectall",x:0,y:0,icon:{directory:"icons",icon:"select-all.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"selectAll"},{name:"split1",showing:!1,classes:"splitbar"},{name:"copyjournalbutton",showing:!1,kind:"Sugar.Icon",classes:"journal-copy",x:0,y:0,icon:{directory:"icons",icon:"copy-journal.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"copySelected"},{name:"copycloudonebutton",showing:!1,kind:"Sugar.Icon",classes:"journal-copy",x:0,y:0,icon:{directory:"icons",icon:"copy-cloud-one.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"copySelected"},{name:"copycloudallbutton",showing:!1,kind:"Sugar.Icon",classes:"journal-copy",x:0,y:0,icon:{directory:"icons",icon:"copy-cloud-all.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"copySelected"},{name:"copydevicebutton",showing:!1,kind:"Sugar.Icon",classes:"journal-copy",x:0,y:0,icon:{directory:"icons",icon:"copy-to-device.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"copySelected"},{name:"duplicatebutton",showing:!1,kind:"Sugar.Icon",classes:"journal-copy",x:0,y:0,icon:{directory:"icons",icon:"duplicate.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"duplicateSelected"},{name:"removebutton",showing:!1,kind:"Sugar.Icon",classes:"journal-remove",x:0,y:0,icon:{directory:"icons",icon:"list-remove.svg"},size:constant.iconSizeList,disabledBackground:"#282828",ontap:"removeSelected"},{name:"split2",showing:!1,classes:"splitbar"},{name:"selectcount",showing:!1,classes:"journal-selectcount"},{name:"favoritebutton",kind:"Sugar.Icon",classes:"journal-filter-favorite",x:0,y:4,icon:{directory:"icons",icon:"emblem-favorite.svg"},size:constant.iconSizeList,ontap:"filterFavorite"},{name:"assignmentbutton",kind:"Sugar.Icon",classes:"journal-filter-assignment",x:0,y:4,icon:{directory:"icons",icon:"assignment.svg"},size:constant.iconSizeList,ontap:"filterAssignment"},{name:"journalsearch",kind:"Sugar.SearchField",onTextChanged:"filterEntries",classes:"journal-filter-text"},{name:"radialbutton",kind:"Button",classes:"toolbutton view-desktop-button",title:"Home",ontap:"gotoDesktop"},{name:"typepalette",kind:"Sugar.Palette",ontap:"showTypePalette",icon:{directory:"icons",icon:"view-type.svg"},size:constant.iconSizeList,classes:"journal-filtertype-palette",contentsClasses:"journal-filtertype-content",contents:[]},{name:"datepalette",kind:"Sugar.Palette",ontap:"showDatePalette",icon:{directory:"icons",icon:"view-created.svg"},size:constant.iconSizeList,classes:"journal-filterdate-palette",contentsClasses:"journal-filterdate-content",contents:[]},{name:"sortpalette",kind:"Sugar.Palette",ontap:"showSortPalette",icon:{directory:"icons",icon:"view-lastedit.svg"},size:constant.iconSizeList,classes:"journal-sort-palette",contentsClasses:"journal-sort-content",contents:[]},{name:"split3",classes:"splitbar journal-split split3"},{name:"fromdevicebutton",kind:"Sugar.Icon",x:0,y:0,icon:{directory:"icons",icon:"copy-from-device.svg"},classes:"journal-fromdevice",title:"CopyFromDevice",size:constant.iconSizeList,ontap:"fromDeviceSelected"},{name:"split4",classes:"splitbar journal-split split4"},{name:"helpbutton",kind:"Button",classes:"toolbutton help-button-journal",title:"Help",ontap:"startTutorial"}],create:function(){this.inherited(arguments),this.localize(),this.typeselected=0,this.dateselected=0,this.sortfield=0,(util.getClientType()==constant.webAppType||util.platform.android||util.platform.ios||util.getClientType()==constant.appType&&!util.platform.electron)&&this.createComponent({name:"file",kind:"Input",type:"file",showing:!1,onchange:"fileSelected"},{owner:this})},rendered:function(){this.inherited(arguments),this.localize()},localize:function(){this.$.favoritebutton.setNodeProperty("title",l10n.get("FilterFavorites")),this.$.assignmentbutton.setNodeProperty("title",l10n.get("FilterAssignment")),this.$.radialbutton.setNodeProperty("title",l10n.get("Home")),this.$.helpbutton.setNodeProperty("title",l10n.get("Tutorial")),this.$.unselallbutton.setNodeProperty("title",l10n.get("UnselectAll")),this.$.selallbutton.setNodeProperty("title",l10n.get("SelectAll")),this.$.removebutton.setNodeProperty("title",l10n.get("Erase")),this.$.copyjournalbutton.setNodeProperty("title",l10n.get("CopyToLocal")),this.$.copycloudonebutton.setNodeProperty("title",l10n.get("CopyToPrivate")),this.$.copycloudallbutton.setNodeProperty("title",l10n.get("CopyToShared")),this.$.copydevicebutton.setNodeProperty("title",l10n.get("CopyToDevice")),this.$.duplicatebutton.setNodeProperty("title",l10n.get("Duplicate")),this.$.journalsearch.setPlaceholder(l10n.get("SearchJournal")),this.$.typepalette.setNodeProperty("title",l10n.get("FilterByType")),this.$.datepalette.setNodeProperty("title",l10n.get("FilterByTime")),this.$.sortpalette.setNodeProperty("title",l10n.get("Sort")),this.$.fromdevicebutton.setNodeProperty("title",l10n.get("CopyFromDevice")),this.$.typepalette.setText(l10n.get("AllType")),this.$.datepalette.setText(l10n.get("Anytime")),this.dates=[l10n.get("Anytime"),l10n.get("Today"),l10n.get("SinceYesterday"),l10n.get("PastWeek"),l10n.get("PastMonth")];var t=[];this.$.datepalette.setHeader(l10n.get("SelectFilter"));for(var e=0;e<this.dates.length;e++)t.push({id:""+(e+1),classes:"journal-filterdate-line",components:[{classes:"journal-filterdate-item",content:this.dates[e]}],ontap:"tapDate"});this.$.datepalette.setItems(t),t=[],this.$.typepalette.setHeader(l10n.get("SelectFilter")),t.push({id:"0",classes:"journal-filtertype-line",components:[{kind:"Sugar.Icon",icon:{directory:"icons",icon:"application-x-generic.svg"},x:5,y:3,size:constant.iconSizeFavorite},{classes:"item-name",content:l10n.get("AllType")}],ontap:"tapLine"});var n=activities.get(),i=[];for(e=0;e<n.length;e++)i.push({id:""+(e+1),classes:"journal-filtertype-line",components:[{kind:"Sugar.Icon",icon:n[e],x:5,y:3,size:constant.iconSizeFavorite},{classes:"item-name",content:n[e].name}],ontap:"tapLine"});i.sort((function(t,e){var n=t.components[1].content,i=e.components[1].content;return n>i?1:n<i?-1:0}));for(e=0;e<i.length;e++)t.push(i[e]);this.$.typepalette.setItems(t),this.sorts=[{text:l10n.get("SortByUpdated"),icon:"view-lastedit.svg"},{text:l10n.get("SortByCreated"),icon:"view-created.svg"},{text:l10n.get("SortBySize"),icon:"view-size.svg"},{text:l10n.get("SortByDueDate"),icon:"view-duedate.svg"}];t=[];this.$.sortpalette.setHeader(l10n.get("SortDisplay"));for(e=0;e<this.sorts.length;e++)t.push({id:""+(e+1),classes:"journal-sort-line",components:[{kind:"Sugar.Icon",icon:{directory:"icons",icon:this.sorts[e].icon},x:5,y:3,size:constant.iconSizeFavorite},{classes:"journal-sort-item",content:this.sorts[e].text}],ontap:"tapSort"});this.$.sortpalette.setItems(t)},gotoDesktop:function(){util.vibrate(),app.showView(constant.radialView)},filterFavorite:function(){this.$.favoritebutton.setColorized(!this.$.favoritebutton.getColorized()),this.$.favoritebutton.render(),this.filterEntries()},filterAssignment:function(){this.$.assignmentbutton.setColorized(!this.$.assignmentbutton.getColorized()),this.$.assignmentbutton.render(),this.filterEntries()},showTypePalette:function(){this.$.typepalette.switchPalette(app.otherview)},tapLine:function(t,e){var n=activities.get(),i=activities.genericActivity();this.typeselected=t.getId(),this.$.typepalette.setIcon(0==this.typeselected?i:n[this.typeselected-1]),this.$.typepalette.setText(0==this.typeselected?l10n.get("AllType"):n[this.typeselected-1].name),this.filterEntries(),this.$.typepalette.switchPalette(app.otherview)},showDatePalette:function(){this.$.datepalette.switchPalette(app.otherview)},tapDate:function(t,e){this.dateselected=t.getId()-1,this.$.datepalette.setText(this.dates[this.dateselected]),this.filterEntries(),this.$.datepalette.switchPalette(app.otherview)},showSortPalette:function(){this.$.sortpalette.switchPalette(app.otherview)},tapSort:function(t,e){this.sortfield=t.getId()-1,this.$.sortpalette.setIcon({directory:"icons",icon:this.sorts[this.sortfield].icon}),this.filterEntries(),this.$.sortpalette.switchPalette(app.otherview)},selectAll:function(){this.$.selallbutton.getDisabled()||app.otherview.selectAll()},unselectAll:function(){this.$.unselallbutton.getDisabled()||app.otherview.unselectAll()},setSelectedCount:function(t,e){t<=1?this.$.selectcount.setContent(l10n.get("Selected_one",{count:t,total:e})):this.$.selectcount.setContent(l10n.get("Selected_other",{count:t,total:e}))},removeSelected:function(){this.$.removebutton.getDisabled()||(this.disableMultiselectToolbarVisibility(),app.otherview.removeSelected())},duplicateSelected:function(){this.$.duplicatebutton.getDisabled()||(this.disableMultiselectToolbarVisibility(),app.otherview.duplicateSelected())},copySelected:function(t,e){var n;t.getDisabled()||(this.disableMultiselectToolbarVisibility(),n="copydevicebutton"==t.name?constant.journalDevice:"copycloudonebutton"==t.name?constant.journalRemotePrivate:"copycloudallbutton"==t.name?constant.journalRemoteShared:constant.journalLocal,app.otherview.copySelected(n))},fromDeviceSelected:function(){util.getClientType()==constant.webAppType||util.platform.android||util.platform.ios||util.getClientType()==constant.appType&&!util.platform.electron?(util.platform.android||util.platform.ios||this.$.file.setNodeProperty("accept",".png,.jpg,.wav,.webm,.json,.mp3,.mp4,.pdf,.txt,.doc,.odt,.csv,.tsv"),this.$.file.setNodeProperty("multiple","true"),this.$.file.hasNode().click()):util.askFiles((function(t,e,n,i){e?humane.log(l10n.get("ErrorLoadingFile",{file:t})):(n.timestamp=(new Date).getTime(),n.creation_time=(new Date).getTime(),datastore.create(n,(function(e){e?humane.log(l10n.get("ErrorLoadingFile",{file:t})):(app.otherview.loadLocalJournal(),preferences.isConnected()&&app.otherview.syncJournal())}),i))}))},fileSelected:function(){for(var t=this.$.file.getNodeProperty("files"),e=0;e<t.length;e++)util.loadFile(t[e],(function(t,e,n,i){e?humane.log(l10n.get("ErrorLoadingFile",{file:t})):n.assignmentId?humane.log(l10n.get("ErrorLoadingFileAssignment",{file:t})):(n.timestamp=(new Date).getTime(),n.creation_time=(new Date).getTime(),datastore.create(n,(function(){app.otherview.loadLocalJournal(),preferences.isConnected()&&app.otherview.syncJournal()}),i))}))},hasFilter:function(){return""!=this.$.journalsearch.getText()||this.$.favoritebutton.getColorized()||this.typeselected>0||this.dateselected>0||this.$.assignmentbutton.getColorized()},getSortType:function(){return this.sortfield},filterEntries:function(){var t=this.$.journalsearch.getText(),e=!!this.$.favoritebutton.getColorized()||void 0,n=!!this.$.assignmentbutton.getColorized()||void 0,i=this.typeselected,o=i<=0?void 0:activities.get()[i-1].id,a=(i=this.dateselected)<=0?void 0:util.getDateRange(i).min,s="q="+t;e&&(s+="&favorite=true"),n&&(s+="&assignment=true"),o&&(s+="&type="+o),a&&(s+="&time="+a),stats.trace(constant.viewNames[app.getView()],"search",s,null),app.otherview.filterEntries(t,e,n,o,a,void 0,this.sortfield)},removeFilter:function(){this.typeselected=0,this.$.typepalette.setIcon({directory:"icons",icon:"application-x-generic.svg"}),this.dateselected=0,this.sortfield=0,this.$.sortpalette.setIcon({directory:"icons",icon:"view-lastedit.svg"}),this.$.favoritebutton.setColorized(!1),this.$.journalsearch.setText(""),this.$.assignmentbutton.setColorized(!1),this.render()},setMultiselectToolbarVisibility:function(t){this.$.typepalette.isOpen()&&this.$.typepalette.switchPalette(app.otherview),this.$.datepalette.isOpen()&&this.$.datepalette.switchPalette(app.otherview),this.$.sortpalette.isOpen()&&this.$.sortpalette.switchPalette(app.otherview);var e=app.otherview.getJournalType();this.$.favoritebutton.setShowing(!t),this.$.journalsearch.setShowing(!t),this.$.radialbutton.setShowing(!t),this.$.typepalette.setShowing(!t),this.$.datepalette.setShowing(!t),this.$.sortpalette.setShowing(!t),this.$.split3.setShowing(!t&&e==constant.journalLocal),this.$.fromdevicebutton.setShowing(!t&&e==constant.journalLocal),this.$.split4.setShowing(!t),this.$.helpbutton.setShowing(!t),this.$.unselallbutton.setShowing(t),this.$.selallbutton.setShowing(t),this.$.split1.setShowing(t),this.$.removebutton.setShowing(t),this.$.copyjournalbutton.setShowing(t&&e!=constant.journalLocal),this.$.duplicatebutton.setShowing(t&&e==constant.journalLocal),this.$.copycloudonebutton.setShowing(t&&e!=constant.journalRemotePrivate&&preferences.isConnected()),this.$.copycloudallbutton.setShowing(t&&e!=constant.journalRemoteShared&&preferences.isConnected()),this.$.copydevicebutton.setShowing(t),this.$.split2.setShowing(t),this.$.selectcount.setShowing(t),this.$.unselallbutton.setDisabled(!t),this.$.selallbutton.setDisabled(!t),this.$.removebutton.setDisabled(!t),this.$.copyjournalbutton.setDisabled(!t),this.$.copycloudonebutton.setDisabled(!t),this.$.copycloudallbutton.setDisabled(!t),this.$.copydevicebutton.setDisabled(!t),this.$.duplicatebutton.setDisabled(!t),this.$.selectcount.addRemoveClass("journal-selectcount-disabled",!t)},disableMultiselectToolbarVisibility:function(){this.$.unselallbutton.setDisabled(!0),this.$.selallbutton.setDisabled(!0),this.$.removebutton.setDisabled(!0),this.$.copyjournalbutton.setDisabled(!0),this.$.copycloudonebutton.setDisabled(!0),this.$.copycloudallbutton.setDisabled(!0),this.$.copydevicebutton.setDisabled(!0),this.$.duplicatebutton.setDisabled(!0),this.$.selectcount.addRemoveClass("journal-selectcount-disabled",!0)},startTutorial:function(){tutorial.setElement("favoritebutton",this.$.favoritebutton.getAttribute("id")),tutorial.setElement("assignmentbutton",this.$.assignmentbutton.getAttribute("id")),tutorial.setElement("searchtext",this.$.journalsearch.getAttribute("id")),tutorial.setElement("typeselect",this.$.typepalette.getAttribute("id")),tutorial.setElement("timeselect",this.$.datepalette.getAttribute("id")),tutorial.setElement("sortselect",this.$.sortpalette.getAttribute("id")),tutorial.setElement("fromdevicebutton",this.$.fromdevicebutton.getAttribute("id")),tutorial.setElement("radialbutton",this.$.radialbutton.getAttribute("id")),stats.trace(constant.viewNames[app.getView()],"tutorial","start",null),tutorial.start()}});